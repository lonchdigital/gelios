import{g as ix,j as Fc,c as Jv,a as e0,$ as ce}from"./jquery-CqDs7TUd.js";var Sm={exports:{}};/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var el=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",nx=function(){for(var i=["Edge","Trident","Firefox"],e=0;e<i.length;e+=1)if(el&&navigator.userAgent.indexOf(i[e])>=0)return 1;return 0}();function sx(i){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,i()}))}}function rx(i){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,i()},nx))}}var ax=el&&window.Promise,ox=ax?sx:rx;function t0(i){var e={};return i&&e.toString.call(i)==="[object Function]"}function Mr(i,e){if(i.nodeType!==1)return[];var t=i.ownerDocument.defaultView,n=t.getComputedStyle(i,null);return e?n[e]:n}function Uf(i){return i.nodeName==="HTML"?i:i.parentNode||i.host}function tl(i){if(!i)return document.body;switch(i.nodeName){case"HTML":case"BODY":return i.ownerDocument.body;case"#document":return i.body}var e=Mr(i),t=e.overflow,n=e.overflowX,s=e.overflowY;return/(auto|scroll|overlay)/.test(t+s+n)?i:tl(Uf(i))}function i0(i){return i&&i.referenceNode?i.referenceNode:i}var Tm=el&&!!(window.MSInputMethodContext&&document.documentMode),Mm=el&&/MSIE 10/.test(navigator.userAgent);function Da(i){return i===11?Tm:i===10?Mm:Tm||Mm}function ba(i){if(!i)return document.documentElement;for(var e=Da(10)?document.body:null,t=i.offsetParent||null;t===e&&i.nextElementSibling;)t=(i=i.nextElementSibling).offsetParent;var n=t&&t.nodeName;return!n||n==="BODY"||n==="HTML"?i?i.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(t.nodeName)!==-1&&Mr(t,"position")==="static"?ba(t):t}function lx(i){var e=i.nodeName;return e==="BODY"?!1:e==="HTML"||ba(i.firstElementChild)===i}function uh(i){return i.parentNode!==null?uh(i.parentNode):i}function Uc(i,e){if(!i||!i.nodeType||!e||!e.nodeType)return document.documentElement;var t=i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=t?i:e,s=t?e:i,r=document.createRange();r.setStart(n,0),r.setEnd(s,0);var a=r.commonAncestorContainer;if(i!==a&&e!==a||n.contains(s))return lx(a)?a:ba(a);var o=uh(i);return o.host?Uc(o.host,e):Uc(i,uh(e).host)}function _a(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",t=e==="top"?"scrollTop":"scrollLeft",n=i.nodeName;if(n==="BODY"||n==="HTML"){var s=i.ownerDocument.documentElement,r=i.ownerDocument.scrollingElement||s;return r[t]}return i[t]}function cx(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=_a(e,"top"),s=_a(e,"left"),r=t?-1:1;return i.top+=n*r,i.bottom+=n*r,i.left+=s*r,i.right+=s*r,i}function Cm(i,e){var t=e==="x"?"Left":"Top",n=t==="Left"?"Right":"Bottom";return parseFloat(i["border"+t+"Width"])+parseFloat(i["border"+n+"Width"])}function Am(i,e,t,n){return Math.max(e["offset"+i],e["scroll"+i],t["client"+i],t["offset"+i],t["scroll"+i],Da(10)?parseInt(t["offset"+i])+parseInt(n["margin"+(i==="Height"?"Top":"Left")])+parseInt(n["margin"+(i==="Height"?"Bottom":"Right")]):0)}function n0(i){var e=i.body,t=i.documentElement,n=Da(10)&&getComputedStyle(t);return{height:Am("Height",e,t,n),width:Am("Width",e,t,n)}}var ux=function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")},dx=function(){function i(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),wa=function(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i},ln=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i};function zs(i){return ln({},i,{right:i.left+i.width,bottom:i.top+i.height})}function dh(i){var e={};try{if(Da(10)){e=i.getBoundingClientRect();var t=_a(i,"top"),n=_a(i,"left");e.top+=t,e.left+=n,e.bottom+=t,e.right+=n}else e=i.getBoundingClientRect()}catch{}var s={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r=i.nodeName==="HTML"?n0(i.ownerDocument):{},a=r.width||i.clientWidth||s.width,o=r.height||i.clientHeight||s.height,l=i.offsetWidth-a,u=i.offsetHeight-o;if(l||u){var c=Mr(i);l-=Cm(c,"x"),u-=Cm(c,"y"),s.width-=l,s.height-=u}return zs(s)}function zf(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=Da(10),s=e.nodeName==="HTML",r=dh(i),a=dh(e),o=tl(i),l=Mr(e),u=parseFloat(l.borderTopWidth),c=parseFloat(l.borderLeftWidth);t&&s&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var d=zs({top:r.top-a.top-u,left:r.left-a.left-c,width:r.width,height:r.height});if(d.marginTop=0,d.marginLeft=0,!n&&s){var h=parseFloat(l.marginTop),f=parseFloat(l.marginLeft);d.top-=u-h,d.bottom-=u-h,d.left-=c-f,d.right-=c-f,d.marginTop=h,d.marginLeft=f}return(n&&!t?e.contains(o):e===o&&o.nodeName!=="BODY")&&(d=cx(d,e)),d}function hx(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=i.ownerDocument.documentElement,n=zf(i,t),s=Math.max(t.clientWidth,window.innerWidth||0),r=Math.max(t.clientHeight,window.innerHeight||0),a=e?0:_a(t),o=e?0:_a(t,"left"),l={top:a-n.top+n.marginTop,left:o-n.left+n.marginLeft,width:s,height:r};return zs(l)}function s0(i){var e=i.nodeName;if(e==="BODY"||e==="HTML")return!1;if(Mr(i,"position")==="fixed")return!0;var t=Uf(i);return t?s0(t):!1}function r0(i){if(!i||!i.parentElement||Da())return document.documentElement;for(var e=i.parentElement;e&&Mr(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function Bf(i,e,t,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r={top:0,left:0},a=s?r0(i):Uc(i,i0(e));if(n==="viewport")r=hx(a,s);else{var o=void 0;n==="scrollParent"?(o=tl(Uf(e)),o.nodeName==="BODY"&&(o=i.ownerDocument.documentElement)):n==="window"?o=i.ownerDocument.documentElement:o=n;var l=zf(o,a,s);if(o.nodeName==="HTML"&&!s0(a)){var u=n0(i.ownerDocument),c=u.height,d=u.width;r.top+=l.top-l.marginTop,r.bottom=c+l.top,r.left+=l.left-l.marginLeft,r.right=d+l.left}else r=l}t=t||0;var h=typeof t=="number";return r.left+=h?t:t.left||0,r.top+=h?t:t.top||0,r.right-=h?t:t.right||0,r.bottom-=h?t:t.bottom||0,r}function fx(i){var e=i.width,t=i.height;return e*t}function a0(i,e,t,n,s){var r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(i.indexOf("auto")===-1)return i;var a=Bf(t,n,r,s),o={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(o).map(function(h){return ln({key:h},o[h],{area:fx(o[h])})}).sort(function(h,f){return f.area-h.area}),u=l.filter(function(h){var f=h.width,p=h.height;return f>=t.clientWidth&&p>=t.clientHeight}),c=u.length>0?u[0].key:l[0].key,d=i.split("-")[1];return c+(d?"-"+d:"")}function o0(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=n?r0(e):Uc(e,i0(t));return zf(t,s,n)}function l0(i){var e=i.ownerDocument.defaultView,t=e.getComputedStyle(i),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),s=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0),r={width:i.offsetWidth+s,height:i.offsetHeight+n};return r}function zc(i){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return i.replace(/left|right|bottom|top/g,function(t){return e[t]})}function c0(i,e,t){t=t.split("-")[0];var n=l0(i),s={width:n.width,height:n.height},r=["right","left"].indexOf(t)!==-1,a=r?"top":"left",o=r?"left":"top",l=r?"height":"width",u=r?"width":"height";return s[a]=e[a]+e[l]/2-n[l]/2,t===o?s[o]=e[o]-n[u]:s[o]=e[zc(o)],s}function il(i,e){return Array.prototype.find?i.find(e):i.filter(e)[0]}function px(i,e,t){if(Array.prototype.findIndex)return i.findIndex(function(s){return s[e]===t});var n=il(i,function(s){return s[e]===t});return i.indexOf(n)}function u0(i,e,t){var n=t===void 0?i:i.slice(0,px(i,"name",t));return n.forEach(function(s){s.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=s.function||s.fn;s.enabled&&t0(r)&&(e.offsets.popper=zs(e.offsets.popper),e.offsets.reference=zs(e.offsets.reference),e=r(e,s))}),e}function mx(){if(!this.state.isDestroyed){var i={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};i.offsets.reference=o0(this.state,this.popper,this.reference,this.options.positionFixed),i.placement=a0(this.options.placement,i.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),i.originalPlacement=i.placement,i.positionFixed=this.options.positionFixed,i.offsets.popper=c0(this.popper,i.offsets.reference,i.placement),i.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",i=u0(this.modifiers,i),this.state.isCreated?this.options.onUpdate(i):(this.state.isCreated=!0,this.options.onCreate(i))}}function d0(i,e){return i.some(function(t){var n=t.name,s=t.enabled;return s&&n===e})}function Hf(i){for(var e=[!1,"ms","Webkit","Moz","O"],t=i.charAt(0).toUpperCase()+i.slice(1),n=0;n<e.length;n++){var s=e[n],r=s?""+s+t:i;if(typeof document.body.style[r]<"u")return r}return null}function gx(){return this.state.isDestroyed=!0,d0(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Hf("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function h0(i){var e=i.ownerDocument;return e?e.defaultView:window}function f0(i,e,t,n){var s=i.nodeName==="BODY",r=s?i.ownerDocument.defaultView:i;r.addEventListener(e,t,{passive:!0}),s||f0(tl(r.parentNode),e,t,n),n.push(r)}function vx(i,e,t,n){t.updateBound=n,h0(i).addEventListener("resize",t.updateBound,{passive:!0});var s=tl(i);return f0(s,"scroll",t.updateBound,t.scrollParents),t.scrollElement=s,t.eventsEnabled=!0,t}function yx(){this.state.eventsEnabled||(this.state=vx(this.reference,this.options,this.state,this.scheduleUpdate))}function bx(i,e){return h0(i).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function _x(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=bx(this.reference,this.state))}function Vf(i){return i!==""&&!isNaN(parseFloat(i))&&isFinite(i)}function hh(i,e){Object.keys(e).forEach(function(t){var n="";["width","height","top","right","bottom","left"].indexOf(t)!==-1&&Vf(e[t])&&(n="px"),i.style[t]=e[t]+n})}function wx(i,e){Object.keys(e).forEach(function(t){var n=e[t];n!==!1?i.setAttribute(t,e[t]):i.removeAttribute(t)})}function Ex(i){return hh(i.instance.popper,i.styles),wx(i.instance.popper,i.attributes),i.arrowElement&&Object.keys(i.arrowStyles).length&&hh(i.arrowElement,i.arrowStyles),i}function xx(i,e,t,n,s){var r=o0(s,e,i,t.positionFixed),a=a0(t.placement,r,e,i,t.modifiers.flip.boundariesElement,t.modifiers.flip.padding);return e.setAttribute("x-placement",a),hh(e,{position:t.positionFixed?"fixed":"absolute"}),t}function Sx(i,e){var t=i.offsets,n=t.popper,s=t.reference,r=Math.round,a=Math.floor,o=function(m){return m},l=r(s.width),u=r(n.width),c=["left","right"].indexOf(i.placement)!==-1,d=i.placement.indexOf("-")!==-1,h=l%2===u%2,f=l%2===1&&u%2===1,p=e?c||d||h?r:a:o,g=e?r:o;return{left:p(f&&!d&&e?n.left-1:n.left),top:g(n.top),bottom:g(n.bottom),right:p(n.right)}}var Tx=el&&/Firefox/i.test(navigator.userAgent);function Mx(i,e){var t=e.x,n=e.y,s=i.offsets.popper,r=il(i.instance.modifiers,function(_){return _.name==="applyStyle"}).gpuAcceleration;r!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=r!==void 0?r:e.gpuAcceleration,o=ba(i.instance.popper),l=dh(o),u={position:s.position},c=Sx(i,window.devicePixelRatio<2||!Tx),d=t==="bottom"?"top":"bottom",h=n==="right"?"left":"right",f=Hf("transform"),p=void 0,g=void 0;if(d==="bottom"?o.nodeName==="HTML"?g=-o.clientHeight+c.bottom:g=-l.height+c.bottom:g=c.top,h==="right"?o.nodeName==="HTML"?p=-o.clientWidth+c.right:p=-l.width+c.right:p=c.left,a&&f)u[f]="translate3d("+p+"px, "+g+"px, 0)",u[d]=0,u[h]=0,u.willChange="transform";else{var v=d==="bottom"?-1:1,m=h==="right"?-1:1;u[d]=g*v,u[h]=p*m,u.willChange=d+", "+h}var b={"x-placement":i.placement};return i.attributes=ln({},b,i.attributes),i.styles=ln({},u,i.styles),i.arrowStyles=ln({},i.offsets.arrow,i.arrowStyles),i}function p0(i,e,t){var n=il(i,function(o){var l=o.name;return l===e}),s=!!n&&i.some(function(o){return o.name===t&&o.enabled&&o.order<n.order});if(!s){var r="`"+e+"`",a="`"+t+"`";console.warn(a+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return s}function Cx(i,e){var t;if(!p0(i.instance.modifiers,"arrow","keepTogether"))return i;var n=e.element;if(typeof n=="string"){if(n=i.instance.popper.querySelector(n),!n)return i}else if(!i.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),i;var s=i.placement.split("-")[0],r=i.offsets,a=r.popper,o=r.reference,l=["left","right"].indexOf(s)!==-1,u=l?"height":"width",c=l?"Top":"Left",d=c.toLowerCase(),h=l?"left":"top",f=l?"bottom":"right",p=l0(n)[u];o[f]-p<a[d]&&(i.offsets.popper[d]-=a[d]-(o[f]-p)),o[d]+p>a[f]&&(i.offsets.popper[d]+=o[d]+p-a[f]),i.offsets.popper=zs(i.offsets.popper);var g=o[d]+o[u]/2-p/2,v=Mr(i.instance.popper),m=parseFloat(v["margin"+c]),b=parseFloat(v["border"+c+"Width"]),_=g-i.offsets.popper[d]-m-b;return _=Math.max(Math.min(a[u]-p,_),0),i.arrowElement=n,i.offsets.arrow=(t={},wa(t,d,Math.round(_)),wa(t,h,""),t),i}function Ax(i){return i==="end"?"start":i==="start"?"end":i}var m0=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],td=m0.slice(3);function Pm(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=td.indexOf(i),n=td.slice(t+1).concat(td.slice(0,t));return e?n.reverse():n}var id={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Px(i,e){if(d0(i.instance.modifiers,"inner")||i.flipped&&i.placement===i.originalPlacement)return i;var t=Bf(i.instance.popper,i.instance.reference,e.padding,e.boundariesElement,i.positionFixed),n=i.placement.split("-")[0],s=zc(n),r=i.placement.split("-")[1]||"",a=[];switch(e.behavior){case id.FLIP:a=[n,s];break;case id.CLOCKWISE:a=Pm(n);break;case id.COUNTERCLOCKWISE:a=Pm(n,!0);break;default:a=e.behavior}return a.forEach(function(o,l){if(n!==o||a.length===l+1)return i;n=i.placement.split("-")[0],s=zc(n);var u=i.offsets.popper,c=i.offsets.reference,d=Math.floor,h=n==="left"&&d(u.right)>d(c.left)||n==="right"&&d(u.left)<d(c.right)||n==="top"&&d(u.bottom)>d(c.top)||n==="bottom"&&d(u.top)<d(c.bottom),f=d(u.left)<d(t.left),p=d(u.right)>d(t.right),g=d(u.top)<d(t.top),v=d(u.bottom)>d(t.bottom),m=n==="left"&&f||n==="right"&&p||n==="top"&&g||n==="bottom"&&v,b=["top","bottom"].indexOf(n)!==-1,_=!!e.flipVariations&&(b&&r==="start"&&f||b&&r==="end"&&p||!b&&r==="start"&&g||!b&&r==="end"&&v),y=!!e.flipVariationsByContent&&(b&&r==="start"&&p||b&&r==="end"&&f||!b&&r==="start"&&v||!b&&r==="end"&&g),M=_||y;(h||m||M)&&(i.flipped=!0,(h||m)&&(n=a[l+1]),M&&(r=Ax(r)),i.placement=n+(r?"-"+r:""),i.offsets.popper=ln({},i.offsets.popper,c0(i.instance.popper,i.offsets.reference,i.placement)),i=u0(i.instance.modifiers,i,"flip"))}),i}function Lx(i){var e=i.offsets,t=e.popper,n=e.reference,s=i.placement.split("-")[0],r=Math.floor,a=["top","bottom"].indexOf(s)!==-1,o=a?"right":"bottom",l=a?"left":"top",u=a?"width":"height";return t[o]<r(n[l])&&(i.offsets.popper[l]=r(n[l])-t[u]),t[l]>r(n[o])&&(i.offsets.popper[l]=r(n[o])),i}function Rx(i,e,t,n){var s=i.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+s[1],a=s[2];if(!r)return i;if(a.indexOf("%")===0){var o=void 0;switch(a){case"%p":o=t;break;case"%":case"%r":default:o=n}var l=zs(o);return l[e]/100*r}else if(a==="vh"||a==="vw"){var u=void 0;return a==="vh"?u=Math.max(document.documentElement.clientHeight,window.innerHeight||0):u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),u/100*r}else return r}function Ix(i,e,t,n){var s=[0,0],r=["right","left"].indexOf(n)!==-1,a=i.split(/(\+|\-)/).map(function(c){return c.trim()}),o=a.indexOf(il(a,function(c){return c.search(/,|\s/)!==-1}));a[o]&&a[o].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=o!==-1?[a.slice(0,o).concat([a[o].split(l)[0]]),[a[o].split(l)[1]].concat(a.slice(o+1))]:[a];return u=u.map(function(c,d){var h=(d===1?!r:r)?"height":"width",f=!1;return c.reduce(function(p,g){return p[p.length-1]===""&&["+","-"].indexOf(g)!==-1?(p[p.length-1]=g,f=!0,p):f?(p[p.length-1]+=g,f=!1,p):p.concat(g)},[]).map(function(p){return Rx(p,h,e,t)})}),u.forEach(function(c,d){c.forEach(function(h,f){Vf(h)&&(s[d]+=h*(c[f-1]==="-"?-1:1))})}),s}function Ox(i,e){var t=e.offset,n=i.placement,s=i.offsets,r=s.popper,a=s.reference,o=n.split("-")[0],l=void 0;return Vf(+t)?l=[+t,0]:l=Ix(t,r,a,o),o==="left"?(r.top+=l[0],r.left-=l[1]):o==="right"?(r.top+=l[0],r.left+=l[1]):o==="top"?(r.left+=l[0],r.top-=l[1]):o==="bottom"&&(r.left+=l[0],r.top+=l[1]),i.popper=r,i}function Dx(i,e){var t=e.boundariesElement||ba(i.instance.popper);i.instance.reference===t&&(t=ba(t));var n=Hf("transform"),s=i.instance.popper.style,r=s.top,a=s.left,o=s[n];s.top="",s.left="",s[n]="";var l=Bf(i.instance.popper,i.instance.reference,e.padding,t,i.positionFixed);s.top=r,s.left=a,s[n]=o,e.boundaries=l;var u=e.priority,c=i.offsets.popper,d={primary:function(f){var p=c[f];return c[f]<l[f]&&!e.escapeWithReference&&(p=Math.max(c[f],l[f])),wa({},f,p)},secondary:function(f){var p=f==="right"?"left":"top",g=c[p];return c[f]>l[f]&&!e.escapeWithReference&&(g=Math.min(c[p],l[f]-(f==="right"?c.width:c.height))),wa({},p,g)}};return u.forEach(function(h){var f=["left","top"].indexOf(h)!==-1?"primary":"secondary";c=ln({},c,d[f](h))}),i.offsets.popper=c,i}function kx(i){var e=i.placement,t=e.split("-")[0],n=e.split("-")[1];if(n){var s=i.offsets,r=s.reference,a=s.popper,o=["bottom","top"].indexOf(t)!==-1,l=o?"left":"top",u=o?"width":"height",c={start:wa({},l,r[l]),end:wa({},l,r[l]+r[u]-a[u])};i.offsets.popper=ln({},a,c[n])}return i}function Nx(i){if(!p0(i.instance.modifiers,"hide","preventOverflow"))return i;var e=i.offsets.reference,t=il(i.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(e.bottom<t.top||e.left>t.right||e.top>t.bottom||e.right<t.left){if(i.hide===!0)return i;i.hide=!0,i.attributes["x-out-of-boundaries"]=""}else{if(i.hide===!1)return i;i.hide=!1,i.attributes["x-out-of-boundaries"]=!1}return i}function Fx(i){var e=i.placement,t=e.split("-")[0],n=i.offsets,s=n.popper,r=n.reference,a=["left","right"].indexOf(t)!==-1,o=["top","left"].indexOf(t)===-1;return s[a?"left":"top"]=r[t]-(o?s[a?"width":"height"]:0),i.placement=zc(e),i.offsets.popper=zs(s),i}var Ux={shift:{order:100,enabled:!0,fn:kx},offset:{order:200,enabled:!0,fn:Ox,offset:0},preventOverflow:{order:300,enabled:!0,fn:Dx,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Lx},arrow:{order:500,enabled:!0,fn:Cx,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:Px,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:Fx},hide:{order:800,enabled:!0,fn:Nx},computeStyle:{order:850,enabled:!0,fn:Mx,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Ex,onLoad:xx,gpuAcceleration:void 0}},zx={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Ux},pu=function(){function i(e,t){var n=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ux(this,i),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=ox(this.update.bind(this)),this.options=ln({},i.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(ln({},i.Defaults.modifiers,s.modifiers)).forEach(function(a){n.options.modifiers[a]=ln({},i.Defaults.modifiers[a]||{},s.modifiers?s.modifiers[a]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return ln({name:a},n.options.modifiers[a])}).sort(function(a,o){return a.order-o.order}),this.modifiers.forEach(function(a){a.enabled&&t0(a.onLoad)&&a.onLoad(n.reference,n.popper,n.options,a,n.state)}),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return dx(i,[{key:"update",value:function(){return mx.call(this)}},{key:"destroy",value:function(){return gx.call(this)}},{key:"enableEventListeners",value:function(){return yx.call(this)}},{key:"disableEventListeners",value:function(){return _x.call(this)}}]),i}();pu.Utils=(typeof window<"u"?window:global).PopperUtils;pu.placements=m0;pu.Defaults=zx;const Bx=Object.freeze(Object.defineProperty({__proto__:null,default:pu},Symbol.toStringTag,{value:"Module"})),Hx=ix(Bx);/*!
  * Bootstrap v4.6.2 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(i,e){(function(t,n){n(e,Fc,Hx)})(Jv,function(t,n,s){function r(fe){return fe&&typeof fe=="object"&&"default"in fe?fe:{default:fe}}var a=r(n),o=r(s);function l(fe,ne){for(var te=0;te<ne.length;te++){var L=ne[te];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(fe,L.key,L)}}function u(fe,ne,te){return te&&l(fe,te),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function c(){return c=Object.assign?Object.assign.bind():function(fe){for(var ne=1;ne<arguments.length;ne++){var te=arguments[ne];for(var L in te)Object.prototype.hasOwnProperty.call(te,L)&&(fe[L]=te[L])}return fe},c.apply(this,arguments)}function d(fe,ne){fe.prototype=Object.create(ne.prototype),fe.prototype.constructor=fe,h(fe,ne)}function h(fe,ne){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,G){return L.__proto__=G,L},h(fe,ne)}var f="transitionend",p=1e6,g=1e3;function v(fe){return fe===null||typeof fe>"u"?""+fe:{}.toString.call(fe).match(/\s([a-z]+)/i)[1].toLowerCase()}function m(){return{bindType:f,delegateType:f,handle:function(ne){if(a.default(ne.target).is(this))return ne.handleObj.handler.apply(this,arguments)}}}function b(fe){var ne=this,te=!1;return a.default(this).one(y.TRANSITION_END,function(){te=!0}),setTimeout(function(){te||y.triggerTransitionEnd(ne)},fe),this}function _(){a.default.fn.emulateTransitionEnd=b,a.default.event.special[y.TRANSITION_END]=m()}var y={TRANSITION_END:"bsTransitionEnd",getUID:function(ne){do ne+=~~(Math.random()*p);while(document.getElementById(ne));return ne},getSelectorFromElement:function(ne){var te=ne.getAttribute("data-target");if(!te||te==="#"){var L=ne.getAttribute("href");te=L&&L!=="#"?L.trim():""}try{return document.querySelector(te)?te:null}catch{return null}},getTransitionDurationFromElement:function(ne){if(!ne)return 0;var te=a.default(ne).css("transition-duration"),L=a.default(ne).css("transition-delay"),G=parseFloat(te),Q=parseFloat(L);return!G&&!Q?0:(te=te.split(",")[0],L=L.split(",")[0],(parseFloat(te)+parseFloat(L))*g)},reflow:function(ne){return ne.offsetHeight},triggerTransitionEnd:function(ne){a.default(ne).trigger(f)},supportsTransitionEnd:function(){return!!f},isElement:function(ne){return(ne[0]||ne).nodeType},typeCheckConfig:function(ne,te,L){for(var G in L)if(Object.prototype.hasOwnProperty.call(L,G)){var Q=L[G],ve=te[G],_e=ve&&y.isElement(ve)?"element":v(ve);if(!new RegExp(Q).test(_e))throw new Error(ne.toUpperCase()+": "+('Option "'+G+'" provided type "'+_e+'" ')+('but expected type "'+Q+'".'))}},findShadowRoot:function(ne){if(!document.documentElement.attachShadow)return null;if(typeof ne.getRootNode=="function"){var te=ne.getRootNode();return te instanceof ShadowRoot?te:null}return ne instanceof ShadowRoot?ne:ne.parentNode?y.findShadowRoot(ne.parentNode):null},jQueryDetection:function(){if(typeof a.default>"u")throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var ne=a.default.fn.jquery.split(" ")[0].split("."),te=1,L=2,G=9,Q=1,ve=4;if(ne[0]<L&&ne[1]<G||ne[0]===te&&ne[1]===G&&ne[2]<Q||ne[0]>=ve)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};y.jQueryDetection(),_();var M="alert",x="4.6.2",S="bs.alert",A="."+S,E=".data-api",w=a.default.fn[M],C="alert",P="fade",T="show",R="close"+A,F="closed"+A,z="click"+A+E,D='[data-dismiss="alert"]',O=function(){function fe(te){this._element=te}var ne=fe.prototype;return ne.close=function(L){var G=this._element;L&&(G=this._getRootElement(L));var Q=this._triggerCloseEvent(G);Q.isDefaultPrevented()||this._removeElement(G)},ne.dispose=function(){a.default.removeData(this._element,S),this._element=null},ne._getRootElement=function(L){var G=y.getSelectorFromElement(L),Q=!1;return G&&(Q=document.querySelector(G)),Q||(Q=a.default(L).closest("."+C)[0]),Q},ne._triggerCloseEvent=function(L){var G=a.default.Event(R);return a.default(L).trigger(G),G},ne._removeElement=function(L){var G=this;if(a.default(L).removeClass(T),!a.default(L).hasClass(P)){this._destroyElement(L);return}var Q=y.getTransitionDurationFromElement(L);a.default(L).one(y.TRANSITION_END,function(ve){return G._destroyElement(L,ve)}).emulateTransitionEnd(Q)},ne._destroyElement=function(L){a.default(L).detach().trigger(F).remove()},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this),Q=G.data(S);Q||(Q=new fe(this),G.data(S,Q)),L==="close"&&Q[L](this)})},fe._handleDismiss=function(L){return function(G){G&&G.preventDefault(),L.close(this)}},u(fe,null,[{key:"VERSION",get:function(){return x}}]),fe}();a.default(document).on(z,D,O._handleDismiss(new O)),a.default.fn[M]=O._jQueryInterface,a.default.fn[M].Constructor=O,a.default.fn[M].noConflict=function(){return a.default.fn[M]=w,O._jQueryInterface};var j="button",k="4.6.2",I="bs.button",U="."+I,B=".data-api",V=a.default.fn[j],H="active",Y="btn",J="focus",ee="click"+U+B,se="focus"+U+B+" "+("blur"+U+B),ye="load"+U+B,de='[data-toggle^="button"]',W='[data-toggle="buttons"]',Te='[data-toggle="button"]',he='[data-toggle="buttons"] .btn',Ae='input:not([type="hidden"])',Ee=".active",Ne=".btn",Ie=function(){function fe(te){this._element=te,this.shouldAvoidTriggerChange=!1}var ne=fe.prototype;return ne.toggle=function(){var L=!0,G=!0,Q=a.default(this._element).closest(W)[0];if(Q){var ve=this._element.querySelector(Ae);if(ve){if(ve.type==="radio")if(ve.checked&&this._element.classList.contains(H))L=!1;else{var _e=Q.querySelector(Ee);_e&&a.default(_e).removeClass(H)}L&&((ve.type==="checkbox"||ve.type==="radio")&&(ve.checked=!this._element.classList.contains(H)),this.shouldAvoidTriggerChange||a.default(ve).trigger("change")),ve.focus(),G=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(G&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(H)),L&&a.default(this._element).toggleClass(H))},ne.dispose=function(){a.default.removeData(this._element,I),this._element=null},fe._jQueryInterface=function(L,G){return this.each(function(){var Q=a.default(this),ve=Q.data(I);ve||(ve=new fe(this),Q.data(I,ve)),ve.shouldAvoidTriggerChange=G,L==="toggle"&&ve[L]()})},u(fe,null,[{key:"VERSION",get:function(){return k}}]),fe}();a.default(document).on(ee,de,function(fe){var ne=fe.target,te=ne;if(a.default(ne).hasClass(Y)||(ne=a.default(ne).closest(Ne)[0]),!ne||ne.hasAttribute("disabled")||ne.classList.contains("disabled"))fe.preventDefault();else{var L=ne.querySelector(Ae);if(L&&(L.hasAttribute("disabled")||L.classList.contains("disabled"))){fe.preventDefault();return}(te.tagName==="INPUT"||ne.tagName!=="LABEL")&&Ie._jQueryInterface.call(a.default(ne),"toggle",te.tagName==="INPUT")}}).on(se,de,function(fe){var ne=a.default(fe.target).closest(Ne)[0];a.default(ne).toggleClass(J,/^focus(in)?$/.test(fe.type))}),a.default(window).on(ye,function(){for(var fe=[].slice.call(document.querySelectorAll(he)),ne=0,te=fe.length;ne<te;ne++){var L=fe[ne],G=L.querySelector(Ae);G.checked||G.hasAttribute("checked")?L.classList.add(H):L.classList.remove(H)}fe=[].slice.call(document.querySelectorAll(Te));for(var Q=0,ve=fe.length;Q<ve;Q++){var _e=fe[Q];_e.getAttribute("aria-pressed")==="true"?_e.classList.add(H):_e.classList.remove(H)}}),a.default.fn[j]=Ie._jQueryInterface,a.default.fn[j].Constructor=Ie,a.default.fn[j].noConflict=function(){return a.default.fn[j]=V,Ie._jQueryInterface};var Pe="carousel",K="4.6.2",N="bs.carousel",X="."+N,ie=".data-api",ae=a.default.fn[Pe],re=37,Ce=39,Me=500,Se=40,Oe="carousel",we="active",Fe="slide",Ge="carousel-item-right",Je="carousel-item-left",$e="carousel-item-next",qe="carousel-item-prev",at="pointer-event",dt="next",oe="prev",Le="left",be="right",xe="slide"+X,ke="slid"+X,We="keydown"+X,ot="mouseenter"+X,At="mouseleave"+X,Nt="touchstart"+X,lt="touchmove"+X,vi="touchend"+X,ci="pointerdown"+X,jn="pointerup"+X,Ri="dragstart"+X,qs="load"+X+ie,Ys="click"+X+ie,vl=".active",Xn=".active.carousel-item",yl=".carousel-item",Ar=".carousel-item img",bl=".carousel-item-next, .carousel-item-prev",_l=".carousel-indicators",$u="[data-slide], [data-slide-to]",Gu='[data-ride="carousel"]',$a={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},q={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},le={TOUCH:"touch",PEN:"pen"},pe=function(){function fe(te,L){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(L),this._element=te,this._indicatorsElement=this._element.querySelector(_l),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=!!(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var ne=fe.prototype;return ne.next=function(){this._isSliding||this._slide(dt)},ne.nextWhenVisible=function(){var L=a.default(this._element);!document.hidden&&L.is(":visible")&&L.css("visibility")!=="hidden"&&this.next()},ne.prev=function(){this._isSliding||this._slide(oe)},ne.pause=function(L){L||(this._isPaused=!0),this._element.querySelector(bl)&&(y.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},ne.cycle=function(L){L||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},ne.to=function(L){var G=this;this._activeElement=this._element.querySelector(Xn);var Q=this._getItemIndex(this._activeElement);if(!(L>this._items.length-1||L<0)){if(this._isSliding){a.default(this._element).one(ke,function(){return G.to(L)});return}if(Q===L){this.pause(),this.cycle();return}var ve=L>Q?dt:oe;this._slide(ve,this._items[L])}},ne.dispose=function(){a.default(this._element).off(X),a.default.removeData(this._element,N),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},ne._getConfig=function(L){return L=c({},$a,L),y.typeCheckConfig(Pe,L,q),L},ne._handleSwipe=function(){var L=Math.abs(this.touchDeltaX);if(!(L<=Se)){var G=L/this.touchDeltaX;this.touchDeltaX=0,G>0&&this.prev(),G<0&&this.next()}},ne._addEventListeners=function(){var L=this;this._config.keyboard&&a.default(this._element).on(We,function(G){return L._keydown(G)}),this._config.pause==="hover"&&a.default(this._element).on(ot,function(G){return L.pause(G)}).on(At,function(G){return L.cycle(G)}),this._config.touch&&this._addTouchEventListeners()},ne._addTouchEventListeners=function(){var L=this;if(this._touchSupported){var G=function(Re){L._pointerEvent&&le[Re.originalEvent.pointerType.toUpperCase()]?L.touchStartX=Re.originalEvent.clientX:L._pointerEvent||(L.touchStartX=Re.originalEvent.touches[0].clientX)},Q=function(Re){L.touchDeltaX=Re.originalEvent.touches&&Re.originalEvent.touches.length>1?0:Re.originalEvent.touches[0].clientX-L.touchStartX},ve=function(Re){L._pointerEvent&&le[Re.originalEvent.pointerType.toUpperCase()]&&(L.touchDeltaX=Re.originalEvent.clientX-L.touchStartX),L._handleSwipe(),L._config.pause==="hover"&&(L.pause(),L.touchTimeout&&clearTimeout(L.touchTimeout),L.touchTimeout=setTimeout(function(tt){return L.cycle(tt)},Me+L._config.interval))};a.default(this._element.querySelectorAll(Ar)).on(Ri,function(_e){return _e.preventDefault()}),this._pointerEvent?(a.default(this._element).on(ci,function(_e){return G(_e)}),a.default(this._element).on(jn,function(_e){return ve(_e)}),this._element.classList.add(at)):(a.default(this._element).on(Nt,function(_e){return G(_e)}),a.default(this._element).on(lt,function(_e){return Q(_e)}),a.default(this._element).on(vi,function(_e){return ve(_e)}))}},ne._keydown=function(L){if(!/input|textarea/i.test(L.target.tagName))switch(L.which){case re:L.preventDefault(),this.prev();break;case Ce:L.preventDefault(),this.next();break}},ne._getItemIndex=function(L){return this._items=L&&L.parentNode?[].slice.call(L.parentNode.querySelectorAll(yl)):[],this._items.indexOf(L)},ne._getItemByDirection=function(L,G){var Q=L===dt,ve=L===oe,_e=this._getItemIndex(G),Re=this._items.length-1,tt=ve&&_e===0||Q&&_e===Re;if(tt&&!this._config.wrap)return G;var bt=L===oe?-1:1,Et=(_e+bt)%this._items.length;return Et===-1?this._items[this._items.length-1]:this._items[Et]},ne._triggerSlideEvent=function(L,G){var Q=this._getItemIndex(L),ve=this._getItemIndex(this._element.querySelector(Xn)),_e=a.default.Event(xe,{relatedTarget:L,direction:G,from:ve,to:Q});return a.default(this._element).trigger(_e),_e},ne._setActiveIndicatorElement=function(L){if(this._indicatorsElement){var G=[].slice.call(this._indicatorsElement.querySelectorAll(vl));a.default(G).removeClass(we);var Q=this._indicatorsElement.children[this._getItemIndex(L)];Q&&a.default(Q).addClass(we)}},ne._updateInterval=function(){var L=this._activeElement||this._element.querySelector(Xn);if(L){var G=parseInt(L.getAttribute("data-interval"),10);G?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=G):this._config.interval=this._config.defaultInterval||this._config.interval}},ne._slide=function(L,G){var Q=this,ve=this._element.querySelector(Xn),_e=this._getItemIndex(ve),Re=G||ve&&this._getItemByDirection(L,ve),tt=this._getItemIndex(Re),bt=!!this._interval,Et,ti,Mn;if(L===dt?(Et=Je,ti=$e,Mn=Le):(Et=Ge,ti=qe,Mn=be),Re&&a.default(Re).hasClass(we)){this._isSliding=!1;return}var pn=this._triggerSlideEvent(Re,Mn);if(!pn.isDefaultPrevented()&&!(!ve||!Re)){this._isSliding=!0,bt&&this.pause(),this._setActiveIndicatorElement(Re),this._activeElement=Re;var Or=a.default.Event(ke,{relatedTarget:Re,direction:Mn,from:_e,to:tt});if(a.default(this._element).hasClass(Fe)){a.default(Re).addClass(ti),y.reflow(Re),a.default(ve).addClass(Et),a.default(Re).addClass(Et);var ed=y.getTransitionDurationFromElement(ve);a.default(ve).one(y.TRANSITION_END,function(){a.default(Re).removeClass(Et+" "+ti).addClass(we),a.default(ve).removeClass(we+" "+ti+" "+Et),Q._isSliding=!1,setTimeout(function(){return a.default(Q._element).trigger(Or)},0)}).emulateTransitionEnd(ed)}else a.default(ve).removeClass(we),a.default(Re).addClass(we),this._isSliding=!1,a.default(this._element).trigger(Or);bt&&this.cycle()}},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this).data(N),Q=c({},$a,a.default(this).data());typeof L=="object"&&(Q=c({},Q,L));var ve=typeof L=="string"?L:Q.slide;if(G||(G=new fe(this,Q),a.default(this).data(N,G)),typeof L=="number")G.to(L);else if(typeof ve=="string"){if(typeof G[ve]>"u")throw new TypeError('No method named "'+ve+'"');G[ve]()}else Q.interval&&Q.ride&&(G.pause(),G.cycle())})},fe._dataApiClickHandler=function(L){var G=y.getSelectorFromElement(this);if(G){var Q=a.default(G)[0];if(!(!Q||!a.default(Q).hasClass(Oe))){var ve=c({},a.default(Q).data(),a.default(this).data()),_e=this.getAttribute("data-slide-to");_e&&(ve.interval=!1),fe._jQueryInterface.call(a.default(Q),ve),_e&&a.default(Q).data(N).to(_e),L.preventDefault()}}},u(fe,null,[{key:"VERSION",get:function(){return K}},{key:"Default",get:function(){return $a}}]),fe}();a.default(document).on(Ys,$u,pe._dataApiClickHandler),a.default(window).on(qs,function(){for(var fe=[].slice.call(document.querySelectorAll(Gu)),ne=0,te=fe.length;ne<te;ne++){var L=a.default(fe[ne]);pe._jQueryInterface.call(L,L.data())}}),a.default.fn[Pe]=pe._jQueryInterface,a.default.fn[Pe].Constructor=pe,a.default.fn[Pe].noConflict=function(){return a.default.fn[Pe]=ae,pe._jQueryInterface};var ge="collapse",ue="4.6.2",De="bs.collapse",Be="."+De,je=".data-api",Xe=a.default.fn[ge],Ze="show",et="collapse",Qe="collapsing",pt="collapsed",Dt="width",Ft="height",xi="show"+Be,vt="shown"+Be,Ke="hide"+Be,Yt="hidden"+Be,yt="click"+Be+je,Fi=".show, .collapsing",qn='[data-toggle="collapse"]',ui={toggle:!0,parent:""},Ga={toggle:"boolean",parent:"(string|element)"},Ot=function(){function fe(te,L){this._isTransitioning=!1,this._element=te,this._config=this._getConfig(L),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+te.id+'"],'+('[data-toggle="collapse"][data-target="#'+te.id+'"]')));for(var G=[].slice.call(document.querySelectorAll(qn)),Q=0,ve=G.length;Q<ve;Q++){var _e=G[Q],Re=y.getSelectorFromElement(_e),tt=[].slice.call(document.querySelectorAll(Re)).filter(function(bt){return bt===te});Re!==null&&tt.length>0&&(this._selector=Re,this._triggerArray.push(_e))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var ne=fe.prototype;return ne.toggle=function(){a.default(this._element).hasClass(Ze)?this.hide():this.show()},ne.show=function(){var L=this;if(!(this._isTransitioning||a.default(this._element).hasClass(Ze))){var G,Q;if(this._parent&&(G=[].slice.call(this._parent.querySelectorAll(Fi)).filter(function(ti){return typeof L._config.parent=="string"?ti.getAttribute("data-parent")===L._config.parent:ti.classList.contains(et)}),G.length===0&&(G=null)),!(G&&(Q=a.default(G).not(this._selector).data(De),Q&&Q._isTransitioning))){var ve=a.default.Event(xi);if(a.default(this._element).trigger(ve),!ve.isDefaultPrevented()){G&&(fe._jQueryInterface.call(a.default(G).not(this._selector),"hide"),Q||a.default(G).data(De,null));var _e=this._getDimension();a.default(this._element).removeClass(et).addClass(Qe),this._element.style[_e]=0,this._triggerArray.length&&a.default(this._triggerArray).removeClass(pt).attr("aria-expanded",!0),this.setTransitioning(!0);var Re=function(){a.default(L._element).removeClass(Qe).addClass(et+" "+Ze),L._element.style[_e]="",L.setTransitioning(!1),a.default(L._element).trigger(vt)},tt=_e[0].toUpperCase()+_e.slice(1),bt="scroll"+tt,Et=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,Re).emulateTransitionEnd(Et),this._element.style[_e]=this._element[bt]+"px"}}}},ne.hide=function(){var L=this;if(!(this._isTransitioning||!a.default(this._element).hasClass(Ze))){var G=a.default.Event(Ke);if(a.default(this._element).trigger(G),!G.isDefaultPrevented()){var Q=this._getDimension();this._element.style[Q]=this._element.getBoundingClientRect()[Q]+"px",y.reflow(this._element),a.default(this._element).addClass(Qe).removeClass(et+" "+Ze);var ve=this._triggerArray.length;if(ve>0)for(var _e=0;_e<ve;_e++){var Re=this._triggerArray[_e],tt=y.getSelectorFromElement(Re);if(tt!==null){var bt=a.default([].slice.call(document.querySelectorAll(tt)));bt.hasClass(Ze)||a.default(Re).addClass(pt).attr("aria-expanded",!1)}}this.setTransitioning(!0);var Et=function(){L.setTransitioning(!1),a.default(L._element).removeClass(Qe).addClass(et).trigger(Yt)};this._element.style[Q]="";var ti=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,Et).emulateTransitionEnd(ti)}}},ne.setTransitioning=function(L){this._isTransitioning=L},ne.dispose=function(){a.default.removeData(this._element,De),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},ne._getConfig=function(L){return L=c({},ui,L),L.toggle=!!L.toggle,y.typeCheckConfig(ge,L,Ga),L},ne._getDimension=function(){var L=a.default(this._element).hasClass(Dt);return L?Dt:Ft},ne._getParent=function(){var L=this,G;y.isElement(this._config.parent)?(G=this._config.parent,typeof this._config.parent.jquery<"u"&&(G=this._config.parent[0])):G=document.querySelector(this._config.parent);var Q='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',ve=[].slice.call(G.querySelectorAll(Q));return a.default(ve).each(function(_e,Re){L._addAriaAndCollapsedClass(fe._getTargetFromElement(Re),[Re])}),G},ne._addAriaAndCollapsedClass=function(L,G){var Q=a.default(L).hasClass(Ze);G.length&&a.default(G).toggleClass(pt,!Q).attr("aria-expanded",Q)},fe._getTargetFromElement=function(L){var G=y.getSelectorFromElement(L);return G?document.querySelector(G):null},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this),Q=G.data(De),ve=c({},ui,G.data(),typeof L=="object"&&L?L:{});if(!Q&&ve.toggle&&typeof L=="string"&&/show|hide/.test(L)&&(ve.toggle=!1),Q||(Q=new fe(this,ve),G.data(De,Q)),typeof L=="string"){if(typeof Q[L]>"u")throw new TypeError('No method named "'+L+'"');Q[L]()}})},u(fe,null,[{key:"VERSION",get:function(){return ue}},{key:"Default",get:function(){return ui}}]),fe}();a.default(document).on(yt,qn,function(fe){fe.currentTarget.tagName==="A"&&fe.preventDefault();var ne=a.default(this),te=y.getSelectorFromElement(this),L=[].slice.call(document.querySelectorAll(te));a.default(L).each(function(){var G=a.default(this),Q=G.data(De),ve=Q?"toggle":ne.data();Ot._jQueryInterface.call(G,ve)})}),a.default.fn[ge]=Ot._jQueryInterface,a.default.fn[ge].Constructor=Ot,a.default.fn[ge].noConflict=function(){return a.default.fn[ge]=Xe,Ot._jQueryInterface};var Si="dropdown",Wa="4.6.2",ei="bs.dropdown",Ui="."+ei,ja=".data-api",wl=a.default.fn[Si],Xa=27,jp=32,Xp=9,Wu=38,ju=40,aE=3,oE=new RegExp(Wu+"|"+ju+"|"+Xa),El="disabled",dn="show",lE="dropup",cE="dropright",uE="dropleft",qp="dropdown-menu-right",dE="position-static",Yp="hide"+Ui,Kp="hidden"+Ui,hE="show"+Ui,fE="shown"+Ui,pE="click"+Ui,Xu="click"+Ui+ja,Zp="keydown"+Ui+ja,mE="keyup"+Ui+ja,xl='[data-toggle="dropdown"]',gE=".dropdown form",qu=".dropdown-menu",vE=".navbar-nav",yE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",bE="top-start",_E="top-end",wE="bottom-start",EE="bottom-end",xE="right-start",SE="left-start",TE={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},ME={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},vs=function(){function fe(te,L){this._element=te,this._popper=null,this._config=this._getConfig(L),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var ne=fe.prototype;return ne.toggle=function(){if(!(this._element.disabled||a.default(this._element).hasClass(El))){var L=a.default(this._menu).hasClass(dn);fe._clearMenus(),!L&&this.show(!0)}},ne.show=function(L){if(L===void 0&&(L=!1),!(this._element.disabled||a.default(this._element).hasClass(El)||a.default(this._menu).hasClass(dn))){var G={relatedTarget:this._element},Q=a.default.Event(hE,G),ve=fe._getParentFromElement(this._element);if(a.default(ve).trigger(Q),!Q.isDefaultPrevented()){if(!this._inNavbar&&L){if(typeof o.default>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var _e=this._element;this._config.reference==="parent"?_e=ve:y.isElement(this._config.reference)&&(_e=this._config.reference,typeof this._config.reference.jquery<"u"&&(_e=this._config.reference[0])),this._config.boundary!=="scrollParent"&&a.default(ve).addClass(dE),this._popper=new o.default(_e,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&a.default(ve).closest(vE).length===0&&a.default(document.body).children().on("mouseover",null,a.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),a.default(this._menu).toggleClass(dn),a.default(ve).toggleClass(dn).trigger(a.default.Event(fE,G))}}},ne.hide=function(){if(!(this._element.disabled||a.default(this._element).hasClass(El)||!a.default(this._menu).hasClass(dn))){var L={relatedTarget:this._element},G=a.default.Event(Yp,L),Q=fe._getParentFromElement(this._element);a.default(Q).trigger(G),!G.isDefaultPrevented()&&(this._popper&&this._popper.destroy(),a.default(this._menu).toggleClass(dn),a.default(Q).toggleClass(dn).trigger(a.default.Event(Kp,L)))}},ne.dispose=function(){a.default.removeData(this._element,ei),a.default(this._element).off(Ui),this._element=null,this._menu=null,this._popper!==null&&(this._popper.destroy(),this._popper=null)},ne.update=function(){this._inNavbar=this._detectNavbar(),this._popper!==null&&this._popper.scheduleUpdate()},ne._addEventListeners=function(){var L=this;a.default(this._element).on(pE,function(G){G.preventDefault(),G.stopPropagation(),L.toggle()})},ne._getConfig=function(L){return L=c({},this.constructor.Default,a.default(this._element).data(),L),y.typeCheckConfig(Si,L,this.constructor.DefaultType),L},ne._getMenuElement=function(){if(!this._menu){var L=fe._getParentFromElement(this._element);L&&(this._menu=L.querySelector(qu))}return this._menu},ne._getPlacement=function(){var L=a.default(this._element.parentNode),G=wE;return L.hasClass(lE)?G=a.default(this._menu).hasClass(qp)?_E:bE:L.hasClass(cE)?G=xE:L.hasClass(uE)?G=SE:a.default(this._menu).hasClass(qp)&&(G=EE),G},ne._detectNavbar=function(){return a.default(this._element).closest(".navbar").length>0},ne._getOffset=function(){var L=this,G={};return typeof this._config.offset=="function"?G.fn=function(Q){return Q.offsets=c({},Q.offsets,L._config.offset(Q.offsets,L._element)),Q}:G.offset=this._config.offset,G},ne._getPopperConfig=function(){var L={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return this._config.display==="static"&&(L.modifiers.applyStyle={enabled:!1}),c({},L,this._config.popperConfig)},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this).data(ei),Q=typeof L=="object"?L:null;if(G||(G=new fe(this,Q),a.default(this).data(ei,G)),typeof L=="string"){if(typeof G[L]>"u")throw new TypeError('No method named "'+L+'"');G[L]()}})},fe._clearMenus=function(L){if(!(L&&(L.which===aE||L.type==="keyup"&&L.which!==Xp)))for(var G=[].slice.call(document.querySelectorAll(xl)),Q=0,ve=G.length;Q<ve;Q++){var _e=fe._getParentFromElement(G[Q]),Re=a.default(G[Q]).data(ei),tt={relatedTarget:G[Q]};if(L&&L.type==="click"&&(tt.clickEvent=L),!!Re){var bt=Re._menu;if(a.default(_e).hasClass(dn)&&!(L&&(L.type==="click"&&/input|textarea/i.test(L.target.tagName)||L.type==="keyup"&&L.which===Xp)&&a.default.contains(_e,L.target))){var Et=a.default.Event(Yp,tt);a.default(_e).trigger(Et),!Et.isDefaultPrevented()&&("ontouchstart"in document.documentElement&&a.default(document.body).children().off("mouseover",null,a.default.noop),G[Q].setAttribute("aria-expanded","false"),Re._popper&&Re._popper.destroy(),a.default(bt).removeClass(dn),a.default(_e).removeClass(dn).trigger(a.default.Event(Kp,tt)))}}}},fe._getParentFromElement=function(L){var G,Q=y.getSelectorFromElement(L);return Q&&(G=document.querySelector(Q)),G||L.parentNode},fe._dataApiKeydownHandler=function(L){if(!(/input|textarea/i.test(L.target.tagName)?L.which===jp||L.which!==Xa&&(L.which!==ju&&L.which!==Wu||a.default(L.target).closest(qu).length):!oE.test(L.which))&&!(this.disabled||a.default(this).hasClass(El))){var G=fe._getParentFromElement(this),Q=a.default(G).hasClass(dn);if(!(!Q&&L.which===Xa)){if(L.preventDefault(),L.stopPropagation(),!Q||L.which===Xa||L.which===jp){L.which===Xa&&a.default(G.querySelector(xl)).trigger("focus"),a.default(this).trigger("click");return}var ve=[].slice.call(G.querySelectorAll(yE)).filter(function(Re){return a.default(Re).is(":visible")});if(ve.length!==0){var _e=ve.indexOf(L.target);L.which===Wu&&_e>0&&_e--,L.which===ju&&_e<ve.length-1&&_e++,_e<0&&(_e=0),ve[_e].focus()}}}},u(fe,null,[{key:"VERSION",get:function(){return Wa}},{key:"Default",get:function(){return TE}},{key:"DefaultType",get:function(){return ME}}]),fe}();a.default(document).on(Zp,xl,vs._dataApiKeydownHandler).on(Zp,qu,vs._dataApiKeydownHandler).on(Xu+" "+mE,vs._clearMenus).on(Xu,xl,function(fe){fe.preventDefault(),fe.stopPropagation(),vs._jQueryInterface.call(a.default(this),"toggle")}).on(Xu,gE,function(fe){fe.stopPropagation()}),a.default.fn[Si]=vs._jQueryInterface,a.default.fn[Si].Constructor=vs,a.default.fn[Si].noConflict=function(){return a.default.fn[Si]=wl,vs._jQueryInterface};var Pr="modal",CE="4.6.2",qa="bs.modal",zi="."+qa,AE=".data-api",PE=a.default.fn[Pr],Qp=27,LE="modal-dialog-scrollable",RE="modal-scrollbar-measure",IE="modal-backdrop",Jp="modal-open",Lr="fade",Sl="show",em="modal-static",OE="hide"+zi,DE="hidePrevented"+zi,tm="hidden"+zi,im="show"+zi,kE="shown"+zi,Tl="focusin"+zi,nm="resize"+zi,Yu="click.dismiss"+zi,sm="keydown.dismiss"+zi,NE="mouseup.dismiss"+zi,rm="mousedown.dismiss"+zi,FE="click"+zi+AE,UE=".modal-dialog",zE=".modal-body",BE='[data-toggle="modal"]',HE='[data-dismiss="modal"]',am=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",om=".sticky-top",Ku={backdrop:!0,keyboard:!0,focus:!0,show:!0},VE={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Ya=function(){function fe(te,L){this._config=this._getConfig(L),this._element=te,this._dialog=te.querySelector(UE),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var ne=fe.prototype;return ne.toggle=function(L){return this._isShown?this.hide():this.show(L)},ne.show=function(L){var G=this;if(!(this._isShown||this._isTransitioning)){var Q=a.default.Event(im,{relatedTarget:L});a.default(this._element).trigger(Q),!Q.isDefaultPrevented()&&(this._isShown=!0,a.default(this._element).hasClass(Lr)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),a.default(this._element).on(Yu,HE,function(ve){return G.hide(ve)}),a.default(this._dialog).on(rm,function(){a.default(G._element).one(NE,function(ve){a.default(ve.target).is(G._element)&&(G._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return G._showElement(L)}))}},ne.hide=function(L){var G=this;if(L&&L.preventDefault(),!(!this._isShown||this._isTransitioning)){var Q=a.default.Event(OE);if(a.default(this._element).trigger(Q),!(!this._isShown||Q.isDefaultPrevented())){this._isShown=!1;var ve=a.default(this._element).hasClass(Lr);if(ve&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),a.default(document).off(Tl),a.default(this._element).removeClass(Sl),a.default(this._element).off(Yu),a.default(this._dialog).off(rm),ve){var _e=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,function(Re){return G._hideModal(Re)}).emulateTransitionEnd(_e)}else this._hideModal()}}},ne.dispose=function(){[window,this._element,this._dialog].forEach(function(L){return a.default(L).off(zi)}),a.default(document).off(Tl),a.default.removeData(this._element,qa),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},ne.handleUpdate=function(){this._adjustDialog()},ne._getConfig=function(L){return L=c({},Ku,L),y.typeCheckConfig(Pr,L,VE),L},ne._triggerBackdropTransition=function(){var L=this,G=a.default.Event(DE);if(a.default(this._element).trigger(G),!G.isDefaultPrevented()){var Q=this._element.scrollHeight>document.documentElement.clientHeight;Q||(this._element.style.overflowY="hidden"),this._element.classList.add(em);var ve=y.getTransitionDurationFromElement(this._dialog);a.default(this._element).off(y.TRANSITION_END),a.default(this._element).one(y.TRANSITION_END,function(){L._element.classList.remove(em),Q||a.default(L._element).one(y.TRANSITION_END,function(){L._element.style.overflowY=""}).emulateTransitionEnd(L._element,ve)}).emulateTransitionEnd(ve),this._element.focus()}},ne._showElement=function(L){var G=this,Q=a.default(this._element).hasClass(Lr),ve=this._dialog?this._dialog.querySelector(zE):null;(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),a.default(this._dialog).hasClass(LE)&&ve?ve.scrollTop=0:this._element.scrollTop=0,Q&&y.reflow(this._element),a.default(this._element).addClass(Sl),this._config.focus&&this._enforceFocus();var _e=a.default.Event(kE,{relatedTarget:L}),Re=function(){G._config.focus&&G._element.focus(),G._isTransitioning=!1,a.default(G._element).trigger(_e)};if(Q){var tt=y.getTransitionDurationFromElement(this._dialog);a.default(this._dialog).one(y.TRANSITION_END,Re).emulateTransitionEnd(tt)}else Re()},ne._enforceFocus=function(){var L=this;a.default(document).off(Tl).on(Tl,function(G){document!==G.target&&L._element!==G.target&&a.default(L._element).has(G.target).length===0&&L._element.focus()})},ne._setEscapeEvent=function(){var L=this;this._isShown?a.default(this._element).on(sm,function(G){L._config.keyboard&&G.which===Qp?(G.preventDefault(),L.hide()):!L._config.keyboard&&G.which===Qp&&L._triggerBackdropTransition()}):this._isShown||a.default(this._element).off(sm)},ne._setResizeEvent=function(){var L=this;this._isShown?a.default(window).on(nm,function(G){return L.handleUpdate(G)}):a.default(window).off(nm)},ne._hideModal=function(){var L=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){a.default(document.body).removeClass(Jp),L._resetAdjustments(),L._resetScrollbar(),a.default(L._element).trigger(tm)})},ne._removeBackdrop=function(){this._backdrop&&(a.default(this._backdrop).remove(),this._backdrop=null)},ne._showBackdrop=function(L){var G=this,Q=a.default(this._element).hasClass(Lr)?Lr:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=IE,Q&&this._backdrop.classList.add(Q),a.default(this._backdrop).appendTo(document.body),a.default(this._element).on(Yu,function(tt){if(G._ignoreBackdropClick){G._ignoreBackdropClick=!1;return}tt.target===tt.currentTarget&&(G._config.backdrop==="static"?G._triggerBackdropTransition():G.hide())}),Q&&y.reflow(this._backdrop),a.default(this._backdrop).addClass(Sl),!L)return;if(!Q){L();return}var ve=y.getTransitionDurationFromElement(this._backdrop);a.default(this._backdrop).one(y.TRANSITION_END,L).emulateTransitionEnd(ve)}else if(!this._isShown&&this._backdrop){a.default(this._backdrop).removeClass(Sl);var _e=function(){G._removeBackdrop(),L&&L()};if(a.default(this._element).hasClass(Lr)){var Re=y.getTransitionDurationFromElement(this._backdrop);a.default(this._backdrop).one(y.TRANSITION_END,_e).emulateTransitionEnd(Re)}else _e()}else L&&L()},ne._adjustDialog=function(){var L=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&L&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!L&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},ne._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},ne._checkScrollbar=function(){var L=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(L.left+L.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},ne._setScrollbar=function(){var L=this;if(this._isBodyOverflowing){var G=[].slice.call(document.querySelectorAll(am)),Q=[].slice.call(document.querySelectorAll(om));a.default(G).each(function(Re,tt){var bt=tt.style.paddingRight,Et=a.default(tt).css("padding-right");a.default(tt).data("padding-right",bt).css("padding-right",parseFloat(Et)+L._scrollbarWidth+"px")}),a.default(Q).each(function(Re,tt){var bt=tt.style.marginRight,Et=a.default(tt).css("margin-right");a.default(tt).data("margin-right",bt).css("margin-right",parseFloat(Et)-L._scrollbarWidth+"px")});var ve=document.body.style.paddingRight,_e=a.default(document.body).css("padding-right");a.default(document.body).data("padding-right",ve).css("padding-right",parseFloat(_e)+this._scrollbarWidth+"px")}a.default(document.body).addClass(Jp)},ne._resetScrollbar=function(){var L=[].slice.call(document.querySelectorAll(am));a.default(L).each(function(ve,_e){var Re=a.default(_e).data("padding-right");a.default(_e).removeData("padding-right"),_e.style.paddingRight=Re||""});var G=[].slice.call(document.querySelectorAll(""+om));a.default(G).each(function(ve,_e){var Re=a.default(_e).data("margin-right");typeof Re<"u"&&a.default(_e).css("margin-right",Re).removeData("margin-right")});var Q=a.default(document.body).data("padding-right");a.default(document.body).removeData("padding-right"),document.body.style.paddingRight=Q||""},ne._getScrollbarWidth=function(){var L=document.createElement("div");L.className=RE,document.body.appendChild(L);var G=L.getBoundingClientRect().width-L.clientWidth;return document.body.removeChild(L),G},fe._jQueryInterface=function(L,G){return this.each(function(){var Q=a.default(this).data(qa),ve=c({},Ku,a.default(this).data(),typeof L=="object"&&L?L:{});if(Q||(Q=new fe(this,ve),a.default(this).data(qa,Q)),typeof L=="string"){if(typeof Q[L]>"u")throw new TypeError('No method named "'+L+'"');Q[L](G)}else ve.show&&Q.show(G)})},u(fe,null,[{key:"VERSION",get:function(){return CE}},{key:"Default",get:function(){return Ku}}]),fe}();a.default(document).on(FE,BE,function(fe){var ne=this,te,L=y.getSelectorFromElement(this);L&&(te=document.querySelector(L));var G=a.default(te).data(qa)?"toggle":c({},a.default(te).data(),a.default(this).data());(this.tagName==="A"||this.tagName==="AREA")&&fe.preventDefault();var Q=a.default(te).one(im,function(ve){ve.isDefaultPrevented()||Q.one(tm,function(){a.default(ne).is(":visible")&&ne.focus()})});Ya._jQueryInterface.call(a.default(te),G,this)}),a.default.fn[Pr]=Ya._jQueryInterface,a.default.fn[Pr].Constructor=Ya,a.default.fn[Pr].noConflict=function(){return a.default.fn[Pr]=PE,Ya._jQueryInterface};var $E=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],GE=/^aria-[\w-]*$/i,WE={"*":["class","dir","id","lang","role",GE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},jE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,XE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function qE(fe,ne){var te=fe.nodeName.toLowerCase();if(ne.indexOf(te)!==-1)return $E.indexOf(te)!==-1?!!(jE.test(fe.nodeValue)||XE.test(fe.nodeValue)):!0;for(var L=ne.filter(function(ve){return ve instanceof RegExp}),G=0,Q=L.length;G<Q;G++)if(L[G].test(te))return!0;return!1}function lm(fe,ne,te){if(fe.length===0)return fe;if(te&&typeof te=="function")return te(fe);for(var L=new window.DOMParser,G=L.parseFromString(fe,"text/html"),Q=Object.keys(ne),ve=[].slice.call(G.body.querySelectorAll("*")),_e=function(ti,Mn){var pn=ve[ti],Or=pn.nodeName.toLowerCase();if(Q.indexOf(pn.nodeName.toLowerCase())===-1)return pn.parentNode.removeChild(pn),"continue";var ed=[].slice.call(pn.attributes),tx=[].concat(ne["*"]||[],ne[Or]||[]);ed.forEach(function(xm){qE(xm,tx)||pn.removeAttribute(xm.nodeName)})},Re=0,tt=ve.length;Re<tt;Re++)var bt=_e(Re);return G.body.innerHTML}var Ks="tooltip",YE="4.6.2",Ml="bs.tooltip",hn="."+Ml,KE=a.default.fn[Ks],cm="bs-tooltip",ZE=new RegExp("(^|\\s)"+cm+"\\S+","g"),QE=["sanitize","whiteList","sanitizeFn"],Ka="fade",Za="show",Qa="show",Zu="out",JE=".tooltip-inner",e1=".arrow",Ja="hover",Qu="focus",t1="click",i1="manual",n1={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},s1={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:WE,popperConfig:null},r1={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},a1={HIDE:"hide"+hn,HIDDEN:"hidden"+hn,SHOW:"show"+hn,SHOWN:"shown"+hn,INSERTED:"inserted"+hn,CLICK:"click"+hn,FOCUSIN:"focusin"+hn,FOCUSOUT:"focusout"+hn,MOUSEENTER:"mouseenter"+hn,MOUSELEAVE:"mouseleave"+hn},Zs=function(){function fe(te,L){if(typeof o.default>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=te,this.config=this._getConfig(L),this.tip=null,this._setListeners()}var ne=fe.prototype;return ne.enable=function(){this._isEnabled=!0},ne.disable=function(){this._isEnabled=!1},ne.toggleEnabled=function(){this._isEnabled=!this._isEnabled},ne.toggle=function(L){if(this._isEnabled)if(L){var G=this.constructor.DATA_KEY,Q=a.default(L.currentTarget).data(G);Q||(Q=new this.constructor(L.currentTarget,this._getDelegateConfig()),a.default(L.currentTarget).data(G,Q)),Q._activeTrigger.click=!Q._activeTrigger.click,Q._isWithActiveTrigger()?Q._enter(null,Q):Q._leave(null,Q)}else{if(a.default(this.getTipElement()).hasClass(Za)){this._leave(null,this);return}this._enter(null,this)}},ne.dispose=function(){clearTimeout(this._timeout),a.default.removeData(this.element,this.constructor.DATA_KEY),a.default(this.element).off(this.constructor.EVENT_KEY),a.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&a.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},ne.show=function(){var L=this;if(a.default(this.element).css("display")==="none")throw new Error("Please use show on visible elements");var G=a.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){a.default(this.element).trigger(G);var Q=y.findShadowRoot(this.element),ve=a.default.contains(Q!==null?Q:this.element.ownerDocument.documentElement,this.element);if(G.isDefaultPrevented()||!ve)return;var _e=this.getTipElement(),Re=y.getUID(this.constructor.NAME);_e.setAttribute("id",Re),this.element.setAttribute("aria-describedby",Re),this.setContent(),this.config.animation&&a.default(_e).addClass(Ka);var tt=typeof this.config.placement=="function"?this.config.placement.call(this,_e,this.element):this.config.placement,bt=this._getAttachment(tt);this.addAttachmentClass(bt);var Et=this._getContainer();a.default(_e).data(this.constructor.DATA_KEY,this),a.default.contains(this.element.ownerDocument.documentElement,this.tip)||a.default(_e).appendTo(Et),a.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new o.default(this.element,_e,this._getPopperConfig(bt)),a.default(_e).addClass(Za),a.default(_e).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&a.default(document.body).children().on("mouseover",null,a.default.noop);var ti=function(){L.config.animation&&L._fixTransition();var Or=L._hoverState;L._hoverState=null,a.default(L.element).trigger(L.constructor.Event.SHOWN),Or===Zu&&L._leave(null,L)};if(a.default(this.tip).hasClass(Ka)){var Mn=y.getTransitionDurationFromElement(this.tip);a.default(this.tip).one(y.TRANSITION_END,ti).emulateTransitionEnd(Mn)}else ti()}},ne.hide=function(L){var G=this,Q=this.getTipElement(),ve=a.default.Event(this.constructor.Event.HIDE),_e=function(){G._hoverState!==Qa&&Q.parentNode&&Q.parentNode.removeChild(Q),G._cleanTipClass(),G.element.removeAttribute("aria-describedby"),a.default(G.element).trigger(G.constructor.Event.HIDDEN),G._popper!==null&&G._popper.destroy(),L&&L()};if(a.default(this.element).trigger(ve),!ve.isDefaultPrevented()){if(a.default(Q).removeClass(Za),"ontouchstart"in document.documentElement&&a.default(document.body).children().off("mouseover",null,a.default.noop),this._activeTrigger[t1]=!1,this._activeTrigger[Qu]=!1,this._activeTrigger[Ja]=!1,a.default(this.tip).hasClass(Ka)){var Re=y.getTransitionDurationFromElement(Q);a.default(Q).one(y.TRANSITION_END,_e).emulateTransitionEnd(Re)}else _e();this._hoverState=""}},ne.update=function(){this._popper!==null&&this._popper.scheduleUpdate()},ne.isWithContent=function(){return!!this.getTitle()},ne.addAttachmentClass=function(L){a.default(this.getTipElement()).addClass(cm+"-"+L)},ne.getTipElement=function(){return this.tip=this.tip||a.default(this.config.template)[0],this.tip},ne.setContent=function(){var L=this.getTipElement();this.setElementContent(a.default(L.querySelectorAll(JE)),this.getTitle()),a.default(L).removeClass(Ka+" "+Za)},ne.setElementContent=function(L,G){if(typeof G=="object"&&(G.nodeType||G.jquery)){this.config.html?a.default(G).parent().is(L)||L.empty().append(G):L.text(a.default(G).text());return}this.config.html?(this.config.sanitize&&(G=lm(G,this.config.whiteList,this.config.sanitizeFn)),L.html(G)):L.text(G)},ne.getTitle=function(){var L=this.element.getAttribute("data-original-title");return L||(L=typeof this.config.title=="function"?this.config.title.call(this.element):this.config.title),L},ne._getPopperConfig=function(L){var G=this,Q={placement:L,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:e1},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(_e){_e.originalPlacement!==_e.placement&&G._handlePopperPlacementChange(_e)},onUpdate:function(_e){return G._handlePopperPlacementChange(_e)}};return c({},Q,this.config.popperConfig)},ne._getOffset=function(){var L=this,G={};return typeof this.config.offset=="function"?G.fn=function(Q){return Q.offsets=c({},Q.offsets,L.config.offset(Q.offsets,L.element)),Q}:G.offset=this.config.offset,G},ne._getContainer=function(){return this.config.container===!1?document.body:y.isElement(this.config.container)?a.default(this.config.container):a.default(document).find(this.config.container)},ne._getAttachment=function(L){return n1[L.toUpperCase()]},ne._setListeners=function(){var L=this,G=this.config.trigger.split(" ");G.forEach(function(Q){if(Q==="click")a.default(L.element).on(L.constructor.Event.CLICK,L.config.selector,function(Re){return L.toggle(Re)});else if(Q!==i1){var ve=Q===Ja?L.constructor.Event.MOUSEENTER:L.constructor.Event.FOCUSIN,_e=Q===Ja?L.constructor.Event.MOUSELEAVE:L.constructor.Event.FOCUSOUT;a.default(L.element).on(ve,L.config.selector,function(Re){return L._enter(Re)}).on(_e,L.config.selector,function(Re){return L._leave(Re)})}}),this._hideModalHandler=function(){L.element&&L.hide()},a.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=c({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},ne._fixTitle=function(){var L=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||L!=="string")&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},ne._enter=function(L,G){var Q=this.constructor.DATA_KEY;if(G=G||a.default(L.currentTarget).data(Q),G||(G=new this.constructor(L.currentTarget,this._getDelegateConfig()),a.default(L.currentTarget).data(Q,G)),L&&(G._activeTrigger[L.type==="focusin"?Qu:Ja]=!0),a.default(G.getTipElement()).hasClass(Za)||G._hoverState===Qa){G._hoverState=Qa;return}if(clearTimeout(G._timeout),G._hoverState=Qa,!G.config.delay||!G.config.delay.show){G.show();return}G._timeout=setTimeout(function(){G._hoverState===Qa&&G.show()},G.config.delay.show)},ne._leave=function(L,G){var Q=this.constructor.DATA_KEY;if(G=G||a.default(L.currentTarget).data(Q),G||(G=new this.constructor(L.currentTarget,this._getDelegateConfig()),a.default(L.currentTarget).data(Q,G)),L&&(G._activeTrigger[L.type==="focusout"?Qu:Ja]=!1),!G._isWithActiveTrigger()){if(clearTimeout(G._timeout),G._hoverState=Zu,!G.config.delay||!G.config.delay.hide){G.hide();return}G._timeout=setTimeout(function(){G._hoverState===Zu&&G.hide()},G.config.delay.hide)}},ne._isWithActiveTrigger=function(){for(var L in this._activeTrigger)if(this._activeTrigger[L])return!0;return!1},ne._getConfig=function(L){var G=a.default(this.element).data();return Object.keys(G).forEach(function(Q){QE.indexOf(Q)!==-1&&delete G[Q]}),L=c({},this.constructor.Default,G,typeof L=="object"&&L?L:{}),typeof L.delay=="number"&&(L.delay={show:L.delay,hide:L.delay}),typeof L.title=="number"&&(L.title=L.title.toString()),typeof L.content=="number"&&(L.content=L.content.toString()),y.typeCheckConfig(Ks,L,this.constructor.DefaultType),L.sanitize&&(L.template=lm(L.template,L.whiteList,L.sanitizeFn)),L},ne._getDelegateConfig=function(){var L={};if(this.config)for(var G in this.config)this.constructor.Default[G]!==this.config[G]&&(L[G]=this.config[G]);return L},ne._cleanTipClass=function(){var L=a.default(this.getTipElement()),G=L.attr("class").match(ZE);G!==null&&G.length&&L.removeClass(G.join(""))},ne._handlePopperPlacementChange=function(L){this.tip=L.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(L.placement))},ne._fixTransition=function(){var L=this.getTipElement(),G=this.config.animation;L.getAttribute("x-placement")===null&&(a.default(L).removeClass(Ka),this.config.animation=!1,this.hide(),this.show(),this.config.animation=G)},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this),Q=G.data(Ml),ve=typeof L=="object"&&L;if(!(!Q&&/dispose|hide/.test(L))&&(Q||(Q=new fe(this,ve),G.data(Ml,Q)),typeof L=="string")){if(typeof Q[L]>"u")throw new TypeError('No method named "'+L+'"');Q[L]()}})},u(fe,null,[{key:"VERSION",get:function(){return YE}},{key:"Default",get:function(){return s1}},{key:"NAME",get:function(){return Ks}},{key:"DATA_KEY",get:function(){return Ml}},{key:"Event",get:function(){return a1}},{key:"EVENT_KEY",get:function(){return hn}},{key:"DefaultType",get:function(){return r1}}]),fe}();a.default.fn[Ks]=Zs._jQueryInterface,a.default.fn[Ks].Constructor=Zs,a.default.fn[Ks].noConflict=function(){return a.default.fn[Ks]=KE,Zs._jQueryInterface};var Rr="popover",o1="4.6.2",Cl="bs.popover",fn="."+Cl,l1=a.default.fn[Rr],um="bs-popover",c1=new RegExp("(^|\\s)"+um+"\\S+","g"),u1="fade",d1="show",h1=".popover-header",f1=".popover-body",p1=c({},Zs.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),m1=c({},Zs.DefaultType,{content:"(string|element|function)"}),g1={HIDE:"hide"+fn,HIDDEN:"hidden"+fn,SHOW:"show"+fn,SHOWN:"shown"+fn,INSERTED:"inserted"+fn,CLICK:"click"+fn,FOCUSIN:"focusin"+fn,FOCUSOUT:"focusout"+fn,MOUSEENTER:"mouseenter"+fn,MOUSELEAVE:"mouseleave"+fn},Al=function(fe){d(ne,fe);function ne(){return fe.apply(this,arguments)||this}var te=ne.prototype;return te.isWithContent=function(){return this.getTitle()||this._getContent()},te.addAttachmentClass=function(G){a.default(this.getTipElement()).addClass(um+"-"+G)},te.getTipElement=function(){return this.tip=this.tip||a.default(this.config.template)[0],this.tip},te.setContent=function(){var G=a.default(this.getTipElement());this.setElementContent(G.find(h1),this.getTitle());var Q=this._getContent();typeof Q=="function"&&(Q=Q.call(this.element)),this.setElementContent(G.find(f1),Q),G.removeClass(u1+" "+d1)},te._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},te._cleanTipClass=function(){var G=a.default(this.getTipElement()),Q=G.attr("class").match(c1);Q!==null&&Q.length>0&&G.removeClass(Q.join(""))},ne._jQueryInterface=function(G){return this.each(function(){var Q=a.default(this).data(Cl),ve=typeof G=="object"?G:null;if(!(!Q&&/dispose|hide/.test(G))&&(Q||(Q=new ne(this,ve),a.default(this).data(Cl,Q)),typeof G=="string")){if(typeof Q[G]>"u")throw new TypeError('No method named "'+G+'"');Q[G]()}})},u(ne,null,[{key:"VERSION",get:function(){return o1}},{key:"Default",get:function(){return p1}},{key:"NAME",get:function(){return Rr}},{key:"DATA_KEY",get:function(){return Cl}},{key:"Event",get:function(){return g1}},{key:"EVENT_KEY",get:function(){return fn}},{key:"DefaultType",get:function(){return m1}}]),ne}(Zs);a.default.fn[Rr]=Al._jQueryInterface,a.default.fn[Rr].Constructor=Al,a.default.fn[Rr].noConflict=function(){return a.default.fn[Rr]=l1,Al._jQueryInterface};var Qs="scrollspy",v1="4.6.2",Pl="bs.scrollspy",Ll="."+Pl,y1=".data-api",b1=a.default.fn[Qs],_1="dropdown-item",Js="active",w1="activate"+Ll,E1="scroll"+Ll,x1="load"+Ll+y1,S1="offset",dm="position",T1='[data-spy="scroll"]',hm=".nav, .list-group",Ju=".nav-link",M1=".nav-item",fm=".list-group-item",C1=".dropdown",A1=".dropdown-item",P1=".dropdown-toggle",pm={offset:10,method:"auto",target:""},L1={offset:"number",method:"string",target:"(string|element)"},eo=function(){function fe(te,L){var G=this;this._element=te,this._scrollElement=te.tagName==="BODY"?window:te,this._config=this._getConfig(L),this._selector=this._config.target+" "+Ju+","+(this._config.target+" "+fm+",")+(this._config.target+" "+A1),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,a.default(this._scrollElement).on(E1,function(Q){return G._process(Q)}),this.refresh(),this._process()}var ne=fe.prototype;return ne.refresh=function(){var L=this,G=this._scrollElement===this._scrollElement.window?S1:dm,Q=this._config.method==="auto"?G:this._config.method,ve=Q===dm?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var _e=[].slice.call(document.querySelectorAll(this._selector));_e.map(function(Re){var tt,bt=y.getSelectorFromElement(Re);if(bt&&(tt=document.querySelector(bt)),tt){var Et=tt.getBoundingClientRect();if(Et.width||Et.height)return[a.default(tt)[Q]().top+ve,bt]}return null}).filter(Boolean).sort(function(Re,tt){return Re[0]-tt[0]}).forEach(function(Re){L._offsets.push(Re[0]),L._targets.push(Re[1])})},ne.dispose=function(){a.default.removeData(this._element,Pl),a.default(this._scrollElement).off(Ll),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},ne._getConfig=function(L){if(L=c({},pm,typeof L=="object"&&L?L:{}),typeof L.target!="string"&&y.isElement(L.target)){var G=a.default(L.target).attr("id");G||(G=y.getUID(Qs),a.default(L.target).attr("id",G)),L.target="#"+G}return y.typeCheckConfig(Qs,L,L1),L},ne._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},ne._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},ne._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},ne._process=function(){var L=this._getScrollTop()+this._config.offset,G=this._getScrollHeight(),Q=this._config.offset+G-this._getOffsetHeight();if(this._scrollHeight!==G&&this.refresh(),L>=Q){var ve=this._targets[this._targets.length-1];this._activeTarget!==ve&&this._activate(ve);return}if(this._activeTarget&&L<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(var _e=this._offsets.length;_e--;){var Re=this._activeTarget!==this._targets[_e]&&L>=this._offsets[_e]&&(typeof this._offsets[_e+1]>"u"||L<this._offsets[_e+1]);Re&&this._activate(this._targets[_e])}},ne._activate=function(L){this._activeTarget=L,this._clear();var G=this._selector.split(",").map(function(ve){return ve+'[data-target="'+L+'"],'+ve+'[href="'+L+'"]'}),Q=a.default([].slice.call(document.querySelectorAll(G.join(","))));Q.hasClass(_1)?(Q.closest(C1).find(P1).addClass(Js),Q.addClass(Js)):(Q.addClass(Js),Q.parents(hm).prev(Ju+", "+fm).addClass(Js),Q.parents(hm).prev(M1).children(Ju).addClass(Js)),a.default(this._scrollElement).trigger(w1,{relatedTarget:L})},ne._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(L){return L.classList.contains(Js)}).forEach(function(L){return L.classList.remove(Js)})},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this).data(Pl),Q=typeof L=="object"&&L;if(G||(G=new fe(this,Q),a.default(this).data(Pl,G)),typeof L=="string"){if(typeof G[L]>"u")throw new TypeError('No method named "'+L+'"');G[L]()}})},u(fe,null,[{key:"VERSION",get:function(){return v1}},{key:"Default",get:function(){return pm}}]),fe}();a.default(window).on(x1,function(){for(var fe=[].slice.call(document.querySelectorAll(T1)),ne=fe.length,te=ne;te--;){var L=a.default(fe[te]);eo._jQueryInterface.call(L,L.data())}}),a.default.fn[Qs]=eo._jQueryInterface,a.default.fn[Qs].Constructor=eo,a.default.fn[Qs].noConflict=function(){return a.default.fn[Qs]=b1,eo._jQueryInterface};var to="tab",R1="4.6.2",Rl="bs.tab",io="."+Rl,I1=".data-api",O1=a.default.fn[to],D1="dropdown-menu",no="active",k1="disabled",mm="fade",gm="show",N1="hide"+io,F1="hidden"+io,U1="show"+io,z1="shown"+io,B1="click"+io+I1,H1=".dropdown",V1=".nav, .list-group",vm=".active",ym="> li > .active",$1='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',G1=".dropdown-toggle",W1="> .dropdown-menu .active",so=function(){function fe(te){this._element=te}var ne=fe.prototype;return ne.show=function(){var L=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&a.default(this._element).hasClass(no)||a.default(this._element).hasClass(k1)||this._element.hasAttribute("disabled"))){var G,Q,ve=a.default(this._element).closest(V1)[0],_e=y.getSelectorFromElement(this._element);if(ve){var Re=ve.nodeName==="UL"||ve.nodeName==="OL"?ym:vm;Q=a.default.makeArray(a.default(ve).find(Re)),Q=Q[Q.length-1]}var tt=a.default.Event(N1,{relatedTarget:this._element}),bt=a.default.Event(U1,{relatedTarget:Q});if(Q&&a.default(Q).trigger(tt),a.default(this._element).trigger(bt),!(bt.isDefaultPrevented()||tt.isDefaultPrevented())){_e&&(G=document.querySelector(_e)),this._activate(this._element,ve);var Et=function(){var Mn=a.default.Event(F1,{relatedTarget:L._element}),pn=a.default.Event(z1,{relatedTarget:Q});a.default(Q).trigger(Mn),a.default(L._element).trigger(pn)};G?this._activate(G,G.parentNode,Et):Et()}}},ne.dispose=function(){a.default.removeData(this._element,Rl),this._element=null},ne._activate=function(L,G,Q){var ve=this,_e=G&&(G.nodeName==="UL"||G.nodeName==="OL")?a.default(G).find(ym):a.default(G).children(vm),Re=_e[0],tt=Q&&Re&&a.default(Re).hasClass(mm),bt=function(){return ve._transitionComplete(L,Re,Q)};if(Re&&tt){var Et=y.getTransitionDurationFromElement(Re);a.default(Re).removeClass(gm).one(y.TRANSITION_END,bt).emulateTransitionEnd(Et)}else bt()},ne._transitionComplete=function(L,G,Q){if(G){a.default(G).removeClass(no);var ve=a.default(G.parentNode).find(W1)[0];ve&&a.default(ve).removeClass(no),G.getAttribute("role")==="tab"&&G.setAttribute("aria-selected",!1)}a.default(L).addClass(no),L.getAttribute("role")==="tab"&&L.setAttribute("aria-selected",!0),y.reflow(L),L.classList.contains(mm)&&L.classList.add(gm);var _e=L.parentNode;if(_e&&_e.nodeName==="LI"&&(_e=_e.parentNode),_e&&a.default(_e).hasClass(D1)){var Re=a.default(L).closest(H1)[0];if(Re){var tt=[].slice.call(Re.querySelectorAll(G1));a.default(tt).addClass(no)}L.setAttribute("aria-expanded",!0)}Q&&Q()},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this),Q=G.data(Rl);if(Q||(Q=new fe(this),G.data(Rl,Q)),typeof L=="string"){if(typeof Q[L]>"u")throw new TypeError('No method named "'+L+'"');Q[L]()}})},u(fe,null,[{key:"VERSION",get:function(){return R1}}]),fe}();a.default(document).on(B1,$1,function(fe){fe.preventDefault(),so._jQueryInterface.call(a.default(this),"show")}),a.default.fn[to]=so._jQueryInterface,a.default.fn[to].Constructor=so,a.default.fn[to].noConflict=function(){return a.default.fn[to]=O1,so._jQueryInterface};var Ir="toast",j1="4.6.2",Il="bs.toast",ro="."+Il,X1=a.default.fn[Ir],q1="fade",bm="hide",ao="show",_m="showing",wm="click.dismiss"+ro,Y1="hide"+ro,K1="hidden"+ro,Z1="show"+ro,Q1="shown"+ro,J1='[data-dismiss="toast"]',Em={animation:!0,autohide:!0,delay:500},ex={animation:"boolean",autohide:"boolean",delay:"number"},Ol=function(){function fe(te,L){this._element=te,this._config=this._getConfig(L),this._timeout=null,this._setListeners()}var ne=fe.prototype;return ne.show=function(){var L=this,G=a.default.Event(Z1);if(a.default(this._element).trigger(G),!G.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add(q1);var Q=function(){L._element.classList.remove(_m),L._element.classList.add(ao),a.default(L._element).trigger(Q1),L._config.autohide&&(L._timeout=setTimeout(function(){L.hide()},L._config.delay))};if(this._element.classList.remove(bm),y.reflow(this._element),this._element.classList.add(_m),this._config.animation){var ve=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,Q).emulateTransitionEnd(ve)}else Q()}},ne.hide=function(){if(this._element.classList.contains(ao)){var L=a.default.Event(Y1);a.default(this._element).trigger(L),!L.isDefaultPrevented()&&this._close()}},ne.dispose=function(){this._clearTimeout(),this._element.classList.contains(ao)&&this._element.classList.remove(ao),a.default(this._element).off(wm),a.default.removeData(this._element,Il),this._element=null,this._config=null},ne._getConfig=function(L){return L=c({},Em,a.default(this._element).data(),typeof L=="object"&&L?L:{}),y.typeCheckConfig(Ir,L,this.constructor.DefaultType),L},ne._setListeners=function(){var L=this;a.default(this._element).on(wm,J1,function(){return L.hide()})},ne._close=function(){var L=this,G=function(){L._element.classList.add(bm),a.default(L._element).trigger(K1)};if(this._element.classList.remove(ao),this._config.animation){var Q=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,G).emulateTransitionEnd(Q)}else G()},ne._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},fe._jQueryInterface=function(L){return this.each(function(){var G=a.default(this),Q=G.data(Il),ve=typeof L=="object"&&L;if(Q||(Q=new fe(this,ve),G.data(Il,Q)),typeof L=="string"){if(typeof Q[L]>"u")throw new TypeError('No method named "'+L+'"');Q[L](this)}})},u(fe,null,[{key:"VERSION",get:function(){return j1}},{key:"DefaultType",get:function(){return ex}},{key:"Default",get:function(){return Em}}]),fe}();a.default.fn[Ir]=Ol._jQueryInterface,a.default.fn[Ir].Constructor=Ol,a.default.fn[Ir].noConflict=function(){return a.default.fn[Ir]=X1,Ol._jQueryInterface},t.Alert=O,t.Button=Ie,t.Carousel=pe,t.Collapse=Ot,t.Dropdown=vs,t.Modal=Ya,t.Popover=Al,t.Scrollspy=eo,t.Tab=so,t.Toast=Ol,t.Tooltip=Zs,t.Util=y,Object.defineProperty(t,"__esModule",{value:!0})})})(Sm,Sm.exports);function Lm(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function $f(i,e){i===void 0&&(i={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof i[t]>"u"?i[t]=e[t]:Lm(e[t])&&Lm(i[t])&&Object.keys(e[t]).length>0&&$f(i[t],e[t])})}const g0={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function gi(){const i=typeof document<"u"?document:{};return $f(i,g0),i}const Vx={document:g0,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function Gt(){const i=typeof window<"u"?window:{};return $f(i,Vx),i}function Ms(i){return i===void 0&&(i=""),i.trim().split(" ").filter(e=>!!e.trim())}function $x(i){const e=i;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Er(i,e){return e===void 0&&(e=0),setTimeout(i,e)}function an(){return Date.now()}function Gx(i){const e=Gt();let t;return e.getComputedStyle&&(t=e.getComputedStyle(i,null)),!t&&i.currentStyle&&(t=i.currentStyle),t||(t=i.style),t}function fh(i,e){e===void 0&&(e="x");const t=Gt();let n,s,r;const a=Gx(i);return t.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(o=>o.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(s==="none"?"":s)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=r.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?s=r.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function bo(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function Wx(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function Wi(){const i=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!Wx(n)){const s=Object.keys(Object(n)).filter(r=>e.indexOf(r)<0);for(let r=0,a=s.length;r<a;r+=1){const o=s[r],l=Object.getOwnPropertyDescriptor(n,o);l!==void 0&&l.enumerable&&(bo(i[o])&&bo(n[o])?n[o].__swiper__?i[o]=n[o]:Wi(i[o],n[o]):!bo(i[o])&&bo(n[o])?(i[o]={},n[o].__swiper__?i[o]=n[o]:Wi(i[o],n[o])):i[o]=n[o])}}}return i}function _o(i,e,t){i.style.setProperty(e,t)}function v0(i){let{swiper:e,targetPosition:t,side:n}=i;const s=Gt(),r=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const u=t>r?"next":"prev",c=(h,f)=>u==="next"&&h>=f||u==="prev"&&h<=f,d=()=>{o=new Date().getTime(),a===null&&(a=o);const h=Math.max(Math.min((o-a)/l,1),0),f=.5-Math.cos(h*Math.PI)/2;let p=r+f*(t-r);if(c(p,t)&&(p=t),e.wrapperEl.scrollTo({[n]:p}),c(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:p})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function Cr(i){return i.querySelector(".swiper-slide-transform")||i.shadowRoot&&i.shadowRoot.querySelector(".swiper-slide-transform")||i}function mi(i,e){e===void 0&&(e="");const t=[...i.children];return i instanceof HTMLSlotElement&&t.push(...i.assignedElements()),e?t.filter(n=>n.matches(e)):t}function jx(i,e){const t=e.contains(i);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(i):t}function Bc(i){try{console.warn(i);return}catch{}}function qi(i,e){e===void 0&&(e=[]);const t=document.createElement(i);return t.classList.add(...Array.isArray(e)?e:Ms(e)),t}function Hc(i){const e=Gt(),t=gi(),n=i.getBoundingClientRect(),s=t.body,r=i.clientTop||s.clientTop||0,a=i.clientLeft||s.clientLeft||0,o=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:n.top+o-r,left:n.left+l-a}}function Xx(i,e){const t=[];for(;i.previousElementSibling;){const n=i.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function qx(i,e){const t=[];for(;i.nextElementSibling;){const n=i.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function Ls(i,e){return Gt().getComputedStyle(i,null).getPropertyValue(e)}function Bo(i){let e=i,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function br(i,e){const t=[];let n=i.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function So(i,e){function t(n){n.target===i&&(e.call(i,n),i.removeEventListener("transitionend",t))}e&&i.addEventListener("transitionend",t)}function ph(i,e,t){const n=Gt();return i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function ht(i){return(Array.isArray(i)?i:[i]).filter(e=>!!e)}function mu(i){return e=>Math.abs(e)>0&&i.browser&&i.browser.need3dFix&&Math.abs(e)%90===0?e+.001:e}let nd;function Yx(){const i=Gt(),e=gi();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function y0(){return nd||(nd=Yx()),nd}let sd;function Kx(i){let{userAgent:e}=i===void 0?{}:i;const t=y0(),n=Gt(),s=n.navigator.platform,r=e||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,l=n.screen.height,u=r.match(/(Android);?[\s\/]+([\d.]+)?/);let c=r.match(/(iPad).*OS\s([\d_]+)/);const d=r.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=s==="Win32";let p=s==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&t.touch&&g.indexOf(`${o}x${l}`)>=0&&(c=r.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),u&&!f&&(a.os="android",a.android=!0),(c||h||d)&&(a.os="ios",a.ios=!0),a}function b0(i){return i===void 0&&(i={}),sd||(sd=Kx(i)),sd}let rd;function Zx(){const i=Gt(),e=b0();let t=!1;function n(){const o=i.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(n()){const o=String(i.navigator.userAgent);if(o.includes("Version/")){const[l,u]=o.split("Version/")[1].split(" ")[0].split(".").map(c=>Number(c));t=l<16||l===16&&u<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),r=n(),a=r||s&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:a,isWebView:s}}function Qx(){return rd||(rd=Zx()),rd}function Jx(i){let{swiper:e,on:t,emit:n}=i;const s=Gt();let r=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(d=>{a=s.requestAnimationFrame(()=>{const{width:h,height:f}=e;let p=h,g=f;d.forEach(v=>{let{contentBoxSize:m,contentRect:b,target:_}=v;_&&_!==e.el||(p=b?b.width:(m[0]||m).inlineSize,g=b?b.height:(m[0]||m).blockSize)}),(p!==h||g!==f)&&o()})}),r.observe(e.el))},u=()=>{a&&s.cancelAnimationFrame(a),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},c=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",c)}),t("destroy",()=>{u(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",c)})}function eS(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=[],a=Gt(),o=function(c,d){d===void 0&&(d={});const h=a.MutationObserver||a.WebkitMutationObserver,f=new h(p=>{if(e.__preventObserver__)return;if(p.length===1){s("observerUpdate",p[0]);return}const g=function(){s("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(g):a.setTimeout(g,0)});f.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),r.push(f)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=br(e.hostEl);for(let d=0;d<c.length;d+=1)o(c[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},u=()=>{r.forEach(c=>{c.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",u)}var tS={on(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return i.split(" ").forEach(r=>{n.eventsListeners[r]||(n.eventsListeners[r]=[]),n.eventsListeners[r][s](e)}),n},once(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function s(){n.off(i,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];e.apply(n,a)}return s.__emitterProxy=e,n.on(i,s,t)},onAny(i,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(i)<0&&t.eventsAnyListeners[n](i),t},offAny(i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(i);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(i,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||i.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[n].splice(r,1)})}),t},emit(){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let e,t,n;for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),n=i):(e=r[0].events,t=r[0].data,n=r[0].context||i),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(u=>{u.apply(n,[l,...t])}),i.eventsListeners&&i.eventsListeners[l]&&i.eventsListeners[l].forEach(u=>{u.apply(n,t)})}),i}};function iS(){const i=this;let e,t;const n=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?t=i.params.height:t=n.clientHeight,!(e===0&&i.isHorizontal()||t===0&&i.isVertical())&&(e=e-parseInt(Ls(n,"padding-left")||0,10)-parseInt(Ls(n,"padding-right")||0,10),t=t-parseInt(Ls(n,"padding-top")||0,10)-parseInt(Ls(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(i,{width:e,height:t,size:i.isHorizontal()?e:t}))}function nS(){const i=this;function e(w,C){return parseFloat(w.getPropertyValue(i.getDirectionLabel(C))||0)}const t=i.params,{wrapperEl:n,slidesEl:s,size:r,rtlTranslate:a,wrongRTL:o}=i,l=i.virtual&&t.virtual.enabled,u=l?i.virtual.slides.length:i.slides.length,c=mi(s,`.${i.params.slideClass}, swiper-slide`),d=l?i.virtual.slides.length:c.length;let h=[];const f=[],p=[];let g=t.slidesOffsetBefore;typeof g=="function"&&(g=t.slidesOffsetBefore.call(i));let v=t.slidesOffsetAfter;typeof v=="function"&&(v=t.slidesOffsetAfter.call(i));const m=i.snapGrid.length,b=i.slidesGrid.length;let _=t.spaceBetween,y=-g,M=0,x=0;if(typeof r>"u")return;typeof _=="string"&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*r:typeof _=="string"&&(_=parseFloat(_)),i.virtualSize=-_,c.forEach(w=>{a?w.style.marginLeft="":w.style.marginRight="",w.style.marginBottom="",w.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(_o(n,"--swiper-centered-offset-before",""),_o(n,"--swiper-centered-offset-after",""));const S=t.grid&&t.grid.rows>1&&i.grid;S?i.grid.initSlides(c):i.grid&&i.grid.unsetSlides();let A;const E=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(w=>typeof t.breakpoints[w].slidesPerView<"u").length>0;for(let w=0;w<d;w+=1){A=0;let C;if(c[w]&&(C=c[w]),S&&i.grid.updateSlide(w,C,c),!(c[w]&&Ls(C,"display")==="none")){if(t.slidesPerView==="auto"){E&&(c[w].style[i.getDirectionLabel("width")]="");const P=getComputedStyle(C),T=C.style.transform,R=C.style.webkitTransform;if(T&&(C.style.transform="none"),R&&(C.style.webkitTransform="none"),t.roundLengths)A=i.isHorizontal()?ph(C,"width"):ph(C,"height");else{const F=e(P,"width"),z=e(P,"padding-left"),D=e(P,"padding-right"),O=e(P,"margin-left"),j=e(P,"margin-right"),k=P.getPropertyValue("box-sizing");if(k&&k==="border-box")A=F+O+j;else{const{clientWidth:I,offsetWidth:U}=C;A=F+z+D+O+j+(U-I)}}T&&(C.style.transform=T),R&&(C.style.webkitTransform=R),t.roundLengths&&(A=Math.floor(A))}else A=(r-(t.slidesPerView-1)*_)/t.slidesPerView,t.roundLengths&&(A=Math.floor(A)),c[w]&&(c[w].style[i.getDirectionLabel("width")]=`${A}px`);c[w]&&(c[w].swiperSlideSize=A),p.push(A),t.centeredSlides?(y=y+A/2+M/2+_,M===0&&w!==0&&(y=y-r/2-_),w===0&&(y=y-r/2-_),Math.abs(y)<1/1e3&&(y=0),t.roundLengths&&(y=Math.floor(y)),x%t.slidesPerGroup===0&&h.push(y),f.push(y)):(t.roundLengths&&(y=Math.floor(y)),(x-Math.min(i.params.slidesPerGroupSkip,x))%i.params.slidesPerGroup===0&&h.push(y),f.push(y),y=y+A+_),i.virtualSize+=A+_,M=A,x+=1}}if(i.virtualSize=Math.max(i.virtualSize,r)+v,a&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(n.style.width=`${i.virtualSize+_}px`),t.setWrapperSize&&(n.style[i.getDirectionLabel("width")]=`${i.virtualSize+_}px`),S&&i.grid.updateWrapperSize(A,h),!t.centeredSlides){const w=[];for(let C=0;C<h.length;C+=1){let P=h[C];t.roundLengths&&(P=Math.floor(P)),h[C]<=i.virtualSize-r&&w.push(P)}h=w,Math.floor(i.virtualSize-r)-Math.floor(h[h.length-1])>1&&h.push(i.virtualSize-r)}if(l&&t.loop){const w=p[0]+_;if(t.slidesPerGroup>1){const C=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/t.slidesPerGroup),P=w*t.slidesPerGroup;for(let T=0;T<C;T+=1)h.push(h[h.length-1]+P)}for(let C=0;C<i.virtual.slidesBefore+i.virtual.slidesAfter;C+=1)t.slidesPerGroup===1&&h.push(h[h.length-1]+w),f.push(f[f.length-1]+w),i.virtualSize+=w}if(h.length===0&&(h=[0]),_!==0){const w=i.isHorizontal()&&a?"marginLeft":i.getDirectionLabel("marginRight");c.filter((C,P)=>!t.cssMode||t.loop?!0:P!==c.length-1).forEach(C=>{C.style[w]=`${_}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let w=0;p.forEach(P=>{w+=P+(_||0)}),w-=_;const C=w>r?w-r:0;h=h.map(P=>P<=0?-g:P>C?C+v:P)}if(t.centerInsufficientSlides){let w=0;p.forEach(P=>{w+=P+(_||0)}),w-=_;const C=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(w+C<r){const P=(r-w-C)/2;h.forEach((T,R)=>{h[R]=T-P}),f.forEach((T,R)=>{f[R]=T+P})}}if(Object.assign(i,{slides:c,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){_o(n,"--swiper-centered-offset-before",`${-h[0]}px`),_o(n,"--swiper-centered-offset-after",`${i.size/2-p[p.length-1]/2}px`);const w=-i.snapGrid[0],C=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(P=>P+w),i.slidesGrid=i.slidesGrid.map(P=>P+C)}if(d!==u&&i.emit("slidesLengthChange"),h.length!==m&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),f.length!==b&&i.emit("slidesGridLengthChange"),t.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const w=`${t.containerModifierClass}backface-hidden`,C=i.el.classList.contains(w);d<=t.maxBackfaceHiddenSlides?C||i.el.classList.add(w):C&&i.el.classList.remove(w)}}function sS(i){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);const a=o=>n?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const o=e.activeIndex+r;if(o>e.slides.length&&!n)break;t.push(a(o))}else t.push(a(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){const o=t[r].offsetHeight;s=o>s?o:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function rS(){const i=this,e=i.slides,t=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(i.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-i.cssOverflowAdjustment()}const Rm=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function aS(i){i===void 0&&(i=this&&this.translate||0);const e=this,t=e.params,{slides:n,rtlTranslate:s,snapGrid:r}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-i;s&&(a=i),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<n.length;l+=1){const u=n[l];let c=u.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=n[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),h=(a-r[0]+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),f=-(a-c),p=f+e.slidesSizesGrid[l],g=f>=0&&f<=e.size-e.slidesSizesGrid[l],v=f>=0&&f<e.size-1||p>1&&p<=e.size||f<=0&&p>=e.size;v&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l)),Rm(u,v,t.slideVisibleClass),Rm(u,g,t.slideFullyVisibleClass),u.progress=s?-d:d,u.originalProgress=s?-h:h}}function oS(i){const e=this;if(typeof i>"u"){const c=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*c||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:a,progressLoop:o}=e;const l=r,u=a;if(n===0)s=0,r=!0,a=!0;else{s=(i-e.minTranslate())/n;const c=Math.abs(i-e.minTranslate())<1,d=Math.abs(i-e.maxTranslate())<1;r=c||s<=0,a=d||s>=1,c&&(s=0),d&&(s=1)}if(t.loop){const c=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[c],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(i);g>=h?o=(g-h)/p:o=(g+p-f)/p,o>1&&(o-=1)}Object.assign(e,{progress:s,progressLoop:o,isBeginning:r,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(i),r&&!l&&e.emit("reachBeginning toEdge"),a&&!u&&e.emit("reachEnd toEdge"),(l&&!r||u&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}const ad=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function lS(){const i=this,{slides:e,params:t,slidesEl:n,activeIndex:s}=i,r=i.virtual&&t.virtual.enabled,a=i.grid&&t.grid&&t.grid.rows>1,o=d=>mi(n,`.${t.slideClass}${d}, swiper-slide${d}`)[0];let l,u,c;if(r)if(t.loop){let d=s-i.virtual.slidesBefore;d<0&&(d=i.virtual.slides.length+d),d>=i.virtual.slides.length&&(d-=i.virtual.slides.length),l=o(`[data-swiper-slide-index="${d}"]`)}else l=o(`[data-swiper-slide-index="${s}"]`);else a?(l=e.filter(d=>d.column===s)[0],c=e.filter(d=>d.column===s+1)[0],u=e.filter(d=>d.column===s-1)[0]):l=e[s];l&&(a||(c=qx(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c&&(c=e[0]),u=Xx(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(d=>{ad(d,d===l,t.slideActiveClass),ad(d,d===c,t.slideNextClass),ad(d,d===u,t.slidePrevClass)}),i.emitSlidesClasses()}const _c=(i,e)=>{if(!i||i.destroyed||!i.params)return;const t=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=e.closest(t());if(n){let s=n.querySelector(`.${i.params.lazyPreloaderClass}`);!s&&i.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},od=(i,e)=>{if(!i.slides[e])return;const t=i.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},mh=i=>{if(!i||i.destroyed||!i.params)return;let e=i.params.lazyPreloadPrevNext;const t=i.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),s=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const a=s,o=[a-e];o.push(...Array.from({length:e}).map((l,u)=>a+n+u)),i.slides.forEach((l,u)=>{o.includes(l.column)&&od(i,u)});return}const r=s+n-1;if(i.params.rewind||i.params.loop)for(let a=s-e;a<=r+e;a+=1){const o=(a%t+t)%t;(o<s||o>r)&&od(i,o)}else for(let a=Math.max(s-e,0);a<=Math.min(r+e,t-1);a+=1)a!==s&&(a>r||a<s)&&od(i,a)};function cS(i){const{slidesGrid:e,params:t}=i,n=i.rtlTranslate?i.translate:-i.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?n>=e[r]&&n<e[r+1]-(e[r+1]-e[r])/2?s=r:n>=e[r]&&n<e[r+1]&&(s=r+1):n>=e[r]&&(s=r);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function uS(i){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:s,activeIndex:r,realIndex:a,snapIndex:o}=e;let l=i,u;const c=f=>{let p=f-e.virtual.slidesBefore;return p<0&&(p=e.virtual.slides.length+p),p>=e.virtual.slides.length&&(p-=e.virtual.slides.length),p};if(typeof l>"u"&&(l=cS(e)),n.indexOf(t)>=0)u=n.indexOf(t);else{const f=Math.min(s.slidesPerGroupSkip,l);u=f+Math.floor((l-f)/s.slidesPerGroup)}if(u>=n.length&&(u=n.length-1),l===r&&!e.params.loop){u!==o&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=c(l);return}const d=e.grid&&s.grid&&s.grid.rows>1;let h;if(e.virtual&&s.virtual.enabled&&s.loop)h=c(l);else if(d){const f=e.slides.filter(g=>g.column===l)[0];let p=parseInt(f.getAttribute("data-swiper-slide-index"),10);Number.isNaN(p)&&(p=Math.max(e.slides.indexOf(f),0)),h=Math.floor(p/s.grid.rows)}else if(e.slides[l]){const f=e.slides[l].getAttribute("data-swiper-slide-index");f?h=parseInt(f,10):h=l}else h=l;Object.assign(e,{previousSnapIndex:o,snapIndex:u,previousRealIndex:a,realIndex:h,previousIndex:r,activeIndex:l}),e.initialized&&mh(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==h&&e.emit("realIndexChange"),e.emit("slideChange"))}function dS(i,e){const t=this,n=t.params;let s=i.closest(`.${n.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(i)&&[...e.slice(e.indexOf(i)+1,e.length)].forEach(o=>{!s&&o.matches&&o.matches(`.${n.slideClass}, swiper-slide`)&&(s=o)});let r=!1,a;if(s){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===s){r=!0,a=o;break}}if(s&&r)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var hS={updateSize:iS,updateSlides:nS,updateAutoHeight:sS,updateSlidesOffset:rS,updateSlidesProgress:aS,updateProgress:oS,updateSlidesClasses:lS,updateActiveIndex:uS,updateClickedSlide:dS};function fS(i){i===void 0&&(i=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:n,translate:s,wrapperEl:r}=e;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let a=fh(r,i);return a+=e.cssOverflowAdjustment(),n&&(a=-a),a||0}function pS(i,e){const t=this,{rtlTranslate:n,params:s,wrapperEl:r,progress:a}=t;let o=0,l=0;const u=0;t.isHorizontal()?o=n?-i:i:l=i,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,s.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:s.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${o}px, ${l}px, ${u}px)`);let c;const d=t.maxTranslate()-t.minTranslate();d===0?c=0:c=(i-t.minTranslate())/d,c!==a&&t.updateProgress(i),t.emit("setTranslate",t.translate,e)}function mS(){return-this.snapGrid[0]}function gS(){return-this.snapGrid[this.snapGrid.length-1]}function vS(i,e,t,n,s){i===void 0&&(i=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);const r=this,{params:a,wrapperEl:o}=r;if(r.animating&&a.preventInteractionOnTransition)return!1;const l=r.minTranslate(),u=r.maxTranslate();let c;if(n&&i>l?c=l:n&&i<u?c=u:c=i,r.updateProgress(c),a.cssMode){const d=r.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-c;else{if(!r.support.smoothScroll)return v0({swiper:r,targetPosition:-c,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(c),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(c),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(h){!r||r.destroyed||h.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var yS={getTranslate:fS,setTranslate:pS,minTranslate:mS,maxTranslate:gS,translateTo:vS};function bS(i,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${i}ms`,t.wrapperEl.style.transitionDelay=i===0?"0ms":""),t.emit("setTransition",i,e)}function _0(i){let{swiper:e,runCallbacks:t,direction:n,step:s}=i;const{activeIndex:r,previousIndex:a}=e;let o=n;if(o||(r>a?o="next":r<a?o="prev":o="reset"),e.emit(`transition${s}`),t&&r!==a){if(o==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),o==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function _S(i,e){i===void 0&&(i=!0);const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),_0({swiper:t,runCallbacks:i,direction:e,step:"Start"}))}function wS(i,e){i===void 0&&(i=!0);const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),_0({swiper:t,runCallbacks:i,direction:e,step:"End"}))}var ES={setTransition:bS,transitionStart:_S,transitionEnd:wS};function xS(i,e,t,n,s){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));const r=this;let a=i;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=r;if(!p&&!n&&!s||r.destroyed||r.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);const g=Math.min(r.params.slidesPerGroupSkip,a);let v=g+Math.floor((a-g)/r.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const m=-l[v];if(o.normalizeSlideIndex)for(let M=0;M<u.length;M+=1){const x=-Math.floor(m*100),S=Math.floor(u[M]*100),A=Math.floor(u[M+1]*100);typeof u[M+1]<"u"?x>=S&&x<A-(A-S)/2?a=M:x>=S&&x<A&&(a=M+1):x>=S&&(a=M)}if(r.initialized&&a!==d&&(!r.allowSlideNext&&(h?m>r.translate&&m>r.minTranslate():m<r.translate&&m<r.minTranslate())||!r.allowSlidePrev&&m>r.translate&&m>r.maxTranslate()&&(d||0)!==a))return!1;a!==(c||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(m);let b;a>d?b="next":a<d?b="prev":b="reset";const _=r.virtual&&r.params.virtual.enabled;if(!(_&&s)&&(h&&-m===r.translate||!h&&m===r.translate))return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),o.effect!=="slide"&&r.setTranslate(m),b!=="reset"&&(r.transitionStart(t,b),r.transitionEnd(t,b)),!1;if(o.cssMode){const M=r.isHorizontal(),x=h?m:-m;if(e===0)_&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),_&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[M?"scrollLeft":"scrollTop"]=x})):f[M?"scrollLeft":"scrollTop"]=x,_&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return v0({swiper:r,targetPosition:x,side:M?"left":"top"}),!0;f.scrollTo({[M?"left":"top"]:x,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(m),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,n),r.transitionStart(t,b),e===0?r.transitionEnd(t,b):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(x){!r||r.destroyed||x.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,b))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function SS(i,e,t,n){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let a=i;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)a=a+s.virtual.slidesBefore;else{let o;if(r){const h=a*s.params.grid.rows;o=s.slides.filter(f=>f.getAttribute("data-swiper-slide-index")*1===h)[0].column}else o=s.getSlideIndexByData(a);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:u}=s.params;let c=s.params.slidesPerView;c==="auto"?c=s.slidesPerViewDynamic():(c=Math.ceil(parseFloat(s.params.slidesPerView,10)),u&&c%2===0&&(c=c+1));let d=l-o<c;if(u&&(d=d||o<Math.ceil(c/2)),n&&u&&s.params.slidesPerView!=="auto"&&!r&&(d=!1),d){const h=u?o<s.activeIndex?"prev":"next":o-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?o+1:o-l+1,slideRealIndex:h==="next"?s.realIndex:void 0})}if(r){const h=a*s.params.grid.rows;a=s.slides.filter(f=>f.getAttribute("data-swiper-slide-index")*1===h)[0].column}else a=s.getSlideIndexByData(a)}return requestAnimationFrame(()=>{s.slideTo(a,e,t,n)}),s}function TS(i,e,t){e===void 0&&(e=!0);const n=this,{enabled:s,params:r,animating:a}=n;if(!s||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);let o=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<r.slidesPerGroupSkip?1:o,u=n.virtual&&r.virtual.enabled;if(r.loop){if(a&&!u&&r.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,i,e,t)}),!0}return r.rewind&&n.isEnd?n.slideTo(0,i,e,t):n.slideTo(n.activeIndex+l,i,e,t)}function MS(i,e,t){e===void 0&&(e=!0);const n=this,{params:s,snapGrid:r,slidesGrid:a,rtlTranslate:o,enabled:l,animating:u}=n;if(!l||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);const c=n.virtual&&s.virtual.enabled;if(s.loop){if(u&&!c&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const d=o?n.translate:-n.translate;function h(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const f=h(d),p=r.map(m=>h(m));let g=r[p.indexOf(f)-1];if(typeof g>"u"&&s.cssMode){let m;r.forEach((b,_)=>{f>=b&&(m=_)}),typeof m<"u"&&(g=r[m>0?m-1:m])}let v=0;if(typeof g<"u"&&(v=a.indexOf(g),v<0&&(v=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(v=v-n.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),s.rewind&&n.isBeginning){const m=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(m,i,e,t)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(v,i,e,t)}),!0;return n.slideTo(v,i,e,t)}function CS(i,e,t){e===void 0&&(e=!0);const n=this;if(!n.destroyed)return typeof i>"u"&&(i=n.params.speed),n.slideTo(n.activeIndex,i,e,t)}function AS(i,e,t,n){e===void 0&&(e=!0),n===void 0&&(n=.5);const s=this;if(s.destroyed)return;typeof i>"u"&&(i=s.params.speed);let r=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,r),o=a+Math.floor((r-a)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[o]){const u=s.snapGrid[o],c=s.snapGrid[o+1];l-u>(c-u)*n&&(r+=s.params.slidesPerGroup)}else{const u=s.snapGrid[o-1],c=s.snapGrid[o];l-u<=(c-u)*n&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,i,e,t)}function PS(){const i=this;if(i.destroyed)return;const{params:e,slidesEl:t}=i,n=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView;let s=i.clickedIndex,r;const a=i.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(i.animating)return;r=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<i.loopedSlides-n/2||s>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),s=i.getSlideIndex(mi(t,`${a}[data-swiper-slide-index="${r}"]`)[0]),Er(()=>{i.slideTo(s)})):i.slideTo(s):s>i.slides.length-n?(i.loopFix(),s=i.getSlideIndex(mi(t,`${a}[data-swiper-slide-index="${r}"]`)[0]),Er(()=>{i.slideTo(s)})):i.slideTo(s)}else i.slideTo(s)}var LS={slideTo:xS,slideToLoop:SS,slideNext:TS,slidePrev:MS,slideReset:CS,slideToClosest:AS,slideToClickedSlide:PS};function RS(i){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const s=()=>{mi(n,`.${t.slideClass}, swiper-slide`).forEach((d,h)=>{d.setAttribute("data-swiper-slide-index",h)})},r=e.grid&&t.grid&&t.grid.rows>1,a=t.slidesPerGroup*(r?t.grid.rows:1),o=e.slides.length%a!==0,l=r&&e.slides.length%t.grid.rows!==0,u=c=>{for(let d=0;d<c;d+=1){const h=e.isElement?qi("swiper-slide",[t.slideBlankClass]):qi("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(h)}};if(o){if(t.loopAddBlankSlides){const c=a-e.slides.length%a;u(c),e.recalcSlides(),e.updateSlides()}else Bc("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(t.loopAddBlankSlides){const c=t.grid.rows-e.slides.length%t.grid.rows;u(c),e.recalcSlides(),e.updateSlides()}else Bc("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:i,direction:t.centeredSlides?void 0:"next"})}function IS(i){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:s,activeSlideIndex:r,byController:a,byMousewheel:o}=i===void 0?{}:i;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:d,slidesEl:h,params:f}=l,{centeredSlides:p}=f;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=d,l.emit("loopFix");return}let g=f.slidesPerView;g==="auto"?g=l.slidesPerViewDynamic():(g=Math.ceil(parseFloat(f.slidesPerView,10)),p&&g%2===0&&(g=g+1));const v=f.slidesPerGroupAuto?g:f.slidesPerGroup;let m=v;m%v!==0&&(m+=v-m%v),m+=f.loopAdditionalSlides,l.loopedSlides=m;const b=l.grid&&f.grid&&f.grid.rows>1;u.length<g+m?Bc("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):b&&f.grid.fill==="row"&&Bc("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _=[],y=[];let M=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(u.filter(T=>T.classList.contains(f.slideActiveClass))[0]):M=r;const x=n==="next"||!n,S=n==="prev"||!n;let A=0,E=0;const w=b?Math.ceil(u.length/f.grid.rows):u.length,P=(b?u[r].column:r)+(p&&typeof s>"u"?-g/2+.5:0);if(P<m){A=Math.max(m-P,v);for(let T=0;T<m-P;T+=1){const R=T-Math.floor(T/w)*w;if(b){const F=w-R-1;for(let z=u.length-1;z>=0;z-=1)u[z].column===F&&_.push(z)}else _.push(w-R-1)}}else if(P+g>w-m){E=Math.max(P-(w-m*2),v);for(let T=0;T<E;T+=1){const R=T-Math.floor(T/w)*w;b?u.forEach((F,z)=>{F.column===R&&y.push(z)}):y.push(R)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),S&&_.forEach(T=>{u[T].swiperLoopMoveDOM=!0,h.prepend(u[T]),u[T].swiperLoopMoveDOM=!1}),x&&y.forEach(T=>{u[T].swiperLoopMoveDOM=!0,h.append(u[T]),u[T].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"?l.updateSlides():b&&(_.length>0&&S||y.length>0&&x)&&l.slides.forEach((T,R)=>{l.grid.updateSlide(R,T,l.slides)}),f.watchSlidesProgress&&l.updateSlidesOffset(),t){if(_.length>0&&S){if(typeof e>"u"){const T=l.slidesGrid[M],F=l.slidesGrid[M+A]-T;o?l.setTranslate(l.translate-F):(l.slideTo(M+Math.ceil(A),0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-F,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-F))}else if(s){const T=b?_.length/f.grid.rows:_.length;l.slideTo(l.activeIndex+T,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(y.length>0&&x)if(typeof e>"u"){const T=l.slidesGrid[M],F=l.slidesGrid[M-E]-T;o?l.setTranslate(l.translate-F):(l.slideTo(M-E,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-F,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-F))}else{const T=b?y.length/f.grid.rows:y.length;l.slideTo(l.activeIndex-T,0,!1,!0)}}if(l.allowSlidePrev=c,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const T={slideRealIndex:e,direction:n,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(R=>{!R.destroyed&&R.params.loop&&R.loopFix({...T,slideTo:R.params.slidesPerView===f.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...T,slideTo:l.controller.control.params.slidesPerView===f.slidesPerView?t:!1})}l.emit("loopFix")}function OS(){const i=this,{params:e,slidesEl:t}=i;if(!e.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const n=[];i.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[r]=s}),i.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{t.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var DS={loopCreate:RS,loopFix:IS,loopDestroy:OS};function kS(i){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=i?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function NS(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var FS={setGrabCursor:kS,unsetGrabCursor:NS};function US(i,e){e===void 0&&(e=this);function t(n){if(!n||n===gi()||n===Gt())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(i);return!s&&!n.getRootNode?null:s||t(n.getRootNode().host)}return t(e)}function Im(i,e,t){const n=Gt(),{params:s}=i,r=s.edgeSwipeDetection,a=s.edgeSwipeThreshold;return r&&(t<=a||t>=n.innerWidth-a)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function zS(i){const e=this,t=gi();let n=i;n.originalEvent&&(n=n.originalEvent);const s=e.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){Im(e,n,n.targetTouches[0].pageX);return}const{params:r,touches:a,enabled:o}=e;if(!o||!r.simulateTouch&&n.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=n.target;if(r.touchEventsTarget==="wrapper"&&!jx(l,e.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const u=!!r.noSwipingClass&&r.noSwipingClass!=="",c=n.composedPath?n.composedPath():n.path;u&&n.target&&n.target.shadowRoot&&c&&(l=c[0]);const d=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,h=!!(n.target&&n.target.shadowRoot);if(r.noSwiping&&(h?US(d,l):l.closest(d))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;a.currentX=n.pageX,a.currentY=n.pageY;const f=a.currentX,p=a.currentY;if(!Im(e,n,f))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=f,a.startY=p,s.touchStartTime=an(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let g=!0;l.matches(s.focusableElements)&&(g=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==l&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&t.activeElement.blur();const v=g&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||v)&&!l.isContentEditable&&n.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function BS(i){const e=gi(),t=this,n=t.touchEventsData,{params:s,touches:r,rtlTranslate:a,enabled:o}=t;if(!o||!s.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(n.touchId!==null||l.pointerId!==n.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].filter(x=>x.identifier===n.touchId)[0],!u||u.identifier!==n.touchId)return}else u=l;if(!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=u.pageX,d=u.pageY;if(l.preventedByNestedSwiper){r.startX=c,r.startY=d;return}if(!t.allowTouchMove){l.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(r,{startX:c,startY:d,currentX:c,currentY:d}),n.touchStartTime=an());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(d<r.startY&&t.translate<=t.maxTranslate()||d>r.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(c<r.startX&&t.translate<=t.maxTranslate()||c>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(n.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}n.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=c,r.currentY=d;const h=r.currentX-r.startX,f=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(h**2+f**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let x;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?n.isScrolling=!1:h*h+f*f>=25&&(x=Math.atan2(Math.abs(f),Math.abs(h))*180/Math.PI,n.isScrolling=t.isHorizontal()?x>s.touchAngle:90-x>s.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(n.startMoving=!0),n.isScrolling||l.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let p=t.isHorizontal()?h:f,g=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(p=Math.abs(p)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),r.diff=p,p*=s.touchRatio,a&&(p=-p,g=-g);const v=t.touchesDirection;t.swipeDirection=p>0?"prev":"next",t.touchesDirection=g>0?"prev":"next";const m=t.params.loop&&!s.cssMode,b=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(m&&b&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const x=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(x)}n.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let _;if(new Date().getTime(),n.isMoved&&n.allowThresholdMove&&v!==t.touchesDirection&&m&&b&&Math.abs(p)>=1){Object.assign(r,{startX:c,startY:d,currentX:c,currentY:d,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}t.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=p+n.startTranslate;let y=!0,M=s.resistanceRatio;if(s.touchReleaseOnEdges&&(M=0),p>0?(m&&b&&!_&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(y=!1,s.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+p)**M))):p<0&&(m&&b&&!_&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(y=!1,s.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-p)**M))),y&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(p)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,n.currentTranslate=n.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function HS(i){const e=this,t=e.touchEventsData;let n=i;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].filter(M=>M.identifier===t.touchId)[0],!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||n.pointerId!==t.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:u,enabled:c}=e;if(!c||!a.simulateTouch&&n.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",n),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&a.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}a.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=an(),h=d-t.touchStartTime;if(e.allowClick){const M=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(M&&M[0]||n.target,M),e.emit("tap click",n),h<300&&d-t.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(t.lastClickTime=an(),Er(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||o.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(a.followFinger?f=l?e.translate:-e.translate:f=-t.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}const p=f>=-e.maxTranslate()&&!e.params.loop;let g=0,v=e.slidesSizesGrid[0];for(let M=0;M<u.length;M+=M<a.slidesPerGroupSkip?1:a.slidesPerGroup){const x=M<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof u[M+x]<"u"?(p||f>=u[M]&&f<u[M+x])&&(g=M,v=u[M+x]-u[M]):(p||f>=u[M])&&(g=M,v=u[u.length-1]-u[u.length-2])}let m=null,b=null;a.rewind&&(e.isBeginning?b=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const _=(f-u[g])/v,y=g<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(h>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(_>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?m:g+y):e.slideTo(g)),e.swipeDirection==="prev"&&(_>1-a.longSwipesRatio?e.slideTo(g+y):b!==null&&_<0&&Math.abs(_)>a.longSwipesRatio?e.slideTo(b):e.slideTo(g))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(g+y):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:g+y),e.swipeDirection==="prev"&&e.slideTo(b!==null?b:g))}}function Om(){const i=this,{params:e,el:t}=i;if(t&&t.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:r}=i,a=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!o?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!a?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=s,i.allowSlideNext=n,i.params.watchOverflow&&r!==i.snapGrid&&i.checkOverflow()}function VS(i){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function $S(){const i=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let s;const r=i.maxTranslate()-i.minTranslate();r===0?s=0:s=(i.translate-i.minTranslate())/r,s!==i.progress&&i.updateProgress(t?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function GS(i){const e=this;_c(e,i.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function WS(){const i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}const w0=(i,e)=>{const t=gi(),{params:n,el:s,wrapperEl:r,device:a}=i,o=!!n.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;!s||typeof s=="string"||(t[l]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:o}),s[l]("touchstart",i.onTouchStart,{passive:!1}),s[l]("pointerdown",i.onTouchStart,{passive:!1}),t[l]("touchmove",i.onTouchMove,{passive:!1,capture:o}),t[l]("pointermove",i.onTouchMove,{passive:!1,capture:o}),t[l]("touchend",i.onTouchEnd,{passive:!0}),t[l]("pointerup",i.onTouchEnd,{passive:!0}),t[l]("pointercancel",i.onTouchEnd,{passive:!0}),t[l]("touchcancel",i.onTouchEnd,{passive:!0}),t[l]("pointerout",i.onTouchEnd,{passive:!0}),t[l]("pointerleave",i.onTouchEnd,{passive:!0}),t[l]("contextmenu",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[l]("click",i.onClick,!0),n.cssMode&&r[l]("scroll",i.onScroll),n.updateOnWindowResize?i[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Om,!0):i[u]("observerUpdate",Om,!0),s[l]("load",i.onLoad,{capture:!0}))};function jS(){const i=this,{params:e}=i;i.onTouchStart=zS.bind(i),i.onTouchMove=BS.bind(i),i.onTouchEnd=HS.bind(i),i.onDocumentTouchStart=WS.bind(i),e.cssMode&&(i.onScroll=$S.bind(i)),i.onClick=VS.bind(i),i.onLoad=GS.bind(i),w0(i,"on")}function XS(){w0(this,"off")}var qS={attachEvents:jS,detachEvents:XS};const Dm=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function YS(){const i=this,{realIndex:e,initialized:t,params:n,el:s}=i,r=n.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const a=i.getBreakpoint(r,i.params.breakpointsBase,i.el);if(!a||i.currentBreakpoint===a)return;const l=(a in r?r[a]:void 0)||i.originalParams,u=Dm(i,n),c=Dm(i,l),d=i.params.grabCursor,h=l.grabCursor,f=n.enabled;u&&!c?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!u&&c&&(s.classList.add(`${n.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),d&&!h?i.unsetGrabCursor():!d&&h&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(_=>{if(typeof l[_]>"u")return;const y=n[_]&&n[_].enabled,M=l[_]&&l[_].enabled;y&&!M&&i[_].disable(),!y&&M&&i[_].enable()});const p=l.direction&&l.direction!==n.direction,g=n.loop&&(l.slidesPerView!==n.slidesPerView||p),v=n.loop;p&&t&&i.changeDirection(),Wi(i.params,l);const m=i.params.enabled,b=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),f&&!m?i.disable():!f&&m&&i.enable(),i.currentBreakpoint=a,i.emit("_beforeBreakpoint",l),t&&(g?(i.loopDestroy(),i.loopCreate(e),i.updateSlides()):!v&&b?(i.loopCreate(e),i.updateSlides()):v&&!b&&i.loopDestroy()),i.emit("breakpoint",l)}function KS(i,e,t){if(e===void 0&&(e="window"),!i||e==="container"&&!t)return;let n=!1;const s=Gt(),r=e==="window"?s.innerHeight:t.clientHeight,a=Object.keys(i).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:r*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:u}=a[o];e==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(n=l):u<=t.clientWidth&&(n=l)}return n||"max"}var ZS={setBreakpoint:YS,getBreakpoint:KS};function QS(i,e){const t=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&t.push(e+s)}):typeof n=="string"&&t.push(e+n)}),t}function JS(){const i=this,{classNames:e,params:t,rtl:n,el:s,device:r}=i,a=QS(["initialized",t.direction,{"free-mode":i.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),s.classList.add(...e),i.emitContainerClasses()}function eT(){const i=this,{el:e,classNames:t}=i;!e||typeof e=="string"||(e.classList.remove(...t),i.emitContainerClasses())}var tT={addClasses:JS,removeClasses:eT};function iT(){const i=this,{isLocked:e,params:t}=i,{slidesOffsetBefore:n}=t;if(n){const s=i.slides.length-1,r=i.slidesGrid[s]+i.slidesSizesGrid[s]+n*2;i.isLocked=i.size>r}else i.isLocked=i.snapGrid.length===1;t.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),t.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var nT={checkOverflow:iT},km={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function sT(i,e){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],r=n[s];if(typeof r!="object"||r===null){Wi(e,n);return}if(i[s]===!0&&(i[s]={enabled:!0}),s==="navigation"&&i[s]&&i[s].enabled&&!i[s].prevEl&&!i[s].nextEl&&(i[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&i[s]&&i[s].enabled&&!i[s].el&&(i[s].auto=!0),!(s in i&&"enabled"in r)){Wi(e,n);return}typeof i[s]=="object"&&!("enabled"in i[s])&&(i[s].enabled=!0),i[s]||(i[s]={enabled:!1}),Wi(e,n)}}const ld={eventsEmitter:tS,update:hS,translate:yS,transition:ES,slide:LS,loop:DS,grabCursor:FS,events:qS,breakpoints:ZS,checkOverflow:nT,classes:tT},cd={};class It{constructor(){let e,t;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=Wi({},t),e&&!t.el&&(t.el=e);const a=gi();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const c=[];return a.querySelectorAll(t.el).forEach(d=>{const h=Wi({},t,{el:d});c.push(new It(h))}),c}const o=this;o.__swiper__=!0,o.support=y0(),o.device=b0({userAgent:t.userAgent}),o.browser=Qx(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(c=>{c({params:t,swiper:o,extendParams:sT(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=Wi({},km,l);return o.params=Wi({},u,cd,t),o.originalParams=Wi({},o.params),o.passedParams=Wi({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=mi(t,`.${n.slideClass}, swiper-slide`),r=Bo(s[0]);return Bo(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=mi(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),a=(n.maxTranslate()-s)*e+s;n.translateTo(a,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const n=this,{params:s,slides:r,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:u}=n;let c=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let d=r[u]?Math.ceil(r[u].swiperSlideSize):0,h;for(let f=u+1;f<r.length;f+=1)r[f]&&!h&&(d+=Math.ceil(r[f].swiperSlideSize),c+=1,d>l&&(h=!0));for(let f=u-1;f>=0;f-=1)r[f]&&!h&&(d+=r[f].swiperSlideSize,c+=1,d>l&&(h=!0))}else if(e==="current")for(let d=u+1;d<r.length;d+=1)(t?a[d]+o[d]-a[u]<l:a[d]-a[u]<l)&&(c+=1);else for(let d=u-1;d>=0;d-=1)a[u]-a[d]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&_c(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const a=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(a.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const n=this,s=n.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):mi(n,s())[0];return!a&&t.params.createElements&&(a=qi("div",t.params.wrapperClass),n.append(a),mi(n,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:n,wrapperEl:a,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:a,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||Ls(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||Ls(n,"direction")==="rtl"),wrongRTL:Ls(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?_c(t,r):r.addEventListener("load",a=>{_c(t,a.target)})}),mh(t),t.initialized=!0,mh(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const n=this,{params:s,el:r,wrapperEl:a,slides:o}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),$x(n)),n.destroyed=!0),null}static extendDefaults(e){Wi(cd,e)}static get extendedDefaults(){return cd}static get defaults(){return km}static installModule(e){It.prototype.__modules__||(It.prototype.__modules__=[]);const t=It.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>It.installModule(t)),It):(It.installModule(e),It)}}Object.keys(ld).forEach(i=>{Object.keys(ld[i]).forEach(e=>{It.prototype[e]=ld[i][e]})});It.use([Jx,eS]);function rT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let r;const a=gi();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const o=a.createElement("div");function l(p,g){const v=e.params.virtual;if(v.cache&&e.virtual.cache[g])return e.virtual.cache[g];let m;return v.renderSlide?(m=v.renderSlide.call(e,p,g),typeof m=="string"&&(o.innerHTML=m,m=o.children[0])):e.isElement?m=qi("swiper-slide"):m=qi("div",e.params.slideClass),m.setAttribute("data-swiper-slide-index",g),v.renderSlide||(m.innerHTML=p),v.cache&&(e.virtual.cache[g]=m),m}function u(p,g){const{slidesPerView:v,slidesPerGroup:m,centeredSlides:b,loop:_,initialSlide:y}=e.params;if(g&&!_&&y>0)return;const{addSlidesBefore:M,addSlidesAfter:x}=e.params.virtual,{from:S,to:A,slides:E,slidesGrid:w,offset:C}=e.virtual;e.params.cssMode||e.updateActiveIndex();const P=e.activeIndex||0;let T;e.rtlTranslate?T="right":T=e.isHorizontal()?"left":"top";let R,F;b?(R=Math.floor(v/2)+m+x,F=Math.floor(v/2)+m+M):(R=v+(m-1)+x,F=(_?v:m)+M);let z=P-F,D=P+R;_||(z=Math.max(z,0),D=Math.min(D,E.length-1));let O=(e.slidesGrid[z]||0)-(e.slidesGrid[0]||0);_&&P>=F?(z-=F,b||(O+=e.slidesGrid[0])):_&&P<F&&(z=-F,b&&(O+=e.slidesGrid[0])),Object.assign(e.virtual,{from:z,to:D,offset:O,slidesGrid:e.slidesGrid,slidesBefore:F,slidesAfter:R});function j(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s("virtualUpdate")}if(S===z&&A===D&&!p){e.slidesGrid!==w&&O!==C&&e.slides.forEach(H=>{H.style[T]=`${O-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),s("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:O,from:z,to:D,slides:function(){const Y=[];for(let J=z;J<=D;J+=1)Y.push(E[J]);return Y}()}),e.params.virtual.renderExternalUpdate?j():s("virtualUpdate");return}const k=[],I=[],U=H=>{let Y=H;return H<0?Y=E.length+H:Y>=E.length&&(Y=Y-E.length),Y};if(p)e.slides.filter(H=>H.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(H=>{H.remove()});else for(let H=S;H<=A;H+=1)if(H<z||H>D){const Y=U(H);e.slides.filter(J=>J.matches(`.${e.params.slideClass}[data-swiper-slide-index="${Y}"], swiper-slide[data-swiper-slide-index="${Y}"]`)).forEach(J=>{J.remove()})}const B=_?-E.length:0,V=_?E.length*2:E.length;for(let H=B;H<V;H+=1)if(H>=z&&H<=D){const Y=U(H);typeof A>"u"||p?I.push(Y):(H>A&&I.push(Y),H<S&&k.push(Y))}if(I.forEach(H=>{e.slidesEl.append(l(E[H],H))}),_)for(let H=k.length-1;H>=0;H-=1){const Y=k[H];e.slidesEl.prepend(l(E[Y],Y))}else k.sort((H,Y)=>Y-H),k.forEach(H=>{e.slidesEl.prepend(l(E[H],H))});mi(e.slidesEl,".swiper-slide, swiper-slide").forEach(H=>{H.style[T]=`${O-Math.abs(e.cssOverflowAdjustment())}px`}),j()}function c(p){if(typeof p=="object"&&"length"in p)for(let g=0;g<p.length;g+=1)p[g]&&e.virtual.slides.push(p[g]);else e.virtual.slides.push(p);u(!0)}function d(p){const g=e.activeIndex;let v=g+1,m=1;if(Array.isArray(p)){for(let b=0;b<p.length;b+=1)p[b]&&e.virtual.slides.unshift(p[b]);v=g+p.length,m=p.length}else e.virtual.slides.unshift(p);if(e.params.virtual.cache){const b=e.virtual.cache,_={};Object.keys(b).forEach(y=>{const M=b[y],x=M.getAttribute("data-swiper-slide-index");x&&M.setAttribute("data-swiper-slide-index",parseInt(x,10)+m),_[parseInt(y,10)+m]=M}),e.virtual.cache=_}u(!0),e.slideTo(v,0)}function h(p){if(typeof p>"u"||p===null)return;let g=e.activeIndex;if(Array.isArray(p))for(let v=p.length-1;v>=0;v-=1)e.params.virtual.cache&&(delete e.virtual.cache[p[v]],Object.keys(e.virtual.cache).forEach(m=>{m>p&&(e.virtual.cache[m-1]=e.virtual.cache[m],e.virtual.cache[m-1].setAttribute("data-swiper-slide-index",m-1),delete e.virtual.cache[m])})),e.virtual.slides.splice(p[v],1),p[v]<g&&(g-=1),g=Math.max(g,0);else e.params.virtual.cache&&(delete e.virtual.cache[p],Object.keys(e.virtual.cache).forEach(v=>{v>p&&(e.virtual.cache[v-1]=e.virtual.cache[v],e.virtual.cache[v-1].setAttribute("data-swiper-slide-index",v-1),delete e.virtual.cache[v])})),e.virtual.slides.splice(p,1),p<g&&(g-=1),g=Math.max(g,0);u(!0),e.slideTo(g,0)}function f(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),u(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let p;if(typeof e.passedParams.virtual.slides>"u"){const g=[...e.slidesEl.children].filter(v=>v.matches(`.${e.params.slideClass}, swiper-slide`));g&&g.length&&(e.virtual.slides=[...g],p=!0,g.forEach((v,m)=>{v.setAttribute("data-swiper-slide-index",m),e.virtual.cache[m]=v,v.remove()}))}p||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,u(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{u()},100)):u())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&_o(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:c,prependSlide:d,removeSlide:h,removeAllSlides:f,update:u})}function aT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=gi(),a=Gt();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function o(c){if(!e.enabled)return;const{rtlTranslate:d}=e;let h=c;h.originalEvent&&(h=h.originalEvent);const f=h.keyCode||h.charCode,p=e.params.keyboard.pageUpDown,g=p&&f===33,v=p&&f===34,m=f===37,b=f===39,_=f===38,y=f===40;if(!e.allowSlideNext&&(e.isHorizontal()&&b||e.isVertical()&&y||v)||!e.allowSlidePrev&&(e.isHorizontal()&&m||e.isVertical()&&_||g))return!1;if(!(h.shiftKey||h.altKey||h.ctrlKey||h.metaKey)&&!(r.activeElement&&r.activeElement.nodeName&&(r.activeElement.nodeName.toLowerCase()==="input"||r.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(g||v||m||b||_||y)){let M=!1;if(br(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&br(e.el,`.${e.params.slideActiveClass}`).length===0)return;const x=e.el,S=x.clientWidth,A=x.clientHeight,E=a.innerWidth,w=a.innerHeight,C=Hc(x);d&&(C.left-=x.scrollLeft);const P=[[C.left,C.top],[C.left+S,C.top],[C.left,C.top+A],[C.left+S,C.top+A]];for(let T=0;T<P.length;T+=1){const R=P[T];if(R[0]>=0&&R[0]<=E&&R[1]>=0&&R[1]<=w){if(R[0]===0&&R[1]===0)continue;M=!0}}if(!M)return}e.isHorizontal()?((g||v||m||b)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),((v||b)&&!d||(g||m)&&d)&&e.slideNext(),((g||m)&&!d||(v||b)&&d)&&e.slidePrev()):((g||v||_||y)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),(v||y)&&e.slideNext(),(g||_)&&e.slidePrev()),s("keyPress",f)}}function l(){e.keyboard.enabled||(r.addEventListener("keydown",o),e.keyboard.enabled=!0)}function u(){e.keyboard.enabled&&(r.removeEventListener("keydown",o),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&l()}),n("destroy",()=>{e.keyboard.enabled&&u()}),Object.assign(e.keyboard,{enable:l,disable:u})}function oT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=Gt();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let a,o=an(),l;const u=[];function c(_){let S=0,A=0,E=0,w=0;return"detail"in _&&(A=_.detail),"wheelDelta"in _&&(A=-_.wheelDelta/120),"wheelDeltaY"in _&&(A=-_.wheelDeltaY/120),"wheelDeltaX"in _&&(S=-_.wheelDeltaX/120),"axis"in _&&_.axis===_.HORIZONTAL_AXIS&&(S=A,A=0),E=S*10,w=A*10,"deltaY"in _&&(w=_.deltaY),"deltaX"in _&&(E=_.deltaX),_.shiftKey&&!E&&(E=w,w=0),(E||w)&&_.deltaMode&&(_.deltaMode===1?(E*=40,w*=40):(E*=800,w*=800)),E&&!S&&(S=E<1?-1:1),w&&!A&&(A=w<1?-1:1),{spinX:S,spinY:A,pixelX:E,pixelY:w}}function d(){e.enabled&&(e.mouseEntered=!0)}function h(){e.enabled&&(e.mouseEntered=!1)}function f(_){return e.params.mousewheel.thresholdDelta&&_.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&an()-o<e.params.mousewheel.thresholdTime?!1:_.delta>=6&&an()-o<60?!0:(_.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),s("scroll",_.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),s("scroll",_.raw)),o=new r.Date().getTime(),!1)}function p(_){const y=e.params.mousewheel;if(_.direction<0){if(e.isEnd&&!e.params.loop&&y.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&y.releaseOnEdges)return!0;return!1}function g(_){let y=_,M=!0;if(!e.enabled||_.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const x=e.params.mousewheel;e.params.cssMode&&y.preventDefault();let S=e.el;e.params.mousewheel.eventsTarget!=="container"&&(S=document.querySelector(e.params.mousewheel.eventsTarget));const A=S&&S.contains(y.target);if(!e.mouseEntered&&!A&&!x.releaseOnEdges)return!0;y.originalEvent&&(y=y.originalEvent);let E=0;const w=e.rtlTranslate?-1:1,C=c(y);if(x.forceToAxis)if(e.isHorizontal())if(Math.abs(C.pixelX)>Math.abs(C.pixelY))E=-C.pixelX*w;else return!0;else if(Math.abs(C.pixelY)>Math.abs(C.pixelX))E=-C.pixelY;else return!0;else E=Math.abs(C.pixelX)>Math.abs(C.pixelY)?-C.pixelX*w:-C.pixelY;if(E===0)return!0;x.invert&&(E=-E);let P=e.getTranslate()+E*x.sensitivity;if(P>=e.minTranslate()&&(P=e.minTranslate()),P<=e.maxTranslate()&&(P=e.maxTranslate()),M=e.params.loop?!0:!(P===e.minTranslate()||P===e.maxTranslate()),M&&e.params.nested&&y.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const T={time:an(),delta:Math.abs(E),direction:Math.sign(E),raw:_};u.length>=2&&u.shift();const R=u.length?u[u.length-1]:void 0;if(u.push(T),R?(T.direction!==R.direction||T.delta>R.delta||T.time>R.time+150)&&f(T):f(T),p(T))return!0}else{const T={time:an(),delta:Math.abs(E),direction:Math.sign(E)},R=l&&T.time<l.time+500&&T.delta<=l.delta&&T.direction===l.direction;if(!R){l=void 0;let F=e.getTranslate()+E*x.sensitivity;const z=e.isBeginning,D=e.isEnd;if(F>=e.minTranslate()&&(F=e.minTranslate()),F<=e.maxTranslate()&&(F=e.maxTranslate()),e.setTransition(0),e.setTranslate(F),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!z&&e.isBeginning||!D&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:T.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(a),a=void 0,u.length>=15&&u.shift();const O=u.length?u[u.length-1]:void 0,j=u[0];if(u.push(T),O&&(T.delta>O.delta||T.direction!==O.direction))u.splice(0);else if(u.length>=15&&T.time-j.time<500&&j.delta-T.delta>=1&&T.delta<=6){const k=E>0?.8:.2;l=T,u.splice(0),a=Er(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,k)},0)}a||(a=Er(()=>{if(e.destroyed||!e.params)return;const k=.5;l=T,u.splice(0),e.slideToClosest(e.params.speed,!0,void 0,k)},500))}if(R||s("scroll",y),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),x.releaseOnEdges&&(F===e.minTranslate()||F===e.maxTranslate()))return!0}}return y.preventDefault?y.preventDefault():y.returnValue=!1,!1}function v(_){let y=e.el;e.params.mousewheel.eventsTarget!=="container"&&(y=document.querySelector(e.params.mousewheel.eventsTarget)),y[_]("mouseenter",d),y[_]("mouseleave",h),y[_]("wheel",g)}function m(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",g),!0):e.mousewheel.enabled?!1:(v("addEventListener"),e.mousewheel.enabled=!0,!0)}function b(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,g),!0):e.mousewheel.enabled?(v("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&b(),e.params.mousewheel.enabled&&m()}),n("destroy",()=>{e.params.cssMode&&m(),e.mousewheel.enabled&&b()}),Object.assign(e.mousewheel,{enable:m,disable:b})}function Gf(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let r=mi(i.el,`.${n[s]}`)[0];r||(r=qi("div",n[s]),r.className=n[s],i.el.append(r)),t[s]=r,e[s]=r}}),t}function lT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(p){let g;return p&&typeof p=="string"&&e.isElement&&(g=e.el.querySelector(p)||e.hostEl.querySelector(p),g)?g:(p&&(typeof p=="string"&&(g=[...document.querySelectorAll(p)]),e.params.uniqueNavElements&&typeof p=="string"&&g&&g.length>1&&e.el.querySelectorAll(p).length===1?g=e.el.querySelector(p):g&&g.length===1&&(g=g[0])),p&&!g?p:g)}function a(p,g){const v=e.params.navigation;p=ht(p),p.forEach(m=>{m&&(m.classList[g?"add":"remove"](...v.disabledClass.split(" ")),m.tagName==="BUTTON"&&(m.disabled=g),e.params.watchOverflow&&e.enabled&&m.classList[e.isLocked?"add":"remove"](v.lockClass))})}function o(){const{nextEl:p,prevEl:g}=e.navigation;if(e.params.loop){a(g,!1),a(p,!1);return}a(g,e.isBeginning&&!e.params.rewind),a(p,e.isEnd&&!e.params.rewind)}function l(p){p.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function u(p){p.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function c(){const p=e.params.navigation;if(e.params.navigation=Gf(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;let g=r(p.nextEl),v=r(p.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:v}),g=ht(g),v=ht(v);const m=(b,_)=>{b&&b.addEventListener("click",_==="next"?u:l),!e.enabled&&b&&b.classList.add(...p.lockClass.split(" "))};g.forEach(b=>m(b,"next")),v.forEach(b=>m(b,"prev"))}function d(){let{nextEl:p,prevEl:g}=e.navigation;p=ht(p),g=ht(g);const v=(m,b)=>{m.removeEventListener("click",b==="next"?u:l),m.classList.remove(...e.params.navigation.disabledClass.split(" "))};p.forEach(m=>v(m,"next")),g.forEach(m=>v(m,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?f():(c(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{d()}),n("enable disable",()=>{let{nextEl:p,prevEl:g}=e.navigation;if(p=ht(p),g=ht(g),e.enabled){o();return}[...p,...g].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),n("click",(p,g)=>{let{nextEl:v,prevEl:m}=e.navigation;v=ht(v),m=ht(m);const b=g.target;let _=m.includes(b)||v.includes(b);if(e.isElement&&!_){const y=g.path||g.composedPath&&g.composedPath();y&&(_=y.find(M=>v.includes(M)||m.includes(M)))}if(e.params.navigation.hideOnClick&&!_){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===b||e.pagination.el.contains(b)))return;let y;v.length?y=v[0].classList.contains(e.params.navigation.hiddenClass):m.length&&(y=m[0].classList.contains(e.params.navigation.hiddenClass)),s(y===!0?"navigationShow":"navigationHide"),[...v,...m].filter(M=>!!M).forEach(M=>M.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),c(),o()},f=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:h,disable:f,update:o,init:c,destroy:d})}function rs(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function cT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:b=>b,formatFractionTotal:b=>b,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function u(b,_){const{bulletActiveClass:y}=e.params.pagination;b&&(b=b[`${_==="prev"?"previous":"next"}ElementSibling`],b&&(b.classList.add(`${y}-${_}`),b=b[`${_==="prev"?"previous":"next"}ElementSibling`],b&&b.classList.add(`${y}-${_}-${_}`)))}function c(b,_,y){if(b=b%y,_=_%y,_===b+1)return"next";if(_===b-1)return"previous"}function d(b){const _=b.target.closest(rs(e.params.pagination.bulletClass));if(!_)return;b.preventDefault();const y=Bo(_)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===y)return;const M=c(e.realIndex,y,e.slides.length);M==="next"?e.slideNext():M==="previous"?e.slidePrev():e.slideToLoop(y)}else e.slideTo(y)}function h(){const b=e.rtl,_=e.params.pagination;if(l())return;let y=e.pagination.el;y=ht(y);let M,x;const S=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,A=e.params.loop?Math.ceil(S/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(x=e.previousRealIndex||0,M=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(M=e.snapIndex,x=e.previousSnapIndex):(x=e.previousIndex||0,M=e.activeIndex||0),_.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const E=e.pagination.bullets;let w,C,P;if(_.dynamicBullets&&(a=ph(E[0],e.isHorizontal()?"width":"height"),y.forEach(T=>{T.style[e.isHorizontal()?"width":"height"]=`${a*(_.dynamicMainBullets+4)}px`}),_.dynamicMainBullets>1&&x!==void 0&&(o+=M-(x||0),o>_.dynamicMainBullets-1?o=_.dynamicMainBullets-1:o<0&&(o=0)),w=Math.max(M-o,0),C=w+(Math.min(E.length,_.dynamicMainBullets)-1),P=(C+w)/2),E.forEach(T=>{const R=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(F=>`${_.bulletActiveClass}${F}`)].map(F=>typeof F=="string"&&F.includes(" ")?F.split(" "):F).flat();T.classList.remove(...R)}),y.length>1)E.forEach(T=>{const R=Bo(T);R===M?T.classList.add(..._.bulletActiveClass.split(" ")):e.isElement&&T.setAttribute("part","bullet"),_.dynamicBullets&&(R>=w&&R<=C&&T.classList.add(...`${_.bulletActiveClass}-main`.split(" ")),R===w&&u(T,"prev"),R===C&&u(T,"next"))});else{const T=E[M];if(T&&T.classList.add(..._.bulletActiveClass.split(" ")),e.isElement&&E.forEach((R,F)=>{R.setAttribute("part",F===M?"bullet-active":"bullet")}),_.dynamicBullets){const R=E[w],F=E[C];for(let z=w;z<=C;z+=1)E[z]&&E[z].classList.add(...`${_.bulletActiveClass}-main`.split(" "));u(R,"prev"),u(F,"next")}}if(_.dynamicBullets){const T=Math.min(E.length,_.dynamicMainBullets+4),R=(a*T-a)/2-P*a,F=b?"right":"left";E.forEach(z=>{z.style[e.isHorizontal()?F:"top"]=`${R}px`})}}y.forEach((E,w)=>{if(_.type==="fraction"&&(E.querySelectorAll(rs(_.currentClass)).forEach(C=>{C.textContent=_.formatFractionCurrent(M+1)}),E.querySelectorAll(rs(_.totalClass)).forEach(C=>{C.textContent=_.formatFractionTotal(A)})),_.type==="progressbar"){let C;_.progressbarOpposite?C=e.isHorizontal()?"vertical":"horizontal":C=e.isHorizontal()?"horizontal":"vertical";const P=(M+1)/A;let T=1,R=1;C==="horizontal"?T=P:R=P,E.querySelectorAll(rs(_.progressbarFillClass)).forEach(F=>{F.style.transform=`translate3d(0,0,0) scaleX(${T}) scaleY(${R})`,F.style.transitionDuration=`${e.params.speed}ms`})}_.type==="custom"&&_.renderCustom?(E.innerHTML=_.renderCustom(e,M+1,A),w===0&&s("paginationRender",E)):(w===0&&s("paginationRender",E),s("paginationUpdate",E)),e.params.watchOverflow&&e.enabled&&E.classList[e.isLocked?"add":"remove"](_.lockClass)})}function f(){const b=e.params.pagination;if(l())return;const _=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let y=e.pagination.el;y=ht(y);let M="";if(b.type==="bullets"){let x=e.params.loop?Math.ceil(_/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&x>_&&(x=_);for(let S=0;S<x;S+=1)b.renderBullet?M+=b.renderBullet.call(e,S,b.bulletClass):M+=`<${b.bulletElement} ${e.isElement?'part="bullet"':""} class="${b.bulletClass}"></${b.bulletElement}>`}b.type==="fraction"&&(b.renderFraction?M=b.renderFraction.call(e,b.currentClass,b.totalClass):M=`<span class="${b.currentClass}"></span> / <span class="${b.totalClass}"></span>`),b.type==="progressbar"&&(b.renderProgressbar?M=b.renderProgressbar.call(e,b.progressbarFillClass):M=`<span class="${b.progressbarFillClass}"></span>`),e.pagination.bullets=[],y.forEach(x=>{b.type!=="custom"&&(x.innerHTML=M||""),b.type==="bullets"&&e.pagination.bullets.push(...x.querySelectorAll(rs(b.bulletClass)))}),b.type!=="custom"&&s("paginationRender",y[0])}function p(){e.params.pagination=Gf(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const b=e.params.pagination;if(!b.el)return;let _;typeof b.el=="string"&&e.isElement&&(_=e.el.querySelector(b.el)),!_&&typeof b.el=="string"&&(_=[...document.querySelectorAll(b.el)]),_||(_=b.el),!(!_||_.length===0)&&(e.params.uniqueNavElements&&typeof b.el=="string"&&Array.isArray(_)&&_.length>1&&(_=[...e.el.querySelectorAll(b.el)],_.length>1&&(_=_.filter(y=>br(y,".swiper")[0]===e.el)[0])),Array.isArray(_)&&_.length===1&&(_=_[0]),Object.assign(e.pagination,{el:_}),_=ht(_),_.forEach(y=>{b.type==="bullets"&&b.clickable&&y.classList.add(...(b.clickableClass||"").split(" ")),y.classList.add(b.modifierClass+b.type),y.classList.add(e.isHorizontal()?b.horizontalClass:b.verticalClass),b.type==="bullets"&&b.dynamicBullets&&(y.classList.add(`${b.modifierClass}${b.type}-dynamic`),o=0,b.dynamicMainBullets<1&&(b.dynamicMainBullets=1)),b.type==="progressbar"&&b.progressbarOpposite&&y.classList.add(b.progressbarOppositeClass),b.clickable&&y.addEventListener("click",d),e.enabled||y.classList.add(b.lockClass)}))}function g(){const b=e.params.pagination;if(l())return;let _=e.pagination.el;_&&(_=ht(_),_.forEach(y=>{y.classList.remove(b.hiddenClass),y.classList.remove(b.modifierClass+b.type),y.classList.remove(e.isHorizontal()?b.horizontalClass:b.verticalClass),b.clickable&&(y.classList.remove(...(b.clickableClass||"").split(" ")),y.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(y=>y.classList.remove(...b.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const b=e.params.pagination;let{el:_}=e.pagination;_=ht(_),_.forEach(y=>{y.classList.remove(b.horizontalClass,b.verticalClass),y.classList.add(e.isHorizontal()?b.horizontalClass:b.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?m():(p(),f(),h())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),n("snapIndexChange",()=>{h()}),n("snapGridLengthChange",()=>{f(),h()}),n("destroy",()=>{g()}),n("enable disable",()=>{let{el:b}=e.pagination;b&&(b=ht(b),b.forEach(_=>_.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{h()}),n("click",(b,_)=>{const y=_.target,M=ht(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&M&&M.length>0&&!y.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&y===e.navigation.nextEl||e.navigation.prevEl&&y===e.navigation.prevEl))return;const x=M[0].classList.contains(e.params.pagination.hiddenClass);s(x===!0?"paginationShow":"paginationHide"),M.forEach(S=>S.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:b}=e.pagination;b&&(b=ht(b),b.forEach(_=>_.classList.remove(e.params.pagination.paginationDisabledClass))),p(),f(),h()},m=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:b}=e.pagination;b&&(b=ht(b),b.forEach(_=>_.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:v,disable:m,render:f,update:h,init:p,destroy:g})}function uT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=gi();let a=!1,o=null,l=null,u,c,d,h;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function f(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:P,rtlTranslate:T}=e,{dragEl:R,el:F}=P,z=e.params.scrollbar,D=e.params.loop?e.progressLoop:e.progress;let O=c,j=(d-c)*D;T?(j=-j,j>0?(O=c-j,j=0):-j+c>d&&(O=d+j)):j<0?(O=c+j,j=0):j+c>d&&(O=d-j),e.isHorizontal()?(R.style.transform=`translate3d(${j}px, 0, 0)`,R.style.width=`${O}px`):(R.style.transform=`translate3d(0px, ${j}px, 0)`,R.style.height=`${O}px`),z.hide&&(clearTimeout(o),F.style.opacity=1,o=setTimeout(()=>{F.style.opacity=0,F.style.transitionDuration="400ms"},1e3))}function p(P){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${P}ms`)}function g(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:P}=e,{dragEl:T,el:R}=P;T.style.width="",T.style.height="",d=e.isHorizontal()?R.offsetWidth:R.offsetHeight,h=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?c=d*h:c=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?T.style.width=`${c}px`:T.style.height=`${c}px`,h>=1?R.style.display="none":R.style.display="",e.params.scrollbar.hide&&(R.style.opacity=0),e.params.watchOverflow&&e.enabled&&P.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function v(P){return e.isHorizontal()?P.clientX:P.clientY}function m(P){const{scrollbar:T,rtlTranslate:R}=e,{el:F}=T;let z;z=(v(P)-Hc(F)[e.isHorizontal()?"left":"top"]-(u!==null?u:c/2))/(d-c),z=Math.max(Math.min(z,1),0),R&&(z=1-z);const D=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*z;e.updateProgress(D),e.setTranslate(D),e.updateActiveIndex(),e.updateSlidesClasses()}function b(P){const T=e.params.scrollbar,{scrollbar:R,wrapperEl:F}=e,{el:z,dragEl:D}=R;a=!0,u=P.target===D?v(P)-P.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,P.preventDefault(),P.stopPropagation(),F.style.transitionDuration="100ms",D.style.transitionDuration="100ms",m(P),clearTimeout(l),z.style.transitionDuration="0ms",T.hide&&(z.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",P)}function _(P){const{scrollbar:T,wrapperEl:R}=e,{el:F,dragEl:z}=T;a&&(P.preventDefault&&P.cancelable?P.preventDefault():P.returnValue=!1,m(P),R.style.transitionDuration="0ms",F.style.transitionDuration="0ms",z.style.transitionDuration="0ms",s("scrollbarDragMove",P))}function y(P){const T=e.params.scrollbar,{scrollbar:R,wrapperEl:F}=e,{el:z}=R;a&&(a=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",F.style.transitionDuration=""),T.hide&&(clearTimeout(l),l=Er(()=>{z.style.opacity=0,z.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",P),T.snapOnRelease&&e.slideToClosest())}function M(P){const{scrollbar:T,params:R}=e,F=T.el;if(!F)return;const z=F,D=R.passiveListeners?{passive:!1,capture:!1}:!1,O=R.passiveListeners?{passive:!0,capture:!1}:!1;if(!z)return;const j=P==="on"?"addEventListener":"removeEventListener";z[j]("pointerdown",b,D),r[j]("pointermove",_,D),r[j]("pointerup",y,O)}function x(){!e.params.scrollbar.el||!e.scrollbar.el||M("on")}function S(){!e.params.scrollbar.el||!e.scrollbar.el||M("off")}function A(){const{scrollbar:P,el:T}=e;e.params.scrollbar=Gf(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const R=e.params.scrollbar;if(!R.el)return;let F;if(typeof R.el=="string"&&e.isElement&&(F=e.el.querySelector(R.el)),!F&&typeof R.el=="string"){if(F=r.querySelectorAll(R.el),!F.length)return}else F||(F=R.el);e.params.uniqueNavElements&&typeof R.el=="string"&&F.length>1&&T.querySelectorAll(R.el).length===1&&(F=T.querySelector(R.el)),F.length>0&&(F=F[0]),F.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass);let z;F&&(z=F.querySelector(rs(e.params.scrollbar.dragClass)),z||(z=qi("div",e.params.scrollbar.dragClass),F.append(z))),Object.assign(P,{el:F,dragEl:z}),R.draggable&&x(),F&&F.classList[e.enabled?"remove":"add"](...Ms(e.params.scrollbar.lockClass))}function E(){const P=e.params.scrollbar,T=e.scrollbar.el;T&&T.classList.remove(...Ms(e.isHorizontal()?P.horizontalClass:P.verticalClass)),S()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const P=e.params.scrollbar;let{el:T}=e.scrollbar;T=ht(T),T.forEach(R=>{R.classList.remove(P.horizontalClass,P.verticalClass),R.classList.add(e.isHorizontal()?P.horizontalClass:P.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?C():(A(),g(),f())}),n("update resize observerUpdate lock unlock changeDirection",()=>{g()}),n("setTranslate",()=>{f()}),n("setTransition",(P,T)=>{p(T)}),n("enable disable",()=>{const{el:P}=e.scrollbar;P&&P.classList[e.enabled?"remove":"add"](...Ms(e.params.scrollbar.lockClass))}),n("destroy",()=>{E()});const w=()=>{e.el.classList.remove(...Ms(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...Ms(e.params.scrollbar.scrollbarDisabledClass)),A(),g(),f()},C=()=>{e.el.classList.add(...Ms(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...Ms(e.params.scrollbar.scrollbarDisabledClass)),E()};Object.assign(e.scrollbar,{enable:w,disable:C,updateSize:g,setTranslate:f,init:A,destroy:E})}function dT(i){let{swiper:e,extendParams:t,on:n}=i;t({parallax:{enabled:!1}});const s="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",r=(l,u)=>{const{rtl:c}=e,d=c?-1:1,h=l.getAttribute("data-swiper-parallax")||"0";let f=l.getAttribute("data-swiper-parallax-x"),p=l.getAttribute("data-swiper-parallax-y");const g=l.getAttribute("data-swiper-parallax-scale"),v=l.getAttribute("data-swiper-parallax-opacity"),m=l.getAttribute("data-swiper-parallax-rotate");if(f||p?(f=f||"0",p=p||"0"):e.isHorizontal()?(f=h,p="0"):(p=h,f="0"),f.indexOf("%")>=0?f=`${parseInt(f,10)*u*d}%`:f=`${f*u*d}px`,p.indexOf("%")>=0?p=`${parseInt(p,10)*u}%`:p=`${p*u}px`,typeof v<"u"&&v!==null){const _=v-(v-1)*(1-Math.abs(u));l.style.opacity=_}let b=`translate3d(${f}, ${p}, 0px)`;if(typeof g<"u"&&g!==null){const _=g-(g-1)*(1-Math.abs(u));b+=` scale(${_})`}if(m&&typeof m<"u"&&m!==null){const _=m*u*-1;b+=` rotate(${_}deg)`}l.style.transform=b},a=()=>{const{el:l,slides:u,progress:c,snapGrid:d,isElement:h}=e,f=mi(l,s);e.isElement&&f.push(...mi(e.hostEl,s)),f.forEach(p=>{r(p,c)}),u.forEach((p,g)=>{let v=p.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(v+=Math.ceil(g/2)-c*(d.length-1)),v=Math.min(Math.max(v,-1),1),p.querySelectorAll(`${s}, [data-swiper-parallax-rotate]`).forEach(m=>{r(m,v)})})},o=function(l){l===void 0&&(l=e.params.speed);const{el:u,hostEl:c}=e,d=[...u.querySelectorAll(s)];e.isElement&&d.push(...c.querySelectorAll(s)),d.forEach(h=>{let f=parseInt(h.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(f=0),h.style.transitionDuration=`${f}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&a()}),n("setTranslate",()=>{e.params.parallax.enabled&&a()}),n("setTransition",(l,u)=>{e.params.parallax.enabled&&o(u)})}function hT(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=Gt();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let a=1,o=!1,l,u;const c=[],d={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let p=1;Object.defineProperty(e.zoom,"scale",{get(){return p},set(I){if(p!==I){const U=d.imageEl,B=d.slideEl;s("zoomChange",I,U,B)}p=I}});function g(){if(c.length<2)return 1;const I=c[0].pageX,U=c[0].pageY,B=c[1].pageX,V=c[1].pageY;return Math.sqrt((B-I)**2+(V-U)**2)}function v(){const I=e.params.zoom,U=d.imageWrapEl.getAttribute("data-swiper-zoom")||I.maxRatio;if(I.limitToOriginalSize&&d.imageEl&&d.imageEl.naturalWidth){const B=d.imageEl.naturalWidth/d.imageEl.offsetWidth;return Math.min(B,U)}return U}function m(){if(c.length<2)return{x:null,y:null};const I=d.imageEl.getBoundingClientRect();return[(c[0].pageX+(c[1].pageX-c[0].pageX)/2-I.x-r.scrollX)/a,(c[0].pageY+(c[1].pageY-c[0].pageY)/2-I.y-r.scrollY)/a]}function b(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function _(I){const U=b();return!!(I.target.matches(U)||e.slides.filter(B=>B.contains(I.target)).length>0)}function y(I){const U=`.${e.params.zoom.containerClass}`;return!!(I.target.matches(U)||[...e.hostEl.querySelectorAll(U)].filter(B=>B.contains(I.target)).length>0)}function M(I){if(I.pointerType==="mouse"&&c.splice(0,c.length),!_(I))return;const U=e.params.zoom;if(l=!1,u=!1,c.push(I),!(c.length<2)){if(l=!0,d.scaleStart=g(),!d.slideEl){d.slideEl=I.target.closest(`.${e.params.slideClass}, swiper-slide`),d.slideEl||(d.slideEl=e.slides[e.activeIndex]);let B=d.slideEl.querySelector(`.${U.containerClass}`);if(B&&(B=B.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=B,B?d.imageWrapEl=br(d.imageEl,`.${U.containerClass}`)[0]:d.imageWrapEl=void 0,!d.imageWrapEl){d.imageEl=void 0;return}d.maxRatio=v()}if(d.imageEl){const[B,V]=m();d.originX=B,d.originY=V,d.imageEl.style.transitionDuration="0ms"}o=!0}}function x(I){if(!_(I))return;const U=e.params.zoom,B=e.zoom,V=c.findIndex(H=>H.pointerId===I.pointerId);V>=0&&(c[V]=I),!(c.length<2)&&(u=!0,d.scaleMove=g(),d.imageEl&&(B.scale=d.scaleMove/d.scaleStart*a,B.scale>d.maxRatio&&(B.scale=d.maxRatio-1+(B.scale-d.maxRatio+1)**.5),B.scale<U.minRatio&&(B.scale=U.minRatio+1-(U.minRatio-B.scale+1)**.5),d.imageEl.style.transform=`translate3d(0,0,0) scale(${B.scale})`))}function S(I){if(!_(I)||I.pointerType==="mouse"&&I.type==="pointerout")return;const U=e.params.zoom,B=e.zoom,V=c.findIndex(H=>H.pointerId===I.pointerId);V>=0&&c.splice(V,1),!(!l||!u)&&(l=!1,u=!1,d.imageEl&&(B.scale=Math.max(Math.min(B.scale,d.maxRatio),U.minRatio),d.imageEl.style.transitionDuration=`${e.params.speed}ms`,d.imageEl.style.transform=`translate3d(0,0,0) scale(${B.scale})`,a=B.scale,o=!1,B.scale>1&&d.slideEl?d.slideEl.classList.add(`${U.zoomedSlideClass}`):B.scale<=1&&d.slideEl&&d.slideEl.classList.remove(`${U.zoomedSlideClass}`),B.scale===1&&(d.originX=0,d.originY=0,d.slideEl=void 0)))}let A;function E(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function w(){clearTimeout(A),e.touchEventsData.preventTouchMoveFromPointerMove=!0,A=setTimeout(()=>{e.destroyed||E()})}function C(I){const U=e.device;if(!d.imageEl||h.isTouched)return;U.android&&I.cancelable&&I.preventDefault(),h.isTouched=!0;const B=c.length>0?c[0]:I;h.touchesStart.x=B.pageX,h.touchesStart.y=B.pageY}function P(I){if(!_(I)||!y(I))return;const U=e.zoom;if(!d.imageEl||!h.isTouched||!d.slideEl)return;h.isMoved||(h.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,h.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,h.startX=fh(d.imageWrapEl,"x")||0,h.startY=fh(d.imageWrapEl,"y")||0,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight,d.imageWrapEl.style.transitionDuration="0ms");const B=h.width*U.scale,V=h.height*U.scale;if(h.minX=Math.min(d.slideWidth/2-B/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-V/2,0),h.maxY=-h.minY,h.touchesCurrent.x=c.length>0?c[0].pageX:I.pageX,h.touchesCurrent.y=c.length>0?c[0].pageY:I.pageY,Math.max(Math.abs(h.touchesCurrent.x-h.touchesStart.x),Math.abs(h.touchesCurrent.y-h.touchesStart.y))>5&&(e.allowClick=!1),!h.isMoved&&!o){if(e.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x)){h.isTouched=!1,E();return}if(!e.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y)){h.isTouched=!1,E();return}}I.cancelable&&I.preventDefault(),I.stopPropagation(),w(),h.isMoved=!0;const Y=(U.scale-a)/(d.maxRatio-e.params.zoom.minRatio),{originX:J,originY:ee}=d;h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX+Y*(h.width-J*2),h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY+Y*(h.height-ee*2),h.currentX<h.minX&&(h.currentX=h.minX+1-(h.minX-h.currentX+1)**.8),h.currentX>h.maxX&&(h.currentX=h.maxX-1+(h.currentX-h.maxX+1)**.8),h.currentY<h.minY&&(h.currentY=h.minY+1-(h.minY-h.currentY+1)**.8),h.currentY>h.maxY&&(h.currentY=h.maxY-1+(h.currentY-h.maxY+1)**.8),f.prevPositionX||(f.prevPositionX=h.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=h.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(h.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(h.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(h.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(h.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=h.touchesCurrent.x,f.prevPositionY=h.touchesCurrent.y,f.prevTime=Date.now(),d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function T(){const I=e.zoom;if(!d.imageEl)return;if(!h.isTouched||!h.isMoved){h.isTouched=!1,h.isMoved=!1;return}h.isTouched=!1,h.isMoved=!1;let U=300,B=300;const V=f.x*U,H=h.currentX+V,Y=f.y*B,J=h.currentY+Y;f.x!==0&&(U=Math.abs((H-h.currentX)/f.x)),f.y!==0&&(B=Math.abs((J-h.currentY)/f.y));const ee=Math.max(U,B);h.currentX=H,h.currentY=J;const se=h.width*I.scale,ye=h.height*I.scale;h.minX=Math.min(d.slideWidth/2-se/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-ye/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),d.imageWrapEl.style.transitionDuration=`${ee}ms`,d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function R(){const I=e.zoom;d.slideEl&&e.activeIndex!==e.slides.indexOf(d.slideEl)&&(d.imageEl&&(d.imageEl.style.transform="translate3d(0,0,0) scale(1)"),d.imageWrapEl&&(d.imageWrapEl.style.transform="translate3d(0,0,0)"),d.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),I.scale=1,a=1,d.slideEl=void 0,d.imageEl=void 0,d.imageWrapEl=void 0,d.originX=0,d.originY=0)}function F(I){const U=e.zoom,B=e.params.zoom;if(!d.slideEl){I&&I.target&&(d.slideEl=I.target.closest(`.${e.params.slideClass}, swiper-slide`)),d.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=mi(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex]);let ae=d.slideEl.querySelector(`.${B.containerClass}`);ae&&(ae=ae.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=ae,ae?d.imageWrapEl=br(d.imageEl,`.${B.containerClass}`)[0]:d.imageWrapEl=void 0}if(!d.imageEl||!d.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),d.slideEl.classList.add(`${B.zoomedSlideClass}`);let V,H,Y,J,ee,se,ye,de,W,Te,he,Ae,Ee,Ne,Ie,Pe,K,N;typeof h.touchesStart.x>"u"&&I?(V=I.pageX,H=I.pageY):(V=h.touchesStart.x,H=h.touchesStart.y);const X=typeof I=="number"?I:null;a===1&&X&&(V=void 0,H=void 0,h.touchesStart.x=void 0,h.touchesStart.y=void 0);const ie=v();U.scale=X||ie,a=X||ie,I&&!(a===1&&X)?(K=d.slideEl.offsetWidth,N=d.slideEl.offsetHeight,Y=Hc(d.slideEl).left+r.scrollX,J=Hc(d.slideEl).top+r.scrollY,ee=Y+K/2-V,se=J+N/2-H,W=d.imageEl.offsetWidth||d.imageEl.clientWidth,Te=d.imageEl.offsetHeight||d.imageEl.clientHeight,he=W*U.scale,Ae=Te*U.scale,Ee=Math.min(K/2-he/2,0),Ne=Math.min(N/2-Ae/2,0),Ie=-Ee,Pe=-Ne,ye=ee*U.scale,de=se*U.scale,ye<Ee&&(ye=Ee),ye>Ie&&(ye=Ie),de<Ne&&(de=Ne),de>Pe&&(de=Pe)):(ye=0,de=0),X&&U.scale===1&&(d.originX=0,d.originY=0),d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform=`translate3d(${ye}px, ${de}px,0)`,d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform=`translate3d(0,0,0) scale(${U.scale})`}function z(){const I=e.zoom,U=e.params.zoom;if(!d.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=mi(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex];let B=d.slideEl.querySelector(`.${U.containerClass}`);B&&(B=B.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=B,B?d.imageWrapEl=br(d.imageEl,`.${U.containerClass}`)[0]:d.imageWrapEl=void 0}!d.imageEl||!d.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),I.scale=1,a=1,h.touchesStart.x=void 0,h.touchesStart.y=void 0,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform="translate3d(0,0,0)",d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform="translate3d(0,0,0) scale(1)",d.slideEl.classList.remove(`${U.zoomedSlideClass}`),d.slideEl=void 0,d.originX=0,d.originY=0)}function D(I){const U=e.zoom;U.scale&&U.scale!==1?z():F(I)}function O(){const I=e.params.passiveListeners?{passive:!0,capture:!1}:!1,U=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:I,activeListenerWithCapture:U}}function j(){const I=e.zoom;if(I.enabled)return;I.enabled=!0;const{passiveListener:U,activeListenerWithCapture:B}=O();e.wrapperEl.addEventListener("pointerdown",M,U),e.wrapperEl.addEventListener("pointermove",x,B),["pointerup","pointercancel","pointerout"].forEach(V=>{e.wrapperEl.addEventListener(V,S,U)}),e.wrapperEl.addEventListener("pointermove",P,B)}function k(){const I=e.zoom;if(!I.enabled)return;I.enabled=!1;const{passiveListener:U,activeListenerWithCapture:B}=O();e.wrapperEl.removeEventListener("pointerdown",M,U),e.wrapperEl.removeEventListener("pointermove",x,B),["pointerup","pointercancel","pointerout"].forEach(V=>{e.wrapperEl.removeEventListener(V,S,U)}),e.wrapperEl.removeEventListener("pointermove",P,B)}n("init",()=>{e.params.zoom.enabled&&j()}),n("destroy",()=>{k()}),n("touchStart",(I,U)=>{e.zoom.enabled&&C(U)}),n("touchEnd",(I,U)=>{e.zoom.enabled&&T()}),n("doubleTap",(I,U)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&D(U)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&R()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&R()}),Object.assign(e.zoom,{enable:j,disable:k,in:F,out:z,toggle:D})}function fT(i){let{swiper:e,extendParams:t,on:n}=i;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(u,c){const d=function(){let g,v,m;return(b,_)=>{for(v=-1,g=b.length;g-v>1;)m=g+v>>1,b[m]<=_?v=m:g=m;return g}}();this.x=u,this.y=c,this.lastIndex=u.length-1;let h,f;return this.interpolate=function(g){return g?(f=d(this.x,g),h=f-1,(g-this.x[h])*(this.y[f]-this.y[h])/(this.x[f]-this.x[h])+this.y[h]):0},this}function r(u){e.controller.spline=e.params.loop?new s(e.slidesGrid,u.slidesGrid):new s(e.snapGrid,u.snapGrid)}function a(u,c){const d=e.controller.control;let h,f;const p=e.constructor;function g(v){if(v.destroyed)return;const m=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(r(v),f=-e.controller.spline.interpolate(-m)),(!f||e.params.controller.by==="container")&&(h=(v.maxTranslate()-v.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(h)||!Number.isFinite(h))&&(h=1),f=(m-e.minTranslate())*h+v.minTranslate()),e.params.controller.inverse&&(f=v.maxTranslate()-f),v.updateProgress(f),v.setTranslate(f,e),v.updateActiveIndex(),v.updateSlidesClasses()}if(Array.isArray(d))for(let v=0;v<d.length;v+=1)d[v]!==c&&d[v]instanceof p&&g(d[v]);else d instanceof p&&c!==d&&g(d)}function o(u,c){const d=e.constructor,h=e.controller.control;let f;function p(g){g.destroyed||(g.setTransition(u,e),u!==0&&(g.transitionStart(),g.params.autoHeight&&Er(()=>{g.updateAutoHeight()}),So(g.wrapperEl,()=>{h&&g.transitionEnd()})))}if(Array.isArray(h))for(f=0;f<h.length;f+=1)h[f]!==c&&h[f]instanceof d&&p(h[f]);else h instanceof d&&c!==h&&p(h)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(c=>{if(e.controller.control||(e.controller.control=[]),c&&c.swiper)e.controller.control.push(c.swiper);else if(c){const d=`${e.params.eventsPrefix}init`,h=f=>{e.controller.control.push(f.detail[0]),e.update(),c.removeEventListener(d,h)};c.addEventListener(d,h)}});return}e.controller.control=e.params.controller.control}),n("update",()=>{l()}),n("resize",()=>{l()}),n("observerUpdate",()=>{l()}),n("setTranslate",(u,c,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(c,d)}),n("setTransition",(u,c,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(c,d)}),Object.assign(e.controller,{setTranslate:a,setTransition:o})}function pT(i){let{swiper:e,extendParams:t,on:n}=i;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let s=null,r,a,o=new Date().getTime();function l(D){const O=s;O.length!==0&&(O.innerHTML="",O.innerHTML=D)}function u(D){const O=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(D).replace(/x/g,O)}function c(D){D=ht(D),D.forEach(O=>{O.setAttribute("tabIndex","0")})}function d(D){D=ht(D),D.forEach(O=>{O.setAttribute("tabIndex","-1")})}function h(D,O){D=ht(D),D.forEach(j=>{j.setAttribute("role",O)})}function f(D,O){D=ht(D),D.forEach(j=>{j.setAttribute("aria-roledescription",O)})}function p(D,O){D=ht(D),D.forEach(j=>{j.setAttribute("aria-controls",O)})}function g(D,O){D=ht(D),D.forEach(j=>{j.setAttribute("aria-label",O)})}function v(D,O){D=ht(D),D.forEach(j=>{j.setAttribute("id",O)})}function m(D,O){D=ht(D),D.forEach(j=>{j.setAttribute("aria-live",O)})}function b(D){D=ht(D),D.forEach(O=>{O.setAttribute("aria-disabled",!0)})}function _(D){D=ht(D),D.forEach(O=>{O.setAttribute("aria-disabled",!1)})}function y(D){if(D.keyCode!==13&&D.keyCode!==32)return;const O=e.params.a11y,j=D.target;if(!(e.pagination&&e.pagination.el&&(j===e.pagination.el||e.pagination.el.contains(D.target))&&!D.target.matches(rs(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){const k=ht(e.navigation.prevEl);ht(e.navigation.nextEl).includes(j)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(O.lastSlideMessage):l(O.nextSlideMessage)),k.includes(j)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(O.firstSlideMessage):l(O.prevSlideMessage))}e.pagination&&j.matches(rs(e.params.pagination.bulletClass))&&j.click()}}function M(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:D,prevEl:O}=e.navigation;O&&(e.isBeginning?(b(O),d(O)):(_(O),c(O))),D&&(e.isEnd?(b(D),d(D)):(_(D),c(D)))}function x(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function S(){return x()&&e.params.pagination.clickable}function A(){const D=e.params.a11y;x()&&e.pagination.bullets.forEach(O=>{e.params.pagination.clickable&&(c(O),e.params.pagination.renderBullet||(h(O,"button"),g(O,D.paginationBulletMessage.replace(/\{\{index\}\}/,Bo(O)+1)))),O.matches(rs(e.params.pagination.bulletActiveClass))?O.setAttribute("aria-current","true"):O.removeAttribute("aria-current")})}const E=(D,O,j)=>{c(D),D.tagName!=="BUTTON"&&(h(D,"button"),D.addEventListener("keydown",y)),g(D,j),p(D,O)},w=D=>{a&&a!==D.target&&!a.contains(D.target)&&(r=!0),e.a11y.clicked=!0},C=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},P=D=>{o=new Date().getTime()},T=D=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-o<100)return;const O=D.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!O||!e.slides.includes(O))return;a=O;const j=e.slides.indexOf(O)===e.activeIndex,k=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(O);j||k||D.sourceCapabilities&&D.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{r||(e.params.loop?e.slideToLoop(parseInt(O.getAttribute("data-swiper-slide-index")),0):e.slideTo(e.slides.indexOf(O),0),r=!1)}))},R=()=>{const D=e.params.a11y;D.itemRoleDescriptionMessage&&f(e.slides,D.itemRoleDescriptionMessage),D.slideRole&&h(e.slides,D.slideRole);const O=e.slides.length;D.slideLabelMessage&&e.slides.forEach((j,k)=>{const I=e.params.loop?parseInt(j.getAttribute("data-swiper-slide-index"),10):k,U=D.slideLabelMessage.replace(/\{\{index\}\}/,I+1).replace(/\{\{slidesLength\}\}/,O);g(j,U)})},F=()=>{const D=e.params.a11y;e.el.append(s);const O=e.el;D.containerRoleDescriptionMessage&&f(O,D.containerRoleDescriptionMessage),D.containerMessage&&g(O,D.containerMessage),D.containerRole&&h(O,D.containerRole);const j=e.wrapperEl,k=D.id||j.getAttribute("id")||`swiper-wrapper-${u(16)}`,I=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";v(j,k),m(j,I),R();let{nextEl:U,prevEl:B}=e.navigation?e.navigation:{};U=ht(U),B=ht(B),U&&U.forEach(H=>E(H,k,D.nextSlideMessage)),B&&B.forEach(H=>E(H,k,D.prevSlideMessage)),S()&&ht(e.pagination.el).forEach(Y=>{Y.addEventListener("keydown",y)}),gi().addEventListener("visibilitychange",P),e.el.addEventListener("focus",T,!0),e.el.addEventListener("focus",T,!0),e.el.addEventListener("pointerdown",w,!0),e.el.addEventListener("pointerup",C,!0)};function z(){s&&s.remove();let{nextEl:D,prevEl:O}=e.navigation?e.navigation:{};D=ht(D),O=ht(O),D&&D.forEach(k=>k.removeEventListener("keydown",y)),O&&O.forEach(k=>k.removeEventListener("keydown",y)),S()&&ht(e.pagination.el).forEach(I=>{I.removeEventListener("keydown",y)}),gi().removeEventListener("visibilitychange",P),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",T,!0),e.el.removeEventListener("pointerdown",w,!0),e.el.removeEventListener("pointerup",C,!0))}n("beforeInit",()=>{s=qi("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&F()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&R()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&M()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&A()}),n("destroy",()=>{e.params.a11y.enabled&&z()})}function mT(i){let{swiper:e,extendParams:t,on:n}=i;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let s=!1,r={};const a=f=>f.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),o=f=>{const p=Gt();let g;f?g=new URL(f):g=p.location;const v=g.pathname.slice(1).split("/").filter(y=>y!==""),m=v.length,b=v[m-2],_=v[m-1];return{key:b,value:_}},l=(f,p)=>{const g=Gt();if(!s||!e.params.history.enabled)return;let v;e.params.url?v=new URL(e.params.url):v=g.location;const m=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${p}"]`):e.slides[p];let b=a(m.getAttribute("data-history"));if(e.params.history.root.length>0){let y=e.params.history.root;y[y.length-1]==="/"&&(y=y.slice(0,y.length-1)),b=`${y}/${f?`${f}/`:""}${b}`}else v.pathname.includes(f)||(b=`${f?`${f}/`:""}${b}`);e.params.history.keepQuery&&(b+=v.search);const _=g.history.state;_&&_.value===b||(e.params.history.replaceState?g.history.replaceState({value:b},null,b):g.history.pushState({value:b},null,b))},u=(f,p,g)=>{if(p)for(let v=0,m=e.slides.length;v<m;v+=1){const b=e.slides[v];if(a(b.getAttribute("data-history"))===p){const y=e.getSlideIndex(b);e.slideTo(y,f,g)}}else e.slideTo(0,f,g)},c=()=>{r=o(e.params.url),u(e.params.speed,r.value,!1)},d=()=>{const f=Gt();if(e.params.history){if(!f.history||!f.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(s=!0,r=o(e.params.url),!r.key&&!r.value){e.params.history.replaceState||f.addEventListener("popstate",c);return}u(0,r.value,e.params.runCallbacksOnInit),e.params.history.replaceState||f.addEventListener("popstate",c)}},h=()=>{const f=Gt();e.params.history.replaceState||f.removeEventListener("popstate",c)};n("init",()=>{e.params.history.enabled&&d()}),n("destroy",()=>{e.params.history.enabled&&h()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{s&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function gT(i){let{swiper:e,extendParams:t,emit:n,on:s}=i,r=!1;const a=gi(),o=Gt();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,f){if(e.virtual&&e.params.virtual.enabled){const p=e.slides.filter(v=>v.getAttribute("data-hash")===f)[0];return p?parseInt(p.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(mi(e.slidesEl,`.${e.params.slideClass}[data-hash="${f}"], swiper-slide[data-hash="${f}"]`)[0])}}});const l=()=>{n("hashChange");const h=a.location.hash.replace("#",""),f=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],p=f?f.getAttribute("data-hash"):"";if(h!==p){const g=e.params.hashNavigation.getSlideIndex(e,h);if(typeof g>"u"||Number.isNaN(g))return;e.slideTo(g)}},u=()=>{if(!r||!e.params.hashNavigation.enabled)return;const h=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],f=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${f}`||""),n("hashSet")):(a.location.hash=f||"",n("hashSet"))},c=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;const h=a.location.hash.replace("#","");if(h){const p=e.params.hashNavigation.getSlideIndex(e,h);e.slideTo(p||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&o.addEventListener("hashchange",l)},d=()=>{e.params.hashNavigation.watchState&&o.removeEventListener("hashchange",l)};s("init",()=>{e.params.hashNavigation.enabled&&c()}),s("destroy",()=>{e.params.hashNavigation.enabled&&d()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{r&&u()}),s("slideChange",()=>{r&&e.params.cssMode&&u()})}function vT(i){let{swiper:e,extendParams:t,on:n,emit:s,params:r}=i;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=r&&r.autoplay?r.autoplay.delay:3e3,u=r&&r.autoplay?r.autoplay.delay:3e3,c,d=new Date().getTime(),h,f,p,g,v,m,b;function _(O){!e||e.destroyed||!e.wrapperEl||O.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",_),!(b||O.detail&&O.detail.bySwiperTouchMove)&&w())}const y=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?h=!0:h&&(u=c,h=!1);const O=e.autoplay.paused?c:d+u-new Date().getTime();e.autoplay.timeLeft=O,s("autoplayTimeLeft",O,O/l),o=requestAnimationFrame(()=>{y()})},M=()=>{let O;return e.virtual&&e.params.virtual.enabled?O=e.slides.filter(k=>k.classList.contains("swiper-slide-active"))[0]:O=e.slides[e.activeIndex],O?parseInt(O.getAttribute("data-swiper-autoplay"),10):void 0},x=O=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),y();let j=typeof O>"u"?e.params.autoplay.delay:O;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const k=M();!Number.isNaN(k)&&k>0&&typeof O>"u"&&(j=k,l=k,u=k),c=j;const I=e.params.speed,U=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(I,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,I,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(I,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,I,!0,!0),s("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{x()})))};return j>0?(clearTimeout(a),a=setTimeout(()=>{U()},j)):requestAnimationFrame(()=>{U()}),j},S=()=>{d=new Date().getTime(),e.autoplay.running=!0,x(),s("autoplayStart")},A=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),s("autoplayStop")},E=(O,j)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),O||(m=!0);const k=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",_):w()};if(e.autoplay.paused=!0,j){v&&(c=e.params.autoplay.delay),v=!1,k();return}c=(c||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&c<0&&!e.params.loop)&&(c<0&&(c=0),k())},w=()=>{e.isEnd&&c<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),m?(m=!1,x(c)):x(),e.autoplay.paused=!1,s("autoplayResume"))},C=()=>{if(e.destroyed||!e.autoplay.running)return;const O=gi();O.visibilityState==="hidden"&&(m=!0,E(!0)),O.visibilityState==="visible"&&w()},P=O=>{O.pointerType==="mouse"&&(m=!0,b=!0,!(e.animating||e.autoplay.paused)&&E(!0))},T=O=>{O.pointerType==="mouse"&&(b=!1,e.autoplay.paused&&w())},R=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",P),e.el.addEventListener("pointerleave",T))},F=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",P),e.el.removeEventListener("pointerleave",T))},z=()=>{gi().addEventListener("visibilitychange",C)},D=()=>{gi().removeEventListener("visibilitychange",C)};n("init",()=>{e.params.autoplay.enabled&&(R(),z(),S())}),n("destroy",()=>{F(),D(),e.autoplay.running&&A()}),n("_freeModeStaticRelease",()=>{(p||m)&&w()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?A():E(!0,!0)}),n("beforeTransitionStart",(O,j,k)=>{e.destroyed||!e.autoplay.running||(k||!e.params.autoplay.disableOnInteraction?E(!0,!0):A())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){A();return}f=!0,p=!1,m=!1,g=setTimeout(()=>{m=!0,p=!0,E(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!f)){if(clearTimeout(g),clearTimeout(a),e.params.autoplay.disableOnInteraction){p=!1,f=!1;return}p&&e.params.cssMode&&w(),p=!1,f=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:S,stop:A,pause:E,resume:w})}function yT(i){let{swiper:e,extendParams:t,on:n}=i;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;e.thumbs={swiper:null};function a(){const u=e.thumbs.swiper;if(!u||u.destroyed)return;const c=u.clickedIndex,d=u.clickedSlide;if(d&&d.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof c>"u"||c===null)return;let h;u.params.loop?h=parseInt(u.clickedSlide.getAttribute("data-swiper-slide-index"),10):h=c,e.params.loop?e.slideToLoop(h):e.slideTo(h)}function o(){const{thumbs:u}=e.params;if(s)return!1;s=!0;const c=e.constructor;if(u.swiper instanceof c)e.thumbs.swiper=u.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(bo(u.swiper)){const d=Object.assign({},u.swiper);Object.assign(d,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new c(d),r=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",a),!0}function l(u){const c=e.thumbs.swiper;if(!c||c.destroyed)return;const d=c.params.slidesPerView==="auto"?c.slidesPerViewDynamic():c.params.slidesPerView;let h=1;const f=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(h=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),c.slides.forEach(v=>v.classList.remove(f)),c.params.loop||c.params.virtual&&c.params.virtual.enabled)for(let v=0;v<h;v+=1)mi(c.slidesEl,`[data-swiper-slide-index="${e.realIndex+v}"]`).forEach(m=>{m.classList.add(f)});else for(let v=0;v<h;v+=1)c.slides[e.realIndex+v]&&c.slides[e.realIndex+v].classList.add(f);const p=e.params.thumbs.autoScrollOffset,g=p&&!c.params.loop;if(e.realIndex!==c.realIndex||g){const v=c.activeIndex;let m,b;if(c.params.loop){const _=c.slides.filter(y=>y.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];m=c.slides.indexOf(_),b=e.activeIndex>e.previousIndex?"next":"prev"}else m=e.realIndex,b=m>e.previousIndex?"next":"prev";g&&(m+=b==="next"?p:-1*p),c.visibleSlidesIndexes&&c.visibleSlidesIndexes.indexOf(m)<0&&(c.params.centeredSlides?m>v?m=m-Math.floor(d/2)+1:m=m+Math.floor(d/2)-1:m>v&&c.params.slidesPerGroup,c.slideTo(m,u?0:void 0))}}n("beforeInit",()=>{const{thumbs:u}=e.params;if(!(!u||!u.swiper))if(typeof u.swiper=="string"||u.swiper instanceof HTMLElement){const c=gi(),d=()=>{const f=typeof u.swiper=="string"?c.querySelector(u.swiper):u.swiper;if(f&&f.swiper)u.swiper=f.swiper,o(),l(!0);else if(f){const p=`${e.params.eventsPrefix}init`,g=v=>{u.swiper=v.detail[0],f.removeEventListener(p,g),o(),l(!0),u.swiper.update(),e.update()};f.addEventListener(p,g)}return f},h=()=>{if(e.destroyed)return;d()||requestAnimationFrame(h)};requestAnimationFrame(h)}else o(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(u,c)=>{const d=e.thumbs.swiper;!d||d.destroyed||d.setTransition(c)}),n("beforeDestroy",()=>{const u=e.thumbs.swiper;!u||u.destroyed||r&&u.destroy()}),Object.assign(e.thumbs,{init:o,update:l})}function bT(i){let{swiper:e,extendParams:t,emit:n,once:s}=i;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(e.params.cssMode)return;const l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function a(){if(e.params.cssMode)return;const{touchEventsData:l,touches:u}=e;l.velocities.length===0&&l.velocities.push({position:u[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:u[e.isHorizontal()?"currentX":"currentY"],time:an()})}function o(l){let{currentPos:u}=l;if(e.params.cssMode)return;const{params:c,wrapperEl:d,rtlTranslate:h,snapGrid:f,touchEventsData:p}=e,v=an()-p.touchStartTime;if(u<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(u>-e.maxTranslate()){e.slides.length<f.length?e.slideTo(f.length-1):e.slideTo(e.slides.length-1);return}if(c.freeMode.momentum){if(p.velocities.length>1){const A=p.velocities.pop(),E=p.velocities.pop(),w=A.position-E.position,C=A.time-E.time;e.velocity=w/C,e.velocity/=2,Math.abs(e.velocity)<c.freeMode.minimumVelocity&&(e.velocity=0),(C>150||an()-A.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=c.freeMode.momentumVelocityRatio,p.velocities.length=0;let m=1e3*c.freeMode.momentumRatio;const b=e.velocity*m;let _=e.translate+b;h&&(_=-_);let y=!1,M;const x=Math.abs(e.velocity)*20*c.freeMode.momentumBounceRatio;let S;if(_<e.maxTranslate())c.freeMode.momentumBounce?(_+e.maxTranslate()<-x&&(_=e.maxTranslate()-x),M=e.maxTranslate(),y=!0,p.allowMomentumBounce=!0):_=e.maxTranslate(),c.loop&&c.centeredSlides&&(S=!0);else if(_>e.minTranslate())c.freeMode.momentumBounce?(_-e.minTranslate()>x&&(_=e.minTranslate()+x),M=e.minTranslate(),y=!0,p.allowMomentumBounce=!0):_=e.minTranslate(),c.loop&&c.centeredSlides&&(S=!0);else if(c.freeMode.sticky){let A;for(let E=0;E<f.length;E+=1)if(f[E]>-_){A=E;break}Math.abs(f[A]-_)<Math.abs(f[A-1]-_)||e.swipeDirection==="next"?_=f[A]:_=f[A-1],_=-_}if(S&&s("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(h?m=Math.abs((-_-e.translate)/e.velocity):m=Math.abs((_-e.translate)/e.velocity),c.freeMode.sticky){const A=Math.abs((h?-_:_)-e.translate),E=e.slidesSizesGrid[e.activeIndex];A<E?m=c.speed:A<2*E?m=c.speed*1.5:m=c.speed*2.5}}else if(c.freeMode.sticky){e.slideToClosest();return}c.freeMode.momentumBounce&&y?(e.updateProgress(M),e.setTransition(m),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,So(d,()=>{!e||e.destroyed||!p.allowMomentumBounce||(n("momentumBounce"),e.setTransition(c.speed),setTimeout(()=>{e.setTranslate(M),So(d,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(_),e.setTransition(m),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,So(d,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(c.freeMode.sticky){e.slideToClosest();return}else c.freeMode&&n("_freeModeNoMomentumRelease");(!c.freeMode.momentum||v>=c.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:r,onTouchMove:a,onTouchEnd:o}})}function _T(i){let{swiper:e,extendParams:t,on:n}=i;t({grid:{rows:1,fill:"column"}});let s,r,a,o;const l=()=>{let g=e.params.spaceBetween;return typeof g=="string"&&g.indexOf("%")>=0?g=parseFloat(g.replace("%",""))/100*e.size:typeof g=="string"&&(g=parseFloat(g)),g},u=g=>{const{slidesPerView:v}=e.params,{rows:m,fill:b}=e.params.grid,_=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:g.length;a=Math.floor(_/m),Math.floor(_/m)===_/m?s=_:s=Math.ceil(_/m)*m,v!=="auto"&&b==="row"&&(s=Math.max(s,v*m)),r=s/m},c=()=>{e.slides&&e.slides.forEach(g=>{g.swiperSlideGridSet&&(g.style.height="",g.style[e.getDirectionLabel("margin-top")]="")})},d=(g,v,m)=>{const{slidesPerGroup:b}=e.params,_=l(),{rows:y,fill:M}=e.params.grid,x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:m.length;let S,A,E;if(M==="row"&&b>1){const w=Math.floor(g/(b*y)),C=g-y*b*w,P=w===0?b:Math.min(Math.ceil((x-w*y*b)/y),b);E=Math.floor(C/P),A=C-E*P+w*b,S=A+E*s/y,v.style.order=S}else M==="column"?(A=Math.floor(g/y),E=g-A*y,(A>a||A===a&&E===y-1)&&(E+=1,E>=y&&(E=0,A+=1))):(E=Math.floor(g/r),A=g-E*r);v.row=E,v.column=A,v.style.height=`calc((100% - ${(y-1)*_}px) / ${y})`,v.style[e.getDirectionLabel("margin-top")]=E!==0?_&&`${_}px`:"",v.swiperSlideGridSet=!0},h=(g,v)=>{const{centeredSlides:m,roundLengths:b}=e.params,_=l(),{rows:y}=e.params.grid;if(e.virtualSize=(g+_)*s,e.virtualSize=Math.ceil(e.virtualSize/y)-_,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+_}px`),m){const M=[];for(let x=0;x<v.length;x+=1){let S=v[x];b&&(S=Math.floor(S)),v[x]<e.virtualSize+v[0]&&M.push(S)}v.splice(0,v.length),v.push(...M)}},f=()=>{o=e.params.grid&&e.params.grid.rows>1},p=()=>{const{params:g,el:v}=e,m=g.grid&&g.grid.rows>1;o&&!m?(v.classList.remove(`${g.containerModifierClass}grid`,`${g.containerModifierClass}grid-column`),a=1,e.emitContainerClasses()):!o&&m&&(v.classList.add(`${g.containerModifierClass}grid`),g.grid.fill==="column"&&v.classList.add(`${g.containerModifierClass}grid-column`),e.emitContainerClasses()),o=m};n("init",f),n("update",p),e.grid={initSlides:u,unsetSlides:c,updateSlide:d,updateWrapperSize:h}}function wT(i){const e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();const s=r=>{if(typeof r=="string"){const a=document.createElement("div");a.innerHTML=r,n.append(a.children[0]),a.innerHTML=""}else n.append(r)};if(typeof i=="object"&&"length"in i)for(let r=0;r<i.length;r+=1)i[r]&&s(i[r]);else s(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function ET(i){const e=this,{params:t,activeIndex:n,slidesEl:s}=e;t.loop&&e.loopDestroy();let r=n+1;const a=o=>{if(typeof o=="string"){const l=document.createElement("div");l.innerHTML=o,s.prepend(l.children[0]),l.innerHTML=""}else s.prepend(o)};if(typeof i=="object"&&"length"in i){for(let o=0;o<i.length;o+=1)i[o]&&a(i[o]);r=n+i.length}else a(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(r,0,!1)}function xT(i,e){const t=this,{params:n,activeIndex:s,slidesEl:r}=t;let a=s;n.loop&&(a-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());const o=t.slides.length;if(i<=0){t.prependSlide(e);return}if(i>=o){t.appendSlide(e);return}let l=a>i?a+1:a;const u=[];for(let c=o-1;c>=i;c-=1){const d=t.slides[c];d.remove(),u.unshift(d)}if(typeof e=="object"&&"length"in e){for(let c=0;c<e.length;c+=1)e[c]&&r.append(e[c]);l=a>i?a+e.length:a}else r.append(e);for(let c=0;c<u.length;c+=1)r.append(u[c]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function ST(i){const e=this,{params:t,activeIndex:n}=e;let s=n;t.loop&&(s-=e.loopedSlides,e.loopDestroy());let r=s,a;if(typeof i=="object"&&"length"in i){for(let o=0;o<i.length;o+=1)a=i[o],e.slides[a]&&e.slides[a].remove(),a<r&&(r-=1);r=Math.max(r,0)}else a=i,e.slides[a]&&e.slides[a].remove(),a<r&&(r-=1),r=Math.max(r,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function TT(){const i=this,e=[];for(let t=0;t<i.slides.length;t+=1)e.push(t);i.removeSlide(e)}function MT(i){let{swiper:e}=i;Object.assign(e,{appendSlide:wT.bind(e),prependSlide:ET.bind(e),addSlide:xT.bind(e),removeSlide:ST.bind(e),removeAllSlides:TT.bind(e)})}function ka(i){const{effect:e,swiper:t,on:n,setTranslate:s,setTransition:r,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:u}=i;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),o&&o()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=a?a():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),n("setTranslate",()=>{t.params.effect===e&&s()}),n("setTransition",(d,h)=>{t.params.effect===e&&r(h)}),n("transitionEnd",()=>{if(t.params.effect===e&&l){if(!u||!u().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let c;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(c=!0),requestAnimationFrame(()=>{c&&t.slides&&t.slides.length&&(s(),c=!1)}))})}function nl(i,e){const t=Cr(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function gu(i){let{swiper:e,duration:t,transformElements:n,allSlides:s}=i;const{activeIndex:r}=e,a=o=>o.parentElement?o.parentElement:e.slides.filter(u=>u.shadowRoot&&u.shadowRoot===o.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let o=!1,l;s?l=n:l=n.filter(u=>{const c=u.classList.contains("swiper-slide-transform")?a(u):u;return e.getSlideIndex(c)===r}),l.forEach(u=>{So(u,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const c=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(c)})})}}function CT(i){let{swiper:e,extendParams:t,on:n}=i;t({fadeEffect:{crossFade:!1}}),ka({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:a}=e,o=e.params.fadeEffect;for(let l=0;l<a.length;l+=1){const u=e.slides[l];let d=-u.swiperSlideOffset;e.params.virtualTranslate||(d-=e.translate);let h=0;e.isHorizontal()||(h=d,d=0);const f=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(u.progress),0):1+Math.min(Math.max(u.progress,-1),0),p=nl(o,u);p.style.opacity=f,p.style.transform=`translate3d(${d}px, ${h}px, 0px)`}},setTransition:a=>{const o=e.slides.map(l=>Cr(l));o.forEach(l=>{l.style.transitionDuration=`${a}ms`}),gu({swiper:e,duration:a,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function AT(i){let{swiper:e,extendParams:t,on:n}=i;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const s=(l,u,c)=>{let d=c?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=c?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=qi("div",`swiper-slide-shadow-cube swiper-slide-shadow-${c?"left":"top"}`.split(" ")),l.append(d)),h||(h=qi("div",`swiper-slide-shadow-cube swiper-slide-shadow-${c?"right":"bottom"}`.split(" ")),l.append(h)),d&&(d.style.opacity=Math.max(-u,0)),h&&(h.style.opacity=Math.max(u,0))};ka({effect:"cube",swiper:e,on:n,setTranslate:()=>{const{el:l,wrapperEl:u,slides:c,width:d,height:h,rtlTranslate:f,size:p,browser:g}=e,v=mu(e),m=e.params.cubeEffect,b=e.isHorizontal(),_=e.virtual&&e.params.virtual.enabled;let y=0,M;m.shadow&&(b?(M=e.wrapperEl.querySelector(".swiper-cube-shadow"),M||(M=qi("div","swiper-cube-shadow"),e.wrapperEl.append(M)),M.style.height=`${d}px`):(M=l.querySelector(".swiper-cube-shadow"),M||(M=qi("div","swiper-cube-shadow"),l.append(M))));for(let S=0;S<c.length;S+=1){const A=c[S];let E=S;_&&(E=parseInt(A.getAttribute("data-swiper-slide-index"),10));let w=E*90,C=Math.floor(w/360);f&&(w=-w,C=Math.floor(-w/360));const P=Math.max(Math.min(A.progress,1),-1);let T=0,R=0,F=0;E%4===0?(T=-C*4*p,F=0):(E-1)%4===0?(T=0,F=-C*4*p):(E-2)%4===0?(T=p+C*4*p,F=p):(E-3)%4===0&&(T=-p,F=3*p+p*4*C),f&&(T=-T),b||(R=T,T=0);const z=`rotateX(${v(b?0:-w)}deg) rotateY(${v(b?w:0)}deg) translate3d(${T}px, ${R}px, ${F}px)`;P<=1&&P>-1&&(y=E*90+P*90,f&&(y=-E*90-P*90)),A.style.transform=z,m.slideShadows&&s(A,P,b)}if(u.style.transformOrigin=`50% 50% -${p/2}px`,u.style["-webkit-transform-origin"]=`50% 50% -${p/2}px`,m.shadow)if(b)M.style.transform=`translate3d(0px, ${d/2+m.shadowOffset}px, ${-d/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${m.shadowScale})`;else{const S=Math.abs(y)-Math.floor(Math.abs(y)/90)*90,A=1.5-(Math.sin(S*2*Math.PI/360)/2+Math.cos(S*2*Math.PI/360)/2),E=m.shadowScale,w=m.shadowScale/A,C=m.shadowOffset;M.style.transform=`scale3d(${E}, 1, ${w}) translate3d(0px, ${h/2+C}px, ${-h/2/w}px) rotateX(-89.99deg)`}const x=(g.isSafari||g.isWebView)&&g.needPerspectiveFix?-p/2:0;u.style.transform=`translate3d(0px,0,${x}px) rotateX(${v(e.isHorizontal()?0:y)}deg) rotateY(${v(e.isHorizontal()?-y:0)}deg)`,u.style.setProperty("--swiper-cube-translate-z",`${x}px`)},setTransition:l=>{const{el:u,slides:c}=e;if(c.forEach(d=>{d.style.transitionDuration=`${l}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const d=u.querySelector(".swiper-cube-shadow");d&&(d.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{const l=e.isHorizontal();e.slides.forEach(u=>{const c=Math.max(Math.min(u.progress,1),-1);s(u,c,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Ea(i,e,t){const n=`swiper-slide-shadow${t?`-${t}`:""}${i?` swiper-slide-shadow-${i}`:""}`,s=Cr(e);let r=s.querySelector(`.${n.split(" ").join(".")}`);return r||(r=qi("div",n.split(" ")),s.append(r)),r}function PT(i){let{swiper:e,extendParams:t,on:n}=i;t({flipEffect:{slideShadows:!0,limitRotation:!0}});const s=(l,u)=>{let c=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),d=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");c||(c=Ea("flip",l,e.isHorizontal()?"left":"top")),d||(d=Ea("flip",l,e.isHorizontal()?"right":"bottom")),c&&(c.style.opacity=Math.max(-u,0)),d&&(d.style.opacity=Math.max(u,0))};ka({effect:"flip",swiper:e,on:n,setTranslate:()=>{const{slides:l,rtlTranslate:u}=e,c=e.params.flipEffect,d=mu(e);for(let h=0;h<l.length;h+=1){const f=l[h];let p=f.progress;e.params.flipEffect.limitRotation&&(p=Math.max(Math.min(f.progress,1),-1));const g=f.swiperSlideOffset;let m=-180*p,b=0,_=e.params.cssMode?-g-e.translate:-g,y=0;e.isHorizontal()?u&&(m=-m):(y=_,_=0,b=-m,m=0),f.style.zIndex=-Math.abs(Math.round(p))+l.length,c.slideShadows&&s(f,p);const M=`translate3d(${_}px, ${y}px, 0px) rotateX(${d(b)}deg) rotateY(${d(m)}deg)`,x=nl(c,f);x.style.transform=M}},setTransition:l=>{const u=e.slides.map(c=>Cr(c));u.forEach(c=>{c.style.transitionDuration=`${l}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>{d.style.transitionDuration=`${l}ms`})}),gu({swiper:e,duration:l,transformElements:u})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let u=l.progress;e.params.flipEffect.limitRotation&&(u=Math.max(Math.min(l.progress,1),-1)),s(l,u)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function LT(i){let{swiper:e,extendParams:t,on:n}=i;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),ka({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{const{width:a,height:o,slides:l,slidesSizesGrid:u}=e,c=e.params.coverflowEffect,d=e.isHorizontal(),h=e.translate,f=d?-h+a/2:-h+o/2,p=d?c.rotate:-c.rotate,g=c.depth,v=mu(e);for(let m=0,b=l.length;m<b;m+=1){const _=l[m],y=u[m],M=_.swiperSlideOffset,x=(f-M-y/2)/y,S=typeof c.modifier=="function"?c.modifier(x):x*c.modifier;let A=d?p*S:0,E=d?0:p*S,w=-g*Math.abs(S),C=c.stretch;typeof C=="string"&&C.indexOf("%")!==-1&&(C=parseFloat(c.stretch)/100*y);let P=d?0:C*S,T=d?C*S:0,R=1-(1-c.scale)*Math.abs(S);Math.abs(T)<.001&&(T=0),Math.abs(P)<.001&&(P=0),Math.abs(w)<.001&&(w=0),Math.abs(A)<.001&&(A=0),Math.abs(E)<.001&&(E=0),Math.abs(R)<.001&&(R=0);const F=`translate3d(${T}px,${P}px,${w}px)  rotateX(${v(E)}deg) rotateY(${v(A)}deg) scale(${R})`,z=nl(c,_);if(z.style.transform=F,_.style.zIndex=-Math.abs(Math.round(S))+1,c.slideShadows){let D=d?_.querySelector(".swiper-slide-shadow-left"):_.querySelector(".swiper-slide-shadow-top"),O=d?_.querySelector(".swiper-slide-shadow-right"):_.querySelector(".swiper-slide-shadow-bottom");D||(D=Ea("coverflow",_,d?"left":"top")),O||(O=Ea("coverflow",_,d?"right":"bottom")),D&&(D.style.opacity=S>0?S:0),O&&(O.style.opacity=-S>0?-S:0)}}},setTransition:a=>{e.slides.map(l=>Cr(l)).forEach(l=>{l.style.transitionDuration=`${a}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>{u.style.transitionDuration=`${a}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function RT(i){let{swiper:e,extendParams:t,on:n}=i;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const s=o=>typeof o=="string"?o:`${o}px`;ka({effect:"creative",swiper:e,on:n,setTranslate:()=>{const{slides:o,wrapperEl:l,slidesSizesGrid:u}=e,c=e.params.creativeEffect,{progressMultiplier:d}=c,h=e.params.centeredSlides,f=mu(e);if(h){const p=u[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${p}px))`}for(let p=0;p<o.length;p+=1){const g=o[p],v=g.progress,m=Math.min(Math.max(g.progress,-c.limitProgress),c.limitProgress);let b=m;h||(b=Math.min(Math.max(g.originalProgress,-c.limitProgress),c.limitProgress));const _=g.swiperSlideOffset,y=[e.params.cssMode?-_-e.translate:-_,0,0],M=[0,0,0];let x=!1;e.isHorizontal()||(y[1]=y[0],y[0]=0);let S={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};m<0?(S=c.next,x=!0):m>0&&(S=c.prev,x=!0),y.forEach((R,F)=>{y[F]=`calc(${R}px + (${s(S.translate[F])} * ${Math.abs(m*d)}))`}),M.forEach((R,F)=>{let z=S.rotate[F]*Math.abs(m*d);M[F]=z}),g.style.zIndex=-Math.abs(Math.round(v))+o.length;const A=y.join(", "),E=`rotateX(${f(M[0])}deg) rotateY(${f(M[1])}deg) rotateZ(${f(M[2])}deg)`,w=b<0?`scale(${1+(1-S.scale)*b*d})`:`scale(${1-(1-S.scale)*b*d})`,C=b<0?1+(1-S.opacity)*b*d:1-(1-S.opacity)*b*d,P=`translate3d(${A}) ${E} ${w}`;if(x&&S.shadow||!x){let R=g.querySelector(".swiper-slide-shadow");if(!R&&S.shadow&&(R=Ea("creative",g)),R){const F=c.shadowPerProgress?m*(1/c.limitProgress):m;R.style.opacity=Math.min(Math.max(Math.abs(F),0),1)}}const T=nl(c,g);T.style.transform=P,T.style.opacity=C,S.origin&&(T.style.transformOrigin=S.origin)}},setTransition:o=>{const l=e.slides.map(u=>Cr(u));l.forEach(u=>{u.style.transitionDuration=`${o}ms`,u.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${o}ms`})}),gu({swiper:e,duration:o,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function IT(i){let{swiper:e,extendParams:t,on:n}=i;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),ka({effect:"cards",swiper:e,on:n,setTranslate:()=>{const{slides:a,activeIndex:o,rtlTranslate:l}=e,u=e.params.cardsEffect,{startTranslate:c,isTouched:d}=e.touchEventsData,h=l?-e.translate:e.translate;for(let f=0;f<a.length;f+=1){const p=a[f],g=p.progress,v=Math.min(Math.max(g,-4),4);let m=p.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(m-=a[0].swiperSlideOffset);let b=e.params.cssMode?-m-e.translate:-m,_=0;const y=-100*Math.abs(v);let M=1,x=-u.perSlideRotate*v,S=u.perSlideOffset-Math.abs(v)*.75;const A=e.virtual&&e.params.virtual.enabled?e.virtual.from+f:f,E=(A===o||A===o-1)&&v>0&&v<1&&(d||e.params.cssMode)&&h<c,w=(A===o||A===o+1)&&v<0&&v>-1&&(d||e.params.cssMode)&&h>c;if(E||w){const R=(1-Math.abs((Math.abs(v)-.5)/.5))**.5;x+=-28*v*R,M+=-.5*R,S+=96*R,_=`${-25*R*Math.abs(v)}%`}if(v<0?b=`calc(${b}px ${l?"-":"+"} (${S*Math.abs(v)}%))`:v>0?b=`calc(${b}px ${l?"-":"+"} (-${S*Math.abs(v)}%))`:b=`${b}px`,!e.isHorizontal()){const R=_;_=b,b=R}const C=v<0?`${1+(1-M)*v}`:`${1-(1-M)*v}`,P=`
        translate3d(${b}, ${_}, ${y}px)
        rotateZ(${u.rotate?l?-x:x:0}deg)
        scale(${C})
      `;if(u.slideShadows){let R=p.querySelector(".swiper-slide-shadow");R||(R=Ea("cards",p)),R&&(R.style.opacity=Math.min(Math.max((Math.abs(v)-.5)/.5,0),1))}p.style.zIndex=-Math.abs(Math.round(g))+a.length;const T=nl(u,p);T.style.transform=P}},setTransition:a=>{const o=e.slides.map(l=>Cr(l));o.forEach(l=>{l.style.transitionDuration=`${a}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(u=>{u.style.transitionDuration=`${a}ms`})}),gu({swiper:e,duration:a,transformElements:o})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}const OT=[rT,aT,oT,lT,cT,uT,dT,hT,fT,pT,mT,gT,vT,yT,bT,_T,MT,CT,AT,PT,LT,RT,IT];It.use(OT);new It(".section-top--backdrop-swiper",{grabCursor:!0,slidesPerView:1,loop:!0,spaceBetween:20,pagination:{el:".section-top--backdrop-swiper .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},speed:1e3,effect:"fade"});new It(".shares--swiper",{grabCursor:!0,slidesPerView:3,loop:!0,spaceBetween:25,pagination:{el:".shares .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{loop:!1},1024:{slidesPerView:2.3,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".doctors--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".doctors .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},575:{slidesPerView:1.8,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".offices--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,autoHeight:!0,pagination:{el:".offices .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},575:{slidesPerView:1.8,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".reviews--swiper",{grabCursor:!0,slidesPerView:2,loop:!0,spaceBetween:25,pagination:{el:".reviews .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:1.8,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.3,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".partners--swiper",{slidesPerView:6.5,spaceBetween:25,loop:!0,speed:6e3,autoplay:{enabled:!0,delay:1},centeredSlides:!0,allowTouchMove:!1,breakpoints:{1200:{},1024:{slidesPerView:5.5,spaceBetween:20},768:{slidesPerView:4.2,spaceBetween:20},575:{slidesPerView:3.2,spaceBetween:15},0:{slidesPerView:1.8,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".news--swiper",{grabCursor:!0,slidesPerView:3,loop:!0,spaceBetween:25,pagination:{el:".news .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{loop:!1},1024:{slidesPerView:2.3,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".certificates--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".certificates .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.2,spaceBetween:20},768:{slidesPerView:2.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".stay-conditions--swiper",{grabCursor:!0,loop:!0,pagination:{el:".stay-conditions .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1024:{loop:!1},768:{slidesPerView:2.2,spaceBetween:20},575:{slidesPerView:1.7,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".hospital--swiper",{grabCursor:!0,loop:!0,pagination:{el:".hospital .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1024:{loop:!1},768:{slidesPerView:2.2,spaceBetween:20},575:{slidesPerView:1.7,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".media--swiper",{grabCursor:!0,loop:!0,slidesPerView:4.5,spaceBetween:25,pagination:{el:".media-content .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5},768:{slidesPerView:2.7,spaceBetween:20},575:{slidesPerView:2.2,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}},observer:!0,observeParents:!0,observeSlideChildren:!0});new It(".template-shares--swiper",{grabCursor:!0,slidesPerView:1,loop:!0,spaceBetween:25,pagination:{el:".template-shares--swiper .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},navigation:{nextEl:".template-shares--swiper .swiper-buttons .button-slider-next",prevEl:".template-shares--swiper .swiper-buttons .button-slider-prev"},autoplay:{delay:1e4,disableOnInteraction:!1},breakpoints:{1024:{},768:{spaceBetween:20,slidesPerView:2},0:{spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new It(".offices-anchor--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,autoHeight:!0,navigation:{nextEl:".offices-anchor--swiper .swiper-buttons .button-slider-next",prevEl:".offices-anchor--swiper .swiper-buttons .button-slider-prev"},autoplay:{delay:1e4,disableOnInteraction:!1},breakpoints:{1400:{},1200:{slidesPerView:3},1024:{slidesPerView:3},768:{spaceBetween:20,slidesPerView:2},575:{spaceBetween:15,slidesPerView:1},0:{spaceBetween:15,slidesPerView:1}}});document.querySelectorAll(".offices-direction-thumbs--swiper").forEach(function(i,e){var t=document.querySelectorAll(".offices-direction--swiper")[e];if(i&&t){var n=new It(i,{grabCursor:!0,spaceBetween:8,slidesPerView:"auto"});new It(t,{grabCursor:!0,slidesPerView:1,loop:!0,breakpoints:{1200:{spaceBetween:25},576:{spaceBetween:20},0:{}},autoplay:{delay:1e4,disableOnInteraction:!1},navigation:{nextEl:t.querySelector(".swiper-buttons .button-slider-next"),prevEl:t.querySelector(".swiper-buttons .button-slider-prev")},thumbs:{swiper:n}})}});var E0={exports:{}};/*!
 * Select2 4.1.0-rc.0
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */(function(i){(function(e){i.exports?i.exports=function(t,n){return n===void 0&&(typeof window<"u"?n=Fc:n=Fc(t)),e(n),n}:e(jQuery)})(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var s=e.fn.select2.amd;var s;return function(){if(!s||!s.requirejs){s?a=s:s={};/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var r,a,o;(function(l){var u,c,d,h,f={},p={},g={},v={},m=Object.prototype.hasOwnProperty,b=[].slice,_=/\.js$/;function y(T,R){return m.call(T,R)}function M(T,R){var F,z,D,O,j,k,I,U,B,V,H,Y,J=R&&R.split("/"),ee=g.map,se=ee&&ee["*"]||{};if(T){for(T=T.split("/"),j=T.length-1,g.nodeIdCompat&&_.test(T[j])&&(T[j]=T[j].replace(_,"")),T[0].charAt(0)==="."&&J&&(Y=J.slice(0,J.length-1),T=Y.concat(T)),B=0;B<T.length;B++)if(H=T[B],H===".")T.splice(B,1),B-=1;else if(H===".."){if(B===0||B===1&&T[2]===".."||T[B-1]==="..")continue;B>0&&(T.splice(B-1,2),B-=2)}T=T.join("/")}if((J||se)&&ee){for(F=T.split("/"),B=F.length;B>0;B-=1){if(z=F.slice(0,B).join("/"),J){for(V=J.length;V>0;V-=1)if(D=ee[J.slice(0,V).join("/")],D&&(D=D[z],D)){O=D,k=B;break}}if(O)break;!I&&se&&se[z]&&(I=se[z],U=B)}!O&&I&&(O=I,k=U),O&&(F.splice(0,k,O),T=F.join("/"))}return T}function x(T,R){return function(){var F=b.call(arguments,0);return typeof F[0]!="string"&&F.length===1&&F.push(null),c.apply(l,F.concat([T,R]))}}function S(T){return function(R){return M(R,T)}}function A(T){return function(R){f[T]=R}}function E(T){if(y(p,T)){var R=p[T];delete p[T],v[T]=!0,u.apply(l,R)}if(!y(f,T)&&!y(v,T))throw new Error("No "+T);return f[T]}function w(T){var R,F=T?T.indexOf("!"):-1;return F>-1&&(R=T.substring(0,F),T=T.substring(F+1,T.length)),[R,T]}function C(T){return T?w(T):[]}d=function(T,R){var F,z=w(T),D=z[0],O=R[1];return T=z[1],D&&(D=M(D,O),F=E(D)),D?F&&F.normalize?T=F.normalize(T,S(O)):T=M(T,O):(T=M(T,O),z=w(T),D=z[0],T=z[1],D&&(F=E(D))),{f:D?D+"!"+T:T,n:T,pr:D,p:F}};function P(T){return function(){return g&&g.config&&g.config[T]||{}}}h={require:function(T){return x(T)},exports:function(T){var R=f[T];return typeof R<"u"?R:f[T]={}},module:function(T){return{id:T,uri:"",exports:f[T],config:P(T)}}},u=function(T,R,F,z){var D,O,j,k,I,U,B=[],V=typeof F,H;if(z=z||T,U=C(z),V==="undefined"||V==="function"){for(R=!R.length&&F.length?["require","exports","module"]:R,I=0;I<R.length;I+=1)if(k=d(R[I],U),O=k.f,O==="require")B[I]=h.require(T);else if(O==="exports")B[I]=h.exports(T),H=!0;else if(O==="module")D=B[I]=h.module(T);else if(y(f,O)||y(p,O)||y(v,O))B[I]=E(O);else if(k.p)k.p.load(k.n,x(z,!0),A(O),{}),B[I]=f[O];else throw new Error(T+" missing "+O);j=F?F.apply(f[T],B):void 0,T&&(D&&D.exports!==l&&D.exports!==f[T]?f[T]=D.exports:(j!==l||!H)&&(f[T]=j))}else T&&(f[T]=F)},r=a=c=function(T,R,F,z,D){if(typeof T=="string")return h[T]?h[T](R):E(d(T,C(R)).f);if(!T.splice){if(g=T,g.deps&&c(g.deps,g.callback),!R)return;R.splice?(T=R,R=F,F=null):T=l}return R=R||function(){},typeof F=="function"&&(F=z,z=D),z?u(l,T,R,F):setTimeout(function(){u(l,T,R,F)},4),c},c.config=function(T){return c(T)},r._defined=f,o=function(T,R,F){if(typeof T!="string")throw new Error("See almond README: incorrect module build, no module name");R.splice||(F=R,R=[]),!y(f,T)&&!y(p,T)&&(p[T]=[T,R,F])},o.amd={jQuery:!0}})(),s.requirejs=r,s.require=a,s.define=o}}(),s.define("almond",function(){}),s.define("jquery",[],function(){var r=e||$;return r==null&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),r}),s.define("select2/utils",["jquery"],function(r){var a={};a.Extend=function(c,d){var h={}.hasOwnProperty;function f(){this.constructor=c}for(var p in d)h.call(d,p)&&(c[p]=d[p]);return f.prototype=d.prototype,c.prototype=new f,c.__super__=d.prototype,c};function o(c){var d=c.prototype,h=[];for(var f in d){var p=d[f];typeof p=="function"&&f!=="constructor"&&h.push(f)}return h}a.Decorate=function(c,d){var h=o(d),f=o(c);function p(){var M=Array.prototype.unshift,x=d.prototype.constructor.length,S=c.prototype.constructor;x>0&&(M.call(arguments,c.prototype.constructor),S=d.prototype.constructor),S.apply(this,arguments)}d.displayName=c.displayName;function g(){this.constructor=p}p.prototype=new g;for(var v=0;v<f.length;v++){var m=f[v];p.prototype[m]=c.prototype[m]}for(var b=function(M){var x=function(){};M in p.prototype&&(x=p.prototype[M]);var S=d.prototype[M];return function(){var A=Array.prototype.unshift;return A.call(arguments,x),S.apply(this,arguments)}},_=0;_<h.length;_++){var y=h[_];p.prototype[y]=b(y)}return p};var l=function(){this.listeners={}};l.prototype.on=function(c,d){this.listeners=this.listeners||{},c in this.listeners?this.listeners[c].push(d):this.listeners[c]=[d]},l.prototype.trigger=function(c){var d=Array.prototype.slice,h=d.call(arguments,1);this.listeners=this.listeners||{},h==null&&(h=[]),h.length===0&&h.push({}),h[0]._type=c,c in this.listeners&&this.invoke(this.listeners[c],d.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},l.prototype.invoke=function(c,d){for(var h=0,f=c.length;h<f;h++)c[h].apply(this,d)},a.Observable=l,a.generateChars=function(c){for(var d="",h=0;h<c;h++){var f=Math.floor(Math.random()*36);d+=f.toString(36)}return d},a.bind=function(c,d){return function(){c.apply(d,arguments)}},a._convertData=function(c){for(var d in c){var h=d.split("-"),f=c;if(h.length!==1){for(var p=0;p<h.length;p++){var g=h[p];g=g.substring(0,1).toLowerCase()+g.substring(1),g in f||(f[g]={}),p==h.length-1&&(f[g]=c[d]),f=f[g]}delete c[d]}}return c},a.hasScroll=function(c,d){var h=r(d),f=d.style.overflowX,p=d.style.overflowY;return f===p&&(p==="hidden"||p==="visible")?!1:f==="scroll"||p==="scroll"?!0:h.innerHeight()<d.scrollHeight||h.innerWidth()<d.scrollWidth},a.escapeMarkup=function(c){var d={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return typeof c!="string"?c:String(c).replace(/[&<>"'\/\\]/g,function(h){return d[h]})},a.__cache={};var u=0;return a.GetUniqueElementId=function(c){var d=c.getAttribute("data-select2-id");return d!=null||(c.id?d="select2-data-"+c.id:d="select2-data-"+(++u).toString()+"-"+a.generateChars(4),c.setAttribute("data-select2-id",d)),d},a.StoreData=function(c,d,h){var f=a.GetUniqueElementId(c);a.__cache[f]||(a.__cache[f]={}),a.__cache[f][d]=h},a.GetData=function(c,d){var h=a.GetUniqueElementId(c);return d?a.__cache[h]&&a.__cache[h][d]!=null?a.__cache[h][d]:r(c).data(d):a.__cache[h]},a.RemoveData=function(c){var d=a.GetUniqueElementId(c);a.__cache[d]!=null&&delete a.__cache[d],c.removeAttribute("data-select2-id")},a.copyNonInternalCssClasses=function(c,d){var h=c.getAttribute("class").trim().split(/\s+/);h=h.filter(function(g){return g.indexOf("select2-")===0});var f=d.getAttribute("class").trim().split(/\s+/);f=f.filter(function(g){return g.indexOf("select2-")!==0});var p=h.concat(f);c.setAttribute("class",p.join(" "))},a}),s.define("select2/results",["jquery","./utils"],function(r,a){function o(l,u,c){this.$element=l,this.data=c,this.options=u,o.__super__.constructor.call(this)}return a.Extend(o,a.Observable),o.prototype.render=function(){var l=r('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&l.attr("aria-multiselectable","true"),this.$results=l,l},o.prototype.clear=function(){this.$results.empty()},o.prototype.displayMessage=function(l){var u=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var c=r('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),d=this.options.get("translations").get(l.message);c.append(u(d(l.args))),c[0].className+=" select2-results__message",this.$results.append(c)},o.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},o.prototype.append=function(l){this.hideLoading();var u=[];if(l.results==null||l.results.length===0){this.$results.children().length===0&&this.trigger("results:message",{message:"noResults"});return}l.results=this.sort(l.results);for(var c=0;c<l.results.length;c++){var d=l.results[c],h=this.option(d);u.push(h)}this.$results.append(u)},o.prototype.position=function(l,u){var c=u.find(".select2-results");c.append(l)},o.prototype.sort=function(l){var u=this.options.get("sorter");return u(l)},o.prototype.highlightFirstItem=function(){var l=this.$results.find(".select2-results__option--selectable"),u=l.filter(".select2-results__option--selected");u.length>0?u.first().trigger("mouseenter"):l.first().trigger("mouseenter"),this.ensureHighlightVisible()},o.prototype.setClasses=function(){var l=this;this.data.current(function(u){var c=u.map(function(h){return h.id.toString()}),d=l.$results.find(".select2-results__option--selectable");d.each(function(){var h=r(this),f=a.GetData(this,"data"),p=""+f.id;f.element!=null&&f.element.selected||f.element==null&&c.indexOf(p)>-1?(this.classList.add("select2-results__option--selected"),h.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),h.attr("aria-selected","false"))})})},o.prototype.showLoading=function(l){this.hideLoading();var u=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:u(l)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},o.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},o.prototype.option=function(l){var u=document.createElement("li");u.classList.add("select2-results__option"),u.classList.add("select2-results__option--selectable");var c={role:"option"},d=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;(l.element!=null&&d.call(l.element,":disabled")||l.element==null&&l.disabled)&&(c["aria-disabled"]="true",u.classList.remove("select2-results__option--selectable"),u.classList.add("select2-results__option--disabled")),l.id==null&&u.classList.remove("select2-results__option--selectable"),l._resultId!=null&&(u.id=l._resultId),l.title&&(u.title=l.title),l.children&&(c.role="group",c["aria-label"]=l.text,u.classList.remove("select2-results__option--selectable"),u.classList.add("select2-results__option--group"));for(var h in c){var f=c[h];u.setAttribute(h,f)}if(l.children){var p=r(u),g=document.createElement("strong");g.className="select2-results__group",this.template(l,g);for(var v=[],m=0;m<l.children.length;m++){var b=l.children[m],_=this.option(b);v.push(_)}var y=r("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});y.append(v),p.append(g),p.append(y)}else this.template(l,u);return a.StoreData(u,"data",l),u},o.prototype.bind=function(l,u){var c=this,d=l.id+"-results";this.$results.attr("id",d),l.on("results:all",function(h){c.clear(),c.append(h.data),l.isOpen()&&(c.setClasses(),c.highlightFirstItem())}),l.on("results:append",function(h){c.append(h.data),l.isOpen()&&c.setClasses()}),l.on("query",function(h){c.hideMessages(),c.showLoading(h)}),l.on("select",function(){l.isOpen()&&(c.setClasses(),c.options.get("scrollAfterSelect")&&c.highlightFirstItem())}),l.on("unselect",function(){l.isOpen()&&(c.setClasses(),c.options.get("scrollAfterSelect")&&c.highlightFirstItem())}),l.on("open",function(){c.$results.attr("aria-expanded","true"),c.$results.attr("aria-hidden","false"),c.setClasses(),c.ensureHighlightVisible()}),l.on("close",function(){c.$results.attr("aria-expanded","false"),c.$results.attr("aria-hidden","true"),c.$results.removeAttr("aria-activedescendant")}),l.on("results:toggle",function(){var h=c.getHighlightedResults();h.length!==0&&h.trigger("mouseup")}),l.on("results:select",function(){var h=c.getHighlightedResults();if(h.length!==0){var f=a.GetData(h[0],"data");h.hasClass("select2-results__option--selected")?c.trigger("close",{}):c.trigger("select",{data:f})}}),l.on("results:previous",function(){var h=c.getHighlightedResults(),f=c.$results.find(".select2-results__option--selectable"),p=f.index(h);if(!(p<=0)){var g=p-1;h.length===0&&(g=0);var v=f.eq(g);v.trigger("mouseenter");var m=c.$results.offset().top,b=v.offset().top,_=c.$results.scrollTop()+(b-m);g===0?c.$results.scrollTop(0):b-m<0&&c.$results.scrollTop(_)}}),l.on("results:next",function(){var h=c.getHighlightedResults(),f=c.$results.find(".select2-results__option--selectable"),p=f.index(h),g=p+1;if(!(g>=f.length)){var v=f.eq(g);v.trigger("mouseenter");var m=c.$results.offset().top+c.$results.outerHeight(!1),b=v.offset().top+v.outerHeight(!1),_=c.$results.scrollTop()+b-m;g===0?c.$results.scrollTop(0):b>m&&c.$results.scrollTop(_)}}),l.on("results:focus",function(h){h.element[0].classList.add("select2-results__option--highlighted"),h.element[0].setAttribute("aria-selected","true")}),l.on("results:message",function(h){c.displayMessage(h)}),r.fn.mousewheel&&this.$results.on("mousewheel",function(h){var f=c.$results.scrollTop(),p=c.$results.get(0).scrollHeight-f+h.deltaY,g=h.deltaY>0&&f-h.deltaY<=0,v=h.deltaY<0&&p<=c.$results.height();g?(c.$results.scrollTop(0),h.preventDefault(),h.stopPropagation()):v&&(c.$results.scrollTop(c.$results.get(0).scrollHeight-c.$results.height()),h.preventDefault(),h.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(h){var f=r(this),p=a.GetData(this,"data");if(f.hasClass("select2-results__option--selected")){c.options.get("multiple")?c.trigger("unselect",{originalEvent:h,data:p}):c.trigger("close",{});return}c.trigger("select",{originalEvent:h,data:p})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(h){var f=a.GetData(this,"data");c.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),c.trigger("results:focus",{data:f,element:r(this)})})},o.prototype.getHighlightedResults=function(){var l=this.$results.find(".select2-results__option--highlighted");return l},o.prototype.destroy=function(){this.$results.remove()},o.prototype.ensureHighlightVisible=function(){var l=this.getHighlightedResults();if(l.length!==0){var u=this.$results.find(".select2-results__option--selectable"),c=u.index(l),d=this.$results.offset().top,h=l.offset().top,f=this.$results.scrollTop()+(h-d),p=h-d;f-=l.outerHeight(!1)*2,c<=2?this.$results.scrollTop(0):(p>this.$results.outerHeight()||p<0)&&this.$results.scrollTop(f)}},o.prototype.template=function(l,u){var c=this.options.get("templateResult"),d=this.options.get("escapeMarkup"),h=c(l,u);h==null?u.style.display="none":typeof h=="string"?u.innerHTML=d(h):r(u).append(h)},o}),s.define("select2/keys",[],function(){var r={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return r}),s.define("select2/selection/base",["jquery","../utils","../keys"],function(r,a,o){function l(u,c){this.$element=u,this.options=c,l.__super__.constructor.call(this)}return a.Extend(l,a.Observable),l.prototype.render=function(){var u=r('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,a.GetData(this.$element[0],"old-tabindex")!=null?this._tabindex=a.GetData(this.$element[0],"old-tabindex"):this.$element.attr("tabindex")!=null&&(this._tabindex=this.$element.attr("tabindex")),u.attr("title",this.$element.attr("title")),u.attr("tabindex",this._tabindex),u.attr("aria-disabled","false"),this.$selection=u,u},l.prototype.bind=function(u,c){var d=this,h=u.id+"-results";this.container=u,this.$selection.on("focus",function(f){d.trigger("focus",f)}),this.$selection.on("blur",function(f){d._handleBlur(f)}),this.$selection.on("keydown",function(f){d.trigger("keypress",f),f.which===o.SPACE&&f.preventDefault()}),u.on("results:focus",function(f){d.$selection.attr("aria-activedescendant",f.data._resultId)}),u.on("selection:update",function(f){d.update(f.data)}),u.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",h),d._attachCloseHandler(u)}),u.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.trigger("focus"),d._detachCloseHandler(u)}),u.on("enable",function(){d.$selection.attr("tabindex",d._tabindex),d.$selection.attr("aria-disabled","false")}),u.on("disable",function(){d.$selection.attr("tabindex","-1"),d.$selection.attr("aria-disabled","true")})},l.prototype._handleBlur=function(u){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||r.contains(c.$selection[0],document.activeElement)||c.trigger("blur",u)},1)},l.prototype._attachCloseHandler=function(u){r(document.body).on("mousedown.select2."+u.id,function(c){var d=r(c.target),h=d.closest(".select2"),f=r(".select2.select2-container--open");f.each(function(){if(this!=h[0]){var p=a.GetData(this,"element");p.select2("close")}})})},l.prototype._detachCloseHandler=function(u){r(document.body).off("mousedown.select2."+u.id)},l.prototype.position=function(u,c){var d=c.find(".selection");d.append(u)},l.prototype.destroy=function(){this._detachCloseHandler(this.container)},l.prototype.update=function(u){throw new Error("The `update` method must be defined in child classes.")},l.prototype.isEnabled=function(){return!this.isDisabled()},l.prototype.isDisabled=function(){return this.options.get("disabled")},l}),s.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(r,a,o,l){function u(){u.__super__.constructor.apply(this,arguments)}return o.Extend(u,a),u.prototype.render=function(){var c=u.__super__.render.call(this);return c[0].classList.add("select2-selection--single"),c.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),c},u.prototype.bind=function(c,d){var h=this;u.__super__.bind.apply(this,arguments);var f=c.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",f).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",f),this.$selection.attr("aria-controls",f),this.$selection.on("mousedown",function(p){p.which===1&&h.trigger("toggle",{originalEvent:p})}),this.$selection.on("focus",function(p){}),this.$selection.on("blur",function(p){}),c.on("focus",function(p){c.isOpen()||h.$selection.trigger("focus")})},u.prototype.clear=function(){var c=this.$selection.find(".select2-selection__rendered");c.empty(),c.removeAttr("title")},u.prototype.display=function(c,d){var h=this.options.get("templateSelection"),f=this.options.get("escapeMarkup");return f(h(c,d))},u.prototype.selectionContainer=function(){return r("<span></span>")},u.prototype.update=function(c){if(c.length===0){this.clear();return}var d=c[0],h=this.$selection.find(".select2-selection__rendered"),f=this.display(d,h);h.empty().append(f);var p=d.title||d.text;p?h.attr("title",p):h.removeAttr("title")},u}),s.define("select2/selection/multiple",["jquery","./base","../utils"],function(r,a,o){function l(u,c){l.__super__.constructor.apply(this,arguments)}return o.Extend(l,a),l.prototype.render=function(){var u=l.__super__.render.call(this);return u[0].classList.add("select2-selection--multiple"),u.html('<ul class="select2-selection__rendered"></ul>'),u},l.prototype.bind=function(u,c){var d=this;l.__super__.bind.apply(this,arguments);var h=u.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",h),this.$selection.on("click",function(f){d.trigger("toggle",{originalEvent:f})}),this.$selection.on("click",".select2-selection__choice__remove",function(f){if(!d.isDisabled()){var p=r(this),g=p.parent(),v=o.GetData(g[0],"data");d.trigger("unselect",{originalEvent:f,data:v})}}),this.$selection.on("keydown",".select2-selection__choice__remove",function(f){d.isDisabled()||f.stopPropagation()})},l.prototype.clear=function(){var u=this.$selection.find(".select2-selection__rendered");u.empty(),u.removeAttr("title")},l.prototype.display=function(u,c){var d=this.options.get("templateSelection"),h=this.options.get("escapeMarkup");return h(d(u,c))},l.prototype.selectionContainer=function(){var u=r('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>');return u},l.prototype.update=function(u){if(this.clear(),u.length!==0){for(var c=[],d=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",h=0;h<u.length;h++){var f=u[h],p=this.selectionContainer(),g=this.display(f,p),v=d+o.generateChars(4)+"-";f.id?v+=f.id:v+=o.generateChars(4),p.find(".select2-selection__choice__display").append(g).attr("id",v);var m=f.title||f.text;m&&p.attr("title",m);var b=this.options.get("translations").get("removeItem"),_=p.find(".select2-selection__choice__remove");_.attr("title",b()),_.attr("aria-label",b()),_.attr("aria-describedby",v),o.StoreData(p[0],"data",f),c.push(p)}var y=this.$selection.find(".select2-selection__rendered");y.append(c)}},l}),s.define("select2/selection/placeholder",[],function(){function r(a,o,l){this.placeholder=this.normalizePlaceholder(l.get("placeholder")),a.call(this,o,l)}return r.prototype.normalizePlaceholder=function(a,o){return typeof o=="string"&&(o={id:"",text:o}),o},r.prototype.createPlaceholder=function(a,o){var l=this.selectionContainer();l.html(this.display(o)),l[0].classList.add("select2-selection__placeholder"),l[0].classList.remove("select2-selection__choice");var u=o.title||o.text||l.text();return this.$selection.find(".select2-selection__rendered").attr("title",u),l},r.prototype.update=function(a,o){var l=o.length==1&&o[0].id!=this.placeholder.id,u=o.length>1;if(u||l)return a.call(this,o);this.clear();var c=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(c)},r}),s.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(r,a,o){function l(){}return l.prototype.bind=function(u,c,d){var h=this;u.call(this,c,d),this.placeholder==null&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(f){h._handleClear(f)}),c.on("keypress",function(f){h._handleKeyboardClear(f,c)})},l.prototype._handleClear=function(u,c){if(!this.isDisabled()){var d=this.$selection.find(".select2-selection__clear");if(d.length!==0){c.stopPropagation();var h=o.GetData(d[0],"data"),f=this.$element.val();this.$element.val(this.placeholder.id);var p={data:h};if(this.trigger("clear",p),p.prevented){this.$element.val(f);return}for(var g=0;g<h.length;g++)if(p={data:h[g]},this.trigger("unselect",p),p.prevented){this.$element.val(f);return}this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}},l.prototype._handleKeyboardClear=function(u,c,d){d.isOpen()||(c.which==a.DELETE||c.which==a.BACKSPACE)&&this._handleClear(c)},l.prototype.update=function(u,c){if(u.call(this,c),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||c.length===0)){var d=this.$selection.find(".select2-selection__rendered").attr("id"),h=this.options.get("translations").get("removeAllItems"),f=r('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');f.attr("title",h()),f.attr("aria-label",h()),f.attr("aria-describedby",d),o.StoreData(f[0],"data",c),this.$selection.prepend(f),this.$selection[0].classList.add("select2-selection--clearable")}},l}),s.define("select2/selection/search",["jquery","../utils","../keys"],function(r,a,o){function l(u,c,d){u.call(this,c,d)}return l.prototype.render=function(u){var c=this.options.get("translations").get("search"),d=r('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=d,this.$search=d.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",c());var h=u.call(this);return this._transferTabIndex(),h.append(this.$searchContainer),h},l.prototype.bind=function(u,c,d){var h=this,f=c.id+"-results",p=c.id+"-container";u.call(this,c,d),h.$search.attr("aria-describedby",p),c.on("open",function(){h.$search.attr("aria-controls",f),h.$search.trigger("focus")}),c.on("close",function(){h.$search.val(""),h.resizeSearch(),h.$search.removeAttr("aria-controls"),h.$search.removeAttr("aria-activedescendant"),h.$search.trigger("focus")}),c.on("enable",function(){h.$search.prop("disabled",!1),h._transferTabIndex()}),c.on("disable",function(){h.$search.prop("disabled",!0)}),c.on("focus",function(m){h.$search.trigger("focus")}),c.on("results:focus",function(m){m.data._resultId?h.$search.attr("aria-activedescendant",m.data._resultId):h.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(m){h.trigger("focus",m)}),this.$selection.on("focusout",".select2-search--inline",function(m){h._handleBlur(m)}),this.$selection.on("keydown",".select2-search--inline",function(m){m.stopPropagation(),h.trigger("keypress",m),h._keyUpPrevented=m.isDefaultPrevented();var b=m.which;if(b===o.BACKSPACE&&h.$search.val()===""){var _=h.$selection.find(".select2-selection__choice").last();if(_.length>0){var y=a.GetData(_[0],"data");h.searchRemoveChoice(y),m.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(m){h.$search.val()&&m.stopPropagation()});var g=document.documentMode,v=g&&g<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(m){if(v){h.$selection.off("input.search input.searchcheck");return}h.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(m){if(v&&m.type==="input"){h.$selection.off("input.search input.searchcheck");return}var b=m.which;b==o.SHIFT||b==o.CTRL||b==o.ALT||b!=o.TAB&&h.handleSearch(m)})},l.prototype._transferTabIndex=function(u){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},l.prototype.createPlaceholder=function(u,c){this.$search.attr("placeholder",c.text)},l.prototype.update=function(u,c){var d=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),u.call(this,c),this.resizeSearch(),d&&this.$search.trigger("focus")},l.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var u=this.$search.val();this.trigger("query",{term:u})}this._keyUpPrevented=!1},l.prototype.searchRemoveChoice=function(u,c){this.trigger("unselect",{data:c}),this.$search.val(c.text),this.handleSearch()},l.prototype.resizeSearch=function(){this.$search.css("width","25px");var u="100%";if(this.$search.attr("placeholder")===""){var c=this.$search.val().length+1;u=c*.75+"em"}this.$search.css("width",u)},l}),s.define("select2/selection/selectionCss",["../utils"],function(r){function a(){}return a.prototype.render=function(o){var l=o.call(this),u=this.options.get("selectionCssClass")||"";return u.indexOf(":all:")!==-1&&(u=u.replace(":all:",""),r.copyNonInternalCssClasses(l[0],this.$element[0])),l.addClass(u),l},a}),s.define("select2/selection/eventRelay",["jquery"],function(r){function a(){}return a.prototype.bind=function(o,l,u){var c=this,d=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],h=["opening","closing","selecting","unselecting","clearing"];o.call(this,l,u),l.on("*",function(f,p){if(d.indexOf(f)!==-1){p=p||{};var g=r.Event("select2:"+f,{params:p});c.$element.trigger(g),h.indexOf(f)!==-1&&(p.prevented=g.isDefaultPrevented())}})},a}),s.define("select2/translation",["jquery","require"],function(r,a){function o(l){this.dict=l||{}}return o.prototype.all=function(){return this.dict},o.prototype.get=function(l){return this.dict[l]},o.prototype.extend=function(l){this.dict=r.extend({},l.all(),this.dict)},o._cache={},o.loadPath=function(l){if(!(l in o._cache)){var u=a(l);o._cache[l]=u}return new o(o._cache[l])},o}),s.define("select2/diacritics",[],function(){var r={"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A","":"A","":"A","":"AA",:"AE",:"AE",:"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B",:"B",:"B",:"B",:"B","":"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"C","":"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D","":"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F","":"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"G","":"G","":"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"H","":"H","":"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J","":"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"K","":"K","":"K","":"K","":"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L","":"L","":"L","":"L","":"L","":"L","":"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M","":"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N","":"N",:"N","":"N","":"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O","":"O","":"O",:"OE",:"OI","":"OO",:"OU","":"P",:"P",:"P",:"P",:"P","":"P","":"P","":"P","":"P","":"Q",:"Q","":"Q","":"Q","":"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"R","":"R","":"R","":"R","":"R","":"S",:"S","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"S","":"S","":"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T","":"T","":"T","":"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"U","":"V",:"V",:"V",:"V",:"V","":"V","":"V","":"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Y","":"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"Z","":"Z","":"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a","":"a",:"a","":"aa",:"ae",:"ae",:"ae","":"ao","":"au","":"av","":"av","":"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"c","":"c","":"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d","":"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"e",:"e",:"e","":"f",:"f",:"f",:"f","":"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"g","":"g","":"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h","":"h","":"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j","":"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"k","":"k","":"k","":"k","":"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l","":"l","":"l","":"l","":"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n","":"n","":"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o","":"o","":"o",:"o",:"oe",:"oi",:"ou","":"oo","":"p",:"p",:"p",:"p",:"p","":"p","":"p","":"p","":"p","":"q",:"q","":"q","":"q","":"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"r",:"r","":"r","":"r","":"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"s","":"s","":"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t","":"t","":"t","":"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v","":"v",:"v","":"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"y","":"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z","":"z","":"z","":"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"'"};return r}),s.define("select2/data/base",["../utils"],function(r){function a(o,l){a.__super__.constructor.call(this)}return r.Extend(a,r.Observable),a.prototype.current=function(o){throw new Error("The `current` method must be defined in child classes.")},a.prototype.query=function(o,l){throw new Error("The `query` method must be defined in child classes.")},a.prototype.bind=function(o,l){},a.prototype.destroy=function(){},a.prototype.generateResultId=function(o,l){var u=o.id+"-result-";return u+=r.generateChars(4),l.id!=null?u+="-"+l.id.toString():u+="-"+r.generateChars(4),u},a}),s.define("select2/data/select",["./base","../utils","jquery"],function(r,a,o){function l(u,c){this.$element=u,this.options=c,l.__super__.constructor.call(this)}return a.Extend(l,r),l.prototype.current=function(u){var c=this,d=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(h){return c.item(o(h))});u(d)},l.prototype.select=function(u){var c=this;if(u.selected=!0,u.element!=null&&u.element.tagName.toLowerCase()==="option"){u.element.selected=!0,this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple"))this.current(function(h){var f=[];u=[u],u.push.apply(u,h);for(var p=0;p<u.length;p++){var g=u[p].id;f.indexOf(g)===-1&&f.push(g)}c.$element.val(f),c.$element.trigger("input").trigger("change")});else{var d=u.id;this.$element.val(d),this.$element.trigger("input").trigger("change")}},l.prototype.unselect=function(u){var c=this;if(this.$element.prop("multiple")){if(u.selected=!1,u.element!=null&&u.element.tagName.toLowerCase()==="option"){u.element.selected=!1,this.$element.trigger("input").trigger("change");return}this.current(function(d){for(var h=[],f=0;f<d.length;f++){var p=d[f].id;p!==u.id&&h.indexOf(p)===-1&&h.push(p)}c.$element.val(h),c.$element.trigger("input").trigger("change")})}},l.prototype.bind=function(u,c){var d=this;this.container=u,u.on("select",function(h){d.select(h.data)}),u.on("unselect",function(h){d.unselect(h.data)})},l.prototype.destroy=function(){this.$element.find("*").each(function(){a.RemoveData(this)})},l.prototype.query=function(u,c){var d=[],h=this,f=this.$element.children();f.each(function(){if(!(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup")){var p=o(this),g=h.item(p),v=h.matches(u,g);v!==null&&d.push(v)}}),c({results:d})},l.prototype.addOptions=function(u){this.$element.append(u)},l.prototype.option=function(u){var c;u.children?(c=document.createElement("optgroup"),c.label=u.text):(c=document.createElement("option"),c.textContent!==void 0?c.textContent=u.text:c.innerText=u.text),u.id!==void 0&&(c.value=u.id),u.disabled&&(c.disabled=!0),u.selected&&(c.selected=!0),u.title&&(c.title=u.title);var d=this._normalizeItem(u);return d.element=c,a.StoreData(c,"data",d),o(c)},l.prototype.item=function(u){var c={};if(c=a.GetData(u[0],"data"),c!=null)return c;var d=u[0];if(d.tagName.toLowerCase()==="option")c={id:u.val(),text:u.text(),disabled:u.prop("disabled"),selected:u.prop("selected"),title:u.prop("title")};else if(d.tagName.toLowerCase()==="optgroup"){c={text:u.prop("label"),children:[],title:u.prop("title")};for(var h=u.children("option"),f=[],p=0;p<h.length;p++){var g=o(h[p]),v=this.item(g);f.push(v)}c.children=f}return c=this._normalizeItem(c),c.element=u[0],a.StoreData(u[0],"data",c),c},l.prototype._normalizeItem=function(u){u!==Object(u)&&(u={id:u,text:u}),u=o.extend({},{text:""},u);var c={selected:!1,disabled:!1};return u.id!=null&&(u.id=u.id.toString()),u.text!=null&&(u.text=u.text.toString()),u._resultId==null&&u.id&&this.container!=null&&(u._resultId=this.generateResultId(this.container,u)),o.extend({},c,u)},l.prototype.matches=function(u,c){var d=this.options.get("matcher");return d(u,c)},l}),s.define("select2/data/array",["./select","../utils","jquery"],function(r,a,o){function l(u,c){this._dataToConvert=c.get("data")||[],l.__super__.constructor.call(this,u,c)}return a.Extend(l,r),l.prototype.bind=function(u,c){l.__super__.bind.call(this,u,c),this.addOptions(this.convertToOptions(this._dataToConvert))},l.prototype.select=function(u){var c=this.$element.find("option").filter(function(d,h){return h.value==u.id.toString()});c.length===0&&(c=this.option(u),this.addOptions(c)),l.__super__.select.call(this,u)},l.prototype.convertToOptions=function(u){var c=this,d=this.$element.find("option"),h=d.map(function(){return c.item(o(this)).id}).get(),f=[];function p(S){return function(){return o(this).val()==S.id}}for(var g=0;g<u.length;g++){var v=this._normalizeItem(u[g]);if(h.indexOf(v.id)>=0){var m=d.filter(p(v)),b=this.item(m),_=o.extend(!0,{},v,b),y=this.option(_);m.replaceWith(y);continue}var M=this.option(v);if(v.children){var x=this.convertToOptions(v.children);M.append(x)}f.push(M)}return f},l}),s.define("select2/data/ajax",["./array","../utils","jquery"],function(r,a,o){function l(u,c){this.ajaxOptions=this._applyDefaults(c.get("ajax")),this.ajaxOptions.processResults!=null&&(this.processResults=this.ajaxOptions.processResults),l.__super__.constructor.call(this,u,c)}return a.Extend(l,r),l.prototype._applyDefaults=function(u){var c={data:function(d){return o.extend({},d,{q:d.term})},transport:function(d,h,f){var p=o.ajax(d);return p.then(h),p.fail(f),p}};return o.extend({},c,u,!0)},l.prototype.processResults=function(u){return u},l.prototype.query=function(u,c){var d=this;this._request!=null&&(typeof this._request.abort=="function"&&this._request.abort(),this._request=null);var h=o.extend({type:"GET"},this.ajaxOptions);typeof h.url=="function"&&(h.url=h.url.call(this.$element,u)),typeof h.data=="function"&&(h.data=h.data.call(this.$element,u));function f(){var p=h.transport(h,function(g){var v=d.processResults(g,u);d.options.get("debug")&&window.console&&console.error&&(!v||!v.results||!Array.isArray(v.results))&&console.error("Select2: The AJAX results did not return an array in the `results` key of the response."),c(v)},function(){"status"in p&&(p.status===0||p.status==="0")||d.trigger("results:message",{message:"errorLoading"})});d._request=p}this.ajaxOptions.delay&&u.term!=null?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},l}),s.define("select2/data/tags",["jquery"],function(r){function a(o,l,u){var c=u.get("tags"),d=u.get("createTag");d!==void 0&&(this.createTag=d);var h=u.get("insertTag");if(h!==void 0&&(this.insertTag=h),o.call(this,l,u),Array.isArray(c))for(var f=0;f<c.length;f++){var p=c[f],g=this._normalizeItem(p),v=this.option(g);this.$element.append(v)}}return a.prototype.query=function(o,l,u){var c=this;if(this._removeOldTags(),l.term==null||l.page!=null){o.call(this,l,u);return}function d(h,f){for(var p=h.results,g=0;g<p.length;g++){var v=p[g],m=v.children!=null&&!d({results:v.children},!0),b=(v.text||"").toUpperCase(),_=(l.term||"").toUpperCase(),y=b===_;if(y||m){if(f)return!1;h.data=p,u(h);return}}if(f)return!0;var M=c.createTag(l);if(M!=null){var x=c.option(M);x.attr("data-select2-tag","true"),c.addOptions([x]),c.insertTag(p,M)}h.results=p,u(h)}o.call(this,l,d)},a.prototype.createTag=function(o,l){if(l.term==null)return null;var u=l.term.trim();return u===""?null:{id:u,text:u}},a.prototype.insertTag=function(o,l,u){l.unshift(u)},a.prototype._removeOldTags=function(o){var l=this.$element.find("option[data-select2-tag]");l.each(function(){this.selected||r(this).remove()})},a}),s.define("select2/data/tokenizer",["jquery"],function(r){function a(o,l,u){var c=u.get("tokenizer");c!==void 0&&(this.tokenizer=c),o.call(this,l,u)}return a.prototype.bind=function(o,l,u){o.call(this,l,u),this.$search=l.dropdown.$search||l.selection.$search||u.find(".select2-search__field")},a.prototype.query=function(o,l,u){var c=this;function d(p){var g=c._normalizeItem(p),v=c.$element.find("option").filter(function(){return r(this).val()===g.id});if(!v.length){var m=c.option(g);m.attr("data-select2-tag",!0),c._removeOldTags(),c.addOptions([m])}h(g)}function h(p){c.trigger("select",{data:p})}l.term=l.term||"";var f=this.tokenizer(l,this.options,d);f.term!==l.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.trigger("focus")),l.term=f.term),o.call(this,l,u)},a.prototype.tokenizer=function(o,l,u,c){for(var d=u.get("tokenSeparators")||[],h=l.term,f=0,p=this.createTag||function(_){return{id:_.term,text:_.term}};f<h.length;){var g=h[f];if(d.indexOf(g)===-1){f++;continue}var v=h.substr(0,f),m=r.extend({},l,{term:v}),b=p(m);if(b==null){f++;continue}c(b),h=h.substr(f+1)||"",f=0}return{term:h}},a}),s.define("select2/data/minimumInputLength",[],function(){function r(a,o,l){this.minimumInputLength=l.get("minimumInputLength"),a.call(this,o,l)}return r.prototype.query=function(a,o,l){if(o.term=o.term||"",o.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:o.term,params:o}});return}a.call(this,o,l)},r}),s.define("select2/data/maximumInputLength",[],function(){function r(a,o,l){this.maximumInputLength=l.get("maximumInputLength"),a.call(this,o,l)}return r.prototype.query=function(a,o,l){if(o.term=o.term||"",this.maximumInputLength>0&&o.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:o.term,params:o}});return}a.call(this,o,l)},r}),s.define("select2/data/maximumSelectionLength",[],function(){function r(a,o,l){this.maximumSelectionLength=l.get("maximumSelectionLength"),a.call(this,o,l)}return r.prototype.bind=function(a,o,l){var u=this;a.call(this,o,l),o.on("select",function(){u._checkIfMaximumSelected()})},r.prototype.query=function(a,o,l){var u=this;this._checkIfMaximumSelected(function(){a.call(u,o,l)})},r.prototype._checkIfMaximumSelected=function(a,o){var l=this;this.current(function(u){var c=u!=null?u.length:0;if(l.maximumSelectionLength>0&&c>=l.maximumSelectionLength){l.trigger("results:message",{message:"maximumSelected",args:{maximum:l.maximumSelectionLength}});return}o&&o()})},r}),s.define("select2/dropdown",["jquery","./utils"],function(r,a){function o(l,u){this.$element=l,this.options=u,o.__super__.constructor.call(this)}return a.Extend(o,a.Observable),o.prototype.render=function(){var l=r('<span class="select2-dropdown"><span class="select2-results"></span></span>');return l.attr("dir",this.options.get("dir")),this.$dropdown=l,l},o.prototype.bind=function(){},o.prototype.position=function(l,u){},o.prototype.destroy=function(){this.$dropdown.remove()},o}),s.define("select2/dropdown/search",["jquery"],function(r){function a(){}return a.prototype.render=function(o){var l=o.call(this),u=this.options.get("translations").get("search"),c=r('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=c,this.$search=c.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",u()),l.prepend(c),l},a.prototype.bind=function(o,l,u){var c=this,d=l.id+"-results";o.call(this,l,u),this.$search.on("keydown",function(h){c.trigger("keypress",h),c._keyUpPrevented=h.isDefaultPrevented()}),this.$search.on("input",function(h){r(this).off("keyup")}),this.$search.on("keyup input",function(h){c.handleSearch(h)}),l.on("open",function(){c.$search.attr("tabindex",0),c.$search.attr("aria-controls",d),c.$search.trigger("focus"),window.setTimeout(function(){c.$search.trigger("focus")},0)}),l.on("close",function(){c.$search.attr("tabindex",-1),c.$search.removeAttr("aria-controls"),c.$search.removeAttr("aria-activedescendant"),c.$search.val(""),c.$search.trigger("blur")}),l.on("focus",function(){l.isOpen()||c.$search.trigger("focus")}),l.on("results:all",function(h){if(h.query.term==null||h.query.term===""){var f=c.showSearch(h);f?c.$searchContainer[0].classList.remove("select2-search--hide"):c.$searchContainer[0].classList.add("select2-search--hide")}}),l.on("results:focus",function(h){h.data._resultId?c.$search.attr("aria-activedescendant",h.data._resultId):c.$search.removeAttr("aria-activedescendant")})},a.prototype.handleSearch=function(o){if(!this._keyUpPrevented){var l=this.$search.val();this.trigger("query",{term:l})}this._keyUpPrevented=!1},a.prototype.showSearch=function(o,l){return!0},a}),s.define("select2/dropdown/hidePlaceholder",[],function(){function r(a,o,l,u){this.placeholder=this.normalizePlaceholder(l.get("placeholder")),a.call(this,o,l,u)}return r.prototype.append=function(a,o){o.results=this.removePlaceholder(o.results),a.call(this,o)},r.prototype.normalizePlaceholder=function(a,o){return typeof o=="string"&&(o={id:"",text:o}),o},r.prototype.removePlaceholder=function(a,o){for(var l=o.slice(0),u=o.length-1;u>=0;u--){var c=o[u];this.placeholder.id===c.id&&l.splice(u,1)}return l},r}),s.define("select2/dropdown/infiniteScroll",["jquery"],function(r){function a(o,l,u,c){this.lastParams={},o.call(this,l,u,c),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return a.prototype.append=function(o,l){this.$loadingMore.remove(),this.loading=!1,o.call(this,l),this.showLoadingMore(l)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},a.prototype.bind=function(o,l,u){var c=this;o.call(this,l,u),l.on("query",function(d){c.lastParams=d,c.loading=!0}),l.on("query:append",function(d){c.lastParams=d,c.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},a.prototype.loadMoreIfNeeded=function(){var o=r.contains(document.documentElement,this.$loadingMore[0]);if(!(this.loading||!o)){var l=this.$results.offset().top+this.$results.outerHeight(!1),u=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1);l+50>=u&&this.loadMore()}},a.prototype.loadMore=function(){this.loading=!0;var o=r.extend({},{page:1},this.lastParams);o.page++,this.trigger("query:append",o)},a.prototype.showLoadingMore=function(o,l){return l.pagination&&l.pagination.more},a.prototype.createLoadingMore=function(){var o=r('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),l=this.options.get("translations").get("loadingMore");return o.html(l(this.lastParams)),o},a}),s.define("select2/dropdown/attachBody",["jquery","../utils"],function(r,a){function o(l,u,c){this.$dropdownParent=r(c.get("dropdownParent")||document.body),l.call(this,u,c)}return o.prototype.bind=function(l,u,c){var d=this;l.call(this,u,c),u.on("open",function(){d._showDropdown(),d._attachPositioningHandler(u),d._bindContainerResultHandlers(u)}),u.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(u)}),this.$dropdownContainer.on("mousedown",function(h){h.stopPropagation()})},o.prototype.destroy=function(l){l.call(this),this.$dropdownContainer.remove()},o.prototype.position=function(l,u,c){u.attr("class",c.attr("class")),u[0].classList.remove("select2"),u[0].classList.add("select2-container--open"),u.css({position:"absolute",top:-999999}),this.$container=c},o.prototype.render=function(l){var u=r("<span></span>"),c=l.call(this);return u.append(c),this.$dropdownContainer=u,u},o.prototype._hideDropdown=function(l){this.$dropdownContainer.detach()},o.prototype._bindContainerResultHandlers=function(l,u){if(!this._containerResultsHandlersBound){var c=this;u.on("results:all",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("results:append",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("results:message",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("select",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("unselect",function(){c._positionDropdown(),c._resizeDropdown()}),this._containerResultsHandlersBound=!0}},o.prototype._attachPositioningHandler=function(l,u){var c=this,d="scroll.select2."+u.id,h="resize.select2."+u.id,f="orientationchange.select2."+u.id,p=this.$container.parents().filter(a.hasScroll);p.each(function(){a.StoreData(this,"select2-scroll-position",{x:r(this).scrollLeft(),y:r(this).scrollTop()})}),p.on(d,function(g){var v=a.GetData(this,"select2-scroll-position");r(this).scrollTop(v.y)}),r(window).on(d+" "+h+" "+f,function(g){c._positionDropdown(),c._resizeDropdown()})},o.prototype._detachPositioningHandler=function(l,u){var c="scroll.select2."+u.id,d="resize.select2."+u.id,h="orientationchange.select2."+u.id,f=this.$container.parents().filter(a.hasScroll);f.off(c),r(window).off(c+" "+d+" "+h)},o.prototype._positionDropdown=function(){var l=r(window),u=this.$dropdown[0].classList.contains("select2-dropdown--above"),c=this.$dropdown[0].classList.contains("select2-dropdown--below"),d=null,h=this.$container.offset();h.bottom=h.top+this.$container.outerHeight(!1);var f={height:this.$container.outerHeight(!1)};f.top=h.top,f.bottom=h.top+f.height;var p={height:this.$dropdown.outerHeight(!1)},g={top:l.scrollTop(),bottom:l.scrollTop()+l.height()},v=g.top<h.top-p.height,m=g.bottom>h.bottom+p.height,b={left:h.left,top:f.bottom},_=this.$dropdownParent;_.css("position")==="static"&&(_=_.offsetParent());var y={top:0,left:0};(r.contains(document.body,_[0])||_[0].isConnected)&&(y=_.offset()),b.top-=y.top,b.left-=y.left,!u&&!c&&(d="below"),!m&&v&&!u?d="above":!v&&m&&u&&(d="below"),(d=="above"||u&&d!=="below")&&(b.top=f.top-y.top-p.height),d!=null&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+d),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+d)),this.$dropdownContainer.css(b)},o.prototype._resizeDropdown=function(){var l={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(l.minWidth=l.width,l.position="relative",l.width="auto"),this.$dropdown.css(l)},o.prototype._showDropdown=function(l){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},o}),s.define("select2/dropdown/minimumResultsForSearch",[],function(){function r(o){for(var l=0,u=0;u<o.length;u++){var c=o[u];c.children?l+=r(c.children):l++}return l}function a(o,l,u,c){this.minimumResultsForSearch=u.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),o.call(this,l,u,c)}return a.prototype.showSearch=function(o,l){return r(l.data.results)<this.minimumResultsForSearch?!1:o.call(this,l)},a}),s.define("select2/dropdown/selectOnClose",["../utils"],function(r){function a(){}return a.prototype.bind=function(o,l,u){var c=this;o.call(this,l,u),l.on("close",function(d){c._handleSelectOnClose(d)})},a.prototype._handleSelectOnClose=function(o,l){if(l&&l.originalSelect2Event!=null){var u=l.originalSelect2Event;if(u._type==="select"||u._type==="unselect")return}var c=this.getHighlightedResults();if(!(c.length<1)){var d=r.GetData(c[0],"data");d.element!=null&&d.element.selected||d.element==null&&d.selected||this.trigger("select",{data:d})}},a}),s.define("select2/dropdown/closeOnSelect",[],function(){function r(){}return r.prototype.bind=function(a,o,l){var u=this;a.call(this,o,l),o.on("select",function(c){u._selectTriggered(c)}),o.on("unselect",function(c){u._selectTriggered(c)})},r.prototype._selectTriggered=function(a,o){var l=o.originalEvent;l&&(l.ctrlKey||l.metaKey)||this.trigger("close",{originalEvent:l,originalSelect2Event:o})},r}),s.define("select2/dropdown/dropdownCss",["../utils"],function(r){function a(){}return a.prototype.render=function(o){var l=o.call(this),u=this.options.get("dropdownCssClass")||"";return u.indexOf(":all:")!==-1&&(u=u.replace(":all:",""),r.copyNonInternalCssClasses(l[0],this.$element[0])),l.addClass(u),l},a}),s.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(r){function a(){}return a.prototype.highlightFirstItem=function(o){var l=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(l.length>0){var u=l.first(),c=r.GetData(u[0],"data"),d=c.element;if(d&&d.getAttribute&&d.getAttribute("data-select2-tag")==="true"){u.trigger("mouseenter");return}}o.call(this)},a}),s.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(r){var a=r.input.length-r.maximum,o="Please delete "+a+" character";return a!=1&&(o+="s"),o},inputTooShort:function(r){var a=r.minimum-r.input.length,o="Please enter "+a+" or more characters";return o},loadingMore:function(){return"Loading more results"},maximumSelected:function(r){var a="You can only select "+r.maximum+" item";return r.maximum!=1&&(a+="s"),a},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),s.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(r,a,o,l,u,c,d,h,f,p,g,v,m,b,_,y,M,x,S,A,E,w,C,P,T,R,F,z,D,O,j){function k(){this.reset()}k.prototype.apply=function(U){if(U=r.extend(!0,{},this.defaults,U),U.dataAdapter==null&&(U.ajax!=null?U.dataAdapter=_:U.data!=null?U.dataAdapter=b:U.dataAdapter=m,U.minimumInputLength>0&&(U.dataAdapter=p.Decorate(U.dataAdapter,x)),U.maximumInputLength>0&&(U.dataAdapter=p.Decorate(U.dataAdapter,S)),U.maximumSelectionLength>0&&(U.dataAdapter=p.Decorate(U.dataAdapter,A)),U.tags&&(U.dataAdapter=p.Decorate(U.dataAdapter,y)),(U.tokenSeparators!=null||U.tokenizer!=null)&&(U.dataAdapter=p.Decorate(U.dataAdapter,M))),U.resultsAdapter==null&&(U.resultsAdapter=a,U.ajax!=null&&(U.resultsAdapter=p.Decorate(U.resultsAdapter,P)),U.placeholder!=null&&(U.resultsAdapter=p.Decorate(U.resultsAdapter,C)),U.selectOnClose&&(U.resultsAdapter=p.Decorate(U.resultsAdapter,F)),U.tags&&(U.resultsAdapter=p.Decorate(U.resultsAdapter,O))),U.dropdownAdapter==null){if(U.multiple)U.dropdownAdapter=E;else{var B=p.Decorate(E,w);U.dropdownAdapter=B}U.minimumResultsForSearch!==0&&(U.dropdownAdapter=p.Decorate(U.dropdownAdapter,R)),U.closeOnSelect&&(U.dropdownAdapter=p.Decorate(U.dropdownAdapter,z)),U.dropdownCssClass!=null&&(U.dropdownAdapter=p.Decorate(U.dropdownAdapter,D)),U.dropdownAdapter=p.Decorate(U.dropdownAdapter,T)}U.selectionAdapter==null&&(U.multiple?U.selectionAdapter=l:U.selectionAdapter=o,U.placeholder!=null&&(U.selectionAdapter=p.Decorate(U.selectionAdapter,u)),U.allowClear&&(U.selectionAdapter=p.Decorate(U.selectionAdapter,c)),U.multiple&&(U.selectionAdapter=p.Decorate(U.selectionAdapter,d)),U.selectionCssClass!=null&&(U.selectionAdapter=p.Decorate(U.selectionAdapter,h)),U.selectionAdapter=p.Decorate(U.selectionAdapter,f)),U.language=this._resolveLanguage(U.language),U.language.push("en");for(var V=[],H=0;H<U.language.length;H++){var Y=U.language[H];V.indexOf(Y)===-1&&V.push(Y)}return U.language=V,U.translations=this._processTranslations(U.language,U.debug),U},k.prototype.reset=function(){function U(V){function H(Y){return v[Y]||Y}return V.replace(/[^\u0000-\u007E]/g,H)}function B(V,H){if(V.term==null||V.term.trim()==="")return H;if(H.children&&H.children.length>0){for(var Y=r.extend(!0,{},H),J=H.children.length-1;J>=0;J--){var ee=H.children[J],se=B(V,ee);se==null&&Y.children.splice(J,1)}return Y.children.length>0?Y:B(V,Y)}var ye=U(H.text).toUpperCase(),de=U(V.term).toUpperCase();return ye.indexOf(de)>-1?H:null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:p.escapeMarkup,language:{},matcher:B,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(V){return V},templateResult:function(V){return V.text},templateSelection:function(V){return V.text},theme:"default",width:"resolve"}},k.prototype.applyFromElement=function(U,B){var V=U.language,H=this.defaults.language,Y=B.prop("lang"),J=B.closest("[lang]").prop("lang"),ee=Array.prototype.concat.call(this._resolveLanguage(Y),this._resolveLanguage(V),this._resolveLanguage(H),this._resolveLanguage(J));return U.language=ee,U},k.prototype._resolveLanguage=function(U){if(!U)return[];if(r.isEmptyObject(U))return[];if(r.isPlainObject(U))return[U];var B;Array.isArray(U)?B=U:B=[U];for(var V=[],H=0;H<B.length;H++)if(V.push(B[H]),typeof B[H]=="string"&&B[H].indexOf("-")>0){var Y=B[H].split("-"),J=Y[0];V.push(J)}return V},k.prototype._processTranslations=function(U,B){for(var V=new g,H=0;H<U.length;H++){var Y=new g,J=U[H];if(typeof J=="string")try{Y=g.loadPath(J)}catch{try{J=this.defaults.amdLanguageBase+J,Y=g.loadPath(J)}catch{B&&window.console&&console.warn&&console.warn('Select2: The language file for "'+J+'" could not be automatically loaded. A fallback will be used instead.')}}else r.isPlainObject(J)?Y=new g(J):Y=J;V.extend(Y)}return V},k.prototype.set=function(U,B){var V=r.camelCase(U),H={};H[V]=B;var Y=p._convertData(H);r.extend(!0,this.defaults,Y)};var I=new k;return I}),s.define("select2/options",["jquery","./defaults","./utils"],function(r,a,o){function l(u,c){this.options=u,c!=null&&this.fromElement(c),c!=null&&(this.options=a.applyFromElement(this.options,c)),this.options=a.apply(this.options)}return l.prototype.fromElement=function(u){var c=["select2"];this.options.multiple==null&&(this.options.multiple=u.prop("multiple")),this.options.disabled==null&&(this.options.disabled=u.prop("disabled")),this.options.autocomplete==null&&u.prop("autocomplete")&&(this.options.autocomplete=u.prop("autocomplete")),this.options.dir==null&&(u.prop("dir")?this.options.dir=u.prop("dir"):u.closest("[dir]").prop("dir")?this.options.dir=u.closest("[dir]").prop("dir"):this.options.dir="ltr"),u.prop("disabled",this.options.disabled),u.prop("multiple",this.options.multiple),o.GetData(u[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),o.StoreData(u[0],"data",o.GetData(u[0],"select2Tags")),o.StoreData(u[0],"tags",!0)),o.GetData(u[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),u.attr("ajax--url",o.GetData(u[0],"ajaxUrl")),o.StoreData(u[0],"ajax-Url",o.GetData(u[0],"ajaxUrl")));var d={};function h(M,x){return x.toUpperCase()}for(var f=0;f<u[0].attributes.length;f++){var p=u[0].attributes[f].name,g="data-";if(p.substr(0,g.length)==g){var v=p.substring(g.length),m=o.GetData(u[0],v),b=v.replace(/-([a-z])/g,h);d[b]=m}}r.fn.jquery&&r.fn.jquery.substr(0,2)=="1."&&u[0].dataset&&(d=r.extend(!0,{},u[0].dataset,d));var _=r.extend(!0,{},o.GetData(u[0]),d);_=o._convertData(_);for(var y in _)c.indexOf(y)>-1||(r.isPlainObject(this.options[y])?r.extend(this.options[y],_[y]):this.options[y]=_[y]);return this},l.prototype.get=function(u){return this.options[u]},l.prototype.set=function(u,c){this.options[u]=c},l}),s.define("select2/core",["jquery","./options","./utils","./keys"],function(r,a,o,l){var u=function(c,d){o.GetData(c[0],"select2")!=null&&o.GetData(c[0],"select2").destroy(),this.$element=c,this.id=this._generateId(c),d=d||{},this.options=new a(d,c),u.__super__.constructor.call(this);var h=c.attr("tabindex")||0;o.StoreData(c[0],"old-tabindex",h),c.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(c,this.options);var p=this.render();this._placeContainer(p);var g=this.options.get("selectionAdapter");this.selection=new g(c,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,p);var v=this.options.get("dropdownAdapter");this.dropdown=new v(c,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,p);var m=this.options.get("resultsAdapter");this.results=new m(c,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var b=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(_){b.trigger("selection:update",{data:_})}),c[0].classList.add("select2-hidden-accessible"),c.attr("aria-hidden","true"),this._syncAttributes(),o.StoreData(c[0],"select2",this),c.data("select2",this)};return o.Extend(u,o.Observable),u.prototype._generateId=function(c){var d="";return c.attr("id")!=null?d=c.attr("id"):c.attr("name")!=null?d=c.attr("name")+"-"+o.generateChars(2):d=o.generateChars(4),d=d.replace(/(:|\.|\[|\]|,)/g,""),d="select2-"+d,d},u.prototype._placeContainer=function(c){c.insertAfter(this.$element);var d=this._resolveWidth(this.$element,this.options.get("width"));d!=null&&c.css("width",d)},u.prototype._resolveWidth=function(c,d){var h=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(d=="resolve"){var f=this._resolveWidth(c,"style");return f??this._resolveWidth(c,"element")}if(d=="element"){var p=c.outerWidth(!1);return p<=0?"auto":p+"px"}if(d=="style"){var g=c.attr("style");if(typeof g!="string")return null;for(var v=g.split(";"),m=0,b=v.length;m<b;m=m+1){var _=v[m].replace(/\s/g,""),y=_.match(h);if(y!==null&&y.length>=1)return y[1]}return null}if(d=="computedstyle"){var M=window.getComputedStyle(c[0]);return M.width}return d},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var c=this;this.$element.on("change.select2",function(){c.dataAdapter.current(function(d){c.trigger("selection:update",{data:d})})}),this.$element.on("focus.select2",function(d){c.trigger("focus",d)}),this._syncA=o.bind(this._syncAttributes,this),this._syncS=o.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(d){c._syncA(),c._syncS(d)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},u.prototype._registerDataEvents=function(){var c=this;this.dataAdapter.on("*",function(d,h){c.trigger(d,h)})},u.prototype._registerSelectionEvents=function(){var c=this,d=["toggle","focus"];this.selection.on("toggle",function(){c.toggleDropdown()}),this.selection.on("focus",function(h){c.focus(h)}),this.selection.on("*",function(h,f){d.indexOf(h)===-1&&c.trigger(h,f)})},u.prototype._registerDropdownEvents=function(){var c=this;this.dropdown.on("*",function(d,h){c.trigger(d,h)})},u.prototype._registerResultsEvents=function(){var c=this;this.results.on("*",function(d,h){c.trigger(d,h)})},u.prototype._registerEvents=function(){var c=this;this.on("open",function(){c.$container[0].classList.add("select2-container--open")}),this.on("close",function(){c.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){c.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){c.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){c.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(d){c.isOpen()||c.trigger("open",{}),this.dataAdapter.query(d,function(h){c.trigger("results:all",{data:h,query:d})})}),this.on("query:append",function(d){this.dataAdapter.query(d,function(h){c.trigger("results:append",{data:h,query:d})})}),this.on("keypress",function(d){var h=d.which;c.isOpen()?h===l.ESC||h===l.UP&&d.altKey?(c.close(d),d.preventDefault()):h===l.ENTER||h===l.TAB?(c.trigger("results:select",{}),d.preventDefault()):h===l.SPACE&&d.ctrlKey?(c.trigger("results:toggle",{}),d.preventDefault()):h===l.UP?(c.trigger("results:previous",{}),d.preventDefault()):h===l.DOWN&&(c.trigger("results:next",{}),d.preventDefault()):(h===l.ENTER||h===l.SPACE||h===l.DOWN&&d.altKey)&&(c.open(),d.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._isChangeMutation=function(c){var d=this;if(c.addedNodes&&c.addedNodes.length>0)for(var h=0;h<c.addedNodes.length;h++){var f=c.addedNodes[h];if(f.selected)return!0}else{if(c.removedNodes&&c.removedNodes.length>0)return!0;if(Array.isArray(c))return c.some(function(p){return d._isChangeMutation(p)})}return!1},u.prototype._syncSubtree=function(c){var d=this._isChangeMutation(c),h=this;d&&this.dataAdapter.current(function(f){h.trigger("selection:update",{data:f})})},u.prototype.trigger=function(c,d){var h=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(d===void 0&&(d={}),c in f){var p=f[c],g={prevented:!1,name:c,args:d};if(h.call(this,p,g),g.prevented){d.prevented=!0;return}}h.call(this,c,d)},u.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},u.prototype.close=function(c){this.isOpen()&&this.trigger("close",{originalEvent:c})},u.prototype.isEnabled=function(){return!this.isDisabled()},u.prototype.isDisabled=function(){return this.options.get("disabled")},u.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},u.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},u.prototype.focus=function(c){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(c){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(c==null||c.length===0)&&(c=[!0]);var d=!c[0];this.$element.prop("disabled",d)},u.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var c=[];return this.dataAdapter.current(function(d){c=d}),c},u.prototype.val=function(c){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),c==null||c.length===0)return this.$element.val();var d=c[0];Array.isArray(d)&&(d=d.map(function(h){return h.toString()})),this.$element.val(d).trigger("input").trigger("change")},u.prototype.destroy=function(){o.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",o.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),o.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},u.prototype.render=function(){var c=r('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return c.attr("dir",this.options.get("dir")),this.$container=c,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),o.StoreData(c[0],"element",this.$element),c},u}),s.define("jquery-mousewheel",["jquery"],function(r){return r}),s.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(r,a,o,l,u){if(r.fn.select2==null){var c=["open","close","destroy"];r.fn.select2=function(d){if(d=d||{},typeof d=="object")return this.each(function(){var p=r.extend(!0,{},d);new o(r(this),p)}),this;if(typeof d=="string"){var h,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var p=u.GetData(this,"select2");p==null&&window.console&&console.error&&console.error("The select2('"+d+"') method was called on an element that is not using Select2."),h=p[d].apply(p,f)}),c.indexOf(d)>-1?this:h}else throw new Error("Invalid arguments for Select2: "+d)}}return r.fn.select2.defaults==null&&(r.fn.select2.defaults=l),o}),{define:s.define,require:s.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n})})(E0);var DT=E0.exports;const kT=e0(DT),x0=()=>{const i=new URLSearchParams(window.location.search);return Object.fromEntries(i.entries())},NT=(i,e)=>{const t=new URLSearchParams(x0());e?t.set(i,e):t.delete(i),t.delete("page");const n=`${window.location.pathname}?${t.toString()}`;window.history.replaceState({},"",n),UT(n)},FT=(i,e)=>{const t=new URLSearchParams(x0());e?t.set(i,e):t.delete(i),t.delete("page");const n=`${window.location.pathname}?${t.toString()}`;window.history.replaceState({},"",n),zT(n)},UT=i=>{fetch(i).then(e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.text()}).then(e=>{const n=new DOMParser().parseFromString(e,"text/html"),s=n.querySelector(".doctors-list"),r=n.querySelector("nav");document.querySelector(".doctors-list").innerHTML=s.innerHTML,document.querySelector("nav").innerHTML=r?r.innerHTML:""}).catch(e=>console.error("Error fetching doctors:",e)),BT()},zT=i=>{fetch(i).then(e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.text()}).then(e=>{const s=new DOMParser().parseFromString(e,"text/html").querySelector(".news-list");document.querySelector(".news-list").innerHTML=s.innerHTML}).catch(e=>console.error("Error fetching articles:",e)),HT()};function ha(i){if($(i).length>0){var e=$("header").outerHeight(),t=$(i).offset().top-e-20;$("html, body").animate({scrollTop:t},"slow")}}function S0(i,e,t){function n(o,l){return Array.from(Array(l-o+1),(u,c)=>c+o)}var s=1,r=t-s*2-3>>1,a=t-s*2-2>>1;return i<=t?n(1,i):e<=t-s-1-a?n(1,t-s-1).concat([0]).concat(n(i-s+1,i)):e>=i-s-1-a?n(1,s).concat([0]).concat(n(i-s-1-a-r,i)):n(1,s).concat([0]).concat(n(e-r,e+a)).concat([0]).concat(n(i-s+1,i))}function BT(){setTimeout(function(){$(".pagination").empty();var i="#doctors",e=$("#doctors .doctors--item").length,t=screen.width;if(t<768)var n=5;else if(t<1024)var n=8;else var n=16;var s=Math.ceil(e/n),r=7,a;function o(l){return l<1||l>s?!1:(a=l,$(i+" .content-item").hide().slice((a-1)*n,a*n).show(),$(i+" .pagination li").slice(1,-1).remove(),S0(s,a,r).forEach(u=>{$("<li>").addClass("page-item "+(u?"current-page ":"")+(u===a?"active ":"")).append($("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),a===1?$("#previous-page").addClass("active"):$("#previous-page").removeClass("active"),a===s?$("#next-page").addClass("active"):$("#next-page").removeClass("active"),!0)}$("#doctors .pagination").append($("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append($('<a><svg><use xlink:href"'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),$("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append($('<a><svg><use xlink:href",'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?($("#doctors").show(),o(1),$("#doctors .pagination").show()):$("#doctors .pagination").hide(),$(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+$(this).text();o(l),ha(i)}),$(i+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),ha(i)}}),$(i+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),ha(i)}})},1e3)}function HT(){setTimeout(function(){$(".pagination").empty();var i="#news",e=$("#news .news--item").length,t=screen.width;if(t<768)var n=9;else if(t<1024)var n=9;else var n=9;console.log(n);var s=Math.ceil(e/n);console.log(e);var r=7,a;function o(l){return l<1||l>s?!1:(a=l,$(i+" .content-item").hide().slice((a-1)*n,a*n).show(),$(i+" .pagination li").slice(1,-1).remove(),S0(s,a,r).forEach(u=>{$("<li>").addClass("page-item "+(u?"current-page ":"")+(u===a?"active ":"")).append($("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),a===1?$("#previous-page").addClass("active"):$("#previous-page").removeClass("active"),a===s?$("#next-page").addClass("active"):$("#next-page").removeClass("active"),!0)}$("#news .pagination").append($("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append($('<a><svg><use xlink:href"'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),$("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append($('<a><svg><use xlink:href",'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?($("#news").show(),o(1),$("#news .pagination").show()):$("#news .pagination").hide(),$(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+$(this).text();o(l),ha(i)}),$(i+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),ha(i)}}),$(i+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),ha(i)}})},1e3)}kT();ce(document).ready(()=>{ce(".select-doctors-category").select2({minimumResultsForSearch:-1,dropdownParent:ce(".doctors")}),ce(".select-doctors-category").on("select2:select",function(i){console.log(123);const e=i.params.data.id;$T("category",e),VT()})});ce(function(){ce(".select-choose-specialist").select2({minimumResultsForSearch:-1}),ce(".select-choose-clinic").select2({minimumResultsForSearch:-1}),ce(".select-choose-specialists").select2({minimumResultsForSearch:-1,dropdownParent:ce("#popup--sign-up-appointment")}),ce(".select-choose-clinics").select2({minimumResultsForSearch:-1,dropdownParent:ce("#popup--sign-up-appointment")}),ce(".select-choose-specialist--popup").select2({minimumResultsForSearch:-1,dropdownCssClass:"select-up-index",dropdownParent:ce("main")}),ce(".select-choose-clinic--popup").select2({minimumResultsForSearch:-1,dropdownCssClass:"select-up-index",dropdownParent:ce("main")}),ce(".select-doctors-category").select2({minimumResultsForSearch:-1,dropdownParent:ce(".doctors")}),ce(".select-news-category").select2({minimumResultsForSearch:-1,placeholder:articleTranslations.articleCategories,dropdownCssClass:"news-category-results",dropdownParent:ce(".news-head")}),ce(".select-doctors-category").on("select2:select",function(i){const e=ce(this).val();NT("category",e)}),ce(".select-news-category").on("select2:select",function(i){const e=ce(this).val();FT("category",e)})});function VT(){setTimeout(function(){ce(".pagination").empty();var i="#doctors",e=ce("#doctors .doctors--item").length,t=screen.width;if(t<768)var n=5;else if(t<1024)var n=8;else var n=16;var s=Math.ceil(e/n);console.log(e);var r=7,a;function o(l){return l<1||l>s?!1:(a=l,ce(i+" .content-item").hide().slice((a-1)*n,a*n).show(),ce(i+" .pagination li").slice(1,-1).remove(),jT(s,a,r).forEach(u=>{ce("<li>").addClass("page-item "+(u?"current-page ":"")+(u===a?"active ":"")).append(ce("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),a===1?ce("#previous-page").addClass("active"):ce("#previous-page").removeClass("active"),a===s?ce("#next-page").addClass("active"):ce("#next-page").removeClass("active"),!0)}ce("#doctors .pagination").append(ce("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ce('<a><svg><use xlink:href=",'+iconsPath+'"#i-arrow-small-down>').addClass("page-link").attr({href:"javascript:void(0)"})),ce("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ce('<a><svg><use xlink:href=",'+iconsPath+'"#i-arrow-small-down>').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ce("#doctors").show(),o(1),ce("#doctors .pagination").show()):ce("#doctors .pagination").hide(),ce(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ce(this).text();o(l),scrollToElement(i)}),ce(i+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),scrollToElement(i)}}),ce(i+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),scrollToElement(i)}})},1e3)}function $T(i,e){const t=new URLSearchParams(GT());e?t.set(i,e):t.delete(i),t.delete("page");const n=`${window.location.pathname}?${t.toString()}`;window.history.replaceState({},"",n),WT(n)}const GT=()=>{const i=new URLSearchParams(window.location.search);return Object.fromEntries(i.entries())},WT=i=>{fetch(i).then(e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.text()}).then(e=>{const n=new DOMParser().parseFromString(e,"text/html"),s=n.querySelector(".doctors-list"),r=n.querySelector("nav");document.querySelector(".doctors-list").innerHTML=s.innerHTML,document.querySelector("nav").innerHTML=r?r.innerHTML:""}).catch(e=>console.error("Error fetching doctors:",e))};function jT(i,e,t){function n(o,l){return Array.from(Array(l-o+1),(u,c)=>c+o)}var s=1,r=t-s*2-3>>1,a=t-s*2-2>>1;return i<=t?n(1,i):e<=t-s-1-a?n(1,t-s-1).concat([0]).concat(n(i-s+1,i)):e>=i-s-1-a?n(1,s).concat([0]).concat(n(i-s-1-a-r,i)):n(1,s).concat([0]).concat(n(e-r,e+a)).concat([0]).concat(n(i-s+1,i))}function Ve(i,e,t){return(e=qT(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function XT(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function qT(i){var e=XT(i,"string");return typeof e=="symbol"?e:String(e)}function YT(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Nm(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function KT(i,e,t){return e&&Nm(i.prototype,e),t&&Nm(i,t),i}function ZT(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Fm(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Um(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fm(Object(t),!0).forEach(function(n){ZT(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Fm(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var zm={addCSS:!0,thumbWidth:15,watch:!0};function QT(i,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(i,e)}function JT(i,e){if(i&&e){var t=new Event(e,{bubbles:!0});i.dispatchEvent(t)}}var sl=function(i){return i!=null?i.constructor:null},Wf=function(i,e){return!!(i&&e&&i instanceof e)},T0=function(i){return i==null},M0=function(i){return sl(i)===Object},eM=function(i){return sl(i)===Number&&!Number.isNaN(i)},C0=function(i){return sl(i)===String},tM=function(i){return sl(i)===Boolean},iM=function(i){return sl(i)===Function},A0=function(i){return Array.isArray(i)},P0=function(i){return Wf(i,NodeList)},nM=function(i){return Wf(i,Element)},sM=function(i){return Wf(i,Event)},rM=function(i){return T0(i)||(C0(i)||A0(i)||P0(i))&&!i.length||M0(i)&&!Object.keys(i).length},yi={nullOrUndefined:T0,object:M0,number:eM,string:C0,boolean:tM,function:iM,array:A0,nodeList:P0,element:nM,event:sM,empty:rM};function aM(i){var e="".concat(i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function oM(i,e){if(1>e){var t=aM(e);return parseFloat(i.toFixed(t))}return Math.round(i/e)*e}var lM=function(){function i(e,t){YT(this,i),yi.element(e)?this.element=e:yi.string(e)&&(this.element=document.querySelector(e)),yi.element(this.element)&&yi.empty(this.element.rangeTouch)&&(this.config=Um({},zm,{},t),this.init())}return KT(i,[{key:"init",value:function(){i.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){i.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(s){t.element[n](s,function(r){return t.set(r)},!1)})}},{key:"get",value:function(e){if(!i.enabled||!yi.event(e))return null;var t,n=e.target,s=e.changedTouches[0],r=parseFloat(n.getAttribute("min"))||0,a=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(t=100/l.width*(s.clientX-l.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*u:50<t&&(t+=2*(t-50)*u),r+oM(t/100*(a-r),o)}},{key:"set",value:function(e){i.enabled&&yi.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),JT(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=null;if(yi.empty(e)||yi.string(e)?n=Array.from(document.querySelectorAll(yi.string(e)?e:'input[type="range"]')):yi.element(e)?n=[e]:yi.nodeList(e)?n=Array.from(e):yi.array(e)&&(n=e.filter(yi.element)),yi.empty(n))return null;var s=Um({},zm,{},t);if(yi.string(e)&&s.watch){var r=new MutationObserver(function(a){Array.from(a).forEach(function(o){Array.from(o.addedNodes).forEach(function(l){yi.element(l)&&QT(l,e)&&new i(l,s)})})});r.observe(document.body,{childList:!0,subtree:!0})}return n.map(function(a){return new i(a,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),i}();const rl=i=>i!=null?i.constructor:null,fs=(i,e)=>!!(i&&e&&i instanceof e),jf=i=>i==null,L0=i=>rl(i)===Object,cM=i=>rl(i)===Number&&!Number.isNaN(i),vu=i=>rl(i)===String,uM=i=>rl(i)===Boolean,R0=i=>typeof i=="function",I0=i=>Array.isArray(i),dM=i=>fs(i,WeakMap),O0=i=>fs(i,NodeList),hM=i=>rl(i)===Text,fM=i=>fs(i,Event),pM=i=>fs(i,KeyboardEvent),mM=i=>fs(i,window.TextTrackCue)||fs(i,window.VTTCue),gM=i=>fs(i,TextTrack)||!jf(i)&&vu(i.kind),vM=i=>fs(i,Promise)&&R0(i.then),yM=i=>i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object",D0=i=>jf(i)||(vu(i)||I0(i)||O0(i))&&!i.length||L0(i)&&!Object.keys(i).length,bM=i=>{if(fs(i,window.URL))return!0;if(!vu(i))return!1;let e=i;i.startsWith("http://")&&i.startsWith("https://")||(e=`http://${i}`);try{return!D0(new URL(e).hostname)}catch{return!1}};var Z={nullOrUndefined:jf,object:L0,number:cM,string:vu,boolean:uM,function:R0,array:I0,weakMap:dM,nodeList:O0,element:yM,textNode:hM,event:fM,keyboardEvent:pM,cue:mM,track:gM,promise:vM,url:bM,empty:D0};const gh=(()=>{const i=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(e).find(n=>i.style[n]!==void 0);return!!Z.string(t)&&e[t]})();function k0(i,e){setTimeout(()=>{try{i.hidden=!0,i.offsetHeight,i.hidden=!1}catch{}},e)}const _M=!!window.document.documentMode,wM=/Edge/g.test(navigator.userAgent),EM="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),xM=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,SM=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,TM=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var ai={isIE:_M,isEdge:wM,isWebKit:EM,isIPhone:xM,isIPadOS:SM,isIos:TM};function MM(i){return JSON.parse(JSON.stringify(i))}function N0(i,e){return e.split(".").reduce((t,n)=>t&&t[n],i)}function Wt(i={},...e){if(!e.length)return i;const t=e.shift();return Z.object(t)?(Object.keys(t).forEach(n=>{Z.object(t[n])?(Object.keys(i).includes(n)||Object.assign(i,{[n]:{}}),Wt(i[n],t[n])):Object.assign(i,{[n]:t[n]})}),Wt(i,...e)):i}function F0(i,e){const t=i.length?i:[i];Array.from(t).reverse().forEach((n,s)=>{const r=s>0?e.cloneNode(!0):e,a=n.parentNode,o=n.nextSibling;r.appendChild(n),o?a.insertBefore(r,o):a.appendChild(r)})}function vh(i,e){Z.element(i)&&!Z.empty(e)&&Object.entries(e).filter(([,t])=>!Z.nullOrUndefined(t)).forEach(([t,n])=>i.setAttribute(t,n))}function it(i,e,t){const n=document.createElement(i);return Z.object(e)&&vh(n,e),Z.string(t)&&(n.innerText=t),n}function CM(i,e){Z.element(i)&&Z.element(e)&&e.parentNode.insertBefore(i,e.nextSibling)}function Bm(i,e,t,n){Z.element(e)&&e.appendChild(it(i,t,n))}function os(i){Z.nodeList(i)||Z.array(i)?Array.from(i).forEach(os):Z.element(i)&&Z.element(i.parentNode)&&i.parentNode.removeChild(i)}function wc(i){if(!Z.element(i))return;let{length:e}=i.childNodes;for(;e>0;)i.removeChild(i.lastChild),e-=1}function Vc(i,e){return Z.element(e)&&Z.element(e.parentNode)&&Z.element(i)?(e.parentNode.replaceChild(i,e),i):null}function Ln(i,e){if(!Z.string(i)||Z.empty(i))return{};const t={},n=Wt({},e);return i.split(",").forEach(s=>{const r=s.trim(),a=r.replace(".",""),o=r.replace(/[[\]]/g,"").split("="),[l]=o,u=o.length>1?o[1].replace(/["']/g,""):"";switch(r.charAt(0)){case".":Z.string(n.class)?t.class=`${n.class} ${a}`:t.class=a;break;case"#":t.id=r.replace("#","");break;case"[":t[l]=u}}),Wt(n,t)}function er(i,e){if(!Z.element(i))return;let t=e;Z.boolean(t)||(t=!i.hidden),i.hidden=t}function Mt(i,e,t){if(Z.nodeList(i))return Array.from(i).map(n=>Mt(n,e,t));if(Z.element(i)){let n="toggle";return t!==void 0&&(n=t?"add":"remove"),i.classList[n](e),i.classList.contains(e)}return!1}function $c(i,e){return Z.element(i)&&i.classList.contains(e)}function mr(i,e){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(i,e)}function AM(i,e){const{prototype:t}=Element;return(t.closest||function(){let n=this;do{if(mr.matches(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}).call(i,e)}function Ho(i){return this.elements.container.querySelectorAll(i)}function Kt(i){return this.elements.container.querySelector(i)}function ud(i=null,e=!1){Z.element(i)&&i.focus({preventScroll:!0,focusVisible:e})}const Hm={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},jt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(i,e){const t=jt[i]||e!=="html5";return{api:t,ui:t&&jt.rangeInput}},pip:!(ai.isIPhone||!Z.function(it("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||it("video").disablePictureInPicture)),airplay:Z.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(i){if(Z.empty(i))return!1;const[e]=i.split("/");let t=i;if(!this.isHTML5||e!==this.type)return!1;Object.keys(Hm).includes(t)&&(t+=`; codecs="${Hm[i]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const i=document.createElement("input");return i.type="range",i.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:gh!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},PM=(()=>{let i=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(i=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return i})();function Vo(i,e,t,n=!1,s=!0,r=!1){if(!i||!("addEventListener"in i)||Z.empty(e)||!Z.function(t))return;const a=e.split(" ");let o=r;PM&&(o={passive:s,capture:r}),a.forEach(l=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:i,type:l,callback:t,options:o}),i[n?"addEventListener":"removeEventListener"](l,t,o)})}function mt(i,e="",t,n=!0,s=!1){Vo.call(this,i,e,t,!0,n,s)}function yu(i,e="",t,n=!0,s=!1){Vo.call(this,i,e,t,!1,n,s)}function Xf(i,e="",t,n=!0,s=!1){const r=(...a)=>{yu(i,e,r,n,s),t.apply(this,a)};Vo.call(this,i,e,r,!0,n,s)}function st(i,e="",t=!1,n={}){if(!Z.element(i)||Z.empty(e))return;const s=new CustomEvent(e,{bubbles:t,detail:{...n,plyr:this}});i.dispatchEvent(s)}function LM(){this&&this.eventListeners&&(this.eventListeners.forEach(i=>{const{element:e,type:t,callback:n,options:s}=i;e.removeEventListener(t,n,s)}),this.eventListeners=[])}function RM(){return new Promise(i=>this.ready?setTimeout(i,0):mt.call(this,this.elements.container,"ready",i)).then(()=>{})}function Dn(i){Z.promise(i)&&i.then(null,()=>{})}function yh(i){return Z.array(i)?i.filter((e,t)=>i.indexOf(e)===t):i}function U0(i,e){return Z.array(i)&&i.length?i.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t):null}function z0(i){return!(!window||!window.CSS)&&window.CSS.supports(i)}const Vm=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((i,[e,t])=>({...i,[e/t]:[e,t]}),{});function B0(i){return Z.array(i)||Z.string(i)&&i.includes(":")?(Z.array(i)?i:i.split(":")).map(Number).every(Z.number):!1}function Gc(i){if(!Z.array(i)||!i.every(Z.number))return null;const[e,t]=i,n=(r,a)=>a===0?r:n(a,r%a),s=n(e,t);return[e/s,t/s]}function qf(i){const e=n=>B0(n)?n.split(":").map(Number):null;let t=e(i);if(t===null&&(t=e(this.config.ratio)),t===null&&!Z.empty(this.embed)&&Z.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:n,videoHeight:s}=this.media;t=[n,s]}return Gc(t)}function xa(i){if(!this.isVideo)return{};const{wrapper:e}=this.elements,t=qf.call(this,i);if(!Z.array(t))return{};const[n,s]=Gc(t),r=100/n*s;if(z0(`aspect-ratio: ${n}/${s}`)?e.style.aspectRatio=`${n}/${s}`:e.style.paddingBottom=`${r}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),o=(a-r)/(a/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${o}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:r,ratio:t}}function H0(i,e,t=.05){const n=i/e,s=U0(Object.keys(Vm),n);return Math.abs(s-n)<=t?Vm[s]:[i,e]}function IM(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Rs={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(i=>{const e=i.getAttribute("type");return!!Z.empty(e)||jt.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Rs.getSources.call(this).map(i=>Number(i.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const i=this;i.options.speed=i.config.speed.options,Z.empty(this.config.ratio)||xa.call(i),Object.defineProperty(i.media,"quality",{get(){const e=Rs.getSources.call(i).find(t=>t.getAttribute("src")===i.source);return e&&Number(e.getAttribute("size"))},set(e){if(i.quality!==e){if(i.config.quality.forced&&Z.function(i.config.quality.onChange))i.config.quality.onChange(e);else{const t=Rs.getSources.call(i).find(l=>Number(l.getAttribute("size"))===e);if(!t)return;const{currentTime:n,paused:s,preload:r,readyState:a,playbackRate:o}=i.media;i.media.src=t.getAttribute("src"),(r!=="none"||a)&&(i.once("loadedmetadata",()=>{i.speed=o,i.currentTime=n,s||Dn(i.play())}),i.media.load())}st.call(i,i.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(os(Rs.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function OM(i){return`${i}-${Math.floor(1e4*Math.random())}`}function bh(i,...e){return Z.empty(i)?i:i.toString().replace(/{(\d+)}/g,(t,n)=>e[n].toString())}function DM(i,e){return i===0||e===0||Number.isNaN(i)||Number.isNaN(e)?0:(i/e*100).toFixed(2)}const To=(i="",e="",t="")=>i.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),V0=(i="")=>i.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function kM(i=""){let e=i.toString();return e=To(e,"-"," "),e=To(e,"_"," "),e=V0(e),To(e," ","")}function NM(i=""){let e=i.toString();return e=kM(e),e.charAt(0).toLowerCase()+e.slice(1)}function FM(i){const e=document.createDocumentFragment(),t=document.createElement("div");return e.appendChild(t),t.innerHTML=i,e.firstChild.innerText}function UM(i){const e=document.createElement("div");return e.appendChild(i),e.innerHTML}const $m={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ni={get(i="",e={}){if(Z.empty(i)||Z.empty(e))return"";let t=N0(e.i18n,i);if(Z.empty(t))return Object.keys($m).includes(i)?$m[i]:"";const n={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(n).forEach(([s,r])=>{t=To(t,s,r)}),t}};class $o{constructor(e){Ve(this,"get",t=>{if(!$o.supported||!this.enabled)return null;const n=window.localStorage.getItem(this.key);if(Z.empty(n))return null;const s=JSON.parse(n);return Z.string(t)&&t.length?s[t]:s}),Ve(this,"set",t=>{if(!$o.supported||!this.enabled||!Z.object(t))return;let n=this.get();Z.empty(n)&&(n={}),Wt(n,t);try{window.localStorage.setItem(this.key,JSON.stringify(n))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function al(i,e="text"){return new Promise((t,n)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",()=>{if(e==="text")try{t(JSON.parse(s.responseText))}catch{t(s.responseText)}else t(s.response)}),s.addEventListener("error",()=>{throw new Error(s.status)}),s.open("GET",i,!0),s.responseType=e,s.send()}catch(s){n(s)}})}function $0(i,e){if(!Z.string(i))return;const t="cache",n=Z.string(e);let s=!1;const r=()=>document.getElementById(e)!==null,a=(o,l)=>{o.innerHTML=l,n&&r()||document.body.insertAdjacentElement("afterbegin",o)};if(!n||!r()){const o=$o.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),n&&l.setAttribute("id",e),o){const u=window.localStorage.getItem(`${t}-${e}`);if(s=u!==null,s){const c=JSON.parse(u);a(l,c.content)}}al(i).then(u=>{if(!Z.empty(u)){if(o)try{window.localStorage.setItem(`${t}-${e}`,JSON.stringify({content:u}))}catch{}a(l,u)}}).catch(()=>{})}}const G0=i=>Math.trunc(i/60/60%60,10),zM=i=>Math.trunc(i/60%60,10),BM=i=>Math.trunc(i%60,10);function bu(i=0,e=!1,t=!1){if(!Z.number(i))return bu(void 0,e,t);const n=o=>`0${o}`.slice(-2);let s=G0(i);const r=zM(i),a=BM(i);return s=e||s>0?`${s}:`:"",`${t&&i>0?"-":""}${s}${n(r)}:${n(a)}`}const Ue={getIconUrl(){const i=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,t=i.host!==e||ai.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=Kt.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Ho.call(this,this.config.selectors.buttons.play),pause:Kt.call(this,this.config.selectors.buttons.pause),restart:Kt.call(this,this.config.selectors.buttons.restart),rewind:Kt.call(this,this.config.selectors.buttons.rewind),fastForward:Kt.call(this,this.config.selectors.buttons.fastForward),mute:Kt.call(this,this.config.selectors.buttons.mute),pip:Kt.call(this,this.config.selectors.buttons.pip),airplay:Kt.call(this,this.config.selectors.buttons.airplay),settings:Kt.call(this,this.config.selectors.buttons.settings),captions:Kt.call(this,this.config.selectors.buttons.captions),fullscreen:Kt.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Kt.call(this,this.config.selectors.progress),this.elements.inputs={seek:Kt.call(this,this.config.selectors.inputs.seek),volume:Kt.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Kt.call(this,this.config.selectors.display.buffer),currentTime:Kt.call(this,this.config.selectors.display.currentTime),duration:Kt.call(this,this.config.selectors.display.duration)},Z.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(i){return this.debug.warn("It looks like there is a problem with your custom controls HTML",i),this.toggleNativeControls(!0),!1}},createIcon(i,e){const t="http://www.w3.org/2000/svg",n=Ue.getIconUrl.call(this),s=`${n.cors?"":n.url}#${this.config.iconPrefix}`,r=document.createElementNS(t,"svg");vh(r,Wt(e,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(t,"use"),o=`${s}-${i}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel(i,e={}){const t=ni.get(i,this.config);return it("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},t)},createBadge(i){if(Z.empty(i))return null;const e=it("span",{class:this.config.classNames.menu.value});return e.appendChild(it("span",{class:this.config.classNames.menu.badge},i)),e},createButton(i,e){const t=Wt({},e);let n=NM(i);const s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(t).includes(a)&&(s[a]=t[a],delete t[a])}),s.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(a=>a===this.config.classNames.control)||Wt(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,i){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,n="play",s.label="play",s.icon="play";break;default:Z.empty(s.label)&&(s.label=n),Z.empty(s.icon)&&(s.icon=i)}const r=it(s.element);return s.toggle?(r.appendChild(Ue.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),r.appendChild(Ue.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),r.appendChild(Ue.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),r.appendChild(Ue.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(r.appendChild(Ue.createIcon.call(this,s.icon)),r.appendChild(Ue.createLabel.call(this,s.label))),Wt(t,Ln(this.config.selectors.buttons[n],t)),vh(r,t),n==="play"?(Z.array(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(r)):this.elements.buttons[n]=r,r},createRange(i,e){const t=it("input",Wt(Ln(this.config.selectors.inputs[i]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":ni.get(i,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[i]=t,Ue.updateRangeFill.call(this,t),lM.setup(t),t},createProgress(i,e){const t=it("progress",Wt(Ln(this.config.selectors.display[i]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(i!=="volume"){t.appendChild(it("span",null,"0"));const n={played:"played",buffer:"buffered"}[i],s=n?ni.get(n,this.config):"";t.innerText=`% ${s.toLowerCase()}`}return this.elements.display[i]=t,t},createTime(i,e){const t=Ln(this.config.selectors.display[i],e),n=it("div",Wt(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":ni.get(i,this.config),role:"timer"}),"00:00");return this.elements.display[i]=n,n},bindMenuItemShortcuts(i,e){mt.call(this,i,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const n=mr(i,'[role="menuitemradio"]');if(!n&&[" ","ArrowRight"].includes(t.key))Ue.showMenuPanel.call(this,e,!0);else{let s;t.key!==" "&&(t.key==="ArrowDown"||n&&t.key==="ArrowRight"?(s=i.nextElementSibling,Z.element(s)||(s=i.parentNode.firstElementChild)):(s=i.previousElementSibling,Z.element(s)||(s=i.parentNode.lastElementChild)),ud.call(this,s,!0))}},!1),mt.call(this,i,"keyup",t=>{t.key==="Return"&&Ue.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:i,list:e,type:t,title:n,badge:s=null,checked:r=!1}){const a=Ln(this.config.selectors.inputs[t]),o=it("button",Wt(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":r,value:i})),l=it("span");l.innerHTML=n,Z.element(s)&&l.appendChild(s),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>o.getAttribute("aria-checked")==="true",set(u){u&&Array.from(o.parentNode.children).filter(c=>mr(c,'[role="menuitemradio"]')).forEach(c=>c.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(o,"click keyup",u=>{if(!Z.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),o.checked=!0,t){case"language":this.currentTrack=Number(i);break;case"quality":this.quality=i;break;case"speed":this.speed=parseFloat(i)}Ue.showMenuPanel.call(this,"home",Z.keyboardEvent(u))}},t,!1),Ue.bindMenuItemShortcuts.call(this,o,t),e.appendChild(o)},formatTime(i=0,e=!1){return Z.number(i)?bu(i,G0(this.duration)>0,e):i},updateTimeDisplay(i=null,e=0,t=!1){Z.element(i)&&Z.number(e)&&(i.innerText=Ue.formatTime(e,t))},updateVolume(){this.supported.ui&&(Z.element(this.elements.inputs.volume)&&Ue.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),Z.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(i,e=0){Z.element(i)&&(i.value=e,Ue.updateRangeFill.call(this,i))},updateProgress(i){if(!this.supported.ui||!Z.event(i))return;let e=0;const t=(n,s)=>{const r=Z.number(s)?s:0,a=Z.element(n)?n:this.elements.display.buffer;if(Z.element(a)){a.value=r;const o=a.getElementsByTagName("span")[0];Z.element(o)&&(o.childNodes[0].nodeValue=r)}};if(i)switch(i.type){case"timeupdate":case"seeking":case"seeked":e=DM(this.currentTime,this.duration),i.type==="timeupdate"&&Ue.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(i){const e=Z.event(i)?i.target:i;if(Z.element(e)&&e.getAttribute("type")==="range"){if(mr(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=Ue.formatTime(this.currentTime),n=Ue.formatTime(this.duration),s=ni.get("seekLabel",this.config);e.setAttribute("aria-valuetext",s.replace("{currentTime}",t).replace("{duration}",n))}else if(mr(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(ai.isWebKit||ai.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(i){var e,t;if(!this.config.tooltips.seek||!Z.element(this.elements.inputs.seek)||!Z.element(this.elements.display.seekTooltip)||this.duration===0)return;const n=this.elements.display.seekTooltip,s=`${this.config.classNames.tooltip}--visible`,r=c=>Mt(n,s,c);if(this.touch)return void r(!1);let a=0;const o=this.elements.progress.getBoundingClientRect();if(Z.event(i))a=100/o.width*(i.pageX-o.left);else{if(!$c(n,s))return;a=parseFloat(n.style.left,10)}a<0?a=0:a>100&&(a=100);const l=this.duration/100*a;n.innerText=Ue.formatTime(l);const u=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.find(({time:c})=>c===Math.round(l));u&&n.insertAdjacentHTML("afterbegin",`${u.label}<br>`),n.style.left=`${a}%`,Z.event(i)&&["mouseenter","mouseleave"].includes(i.type)&&r(i.type==="mouseenter")},timeUpdate(i){const e=!Z.element(this.elements.display.duration)&&this.config.invertTime;Ue.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),i&&i.type==="timeupdate"&&this.media.seeking||Ue.updateProgress.call(this,i)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return er(this.elements.display.currentTime,!0),void er(this.elements.progress,!0);Z.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const i=Z.element(this.elements.display.duration);!i&&this.config.displayDuration&&this.paused&&Ue.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),i&&Ue.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Ue.setMarkers.call(this),Ue.updateSeekTooltip.call(this)},toggleMenuButton(i,e){er(this.elements.settings.buttons[i],!e)},updateSetting(i,e,t){const n=this.elements.settings.panels[i];let s=null,r=e;if(i==="captions")s=this.currentTrack;else{if(s=Z.empty(t)?this[i]:t,Z.empty(s)&&(s=this.config[i].default),!Z.empty(this.options[i])&&!this.options[i].includes(s))return void this.debug.warn(`Unsupported value of '${s}' for ${i}`);if(!this.config[i].options.includes(s))return void this.debug.warn(`Disabled value of '${s}' for ${i}`)}if(Z.element(r)||(r=n&&n.querySelector('[role="menu"]')),!Z.element(r))return;this.elements.settings.buttons[i].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Ue.getLabel.call(this,i,s);const a=r&&r.querySelector(`[value="${s}"]`);Z.element(a)&&(a.checked=!0)},getLabel(i,e){switch(i){case"speed":return e===1?ni.get("normal",this.config):`${e}&times;`;case"quality":if(Z.number(e)){const t=ni.get(`qualityLabel.${e}`,this.config);return t.length?t:`${e}p`}return V0(e);case"captions":return _t.getLabel.call(this);default:return null}},setQualityMenu(i){if(!Z.element(this.elements.settings.panels.quality))return;const e="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');Z.array(i)&&(this.options.quality=yh(i).filter(r=>this.config.quality.options.includes(r)));const n=!Z.empty(this.options.quality)&&this.options.quality.length>1;if(Ue.toggleMenuButton.call(this,e,n),wc(t),Ue.checkMenu.call(this),!n)return;const s=r=>{const a=ni.get(`qualityBadge.${r}`,this.config);return a.length?Ue.createBadge.call(this,a):null};this.options.quality.sort((r,a)=>{const o=this.config.quality.options;return o.indexOf(r)>o.indexOf(a)?1:-1}).forEach(r=>{Ue.createMenuItem.call(this,{value:r,list:t,type:e,title:Ue.getLabel.call(this,"quality",r),badge:s(r)})}),Ue.updateSetting.call(this,e,t)},setCaptionsMenu(){if(!Z.element(this.elements.settings.panels.captions))return;const i="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=_t.getTracks.call(this),n=!!t.length;if(Ue.toggleMenuButton.call(this,i,n),wc(e),Ue.checkMenu.call(this),!n)return;const s=t.map((r,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:_t.getLabel.call(this,r),badge:r.language&&Ue.createBadge.call(this,r.language.toUpperCase()),list:e,type:"language"}));s.unshift({value:-1,checked:!this.captions.toggled,title:ni.get("disabled",this.config),list:e,type:"language"}),s.forEach(Ue.createMenuItem.bind(this)),Ue.updateSetting.call(this,i,e)},setSpeedMenu(){if(!Z.element(this.elements.settings.panels.speed))return;const i="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(n=>n>=this.minimumSpeed&&n<=this.maximumSpeed);const t=!Z.empty(this.options.speed)&&this.options.speed.length>1;Ue.toggleMenuButton.call(this,i,t),wc(e),Ue.checkMenu.call(this),t&&(this.options.speed.forEach(n=>{Ue.createMenuItem.call(this,{value:n,list:e,type:i,title:Ue.getLabel.call(this,"speed",n)})}),Ue.updateSetting.call(this,i,e))},checkMenu(){const{buttons:i}=this.elements.settings,e=!Z.empty(i)&&Object.values(i).some(t=>!t.hidden);er(this.elements.settings.menu,!e)},focusFirstMenuItem(i,e=!1){if(this.elements.settings.popup.hidden)return;let t=i;Z.element(t)||(t=Object.values(this.elements.settings.panels).find(s=>!s.hidden));const n=t.querySelector('[role^="menuitem"]');ud.call(this,n,e)},toggleMenu(i){const{popup:e}=this.elements.settings,t=this.elements.buttons.settings;if(!Z.element(e)||!Z.element(t))return;const{hidden:n}=e;let s=n;if(Z.boolean(i))s=i;else if(Z.keyboardEvent(i)&&i.key==="Escape")s=!1;else if(Z.event(i)){const r=Z.function(i.composedPath)?i.composedPath()[0]:i.target,a=e.contains(r);if(a||!a&&i.target!==t&&s)return}t.setAttribute("aria-expanded",s),er(e,!s),Mt(this.elements.container,this.config.classNames.menu.open,s),s&&Z.keyboardEvent(i)?Ue.focusFirstMenuItem.call(this,null,!0):s||n||ud.call(this,t,Z.keyboardEvent(i))},getMenuSize(i){const e=i.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),i.parentNode.appendChild(e);const t=e.scrollWidth,n=e.scrollHeight;return os(e),{width:t,height:n}},showMenuPanel(i="",e=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${i}`);if(!Z.element(t))return;const n=t.parentNode,s=Array.from(n.children).find(r=>!r.hidden);if(jt.transitions&&!jt.reducedMotion){n.style.width=`${s.scrollWidth}px`,n.style.height=`${s.scrollHeight}px`;const r=Ue.getMenuSize.call(this,t),a=o=>{o.target===n&&["width","height"].includes(o.propertyName)&&(n.style.width="",n.style.height="",yu.call(this,n,gh,a))};mt.call(this,n,gh,a),n.style.width=`${r.width}px`,n.style.height=`${r.height}px`}er(s,!0),er(t,!1),Ue.focusFirstMenuItem.call(this,t,e)},setDownloadUrl(){const i=this.elements.buttons.download;Z.element(i)&&i.setAttribute("href",this.download)},create(i){const{bindMenuItemShortcuts:e,createButton:t,createProgress:n,createRange:s,createTime:r,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=Ue;this.elements.controls=null,Z.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const u=it("div",Ln(this.config.selectors.controls.wrapper));this.elements.controls=u;const c={class:"plyr__controls__item"};return yh(Z.array(this.config.controls)?this.config.controls:[]).forEach(d=>{if(d==="restart"&&u.appendChild(t.call(this,"restart",c)),d==="rewind"&&u.appendChild(t.call(this,"rewind",c)),d==="play"&&u.appendChild(t.call(this,"play",c)),d==="fast-forward"&&u.appendChild(t.call(this,"fast-forward",c)),d==="progress"){const h=it("div",{class:`${c.class} plyr__progress__container`}),f=it("div",Ln(this.config.selectors.progress));if(f.appendChild(s.call(this,"seek",{id:`plyr-seek-${i.id}`})),f.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const p=it("span",{class:this.config.classNames.tooltip},"00:00");f.appendChild(p),this.elements.display.seekTooltip=p}this.elements.progress=f,h.appendChild(this.elements.progress),u.appendChild(h)}if(d==="current-time"&&u.appendChild(r.call(this,"currentTime",c)),d==="duration"&&u.appendChild(r.call(this,"duration",c)),d==="mute"||d==="volume"){let{volume:h}=this.elements;if(Z.element(h)&&u.contains(h)||(h=it("div",Wt({},c,{class:`${c.class} plyr__volume`.trim()})),this.elements.volume=h,u.appendChild(h)),d==="mute"&&h.appendChild(t.call(this,"mute")),d==="volume"&&!ai.isIos&&!ai.isIPadOS){const f={max:1,step:.05,value:this.config.volume};h.appendChild(s.call(this,"volume",Wt(f,{id:`plyr-volume-${i.id}`})))}}if(d==="captions"&&u.appendChild(t.call(this,"captions",c)),d==="settings"&&!Z.empty(this.config.settings)){const h=it("div",Wt({},c,{class:`${c.class} plyr__menu`.trim(),hidden:""}));h.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${i.id}`,"aria-expanded":!1}));const f=it("div",{class:"plyr__menu__container",id:`plyr-settings-${i.id}`,hidden:""}),p=it("div"),g=it("div",{id:`plyr-settings-${i.id}-home`}),v=it("div",{role:"menu"});g.appendChild(v),p.appendChild(g),this.elements.settings.panels.home=g,this.config.settings.forEach(m=>{const b=it("button",Wt(Ln(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,b,m),mt.call(this,b,"click",()=>{l.call(this,m,!1)});const _=it("span",null,ni.get(m,this.config)),y=it("span",{class:this.config.classNames.menu.value});y.innerHTML=i[m],_.appendChild(y),b.appendChild(_),v.appendChild(b);const M=it("div",{id:`plyr-settings-${i.id}-${m}`,hidden:""}),x=it("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});x.appendChild(it("span",{"aria-hidden":!0},ni.get(m,this.config))),x.appendChild(it("span",{class:this.config.classNames.hidden},ni.get("menuBack",this.config))),mt.call(this,M,"keydown",S=>{S.key==="ArrowLeft"&&(S.preventDefault(),S.stopPropagation(),l.call(this,"home",!0))},!1),mt.call(this,x,"click",()=>{l.call(this,"home",!1)}),M.appendChild(x),M.appendChild(it("div",{role:"menu"})),p.appendChild(M),this.elements.settings.buttons[m]=b,this.elements.settings.panels[m]=M}),f.appendChild(p),h.appendChild(f),u.appendChild(h),this.elements.settings.popup=f,this.elements.settings.menu=h}if(d==="pip"&&jt.pip&&u.appendChild(t.call(this,"pip",c)),d==="airplay"&&jt.airplay&&u.appendChild(t.call(this,"airplay",c)),d==="download"){const h=Wt({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(h.download="");const{download:f}=this.config.urls;!Z.url(f)&&this.isEmbed&&Wt(h,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(t.call(this,"download",h))}d==="fullscreen"&&u.appendChild(t.call(this,"fullscreen",c))}),this.isHTML5&&a.call(this,Rs.getQualityOptions.call(this)),o.call(this),u},inject(){if(this.config.loadSprite){const s=Ue.getIconUrl.call(this);s.cors&&$0(s.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let i=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;Z.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),Z.element(this.config.controls)||Z.string(this.config.controls)?i=this.config.controls:(i=Ue.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:_t.getLabel.call(this)}),t=!1);let n;if(t&&Z.string(this.config.controls)&&(i=(s=>{let r=s;return Object.entries(e).forEach(([a,o])=>{r=To(r,`{${a}}`,o)}),r})(i)),Z.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),Z.element(n)||(n=this.elements.container),n[Z.element(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),Z.element(this.elements.controls)||Ue.findElements.call(this),!Z.empty(this.elements.buttons)){const s=r=>{const a=this.config.classNames.controlPressed;r.setAttribute("aria-pressed","false"),Object.defineProperty(r,"pressed",{configurable:!0,enumerable:!0,get:()=>$c(r,a),set(o=!1){Mt(r,a,o),r.setAttribute("aria-pressed",o?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(r=>{Z.array(r)||Z.nodeList(r)?Array.from(r).filter(Boolean).forEach(s):s(r)})}if(ai.isEdge&&k0(n),this.config.tooltips.controls){const{classNames:s,selectors:r}=this.config,a=`${r.controls.wrapper} ${r.labels} .${s.hidden}`,o=Ho.call(this,a);Array.from(o).forEach(l=>{Mt(l,this.config.classNames.hidden,!1),Mt(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var i,e;if(!this.duration||this.elements.markers)return;const t=(i=this.config.markers)===null||i===void 0||(e=i.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(t==null||!t.length)return;const n=document.createDocumentFragment(),s=document.createDocumentFragment();let r=null;const a=`${this.config.classNames.tooltip}--visible`,o=l=>Mt(r,a,l);t.forEach(l=>{const u=it("span",{class:this.config.classNames.marker},""),c=l.time/this.duration*100+"%";r&&(u.addEventListener("mouseenter",()=>{l.label||(r.style.left=c,r.innerHTML=l.label,o(!0))}),u.addEventListener("mouseleave",()=>{o(!1)})),u.addEventListener("click",()=>{this.currentTime=l.time}),u.style.left=c,s.appendChild(u)}),n.appendChild(s),this.config.tooltips.seek||(r=it("span",{class:this.config.classNames.tooltip},""),n.appendChild(r)),this.elements.markers={points:s,tip:r},this.elements.progress.appendChild(n)}};function W0(i,e=!0){let t=i;if(e){const n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch{return null}}function j0(i){const e=new URLSearchParams;return Z.object(i)&&Object.entries(i).forEach(([t,n])=>{e.set(t,n)}),e}const _t={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!jt.textTracks)return void(Z.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ue.setCaptionsMenu.call(this));if(Z.element(this.elements.captions)||(this.elements.captions=it("div",Ln(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),CM(this.elements.captions,this.elements.wrapper)),ai.isIE&&window.URL){const n=this.media.querySelectorAll("track");Array.from(n).forEach(s=>{const r=s.getAttribute("src"),a=W0(r);a!==null&&a.hostname!==window.location.href.hostname&&["http:","https:"].includes(a.protocol)&&al(r,"blob").then(o=>{s.setAttribute("src",window.URL.createObjectURL(o))}).catch(()=>{os(s)})})}const i=yh((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(n=>n.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=i);let t=this.storage.get("captions");if(Z.boolean(t)||({active:t}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:t,language:e,languages:i}),this.isHTML5){const n=this.config.captions.update?"addtrack removetrack":"removetrack";mt.call(this,this.media.textTracks,n,_t.update.bind(this))}setTimeout(_t.update.bind(this),0)},update(){const i=_t.getTracks.call(this,!0),{active:e,language:t,meta:n,currentTrackNode:s}=this.captions,r=!!i.find(a=>a.language===t);this.isHTML5&&this.isVideo&&i.filter(a=>!n.get(a)).forEach(a=>{this.debug.log("Track added",a),n.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),mt.call(this,a,"cuechange",()=>_t.updateCues.call(this))}),(r&&this.language!==t||!i.includes(s))&&(_t.setLanguage.call(this,t),_t.toggle.call(this,e&&r)),this.elements&&Mt(this.elements.container,this.config.classNames.captions.enabled,!Z.empty(i)),Z.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ue.setCaptionsMenu.call(this)},toggle(i,e=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,n=this.config.classNames.captions.active,s=Z.nullOrUndefined(i)?!t:i;if(s!==t){if(e||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!e){const r=_t.getTracks.call(this),a=_t.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void _t.set.call(this,r.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),Mt(this.elements.container,n,s),this.captions.toggled=s,Ue.updateSetting.call(this,"captions"),st.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout(()=>{s&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(i,e=!0){const t=_t.getTracks.call(this);if(i!==-1)if(Z.number(i))if(i in t){if(this.captions.currentTrack!==i){this.captions.currentTrack=i;const n=t[i],{language:s}=n||{};this.captions.currentTrackNode=n,Ue.updateSetting.call(this,"captions"),e||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),st.call(this,this.media,"languagechange")}_t.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&_t.updateCues.call(this)}else this.debug.warn("Track not found",i);else this.debug.warn("Invalid caption argument",i);else _t.toggle.call(this,!1,e)},setLanguage(i,e=!0){if(!Z.string(i))return void this.debug.warn("Invalid language argument",i);const t=i.toLowerCase();this.captions.language=t;const n=_t.getTracks.call(this),s=_t.findTrack.call(this,[t]);_t.set.call(this,n.indexOf(s),e)},getTracks(i=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||i||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(i,e=!1){const t=_t.getTracks.call(this),n=a=>Number((this.captions.meta.get(a)||{}).default),s=Array.from(t).sort((a,o)=>n(o)-n(a));let r;return i.every(a=>(r=s.find(o=>o.language===a),!r)),r||(e?s[0]:void 0)},getCurrentTrack(){return _t.getTracks.call(this)[this.currentTrack]},getLabel(i){let e=i;return!Z.track(e)&&jt.textTracks&&this.captions.toggled&&(e=_t.getCurrentTrack.call(this)),Z.track(e)?Z.empty(e.label)?Z.empty(e.language)?ni.get("enabled",this.config):i.language.toUpperCase():e.label:ni.get("disabled",this.config)},updateCues(i){if(!this.supported.ui)return;if(!Z.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!Z.nullOrUndefined(i)&&!Array.isArray(i))return void this.debug.warn("updateCues: Invalid input",i);let e=i;if(!e){const n=_t.getCurrentTrack.call(this);e=Array.from((n||{}).activeCues||[]).map(s=>s.getCueAsHTML()).map(UM)}const t=e.map(n=>n.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){wc(this.elements.captions);const n=it("span",Ln(this.config.selectors.caption));n.innerHTML=t,this.elements.captions.appendChild(n),st.call(this,this.media,"cuechange")}}},X0={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},dd={active:"picture-in-picture",inactive:"inline"},Cs={html5:"html5",youtube:"youtube",vimeo:"vimeo"},hd={audio:"audio",video:"video"};function HM(i){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(i)?Cs.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(i)?Cs.vimeo:null}const fd=()=>{};class VM{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):fd}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):fd}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):fd}}class _n{constructor(e){Ve(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;Z.element(t)&&(t.pressed=this.active);const n=this.target===this.player.media?this.target:this.player.elements.container;st.call(this.player,n,this.active?"enterfullscreen":"exitfullscreen",!0)}),Ve(this,"toggleFallback",(t=!1)=>{if(t?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",Mt(this.target,this.player.config.classNames.fullscreen.fallback,t),ai.isIos){let n=document.head.querySelector('meta[name="viewport"]');const s="viewport-fit=cover";n||(n=document.createElement("meta"),n.setAttribute("name","viewport"));const r=Z.string(n.content)&&n.content.includes(s);t?(this.cleanupViewport=!r,r||(n.content+=`,${s}`)):this.cleanupViewport&&(n.content=n.content.split(",").filter(a=>a.trim()!==s).join(","))}this.onChange()}),Ve(this,"trapFocus",t=>{if(ai.isIos||ai.isIPadOS||!this.active||t.key!=="Tab")return;const n=document.activeElement,s=Ho.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[r]=s,a=s[s.length-1];n!==a||t.shiftKey?n===r&&t.shiftKey&&(a.focus(),t.preventDefault()):(r.focus(),t.preventDefault())}),Ve(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":_n.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");Mt(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Ve(this,"enter",()=>{this.supported&&(ai.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!_n.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?Z.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Ve(this,"exit",()=>{if(this.supported)if(ai.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Dn(this.player.play());else if(!_n.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!Z.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Ve(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=_n.prefix,this.property=_n.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&AM(this.player.elements.container,e.config.fullscreen.container),mt.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),mt.call(this.player,this.player.elements.container,"dblclick",t=>{Z.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),mt.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return _n.nativeSupported&&!this.forceFallback}static get prefix(){if(Z.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!Z.function(document[`${t}ExitFullscreen`])&&!Z.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,_n.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||_n.nativeSupported||!ai.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!_n.nativeSupported||this.forceFallback)return $c(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return ai.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Ec(i,e=1){return new Promise((t,n)=>{const s=new Image,r=()=>{delete s.onload,delete s.onerror,(s.naturalWidth>=e?t:n)(s)};Object.assign(s,{onload:r,onerror:r,src:i})})}const Pt={addStyleHook(){Mt(this.elements.container,this.config.selectors.container.replace(".",""),!0),Mt(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(i=!1){i&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Pt.toggleNativeControls.call(this,!0);Z.element(this.elements.controls)||(Ue.inject.call(this),this.listeners.controls()),Pt.toggleNativeControls.call(this),this.isHTML5&&_t.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Ue.updateVolume.call(this),Ue.timeUpdate.call(this),Ue.durationUpdate.call(this),Pt.checkPlaying.call(this),Mt(this.elements.container,this.config.classNames.pip.supported,jt.pip&&this.isHTML5&&this.isVideo),Mt(this.elements.container,this.config.classNames.airplay.supported,jt.airplay&&this.isHTML5),Mt(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{st.call(this,this.media,"ready")},0),Pt.setTitle.call(this),this.poster&&Pt.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&Ue.durationUpdate.call(this),this.config.mediaMetadata&&Ue.setMediaMetadata.call(this)},setTitle(){let i=ni.get("play",this.config);if(Z.string(this.config.title)&&!Z.empty(this.config.title)&&(i+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",i)}),this.isEmbed){const e=Kt.call(this,"iframe");if(!Z.element(e))return;const t=Z.empty(this.config.title)?"video":this.config.title,n=ni.get("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",t))}},togglePoster(i){Mt(this.elements.container,this.config.classNames.posterEnabled,i)},setPoster(i,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",i),this.elements.poster.removeAttribute("hidden"),RM.call(this).then(()=>Ec(i)).catch(t=>{throw i===this.poster&&Pt.togglePoster.call(this,!1),t}).then(()=>{if(i!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${i}')`,backgroundSize:""}),Pt.togglePoster.call(this,!0),i)))},checkPlaying(i){Mt(this.elements.container,this.config.classNames.playing,this.playing),Mt(this.elements.container,this.config.classNames.paused,this.paused),Mt(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",ni.get(this.playing?"pause":"play",this.config))}),Z.event(i)&&i.type==="timeupdate"||Pt.toggleControls.call(this)},checkLoading(i){this.loading=["stalled","waiting"].includes(i.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Mt(this.elements.container,this.config.classNames.loading,this.loading),Pt.toggleControls.call(this)},this.loading?250:0)},toggleControls(i){const{controls:e}=this.elements;if(e&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(i||this.loading||this.paused||e.pressed||e.hover||t))}},migrateStyles(){Object.values({...this.media.style}).filter(i=>!Z.empty(i)&&Z.string(i)&&i.startsWith("--plyr")).forEach(i=>{this.elements.container.style.setProperty(i,this.media.style.getPropertyValue(i)),this.media.style.removeProperty(i)}),Z.empty(this.media.style)&&this.media.removeAttribute("style")}};class $M{constructor(e){Ve(this,"firstTouch",()=>{const{player:t}=this,{elements:n}=t;t.touch=!0,Mt(n.container,t.config.classNames.isTouch,!0)}),Ve(this,"global",(t=!0)=>{const{player:n}=this;n.config.keyboard.global&&Vo.call(n,window,"keydown keyup",this.handleKey,t,!1),Vo.call(n,document.body,"click",this.toggleMenu,t),Xf.call(n,document.body,"touchstart",this.firstTouch)}),Ve(this,"container",()=>{const{player:t}=this,{config:n,elements:s,timers:r}=t;!n.keyboard.global&&n.keyboard.focused&&mt.call(t,s.container,"keydown keyup",this.handleKey,!1),mt.call(t,s.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:u}=s;u&&l.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let c=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Pt.toggleControls.call(t,!0),c=t.touch?3e3:2e3),clearTimeout(r.controls),r.controls=setTimeout(()=>Pt.toggleControls.call(t,!1),c)});const a=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const l=s.wrapper,{active:u}=t.fullscreen,[c,d]=qf.call(t),h=z0(`aspect-ratio: ${c} / ${d}`);if(!u)return void(h?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[f,p]=IM(),g=f/p>c/d;h?(l.style.width=g?"auto":"100%",l.style.height=g?"100%":"auto"):(l.style.maxWidth=g?p/d*c+"px":null,l.style.margin=g?"0 auto":null)},o=()=>{clearTimeout(r.resized),r.resized=setTimeout(a,50)};mt.call(t,s.container,"enterfullscreen exitfullscreen",l=>{const{target:u}=t.fullscreen;u===s.container&&(!t.isEmbed&&Z.empty(t.config.ratio)||(a(),(l.type==="enterfullscreen"?mt:yu).call(t,window,"resize",o)))})}),Ve(this,"media",()=>{const{player:t}=this,{elements:n}=t;if(mt.call(t,t.media,"timeupdate seeking seeked",r=>Ue.timeUpdate.call(t,r)),mt.call(t,t.media,"durationchange loadeddata loadedmetadata",r=>Ue.durationUpdate.call(t,r)),mt.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),mt.call(t,t.media,"progress playing seeking seeked",r=>Ue.updateProgress.call(t,r)),mt.call(t,t.media,"volumechange",r=>Ue.updateVolume.call(t,r)),mt.call(t,t.media,"playing play pause ended emptied timeupdate",r=>Pt.checkPlaying.call(t,r)),mt.call(t,t.media,"waiting canplay seeked playing",r=>Pt.checkLoading.call(t,r)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const r=Kt.call(t,`.${t.config.classNames.video}`);if(!Z.element(r))return;mt.call(t,n.container,"click",a=>{([n.container,r].includes(a.target)||r.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(a,t.restart,"restart"),this.proxy(a,()=>{Dn(t.play())},"play")):this.proxy(a,()=>{Dn(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&mt.call(t,n.wrapper,"contextmenu",r=>{r.preventDefault()},!1),mt.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),mt.call(t,t.media,"ratechange",()=>{Ue.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),mt.call(t,t.media,"qualitychange",r=>{Ue.updateSetting.call(t,"quality",null,r.detail.quality)}),mt.call(t,t.media,"ready qualitychange",()=>{Ue.setDownloadUrl.call(t)});const s=t.config.events.concat(["keyup","keydown"]).join(" ");mt.call(t,t.media,s,r=>{let{detail:a={}}=r;r.type==="error"&&(a=t.media.error),st.call(t,n.container,r.type,!0,a)})}),Ve(this,"proxy",(t,n,s)=>{const{player:r}=this,a=r.config.listeners[s];let o=!0;Z.function(a)&&(o=a.call(r,t)),o!==!1&&Z.function(n)&&n.call(r,t)}),Ve(this,"bind",(t,n,s,r,a=!0)=>{const{player:o}=this,l=o.config.listeners[r],u=Z.function(l);mt.call(o,t,n,c=>this.proxy(c,s,r),a&&!u)}),Ve(this,"controls",()=>{const{player:t}=this,{elements:n}=t,s=ai.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach(r=>{this.bind(r,"click",()=>{Dn(t.togglePlay())},"play")}),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(n.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(n.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(n.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(n.buttons.download,"click",()=>{st.call(t,t.media,"download")},"download"),this.bind(n.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(n.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",r=>{r.stopPropagation(),r.preventDefault(),Ue.toggleMenu.call(t,r)},null,!1),this.bind(n.buttons.settings,"keyup",r=>{[" ","Enter"].includes(r.key)&&(r.key!=="Enter"?(r.preventDefault(),r.stopPropagation(),Ue.toggleMenu.call(t,r)):Ue.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(n.settings.menu,"keydown",r=>{r.key==="Escape"&&Ue.toggleMenu.call(t,r)}),this.bind(n.inputs.seek,"mousedown mousemove",r=>{const a=n.progress.getBoundingClientRect(),o=100/a.width*(r.pageX-a.left);r.currentTarget.setAttribute("seek-value",o)}),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",r=>{const a=r.currentTarget,o="play-on-seeked";if(Z.keyboardEvent(r)&&!["ArrowLeft","ArrowRight"].includes(r.key))return;t.lastSeekTime=Date.now();const l=a.hasAttribute(o),u=["mouseup","touchend","keyup"].includes(r.type);l&&u?(a.removeAttribute(o),Dn(t.play())):!u&&t.playing&&(a.setAttribute(o,""),t.pause())}),ai.isIos){const r=Ho.call(t,'input[type="range"]');Array.from(r).forEach(a=>this.bind(a,s,o=>k0(o.target)))}this.bind(n.inputs.seek,s,r=>{const a=r.currentTarget;let o=a.getAttribute("seek-value");Z.empty(o)&&(o=a.value),a.removeAttribute("seek-value"),t.currentTime=o/a.max*t.duration},"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",r=>Ue.updateSeekTooltip.call(t,r)),this.bind(n.progress,"mousemove touchmove",r=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.startMove(r)}),this.bind(n.progress,"mouseleave touchend click",()=>{const{previewThumbnails:r}=t;r&&r.loaded&&r.endMove(!1,!0)}),this.bind(n.progress,"mousedown touchstart",r=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.startScrubbing(r)}),this.bind(n.progress,"mouseup touchend",r=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.endScrubbing(r)}),ai.isWebKit&&Array.from(Ho.call(t,'input[type="range"]')).forEach(r=>{this.bind(r,"input",a=>Ue.updateRangeFill.call(t,a.target))}),t.config.toggleInvert&&!Z.element(n.display.duration)&&this.bind(n.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,Ue.timeUpdate.call(t))}),this.bind(n.inputs.volume,s,r=>{t.volume=r.target.value},"volume"),this.bind(n.controls,"mouseenter mouseleave",r=>{n.controls.hover=!t.touch&&r.type==="mouseenter"}),n.fullscreen&&Array.from(n.fullscreen.children).filter(r=>!r.contains(n.container)).forEach(r=>{this.bind(r,"mouseenter mouseleave",a=>{n.controls&&(n.controls.hover=!t.touch&&a.type==="mouseenter")})}),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",r=>{n.controls.pressed=["mousedown","touchstart"].includes(r.type)}),this.bind(n.controls,"focusin",()=>{const{config:r,timers:a}=t;Mt(n.controls,r.classNames.noTransition,!0),Pt.toggleControls.call(t,!0),setTimeout(()=>{Mt(n.controls,r.classNames.noTransition,!1)},0);const o=this.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(()=>Pt.toggleControls.call(t,!1),o)}),this.bind(n.inputs.volume,"wheel",r=>{const a=r.webkitDirectionInvertedFromDevice,[o,l]=[r.deltaX,-r.deltaY].map(d=>a?-d:d),u=Math.sign(Math.abs(o)>Math.abs(l)?o:l);t.increaseVolume(u/50);const{volume:c}=t.media;(u===1&&c<1||u===-1&&c>0)&&r.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:n}=t,{key:s,type:r,altKey:a,ctrlKey:o,metaKey:l,shiftKey:u}=e,c=r==="keydown",d=c&&s===this.lastKey;if(!(a||o||l||u)&&s){if(c){const f=document.activeElement;if(Z.element(f)){const{editable:p}=t.config.selectors,{seek:g}=n.inputs;if(f!==g&&mr(f,p)||e.key===" "&&mr(f,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(h=parseInt(s,10),t.currentTime=t.duration/10*h);break;case" ":case"k":d||Dn(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":d||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":d||t.toggleCaptions();break;case"l":t.loop=!t.loop}s==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null;var h}}toggleMenu(e){Ue.toggleMenu.call(this.player,e)}}function GM(i,e){return i(e={exports:{}},e.exports),e.exports}var WM=GM(function(i,e){i.exports=function(){var t=function(){},n={},s={},r={};function a(h,f){h=h.push?h:[h];var p,g,v,m=[],b=h.length,_=b;for(p=function(y,M){M.length&&m.push(y),--_||f(m)};b--;)g=h[b],(v=s[g])?p(g,v):(r[g]=r[g]||[]).push(p)}function o(h,f){if(h){var p=r[h];if(s[h]=f,p)for(;p.length;)p[0](h,f),p.splice(0,1)}}function l(h,f){h.call&&(h={success:h}),f.length?(h.error||t)(f):(h.success||t)(h)}function u(h,f,p,g){var v,m,b=document,_=p.async,y=(p.numRetries||0)+1,M=p.before||t,x=h.replace(/[\?|#].*$/,""),S=h.replace(/^(css|img)!/,"");g=g||0,/(^css!|\.css$)/.test(x)?((m=b.createElement("link")).rel="stylesheet",m.href=S,(v="hideFocus"in m)&&m.relList&&(v=0,m.rel="preload",m.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(x)?(m=b.createElement("img")).src=S:((m=b.createElement("script")).src=h,m.async=_===void 0||_),m.onload=m.onerror=m.onbeforeload=function(A){var E=A.type[0];if(v)try{m.sheet.cssText.length||(E="e")}catch(w){w.code!=18&&(E="e")}if(E=="e"){if((g+=1)<y)return u(h,f,p,g)}else if(m.rel=="preload"&&m.as=="style")return m.rel="stylesheet";f(h,E,A.defaultPrevented)},M(h,m)!==!1&&b.head.appendChild(m)}function c(h,f,p){var g,v,m=(h=h.push?h:[h]).length,b=m,_=[];for(g=function(y,M,x){if(M=="e"&&_.push(y),M=="b"){if(!x)return;_.push(y)}--m||f(_)},v=0;v<b;v++)u(h[v],g,p)}function d(h,f,p){var g,v;if(f&&f.trim&&(g=f),v=(g?p:f)||{},g){if(g in n)throw"LoadJS";n[g]=!0}function m(b,_){c(h,function(y){l(v,y),b&&l({success:b,error:_},y),o(g,y)},v)}if(v.returnPromise)return new Promise(m);m()}return d.ready=function(h,f){return a(h,function(p){l(f,p)}),d},d.done=function(h){o(h,[])},d.reset=function(){n={},s={},r={}},d.isDefined=function(h){return h in n},d}()});function Yf(i){return new Promise((e,t)=>{WM(i,{success:e,error:t})})}function jM(i){return Z.empty(i)?null:Z.number(Number(i))?i:i.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:i}function XM(i){const e=i.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function oo(i){i&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===i&&(this.media.paused=!i,st.call(this,this.media,i?"play":"pause"))}const _h={setup(){const i=this;Mt(i.elements.wrapper,i.config.classNames.embed,!0),i.options.speed=i.config.speed.options,xa.call(i),Z.object(window.Vimeo)?_h.ready.call(i):Yf(i.config.urls.vimeo.sdk).then(()=>{_h.ready.call(i)}).catch(e=>{i.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const i=this,e=i.config.vimeo,{premium:t,referrerPolicy:n,...s}=e;let r=i.media.getAttribute("src"),a="";Z.empty(r)?(r=i.media.getAttribute(i.config.attributes.embed.id),a=i.media.getAttribute(i.config.attributes.embed.hash)):a=XM(r);const o=a?{h:a}:{};t&&Object.assign(s,{controls:!1,sidedock:!1});const l=j0({loop:i.config.loop.active,autoplay:i.autoplay,muted:i.muted,gesture:"media",playsinline:i.config.playsinline,...o,...s}),u=jM(r),c=it("iframe"),d=bh(i.config.urls.vimeo.iframe,u,l);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),Z.empty(n)||c.setAttribute("referrerPolicy",n),t||!e.customControls)c.setAttribute("data-poster",i.poster),i.media=Vc(c,i.media);else{const b=it("div",{class:i.config.classNames.embedContainer,"data-poster":i.poster});b.appendChild(c),i.media=Vc(b,i.media)}e.customControls||al(bh(i.config.urls.vimeo.api,d)).then(b=>{!Z.empty(b)&&b.thumbnail_url&&Pt.setPoster.call(i,b.thumbnail_url).catch(()=>{})}),i.embed=new window.Vimeo.Player(c,{autopause:i.config.autopause,muted:i.muted}),i.media.paused=!0,i.media.currentTime=0,i.supported.ui&&i.embed.disableTextTrack(),i.media.play=()=>(oo.call(i,!0),i.embed.play()),i.media.pause=()=>(oo.call(i,!1),i.embed.pause()),i.media.stop=()=>{i.pause(),i.currentTime=0};let{currentTime:h}=i.media;Object.defineProperty(i.media,"currentTime",{get:()=>h,set(b){const{embed:_,media:y,paused:M,volume:x}=i,S=M&&!_.hasPlayed;y.seeking=!0,st.call(i,y,"seeking"),Promise.resolve(S&&_.setVolume(0)).then(()=>_.setCurrentTime(b)).then(()=>S&&_.pause()).then(()=>S&&_.setVolume(x)).catch(()=>{})}});let f=i.config.speed.selected;Object.defineProperty(i.media,"playbackRate",{get:()=>f,set(b){i.embed.setPlaybackRate(b).then(()=>{f=b,st.call(i,i.media,"ratechange")}).catch(()=>{i.options.speed=[1]})}});let{volume:p}=i.config;Object.defineProperty(i.media,"volume",{get:()=>p,set(b){i.embed.setVolume(b).then(()=>{p=b,st.call(i,i.media,"volumechange")})}});let{muted:g}=i.config;Object.defineProperty(i.media,"muted",{get:()=>g,set(b){const _=!!Z.boolean(b)&&b;i.embed.setMuted(!!_||i.config.muted).then(()=>{g=_,st.call(i,i.media,"volumechange")})}});let v,{loop:m}=i.config;Object.defineProperty(i.media,"loop",{get:()=>m,set(b){const _=Z.boolean(b)?b:i.config.loop.active;i.embed.setLoop(_).then(()=>{m=_})}}),i.embed.getVideoUrl().then(b=>{v=b,Ue.setDownloadUrl.call(i)}).catch(b=>{this.debug.warn(b)}),Object.defineProperty(i.media,"currentSrc",{get:()=>v}),Object.defineProperty(i.media,"ended",{get:()=>i.currentTime===i.duration}),Promise.all([i.embed.getVideoWidth(),i.embed.getVideoHeight()]).then(b=>{const[_,y]=b;i.embed.ratio=H0(_,y),xa.call(this)}),i.embed.setAutopause(i.config.autopause).then(b=>{i.config.autopause=b}),i.embed.getVideoTitle().then(b=>{i.config.title=b,Pt.setTitle.call(this)}),i.embed.getCurrentTime().then(b=>{h=b,st.call(i,i.media,"timeupdate")}),i.embed.getDuration().then(b=>{i.media.duration=b,st.call(i,i.media,"durationchange")}),i.embed.getTextTracks().then(b=>{i.media.textTracks=b,_t.setup.call(i)}),i.embed.on("cuechange",({cues:b=[]})=>{const _=b.map(y=>FM(y.text));_t.updateCues.call(i,_)}),i.embed.on("loaded",()=>{i.embed.getPaused().then(b=>{oo.call(i,!b),b||st.call(i,i.media,"playing")}),Z.element(i.embed.element)&&i.supported.ui&&i.embed.element.setAttribute("tabindex",-1)}),i.embed.on("bufferstart",()=>{st.call(i,i.media,"waiting")}),i.embed.on("bufferend",()=>{st.call(i,i.media,"playing")}),i.embed.on("play",()=>{oo.call(i,!0),st.call(i,i.media,"playing")}),i.embed.on("pause",()=>{oo.call(i,!1)}),i.embed.on("timeupdate",b=>{i.media.seeking=!1,h=b.seconds,st.call(i,i.media,"timeupdate")}),i.embed.on("progress",b=>{i.media.buffered=b.percent,st.call(i,i.media,"progress"),parseInt(b.percent,10)===1&&st.call(i,i.media,"canplaythrough"),i.embed.getDuration().then(_=>{_!==i.media.duration&&(i.media.duration=_,st.call(i,i.media,"durationchange"))})}),i.embed.on("seeked",()=>{i.media.seeking=!1,st.call(i,i.media,"seeked")}),i.embed.on("ended",()=>{i.media.paused=!0,st.call(i,i.media,"ended")}),i.embed.on("error",b=>{i.media.error=b,st.call(i,i.media,"error")}),e.customControls&&setTimeout(()=>Pt.build.call(i),0)}};function qM(i){return Z.empty(i)?null:i.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:i}function lo(i){i&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===i&&(this.media.paused=!i,st.call(this,this.media,i?"play":"pause"))}function YM(i){return i.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const xc={setup(){if(Mt(this.elements.wrapper,this.config.classNames.embed,!0),Z.object(window.YT)&&Z.function(window.YT.Player))xc.ready.call(this);else{const i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{Z.function(i)&&i(),xc.ready.call(this)},Yf(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(i){al(bh(this.config.urls.youtube.api,i)).then(e=>{if(Z.object(e)){const{title:t,height:n,width:s}=e;this.config.title=t,Pt.setTitle.call(this),this.embed.ratio=H0(s,n)}xa.call(this)}).catch(()=>{xa.call(this)})},ready(){const i=this,e=i.config.youtube,t=i.media&&i.media.getAttribute("id");if(!Z.empty(t)&&t.startsWith("youtube-"))return;let n=i.media.getAttribute("src");Z.empty(n)&&(n=i.media.getAttribute(this.config.attributes.embed.id));const s=qM(n),r=it("div",{id:OM(i.provider),"data-poster":e.customControls?i.poster:void 0});if(i.media=Vc(r,i.media),e.customControls){const a=o=>`https://i.ytimg.com/vi/${s}/${o}default.jpg`;Ec(a("maxres"),121).catch(()=>Ec(a("sd"),121)).catch(()=>Ec(a("hq"))).then(o=>Pt.setPoster.call(i,o.src)).then(o=>{o.includes("maxres")||(i.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}i.embed=new window.YT.Player(i.media,{videoId:s,host:YM(e),playerVars:Wt({},{autoplay:i.config.autoplay?1:0,hl:i.config.hl,controls:i.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:i.config.playsinline&&!i.config.fullscreen.iosNative?1:0,cc_load_policy:i.captions.active?1:0,cc_lang_pref:i.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(a){if(!i.media.error){const o=a.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[o]||"An unknown error occurred";i.media.error={code:o,message:l},st.call(i,i.media,"error")}},onPlaybackRateChange(a){const o=a.target;i.media.playbackRate=o.getPlaybackRate(),st.call(i,i.media,"ratechange")},onReady(a){if(Z.function(i.media.play))return;const o=a.target;xc.getTitle.call(i,s),i.media.play=()=>{lo.call(i,!0),o.playVideo()},i.media.pause=()=>{lo.call(i,!1),o.pauseVideo()},i.media.stop=()=>{o.stopVideo()},i.media.duration=o.getDuration(),i.media.paused=!0,i.media.currentTime=0,Object.defineProperty(i.media,"currentTime",{get:()=>Number(o.getCurrentTime()),set(d){i.paused&&!i.embed.hasPlayed&&i.embed.mute(),i.media.seeking=!0,st.call(i,i.media,"seeking"),o.seekTo(d)}}),Object.defineProperty(i.media,"playbackRate",{get:()=>o.getPlaybackRate(),set(d){o.setPlaybackRate(d)}});let{volume:l}=i.config;Object.defineProperty(i.media,"volume",{get:()=>l,set(d){l=d,o.setVolume(100*l),st.call(i,i.media,"volumechange")}});let{muted:u}=i.config;Object.defineProperty(i.media,"muted",{get:()=>u,set(d){const h=Z.boolean(d)?d:u;u=h,o[h?"mute":"unMute"](),o.setVolume(100*l),st.call(i,i.media,"volumechange")}}),Object.defineProperty(i.media,"currentSrc",{get:()=>o.getVideoUrl()}),Object.defineProperty(i.media,"ended",{get:()=>i.currentTime===i.duration});const c=o.getAvailablePlaybackRates();i.options.speed=c.filter(d=>i.config.speed.options.includes(d)),i.supported.ui&&e.customControls&&i.media.setAttribute("tabindex",-1),st.call(i,i.media,"timeupdate"),st.call(i,i.media,"durationchange"),clearInterval(i.timers.buffering),i.timers.buffering=setInterval(()=>{i.media.buffered=o.getVideoLoadedFraction(),(i.media.lastBuffered===null||i.media.lastBuffered<i.media.buffered)&&st.call(i,i.media,"progress"),i.media.lastBuffered=i.media.buffered,i.media.buffered===1&&(clearInterval(i.timers.buffering),st.call(i,i.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>Pt.build.call(i),50)},onStateChange(a){const o=a.target;switch(clearInterval(i.timers.playing),i.media.seeking&&[1,2].includes(a.data)&&(i.media.seeking=!1,st.call(i,i.media,"seeked")),a.data){case-1:st.call(i,i.media,"timeupdate"),i.media.buffered=o.getVideoLoadedFraction(),st.call(i,i.media,"progress");break;case 0:lo.call(i,!1),i.media.loop?(o.stopVideo(),o.playVideo()):st.call(i,i.media,"ended");break;case 1:e.customControls&&!i.config.autoplay&&i.media.paused&&!i.embed.hasPlayed?i.media.pause():(lo.call(i,!0),st.call(i,i.media,"playing"),i.timers.playing=setInterval(()=>{st.call(i,i.media,"timeupdate")},50),i.media.duration!==o.getDuration()&&(i.media.duration=o.getDuration(),st.call(i,i.media,"durationchange")));break;case 2:i.muted||i.embed.unMute(),lo.call(i,!1);break;case 3:st.call(i,i.media,"waiting")}st.call(i,i.elements.container,"statechange",!1,{code:a.data})}}})}},q0={setup(){this.media?(Mt(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Mt(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Mt(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=it("div",{class:this.config.classNames.video}),F0(this.media,this.elements.wrapper),this.elements.poster=it("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Rs.setup.call(this):this.isYouTube?xc.setup.call(this):this.isVimeo&&_h.setup.call(this)):this.debug.warn("No media element found!")}};class KM{constructor(e){Ve(this,"load",()=>{this.enabled&&(Z.object(window.google)&&Z.object(window.google.ima)?this.ready():Yf(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Ve(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Ve(this,"setupIMA",()=>{this.elements.container=it("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),Ve(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(n){this.onAdError(n)}}),Ve(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const n=bu(Math.max(this.manager.getRemainingTime(),0)),s=`${ni.get("advertisement",this.player.config)} - ${n}`;this.elements.container.setAttribute("data-badge-text",s)},100)}),Ve(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=t.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s)),Object.keys(google.ima.AdEvent.Type).forEach(s=>{this.manager.addEventListener(google.ima.AdEvent.Type[s],r=>this.onAdEvent(r))}),this.trigger("loaded")}),Ve(this,"addCuePoints",()=>{Z.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const n=this.player.elements.progress;if(Z.element(n)){const s=100/this.player.duration*t,r=it("span",{class:this.player.config.classNames.cues});r.style.left=`${s.toString()}%`,n.appendChild(r)}}})}),Ve(this,"onAdEvent",t=>{const{container:n}=this.player.elements,s=t.getAd(),r=t.getAdData();switch((a=>{st.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),s.isLinear()||(s.width=n.offsetWidth,s.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn(`Non-fatal ad error: ${r.adError.getMessage()}`)}}),Ve(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),Ve(this,"listeners",()=>{const{container:t}=this.player.elements;let n;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{n=this.player.currentTime}),this.player.on("seeked",()=>{const s=this.player.currentTime;Z.empty(this.cuePoints)||this.cuePoints.forEach((r,a)=>{n<r&&r<s&&(this.manager.discardAdBreak(),this.cuePoints.splice(a,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),Ve(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(n){this.onAdError(n)}}).catch(()=>{})}),Ve(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Dn(this.player.media.play())}),Ve(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Ve(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Ve(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Ve(this,"trigger",(t,...n)=>{const s=this.events[t];Z.array(s)&&s.forEach(r=>{Z.function(r)&&r.apply(this,n)})}),Ve(this,"on",(t,n)=>(Z.array(this.events[t])||(this.events[t]=[]),this.events[t].push(n),this)),Ve(this,"startSafetyTimer",(t,n)=>{this.player.debug.log(`Safety timer invoked from: ${n}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),Ve(this,"clearSafetyTimer",t=>{Z.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,n)=>{this.on("loaded",t),this.on("error",n)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!Z.empty(e.publisherId)||Z.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return Z.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${j0({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function Y0(i=0,e=0,t=255){return Math.min(Math.max(i,e),t)}const ZM=i=>{const e=[];return i.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const n={};t.split(/\r\n|\n|\r/).forEach(s=>{if(Z.number(n.startTime)){if(!Z.empty(s.trim())&&Z.empty(n.text)){const r=s.trim().split("#xywh=");[n.text]=r,r[1]&&([n.x,n.y,n.w,n.h]=r[1].split(","))}}else{const r=s.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);r&&(n.startTime=60*Number(r[1]||0)*60+60*Number(r[2])+Number(r[3])+ +`0.${r[4]}`,n.endTime=60*Number(r[6]||0)*60+60*Number(r[7])+Number(r[8])+ +`0.${r[9]}`)}}),n.text&&e.push(n)}),e},Gm=(i,e)=>{const t={};return i>e.width/e.height?(t.width=e.width,t.height=1/i*e.width):(t.height=e.height,t.width=i*e.height),t};class wh{constructor(e){Ve(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Ve(this,"getThumbnails",()=>new Promise(t=>{const{src:n}=this.player.config.previewThumbnails;if(Z.empty(n))throw new Error("Missing previewThumbnails.src config attribute");const s=()=>{this.thumbnails.sort((r,a)=>r.height-a.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(Z.function(n))n(r=>{this.thumbnails=r,s()});else{const r=(Z.string(n)?[n]:n).map(a=>this.getThumbnail(a));Promise.all(r).then(s)}})),Ve(this,"getThumbnail",t=>new Promise(n=>{al(t).then(s=>{const r={frames:ZM(s),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const a=new Image;a.onload=()=>{r.height=a.naturalHeight,r.width=a.naturalWidth,this.thumbnails.push(r),n()},a.src=r.urlPrefix+r.frames[0].text})})),Ve(this,"startMove",t=>{if(this.loaded&&Z.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var n,s;const r=this.player.elements.progress.getBoundingClientRect(),a=100/r.width*(t.pageX-r.left);this.seekTime=this.player.media.duration*(a/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=bu(this.seekTime);const o=(n=this.player.config.markers)===null||n===void 0||(s=n.points)===null||s===void 0?void 0:s.find(({time:l})=>l===Math.round(this.seekTime));o&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${o.label}<br>`)}this.showImageAtCurrentTime()}}),Ve(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Ve(this,"startScrubbing",t=>{(Z.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Ve(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Xf.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Ve(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Ve(this,"render",()=>{this.elements.thumb.container=it("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=it("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=it("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=it("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),Z.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=it("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Ve(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Ve(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(r=>this.seekTime>=r.startTime&&this.seekTime<=r.endTime),n=t>=0;let s=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((r,a)=>{this.loadedImages.includes(r.frames[t].text)&&(s=a)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(s)))}),Ve(this,"loadImage",(t=0)=>{const n=this.showingThumb,s=this.thumbnails[t],{urlPrefix:r}=s,a=s.frames[n],o=s.frames[n].text,l=r+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,a,t,n,o,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=l,u.dataset.index=n,u.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log(`Loading image: ${l}`),u.onload=()=>this.showImage(u,a,t,n,o,!0),this.loadingImage=u,this.removeOldImages(u)}}),Ve(this,"showImage",(t,n,s,r,a,o=!0)=>{this.player.debug.log(`Showing thumb: ${a}. num: ${r}. qual: ${s}. newimg: ${o}`),this.setImageSizeAndOffset(t,n),o&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(r,!0).then(this.preloadNearby(r,!1)).then(this.getHigherQuality(s,t,n,a))}),Ve(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(n=>{if(n.tagName.toLowerCase()!=="img")return;const s=this.usingSprites?500:1e3;if(n.dataset.index!==t.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;const{currentImageContainer:r}=this;setTimeout(()=>{r.removeChild(n),this.player.debug.log(`Removing thumb: ${n.dataset.filename}`)},s)}})}),Ve(this,"preloadNearby",(t,n=!0)=>new Promise(s=>{setTimeout(()=>{const r=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===r){let a;a=n?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let o=!1;a.forEach(l=>{const u=l.text;if(u!==r&&!this.loadedImages.includes(u)){o=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:c}=this.thumbnails[0],d=c+u,h=new Image;h.src=d,h.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),s()}}}),o||s()}},300)})),Ve(this,"getHigherQuality",(t,n,s,r)=>{if(t<this.thumbnails.length-1){let a=n.naturalHeight;this.usingSprites&&(a=s.h),a<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===r&&(this.player.debug.log(`Showing higher quality thumb for: ${r}`),this.loadImage(t+1))},300)}}),Ve(this,"toggleThumbContainer",(t=!1,n=!1)=>{const s=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(s,t),!t&&n&&(this.showingThumb=null,this.showingThumbFilename=null)}),Ve(this,"toggleScrubbingContainer",(t=!1)=>{const n=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(n,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),Ve(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Ve(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const n=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${n}px`}else if(t.clientHeight<20&&t.clientWidth>20){const n=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${n}px`}}else{const n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${n}px`}this.setThumbContainerPos()}),Ve(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),n=this.player.elements.container.getBoundingClientRect(),{container:s}=this.elements.thumb,r=n.left-t.left+10,a=n.right-t.left-s.clientWidth-10,o=this.mousePosX-t.left-s.clientWidth/2,l=Y0(o,r,a);s.style.left=`${l}px`,s.style.setProperty("--preview-arrow-offset",o-l+"px")}),Ve(this,"setScrubbingContainerSize",()=>{const{width:t,height:n}=Gm(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${n}px`}),Ve(this,"setImageSizeAndOffset",(t,n)=>{if(!this.usingSprites)return;const s=this.thumbContainerHeight/n.h;t.style.height=t.naturalHeight*s+"px",t.style.width=t.naturalWidth*s+"px",t.style.left=`-${n.x*s}px`,t.style.top=`-${n.y*s}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=Gm(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const Eh={insertElements(i,e){Z.string(e)?Bm(i,this.media,{src:e}):Z.array(e)&&e.forEach(t=>{Bm(i,this.media,t)})},change(i){N0(i,"sources.length")?(Rs.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],os(this.media),this.media=null,Z.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:t}=i,[{provider:n=Cs.html5,src:s}]=e,r=n==="html5"?t:"div",a=n==="html5"?{}:{src:s};Object.assign(this,{provider:n,type:t,supported:jt.check(t,n,this.config.playsinline),media:it(r,a)}),this.elements.container.appendChild(this.media),Z.boolean(i.autoplay)&&(this.config.autoplay=i.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),Z.empty(i.poster)||(this.poster=i.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Pt.addStyleHook.call(this),this.isHTML5&&Eh.insertElements.call(this,"source",e),this.config.title=i.title,q0.setup.call(this),this.isHTML5&&Object.keys(i).includes("tracks")&&Eh.insertElements.call(this,"track",i.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Pt.build.call(this),this.isHTML5&&this.media.load(),Z.empty(i.previewThumbnails)||(Object.assign(this.config.previewThumbnails,i.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new wh(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Go{constructor(e,t){if(Ve(this,"play",()=>Z.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Dn(this.media.play())),this.media.play()):null),Ve(this,"pause",()=>this.playing&&Z.function(this.media.pause)?this.media.pause():null),Ve(this,"togglePlay",o=>(Z.boolean(o)?o:!this.playing)?this.play():this.pause()),Ve(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):Z.function(this.media.stop)&&this.media.stop()}),Ve(this,"restart",()=>{this.currentTime=0}),Ve(this,"rewind",o=>{this.currentTime-=Z.number(o)?o:this.config.seekTime}),Ve(this,"forward",o=>{this.currentTime+=Z.number(o)?o:this.config.seekTime}),Ve(this,"increaseVolume",o=>{const l=this.media.muted?0:this.volume;this.volume=l+(Z.number(o)?o:0)}),Ve(this,"decreaseVolume",o=>{this.increaseVolume(-o)}),Ve(this,"airplay",()=>{jt.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Ve(this,"toggleControls",o=>{if(this.supported.ui&&!this.isAudio){const l=$c(this.elements.container,this.config.classNames.hideControls),u=o===void 0?void 0:!o,c=Mt(this.elements.container,this.config.classNames.hideControls,u);if(c&&Z.array(this.config.controls)&&this.config.controls.includes("settings")&&!Z.empty(this.config.settings)&&Ue.toggleMenu.call(this,!1),c!==l){const d=c?"controlshidden":"controlsshown";st.call(this,this.media,d)}return!c}return!1}),Ve(this,"on",(o,l)=>{mt.call(this,this.elements.container,o,l)}),Ve(this,"once",(o,l)=>{Xf.call(this,this.elements.container,o,l)}),Ve(this,"off",(o,l)=>{yu(this.elements.container,o,l)}),Ve(this,"destroy",(o,l=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(os(this.elements.buttons.play),os(this.elements.captions),os(this.elements.controls),os(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),Z.function(o)&&o()):(LM.call(this),Rs.cancelRequests.call(this),Vc(this.elements.original,this.elements.container),st.call(this,this.elements.original,"destroyed",!0),Z.function(o)&&o.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Pt.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&Z.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),Ve(this,"supports",o=>jt.mime.call(this,o)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=jt.touch,this.media=e,Z.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||Z.nodeList(this.media)||Z.array(this.media))&&(this.media=this.media[0]),this.config=Wt({},X0,Go.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new VM(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",jt),Z.nullOrUndefined(this.media)||!Z.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!jt.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const s=this.media.tagName.toLowerCase();let r=null,a=null;switch(s){case"div":if(r=this.media.querySelector("iframe"),Z.element(r)){if(a=W0(r.getAttribute("src")),this.provider=HM(a.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",a.search.length){const o=["1","true"];o.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),o.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=o.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(Z.empty(this.provider)||!Object.values(Cs).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=hd.video;break;case"video":case"audio":this.type=s,this.provider=Cs.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=jt.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new $M(this),this.storage=new $o(this),this.media.plyr=this,Z.element(this.elements.container)||(this.elements.container=it("div"),F0(this.media,this.elements.container)),Pt.migrateStyles.call(this),Pt.addStyleHook.call(this),q0.setup.call(this),this.config.debug&&mt.call(this,this.elements.container,this.config.events.join(" "),o=>{this.debug.log(`event: ${o.type}`)}),this.fullscreen=new _n(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Pt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new KM(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Dn(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new wh(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Cs.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Cs.youtube}get isVimeo(){return this.provider===Cs.vimeo}get isVideo(){return this.type===hd.video}get isAudio(){return this.type===hd.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const t=Z.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return Z.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=Z.number(t)&&t!==1/0?t:0;return e||n}set volume(e){let t=e;Z.string(t)&&(t=Number(t)),Z.number(t)||(t=this.storage.get("volume")),Z.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!Z.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;Z.boolean(t)||(t=this.storage.get("muted")),Z.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;Z.number(e)&&(t=e),Z.number(t)||(t=this.storage.get("speed")),Z.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:s}=this;t=Y0(t,n,s),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let s=[!Z.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(Z.number),r=!0;if(!n.includes(s)){const a=U0(n,s);this.debug.warn(`Unsupported quality option: ${s}, using ${a} instead`),s=a,r=!1}t.selected=s,this.media.quality=s,r&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(e){const t=Z.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(e){Eh.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return Z.url(e)?e:this.source}set download(e){Z.url(e)&&(this.config.urls.download=e,Ue.setDownloadUrl.call(this))}set poster(e){this.isVideo?Pt.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Gc(qf.call(this));return Z.array(e)?e.join(":"):e}set ratio(e){this.isVideo?Z.string(e)&&B0(e)?(this.config.ratio=Gc(e),xa.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=Z.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){_t.toggle.call(this,e,!1)}set currentTrack(e){_t.set.call(this,e,!1),_t.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){_t.setLanguage.call(this,e,!1)}get language(){return(_t.getCurrentTrack.call(this)||{}).language}set pip(e){if(!jt.pip)return;const t=Z.boolean(e)?e:!this.pip;Z.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?dd.active:dd.inactive),Z.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return jt.pip?Z.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===dd.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new wh(this))}static supported(e,t){return jt.check(e,t)}static loadSprite(e,t){return $0(e,t)}static setup(e,t={}){let n=null;return Z.string(e)?n=Array.from(document.querySelectorAll(e)):Z.nodeList(e)?n=Array.from(e):Z.array(e)&&(n=e.filter(Z.element)),Z.empty(n)?null:n.map(s=>new Go(s,t))}}Go.defaults=MM(X0);const QM=document.querySelectorAll(".js-player");let pd;QM.length>0&&(pd=Go.setup(".js-player",{}),pd.forEach((i,e)=>{i.on("play",()=>{pd.forEach((t,n)=>{n!==e&&t.pause()})})}));const ze=(i,e=1e4)=>(i=parseFloat(i+"")||0,Math.round((i+Number.EPSILON)*e)/e),xh=function(i){if(!(i&&i instanceof Element&&i.offsetParent))return!1;const e=i.scrollHeight>i.clientHeight,t=window.getComputedStyle(i).overflowY,n=t.indexOf("hidden")!==-1,s=t.indexOf("visible")!==-1;return e&&!n&&!s},Wc=function(i,e=void 0){return!(!i||i===document.body||e&&i===e)&&(xh(i)?i:Wc(i.parentElement,e))},Nn=function(i){var e=new DOMParser().parseFromString(i,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},Kf=i=>`${i||""}`.split(" ").filter(e=>!!e),Fn=(i,e,t)=>{i&&Kf(e).forEach(n=>{i.classList.toggle(n,t||!1)})};let Dr=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}};const kr={passive:!1};let JM=class{constructor(e,{start:t=()=>!0,move:n=()=>{},end:s=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=n,this.endCallback=s;for(const r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,kr),this.element.addEventListener("touchstart",this.onTouchStart,kr),this.element.addEventListener("touchmove",this.onMove,kr),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const t=new Dr(e);this.currentPointers.some(n=>n.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new Dr(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const t=this.currentPointers.slice(),n="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new Dr(r)):[new Dr(e)],s=[];for(const r of n){const a=this.currentPointers.findIndex(o=>o.id===r.id);a<0||(s.push(r),this.currentPointers[a]=r)}s.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new Dr(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new Dr(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){const n=this.currentPointers.findIndex(s=>s.id===t.id);n<0||(this.currentPointers.splice(n,1),this.startPointers.splice(n,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,kr),this.element.removeEventListener("touchstart",this.onTouchStart,kr),this.element.removeEventListener("touchmove",this.onMove,kr),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function Wm(i,e){return e?Math.sqrt(Math.pow(e.clientX-i.clientX,2)+Math.pow(e.clientY-i.clientY,2)):0}function jm(i,e){return e?{clientX:(i.clientX+e.clientX)/2,clientY:(i.clientY+e.clientY)/2}:i}const Sh=i=>typeof i=="object"&&i!==null&&i.constructor===Object&&Object.prototype.toString.call(i)==="[object Object]",Oi=(i,...e)=>{const t=e.length;for(let n=0;n<t;n++){const s=e[n]||{};Object.entries(s).forEach(([r,a])=>{const o=Array.isArray(a)?[]:{};i[r]||Object.assign(i,{[r]:o}),Sh(a)?Object.assign(i[r],Oi(o,a)):Array.isArray(a)?Object.assign(i,{[r]:[...a]}):Object.assign(i,{[r]:a})})}return i},md=function(i,e){return i.split(".").reduce((t,n)=>typeof t=="object"?t[n]:void 0,e)};let jc=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?Oi({},this.constructor.defaults,e):{};for(const[t,n]of Object.entries(this.option("on")||{}))this.on(t,n)}option(e,...t){let n=md(e,this.options);return n&&typeof n=="function"&&(n=n.call(this,this,...t)),n}optionFor(e,t,n,...s){let r=md(t,e);var a;typeof(a=r)!="string"||isNaN(a)||isNaN(parseFloat(a))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...s));let o=md(t,this.options);return o&&typeof o=="function"?r=o.call(this,this,e,...s,r):r===void 0&&(r=o),r===void 0?n:r}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(n,s,r)=>{let a="";return r?a=this.option(`${s[0]+s.toLowerCase().substring(1)}.l10n.${r}`):s&&(a=this.option(`l10n.${s}`)),a||(a=n),a});for(let n=0;n<t.length;n++)e=e.split(t[n][0]).join(t[n][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(n,s)=>s)}on(e,t){let n=[];typeof e=="string"?n=e.split(" "):Array.isArray(e)&&(n=e),this.events||(this.events=new Map),n.forEach(s=>{let r=this.events.get(s);r||(this.events.set(s,[]),r=[]),r.includes(t)||r.push(t),this.events.set(s,r)})}off(e,t){let n=[];typeof e=="string"?n=e.split(" "):Array.isArray(e)&&(n=e),n.forEach(s=>{const r=this.events.get(s);if(Array.isArray(r)){const a=r.indexOf(t);a>-1&&r.splice(a,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(n=>n(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(jc,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(jc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});let Zf=class extends jc{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const t=new Map;for(const[n,s]of Object.entries(e)){const r=this.option(n),a=this.plugins[n];a||r===!1?a&&r===!1&&(a.detach(),delete this.plugins[n]):t.set(n,new s(this,r||{}))}for(const[n,s]of t)this.plugins[n]=s,s.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const t of e){const n=this.plugins[t];n&&n.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}};var Tt;(function(i){i[i.Init=0]="Init",i[i.Error=1]="Error",i[i.Ready=2]="Ready",i[i.Panning=3]="Panning",i[i.Mousemove=4]="Mousemove",i[i.Destroy=5]="Destroy"})(Tt||(Tt={}));const Yn=["a","b","c","d","e","f"],K0={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},eC={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:K0},Xm='<circle cx="25" cy="25" r="20"></circle>',Qf='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Xm+Xm+"</svg></div>",Ii=i=>i&&i!==null&&i instanceof Element&&"nodeType"in i,xt=(i,e)=>{i&&Kf(e).forEach(t=>{i.classList.remove(t)})},Ye=(i,e)=>{i&&Kf(e).forEach(t=>{i.classList.add(t)})},Dl={a:1,b:0,c:0,d:1,e:0,f:0},tC=1e5,kl=1e4,Qi="mousemove",qm="drag",Ym="content",Ji="auto";let gd=null,vd=null,Wo=class Z0 extends Zf{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return vd===null&&(vd=window.matchMedia("(hover: none)").matches),vd}get isMobile(){return gd===null&&(gd=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),gd}get panMode(){return this.options.panMode!==Qi||this.isTouchDevice?qm:Qi}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e===Ji?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){const{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:t}=this,n=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,n)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of Yn){const t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},n={}){var s;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Tt.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Dl)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Dl)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},Z0.Plugins),n)),this.emit("attachPlugins"),this.emit("init");const r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const a=Nn(Qf);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(a):this.spinner=((s=r.parentElement)===null||s===void 0?void 0:s.insertBefore(a,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,t=this.cn(Ym);let n=this.option(Ym)||e.querySelector(`.${t}`);if(n||(n=e.querySelector("img,picture")||e.firstElementChild,n&&Ye(n,t)),n instanceof HTMLPictureElement&&(n=n.querySelector("img")),!n)throw new Error("No content found");this.content=n}onLoad(){const{spinner:e,container:t,state:n}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),n===Tt.Init?this.enable():this.updateMetrics()}onError(){this.state!==Tt.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=Tt.Error,this.emit("error"))}getNextScale(e){const{fullScale:t,targetScale:n,coverScale:s,maxScale:r,minScale:a}=this;let o=a;switch(e){case"toggleMax":o=n-a<.5*(r-a)?r:a;break;case"toggleCover":o=n-a<.5*(s-a)?s:a;break;case"toggleZoom":o=n-a<.5*(t-a)?t:a;break;case"iterateZoom":let l=[1,t,r].sort((c,d)=>c-d),u=l.findIndex(c=>c>n+1e-5);o=l[u]||1}return o}attachObserver(){var e;const t=()=>{const{container:n,containerRect:s}=this;return Math.abs(s.width-n.getBoundingClientRect().width)>.1||Math.abs(s.height-n.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new JM(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Qi,this.onMouseMove)}detachEvents(){var e;const{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(Qi,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,t=this.option("maxVelocity");for(const n of Yn)e?(this.velocity[n]*=1-e,t&&!this.isScaling&&(this.velocity[n]=Math.max(Math.min(this.velocity[n],t),-1*t)),this.current[n]+=this.velocity[n]):this.current[n]=this.target[n];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of Yn)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){const{current:n}=this,s=n.e+e,r=n.f+t,a=this.getBounds(),{x:o,y:l}=a,u=o.min,c=o.max,d=l.min,h=l.max;let f=0,p=0;return u!==1/0&&s<u?f=u-s:c!==1/0&&s>c&&(f=c-s),d!==1/0&&r<d?p=d-r:h!==1/0&&r>h&&(p=h-r),Math.abs(f)<1e-4&&(f=0),Math.abs(p)<1e-4&&(p=0),Object.assign(Object.assign({},a),{xDiff:f,yDiff:p,inBounds:!f&&!p})}clampTargetBounds(){const{target:e}=this,{x:t,y:n}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),n.min!==1/0&&(e.f=Math.max(e.f,n.min)),n.max!==1/0&&(e.f=Math.min(e.f,n.max))}calculateContentDim(e=this.current){const{content:t,contentRect:n}=this,{fitWidth:s,fitHeight:r,fullWidth:a,fullHeight:o}=n;let l=a,u=o;if(this.option("zoom")||this.angle!==0){const c=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),d=c?a:s,h=c?o:r,f=this.getMatrix(e),p=new DOMPoint(0,0).matrixTransform(f),g=new DOMPoint(0+d,0).matrixTransform(f),v=new DOMPoint(0+d,0+h).matrixTransform(f),m=new DOMPoint(0,0+h).matrixTransform(f),b=Math.abs(v.x-p.x),_=Math.abs(v.y-p.y),y=Math.abs(m.x-g.x),M=Math.abs(m.y-g.y);l=Math.max(b,y),u=Math.max(_,M)}return{contentWidth:l,contentHeight:u}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Qi||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:t,y:n,xDiff:s,yDiff:r}=this.checkBounds(),a=this.option("maxVelocity");let o=this.velocity.e,l=this.velocity.f;s!==0?(this.isBouncingX=!0,s*o<=0?o+=.14*s:(o=.14*s,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),a&&(o=Math.max(Math.min(o,a),-1*a))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*l<=0?l+=.14*r:(l=.14*r,n.min!==1/0&&(this.target.f=Math.max(e.f,n.min)),n.max!==1/0&&(this.target.f=Math.min(e.f,n.max))),a&&(l=Math.max(Math.min(l,a),-1*a))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=o),this.isBouncingY&&(this.velocity.f=l)}enable(){const{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const n of Yn)this.current[n]=this.target[n]=t[n];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=Tt.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());const n=e.target;if(!n||e.defaultPrevented)return;if(n.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const f=window.getSelection();return f&&f.type==="Range"})()&&!n.closest("button"))return;const s=n.closest("[data-panzoom-action]"),r=n.closest("[data-panzoom-change]"),a=s||r,o=a&&Ii(a)?a.dataset:null;if(o){const f=o.panzoomChange,p=o.panzoomAction;if((f||p)&&e.preventDefault(),f){let g={};try{g=JSON.parse(f)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(g)}if(p)return void(this[p]&&this[p]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(n.closest("[data-fancybox]"))return;const l=this.content.getBoundingClientRect(),u=this.dragStart;if(u.time&&!this.canZoomOut()&&(Math.abs(l.x-u.x)>2||Math.abs(l.y-u.y)>2))return;this.dragStart.time=0;const c=f=>{this.option("zoom",e)&&f&&typeof f=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(f)&&typeof this[f]=="function"&&(e.preventDefault(),this[f]({event:e}))},d=this.option("click",e),h=this.option("dblClick",e);h?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&d&&c(d)):(this.emit("dblClick",e),e.defaultPrevented||c(h)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&d&&c(d))}addTrackingPoint(e){const t=this.trackingPoints.filter(n=>n.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,n){var s;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Qi&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const a=e.composedPath()[0];if(!n.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(a.nodeName)||a.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(s=window.getSelection())===null||s===void 0||s.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(a.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,n){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&ze(this.targetScale)<=ze(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);const{content:s}=this,r=jm(n[0],n[1]),a=jm(t[0],t[1]);let o=0,l=0;if(t.length>1){const _=s.getBoundingClientRect();o=r.clientX-_.left-.5*_.width,l=r.clientY-_.top-.5*_.height}const u=Wm(n[0],n[1]),c=Wm(t[0],t[1]);let d=u?c/u:1,h=a.clientX-r.clientX,f=a.clientY-r.clientY;this.dragOffset.x+=h,this.dragOffset.y+=f,this.dragOffset.time=Date.now()-this.dragStart.time;let p=ze(this.targetScale)===ze(this.minScale)&&this.option("lockAxis");if(p&&!this.lockedAxis)if(p==="xy"||p==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const _=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=_>45&&_<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,h=0,f=0}else this.lockedAxis=p;if(Wc(e.target,this.content)&&(p="x",this.dragOffset.y=0),p&&p!=="xy"&&this.lockedAxis!==p&&ze(this.targetScale)===ze(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const g=this.checkBounds(h,f);this.option("rubberband")?(this.isInfinite!=="x"&&(g.xDiff>0&&h<0||g.xDiff<0&&h>0)&&(h*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*g.xDiff))),this.isInfinite!=="y"&&(g.yDiff>0&&f<0||g.yDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*g.yDiff)))):(g.xDiff&&(h=0),g.yDiff&&(f=0));const v=this.targetScale,m=this.minScale,b=this.maxScale;v<.5*m&&(d=Math.max(d,m)),v>1.5*b&&(d=Math.min(d,b)),this.lockedAxis==="y"&&ze(v)===ze(m)&&(h=0),this.lockedAxis==="x"&&ze(v)===ze(m)&&(f=0),this.applyChange({originX:o,originY:l,panX:h,panY:f,scale:d,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,n){if(n.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Wc(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==Tt.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const _ of Yn)this.velocity[_]=0;this.target.e=this.current.e,this.target.f=this.current.f,xt(this.container,"is-scaling"),xt(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:n}=this,s=n[0],r=n[n.length-1];let a=0,o=0,l=0;r&&s&&(a=r.clientX-s.clientX,o=r.clientY-s.clientY,l=r.time-s.time);const u=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;u!==1&&(a*=u,o*=u);let c=0,d=0,h=0,f=0,p=this.option("decelFriction");const g=this.targetScale;if(l>0){h=Math.abs(a)>3?a/(l/30):0,f=Math.abs(o)>3?o/(l/30):0;const _=this.option("maxVelocity");_&&(h=Math.max(Math.min(h,_),-1*_),f=Math.max(Math.min(f,_),-1*_))}h&&(c=h/(1/(1-p)-1)),f&&(d=f/(1/(1-p)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&ze(g)===this.minScale)&&(c=h=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&ze(g)===this.minScale)&&(d=f=0);const v=this.dragOffset.x,m=this.dragOffset.y,b=this.option("dragMinThreshold")||0;Math.abs(v)<b&&Math.abs(m)<b&&(c=d=0,h=f=0),(this.option("zoom")&&(g<this.minScale-1e-5||g>this.maxScale+1e-5)||t&&!c&&!d)&&(p=.35),this.applyChange({panX:c,panY:d,friction:p}),this.emit("decel",h,f,v,m)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,a){return Math.abs(a)>Math.abs(r)?a:r});const n=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,n),this.panMode===Qi||e.defaultPrevented)return;const s=this.option("wheel");s==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):s==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:t,content:n,contentRect:s}=this,r=Object.assign({},Dl);for(const v of Yn){const m=v=="e"||v==="f"?kl:tC;r[v]=ze(e[v],m),Math.abs(t[v]-e[v])<(v=="e"||v==="f"?.51:.001)&&(e[v]=t[v])}let{a,b:o,c:l,d:u,e:c,f:d}=r,h=`matrix(${a}, ${o}, ${l}, ${u}, ${c}, ${d})`,f=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===h)return;f.style.transform=h;const{contentWidth:p,contentHeight:g}=this.calculateContentDim();s.width=p,s.height=g,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===Tt.Destroy||this.isContentLoading)return;const n=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:s,content:r}=this,a=r instanceof HTMLImageElement,o=s.getBoundingClientRect(),l=getComputedStyle(this.container);let u=o.width*n,c=o.height*n;const d=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),h=u-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),f=c-d;this.containerRect={width:u,height:c,innerWidth:h,innerHeight:f};const p=parseFloat(r.dataset.width||"")||(T=>{let R=0;return R=T instanceof HTMLImageElement?T.naturalWidth:T instanceof SVGElement?T.width.baseVal.value:Math.max(T.offsetWidth,T.scrollWidth),R||0})(r),g=parseFloat(r.dataset.height||"")||(T=>{let R=0;return R=T instanceof HTMLImageElement?T.naturalHeight:T instanceof SVGElement?T.height.baseVal.value:Math.max(T.offsetHeight,T.scrollHeight),R||0})(r);let v=this.option("width",p)||Ji,m=this.option("height",g)||Ji;const b=v===Ji,_=m===Ji;typeof v!="number"&&(v=p),typeof m!="number"&&(m=g),b&&(v=p*(m/g)),_&&(m=g/(p/v));let y=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(y=y.parentElement||y);const M=y.getAttribute("style")||"";y.style.setProperty("transform","none","important"),a&&(y.style.width="",y.style.height=""),y.offsetHeight;const x=r.getBoundingClientRect();let S=x.width*n,A=x.height*n,E=S,w=A;S=Math.min(S,v),A=Math.min(A,m),a?{width:S,height:A}=((T,R,F,z)=>{const D=F/T,O=z/R,j=Math.min(D,O);return{width:T*=j,height:R*=j}})(v,m,S,A):(S=Math.min(S,v),A=Math.min(A,m));let C=.5*(w-A),P=.5*(E-S);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:x.top-o.top+C,bottom:o.bottom-x.bottom+C,left:x.left-o.left+P,right:o.right-x.right+P,fitWidth:S,fitHeight:A,width:S,height:A,fullWidth:v,fullHeight:m}),y.style.cssText=M,a&&(y.style.width=`${S}px`,y.style.height=`${A}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(ze(this.targetScale)<ze(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===Tt.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:n,lockedAxis:s}=this,{fitWidth:r,fitHeight:a}=this.contentRect;let o=0,l=0,u=0,c=0;const d=this.option("infinite");if(d===!0||s&&d===s)o=-1/0,u=1/0,l=-1/0,c=1/0;else{let{containerRect:h,contentRect:f}=this,p=ze(r*n,kl),g=ze(a*n,kl),{innerWidth:v,innerHeight:m}=h;if(h.width===p&&(v=h.width),h.width===g&&(m=h.height),e>v){u=.5*(e-v),o=-1*u;let b=.5*(f.right-f.left);o+=b,u+=b}if(r>v&&e<v&&(o-=.5*(r-v),u-=.5*(r-v)),t>m){c=.5*(t-m),l=-1*c;let b=.5*(f.bottom-f.top);l+=b,c+=b}a>m&&t<m&&(o-=.5*(a-m),u-=.5*(a-m))}return{x:{min:o,max:u},y:{min:l,max:c}}}getBounds(){const e=this.option("bounds");return e!==Ji?e:this.calculateBounds()}updateControls(){const e=this,t=e.container,{panMode:n,contentRect:s,targetScale:r,minScale:a}=e;let o=a,l=e.option("click")||!1;l&&(o=e.getNextScale(l));let u=e.canZoomIn(),c=e.canZoomOut(),d=n===qm&&!!this.option("touch"),h=c&&d;if(d&&(ze(r)<ze(a)&&!this.panOnlyZoomed&&(h=!0),(ze(s.width,1)>ze(s.fitWidth,1)||ze(s.height,1)>ze(s.fitHeight,1))&&(h=!0)),ze(s.width*r,1)<ze(s.fitWidth,1)&&(h=!1),n===Qi&&(h=!1),Fn(t,this.cn("isDraggable"),h),!this.option("zoom"))return;let f=u&&ze(o)>ze(r),p=!f&&!h&&c&&ze(o)<ze(r);Fn(t,this.cn("canZoomIn"),f),Fn(t,this.cn("canZoomOut"),p);for(const g of t.querySelectorAll("[data-panzoom-action]")){let v=!1,m=!1;switch(g.dataset.panzoomAction){case"zoomIn":u?v=!0:m=!0;break;case"zoomOut":c?v=!0:m=!0;break;case"toggleZoom":case"iterateZoom":u||c?v=!0:m=!0;const b=g.querySelector("g");b&&(b.style.display=u?"":"none")}v?(g.removeAttribute("disabled"),g.removeAttribute("tabindex")):m&&(g.setAttribute("disabled",""),g.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:n=this.targetScale,friction:s=this.option("friction"),angle:r=0,originX:a=0,originY:o=0,flipX:l=!1,flipY:u=!1,ignoreBounds:c=!1}){this.state!==Tt.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:n/this.targetScale,angle:r,originX:a,originY:o,friction:s,flipX:l,flipY:u,ignoreBounds:c})}applyChange({panX:e=0,panY:t=0,scale:n=1,angle:s=0,originX:r=-this.current.e,originY:a=-this.current.f,friction:o=this.option("friction"),flipX:l=!1,flipY:u=!1,ignoreBounds:c=!1,bounce:d=this.option("bounce")}){const h=this.state;if(h===Tt.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=o||0,this.ignoreBounds=c;const{current:f}=this,p=f.e,g=f.f,v=this.getMatrix(this.target);let m=new DOMMatrix().translate(p,g).translate(r,a).translate(e,t);if(this.option("zoom")){if(!c){const b=this.targetScale,_=this.minScale,y=this.maxScale;b*n<_&&(n=_/b),b*n>y&&(n=y/b)}m=m.scale(n)}m=m.translate(-r,-a).translate(-p,-g).multiply(v),s&&(m=m.rotate(s)),l&&(m=m.scale(-1,1)),u&&(m=m.scale(1,-1));for(const b of Yn)b!=="e"&&b!=="f"&&(m[b]>this.minScale+1e-5||m[b]<this.minScale-1e-5)?this.target[b]=m[b]:this.target[b]=ze(m[b],kl);(this.targetScale<this.scale||Math.abs(n-1)>.1||this.panMode===Qi||d===!1)&&!c&&this.clampTargetBounds(),h===Tt.Init?this.animate():this.isResting||(this.state=Tt.Panning,this.requestTick())}stop(e=!1){if(this.state===Tt.Init||this.state===Tt.Destroy)return;const t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const n of Yn)this.velocity[n]=0,e==="current"?this.current[n]=this.target[n]:e==="target"&&(this.target[n]=this.current[n]);this.setTransform(),xt(this.container,"is-scaling"),xt(this.container,"is-animating"),this.isTicking=!1,this.state=Tt.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),Ye(this.container,"is-animating"),this.isScaling&&Ye(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==Qi||!e||ze(this.targetScale)<=ze(this.minScale))return;this.emit("mouseMove",e);const{container:n,containerRect:s,contentRect:r}=this,a=s.width,o=s.height,l=n.getBoundingClientRect(),u=(e.clientX||0)-l.left,c=(e.clientY||0)-l.top;let{contentWidth:d,contentHeight:h}=this.calculateContentDim(this.target);const f=this.option("mouseMoveFactor");f>1&&(d!==a&&(d*=f),h!==o&&(h*=f));let p=.5*(d-a)-u/a*100/100*(d-a);p+=.5*(r.right-r.left);let g=.5*(h-o)-c/o*100/100*(h-o);g+=.5*(r.bottom-r.top),this.applyChange({panX:p-this.target.e,panY:g-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===Tt.Destroy||this.state===Tt.Init)return;const t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(u,c){return Math.abs(c)>Math.abs(u)?c:u});const s=Math.max(-1,Math.min(1,n)),{targetScale:r,maxScale:a,minScale:o}=this;let l=r*(100+45*s)/100;ze(l)<ze(o)&&ze(r)<=ze(o)?(this.cwd+=Math.abs(s),l=o):ze(l)>ze(a)&&ze(r)>=ze(a)?(this.cwd+=Math.abs(s),l=a):(this.cwd=0,l=Math.max(Math.min(l,a),o)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),ze(l)!==ze(r)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(ze(this.contentRect.width,1)<ze(this.contentRect.fitWidth,1)||ze(this.targetScale)<ze(this.maxScale))}canZoomOut(){return this.option("zoom")&&ze(this.targetScale)>ze(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t=Ji,originX:n=Ji,originY:s=Ji,event:r}={}){if(this.isContentLoading||this.state===Tt.Destroy)return;const{targetScale:a,fullScale:o,maxScale:l,coverScale:u}=this;if(this.stop(),this.panMode===Qi&&(r=this.pmme||r),r||n===Ji||s===Ji){const d=this.content.getBoundingClientRect(),h=this.container.getBoundingClientRect(),f=r?r.clientX:h.left+.5*h.width,p=r?r.clientY:h.top+.5*h.height;n=f-d.left-.5*d.width,s=p-d.top-.5*d.height}let c=1;typeof e=="number"?c=e:e==="full"?c=o:e==="cover"?c=u:e==="max"?c=l:e==="fit"?c=1:e==="next"&&(c=this.getNextScale("iterateZoom")),c=c/a||1,t=t===Ji?c>1?.15:.25:t,this.applyChange({scale:c,originX:n,originY:s,friction:t}),r&&this.panMode===Qi&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:t,target:n}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-n.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-n.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:t,target:n}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-n.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-n.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,t=this.cn("inFullscreen"),n=this.cn("htmlHasFullscreen");e.classList.toggle(t);const s=e.classList.contains(t);s?(document.documentElement.classList.add(n),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(n),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:t,b:n,c:s,d:r,e:a,f:o}=e;return new DOMMatrix([t,n,s,r,a,o])}reset(e){if(this.state!==Tt.Init&&this.state!==Tt.Destroy){this.stop("current");for(const t of Yn)this.target[t]=Dl[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=Tt.Panning,this.requestTick())}}destroy(){this.stop(),this.state=Tt.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:t}=this,n=this.option("classes")||{};for(const s of Object.values(n))e.classList.remove(s+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(Wo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:eC}),Object.defineProperty(Wo,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const Km=function(i,e){let t=!0;return(...n)=>{t&&(t=!1,i(...n),setTimeout(()=>{t=!0},e))}},Zm=(i,e)=>{let t=[];return i.childNodes.forEach(n=>{n.nodeType!==Node.ELEMENT_NODE||e&&!n.matches(e)||t.push(n)}),t},iC={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var qt;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Destroy=2]="Destroy"})(qt||(qt={}));const yd=i=>{if(typeof i=="string"||i instanceof HTMLElement)i={html:i};else{const e=i.thumb;e!==void 0&&(typeof e=="string"&&(i.thumbSrc=e),e instanceof HTMLImageElement&&(i.thumbEl=e,i.thumbElSrc=e.src,i.thumbSrc=e.src),delete i.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},i)},nC=(i={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},i);let Tn=class extends jc{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}};const sC={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};let Q0=class extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),Ye(e,this.cn("list")),e.setAttribute("role","tablist");const t=this.instance.container;t.appendChild(e),Ye(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const t=this.instance.pages.length,n=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<n||t>s)return void this.cleanup();const a=typeof r=="number"&&t>5&&t>=r,o=!this.list||this.isDynamic!==a||this.list.children.length!==t;o&&this.cleanup();const l=this.build();if(Fn(l,this.cn("isDynamic"),!!a),o)for(let d=0;d<t;d++)l.append(this.createItem(d));let u,c=0;for(const d of[...l.children]){const h=c===this.instance.page;h&&(u=d),Fn(d,this.cn("isCurrent"),h),(e=d.children[0])===null||e===void 0||e.setAttribute("aria-selected",h?"true":"false");for(const f of["isBeforePrev","isPrev","isNext","isAfterNext"])xt(d,this.cn(f));c++}if(u=u||l.firstChild,a&&u){const d=u.previousElementSibling,h=d&&d.previousElementSibling;Ye(d,this.cn("isPrev")),Ye(h,this.cn("isBeforePrev"));const f=u.nextElementSibling,p=f&&f.nextElementSibling;Ye(f,this.cn("isNext")),Ye(p,this.cn("isAfterNext"))}this.isDynamic=a}createItem(e=0){var t;const n=document.createElement("li");n.setAttribute("role","presentation");const s=Nn(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return n.appendChild(s),(t=n.children[0])===null||t===void 0||t.setAttribute("role","tab"),n}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,xt(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Q0,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:sC});const Nl="disabled",Fl="next",Qm="prev";let J0=class extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,t=e.pages.length,n=e.page;if(t<2)return void this.cleanup();this.build();let s=this.prev,r=this.next;s&&r&&(s.removeAttribute(Nl),r.removeAttribute(Nl),e.isInfinite||(n<=0&&s.setAttribute(Nl,""),n>=t-1&&r.setAttribute(Nl,"")))}addBtn(e){var t;const n=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",n.localize(`{{${e.toUpperCase()}}}`)),Ye(s,this.cn("button")+" "+this.cn(e===Fl?"isNext":"isPrev"));const r=n.isRTL?e===Fl?Qm:Fl:e;var a;return s.innerHTML=n.localize(this.option(`${r}Tpl`)),s.dataset[`carousel${a=e,a?a.match("^[a-z]")?a.charAt(0).toUpperCase()+a.substring(1):a:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(s),s}build(){const e=this.instance.container,t=this.cn("container");let{container:n,prev:s,next:r}=this;n||(n=e.querySelector("."+t),this.isDom=!!n),n||(n=document.createElement("div"),Ye(n,t),e.appendChild(n)),this.container=n,r||(r=n.querySelector("[data-carousel-next]")),r||(r=this.addBtn(Fl)),this.next=r,s||(s=n.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(Qm)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(J0,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});let ey=class extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===qt.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===qt.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,n){this.onNavTouch(e,e.panzoom,n)}onNavTouch(e,t,n){var s,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;const a=n.target,{nav:o,target:l}=this;if(!o||!l||!a)return;const u=a.closest("[data-index]");if(n.stopPropagation(),n.preventDefault(),!u)return;const c=parseInt(u.dataset.index||"",10)||0,d=l.getPageForSlide(c),h=o.getPageForSlide(c);o.slideTo(h),l.slideTo(d,{friction:((r=(s=this.nav)===null||s===void 0?void 0:s.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;const{target:n,nav:s}=this;if(!n||!s||s.state!==qt.Ready||n.state!==qt.Ready)return;const r=(t=(e=n.pages[n.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,a=s.getPageForSlide(r);this.markSelectedSlide(r),s.slideTo(a,s.prevPage===null&&n.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const t=this.nav;t&&t.state===qt.Ready&&(this.selectedIndex=e,[...t.slides].map(n=>{n.el&&n.el.classList[n.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let t=e.options.target,n=e.options.nav;t?e.addAsNavFor(t):n&&e.addAsTargetFor(n)}detach(){const e=this,t=e.nav,n=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,n&&(n.off("ready",e.onTargetReady),n.off("refresh",e.onTargetChange),n.off("change",e.onTargetChange)),e.target=null}};Object.defineProperty(ey,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const rC={Navigation:J0,Dots:Q0,Sync:ey},Ul="animationend",Jm="isSelected",zl="slide";let Sc=class Th extends Zf{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===qt.Ready}get isInfinite(){let e=!1;const{contentDim:t,viewportDim:n,pages:s,slides:r}=this,a=r[0];return s.length>=2&&a&&t+a.dim>=n&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},n={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:qt.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Ii(e))throw new Error("No Element found");this.container=e,this.slideNext=Km(this.slideNext.bind(this),150),this.slidePrev=Km(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=n,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;const n=Oi({},Th.defaults,this.userOptions);let s="";const r=n.breakpoints;if(r&&Sh(r))for(const[a,o]of Object.entries(r))window.matchMedia(a).matches&&Sh(o)&&(s+=a,Oi(n,o));s===this.bp&&this.state!==qt.Init||(this.bp=s,this.state===qt.Ready&&(n.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==qt.Init&&this.destroy(),super.setOptions(n),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=qt.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Th.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=qt.Ready,this.emit("ready")}initLayout(){const{container:e}=this,t=this.option("classes");Ye(e,this.cn("container")),Fn(e,t.isLTR,!this.isRTL),Fn(e,t.isRTL,this.isRTL),Fn(e,t.isVertical,!this.isHorizontal),Fn(e,t.isHorizontal,this.isHorizontal);let n=this.option("viewport")||e.querySelector(`.${t.viewport}`);n||(n=document.createElement("div"),Ye(n,t.viewport),n.append(...Zm(e,`.${t.slide}`)),e.prepend(n)),n.addEventListener("scroll",this.onScroll);let s=this.option("track")||e.querySelector(`.${t.track}`);s||(s=document.createElement("div"),Ye(s,t.track),s.append(...Array.from(n.childNodes))),s.setAttribute("aria-live","polite"),n.contains(s)||n.prepend(s),this.viewport=n,this.track=s,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const t=[...this.slides],n=[];[...Zm(e,`.${this.cn(zl)}`)].forEach(s=>{if(Ii(s)){const r=yd({el:s,isDom:!0,index:this.slides.length});n.push(r)}});for(let s of[...this.option("slides",[])||[],...t])n.push(yd(s));this.slides=n;for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;for(const s of n)this.emit("beforeInitSlide",s,s.index),this.emit("initSlide",s,s.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:t,isHorizontal:n}=this;if(!e||!t.length)return;let s=this.page;t[s]||(this.page=s=0);const r=(t[s].pos||0)*(this.isRTL&&n?1:-1),a=n?`${r}px`:"0",o=n?"0":`${r}px`;e.style.transform=`translate3d(${a}, ${o}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new Wo(this.viewport,Oi({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,n,...s)=>{this.emit(`Panzoom.${n}`,t,...s)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:t,viewportDim:n}=this;let s=this.option("slidesPerPage");s=(s==="auto"||t<=n)&&this.option("fill")!==!1?1/0:parseFloat(s+"");let r=0,a=0,o=0;for(const l of this.slides)(!e.length||a+l.dim-n>.05||o>=s)&&(e.push(nC()),r=e.length-1,a=0,o=0),e[r].slides.push(l),a+=l.dim+l.gap,o++;return e}processPages(){const e=this.pages,{contentDim:t,viewportDim:n,isInfinite:s}=this,r=this.option("center"),a=this.option("fill"),o=a&&r&&t>n&&!s;if(e.forEach((c,d)=>{var h;c.index=d,c.pos=((h=c.slides[0])===null||h===void 0?void 0:h.pos)||0,c.dim=0;for(const[f,p]of c.slides.entries())c.dim+=p.dim,f<c.slides.length-1&&(c.dim+=p.gap);o&&c.pos+.5*c.dim<.5*n?c.pos=0:o&&c.pos+.5*c.dim>=t-.5*n?c.pos=t-n:r&&(c.pos+=-.5*(n-c.dim))}),e.forEach(c=>{a&&!s&&t>n&&(c.pos=Math.max(c.pos,0),c.pos=Math.min(c.pos,t-n)),c.pos=ze(c.pos,1e3),c.dim=ze(c.dim,1e3),Math.abs(c.pos)<=.1&&(c.pos=0)}),s)return e;const l=[];let u;return e.forEach(c=>{const d=Object.assign({},c);u&&d.pos===u.pos?(u.dim+=d.dim,u.slides=[...u.slides,...d.slides]):(d.index=l.length,u=d,l.push(d))}),l}getPageFromIndex(e=0){const t=this.pages.length;let n;return e=parseInt((e||0).toString())||0,n=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),n}getSlideMetrics(e){var t,n;const s=this.isHorizontal?"width":"height";let r=0,a=0,o=e.el;const l=!(!o||o.parentNode);if(o?r=parseFloat(o.dataset[s]||"")||0:(o=document.createElement("div"),o.style.visibility="hidden",(this.track||document.body).prepend(o)),Ye(o,this.cn(zl)+" "+e.class+" "+e.customClass),r)o.style[s]=`${r}px`,o.style[s==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(o),r=o.getBoundingClientRect()[s]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let c=o[this.isHorizontal?"offsetWidth":"offsetHeight"];c-1>r&&(r=c)}const u=getComputedStyle(o);return u.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(u.paddingLeft)||0,r+=parseFloat(u.paddingRight)||0):(r+=parseFloat(u.paddingTop)||0,r+=parseFloat(u.paddingBottom)||0)),a=parseFloat(u[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(n=o.parentElement)===null||n===void 0||n.removeChild(o):e.el||o.remove(),{dim:ze(r,1e3),gap:ze(a,1e3)}}getBounds(){const{isInfinite:e,isRTL:t,isHorizontal:n,pages:s}=this;let r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(s.length){const a=s[0].pos,o=s[s.length-1].pos;r=t&&n?{min:a,max:o}:{min:-1*o,max:-1*a}}return{x:n?r:{min:0,max:0},y:n?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:n,isInfinite:s,viewport:r,viewportDim:a,contentDim:o,page:l,pages:u,slides:c,panzoom:d}=this,h=0,f=0,p=0,g=0;d?g=-1*d.current[this.axis]:u[l]&&(g=u[l].pos||0),e=t?n?"right":"left":"top",n&&t&&(g*=-1);for(const _ of c){const y=_.el;y?(e==="top"?(y.style.right="",y.style.left=""):y.style.top="",_.index!==h?y.style[e]=f===0?"":`${ze(f,1e3)}px`:y.style[e]="",p+=_.dim+_.gap,h++):f+=_.dim+_.gap}if(s&&p&&r){let _=getComputedStyle(r),y="padding",M=t?"Right":"Bottom",x=parseFloat(_[y+(t?"Left":"Top")]);g-=x,a+=x,a+=parseFloat(_[y+M]);for(const S of c)S.el&&(ze(S.pos)<ze(a)&&ze(S.pos+S.dim+S.gap)<ze(g)&&ze(g)>ze(o-a)&&(S.el.style[e]=`${ze(f+p,1e3)}px`),ze(S.pos+S.gap)>=ze(o-a)&&ze(S.pos)>ze(g+a)&&ze(g)<ze(a)&&(S.el.style[e]=`-${ze(p,1e3)}px`))}let v,m,b=[...this.inTransition];if(b.length>1&&(v=u[b[0]],m=u[b[1]]),v&&m){let _=0;for(const y of c)y.el?this.inTransition.has(y.index)&&v.slides.indexOf(y)<0&&(y.el.style[e]=`${ze(_+(v.pos-m.pos),1e3)}px`):_+=y.dim+y.gap}}createSlideEl(e){const{track:t,slides:n}=this;if(!t||!e||e.el&&e.el.parentNode)return;const s=e.el||document.createElement("div");Ye(s,this.cn(zl)),Ye(s,e.class),Ye(s,e.customClass);const r=e.html;r&&(r instanceof HTMLElement?s.appendChild(r):s.innerHTML=e.html+"");const a=[];n.forEach((c,d)=>{c.el&&a.push(d)});const o=e.index;let l=null;a.length&&(l=n[a.reduce((c,d)=>Math.abs(d-o)<Math.abs(c-o)?d:c)]);const u=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;t.insertBefore(s,t.contains(u)?u:null),e.el=s,this.emit("createSlide",e)}removeSlideEl(e,t=!1){const n=e==null?void 0:e.el;if(!n||!n.parentNode)return;const s=this.cn(Jm);if(n.classList.contains(s)&&(xt(n,s),this.emit("unselectSlide",e)),e.isDom&&!t)return n.removeAttribute("aria-hidden"),n.removeAttribute("data-index"),void(n.style.left="");this.emit("removeSlide",e);const r=new CustomEvent(Ul);n.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var n,s,r,a;if(!t)return!1;const o=this.page,{pages:l,panzoom:u}=this;e=parseInt((e||0).toString())||0;const c=this.getPageFromIndex(e);if(!u||!l[c]||l.length<2||Math.abs((((s=(n=l[o])===null||n===void 0?void 0:n.slides[0])===null||s===void 0?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let d=e>o?1:-1;this.isInfinite&&(o===0&&e===l.length-1&&(d=-1),o===l.length-1&&e===0&&(d=1));const h=l[c].pos*(this.isRTL?1:-1);if(o===c&&Math.abs(h-u.target[this.axis])<1)return!1;this.clearTransitions();const f=u.isResting;Ye(this.container,this.cn("inTransition"));const p=((r=l[o])===null||r===void 0?void 0:r.slides[0])||null,g=((a=l[c])===null||a===void 0?void 0:a.slides[0])||null;this.inTransition.add(g.index),this.createSlideEl(g);let v=p.el,m=g.el;f||t===zl||(t="fadeFast",v=null);const b=this.isRTL?"next":"prev",_=this.isRTL?"prev":"next";return v&&(this.inTransition.add(p.index),p.transition=t,v.addEventListener(Ul,this.onAnimationEnd),v.classList.add(`f-${t}Out`,`to-${d>0?_:b}`)),m&&(g.transition=t,m.addEventListener(Ul,this.onAnimationEnd),m.classList.add(`f-${t}In`,`from-${d>0?b:_}`)),u.current[this.axis]=h,u.target[this.axis]=h,u.requestTick(),this.onChange(c),!0}manageSlideVisiblity(){const e=new Set,t=new Set,n=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)n.has(s)?e.add(s):t.add(s);for(const s of this.inTransition)e.add(this.slides[s]);for(const s of e)this.createSlideEl(s),this.lazyLoadSlide(s);for(const s of t)e.has(s)||this.removeSlideEl(s);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let t=this.cn(Jm);if(t)for(const n of this.slides){const s=n.el;s&&(s.dataset.index=`${n.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(n)?s.removeAttribute(e):s.setAttribute(e,"true"):this.pages[this.page].slides.includes(n)?(s.classList.contains(t)||(Ye(s,t),this.emit("selectSlide",n)),s.removeAttribute(e)):(s.classList.contains(t)&&(xt(s,t),this.emit("unselectSlide",n)),s.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:t,isInfinite:n,isRTL:s,viewportDim:r,contentDim:a}=this,o=this.panzoom;if(!o||!n)return;let l=o.current[e],u=o.target[e]-l,c=0,d=.5*r;s&&t?(l<-d&&(c=-1,l+=a),l>a-d&&(c=1,l-=a)):(l>d&&(c=1,l-=a),l<-a+d&&(c=-1,l+=a)),c&&(o.current[e]=l,o.target[e]=l+u)}lazyLoadImg(e,t){const n=this,s="f-fadeIn",r="is-preloading";let a=!1,o=null;const l=()=>{a||(a=!0,o&&(o.remove(),o=null),xt(t,r),t.complete&&(Ye(t,s),setTimeout(()=>{xt(t,s)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(n.updateMetrics(),n.setViewportHeight()),this.emit("load",e))};Ye(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{l()}),t.addEventListener("load",()=>{l()}),setTimeout(()=>{const u=t.parentNode;u&&e.el&&(t.complete?l():a||(o=Nn(Qf),u.insertBefore(o,t)))},300)}lazyLoadSlide(e){const t=e&&e.el;if(!t)return;const n=new Set;let s=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&s.push(t),s.map(r=>{r instanceof HTMLImageElement?n.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(const r of n)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;const n=e.target,s=n?parseInt(n.dataset.index||"",10)||0:-1,r=this.slides[s],a=e.animationName;if(!n||!r||!a)return;const o=!!this.inTransition.has(s)&&r.transition;o&&a.substring(0,o.length+2)===`f-${o}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,n=0,s=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:a,isHorizontal:o,axis:l,pages:u}=this,c=u.length,d=Math.abs(Math.atan2(n,t)/(Math.PI/180));let h=0;if(h=d>45&&d<135?o?0:n:o?t:0,!c)return;let f=this.page,p=a&&o?1:-1;const g=e.current[l]*p;let{pageIndex:v}=this.getPageFromPosition(g);Math.abs(h)>5?(u[f].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(f=v),f=a&&o?h<0?f-1:f+1:h<0?f+1:f-1):f=s===0&&r===0?f:v,this.slideTo(f,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const t=e.target,n=t&&Ii(t)?t.dataset:null;let s,r;n&&(n.carouselPage!==void 0?(r="slideTo",s=n.carouselPage):n.carouselNext!==void 0?r="slideNext":n.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](s)):this.emit("click",e)}onSlideTo(e){const t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){const n=this.page;this.prevPage=n,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==n&&(this.markSelectedSlides(),this.emit("change",e,n,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=qt.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:n=this.option("transition")}={}){if(this.state===qt.Destroy)return;e=parseInt((e||0).toString())||0;const s=this.getPageFromIndex(e),{axis:r,isHorizontal:a,isRTL:o,pages:l,panzoom:u}=this,c=l.length,d=o&&a?1:-1;if(!u||!c)return;if(this.page!==s){const f=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",f,e),f.defaultPrevented)return}if(this.transitionTo(e,n))return;let h=l[s].pos;if(this.isInfinite){const f=this.contentDim,p=u.target[r]*d;c===2?h+=f*Math.floor(parseFloat(e+"")/2):h=[h,h-f,h+f].reduce(function(g,v){return Math.abs(v-p)<Math.abs(g-p)?v:g})}h*=d,Math.abs(u.target[r]-h)<1||(u.panTo({x:a?h:0,y:a?0:h,friction:t}),this.onChange(s))}slideToClosest(e){if(this.panzoom){const{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),xt(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const t of this.slides){const n=t.el;if(n){n.removeEventListener(Ul,this.onAnimationEnd),n.classList.remove(...e);const s=t.transition;s&&n.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var n,s,r,a;const o=this.panzoom,l=((n=this.pages[this.page])===null||n===void 0?void 0:n.pos)||0,u=((s=this.pages[this.page])===null||s===void 0?void 0:s.dim)||0,c=this.contentDim<this.viewportDim;let d=Array.isArray(t)?t:[t];const h=[];for(const f of d)h.push(yd(f));this.slides.splice(e,0,...h);for(let f=0;f<this.slides.length;f++)this.slides[f].index=f;for(const f of h)this.emit("beforeInitSlide",f,f.index);if(this.page>=e&&(this.page+=h.length),this.updateMetrics(),o){const f=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,p=((a=this.pages[this.page])===null||a===void 0?void 0:a.dim)||0,g=this.pages.length||1,v=this.isRTL?u-p:p-u,m=this.isRTL?l-f:f-l;c&&g===1?(e<=this.page&&(o.current[this.axis]-=v,o.target[this.axis]-=v),o.panTo({[this.isHorizontal?"x":"y"]:-1*f})):m&&e<=this.page&&(o.target[this.axis]-=m,o.current[this.axis]-=m,o.requestTick())}for(const f of h)this.emit("initSlide",f,f.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const t=this.slides.length;e=(e%t+t)%t;const n=this.slides[e];if(n){this.removeSlideEl(n,!0),this.slides.splice(e,1);for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",n)}}updateMetrics(){const{panzoom:e,viewport:t,track:n,slides:s,isHorizontal:r,isInfinite:a}=this;if(!n)return;const o=r?"width":"height",l=r?"offsetWidth":"offsetHeight";if(t){let d=Math.max(t[l],ze(t.getBoundingClientRect()[o],1e3)),h=getComputedStyle(t),f="padding",p=r?"Right":"Bottom";d-=parseFloat(h[f+(r?"Left":"Top")])+parseFloat(h[f+p]),this.viewportDim=d}let u,c=0;for(const[d,h]of s.entries()){let f=0,p=0;!h.el&&u?(f=u.dim,p=u.gap):({dim:f,gap:p}=this.getSlideMetrics(h),u=h),f=ze(f,1e3),p=ze(p,1e3),h.dim=f,h.gap=p,h.pos=c,c+=f,(a||d<s.length-1)&&(c+=p)}c=ze(c,1e3),this.contentDim=c,e&&(e.contentRect[o]=c,e.contentRect[r?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===qt.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,n=!1){e===void 0&&(e=this.page);const s=this,r=s.panzoom,a=s.contentDim,o=s.pages[e]||0;if(!o||!r)return e>this.page?-1:1;let l=-1*r.current.e,u=ze((l-o.pos)/(1*o.dim),1e3),c=u,d=u;this.isInfinite&&n!==!0&&(c=ze((l-o.pos+a)/(1*o.dim),1e3),d=ze((l-o.pos-a)/(1*o.dim),1e3));let h=[u,c,d].reduce(function(f,p){return Math.abs(p)<Math.abs(f)?p:f});return t?h:h>1?1:h<-1?-1:h}setViewportHeight(){const{page:e,pages:t,viewport:n,isHorizontal:s}=this;if(!n||!t[e])return;let r=0;s&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(a=>{a.el&&(r=Math.max(r,a.el.offsetHeight))})),n.style.height=r?`${r}px`:""}getPageForSlide(e){for(const t of this.pages)for(const n of t.slides)if(n.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;const n=new Set;let{panzoom:s,contentDim:r,viewportDim:a,pages:o,page:l}=this;if(a){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let u=0;u=s&&s.state!==Tt.Init&&s.state!==Tt.Destroy?-1*s.current[this.axis]:o[l]&&o[l].pos||0,this.isInfinite&&(u-=Math.floor(u/r)*r),this.isRTL&&this.isHorizontal&&(u*=-1);const c=u-a*e,d=u+a*(e+1),h=this.isInfinite?[-1,0,1]:[0];for(const f of this.slides)for(const p of h){const g=f.pos+p*r,v=g+f.dim+f.gap;g<d&&v>c&&n.add(f)}}return n}getPageFromPosition(e){const{viewportDim:t,contentDim:n,slides:s,pages:r,panzoom:a}=this,o=r.length,l=s.length,u=s[0],c=s[l-1],d=this.option("center");let h=0,f=0,p=0,g=e===void 0?-1*((a==null?void 0:a.target[this.axis])||0):e;d&&(g+=.5*t),this.isInfinite?(g<u.pos-.5*c.gap&&(g-=n,p=-1),g>c.pos+c.dim+.5*c.gap&&(g-=n,p=1)):g=Math.max(u.pos||0,Math.min(g,c.pos));let v=c,m=s.find(b=>{const _=b.pos-.5*v.gap,y=b.pos+b.dim+.5*b.gap;return v=b,g>=_&&g<y});return m||(m=c),f=this.getPageForSlide(m.index),h=f+p*o,{page:h,pageIndex:f}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([qt.Destroy].includes(this.state))return;this.state=qt.Destroy;const{container:e,viewport:t,track:n,slides:s,panzoom:r}=this,a=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),s&&s.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&n&&n.offsetParent&&t.replaceWith(...n.childNodes));for(const[l,u]of Object.entries(a))l!=="container"&&u&&e.classList.remove(u);this.track=null,this.viewport=null,this.page=0,this.slides=[];const o=this.events.get("ready");this.events=new Map,o&&this.events.set("ready",o)}};Object.defineProperty(Sc,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:Wo}),Object.defineProperty(Sc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:iC}),Object.defineProperty(Sc,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:rC});const ty=function(i){if(!Ii(i))return 0;const e=window.scrollY,t=window.innerHeight,n=e+t,s=i.getBoundingClientRect(),r=s.y+e,a=s.height,o=r+a;if(e>o||n<r)return 0;if(e<r&&n>o||r<e&&o>n)return 100;let l=a;r<e&&(l-=e-r),o>n&&(l-=o-n);const u=l/t*100;return Math.round(u)},Mo=!(typeof window>"u"||!window.document||!window.document.createElement);let bd;const _d=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),eg=i=>{if(i&&Mo){bd===void 0&&document.createElement("div").focus({get preventScroll(){return bd=!0,!1}});try{if(bd)i.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;i.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},iy=()=>{const i=document;let e,t="",n="",s="";return i.fullscreenEnabled?(t="requestFullscreen",n="exitFullscreen",s="fullscreenElement"):i.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",n="webkitExitFullscreen",s="webkitFullscreenElement"),t&&(e={request:function(r=i.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return i[s]&&i[n]()},isFullscreen:function(){return i[s]}}),e},Mh={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},K0),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var si,Ei;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Closing=2]="Closing",i[i.CustomClosing=3]="CustomClosing",i[i.Destroy=4]="Destroy"})(si||(si={})),function(i){i[i.Loading=0]="Loading",i[i.Opening=1]="Opening",i[i.Ready=2]="Ready",i[i.Closing=3]="Closing"}(Ei||(Ei={}));let tg="",wo=!1,Bl=!1,hr=null;const ny=()=>{let i="",e="";const t=nt.getInstance();if(t){const n=t.carousel,s=t.getSlide();if(n&&s){let r=s.slug||void 0,a=s.triggerEl||void 0;e=r||t.option("slug")||"",!e&&a&&a.dataset&&(e=a.dataset.fancybox||""),e&&e!=="true"&&(i="#"+e+(!r&&n.slides.length>1?"-"+(s.index+1):""))}}return{hash:i,slug:e,index:1}},Xc=()=>{const i=new URL(document.URL).hash,e=i.slice(1).split("-"),t=e[e.length-1],n=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:i,slug:e.join("-"),index:n}},sy=()=>{const{slug:i,index:e}=Xc();if(!i)return;let t=document.querySelector(`[data-slug="${i}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),nt.getInstance())return;const n=document.querySelectorAll(`[data-fancybox="${i}"]`);n.length&&(t=n[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},ry=()=>{if(nt.defaults.Hash===!1)return;const i=nt.getInstance();if((i==null?void 0:i.options.Hash)===!1)return;const{slug:e,index:t}=Xc(),{slug:n}=ny();i&&(e===n?i.jumpTo(t-1):(wo=!0,i.close())),sy()},ay=()=>{hr&&clearTimeout(hr),queueMicrotask(()=>{ry()})},ig=()=>{window.addEventListener("hashchange",ay,!1),setTimeout(()=>{ry()},500)};Mo&&(/complete|interactive|loaded/.test(document.readyState)?ig():document.addEventListener("DOMContentLoaded",ig));const Hl="is-zooming-in";let oy=class extends Tn{onCreateSlide(e,t,n){const s=this.instance.optionFor(n,"src")||"";n.el&&n.type==="image"&&typeof s=="string"&&this.setImage(n,s)}onRemoveSlide(e,t,n){n.panzoom&&n.panzoom.destroy(),n.panzoom=void 0,n.imageEl=void 0}onChange(e,t,n,s){xt(this.instance.container,Hl);for(const r of t.slides){const a=r.panzoom;a&&r.index!==n&&a.reset(.35)}}onClose(){var e;const t=this.instance,n=t.container,s=t.getSlide();if(!n||!n.parentElement||!s)return;const{el:r,contentEl:a,panzoom:o,thumbElSrc:l}=s;if(!r||!l||!a||!o||o.isContentLoading||o.state===Tt.Init||o.state===Tt.Destroy)return;o.updateMetrics();let u=this.getZoomInfo(s);if(!u)return;this.instance.state=si.CustomClosing,n.classList.remove(Hl),n.classList.add("is-zooming-out"),a.style.backgroundImage=`url('${l}')`;const c=n.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(n.style,{position:"absolute",top:`${n.offsetTop+window.scrollY}px`,left:`${n.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:d,y:h,scale:f,opacity:p}=u;if(p){const g=((v,m,b,_)=>{const y=m-v,M=_-b;return x=>b+((x-v)/y*M||0)})(o.scale,f,1,0);o.on("afterTransform",()=>{a.style.opacity=g(o.scale)+""})}o.on("endAnimation",()=>{t.destroy()}),o.target.a=f,o.target.b=0,o.target.c=0,o.target.d=f,o.panTo({x:d,y:h,scale:f,friction:p?.2:.33,ignoreBounds:!0}),o.isResting&&t.destroy()}setImage(e,t){const n=this.instance;e.src=t,this.process(e,t).then(s=>{const{contentEl:r,imageEl:a,thumbElSrc:o,el:l}=e;if(n.isClosing()||!r||!a)return;r.offsetHeight;const u=!!n.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",h=>{h.preventDefault()});const d=document.createElement("div");Ye(d,"fancybox-protected"),r.appendChild(d)}if(o&&u){const d=s.contentRect,h=Math.max(d.fullWidth,d.fullHeight);let f=null;!u.opacity&&h>1200&&(f=document.createElement("img"),Ye(f,"fancybox-ghost"),f.src=o,r.appendChild(f));const p=()=>{f&&(Ye(f,"f-fadeFastOut"),setTimeout(()=>{f&&(f.remove(),f=null)},200))};(c=o,new Promise((g,v)=>{const m=new Image;m.onload=g,m.onerror=v,m.src=c})).then(()=>{n.hideLoading(e),e.state=Ei.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{p(),this.instance.done(e)},()=>{}),f&&setTimeout(()=>{p()},h>2500?800:200)},()=>{n.hideLoading(e),n.revealContent(e)})}else{const d=this.optionFor(e,"initialSize"),h=this.optionFor(e,"zoom"),f={event:n.prevMouseMoveEvent||n.options.event,friction:h?.12:0};let p=n.optionFor(e,"showClass")||void 0,g=!0;n.isOpeningSlide(e)&&(d==="full"?s.zoomToFull(f):d==="cover"?s.zoomToCover(f):d==="max"?s.zoomToMax(f):g=!1,s.stop("current")),g&&p&&(p=s.isDragging?"f-fadeIn":""),n.hideLoading(e),n.revealContent(e,p)}var c},()=>{n.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((n,s)=>{var r;const a=this.instance,o=e.el;a.clearContent(e),a.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=Nn(l)),!l||!Ii(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let u="",c=e.caption;u=typeof c=="string"&&c?c.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=a.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,l.src=t||"",l.alt=u,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}Ye(l,"fancybox-image"),e.imageEl=l,a.setContent(e,l,!1),e.panzoom=new Wo(o,Oi({transformParent:!0},this.option("Panzoom")||{},{content:l,width:(u,c)=>a.optionFor(e,"width","auto",c)||"auto",height:(u,c)=>a.optionFor(e,"height","auto",c)||"auto",wheel:()=>{const u=a.option("wheel");return(u==="zoom"||u=="pan")&&u},click:(u,c)=>{var d,h;if(a.isCompact||a.isClosing()||e.index!==((d=a.getSlide())===null||d===void 0?void 0:d.index))return!1;if(c){const p=c.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(p.nodeName))return!1}let f=!c||c.target&&((h=e.contentEl)===null||h===void 0?void 0:h.contains(c.target));return a.option(f?"contentClick":"backdropClick")||!1},dblClick:()=>a.isCompact?"toggleZoom":a.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:u=>{n(u)},error:()=>{s()},destroy:()=>{s()}}}))})}zoomIn(e){return new Promise((t,n)=>{const s=this.instance,r=s.container,{panzoom:a,contentEl:o,el:l}=e;a&&a.updateMetrics();const u=this.getZoomInfo(e);if(!(u&&l&&o&&a&&r))return void n();const{x:c,y:d,scale:h,opacity:f}=u,p=()=>{e.state!==Ei.Closing&&(f&&(o.style.opacity=Math.max(Math.min(1,1-(1-a.scale)/(1-h)),0)+""),a.scale>=1&&a.scale>a.targetScale-.1&&t(a))},g=b=>{(b.scale<.99||b.scale>1.01)&&!b.isDragging||(xt(r,Hl),o.style.opacity="",b.off("endAnimation",g),b.off("touchStart",g),b.off("afterTransform",p),t(b))};a.on("endAnimation",g),a.on("touchStart",g),a.on("afterTransform",p),a.on(["error","destroy"],()=>{n()}),a.panTo({x:c,y:d,scale:h,friction:0,ignoreBounds:!0}),a.stop("current");const v={event:a.panMode==="mousemove"?s.prevMouseMoveEvent||s.options.event:void 0},m=this.optionFor(e,"initialSize");Ye(r,Hl),s.hideLoading(e),m==="full"?a.zoomToFull(v):m==="cover"?a.zoomToCover(v):m==="max"?a.zoomToMax(v):a.reset(.172)})}getZoomInfo(e){const{el:t,imageEl:n,thumbEl:s,panzoom:r}=e,a=this.instance,o=a.container;if(!t||!n||!s||!r||ty(s)<3||!this.optionFor(e,"zoom")||!o||a.state===si.Destroy||getComputedStyle(o).getPropertyValue("--f-images-zoom")==="0")return!1;const l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:u,left:c,width:d,height:h}=s.getBoundingClientRect(),{top:f,left:p,fitWidth:g,fitHeight:v}=r.contentRect;if(!(d&&h&&g&&v))return!1;const m=r.container.getBoundingClientRect();p+=m.left,f+=m.top;const b=-1*(p+.5*g-(c+.5*d)),_=-1*(f+.5*v-(u+.5*h)),y=d/g;let M=this.option("zoomOpacity")||!1;return M==="auto"&&(M=Math.abs(d/h-g/v)>.1),{x:b,y:_,scale:y,opacity:M}}attach(){const e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){const e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}};Object.defineProperty(oy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const wd="html",ng="image",Ed="map",Kn="youtube",tr="vimeo",co="html5video",sg=(i,e={})=>{const t=new URL(i),n=new URLSearchParams(t.search),s=new URLSearchParams;for(const[o,l]of[...n,...Object.entries(e)]){let u=l+"";if(o==="t"){let c=u.match(/((\d*)m)?(\d*)s?/);c&&s.set("start",60*parseInt(c[2]||"0")+parseInt(c[3]||"0")+"")}else s.set(o,u)}let r=s+"",a=i.match(/#t=((.*)?\d+s)/);return a&&(r+=`#t=${a[1]}`),r},aC={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},oC=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class ly extends Tn{onBeforeInitSlide(e,t,n){this.processType(n)}onCreateSlide(e,t,n){this.setContent(n)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);const n=t.iframeEl;n&&(n.onload=n.onerror=null,n.src="//about:blank",t.iframeEl=null);const s=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&s&&r)s.classList.remove("fancybox__content"),getComputedStyle(s).getPropertyValue("display")!=="none"&&(s.style.display="none"),setTimeout(()=>{r&&(s&&r.parentNode&&r.parentNode.insertBefore(s,r),r.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,n){n.state===Ei.Ready&&this.playVideo()}onUnselectSlide(e,t,n){var s,r;if(n.type===co){try{(r=(s=n.el)===null||s===void 0?void 0:s.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let a;n.type===tr?a={method:"pause",value:"true"}:n.type===Kn&&(a={event:"command",func:"pauseVideo"}),a&&n.iframeEl&&n.iframeEl.contentWindow&&n.iframeEl.contentWindow.postMessage(JSON.stringify(a),"*"),n.poller&&clearTimeout(n.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(n=>{n.el&&(this.resizeIframe(n),this.setAspectRatio(n))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let n of Array.from(document.getElementsByClassName("fancybox__iframe")))n instanceof HTMLIFrameElement&&n.contentWindow===e.source&&(n.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){const n=document.getElementById(t.id);n&&(n.dataset.ready="true")}}catch{}}loadAjaxContent(e){const t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const n=this.instance,s=new XMLHttpRequest;n.showLoading(e),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&n.state===si.Ready&&(n.hideLoading(e),s.status===200?n.setContent(e,s.responseText):n.setError(e,s.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const r=e.ajax||null;s.open(r?"POST":"GET",t+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(r),e.xhr=s}setInlineContent(e){let t=null;if(Ii(e.src))t=e.src;else if(typeof e.src=="string"){const n=e.src.split("#",2).pop();t=n?document.getElementById(n):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);const n=t.dataset.animationName;n&&(t.classList.remove(n),delete t.dataset.animationName);let s=t.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",s)}else if(t.parentNode){const n=document.createElement("div");n.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(n,t),e.placeholderEl=n}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:t,el:n}=e;if(!t||typeof t!="string"||!n)return;n.classList.add("is-loading");const s=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${s.id}_${e.index}`);for(const[o,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(o,l);r.onerror=()=>{s.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;const a=this.optionFor(e,"preload");if(e.type!=="iframe"||a===!1)return r.setAttribute("src",e.src+""),s.setContent(e,r,!1),this.resizeIframe(e),void s.revealContent(e);s.showLoading(e),r.onload=()=>{if(!r.src.length)return;const o=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),o?s.revealContent(e):s.hideLoading(e)},r.setAttribute("src",t),s.setContent(e,r,!1)}resizeIframe(e){const{type:t,iframeEl:n}=e;if(t===Kn||t===tr)return;const s=n==null?void 0:n.parentElement;if(!n||!s)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let a=e.width||0,o=e.height||0;a&&o&&(r=!1);const l=s&&s.style;if(e.preload!==!1&&r!==!1&&l)try{const u=window.getComputedStyle(s),c=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),d=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),h=n.contentWindow;if(h){const f=h.document,p=f.getElementsByTagName(wd)[0],g=f.body;l.width="",g.style.overflow="hidden",a=a||p.scrollWidth+c,l.width=`${a}px`,g.style.overflow="",l.flex="0 0 auto",l.height=`${g.scrollHeight}px`,o=p.scrollHeight+d}}catch{}if(a||o){const u={flex:"0 1 auto",width:"",height:""};a&&a!=="auto"&&(u.width=`${a}px`),o&&o!=="auto"&&(u.height=`${o}px`),Object.assign(l,u)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===co)try{const s=t.querySelector("video");if(s){const r=s.play();r!==void 0&&r.then(()=>{}).catch(a=>{s.muted=!0,s.play()})}}catch{}if(e.type!==Kn&&e.type!==tr)return;const n=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let s;if(e.iframeEl.dataset.ready==="true")return s=e.type===Kn?{event:"command",func:"playVideo"}:{method:"play",value:"true"},s&&e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"),void(e.poller=void 0);e.type===Kn&&(s={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"))}e.poller=setTimeout(n,250)};n()}processType(e){if(e.html)return e.type=wd,e.src=e.html,void(e.html="");const t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let n=e.type,s=null;if(s=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const r=this.optionFor(e,Kn),{nocookie:a}=r,o=function(d,h){var f={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&h.indexOf(p)<0&&(f[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(p=Object.getOwnPropertySymbols(d);g<p.length;g++)h.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(d,p[g])&&(f[p[g]]=d[p[g]])}return f}(r,["nocookie"]),l=`www.youtube${a?"-nocookie":""}.com`,u=sg(t,o),c=encodeURIComponent(s[2]);e.videoId=c,e.src=`https://${l}/embed/${c}?${u}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,n=Kn}else if(s=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const r=sg(t,this.optionFor(e,tr)),a=encodeURIComponent(s[1]),o=s[4]||"";e.videoId=a,e.src=`https://player.vimeo.com/video/${a}?${o?`h=${o}${r?"&":""}`:""}${r}`,n=tr}if(!n&&e.triggerEl){const r=e.triggerEl.dataset.type;oC.includes(r)&&(n=r)}n||typeof t=="string"&&(t.charAt(0)==="#"?n="inline":(s=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(n=co,e.videoFormat=e.videoFormat||"video/"+(s[1]==="ogv"?"ogg":s[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?n=ng:t.match(/\.(pdf)((\?|#).*)?$/i)&&(n="pdf")),(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,n=Ed):(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,n=Ed),n=n||this.instance.option("defaultType"),e.type=n,n===ng&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case wd:this.instance.setContent(e,t);break;case co:const n=this.option("videoTpl");n&&this.instance.setContent(e,n.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case Ed:case Kn:case tr:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const t=e.contentEl;if(!(e.el&&t&&e.type&&[Kn,tr,co].includes(e.type)))return;let n,s=e.width||"auto",r=e.height||"auto";if(s==="auto"||r==="auto"){n=this.optionFor(e,"videoRatio");const u=(n+"").match(/(\d+)\s*\/\s?(\d+)/);n=u&&u.length>2?parseFloat(u[1])/parseFloat(u[2]):parseFloat(n+"")}else s&&r&&(n=s/r);if(!n)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;const a=t.getBoundingClientRect(),o=a.width||1,l=a.height||1;t.style.aspectRatio=n+"",n<o/l?(r=r==="auto"?l:Math.min(l,r),t.style.width="auto",t.style.height=`${r}px`):(s=s==="auto"?o:Math.min(o,s),t.style.width=`${s}px`,t.style.height="auto")}attach(){const e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(ly,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:aC});const Vl="play",$l="pause",uo="ready";class cy extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:uo}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==uo}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const t=this.instance,n=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[];let s=this.option("progressParentEl");if(s||(s=(n.length===1?n[0].el:null)||t.viewport),!s)return null;const r=document.createElement("div");return Ye(r,"f-progress"),s.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){const e=this,t=e.instance;if(t.pages.length<2||e.timer)return;const n=e.option("timeout");e.state=Vl,Ye(t.container,"has-autoplay");let s=e.createProgressBar();s&&(s.style.transitionDuration=`${n}ms`,s.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},n),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==uo){if(e.option("pauseOnHover")){const t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,t=e.state,n=e.instance.container;e.clear(),e.state=uo,n.removeEventListener("mouseenter",e.onMouseEnter,!1),n.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),xt(n,"has-autoplay"),t!==uo&&e.emit("stop")}pause(){const e=this;e.state===Vl&&(e.state=$l,e.clear(),e.emit($l))}resume(){const e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==Vl){if(e.state===$l&&!e.inHover){const n=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",n),n.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Vl||this.state===$l?this.stop():this.start()}attach(){const e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(cy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class uy extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const t=e.carousel;if(!t)return;const n=e.container;n&&(t.options.Autoplay=Oi({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:s=>{var r;n.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==Ei.Ready&&s.pause()},stop:()=>{n.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(s,r)=>{var a,o,l;!r||!r.cancelable||((a=e.getSlide())===null||a===void 0?void 0:a.state)===Ei.Ready&&(!((l=(o=e.carousel)===null||o===void 0?void 0:o.panzoom)===null||l===void 0)&&l.isResting)||r.preventDefault()}}}),t.attachPlugins({Autoplay:cy}),this.ref=t.plugins.Autoplay)}onReady(e){const t=e.carousel,n=this.ref;n&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&n.start()}onDone(e,t){const n=this.ref,s=e.carousel;if(!n||!s)return;const r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&n.stop()}),e.isCurrentSlide(t)&&n.resume()}onKeydown(e,t){var n;const s=this.ref;s&&t===this.option("key")&&((n=document.activeElement)===null||n===void 0?void 0:n.nodeName)!=="BUTTON"&&s.toggle()}attach(){const e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){const e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(uy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:i=>{var e;return((e=i.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||i.instance.container},timeout:3e3}});const dy={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var ls;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Hidden=2]="Hidden"})(ls||(ls={}));const rg="isResting",Gl="thumbWidth",Nr="thumbHeight",Cn="thumbClipWidth";let hy=class extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ls.Init})}get isModern(){return this.type==="modern"}onInitSlide(e,t){const n=t.el?t.el.dataset:void 0;n&&(t.thumbSrc=n.thumbSrc||t.thumbSrc||"",t[Cn]=parseFloat(n[Cn]||"")||t[Cn]||0,t[Nr]=parseFloat(n.thumbHeight||"")||t[Nr]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var e;if(!this.isModern)return;const t=this.container,n=this.instance,s=n.panzoom,r=this.carousel,a=r?r.panzoom:null,o=n.page;if(s&&r&&a){if(s.isDragging){xt(t,this.cn(rg));let l=((e=r.pages[o])===null||e===void 0?void 0:e.pos)||0;l+=n.getProgress(o)*(this[Cn]+this.thumbGap);let u=a.getBounds();-1*l>u.x.min&&-1*l<u.x.max&&a.panTo({x:-1*l,friction:.12})}else Fn(t,this.cn(rg),s.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const e of this.instance.slides||[])this.resizeModernSlide(e);this.shiftModern()}isDisabled(){const e=this.option("minCount")||0;if(e){const n=this.instance;let s=0;for(const r of n.slides||[])r.thumbSrc&&s++;if(s<e)return!0}const t=this.option("type");return["modern","classic"].indexOf(t)<0}getThumb(e){const t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(e){const t=this.carousel;t&&t.addSlide(e.index,this.getThumb(e))}getSlides(){const e=[];for(const t of this.instance.slides||[])e.push(this.getThumb(t));return e}resizeModernSlide(e){this.isModern&&(e[Gl]=e[Cn]&&e[Nr]?Math.round(this[Nr]*(e[Cn]/e[Nr])):this[Gl])}updateProps(){const e=this.container;if(!e)return;const t=n=>parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-"+n))||0;this.thumbGap=t("gap"),this.thumbExtraGap=t("extra-gap"),this[Gl]=t("width")||40,this[Cn]=t("clip-width")||40,this[Nr]=t("height")||40}build(){const e=this;if(e.state!==ls.Init)return;if(e.isDisabled())return void e.emit("disabled");const t=e.instance,n=t.container,s=e.getSlides(),r=e.option("type");e.type=r;const a=e.option("parentEl"),o=e.cn("container"),l=e.cn("track");let u=a==null?void 0:a.querySelector("."+o);u||(u=document.createElement("div"),Ye(u,o),a?a.appendChild(u):n.after(u)),Ye(u,`is-${r}`),Ye(n,e.cn("hasThumbs")),e.container=u,e.updateProps();let c=u.querySelector("."+l);c||(c=document.createElement("div"),Ye(c,e.cn("track")),u.appendChild(c)),e.track=c;const d=Oi({},{track:c,infinite:!1,center:!0,fill:r==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},e.option("Carousel")||{},{Sync:{target:t},slides:s}),h=new t.constructor(u,d);h.on("createSlide",(f,p)=>{e.setProps(p.index),e.emit("createSlide",p,p.el)}),h.on("ready",()=>{e.shiftModern(),e.emit("ready")}),h.on("refresh",()=>{e.shiftModern()}),h.on("Panzoom.click",(f,p,g)=>{e.onClick(g)}),e.carousel=h,e.state=ls.Ready}onClick(e){e.preventDefault(),e.stopPropagation();const t=this.instance,{pages:n,page:s}=t,r=v=>{if(v){const m=v.closest("[data-carousel-index]");if(m)return[parseInt(m.dataset.carouselIndex||"",10)||0,m]}return[-1,void 0]},a=(v,m)=>{const b=document.elementFromPoint(v,m);return b?r(b):[-1,void 0]};let[o,l]=r(e.target);if(o>-1)return;const u=this[Cn],c=e.clientX,d=e.clientY;let[h,f]=a(c-u,d),[p,g]=a(c+u,d);f&&g?(o=Math.abs(c-f.getBoundingClientRect().right)<Math.abs(c-g.getBoundingClientRect().left)?h:p,o===s&&(o=o===h?p:h)):f?o=h:g&&(o=p),o>-1&&n[o]&&t.slideTo(o)}getShift(e){var t;const n=this,{instance:s}=n,r=n.carousel;if(!s||!r)return 0;const a=n[Gl],o=n[Cn],l=n.thumbGap,u=n.thumbExtraGap;if(!(!((t=r.slides[e])===null||t===void 0)&&t.el))return 0;const c=.5*(a-o),d=s.pages.length-1;let h=s.getProgress(0),f=s.getProgress(d),p=s.getProgress(e,!1,!0),g=0,v=c+u+l;const m=h<0&&h>-1,b=f>0&&f<1;return e===0?(g=v*Math.abs(h),b&&h===1&&(g-=v*Math.abs(f))):e===d?(g=v*Math.abs(f)*-1,m&&f===-1&&(g+=v*Math.abs(h))):m||b?(g=-1*v,g+=v*Math.abs(h),g+=v*(1-Math.abs(f))):g=v*p,g}setProps(e){var t;const n=this;if(!n.isModern)return;const{instance:s}=n,r=n.carousel;if(s&&r){const a=(t=r.slides[e])===null||t===void 0?void 0:t.el;if(a&&a.childNodes.length){let o=ze(1-Math.abs(s.getProgress(e))),l=ze(n.getShift(e));a.style.setProperty("--progress",o?o+"":""),a.style.setProperty("--shift",l+"")}}}shiftModern(){const e=this;if(!e.isModern)return;const{instance:t,track:n}=e,s=t.panzoom,r=e.carousel;if(!(t&&n&&s&&r)||s.state===Tt.Init||s.state===Tt.Destroy)return;for(const o of t.slides)e.setProps(o.index);let a=(e[Cn]+e.thumbGap)*(r.slides.length||0);n.style.setProperty("--width",a+"")}cleanup(){const e=this;e.carousel&&e.carousel.destroy(),e.carousel=null,e.container&&e.container.remove(),e.container=null,e.track&&e.track.remove(),e.track=null,e.state=ls.Init,xt(e.instance.container,e.cn("hasThumbs"))}attach(){const e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===qt.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on(["change","Panzoom.afterTransform"],e.onChange),t.on("Panzoom.refresh",e.onRefresh)}detach(){const e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off(["change","Panzoom.afterTransform"],e.onChange),t.off("Panzoom.refresh",e.onRefresh),e.cleanup()}};Object.defineProperty(hy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:dy});const lC=Object.assign(Object.assign({},dy),{key:"t",showOnStart:!0,parentEl:null}),ag="is-masked",og="aria-hidden";class fy extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var n,s,r;const a=((r=(s=(n=this.instance)===null||n===void 0?void 0:n.carousel)===null||s===void 0?void 0:s.slides[t.index])===null||r===void 0?void 0:r.type)||"",o=t.el;if(o&&a){let l=`for-${a}`;["video","youtube","vimeo","html5video"].includes(a)&&(l+=" for-video"),Ye(o,l)}}onInit(){var e;const t=this,n=t.instance,s=n.carousel;if(t.ref||!s)return;const r=t.option("parentEl")||n.footer||n.container;if(!r)return;const a=Oi({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:n.option("Carousel.friction")||0}},on:{ready:o=>{const l=o.container;l&&this.hidden&&(t.refresh(),l.style.transition="none",t.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",t.show()}))}}});a.Carousel=a.Carousel||{},a.Carousel.on=Oi(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=a,s.attachPlugins({Thumbs:hy}),t.ref=s.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=ls.Hidden,t.hidden=!0)}onResize(){var e;const t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){const n=this.option("key");n&&n===t&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===ls.Hidden?(e.state=ls.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(og),t.classList.remove(ag),this.hidden=!1)}hide(){const e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(ag),t.setAttribute(og,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const t=e.container,n=(t==null?void 0:t.firstChild)||null;t&&n&&n.childNodes.length&&(t.style.maxHeight=`${n.getBoundingClientRect().height}px`)}attach(){const e=this,t=e.instance;t.state===si.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;const t=this,n=t.instance;n.off("Carousel.init",t.onInit),n.off("resize",t.onResize),n.off("keydown",t.onKeydown),(e=n.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}}Object.defineProperty(fy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:lC});const xd={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var gr;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Disabled=2]="Disabled"})(gr||(gr={}));const cC={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},uC={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},lg="has-toolbar",Sd="fancybox__toolbar";class py extends Tn{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:gr.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let n=this.option("display"),s=this.option("absolute"),r=this.option("enabled");if(r==="auto"){const u=this.instance.carousel;let c=0;if(u)for(const d of u.slides)(d.panzoom||d.type==="image")&&c++;c||(r=!1)}r||(n=void 0);let a=0;const o={left:[],middle:[],right:[]};if(n)for(const u of["left","middle","right"])for(const c of n[u]){const d=this.createEl(c);d&&((t=o[u])===null||t===void 0||t.push(d),a++)}let l=null;if(a&&(l=this.createContainer()),l){for(const[u,c]of Object.entries(o)){const d=document.createElement("div");Ye(d,Sd+"__column is-"+u);for(const h of c)d.appendChild(h);s!=="auto"||u!=="middle"||c.length||(s=!0),l.appendChild(d)}s===!0&&Ye(l,"is-absolute"),this.state=gr.Ready,this.onRefresh()}else this.state=gr.Disabled}onClick(e){var t,n;const s=this.instance,r=s.getSlide(),a=r==null?void 0:r.panzoom,o=e.target,l=o&&Ii(o)?o.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=s.plugins.Thumbs)===null||t===void 0||t.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const d=(n=s.carousel)===null||n===void 0?void 0:n.plugins.Autoplay;let h=d.isActive;return a&&a.panMode==="mousemove"&&!h&&a.reset(),void(h?d.stop():d.start())}const u=l.panzoomAction,c=l.panzoomChange;if((c||u)&&(e.preventDefault(),e.stopPropagation()),c){let d={};try{d=JSON.parse(c)}catch{}a&&a.applyChange(d)}else u&&a&&a[u]&&a[u]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const t=this.instance.getSlide();if(!t||t.state!==Ei.Ready)return;const n=t&&!t.error&&t.panzoom;for(const a of e.querySelectorAll("[data-panzoom-action]"))n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));let s=n&&n.canZoomIn(),r=n&&n.canZoomOut();for(const a of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(const a of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(const a of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||s?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));const o=a.querySelector("g");o&&(o.style.display=s?"":"none")}}onDone(e,t){var n;(n=t.panzoom)===null||n===void 0||n.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const t=this.option("parentEl")||e;let n=t.querySelector("."+Sd);return n||(n=document.createElement("div"),Ye(n,Sd),t.prepend(n)),n.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&Ye(e,lg),this.container=n,n}createEl(e){const t=this.instance,n=t.carousel;if(!n||e==="toggleFS"||e==="fullscreen"&&!iy())return null;let s=null;const r=n.slides.length||0;let a=0,o=0;for(const u of n.slides)(u.panzoom||u.type==="image")&&a++,(u.type==="image"||u.downloadSrc)&&o++;if(r<2&&["infobar","prev","next"].includes(e))return s;if(xd[e]!==void 0&&!a||e==="download"&&!o)return null;if(e==="thumbs"){const u=t.plugins.Thumbs;if(!u||!u.isEnabled)return null}if(e==="slideshow"&&(!n.plugins.Autoplay||r<2))return null;if(xd[e]!==void 0){const u=xd[e];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),Ye(s,"f-button"),u.action&&(s.dataset.panzoomAction=u.action),u.change&&(s.dataset.panzoomChange=JSON.stringify(u.change)),s.appendChild(Nn(this.instance.localize(u.icon)))}else{const u=(this.option("items")||[])[e];u&&(s=Nn(this.instance.localize(u.tpl)),typeof u.click=="function"&&s.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),typeof u.click=="function"&&u.click.call(this,this,c)}))}const l=s==null?void 0:s.querySelector("svg");if(l)for(const[u,c]of Object.entries(uC))l.getAttribute(u)||l.setAttribute(u,String(c));return s}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=gr.Disabled;const t=this.instance.container;t&&xt(t,lg)}attach(){const e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(py,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:cC});const dC={Hash:class extends Tn{onReady(){wo=!1}onChange(i){hr&&clearTimeout(hr);const{hash:e}=ny(),{hash:t}=Xc(),n=i.isOpeningSlide(i.getSlide());n&&(tg=t===e?"":t),e&&e!==t&&(hr=setTimeout(()=>{try{if(i.state===si.Ready){let s="replaceState";n&&!Bl&&(s="pushState",Bl=!0),window.history[s]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(i){if(hr&&clearTimeout(hr),!wo&&Bl)return Bl=!1,wo=!1,void window.history.back();if(!wo)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(tg||""))}catch{}}attach(){const i=this.instance;i.on("ready",this.onReady),i.on(["Carousel.ready","Carousel.change"],this.onChange),i.on("close",this.onClose)}detach(){const i=this.instance;i.off("ready",this.onReady),i.off(["Carousel.ready","Carousel.change"],this.onChange),i.off("close",this.onClose)}static parseURL(){return Xc()}static startFromUrl(){sy()}static destroy(){window.removeEventListener("hashchange",ay,!1)}},Html:ly,Images:oy,Slideshow:uy,Thumbs:fy,Toolbar:py},cg="with-fancybox",Td="hide-scrollbar",ug="--fancybox-scrollbar-compensate",dg="--fancybox-body-margin",Md="aria-hidden",Cd="is-using-tab",Ad="is-animated",hg="is-compact",fg="is-loading",Pd="is-opening",Wl="has-caption",Fr="disabled",ir="tabindex",pg="download",Ld="href",Ur="src",ys=i=>typeof i=="string",mg=function(){var i=window.getSelection();return!!i&&i.type==="Range"};let en,tn=null,nr=null,gg=0,vg=0,yg=0,bg=0;const zr=new Map;let hC=0;class nt extends Zf{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},n={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:si.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),en||(en=iy()),this.id=t.id||++hC,zr.set(this.id,this),this.userSlides=e,this.userPlugins=n,queueMicrotask(()=>{this.init()})}init(){if(this.state===si.Destroy)return;this.state=si.Init,this.attachPlugins(Object.assign(Object.assign({},nt.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Mo)return;const t=document,n=t.body,s=t.documentElement;if(n.classList.contains(Td))return;let r=window.innerWidth-s.getBoundingClientRect().width;const a=parseFloat(window.getComputedStyle(n).marginRight);r<0&&(r=0),s.style.setProperty(ug,`${r}px`),a&&n.style.setProperty(dg,`${a}px`),n.classList.add(Td)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=si.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Md,"false")},16)};this.option("Fullscreen.autoStart")&&en&&!en.isFullscreen()?en.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;const n=this.option("parentEl")||document.body,s=Nn(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(hg,this.isCompact),Ye(s,this.option("mainClass")||""),Ye(s,Pd),this.container=s,this.footer=s.querySelector(".fancybox__footer"),n.appendChild(s),Ye(document.documentElement,cg),tn&&nr||(tn=document.createElement("span"),Ye(tn,"fancybox-focus-guard"),tn.setAttribute(ir,"0"),tn.setAttribute(Md,"true"),tn.setAttribute("aria-label","Focus guard"),nr=tn.cloneNode(),(e=s.parentElement)===null||e===void 0||e.insertBefore(tn,s),(t=s.parentElement)===null||t===void 0||t.append(nr)),s.addEventListener("mousedown",r=>{gg=r.pageX,vg=r.pageY,xt(s,Cd)}),this.option("closeExisting"))for(const r of zr.values())r.id!==this.id&&r.close();else this.option("animated")&&(Ye(s,Ad),setTimeout(()=>{this.isClosing()||xt(s,Ad)},350));this.emit("initLayout")}}initCarousel(e){const t=this.container;if(!t)return;const n=t.querySelector(".fancybox__carousel");if(!n)return;const s=this.carousel=new Sc(n,Oi({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",(r,a,...o)=>{this.emit(`Carousel.${a}`,r,...o)}),s.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,a,o)=>{this.clearContent(o),o.state=void 0}),s.on("Panzoom.touchStart",()=>{var r,a;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((a=this.container)===null||a===void 0||a.focus())}),s.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",(r,a)=>{const o=this.getSlide();if(o&&xh(o.el))return;const l=this.container;if(l){const u=Math.abs(a.current.f),c=u<1?"":Math.max(.5,Math.min(1,1-u/a.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",c?"0s":""),l.style.setProperty("--fancybox-opacity",c+"")}}),s.on("Panzoom.touchEnd",(r,a,o)=>{var l;const u=this.getSlide();if(u&&xh(u.el)||a.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;const c=Math.abs(a.dragOffset.y);a.lockedAxis==="y"&&(c>=200||c>=50&&a.dragOffset.time<300)&&(o&&o.cancelable&&o.preventDefault(),this.close(o,"f-throwOut"+(a.current.f<0?"Up":"Down")))})),s.on("change",r=>{var a;let o=(a=this.getSlide())===null||a===void 0?void 0:a.triggerEl;if(o){const l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});o.dispatchEvent(l)}}),s.on(["refresh","change"],r=>{const a=this.container;if(!a)return;for(const u of a.querySelectorAll("[data-fancybox-current-index]"))u.innerHTML=r.page+1;for(const u of a.querySelectorAll("[data-fancybox-count]"))u.innerHTML=r.pages.length;if(!r.isInfinite){for(const u of a.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(u.removeAttribute(Fr),u.removeAttribute(ir)):(u.setAttribute(Fr,""),u.setAttribute(ir,"-1"));for(const u of a.querySelectorAll("[data-fancybox-prev]"))r.page>0?(u.removeAttribute(Fr),u.removeAttribute(ir)):(u.setAttribute(Fr,""),u.setAttribute(ir,"-1"))}const o=this.getSlide();if(!o)return;let l=o.downloadSrc||"";l||o.type!=="image"||o.error||!ys(o[Ur])||(l=o[Ur]);for(const u of a.querySelectorAll("[data-fancybox-download]")){const c=o.downloadFilename;l?(u.removeAttribute(Fr),u.removeAttribute(ir),u.setAttribute(Ld,l),u.setAttribute(pg,c||l),u.setAttribute("target","_blank")):(u.setAttribute(Fr,""),u.setAttribute(ir,"-1"),u.removeAttribute(Ld),u.removeAttribute(pg))}}),this.emit("initCarousel")}attachEvents(){const e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const n=window.visualViewport;n&&(n.addEventListener("scroll",e.onResize),n.addEventListener("resize",e.onResize))}detachEvents(){const e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const n=window.visualViewport;n&&(n.removeEventListener("resize",e.onResize),n.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const t=window.visualViewport,n=Math.max(1,(t==null?void 0:t.scale)||1);let s="",r="",a="";if(t&&n>1){let o=`${t.offsetLeft}px`,l=`${t.offsetTop}px`;s=t.width*n+"px",r=t.height*n+"px",a=`translate3d(${o}, ${l}, 0) scale(${1/n})`}e.style.transform=a,e.style.width=s,e.style.height=r}onClick(e){var t;const{container:n,isCompact:s}=this;if(!n||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-gg)>30||Math.abs(e.pageY-vg)>30)return;const a=document.activeElement;if(mg()&&a&&n.contains(a))return;if(s&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let o=!1;if(r.closest(".fancybox__content")){if(a){if(a.closest("[contenteditable]"))return;r.matches(_d)||a.blur()}if(mg())return;o=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(_d)&&(o=this.option("backdropClick"));o==="close"?(e.preventDefault(),this.close(e)):o==="next"?(e.preventDefault(),this.next()):o==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const t=e.target;let n=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(n="slide");const s=n==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,u){return Math.abs(u)>Math.abs(l)?u:l}),a=Math.max(-1,Math.min(1,r)),o=Date.now();this.pwt&&o-this.pwt<300?s&&e.preventDefault():(this.pwt=o,this.emit("wheel",e,a),e.defaultPrevented||(n==="close"?(e.preventDefault(),this.close(e)):n==="slide"&&(Wc(t)||(e.preventDefault(),this[a>0?"prev":"next"]()))))}onScroll(){window.scrollTo(yg,bg)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const t=e.key,n=this.option("keyboard");if(!n)return;const s=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,a=r&&r.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if(t!=="Escape"&&!a&&Ii(s)&&(s.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)!==-1)||(e.key==="Tab"?Ye(this.container,Cd):xt(this.container,Cd),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);const o=n[t];o&&typeof this[o]=="function"&&(e.preventDefault(),this[o]())}onResize(){const e=this.container;if(!e)return;const t=this.isCompact;e.classList.toggle(hg,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){const s=this.plugins.Toolbar;if(s&&s.state===gr.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;const n=this.option("tpl.closeButton");if(n){const s=Nn(this.localize(n));e.closeBtnEl=e.contentEl.appendChild(s),e.el&&Ye(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,n;const s="fancybox__caption",r=this.container;if(!r)return;xt(r,Wl);const a=this.isCompact||this.option("commonCaption"),o=!a;if(this.caption&&this.stop(this.caption),o&&this.caption&&(this.caption.remove(),this.caption=null),a&&!this.caption)for(const d of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])d.captionEl&&(d.captionEl.remove(),d.captionEl=void 0,xt(d.el,Wl),(n=d.el)===null||n===void 0||n.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||a&&!this.isCurrentSlide(e))return;const l=e.el;let u=this.optionFor(e,"caption","");if(!u)return void(a&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let c=null;if(o){if(c=e.captionEl||null,l&&!c){const d=s+`_${this.id}_${e.index}`;c=document.createElement("div"),Ye(c,s),c.setAttribute("id",d),e.captionEl=l.appendChild(c),Ye(l,Wl),l.setAttribute("aria-labelledby",d)}}else c=this.caption,c||(c=r.querySelector("."+s)),!c&&(c=document.createElement("div"),c.dataset.fancyboxCaption="",Ye(c,s),(this.footer||r).prepend(c)),Ye(r,Wl),this.caption=c;c&&(c.innerHTML="",ys(u)||typeof u=="number"?c.innerHTML=u+"":u instanceof HTMLElement&&c.appendChild(u))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;const n=document.activeElement||null,s=(e==null?void 0:e.target)||null,r=this.container,a=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!a||!e&&n&&r.contains(n))return;const o=this.getSlide(),l=o&&o.state===Ei.Ready?o.el:null;if(!l||l.contains(n)||r===n)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const u=Array.from(r.querySelectorAll(_d));let c=[],d=null;for(let f of u){const p=!f.offsetParent||!!f.closest('[aria-hidden="true"]'),g=l&&l.contains(f),v=!a.contains(f);if(f===r||(g||v)&&!p){c.push(f);const m=f.dataset.origTabindex;m!==void 0&&m&&(f.tabIndex=parseFloat(m)),f.removeAttribute("data-orig-tabindex"),!f.hasAttribute("autoFocus")&&d||(d=f)}else{const m=f.dataset.origTabindex===void 0?f.getAttribute("tabindex")||"":f.dataset.origTabindex;m&&(f.dataset.origTabindex=m),f.tabIndex=-1}}let h=null;e?(!s||c.indexOf(s)<0)&&(h=d||r,c.length&&(n===nr?h=c[0]:this.lastFocus!==r&&n!==tn||(h=c[c.length-1]))):h=o&&o.type==="image"?r:d||r,h&&eg(h),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=nt.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",n){if(!e||!t)return void(n&&n());this.stop(e);const s=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",s),delete e.dataset.animationName,n&&n(),xt(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",s),Ye(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",n=!0){if(this.isClosing())return;const s=e.el;if(!s)return;let r=null;if(Ii(t)?r=t:(r=Nn(t+""),Ii(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){const a=document.createElement("div");a.appendChild(r),r=a}Ii(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&Ii(r)?(Ye(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),s.classList.add(`has-${e.error?"error":e.type||"unknown"}`),s.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=r,n&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){const n=e.el,s=e.contentEl;n&&s&&(this.emit("reveal",e),this.hideLoading(e),e.state=Ei.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(s,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=Ei.Ready,this.emit("done",e),Ye(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(xt(this.container,Pd),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,n;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((n=this.getSlide())===null||n===void 0?void 0:n.index)}showLoading(e){e.state=Ei.Loading;const t=e.el;t&&(Ye(t,fg),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===Ei.Loading){let n=Nn(Qf);Ye(n,"fancybox-spinner"),e.spinnerEl=n,t.prepend(n),this.animate(n,"f-fadeIn")}},250))}hideLoading(e){const t=e.el;if(!t)return;const n=e.spinnerEl;this.isClosing()?n==null||n.remove():(xt(t,fg),n&&this.animate(n,"f-fadeOut",()=>{n.remove()}),e.state===Ei.Loading&&(this.emit("loaded",e),e.state=Ei.Ready))}setError(e,t){if(this.isClosing())return;const n=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",n,e),n.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);const s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,s)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const t=e.el;t&&(xt(t,"has-error"),xt(t,"has-unknown"),xt(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const t=this.carousel;return((e=t==null?void 0:t.pages[t==null?void 0:t.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;const n=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",n,e),n.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const s=()=>{this.proceedClose(e,t)};this.startedFs&&en&&en.isFullscreen()?Promise.resolve(en.exit()).then(()=>s()):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const t=()=>{this.clearIdle(),this.idle=!0,Ye(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{const n=this.option("idle");n&&(this.idleTimer=setTimeout(t,n))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,xt(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){en&&(en.isFullscreen()?en.exit():en.request().then(()=>{this.startedFs=!0}))}isClosing(){return[si.Closing,si.CustomClosing,si.Destroy].includes(this.state)}proceedClose(e,t){var n,s;this.state=si.Closing,this.clearIdle(),this.detachEvents();const r=this.container,a=this.carousel,o=this.getSlide(),l=o&&this.option("placeFocusBack")?o.triggerEl||this.option("triggerEl"):null;if(l&&(ty(l)?eg(l):l.focus()),r&&(xt(r,Pd),Ye(r,"is-closing"),r.setAttribute(Md,"true"),this.option("animated")&&Ye(r,Ad),r.style.pointerEvents="none"),a){a.clearTransitions(),(n=a.panzoom)===null||n===void 0||n.destroy(),(s=a.plugins.Navigation)===null||s===void 0||s.detach();for(const u of a.slides){u.state=Ei.Closing,this.hideLoading(u);const c=u.contentEl;c&&this.stop(c);const d=u==null?void 0:u.panzoom;d&&(d.stop(),d.detachEvents(),d.detachObserver()),this.isCurrentSlide(u)||a.emit("removeSlide",u)}}yg=window.scrollX,bg=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==si.CustomClosing?(t===void 0&&o&&(t=this.optionFor(o,"hideClass")),t&&o?(this.animate(o.contentEl,t,()=>{a&&a.emit("removeSlide",o)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===si.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=si.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const t=this.container;t&&t.remove(),zr.delete(this.id);const n=nt.getInstance();n?n.focus():(tn&&(tn.remove(),tn=null),nr&&(nr.remove(),nr=null),xt(document.documentElement,cg),(()=>{if(!Mo)return;const s=document,r=s.body;r.classList.remove(Td),r.style.setProperty(dg,""),s.documentElement.style.setProperty(ug,"")})(),this.emit("destroy"))}static bind(e,t,n){if(!Mo)return;let s,r="",a={};if(e===void 0?s=document.body:ys(e)?(s=document.body,r=e,typeof t=="object"&&(a=t||{})):(s=e,ys(t)&&(r=t),typeof n=="object"&&(a=n||{})),!s||!Ii(s))return;r=r||"[data-fancybox]";const o=nt.openers.get(s)||new Map;o.set(r,a),nt.openers.set(s,o),o.size===1&&s.addEventListener("click",nt.fromEvent)}static unbind(e,t){let n,s="";if(ys(e)?(n=document.body,s=e):(n=e,ys(t)&&(s=t)),!n)return;const r=nt.openers.get(n);r&&s&&r.delete(s),s&&r||(nt.openers.delete(n),n.removeEventListener("click",nt.fromEvent))}static destroy(){let e;for(;e=nt.getInstance();)e.destroy();for(const t of nt.openers.keys())t.removeEventListener("click",nt.fromEvent);nt.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const n=t.closest("[data-fancybox-trigger]");if(n){const p=n.dataset.fancyboxTrigger||"",g=document.querySelectorAll(`[data-fancybox="${p}"]`),v=parseInt(n.dataset.fancyboxIndex||"",10)||0;t=g[v]||t}if(!(t&&t instanceof Element))return;let s,r,a,o;if([...nt.openers].reverse().find(([p,g])=>!(!p.contains(t)||![...g].reverse().find(([v,m])=>{let b=t.closest(v);return!!b&&(s=p,r=v,a=b,o=m,!0)}))),!s||!r||!a)return;o=o||{},e.preventDefault(),t=a;let l=[],u=Oi({},Mh,o);u.event=e,u.triggerEl=t,u.delegate=n;const c=u.groupAll,d=u.groupAttr,h=d&&t?t.getAttribute(`${d}`):"";if((!t||h||c)&&(l=[].slice.call(s.querySelectorAll(r))),t&&!c&&(l=h?l.filter(p=>p.getAttribute(`${d}`)===h):[t]),!l.length)return;const f=nt.getInstance();return f&&f.options.triggerEl&&l.indexOf(f.options.triggerEl)>-1?void 0:(t&&(u.startIndex=l.indexOf(t)),nt.fromNodes(l,u))}static fromSelector(e,t,n){let s=null,r="",a={};if(ys(e)?(s=document.body,r=e,typeof t=="object"&&(a=t||{})):e instanceof HTMLElement&&ys(t)&&(s=e,r=t,typeof n=="object"&&(a=n||{})),!s||!r)return!1;const o=nt.openers.get(s);return!!o&&(a=Oi({},o.get(r)||{},a),!!a&&nt.fromNodes(Array.from(s.querySelectorAll(r)),a))}static fromNodes(e,t){t=Oi({},Mh,t||{});const n=[];for(const s of e){const r=s.dataset||{},a=r[Ur]||s.getAttribute(Ld)||s.getAttribute("currentSrc")||s.getAttribute(Ur)||void 0;let o;const l=t.delegate;let u;l&&n.length===t.startIndex&&(o=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),o||(o=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),o&&(u=o.currentSrc||o[Ur]||void 0,!u&&o.dataset&&(u=o.dataset.lazySrc||o.dataset[Ur]||void 0));const c={src:a,triggerEl:s,thumbEl:o,thumbElSrc:u,thumbSrc:u};for(const d in r){let h=r[d]+"";h=h!=="false"&&(h==="true"||h),c[d]=h}n.push(c)}return new nt(n,t)}static getInstance(e){return e?zr.get(e):Array.from(zr.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=nt.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new nt(e,t)}static next(){const e=nt.getInstance();e&&e.next()}static prev(){const e=nt.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(const n of zr.values())n.close(...t);else{const n=nt.getInstance();n&&n.close(...t)}}}Object.defineProperty(nt,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(nt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Mh}),Object.defineProperty(nt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:dC}),Object.defineProperty(nt,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});const Li={Toolbar:{display:{left:[],right:["close"]}},Carousel:{Navigation:{nextTpl:'<svg><use xlink:href="img/icons/icons.svg#i-arrow-right"></use></svg>',prevTpl:'<svg><use xlink:href="img/icons/icons.svg#i-arrow-right"></use></svg>'}},contentClick:"iterateZoom",Images:{Panzoom:{maxScale:3}},Thumbs:!1,caption:(i,e)=>{var n;const t=e.caption||"";return`${e.index+1} / ${(n=i.carousel)==null?void 0:n.slides.length} <br /> ${t}`}};nt.bind('[data-fancybox="clinic--gallery"]',Li);nt.bind('[data-fancybox="stay-conditions--gallery"]',Li);nt.bind('[data-fancybox="stay-conditions--gallery-mob"]',Li);nt.bind('[data-fancybox="hospital--gallery"]',Li);nt.bind('[data-fancybox="hospital--gallery-mob"]',Li);nt.bind('[data-fancybox="certificates--gallery"]',Li);nt.bind('[data-fancybox="media--gallery-1"]',Li);nt.bind('[data-fancybox="media--gallery-2"]',Li);nt.bind('[data-fancybox="media--gallery-3"]',Li);nt.bind('[data-fancybox="offices-direction--gallery-1"]',Li);nt.bind('[data-fancybox="offices-direction--gallery-2"]',Li);nt.bind('[data-fancybox="offices-direction--gallery-3"]',Li);nt.bind('[data-fancybox="offices-direction--gallery-4"]',Li);nt.bind('[data-fancybox="offices-direction--gallery-5"]',Li);nt.bind('[data-fancybox="offices-direction--gallery-6"]',Li);var fC={exports:{}};/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */(function(i,e){(function(t){i.exports=t(Fc)})(function(t){function n(f,p,g){var v;return function(){var m=this,b=arguments,_=function(){v=null,f.apply(m,b)};clearTimeout(v),v=setTimeout(_,p)}}function s(f){var p=++d;return"rmjs-"+p}function r(f){var p=f.clone().css({height:"auto",width:f.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(f),g=p.outerHeight(),v=parseInt(p.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),m=f.data("defaultHeight");p.remove();var b=v||f.data("collapsedHeight")||m;f.data({expandedHeight:g,maxHeight:v,collapsedHeight:b}).css({maxHeight:"none"})}function a(f){if(!c[f.selector]){var p=" ";f.embedCSS&&f.blockCSS!==""&&(p+=f.selector+" + [data-readmore-toggle], "+f.selector+"[data-readmore]{"+f.blockCSS+"}"),p+=f.selector+"[data-readmore]{transition: height "+f.speed+"ms;overflow: hidden;}",function(g,v){var m=g.createElement("style");m.type="text/css",m.styleSheet?m.styleSheet.cssText=v:m.appendChild(g.createTextNode(v)),g.getElementsByTagName("head")[0].appendChild(m)}(document,p),c[f.selector]=!0}}function o(f,p){this.element=f,this.options=t.extend({},u,p),a(this.options),this._defaults=u,this._name=l,this.init(),window.addEventListener?(window.addEventListener("load",h),window.addEventListener("resize",h)):(window.attachEvent("load",h),window.attachEvent("resize",h))}var l="readmore",u={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},c={},d=0,h=n(function(){t("[data-readmore]").each(function(){var f=t(this),p=f.attr("aria-expanded")==="true";r(f),f.css({height:f.data(p?"expandedHeight":"collapsedHeight")})})},100);o.prototype={init:function(){var f=t(this.element);f.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),r(f);var p=f.data("collapsedHeight"),g=f.data("heightMargin");if(f.outerHeight(!0)<=p+g)return this.options.blockProcessed&&typeof this.options.blockProcessed=="function"&&this.options.blockProcessed(f,!1),!0;var v=f.attr("id")||s(),m=this.options.startOpen?this.options.lessLink:this.options.moreLink;f.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:v}),f.after(t(m).on("click",function(b){return function(_){b.toggle(this,f[0],_)}}(this)).attr({"data-readmore-toggle":v,"aria-controls":v})),this.options.startOpen||f.css({height:p}),this.options.blockProcessed&&typeof this.options.blockProcessed=="function"&&this.options.blockProcessed(f,!0)},toggle:function(f,p,g){g&&g.preventDefault(),f||(f=t('[aria-controls="'+this.element.id+'"]')[0]),p||(p=this.element);var v=t(p),m="",b="",_=!1,y=v.data("collapsedHeight");v.height()<=y?(m=v.data("expandedHeight")+"px",b="lessLink",_=!0):(m=y,b="moreLink"),this.options.beforeToggle&&typeof this.options.beforeToggle=="function"&&this.options.beforeToggle(f,v,!_),v.css({height:m}),v.on("transitionend",function(M){return function(){M.options.afterToggle&&typeof M.options.afterToggle=="function"&&M.options.afterToggle(f,v,_),t(this).attr({"aria-expanded":_}).off("transitionend")}}(this)),t(f).replaceWith(t(this.options[b]).on("click",function(M){return function(x){M.toggle(this,p,x)}}(this)).attr({"data-readmore-toggle":v.attr("id"),"aria-controls":v.attr("id")}))},destroy:function(){t(this.element).each(function(){var f=t(this);f.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),f.removeData()})}},t.fn.readmore=function(f){var p=arguments,g=this.selector;return f=f||{},typeof f=="object"?this.each(function(){if(t.data(this,"plugin_"+l)){var v=t.data(this,"plugin_"+l);v.destroy.apply(v)}f.selector=g,t.data(this,"plugin_"+l,new o(this,f))}):typeof f=="string"&&f[0]!=="_"&&f!=="init"?this.each(function(){var v=t.data(this,"plugin_"+l);v instanceof o&&typeof v[f]=="function"&&v[f].apply(v,Array.prototype.slice.call(p,1))}):void 0}})})(fC);ce(document).ready(function(){function i(){window.innerWidth<1200?ce(".spoiler--contacts").readmore({speed:75,collapsedHeight:!1,moreLink:'<button class="btn-read-more btn rounded-0 mt-8 p-0 h5 text-blue"> </button>',lessLink:'<button class="btn-read-more btn rounded-0 mt-8 p-0 h5 text-blue"> </button>'}):ce(".spoiler--contacts").readmore("destroy").css("height","auto")}i(),ce(window).resize(function(){i()}),ce(".modal").on("shown.bs.modal",function(){i()})});ce(document).ready(function(){function i(){ce(".spoiler-list").readmore({speed:75,collapsedHeight:!1,moreLink:'<button class="btn-read-more btn rounded-0 mt-3 p-0 text-blue">'+transShowMore+"</button>",lessLink:'<button class="btn-read-more btn rounded-0 mt-3 p-0 text-blue">'+transShowLess+"</button>"})}i(),ce(window).resize(function(){i()})});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Jf="167",pC=0,_g=1,mC=2,my=1,gC=2,is=3,Bs=0,ki=1,as=2,Os=0,fa=1,wg=2,Eg=3,xg=4,vC=5,fr=100,yC=101,bC=102,_C=103,wC=104,EC=200,xC=201,SC=202,TC=203,Ch=204,Ah=205,MC=206,CC=207,AC=208,PC=209,LC=210,RC=211,IC=212,OC=213,DC=214,kC=0,NC=1,FC=2,qc=3,UC=4,zC=5,BC=6,HC=7,gy=0,VC=1,$C=2,Ds=0,GC=1,WC=2,jC=3,XC=4,qC=5,YC=6,KC=7,vy=300,Sa=301,Ta=302,Ph=303,Lh=304,_u=306,Rh=1e3,vr=1001,Ih=1002,cn=1003,ZC=1004,jl=1005,on=1006,Rd=1007,Is=1008,ps=1009,yy=1010,by=1011,jo=1012,ep=1013,xr=1014,cs=1015,ol=1016,tp=1017,ip=1018,Ma=1020,_y=35902,wy=1021,Ey=1022,wn=1023,xy=1024,Sy=1025,pa=1026,Ca=1027,Ty=1028,np=1029,My=1030,sp=1031,rp=1033,Tc=33776,Mc=33777,Cc=33778,Ac=33779,Oh=35840,Dh=35841,kh=35842,Nh=35843,Fh=36196,Uh=37492,zh=37496,Bh=37808,Hh=37809,Vh=37810,$h=37811,Gh=37812,Wh=37813,jh=37814,Xh=37815,qh=37816,Yh=37817,Kh=37818,Zh=37819,Qh=37820,Jh=37821,Pc=36492,ef=36494,tf=36495,Cy=36283,nf=36284,sf=36285,rf=36286,QC=3200,JC=3201,eA=0,tA=1,As="",Rn="srgb",gs="srgb-linear",ap="display-p3",wu="display-p3-linear",Yc="linear",kt="srgb",Kc="rec709",Zc="p3",Br=7680,Sg=519,iA=512,nA=513,sA=514,Ay=515,rA=516,aA=517,oA=518,lA=519,Tg=35044,Mg="300 es",us=2e3,Qc=2001;class Na{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}}const bi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Cg=1234567;const Co=Math.PI/180,Xo=180/Math.PI;function Fa(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(bi[i&255]+bi[i>>8&255]+bi[i>>16&255]+bi[i>>24&255]+"-"+bi[e&255]+bi[e>>8&255]+"-"+bi[e>>16&15|64]+bi[e>>24&255]+"-"+bi[t&63|128]+bi[t>>8&255]+"-"+bi[t>>16&255]+bi[t>>24&255]+bi[n&255]+bi[n>>8&255]+bi[n>>16&255]+bi[n>>24&255]).toLowerCase()}function hi(i,e,t){return Math.max(e,Math.min(t,i))}function op(i,e){return(i%e+e)%e}function cA(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function uA(i,e,t){return i!==e?(t-i)/(e-i):0}function Ao(i,e,t){return(1-t)*i+t*e}function dA(i,e,t,n){return Ao(i,e,1-Math.exp(-t*n))}function hA(i,e=1){return e-Math.abs(op(i,e*2)-e)}function fA(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function pA(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function mA(i,e){return i+Math.floor(Math.random()*(e-i+1))}function gA(i,e){return i+Math.random()*(e-i)}function vA(i){return i*(.5-Math.random())}function yA(i){i!==void 0&&(Cg=i);let e=Cg+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function bA(i){return i*Co}function _A(i){return i*Xo}function wA(i){return(i&i-1)===0&&i!==0}function EA(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function xA(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function SA(i,e,t,n,s){const r=Math.cos,a=Math.sin,o=r(t/2),l=a(t/2),u=r((e+n)/2),c=a((e+n)/2),d=r((e-n)/2),h=a((e-n)/2),f=r((n-e)/2),p=a((n-e)/2);switch(s){case"XYX":i.set(o*c,l*d,l*h,o*u);break;case"YZY":i.set(l*h,o*c,l*d,o*u);break;case"ZXZ":i.set(l*d,l*h,o*c,o*u);break;case"XZX":i.set(o*c,l*p,l*f,o*u);break;case"YXY":i.set(l*f,o*c,l*p,o*u);break;case"ZYZ":i.set(l*p,l*f,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function sa(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Ti(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const $t={DEG2RAD:Co,RAD2DEG:Xo,generateUUID:Fa,clamp:hi,euclideanModulo:op,mapLinear:cA,inverseLerp:uA,lerp:Ao,damp:dA,pingpong:hA,smoothstep:fA,smootherstep:pA,randInt:mA,randFloat:gA,randFloatSpread:vA,seededRandom:yA,degToRad:bA,radToDeg:_A,isPowerOfTwo:wA,ceilPowerOfTwo:EA,floorPowerOfTwo:xA,setQuaternionFromProperEuler:SA,normalize:Ti,denormalize:sa};let gt=class Py{constructor(e=0,t=0){Py.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*s+e.x,this.y=r*s+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};class ut{constructor(e,t,n,s,r,a,o,l,u){ut.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,u)}set(e,t,n,s,r,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=s,c[2]=o,c[3]=t,c[4]=r,c[5]=l,c[6]=n,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[3],l=n[6],u=n[1],c=n[4],d=n[7],h=n[2],f=n[5],p=n[8],g=s[0],v=s[3],m=s[6],b=s[1],_=s[4],y=s[7],M=s[2],x=s[5],S=s[8];return r[0]=a*g+o*b+l*M,r[3]=a*v+o*_+l*x,r[6]=a*m+o*y+l*S,r[1]=u*g+c*b+d*M,r[4]=u*v+c*_+d*x,r[7]=u*m+c*y+d*S,r[2]=h*g+f*b+p*M,r[5]=h*v+f*_+p*x,r[8]=h*m+f*y+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*r*c+n*o*l+s*r*u-s*a*l}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*a-o*u,h=o*l-c*r,f=u*r-a*l,p=t*d+n*h+s*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(s*u-c*n)*g,e[2]=(o*n-s*a)*g,e[3]=h*g,e[4]=(c*t-s*l)*g,e[5]=(s*r-o*t)*g,e[6]=f*g,e[7]=(n*l-u*t)*g,e[8]=(a*t-n*r)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,a,o){const l=Math.cos(r),u=Math.sin(r);return this.set(n*l,n*u,-n*(l*a+u*o)+a+e,-s*u,s*l,-s*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Id.makeScale(e,t)),this}rotate(e){return this.premultiply(Id.makeRotation(-e)),this}translate(e,t){return this.premultiply(Id.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Id=new ut;function Ly(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Jc(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function TA(){const i=Jc("canvas");return i.style.display="block",i}const Ag={};function Po(i){i in Ag||(Ag[i]=!0,console.warn(i))}function MA(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}const Pg=new ut().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Lg=new ut().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ho={[gs]:{transfer:Yc,primaries:Kc,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[Rn]:{transfer:kt,primaries:Kc,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[wu]:{transfer:Yc,primaries:Zc,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(Lg),fromReference:i=>i.applyMatrix3(Pg)},[ap]:{transfer:kt,primaries:Zc,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(Lg),fromReference:i=>i.applyMatrix3(Pg).convertLinearToSRGB()}},CA=new Set([gs,wu]),St={enabled:!0,_workingColorSpace:gs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!CA.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=ho[e].toReference,s=ho[t].fromReference;return s(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return ho[i].primaries},getTransfer:function(i){return i===As?Yc:ho[i].transfer},getLuminanceCoefficients:function(i,e=this._workingColorSpace){return i.fromArray(ho[e].luminanceCoefficients)}};function ma(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Od(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Hr;class AA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Hr===void 0&&(Hr=Jc("canvas")),Hr.width=e.width,Hr.height=e.height;const n=Hr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Hr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Jc("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=ma(r[a]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(ma(t[n]/255)*255):t[n]=ma(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let PA=0;class Ry{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:PA++}),this.uuid=Fa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(Dd(s[a].image)):r.push(Dd(s[a]))}else r=Dd(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function Dd(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?AA.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let LA=0;class Pi extends Na{constructor(e=Pi.DEFAULT_IMAGE,t=Pi.DEFAULT_MAPPING,n=vr,s=vr,r=on,a=Is,o=wn,l=ps,u=Pi.DEFAULT_ANISOTROPY,c=As){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:LA++}),this.uuid=Fa(),this.name="",this.source=new Ry(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ut,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rh:e.x=e.x-Math.floor(e.x);break;case vr:e.x=e.x<0?0:1;break;case Ih:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Rh:e.y=e.y-Math.floor(e.y);break;case vr:e.y=e.y<0?0:1;break;case Ih:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Pi.DEFAULT_IMAGE=null;Pi.DEFAULT_MAPPING=vy;Pi.DEFAULT_ANISOTROPY=1;class li{constructor(e=0,t=0,n=0,s=1){li.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*s+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const l=e.elements,u=l[0],c=l[4],d=l[8],h=l[1],f=l[5],p=l[9],g=l[2],v=l[6],m=l[10];if(Math.abs(c-h)<.01&&Math.abs(d-g)<.01&&Math.abs(p-v)<.01){if(Math.abs(c+h)<.1&&Math.abs(d+g)<.1&&Math.abs(p+v)<.1&&Math.abs(u+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(u+1)/2,y=(f+1)/2,M=(m+1)/2,x=(c+h)/4,S=(d+g)/4,A=(p+v)/4;return _>y&&_>M?_<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(_),s=x/n,r=S/n):y>M?y<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(y),n=x/s,r=A/s):M<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(M),n=S/r,s=A/r),this.set(n,s,r,t),this}let b=Math.sqrt((v-p)*(v-p)+(d-g)*(d-g)+(h-c)*(h-c));return Math.abs(b)<.001&&(b=1),this.x=(v-p)/b,this.y=(d-g)/b,this.z=(h-c)/b,this.w=Math.acos((u+f+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RA extends Na{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new li(0,0,e,t),this.scissorTest=!1,this.viewport=new li(0,0,e,t);const s={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:on,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new Pi(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,s=e.textures.length;n<s;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ry(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hs extends RA{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Iy extends Pi{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=cn,this.minFilter=cn,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class IA extends Pi{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=cn,this.minFilter=cn,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let Ua=class{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,a,o){let l=n[s+0],u=n[s+1],c=n[s+2],d=n[s+3];const h=r[a+0],f=r[a+1],p=r[a+2],g=r[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(d!==g||l!==h||u!==f||c!==p){let v=1-o;const m=l*h+u*f+c*p+d*g,b=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){const M=Math.sqrt(_),x=Math.atan2(M,m*b);v=Math.sin(v*x)/M,o=Math.sin(o*x)/M}const y=o*b;if(l=l*v+h*y,u=u*v+f*y,c=c*v+p*y,d=d*v+g*y,v===1-o){const M=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=M,u*=M,c*=M,d*=M}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,s,r,a){const o=n[s],l=n[s+1],u=n[s+2],c=n[s+3],d=r[a],h=r[a+1],f=r[a+2],p=r[a+3];return e[t]=o*p+c*d+l*f-u*h,e[t+1]=l*p+c*h+u*d-o*f,e[t+2]=u*p+c*f+o*h-l*d,e[t+3]=c*p-o*d-l*h-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(n/2),c=o(s/2),d=o(r/2),h=l(n/2),f=l(s/2),p=l(r/2);switch(a){case"XYZ":this._x=h*c*d+u*f*p,this._y=u*f*d-h*c*p,this._z=u*c*p+h*f*d,this._w=u*c*d-h*f*p;break;case"YXZ":this._x=h*c*d+u*f*p,this._y=u*f*d-h*c*p,this._z=u*c*p-h*f*d,this._w=u*c*d+h*f*p;break;case"ZXY":this._x=h*c*d-u*f*p,this._y=u*f*d+h*c*p,this._z=u*c*p+h*f*d,this._w=u*c*d-h*f*p;break;case"ZYX":this._x=h*c*d-u*f*p,this._y=u*f*d+h*c*p,this._z=u*c*p-h*f*d,this._w=u*c*d+h*f*p;break;case"YZX":this._x=h*c*d+u*f*p,this._y=u*f*d+h*c*p,this._z=u*c*p-h*f*d,this._w=u*c*d-h*f*p;break;case"XZY":this._x=h*c*d-u*f*p,this._y=u*f*d-h*c*p,this._z=u*c*p+h*f*d,this._w=u*c*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],h=n+o+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-l)*f,this._y=(r-u)*f,this._z=(a-s)*f}else if(n>o&&n>d){const f=2*Math.sqrt(1+n-o-d);this._w=(c-l)/f,this._x=.25*f,this._y=(s+a)/f,this._z=(r+u)/f}else if(o>d){const f=2*Math.sqrt(1+o-n-d);this._w=(r-u)/f,this._x=(s+a)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+d-n-o);this._w=(a-s)/f,this._x=(r+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+s*u-r*l,this._y=s*c+a*l+r*o-n*u,this._z=r*c+a*u+n*l-s*o,this._w=a*c-n*o-s*l-r*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*n+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},me=class Oy{constructor(e=0,t=0,n=0){Oy.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Rg.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Rg.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*s-o*n),c=2*(o*t-r*s),d=2*(r*n-a*t);return this.x=t+l*u+a*d-o*c,this.y=n+l*c+o*u-r*d,this.z=s+l*d+r*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,a=t.x,o=t.y,l=t.z;return this.x=s*l-r*o,this.y=r*a-n*l,this.z=n*o-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return kd.copy(this).projectOnVector(e),this.sub(kd)}reflect(e){return this.sub(kd.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const kd=new me,Rg=new Ua;class za{constructor(e=new me(1/0,1/0,1/0),t=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(mn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(mn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,mn):mn.fromBufferAttribute(r,a),mn.applyMatrix4(e.matrixWorld),this.expandByPoint(mn);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Xl.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Xl.copy(n.boundingBox)),Xl.applyMatrix4(e.matrixWorld),this.union(Xl)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,mn),mn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fo),ql.subVectors(this.max,fo),Vr.subVectors(e.a,fo),$r.subVectors(e.b,fo),Gr.subVectors(e.c,fo),bs.subVectors($r,Vr),_s.subVectors(Gr,$r),sr.subVectors(Vr,Gr);let t=[0,-bs.z,bs.y,0,-_s.z,_s.y,0,-sr.z,sr.y,bs.z,0,-bs.x,_s.z,0,-_s.x,sr.z,0,-sr.x,-bs.y,bs.x,0,-_s.y,_s.x,0,-sr.y,sr.x,0];return!Nd(t,Vr,$r,Gr,ql)||(t=[1,0,0,0,1,0,0,0,1],!Nd(t,Vr,$r,Gr,ql))?!1:(Yl.crossVectors(bs,_s),t=[Yl.x,Yl.y,Yl.z],Nd(t,Vr,$r,Gr,ql))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(mn).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zn),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Zn=[new me,new me,new me,new me,new me,new me,new me,new me],mn=new me,Xl=new za,Vr=new me,$r=new me,Gr=new me,bs=new me,_s=new me,sr=new me,fo=new me,ql=new me,Yl=new me,rr=new me;function Nd(i,e,t,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){rr.fromArray(i,r);const o=s.x*Math.abs(rr.x)+s.y*Math.abs(rr.y)+s.z*Math.abs(rr.z),l=e.dot(rr),u=t.dot(rr),c=n.dot(rr);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const OA=new za,po=new me,Fd=new me;class lp{constructor(e=new me,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):OA.setFromPoints(e).getCenter(n);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;po.subVectors(e,this.center);const t=po.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(po,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Fd.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(po.copy(e.center).add(Fd)),this.expandByPoint(po.copy(e.center).sub(Fd))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Qn=new me,Ud=new me,Kl=new me,ws=new me,zd=new me,Zl=new me,Bd=new me;class Dy{constructor(e=new me,t=new me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qn)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Qn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Qn.copy(this.origin).addScaledVector(this.direction,t),Qn.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){Ud.copy(e).add(t).multiplyScalar(.5),Kl.copy(t).sub(e).normalize(),ws.copy(this.origin).sub(Ud);const r=e.distanceTo(t)*.5,a=-this.direction.dot(Kl),o=ws.dot(this.direction),l=-ws.dot(Kl),u=ws.lengthSq(),c=Math.abs(1-a*a);let d,h,f,p;if(c>0)if(d=a*l-o,h=a*o-l,p=r*c,d>=0)if(h>=-p)if(h<=p){const g=1/c;d*=g,h*=g,f=d*(d+a*h+2*o)+h*(a*d+h+2*l)+u}else h=r,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+u;else h=-r,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+u;else h<=-p?(d=Math.max(0,-(-a*r+o)),h=d>0?-r:Math.min(Math.max(-r,-l),r),f=-d*d+h*(h+2*l)+u):h<=p?(d=0,h=Math.min(Math.max(-r,-l),r),f=h*(h+2*l)+u):(d=Math.max(0,-(a*r+o)),h=d>0?r:Math.min(Math.max(-r,-l),r),f=-d*d+h*(h+2*l)+u);else h=a>0?-r:r,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(Ud).addScaledVector(Kl,h),f}intersectSphere(e,t){Qn.subVectors(e.center,this.origin);const n=Qn.dot(this.direction),s=Qn.dot(Qn)-n*n,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,s=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,s=(e.min.x-h.x)*u),c>=0?(r=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),n>l||o>s)||((o>n||n!==n)&&(n=o),(l<s||s!==s)&&(s=l),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,Qn)!==null}intersectTriangle(e,t,n,s,r){zd.subVectors(t,e),Zl.subVectors(n,e),Bd.crossVectors(zd,Zl);let a=this.direction.dot(Bd),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ws.subVectors(this.origin,e);const l=o*this.direction.dot(Zl.crossVectors(ws,Zl));if(l<0)return null;const u=o*this.direction.dot(zd.cross(ws));if(u<0||l+u>a)return null;const c=-o*ws.dot(Bd);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let Zt=class af{constructor(e,t,n,s,r,a,o,l,u,c,d,h,f,p,g,v){af.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,u,c,d,h,f,p,g,v)}set(e,t,n,s,r,a,o,l,u,c,d,h,f,p,g,v){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=s,m[1]=r,m[5]=a,m[9]=o,m[13]=l,m[2]=u,m[6]=c,m[10]=d,m[14]=h,m[3]=f,m[7]=p,m[11]=g,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new af().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/Wr.setFromMatrixColumn(e,0).length(),r=1/Wr.setFromMatrixColumn(e,1).length(),a=1/Wr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(s),u=Math.sin(s),c=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=a*c,f=a*d,p=o*c,g=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=f+p*u,t[5]=h-g*u,t[9]=-o*l,t[2]=g-h*u,t[6]=p+f*u,t[10]=a*l}else if(e.order==="YXZ"){const h=l*c,f=l*d,p=u*c,g=u*d;t[0]=h+g*o,t[4]=p*o-f,t[8]=a*u,t[1]=a*d,t[5]=a*c,t[9]=-o,t[2]=f*o-p,t[6]=g+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*c,f=l*d,p=u*c,g=u*d;t[0]=h-g*o,t[4]=-a*d,t[8]=p+f*o,t[1]=f+p*o,t[5]=a*c,t[9]=g-h*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*c,f=a*d,p=o*c,g=o*d;t[0]=l*c,t[4]=p*u-f,t[8]=h*u+g,t[1]=l*d,t[5]=g*u+h,t[9]=f*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,f=a*u,p=o*l,g=o*u;t[0]=l*c,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=f*d+p,t[10]=h-g*d}else if(e.order==="XZY"){const h=a*l,f=a*u,p=o*l,g=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=h*d+g,t[5]=a*c,t[9]=f*d-p,t[2]=p*d-f,t[6]=o*c,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(DA,e,kA)}lookAt(e,t,n){const s=this.elements;return Bi.subVectors(e,t),Bi.lengthSq()===0&&(Bi.z=1),Bi.normalize(),Es.crossVectors(n,Bi),Es.lengthSq()===0&&(Math.abs(n.z)===1?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),Es.crossVectors(n,Bi)),Es.normalize(),Ql.crossVectors(Bi,Es),s[0]=Es.x,s[4]=Ql.x,s[8]=Bi.x,s[1]=Es.y,s[5]=Ql.y,s[9]=Bi.y,s[2]=Es.z,s[6]=Ql.z,s[10]=Bi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[4],l=n[8],u=n[12],c=n[1],d=n[5],h=n[9],f=n[13],p=n[2],g=n[6],v=n[10],m=n[14],b=n[3],_=n[7],y=n[11],M=n[15],x=s[0],S=s[4],A=s[8],E=s[12],w=s[1],C=s[5],P=s[9],T=s[13],R=s[2],F=s[6],z=s[10],D=s[14],O=s[3],j=s[7],k=s[11],I=s[15];return r[0]=a*x+o*w+l*R+u*O,r[4]=a*S+o*C+l*F+u*j,r[8]=a*A+o*P+l*z+u*k,r[12]=a*E+o*T+l*D+u*I,r[1]=c*x+d*w+h*R+f*O,r[5]=c*S+d*C+h*F+f*j,r[9]=c*A+d*P+h*z+f*k,r[13]=c*E+d*T+h*D+f*I,r[2]=p*x+g*w+v*R+m*O,r[6]=p*S+g*C+v*F+m*j,r[10]=p*A+g*P+v*z+m*k,r[14]=p*E+g*T+v*D+m*I,r[3]=b*x+_*w+y*R+M*O,r[7]=b*S+_*C+y*F+M*j,r[11]=b*A+_*P+y*z+M*k,r[15]=b*E+_*T+y*D+M*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],f=e[14],p=e[3],g=e[7],v=e[11],m=e[15];return p*(+r*l*d-s*u*d-r*o*h+n*u*h+s*o*f-n*l*f)+g*(+t*l*f-t*u*h+r*a*h-s*a*f+s*u*c-r*l*c)+v*(+t*u*d-t*o*f-r*a*d+n*a*f+r*o*c-n*u*c)+m*(-s*o*c-t*l*d+t*o*h+s*a*d-n*a*h+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],b=d*v*u-g*h*u+g*l*f-o*v*f-d*l*m+o*h*m,_=p*h*u-c*v*u-p*l*f+a*v*f+c*l*m-a*h*m,y=c*g*u-p*d*u+p*o*f-a*g*f-c*o*m+a*d*m,M=p*d*l-c*g*l-p*o*h+a*g*h+c*o*v-a*d*v,x=t*b+n*_+s*y+r*M;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=b*S,e[1]=(g*h*r-d*v*r-g*s*f+n*v*f+d*s*m-n*h*m)*S,e[2]=(o*v*r-g*l*r+g*s*u-n*v*u-o*s*m+n*l*m)*S,e[3]=(d*l*r-o*h*r-d*s*u+n*h*u+o*s*f-n*l*f)*S,e[4]=_*S,e[5]=(c*v*r-p*h*r+p*s*f-t*v*f-c*s*m+t*h*m)*S,e[6]=(p*l*r-a*v*r-p*s*u+t*v*u+a*s*m-t*l*m)*S,e[7]=(a*h*r-c*l*r+c*s*u-t*h*u-a*s*f+t*l*f)*S,e[8]=y*S,e[9]=(p*d*r-c*g*r-p*n*f+t*g*f+c*n*m-t*d*m)*S,e[10]=(a*g*r-p*o*r+p*n*u-t*g*u-a*n*m+t*o*m)*S,e[11]=(c*o*r-a*d*r-c*n*u+t*d*u+a*n*f-t*o*f)*S,e[12]=M*S,e[13]=(c*g*s-p*d*s+p*n*h-t*g*h-c*n*v+t*d*v)*S,e[14]=(p*o*s-a*g*s-p*n*l+t*g*l+a*n*v-t*o*v)*S,e[15]=(a*d*s-c*o*s+c*n*l-t*d*l-a*n*h+t*o*h)*S,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,a=e.x,o=e.y,l=e.z,u=r*a,c=r*o;return this.set(u*a+n,u*o-s*l,u*l+s*o,0,u*o+s*l,c*o+n,c*l-s*a,0,u*l-s*o,c*l+s*a,r*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,a){return this.set(1,n,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,a=t._y,o=t._z,l=t._w,u=r+r,c=a+a,d=o+o,h=r*u,f=r*c,p=r*d,g=a*c,v=a*d,m=o*d,b=l*u,_=l*c,y=l*d,M=n.x,x=n.y,S=n.z;return s[0]=(1-(g+m))*M,s[1]=(f+y)*M,s[2]=(p-_)*M,s[3]=0,s[4]=(f-y)*x,s[5]=(1-(h+m))*x,s[6]=(v+b)*x,s[7]=0,s[8]=(p+_)*S,s[9]=(v-b)*S,s[10]=(1-(h+g))*S,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=Wr.set(s[0],s[1],s[2]).length();const a=Wr.set(s[4],s[5],s[6]).length(),o=Wr.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],gn.copy(this);const u=1/r,c=1/a,d=1/o;return gn.elements[0]*=u,gn.elements[1]*=u,gn.elements[2]*=u,gn.elements[4]*=c,gn.elements[5]*=c,gn.elements[6]*=c,gn.elements[8]*=d,gn.elements[9]*=d,gn.elements[10]*=d,t.setFromRotationMatrix(gn),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,s,r,a,o=us){const l=this.elements,u=2*r/(t-e),c=2*r/(n-s),d=(t+e)/(t-e),h=(n+s)/(n-s);let f,p;if(o===us)f=-(a+r)/(a-r),p=-2*a*r/(a-r);else if(o===Qc)f=-a/(a-r),p=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,s,r,a,o=us){const l=this.elements,u=1/(t-e),c=1/(n-s),d=1/(a-r),h=(t+e)*u,f=(n+s)*c;let p,g;if(o===us)p=(a+r)*d,g=-2*d;else if(o===Qc)p=r*d,g=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const Wr=new me,gn=new Zt,DA=new me(0,0,0),kA=new me(1,1,1),Es=new me,Ql=new me,Bi=new me,Ig=new Zt,Og=new Ua;class $n{constructor(e=0,t=0,n=0,s=$n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],a=s[4],o=s[8],l=s[1],u=s[5],c=s[9],d=s[2],h=s[6],f=s[10];switch(t){case"XYZ":this._y=Math.asin(hi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-hi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(hi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-hi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(hi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-hi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ig.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ig,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Og.setFromEuler(this),this.setFromQuaternion(Og,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$n.DEFAULT_ORDER="XYZ";class cp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let NA=0;const Dg=new me,jr=new Ua,Jn=new Zt,Jl=new me,mo=new me,FA=new me,UA=new Ua,kg=new me(1,0,0),Ng=new me(0,1,0),Fg=new me(0,0,1),Ug={type:"added"},zA={type:"removed"},Xr={type:"childadded",child:null},Hd={type:"childremoved",child:null};class Yi extends Na{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:NA++}),this.uuid=Fa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yi.DEFAULT_UP.clone();const e=new me,t=new $n,n=new Ua,s=new me(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Zt},normalMatrix:{value:new ut}}),this.matrix=new Zt,this.matrixWorld=new Zt,this.matrixAutoUpdate=Yi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return jr.setFromAxisAngle(e,t),this.quaternion.multiply(jr),this}rotateOnWorldAxis(e,t){return jr.setFromAxisAngle(e,t),this.quaternion.premultiply(jr),this}rotateX(e){return this.rotateOnAxis(kg,e)}rotateY(e){return this.rotateOnAxis(Ng,e)}rotateZ(e){return this.rotateOnAxis(Fg,e)}translateOnAxis(e,t){return Dg.copy(e).applyQuaternion(this.quaternion),this.position.add(Dg.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(kg,e)}translateY(e){return this.translateOnAxis(Ng,e)}translateZ(e){return this.translateOnAxis(Fg,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Jn.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Jl.copy(e):Jl.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),mo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jn.lookAt(mo,Jl,this.up):Jn.lookAt(Jl,mo,this.up),this.quaternion.setFromRotationMatrix(Jn),s&&(Jn.extractRotation(s.matrixWorld),jr.setFromRotationMatrix(Jn),this.quaternion.premultiply(jr.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Ug),Xr.child=e,this.dispatchEvent(Xr),Xr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zA),Hd.child=e,this.dispatchEvent(Hd),Hd.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Jn.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Jn.multiply(e.parent.matrixWorld)),e.applyMatrix4(Jn),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Ug),Xr.child=e,this.dispatchEvent(Xr),Xr.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mo,e,FA),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mo,UA,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(r(e.materials,this.material[l]));s.material=o}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];s.animations.push(r(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),d=a(e.shapes),h=a(e.skeletons),f=a(e.animations),p=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),d.length>0&&(n.shapes=d),h.length>0&&(n.skeletons=h),f.length>0&&(n.animations=f),p.length>0&&(n.nodes=p)}return n.object=s,n;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Yi.DEFAULT_UP=new me(0,1,0);Yi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vn=new me,es=new me,Vd=new me,ts=new me,qr=new me,Yr=new me,zg=new me,$d=new me,Gd=new me,Wd=new me;class kn{constructor(e=new me,t=new me,n=new me){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),vn.subVectors(e,t),s.cross(vn);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){vn.subVectors(s,t),es.subVectors(n,t),Vd.subVectors(e,t);const a=vn.dot(vn),o=vn.dot(es),l=vn.dot(Vd),u=es.dot(es),c=es.dot(Vd),d=a*u-o*o;if(d===0)return r.set(0,0,0),null;const h=1/d,f=(u*l-o*c)*h,p=(a*c-o*l)*h;return r.set(1-f-p,p,f)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,ts)===null?!1:ts.x>=0&&ts.y>=0&&ts.x+ts.y<=1}static getInterpolation(e,t,n,s,r,a,o,l){return this.getBarycoord(e,t,n,s,ts)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,ts.x),l.addScaledVector(a,ts.y),l.addScaledVector(o,ts.z),l)}static isFrontFacing(e,t,n,s){return vn.subVectors(n,t),es.subVectors(e,t),vn.cross(es).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vn.subVectors(this.c,this.b),es.subVectors(this.a,this.b),vn.cross(es).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return kn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return kn.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return kn.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return kn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return kn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let a,o;qr.subVectors(s,n),Yr.subVectors(r,n),$d.subVectors(e,n);const l=qr.dot($d),u=Yr.dot($d);if(l<=0&&u<=0)return t.copy(n);Gd.subVectors(e,s);const c=qr.dot(Gd),d=Yr.dot(Gd);if(c>=0&&d<=c)return t.copy(s);const h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(n).addScaledVector(qr,a);Wd.subVectors(e,r);const f=qr.dot(Wd),p=Yr.dot(Wd);if(p>=0&&f<=p)return t.copy(r);const g=f*u-l*p;if(g<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(n).addScaledVector(Yr,o);const v=c*p-f*d;if(v<=0&&d-c>=0&&f-p>=0)return zg.subVectors(r,s),o=(d-c)/(d-c+(f-p)),t.copy(s).addScaledVector(zg,o);const m=1/(v+g+h);return a=g*m,o=h*m,t.copy(n).addScaledVector(qr,a).addScaledVector(Yr,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ky={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xs={h:0,s:0,l:0},ec={h:0,s:0,l:0};function jd(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Lt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Rn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,St.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=St.workingColorSpace){return this.r=e,this.g=t,this.b=n,St.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=St.workingColorSpace){if(e=op(e,1),t=hi(t,0,1),n=hi(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=jd(a,r,e+1/3),this.g=jd(a,r,e),this.b=jd(a,r,e-1/3)}return St.toWorkingColorSpace(this,s),this}setStyle(e,t=Rn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Rn){const n=ky[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ma(e.r),this.g=ma(e.g),this.b=ma(e.b),this}copyLinearToSRGB(e){return this.r=Od(e.r),this.g=Od(e.g),this.b=Od(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rn){return St.fromWorkingColorSpace(_i.copy(this),e),Math.round(hi(_i.r*255,0,255))*65536+Math.round(hi(_i.g*255,0,255))*256+Math.round(hi(_i.b*255,0,255))}getHexString(e=Rn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=St.workingColorSpace){St.fromWorkingColorSpace(_i.copy(this),t);const n=_i.r,s=_i.g,r=_i.b,a=Math.max(n,s,r),o=Math.min(n,s,r);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const d=a-o;switch(u=c<=.5?d/(a+o):d/(2-a-o),a){case n:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-n)/d+2;break;case r:l=(n-s)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=St.workingColorSpace){return St.fromWorkingColorSpace(_i.copy(this),t),e.r=_i.r,e.g=_i.g,e.b=_i.b,e}getStyle(e=Rn){St.fromWorkingColorSpace(_i.copy(this),e);const t=_i.r,n=_i.g,s=_i.b;return e!==Rn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(xs),this.setHSL(xs.h+e,xs.s+t,xs.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(xs),e.getHSL(ec);const n=Ao(xs.h,ec.h,t),s=Ao(xs.s,ec.s,t),r=Ao(xs.l,ec.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _i=new Lt;Lt.NAMES=ky;let BA=0;class Eu extends Na{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:BA++}),this.uuid=Fa(),this.name="",this.type="Material",this.blending=fa,this.side=Bs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ch,this.blendDst=Ah,this.blendEquation=fr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Lt(0,0,0),this.blendAlpha=0,this.depthFunc=qc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Sg,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Br,this.stencilZFail=Br,this.stencilZPass=Br,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==fa&&(n.blending=this.blending),this.side!==Bs&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Ch&&(n.blendSrc=this.blendSrc),this.blendDst!==Ah&&(n.blendDst=this.blendDst),this.blendEquation!==fr&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==qc&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Sg&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Br&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Br&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Br&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const o in r){const l=r[o];delete l.metadata,a.push(l)}return a}if(t){const r=s(e.textures),a=s(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class xu extends Eu{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $n,this.combine=gy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xt=new me,tc=new gt;class Bn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Tg,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=cs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Po("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)tc.fromBufferAttribute(this,t),tc.applyMatrix3(e),this.setXY(t,tc.x,tc.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Xt.fromBufferAttribute(this,t),Xt.applyMatrix3(e),this.setXYZ(t,Xt.x,Xt.y,Xt.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Xt.fromBufferAttribute(this,t),Xt.applyMatrix4(e),this.setXYZ(t,Xt.x,Xt.y,Xt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Xt.fromBufferAttribute(this,t),Xt.applyNormalMatrix(e),this.setXYZ(t,Xt.x,Xt.y,Xt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Xt.fromBufferAttribute(this,t),Xt.transformDirection(e),this.setXYZ(t,Xt.x,Xt.y,Xt.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=sa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ti(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ti(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ti(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ti(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ti(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ti(t,this.array),n=Ti(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=Ti(t,this.array),n=Ti(n,this.array),s=Ti(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=Ti(t,this.array),n=Ti(n,this.array),s=Ti(s,this.array),r=Ti(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Tg&&(e.usage=this.usage),e}}class Ny extends Bn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Fy extends Bn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Hn extends Bn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let HA=0;const nn=new Zt,Xd=new Yi,Kr=new me,Hi=new za,go=new za,ii=new me;class Ws extends Na{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HA++}),this.uuid=Fa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ly(e)?Fy:Ny)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new ut().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return nn.makeRotationFromQuaternion(e),this.applyMatrix4(nn),this}rotateX(e){return nn.makeRotationX(e),this.applyMatrix4(nn),this}rotateY(e){return nn.makeRotationY(e),this.applyMatrix4(nn),this}rotateZ(e){return nn.makeRotationZ(e),this.applyMatrix4(nn),this}translate(e,t,n){return nn.makeTranslation(e,t,n),this.applyMatrix4(nn),this}scale(e,t,n){return nn.makeScale(e,t,n),this.applyMatrix4(nn),this}lookAt(e){return Xd.lookAt(e),Xd.updateMatrix(),this.applyMatrix4(Xd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kr).negate(),this.translate(Kr.x,Kr.y,Kr.z),this}setFromPoints(e){const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Hn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new za);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];Hi.setFromBufferAttribute(r),this.morphTargetsRelative?(ii.addVectors(this.boundingBox.min,Hi.min),this.boundingBox.expandByPoint(ii),ii.addVectors(this.boundingBox.max,Hi.max),this.boundingBox.expandByPoint(ii)):(this.boundingBox.expandByPoint(Hi.min),this.boundingBox.expandByPoint(Hi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new lp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new me,1/0);return}if(e){const n=this.boundingSphere.center;if(Hi.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const o=t[r];go.setFromBufferAttribute(o),this.morphTargetsRelative?(ii.addVectors(Hi.min,go.min),Hi.expandByPoint(ii),ii.addVectors(Hi.max,go.max),Hi.expandByPoint(ii)):(Hi.expandByPoint(go.min),Hi.expandByPoint(go.max))}Hi.getCenter(n);let s=0;for(let r=0,a=e.count;r<a;r++)ii.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(ii));if(t)for(let r=0,a=t.length;r<a;r++){const o=t[r],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)ii.fromBufferAttribute(o,u),l&&(Kr.fromBufferAttribute(e,u),ii.add(Kr)),s=Math.max(s,n.distanceToSquared(ii))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let A=0;A<n.count;A++)o[A]=new me,l[A]=new me;const u=new me,c=new me,d=new me,h=new gt,f=new gt,p=new gt,g=new me,v=new me;function m(A,E,w){u.fromBufferAttribute(n,A),c.fromBufferAttribute(n,E),d.fromBufferAttribute(n,w),h.fromBufferAttribute(r,A),f.fromBufferAttribute(r,E),p.fromBufferAttribute(r,w),c.sub(u),d.sub(u),f.sub(h),p.sub(h);const C=1/(f.x*p.y-p.x*f.y);isFinite(C)&&(g.copy(c).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(C),v.copy(d).multiplyScalar(f.x).addScaledVector(c,-p.x).multiplyScalar(C),o[A].add(g),o[E].add(g),o[w].add(g),l[A].add(v),l[E].add(v),l[w].add(v))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let A=0,E=b.length;A<E;++A){const w=b[A],C=w.start,P=w.count;for(let T=C,R=C+P;T<R;T+=3)m(e.getX(T+0),e.getX(T+1),e.getX(T+2))}const _=new me,y=new me,M=new me,x=new me;function S(A){M.fromBufferAttribute(s,A),x.copy(M);const E=o[A];_.copy(E),_.sub(M.multiplyScalar(M.dot(E))).normalize(),y.crossVectors(x,E);const C=y.dot(l[A])<0?-1:1;a.setXYZW(A,_.x,_.y,_.z,C)}for(let A=0,E=b.length;A<E;++A){const w=b[A],C=w.start,P=w.count;for(let T=C,R=C+P;T<R;T+=3)S(e.getX(T+0)),S(e.getX(T+1)),S(e.getX(T+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Bn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const s=new me,r=new me,a=new me,o=new me,l=new me,u=new me,c=new me,d=new me;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);s.fromBufferAttribute(t,p),r.fromBufferAttribute(t,g),a.fromBufferAttribute(t,v),c.subVectors(a,r),d.subVectors(s,r),c.cross(d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,g),u.fromBufferAttribute(n,v),o.add(c),l.add(c),u.add(c),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,f=t.count;h<f;h+=3)s.fromBufferAttribute(t,h+0),r.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),c.subVectors(a,r),d.subVectors(s,r),c.cross(d),n.setXYZ(h+0,c.x,c.y,c.z),n.setXYZ(h+1,c.x,c.y,c.z),n.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ii.fromBufferAttribute(e,t),ii.normalize(),e.setXYZ(t,ii.x,ii.y,ii.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,h=new u.constructor(l.length*c);let f=0,p=0;for(let g=0,v=l.length;g<v;g++){o.isInterleavedBufferAttribute?f=l[g]*o.data.stride+o.offset:f=l[g]*c;for(let m=0;m<c;m++)h[p++]=u[f++]}return new Bn(h,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ws,n=this.index.array,s=this.attributes;for(const o in s){const l=s[o],u=e(l,n);t.setAttribute(o,u)}const r=this.morphAttributes;for(const o in r){const l=[],u=r[o];for(let c=0,d=u.length;c<d;c++){const h=u[c],f=e(h,n);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,h=u.length;d<h;d++){const f=u[d];c.push(f.toJSON(e.data))}c.length>0&&(s[l]=c,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const s=e.attributes;for(const u in s){const c=s[u];this.setAttribute(u,c.clone(t))}const r=e.morphAttributes;for(const u in r){const c=[],d=r[u];for(let h=0,f=d.length;h<f;h++)c.push(d[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const d=a[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Bg=new Zt,ar=new Dy,ic=new lp,Hg=new me,Zr=new me,Qr=new me,Jr=new me,qd=new me,nc=new me,sc=new gt,rc=new gt,ac=new gt,Vg=new me,$g=new me,Gg=new me,oc=new me,lc=new me;class En extends Yi{constructor(e=new Ws,t=new xu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const o=this.morphTargetInfluences;if(r&&o){nc.set(0,0,0);for(let l=0,u=r.length;l<u;l++){const c=o[l],d=r[l];c!==0&&(qd.fromBufferAttribute(d,e),a?nc.addScaledVector(qd,c):nc.addScaledVector(qd.sub(t),c))}t.add(nc)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),ic.copy(n.boundingSphere),ic.applyMatrix4(r),ar.copy(e.ray).recast(e.near),!(ic.containsPoint(ar.origin)===!1&&(ar.intersectSphere(ic,Hg)===null||ar.origin.distanceToSquared(Hg)>(e.far-e.near)**2))&&(Bg.copy(r).invert(),ar.copy(e.ray).applyMatrix4(Bg),!(n.boundingBox!==null&&ar.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,ar)))}_computeIntersections(e,t,n){let s;const r=this.geometry,a=this.material,o=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv1,d=r.attributes.normal,h=r.groups,f=r.drawRange;if(o!==null)if(Array.isArray(a))for(let p=0,g=h.length;p<g;p++){const v=h[p],m=a[v.materialIndex],b=Math.max(v.start,f.start),_=Math.min(o.count,Math.min(v.start+v.count,f.start+f.count));for(let y=b,M=_;y<M;y+=3){const x=o.getX(y),S=o.getX(y+1),A=o.getX(y+2);s=cc(this,m,e,n,u,c,d,x,S,A),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const p=Math.max(0,f.start),g=Math.min(o.count,f.start+f.count);for(let v=p,m=g;v<m;v+=3){const b=o.getX(v),_=o.getX(v+1),y=o.getX(v+2);s=cc(this,a,e,n,u,c,d,b,_,y),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(a))for(let p=0,g=h.length;p<g;p++){const v=h[p],m=a[v.materialIndex],b=Math.max(v.start,f.start),_=Math.min(l.count,Math.min(v.start+v.count,f.start+f.count));for(let y=b,M=_;y<M;y+=3){const x=y,S=y+1,A=y+2;s=cc(this,m,e,n,u,c,d,x,S,A),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const p=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);for(let v=p,m=g;v<m;v+=3){const b=v,_=v+1,y=v+2;s=cc(this,a,e,n,u,c,d,b,_,y),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}}function VA(i,e,t,n,s,r,a,o){let l;if(e.side===ki?l=n.intersectTriangle(a,r,s,!0,o):l=n.intersectTriangle(s,r,a,e.side===Bs,o),l===null)return null;lc.copy(o),lc.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(lc);return u<t.near||u>t.far?null:{distance:u,point:lc.clone(),object:i}}function cc(i,e,t,n,s,r,a,o,l,u){i.getVertexPosition(o,Zr),i.getVertexPosition(l,Qr),i.getVertexPosition(u,Jr);const c=VA(i,e,t,n,Zr,Qr,Jr,oc);if(c){s&&(sc.fromBufferAttribute(s,o),rc.fromBufferAttribute(s,l),ac.fromBufferAttribute(s,u),c.uv=kn.getInterpolation(oc,Zr,Qr,Jr,sc,rc,ac,new gt)),r&&(sc.fromBufferAttribute(r,o),rc.fromBufferAttribute(r,l),ac.fromBufferAttribute(r,u),c.uv1=kn.getInterpolation(oc,Zr,Qr,Jr,sc,rc,ac,new gt)),a&&(Vg.fromBufferAttribute(a,o),$g.fromBufferAttribute(a,l),Gg.fromBufferAttribute(a,u),c.normal=kn.getInterpolation(oc,Zr,Qr,Jr,Vg,$g,Gg,new me),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const d={a:o,b:l,c:u,normal:new me,materialIndex:0};kn.getNormal(Zr,Qr,Jr,d.normal),c.face=d}return c}class ll extends Ws{constructor(e=1,t=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const l=[],u=[],c=[],d=[];let h=0,f=0;p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,s,a,2),p("x","z","y",1,-1,e,n,-t,s,a,3),p("x","y","z",1,-1,e,t,n,s,r,4),p("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(l),this.setAttribute("position",new Hn(u,3)),this.setAttribute("normal",new Hn(c,3)),this.setAttribute("uv",new Hn(d,2));function p(g,v,m,b,_,y,M,x,S,A,E){const w=y/S,C=M/A,P=y/2,T=M/2,R=x/2,F=S+1,z=A+1;let D=0,O=0;const j=new me;for(let k=0;k<z;k++){const I=k*C-T;for(let U=0;U<F;U++){const B=U*w-P;j[g]=B*b,j[v]=I*_,j[m]=R,u.push(j.x,j.y,j.z),j[g]=0,j[v]=0,j[m]=x>0?1:-1,c.push(j.x,j.y,j.z),d.push(U/S),d.push(1-k/A),D+=1}}for(let k=0;k<A;k++)for(let I=0;I<S;I++){const U=h+I+F*k,B=h+I+F*(k+1),V=h+(I+1)+F*(k+1),H=h+(I+1)+F*k;l.push(U,B,H),l.push(B,V,H),O+=6}o.addGroup(f,O,E),f+=O,h+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ll(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Aa(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function Mi(i){const e={};for(let t=0;t<i.length;t++){const n=Aa(i[t]);for(const s in n)e[s]=n[s]}return e}function $A(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function Uy(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:St.workingColorSpace}const GA={clone:Aa,merge:Mi};var WA=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jA=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vs extends Eu{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=WA,this.fragmentShader=jA,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Aa(e.uniforms),this.uniformsGroups=$A(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?t.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[s]={type:"m4",value:a.toArray()}:t.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class zy extends Yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Zt,this.projectionMatrix=new Zt,this.projectionMatrixInverse=new Zt,this.coordinateSystem=us}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ss=new me,Wg=new gt,jg=new gt;class rn extends zy{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Xo*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Co*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xo*2*Math.atan(Math.tan(Co*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Ss.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ss.x,Ss.y).multiplyScalar(-e/Ss.z),Ss.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ss.x,Ss.y).multiplyScalar(-e/Ss.z)}getViewSize(e,t){return this.getViewBounds(e,Wg,jg),t.subVectors(jg,Wg)}setViewOffset(e,t,n,s,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Co*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;r+=a.offsetX*s/l,t-=a.offsetY*n/u,s*=a.width/l,n*=a.height/u}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ea=-90,ta=1;class XA extends Yi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new rn(ea,ta,e,t);s.layers=this.layers,this.add(s);const r=new rn(ea,ta,e,t);r.layers=this.layers,this.add(r);const a=new rn(ea,ta,e,t);a.layers=this.layers,this.add(a);const o=new rn(ea,ta,e,t);o.layers=this.layers,this.add(o);const l=new rn(ea,ta,e,t);l.layers=this.layers,this.add(l);const u=new rn(ea,ta,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,a,o,l]=t;for(const u of t)this.remove(u);if(e===us)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Qc)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,l,u,c]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,a),e.setRenderTarget(n,2,s),e.render(t,o),e.setRenderTarget(n,3,s),e.render(t,l),e.setRenderTarget(n,4,s),e.render(t,u),n.texture.generateMipmaps=g,e.setRenderTarget(n,5,s),e.render(t,c),e.setRenderTarget(d,h,f),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class By extends Pi{constructor(e,t,n,s,r,a,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Sa,super(e,t,n,s,r,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class qA extends Hs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new By(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:on}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new ll(5,5,5),r=new Vs({name:"CubemapFromEquirect",uniforms:Aa(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ki,blending:Os});r.uniforms.tEquirect.value=t;const a=new En(s,r),o=t.minFilter;return t.minFilter===Is&&(t.minFilter=on),new XA(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,s){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,s);e.setRenderTarget(r)}}const Yd=new me,YA=new me,KA=new ut;class ur{constructor(e=new me(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=Yd.subVectors(n,t).cross(YA.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Yd),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||KA.getNormalMatrix(e),s=this.coplanarPoint(Yd).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const or=new lp,uc=new me;class up{constructor(e=new ur,t=new ur,n=new ur,s=new ur,r=new ur,a=new ur){this.planes=[e,t,n,s,r,a]}set(e,t,n,s,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=us){const n=this.planes,s=e.elements,r=s[0],a=s[1],o=s[2],l=s[3],u=s[4],c=s[5],d=s[6],h=s[7],f=s[8],p=s[9],g=s[10],v=s[11],m=s[12],b=s[13],_=s[14],y=s[15];if(n[0].setComponents(l-r,h-u,v-f,y-m).normalize(),n[1].setComponents(l+r,h+u,v+f,y+m).normalize(),n[2].setComponents(l+a,h+c,v+p,y+b).normalize(),n[3].setComponents(l-a,h-c,v-p,y-b).normalize(),n[4].setComponents(l-o,h-d,v-g,y-_).normalize(),t===us)n[5].setComponents(l+o,h+d,v+g,y+_).normalize();else if(t===Qc)n[5].setComponents(o,d,g,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),or.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),or.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(or)}intersectsSprite(e){return or.center.set(0,0,0),or.radius=.7071067811865476,or.applyMatrix4(e.matrixWorld),this.intersectsSphere(or)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(uc.x=s.normal.x>0?e.max.x:e.min.x,uc.y=s.normal.y>0?e.max.y:e.min.y,uc.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(uc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Hy(){let i=null,e=!1,t=null,n=null;function s(r,a){t(r,a),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function ZA(i){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,d=u.byteLength,h=i.createBuffer();i.bindBuffer(l,h),i.bufferData(l,u,c),o.onUploadCallback();let f;if(u instanceof Float32Array)f=i.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?f=i.HALF_FLOAT:f=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)f=i.SHORT;else if(u instanceof Uint32Array)f=i.UNSIGNED_INT;else if(u instanceof Int32Array)f=i.INT;else if(u instanceof Int8Array)f=i.BYTE;else if(u instanceof Uint8Array)f=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)f=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:f,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function n(o,l,u){const c=l.array,d=l._updateRange,h=l.updateRanges;if(i.bindBuffer(u,o),d.count===-1&&h.length===0&&i.bufferSubData(u,0,c),h.length!==0){for(let f=0,p=h.length;f<p;f++){const g=h[f];i.bufferSubData(u,g.start*c.BYTES_PER_ELEMENT,c,g.start,g.count)}l.clearUpdateRanges()}d.count!==-1&&(i.bufferSubData(u,d.offset*c.BYTES_PER_ELEMENT,c,d.offset,d.count),d.count=-1),l.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,o,l),u.version=o.version}}return{get:s,remove:r,update:a}}class Su extends Ws{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,a=t/2,o=Math.floor(n),l=Math.floor(s),u=o+1,c=l+1,d=e/o,h=t/l,f=[],p=[],g=[],v=[];for(let m=0;m<c;m++){const b=m*h-a;for(let _=0;_<u;_++){const y=_*d-r;p.push(y,-b,0),g.push(0,0,1),v.push(_/o),v.push(1-m/l)}}for(let m=0;m<l;m++)for(let b=0;b<o;b++){const _=b+u*m,y=b+u*(m+1),M=b+1+u*(m+1),x=b+1+u*m;f.push(_,y,x),f.push(y,M,x)}this.setIndex(f),this.setAttribute("position",new Hn(p,3)),this.setAttribute("normal",new Hn(g,3)),this.setAttribute("uv",new Hn(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Su(e.width,e.height,e.widthSegments,e.heightSegments)}}var QA=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,JA=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,eP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,tP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iP=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,sP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,aP=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,oP=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,lP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,cP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,uP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,dP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,pP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,mP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,gP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,vP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,yP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,bP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_P=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,wP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,EP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,SP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,TP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,MP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,CP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,AP="gl_FragColor = linearToOutputTexel( gl_FragColor );",PP=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,RP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,IP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,OP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,DP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,kP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,NP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,FP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,UP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,zP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,BP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,VP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,$P=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,GP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,WP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,XP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,YP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,KP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ZP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,QP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,JP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,e2=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,t2=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,i2=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,n2=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,s2=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,r2=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,a2=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,o2=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,l2=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,c2=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,u2=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,d2=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,h2=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,f2=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,p2=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,m2=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,g2=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,v2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,y2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,b2=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_2=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,w2=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,E2=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,x2=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,S2=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,T2=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,M2=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,C2=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,A2=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,P2=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,L2=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,R2=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,I2=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,O2=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,D2=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,k2=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,N2=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,F2=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,U2=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,z2=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,B2=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,H2=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,V2=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,$2=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,G2=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,W2=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,j2=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,X2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,q2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Y2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,K2=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Z2=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Q2=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,J2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eL=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iL=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nL=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sL=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,rL=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,aL=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,lL=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cL=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uL=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dL=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hL=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fL=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pL=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mL=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,gL=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vL=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yL=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,bL=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_L=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wL=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,EL=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xL=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SL=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TL=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ML=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CL=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AL=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,PL=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ct={alphahash_fragment:QA,alphahash_pars_fragment:JA,alphamap_fragment:eP,alphamap_pars_fragment:tP,alphatest_fragment:iP,alphatest_pars_fragment:nP,aomap_fragment:sP,aomap_pars_fragment:rP,batching_pars_vertex:aP,batching_vertex:oP,begin_vertex:lP,beginnormal_vertex:cP,bsdfs:uP,iridescence_fragment:dP,bumpmap_pars_fragment:hP,clipping_planes_fragment:fP,clipping_planes_pars_fragment:pP,clipping_planes_pars_vertex:mP,clipping_planes_vertex:gP,color_fragment:vP,color_pars_fragment:yP,color_pars_vertex:bP,color_vertex:_P,common:wP,cube_uv_reflection_fragment:EP,defaultnormal_vertex:xP,displacementmap_pars_vertex:SP,displacementmap_vertex:TP,emissivemap_fragment:MP,emissivemap_pars_fragment:CP,colorspace_fragment:AP,colorspace_pars_fragment:PP,envmap_fragment:LP,envmap_common_pars_fragment:RP,envmap_pars_fragment:IP,envmap_pars_vertex:OP,envmap_physical_pars_fragment:GP,envmap_vertex:DP,fog_vertex:kP,fog_pars_vertex:NP,fog_fragment:FP,fog_pars_fragment:UP,gradientmap_pars_fragment:zP,lightmap_pars_fragment:BP,lights_lambert_fragment:HP,lights_lambert_pars_fragment:VP,lights_pars_begin:$P,lights_toon_fragment:WP,lights_toon_pars_fragment:jP,lights_phong_fragment:XP,lights_phong_pars_fragment:qP,lights_physical_fragment:YP,lights_physical_pars_fragment:KP,lights_fragment_begin:ZP,lights_fragment_maps:QP,lights_fragment_end:JP,logdepthbuf_fragment:e2,logdepthbuf_pars_fragment:t2,logdepthbuf_pars_vertex:i2,logdepthbuf_vertex:n2,map_fragment:s2,map_pars_fragment:r2,map_particle_fragment:a2,map_particle_pars_fragment:o2,metalnessmap_fragment:l2,metalnessmap_pars_fragment:c2,morphinstance_vertex:u2,morphcolor_vertex:d2,morphnormal_vertex:h2,morphtarget_pars_vertex:f2,morphtarget_vertex:p2,normal_fragment_begin:m2,normal_fragment_maps:g2,normal_pars_fragment:v2,normal_pars_vertex:y2,normal_vertex:b2,normalmap_pars_fragment:_2,clearcoat_normal_fragment_begin:w2,clearcoat_normal_fragment_maps:E2,clearcoat_pars_fragment:x2,iridescence_pars_fragment:S2,opaque_fragment:T2,packing:M2,premultiplied_alpha_fragment:C2,project_vertex:A2,dithering_fragment:P2,dithering_pars_fragment:L2,roughnessmap_fragment:R2,roughnessmap_pars_fragment:I2,shadowmap_pars_fragment:O2,shadowmap_pars_vertex:D2,shadowmap_vertex:k2,shadowmask_pars_fragment:N2,skinbase_vertex:F2,skinning_pars_vertex:U2,skinning_vertex:z2,skinnormal_vertex:B2,specularmap_fragment:H2,specularmap_pars_fragment:V2,tonemapping_fragment:$2,tonemapping_pars_fragment:G2,transmission_fragment:W2,transmission_pars_fragment:j2,uv_pars_fragment:X2,uv_pars_vertex:q2,uv_vertex:Y2,worldpos_vertex:K2,background_vert:Z2,background_frag:Q2,backgroundCube_vert:J2,backgroundCube_frag:eL,cube_vert:tL,cube_frag:iL,depth_vert:nL,depth_frag:sL,distanceRGBA_vert:rL,distanceRGBA_frag:aL,equirect_vert:oL,equirect_frag:lL,linedashed_vert:cL,linedashed_frag:uL,meshbasic_vert:dL,meshbasic_frag:hL,meshlambert_vert:fL,meshlambert_frag:pL,meshmatcap_vert:mL,meshmatcap_frag:gL,meshnormal_vert:vL,meshnormal_frag:yL,meshphong_vert:bL,meshphong_frag:_L,meshphysical_vert:wL,meshphysical_frag:EL,meshtoon_vert:xL,meshtoon_frag:SL,points_vert:TL,points_frag:ML,shadow_vert:CL,shadow_frag:AL,sprite_vert:PL,sprite_frag:LL},He={common:{diffuse:{value:new Lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ut},alphaMap:{value:null},alphaMapTransform:{value:new ut},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ut}},envmap:{envMap:{value:null},envMapRotation:{value:new ut},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ut}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ut}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ut},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ut},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ut},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ut}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ut}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ut}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ut},alphaTest:{value:0},uvTransform:{value:new ut}},sprite:{diffuse:{value:new Lt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ut},alphaMap:{value:null},alphaMapTransform:{value:new ut},alphaTest:{value:0}}},On={basic:{uniforms:Mi([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.fog]),vertexShader:ct.meshbasic_vert,fragmentShader:ct.meshbasic_frag},lambert:{uniforms:Mi([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new Lt(0)}}]),vertexShader:ct.meshlambert_vert,fragmentShader:ct.meshlambert_frag},phong:{uniforms:Mi([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new Lt(0)},specular:{value:new Lt(1118481)},shininess:{value:30}}]),vertexShader:ct.meshphong_vert,fragmentShader:ct.meshphong_frag},standard:{uniforms:Mi([He.common,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.roughnessmap,He.metalnessmap,He.fog,He.lights,{emissive:{value:new Lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ct.meshphysical_vert,fragmentShader:ct.meshphysical_frag},toon:{uniforms:Mi([He.common,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.gradientmap,He.fog,He.lights,{emissive:{value:new Lt(0)}}]),vertexShader:ct.meshtoon_vert,fragmentShader:ct.meshtoon_frag},matcap:{uniforms:Mi([He.common,He.bumpmap,He.normalmap,He.displacementmap,He.fog,{matcap:{value:null}}]),vertexShader:ct.meshmatcap_vert,fragmentShader:ct.meshmatcap_frag},points:{uniforms:Mi([He.points,He.fog]),vertexShader:ct.points_vert,fragmentShader:ct.points_frag},dashed:{uniforms:Mi([He.common,He.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ct.linedashed_vert,fragmentShader:ct.linedashed_frag},depth:{uniforms:Mi([He.common,He.displacementmap]),vertexShader:ct.depth_vert,fragmentShader:ct.depth_frag},normal:{uniforms:Mi([He.common,He.bumpmap,He.normalmap,He.displacementmap,{opacity:{value:1}}]),vertexShader:ct.meshnormal_vert,fragmentShader:ct.meshnormal_frag},sprite:{uniforms:Mi([He.sprite,He.fog]),vertexShader:ct.sprite_vert,fragmentShader:ct.sprite_frag},background:{uniforms:{uvTransform:{value:new ut},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ct.background_vert,fragmentShader:ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ut}},vertexShader:ct.backgroundCube_vert,fragmentShader:ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ct.cube_vert,fragmentShader:ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ct.equirect_vert,fragmentShader:ct.equirect_frag},distanceRGBA:{uniforms:Mi([He.common,He.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ct.distanceRGBA_vert,fragmentShader:ct.distanceRGBA_frag},shadow:{uniforms:Mi([He.lights,He.fog,{color:{value:new Lt(0)},opacity:{value:1}}]),vertexShader:ct.shadow_vert,fragmentShader:ct.shadow_frag}};On.physical={uniforms:Mi([On.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ut},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ut},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ut},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ut},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ut},sheen:{value:0},sheenColor:{value:new Lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ut},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ut},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ut},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ut},attenuationDistance:{value:0},attenuationColor:{value:new Lt(0)},specularColor:{value:new Lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ut},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ut},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ut}}]),vertexShader:ct.meshphysical_vert,fragmentShader:ct.meshphysical_frag};const dc={r:0,b:0,g:0},lr=new $n,RL=new Zt;function IL(i,e,t,n,s,r,a){const o=new Lt(0);let l=r===!0?0:1,u,c,d=null,h=0,f=null;function p(b){let _=b.isScene===!0?b.background:null;return _&&_.isTexture&&(_=(b.backgroundBlurriness>0?t:e).get(_)),_}function g(b){let _=!1;const y=p(b);y===null?m(o,l):y&&y.isColor&&(m(y,1),_=!0);const M=i.xr.getEnvironmentBlendMode();M==="additive"?n.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||_)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function v(b,_){const y=p(_);y&&(y.isCubeTexture||y.mapping===_u)?(c===void 0&&(c=new En(new ll(1,1,1),new Vs({name:"BackgroundCubeMaterial",uniforms:Aa(On.backgroundCube.uniforms),vertexShader:On.backgroundCube.vertexShader,fragmentShader:On.backgroundCube.fragmentShader,side:ki,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(M,x,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),lr.copy(_.backgroundRotation),lr.x*=-1,lr.y*=-1,lr.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(lr.y*=-1,lr.z*=-1),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(RL.makeRotationFromEuler(lr)),c.material.toneMapped=St.getTransfer(y.colorSpace)!==kt,(d!==y||h!==y.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,d=y,h=y.version,f=i.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(u===void 0&&(u=new En(new Su(2,2),new Vs({name:"BackgroundMaterial",uniforms:Aa(On.background.uniforms),vertexShader:On.background.vertexShader,fragmentShader:On.background.fragmentShader,side:Bs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=y,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=St.getTransfer(y.colorSpace)!==kt,y.matrixAutoUpdate===!0&&y.updateMatrix(),u.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||h!==y.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,d=y,h=y.version,f=i.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function m(b,_){b.getRGB(dc,Uy(i)),n.buffers.color.setClear(dc.r,dc.g,dc.b,_,a)}return{getClearColor:function(){return o},setClearColor:function(b,_=1){o.set(b),l=_,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,m(o,l)},render:g,addToRenderList:v}}function OL(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=h(null);let r=s,a=!1;function o(w,C,P,T,R){let F=!1;const z=d(T,P,C);r!==z&&(r=z,u(r.object)),F=f(w,T,P,R),F&&p(w,T,P,R),R!==null&&e.update(R,i.ELEMENT_ARRAY_BUFFER),(F||a)&&(a=!1,y(w,C,P,T),R!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(R).buffer))}function l(){return i.createVertexArray()}function u(w){return i.bindVertexArray(w)}function c(w){return i.deleteVertexArray(w)}function d(w,C,P){const T=P.wireframe===!0;let R=n[w.id];R===void 0&&(R={},n[w.id]=R);let F=R[C.id];F===void 0&&(F={},R[C.id]=F);let z=F[T];return z===void 0&&(z=h(l()),F[T]=z),z}function h(w){const C=[],P=[],T=[];for(let R=0;R<t;R++)C[R]=0,P[R]=0,T[R]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:C,enabledAttributes:P,attributeDivisors:T,object:w,attributes:{},index:null}}function f(w,C,P,T){const R=r.attributes,F=C.attributes;let z=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){const k=R[O];let I=F[O];if(I===void 0&&(O==="instanceMatrix"&&w.instanceMatrix&&(I=w.instanceMatrix),O==="instanceColor"&&w.instanceColor&&(I=w.instanceColor)),k===void 0||k.attribute!==I||I&&k.data!==I.data)return!0;z++}return r.attributesNum!==z||r.index!==T}function p(w,C,P,T){const R={},F=C.attributes;let z=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){let k=F[O];k===void 0&&(O==="instanceMatrix"&&w.instanceMatrix&&(k=w.instanceMatrix),O==="instanceColor"&&w.instanceColor&&(k=w.instanceColor));const I={};I.attribute=k,k&&k.data&&(I.data=k.data),R[O]=I,z++}r.attributes=R,r.attributesNum=z,r.index=T}function g(){const w=r.newAttributes;for(let C=0,P=w.length;C<P;C++)w[C]=0}function v(w){m(w,0)}function m(w,C){const P=r.newAttributes,T=r.enabledAttributes,R=r.attributeDivisors;P[w]=1,T[w]===0&&(i.enableVertexAttribArray(w),T[w]=1),R[w]!==C&&(i.vertexAttribDivisor(w,C),R[w]=C)}function b(){const w=r.newAttributes,C=r.enabledAttributes;for(let P=0,T=C.length;P<T;P++)C[P]!==w[P]&&(i.disableVertexAttribArray(P),C[P]=0)}function _(w,C,P,T,R,F,z){z===!0?i.vertexAttribIPointer(w,C,P,R,F):i.vertexAttribPointer(w,C,P,T,R,F)}function y(w,C,P,T){g();const R=T.attributes,F=P.getAttributes(),z=C.defaultAttributeValues;for(const D in F){const O=F[D];if(O.location>=0){let j=R[D];if(j===void 0&&(D==="instanceMatrix"&&w.instanceMatrix&&(j=w.instanceMatrix),D==="instanceColor"&&w.instanceColor&&(j=w.instanceColor)),j!==void 0){const k=j.normalized,I=j.itemSize,U=e.get(j);if(U===void 0)continue;const B=U.buffer,V=U.type,H=U.bytesPerElement,Y=V===i.INT||V===i.UNSIGNED_INT||j.gpuType===ep;if(j.isInterleavedBufferAttribute){const J=j.data,ee=J.stride,se=j.offset;if(J.isInstancedInterleavedBuffer){for(let ye=0;ye<O.locationSize;ye++)m(O.location+ye,J.meshPerAttribute);w.isInstancedMesh!==!0&&T._maxInstanceCount===void 0&&(T._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let ye=0;ye<O.locationSize;ye++)v(O.location+ye);i.bindBuffer(i.ARRAY_BUFFER,B);for(let ye=0;ye<O.locationSize;ye++)_(O.location+ye,I/O.locationSize,V,k,ee*H,(se+I/O.locationSize*ye)*H,Y)}else{if(j.isInstancedBufferAttribute){for(let J=0;J<O.locationSize;J++)m(O.location+J,j.meshPerAttribute);w.isInstancedMesh!==!0&&T._maxInstanceCount===void 0&&(T._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let J=0;J<O.locationSize;J++)v(O.location+J);i.bindBuffer(i.ARRAY_BUFFER,B);for(let J=0;J<O.locationSize;J++)_(O.location+J,I/O.locationSize,V,k,I*H,I/O.locationSize*J*H,Y)}}else if(z!==void 0){const k=z[D];if(k!==void 0)switch(k.length){case 2:i.vertexAttrib2fv(O.location,k);break;case 3:i.vertexAttrib3fv(O.location,k);break;case 4:i.vertexAttrib4fv(O.location,k);break;default:i.vertexAttrib1fv(O.location,k)}}}}b()}function M(){A();for(const w in n){const C=n[w];for(const P in C){const T=C[P];for(const R in T)c(T[R].object),delete T[R];delete C[P]}delete n[w]}}function x(w){if(n[w.id]===void 0)return;const C=n[w.id];for(const P in C){const T=C[P];for(const R in T)c(T[R].object),delete T[R];delete C[P]}delete n[w.id]}function S(w){for(const C in n){const P=n[C];if(P[w.id]===void 0)continue;const T=P[w.id];for(const R in T)c(T[R].object),delete T[R];delete P[w.id]}}function A(){E(),a=!0,r!==s&&(r=s,u(r.object))}function E(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:A,resetDefaultState:E,dispose:M,releaseStatesOfGeometry:x,releaseStatesOfProgram:S,initAttributes:g,enableAttribute:v,disableUnusedAttributes:b}}function DL(i,e,t){let n;function s(u){n=u}function r(u,c){i.drawArrays(n,u,c),t.update(c,n,1)}function a(u,c,d){d!==0&&(i.drawArraysInstanced(n,u,c,d),t.update(c,n,d))}function o(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,c,0,d);let f=0;for(let p=0;p<d;p++)f+=c[p];t.update(f,n,1)}function l(u,c,d,h){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<u.length;p++)a(u[p],c[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(n,u,0,c,0,h,0,d);let p=0;for(let g=0;g<d;g++)p+=c[g];for(let g=0;g<h.length;g++)t.update(p,n,h[g])}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function kL(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const x=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(x){return!(x!==wn&&n.convert(x)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(x){const S=x===ol&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(x!==ps&&n.convert(x)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&x!==cs&&!S)}function l(x){if(x==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=t.logarithmicDepthBuffer===!0,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_TEXTURE_SIZE),g=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),v=i.getParameter(i.MAX_VERTEX_ATTRIBS),m=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),b=i.getParameter(i.MAX_VARYING_VECTORS),_=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,M=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:p,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:m,maxVaryings:b,maxFragmentUniforms:_,vertexTextures:y,maxSamples:M}}function NL(i){const e=this;let t=null,n=0,s=!1,r=!1;const a=new ur,o=new ut,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=d.length!==0||h||n!==0||s;return s=h,n=d.length,f},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,h){t=c(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,v=d.clipShadows,m=i.get(d);if(!s||p===null||p.length===0||r&&!v)r?c(null):u();else{const b=r?0:n,_=b*4;let y=m.clippingState||null;l.value=y,y=c(p,h,_,f);for(let M=0;M!==_;++M)y[M]=t[M];m.clippingState=y,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(d,h,f,p){const g=d!==null?d.length:0;let v=null;if(g!==0){if(v=l.value,p!==!0||v===null){const m=f+g*4,b=h.matrixWorldInverse;o.getNormalMatrix(b),(v===null||v.length<m)&&(v=new Float32Array(m));for(let _=0,y=f;_!==g;++_,y+=4)a.copy(d[_]).applyMatrix4(b,o),a.normal.toArray(v,y),v[y+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function FL(i){let e=new WeakMap;function t(a,o){return o===Ph?a.mapping=Sa:o===Lh&&(a.mapping=Ta),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Ph||o===Lh)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new qA(l.height);return u.fromEquirectangularTexture(i,a),e.set(a,u),a.addEventListener("dispose",s),t(u.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}class UL extends zy{constructor(e=-1,t=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,a=r+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const aa=4,Xg=[.125,.215,.35,.446,.526,.582],pr=20,Kd=new UL,qg=new Lt;let Zd=null,Qd=0,Jd=0,eh=!1;const dr=(1+Math.sqrt(5))/2,ia=1/dr,Yg=[new me(-dr,ia,0),new me(dr,ia,0),new me(-ia,0,dr),new me(ia,0,dr),new me(0,dr,-ia),new me(0,dr,ia),new me(-1,1,-1),new me(1,1,-1),new me(-1,1,1),new me(1,1,1)];class Kg{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100){Zd=this._renderer.getRenderTarget(),Qd=this._renderer.getActiveCubeFace(),Jd=this._renderer.getActiveMipmapLevel(),eh=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Jg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Qg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Zd,Qd,Jd),this._renderer.xr.enabled=eh,e.scissorTest=!1,hc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Sa||e.mapping===Ta?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Zd=this._renderer.getRenderTarget(),Qd=this._renderer.getActiveCubeFace(),Jd=this._renderer.getActiveMipmapLevel(),eh=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:on,minFilter:on,generateMipmaps:!1,type:ol,format:wn,colorSpace:gs,depthBuffer:!1},s=Zg(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Zg(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=zL(r)),this._blurMaterial=BL(r,e,t)}return s}_compileMaterial(e){const t=new En(this._lodPlanes[0],e);this._renderer.compile(t,Kd)}_sceneToCubeUV(e,t,n,s){const o=new rn(90,1,t,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,h=c.toneMapping;c.getClearColor(qg),c.toneMapping=Ds,c.autoClear=!1;const f=new xu({name:"PMREM.Background",side:ki,depthWrite:!1,depthTest:!1}),p=new En(new ll,f);let g=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,g=!0):(f.color.copy(qg),g=!0);for(let m=0;m<6;m++){const b=m%3;b===0?(o.up.set(0,l[m],0),o.lookAt(u[m],0,0)):b===1?(o.up.set(0,0,l[m]),o.lookAt(0,u[m],0)):(o.up.set(0,l[m],0),o.lookAt(0,0,u[m]));const _=this._cubeSize;hc(s,b*_,m>2?_:0,_,_),c.setRenderTarget(s),g&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=h,c.autoClear=d,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===Sa||e.mapping===Ta;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=Jg()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Qg());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new En(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;hc(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,Kd)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=Yg[(s-r-1)%Yg.length];this._blur(e,r-1,r,a,o)}t.autoClear=n}_blur(e,t,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,s,"latitudinal",r),this._halfBlur(a,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new En(this._lodPlanes[s],u),h=u.uniforms,f=this._sizeLods[n]-1,p=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*pr-1),g=r/p,v=isFinite(r)?1+Math.floor(c*g):pr;v>pr&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${pr}`);const m=[];let b=0;for(let S=0;S<pr;++S){const A=S/g,E=Math.exp(-A*A/2);m.push(E),S===0?b+=E:S<v&&(b+=2*E)}for(let S=0;S<m.length;S++)m[S]=m[S]/b;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=m,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:_}=this;h.dTheta.value=p,h.mipInt.value=_-n;const y=this._sizeLods[s],M=3*y*(s>_-aa?s-_+aa:0),x=4*(this._cubeSize-y);hc(t,M,x,3*y,2*y),l.setRenderTarget(t),l.render(d,Kd)}}function zL(i){const e=[],t=[],n=[];let s=i;const r=i-aa+1+Xg.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);t.push(o);let l=1/o;a>i-aa?l=Xg[a-i+aa-1]:a===0&&(l=0),n.push(l);const u=1/(o-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=6,p=6,g=3,v=2,m=1,b=new Float32Array(g*p*f),_=new Float32Array(v*p*f),y=new Float32Array(m*p*f);for(let x=0;x<f;x++){const S=x%3*2/3-1,A=x>2?0:-1,E=[S,A,0,S+2/3,A,0,S+2/3,A+1,0,S,A,0,S+2/3,A+1,0,S,A+1,0];b.set(E,g*p*x),_.set(h,v*p*x);const w=[x,x,x,x,x,x];y.set(w,m*p*x)}const M=new Ws;M.setAttribute("position",new Bn(b,g)),M.setAttribute("uv",new Bn(_,v)),M.setAttribute("faceIndex",new Bn(y,m)),e.push(M),s>aa&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Zg(i,e,t){const n=new Hs(i,e,t);return n.texture.mapping=_u,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hc(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function BL(i,e,t){const n=new Float32Array(pr),s=new me(0,1,0);return new Vs({name:"SphericalGaussianBlur",defines:{n:pr,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:dp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Os,depthTest:!1,depthWrite:!1})}function Qg(){return new Vs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:dp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Os,depthTest:!1,depthWrite:!1})}function Jg(){return new Vs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:dp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Os,depthTest:!1,depthWrite:!1})}function dp(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function HL(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,u=l===Ph||l===Lh,c=l===Sa||l===Ta;if(u||c){let d=e.get(o);const h=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return t===null&&(t=new Kg(i)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const f=o.image;return u&&f&&f.height>0||c&&f&&s(f)?(t===null&&(t=new Kg(i)),d=u?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",r),d.texture):null}}}return o}function s(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function VL(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&Po("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function $L(i,e,t,n){const s={},r=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const g=h.morphAttributes[p];for(let v=0,m=g.length;v<m;v++)e.remove(g[v])}h.removeEventListener("dispose",a),delete s[h.id];const f=r.get(h);f&&(e.remove(f),r.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(d,h){return s[h.id]===!0||(h.addEventListener("dispose",a),s[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],i.ARRAY_BUFFER);const f=d.morphAttributes;for(const p in f){const g=f[p];for(let v=0,m=g.length;v<m;v++)e.update(g[v],i.ARRAY_BUFFER)}}function u(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(f!==null){const b=f.array;g=f.version;for(let _=0,y=b.length;_<y;_+=3){const M=b[_+0],x=b[_+1],S=b[_+2];h.push(M,x,x,S,S,M)}}else if(p!==void 0){const b=p.array;g=p.version;for(let _=0,y=b.length/3-1;_<y;_+=3){const M=_+0,x=_+1,S=_+2;h.push(M,x,x,S,S,M)}}else return;const v=new(Ly(h)?Fy:Ny)(h,1);v.version=g;const m=r.get(d);m&&e.remove(m),r.set(d,v)}function c(d){const h=r.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&u(d)}else u(d);return r.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function GL(i,e,t){let n;function s(h){n=h}let r,a;function o(h){r=h.type,a=h.bytesPerElement}function l(h,f){i.drawElements(n,f,r,h*a),t.update(f,n,1)}function u(h,f,p){p!==0&&(i.drawElementsInstanced(n,f,r,h*a,p),t.update(f,n,p))}function c(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,f,0,r,h,0,p);let v=0;for(let m=0;m<p;m++)v+=f[m];t.update(v,n,1)}function d(h,f,p,g){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let m=0;m<h.length;m++)u(h[m]/a,f[m],g[m]);else{v.multiDrawElementsInstancedWEBGL(n,f,0,r,h,0,g,0,p);let m=0;for(let b=0;b<p;b++)m+=f[b];for(let b=0;b<g.length;b++)t.update(m,n,g[b])}}this.setMode=s,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function WL(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(r/3);break;case i.LINES:t.lines+=o*(r/2);break;case i.LINE_STRIP:t.lines+=o*(r-1);break;case i.LINE_LOOP:t.lines+=o*r;break;case i.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function jL(i,e,t){const n=new WeakMap,s=new li;function r(a,o,l){const u=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=c!==void 0?c.length:0;let h=n.get(o);if(h===void 0||h.count!==d){let E=function(){S.dispose(),n.delete(o),o.removeEventListener("dispose",E)};h!==void 0&&h.texture.dispose();const f=o.morphAttributes.position!==void 0,p=o.morphAttributes.normal!==void 0,g=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],m=o.morphAttributes.normal||[],b=o.morphAttributes.color||[];let _=0;f===!0&&(_=1),p===!0&&(_=2),g===!0&&(_=3);let y=o.attributes.position.count*_,M=1;y>e.maxTextureSize&&(M=Math.ceil(y/e.maxTextureSize),y=e.maxTextureSize);const x=new Float32Array(y*M*4*d),S=new Iy(x,y,M,d);S.type=cs,S.needsUpdate=!0;const A=_*4;for(let w=0;w<d;w++){const C=v[w],P=m[w],T=b[w],R=y*M*4*w;for(let F=0;F<C.count;F++){const z=F*A;f===!0&&(s.fromBufferAttribute(C,F),x[R+z+0]=s.x,x[R+z+1]=s.y,x[R+z+2]=s.z,x[R+z+3]=0),p===!0&&(s.fromBufferAttribute(P,F),x[R+z+4]=s.x,x[R+z+5]=s.y,x[R+z+6]=s.z,x[R+z+7]=0),g===!0&&(s.fromBufferAttribute(T,F),x[R+z+8]=s.x,x[R+z+9]=s.y,x[R+z+10]=s.z,x[R+z+11]=T.itemSize===4?s.w:1)}}h={count:d,texture:S,size:new gt(y,M)},n.set(o,h),o.addEventListener("dispose",E)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let f=0;for(let g=0;g<u.length;g++)f+=u[g];const p=o.morphTargetsRelative?1:1-f;l.getUniforms().setValue(i,"morphTargetBaseInfluence",p),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",h.size)}return{update:r}}function XL(i,e,t,n){let s=new WeakMap;function r(l){const u=n.render.frame,c=l.geometry,d=e.get(l,c);if(s.get(d)!==u&&(e.update(d),s.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),s.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),s.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;s.get(h)!==u&&(h.update(),s.set(h,u))}return d}function a(){s=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:r,dispose:a}}class Vy extends Pi{constructor(e,t,n,s,r,a,o,l,u,c=pa){if(c!==pa&&c!==Ca)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===pa&&(n=xr),n===void 0&&c===Ca&&(n=Ma),super(null,s,r,a,o,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:cn,this.minFilter=l!==void 0?l:cn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const $y=new Pi,ev=new Vy(1,1),Gy=new Iy,Wy=new IA,jy=new By,tv=[],iv=[],nv=new Float32Array(16),sv=new Float32Array(9),rv=new Float32Array(4);function Ba(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=tv[s];if(r===void 0&&(r=new Float32Array(s),tv[s]=r),e!==0){n.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(r,o)}return r}function Qt(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Jt(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Tu(i,e){let t=iv[e];t===void 0&&(t=new Int32Array(e),iv[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function qL(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function YL(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qt(t,e))return;i.uniform2fv(this.addr,e),Jt(t,e)}}function KL(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qt(t,e))return;i.uniform3fv(this.addr,e),Jt(t,e)}}function ZL(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qt(t,e))return;i.uniform4fv(this.addr,e),Jt(t,e)}}function QL(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Qt(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Jt(t,e)}else{if(Qt(t,n))return;rv.set(n),i.uniformMatrix2fv(this.addr,!1,rv),Jt(t,n)}}function JL(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Qt(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Jt(t,e)}else{if(Qt(t,n))return;sv.set(n),i.uniformMatrix3fv(this.addr,!1,sv),Jt(t,n)}}function eR(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Qt(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Jt(t,e)}else{if(Qt(t,n))return;nv.set(n),i.uniformMatrix4fv(this.addr,!1,nv),Jt(t,n)}}function tR(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function iR(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qt(t,e))return;i.uniform2iv(this.addr,e),Jt(t,e)}}function nR(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qt(t,e))return;i.uniform3iv(this.addr,e),Jt(t,e)}}function sR(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qt(t,e))return;i.uniform4iv(this.addr,e),Jt(t,e)}}function rR(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function aR(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qt(t,e))return;i.uniform2uiv(this.addr,e),Jt(t,e)}}function oR(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qt(t,e))return;i.uniform3uiv(this.addr,e),Jt(t,e)}}function lR(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qt(t,e))return;i.uniform4uiv(this.addr,e),Jt(t,e)}}function cR(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(ev.compareFunction=Ay,r=ev):r=$y,t.setTexture2D(e||r,s)}function uR(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Wy,s)}function dR(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||jy,s)}function hR(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||Gy,s)}function fR(i){switch(i){case 5126:return qL;case 35664:return YL;case 35665:return KL;case 35666:return ZL;case 35674:return QL;case 35675:return JL;case 35676:return eR;case 5124:case 35670:return tR;case 35667:case 35671:return iR;case 35668:case 35672:return nR;case 35669:case 35673:return sR;case 5125:return rR;case 36294:return aR;case 36295:return oR;case 36296:return lR;case 35678:case 36198:case 36298:case 36306:case 35682:return cR;case 35679:case 36299:case 36307:return uR;case 35680:case 36300:case 36308:case 36293:return dR;case 36289:case 36303:case 36311:case 36292:return hR}}function pR(i,e){i.uniform1fv(this.addr,e)}function mR(i,e){const t=Ba(e,this.size,2);i.uniform2fv(this.addr,t)}function gR(i,e){const t=Ba(e,this.size,3);i.uniform3fv(this.addr,t)}function vR(i,e){const t=Ba(e,this.size,4);i.uniform4fv(this.addr,t)}function yR(i,e){const t=Ba(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function bR(i,e){const t=Ba(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function _R(i,e){const t=Ba(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function wR(i,e){i.uniform1iv(this.addr,e)}function ER(i,e){i.uniform2iv(this.addr,e)}function xR(i,e){i.uniform3iv(this.addr,e)}function SR(i,e){i.uniform4iv(this.addr,e)}function TR(i,e){i.uniform1uiv(this.addr,e)}function MR(i,e){i.uniform2uiv(this.addr,e)}function CR(i,e){i.uniform3uiv(this.addr,e)}function AR(i,e){i.uniform4uiv(this.addr,e)}function PR(i,e,t){const n=this.cache,s=e.length,r=Tu(t,s);Qt(n,r)||(i.uniform1iv(this.addr,r),Jt(n,r));for(let a=0;a!==s;++a)t.setTexture2D(e[a]||$y,r[a])}function LR(i,e,t){const n=this.cache,s=e.length,r=Tu(t,s);Qt(n,r)||(i.uniform1iv(this.addr,r),Jt(n,r));for(let a=0;a!==s;++a)t.setTexture3D(e[a]||Wy,r[a])}function RR(i,e,t){const n=this.cache,s=e.length,r=Tu(t,s);Qt(n,r)||(i.uniform1iv(this.addr,r),Jt(n,r));for(let a=0;a!==s;++a)t.setTextureCube(e[a]||jy,r[a])}function IR(i,e,t){const n=this.cache,s=e.length,r=Tu(t,s);Qt(n,r)||(i.uniform1iv(this.addr,r),Jt(n,r));for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||Gy,r[a])}function OR(i){switch(i){case 5126:return pR;case 35664:return mR;case 35665:return gR;case 35666:return vR;case 35674:return yR;case 35675:return bR;case 35676:return _R;case 5124:case 35670:return wR;case 35667:case 35671:return ER;case 35668:case 35672:return xR;case 35669:case 35673:return SR;case 5125:return TR;case 36294:return MR;case 36295:return CR;case 36296:return AR;case 35678:case 36198:case 36298:case 36306:case 35682:return PR;case 35679:case 36299:case 36307:return LR;case 35680:case 36300:case 36308:case 36293:return RR;case 36289:case 36303:case 36311:case 36292:return IR}}class DR{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=fR(t.type)}}class kR{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=OR(t.type)}}class NR{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(e,t[o.id],n)}}}const th=/(\w+)(\])?(\[|\.)?/g;function av(i,e){i.seq.push(e),i.map[e.id]=e}function FR(i,e,t){const n=i.name,s=n.length;for(th.lastIndex=0;;){const r=th.exec(n),a=th.lastIndex;let o=r[1];const l=r[2]==="]",u=r[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===s){av(t,u===void 0?new DR(o,i,e):new kR(o,i,e));break}else{let d=t.map[o];d===void 0&&(d=new NR(o),av(t,d)),t=d}}}class Lc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),a=e.getUniformLocation(t,r.name);FR(r,a,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,a=t.length;r!==a;++r){const o=t[r],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in t&&n.push(a)}return n}}function ov(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const UR=37297;let zR=0;function BR(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=s;a<r;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function HR(i){const e=St.getPrimaries(St.workingColorSpace),t=St.getPrimaries(i);let n;switch(e===t?n="":e===Zc&&t===Kc?n="LinearDisplayP3ToLinearSRGB":e===Kc&&t===Zc&&(n="LinearSRGBToLinearDisplayP3"),i){case gs:case wu:return[n,"LinearTransferOETF"];case Rn:case ap:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}function lv(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+BR(i.getShaderSource(e),a)}else return s}function VR(i,e){const t=HR(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function $R(i,e){let t;switch(e){case GC:t="Linear";break;case WC:t="Reinhard";break;case jC:t="OptimizedCineon";break;case XC:t="ACESFilmic";break;case YC:t="AgX";break;case KC:t="Neutral";break;case qC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const fc=new me;function GR(){St.getLuminanceCoefficients(fc);const i=fc.x.toFixed(4),e=fc.y.toFixed(4),t=fc.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function WR(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Eo).join(`
`)}function jR(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function XR(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),a=r.name;let o=1;r.type===i.FLOAT_MAT2&&(o=2),r.type===i.FLOAT_MAT3&&(o=3),r.type===i.FLOAT_MAT4&&(o=4),t[a]={type:r.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function Eo(i){return i!==""}function cv(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function uv(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const qR=/^[ \t]*#include +<([\w\d./]+)>/gm;function of(i){return i.replace(qR,KR)}const YR=new Map;function KR(i,e){let t=ct[e];if(t===void 0){const n=YR.get(e);if(n!==void 0)t=ct[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return of(t)}const ZR=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dv(i){return i.replace(ZR,QR)}function QR(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function hv(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function JR(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===my?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===gC?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===is&&(e="SHADOWMAP_TYPE_VSM"),e}function eI(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Sa:case Ta:e="ENVMAP_TYPE_CUBE";break;case _u:e="ENVMAP_TYPE_CUBE_UV";break}return e}function tI(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Ta:e="ENVMAP_MODE_REFRACTION";break}return e}function iI(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case gy:e="ENVMAP_BLENDING_MULTIPLY";break;case VC:e="ENVMAP_BLENDING_MIX";break;case $C:e="ENVMAP_BLENDING_ADD";break}return e}function nI(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function sI(i,e,t,n){const s=i.getContext(),r=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=JR(t),u=eI(t),c=tI(t),d=iI(t),h=nI(t),f=WR(t),p=jR(r),g=s.createProgram();let v,m,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Eo).join(`
`),v.length>0&&(v+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Eo).join(`
`),m.length>0&&(m+=`
`)):(v=[hv(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Eo).join(`
`),m=[hv(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ds?"#define TONE_MAPPING":"",t.toneMapping!==Ds?ct.tonemapping_pars_fragment:"",t.toneMapping!==Ds?$R("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ct.colorspace_pars_fragment,VR("linearToOutputTexel",t.outputColorSpace),GR(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Eo).join(`
`)),a=of(a),a=cv(a,t),a=uv(a,t),o=of(o),o=cv(o,t),o=uv(o,t),a=dv(a),o=dv(o),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,v=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",t.glslVersion===Mg?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Mg?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const _=b+v+a,y=b+m+o,M=ov(s,s.VERTEX_SHADER,_),x=ov(s,s.FRAGMENT_SHADER,y);s.attachShader(g,M),s.attachShader(g,x),t.index0AttributeName!==void 0?s.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(g,0,"position"),s.linkProgram(g);function S(C){if(i.debug.checkShaderErrors){const P=s.getProgramInfoLog(g).trim(),T=s.getShaderInfoLog(M).trim(),R=s.getShaderInfoLog(x).trim();let F=!0,z=!0;if(s.getProgramParameter(g,s.LINK_STATUS)===!1)if(F=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,g,M,x);else{const D=lv(s,M,"vertex"),O=lv(s,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(g,s.VALIDATE_STATUS)+`

Material Name: `+C.name+`
Material Type: `+C.type+`

Program Info Log: `+P+`
`+D+`
`+O)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(T===""||R==="")&&(z=!1);z&&(C.diagnostics={runnable:F,programLog:P,vertexShader:{log:T,prefix:v},fragmentShader:{log:R,prefix:m}})}s.deleteShader(M),s.deleteShader(x),A=new Lc(s,g),E=XR(s,g)}let A;this.getUniforms=function(){return A===void 0&&S(this),A};let E;this.getAttributes=function(){return E===void 0&&S(this),E};let w=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return w===!1&&(w=s.getProgramParameter(g,UR)),w},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=zR++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=M,this.fragmentShader=x,this}let rI=0;class aI{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new oI(e),t.set(e,n)),n}}class oI{constructor(e){this.id=rI++,this.code=e,this.usedTimes=0}}function lI(i,e,t,n,s,r,a){const o=new cp,l=new aI,u=new Set,c=[],d=s.logarithmicDepthBuffer,h=s.vertexTextures;let f=s.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(E){return u.add(E),E===0?"uv":`uv${E}`}function v(E,w,C,P,T){const R=P.fog,F=T.geometry,z=E.isMeshStandardMaterial?P.environment:null,D=(E.isMeshStandardMaterial?t:e).get(E.envMap||z),O=D&&D.mapping===_u?D.image.height:null,j=p[E.type];E.precision!==null&&(f=s.getMaxPrecision(E.precision),f!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",f,"instead."));const k=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,I=k!==void 0?k.length:0;let U=0;F.morphAttributes.position!==void 0&&(U=1),F.morphAttributes.normal!==void 0&&(U=2),F.morphAttributes.color!==void 0&&(U=3);let B,V,H,Y;if(j){const lt=On[j];B=lt.vertexShader,V=lt.fragmentShader}else B=E.vertexShader,V=E.fragmentShader,l.update(E),H=l.getVertexShaderID(E),Y=l.getFragmentShaderID(E);const J=i.getRenderTarget(),ee=T.isInstancedMesh===!0,se=T.isBatchedMesh===!0,ye=!!E.map,de=!!E.matcap,W=!!D,Te=!!E.aoMap,he=!!E.lightMap,Ae=!!E.bumpMap,Ee=!!E.normalMap,Ne=!!E.displacementMap,Ie=!!E.emissiveMap,Pe=!!E.metalnessMap,K=!!E.roughnessMap,N=E.anisotropy>0,X=E.clearcoat>0,ie=E.dispersion>0,ae=E.iridescence>0,re=E.sheen>0,Ce=E.transmission>0,Me=N&&!!E.anisotropyMap,Se=X&&!!E.clearcoatMap,Oe=X&&!!E.clearcoatNormalMap,we=X&&!!E.clearcoatRoughnessMap,Fe=ae&&!!E.iridescenceMap,Ge=ae&&!!E.iridescenceThicknessMap,Je=re&&!!E.sheenColorMap,$e=re&&!!E.sheenRoughnessMap,qe=!!E.specularMap,at=!!E.specularColorMap,dt=!!E.specularIntensityMap,oe=Ce&&!!E.transmissionMap,Le=Ce&&!!E.thicknessMap,be=!!E.gradientMap,xe=!!E.alphaMap,ke=E.alphaTest>0,We=!!E.alphaHash,ot=!!E.extensions;let At=Ds;E.toneMapped&&(J===null||J.isXRRenderTarget===!0)&&(At=i.toneMapping);const Nt={shaderID:j,shaderType:E.type,shaderName:E.name,vertexShader:B,fragmentShader:V,defines:E.defines,customVertexShaderID:H,customFragmentShaderID:Y,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:f,batching:se,batchingColor:se&&T._colorsTexture!==null,instancing:ee,instancingColor:ee&&T.instanceColor!==null,instancingMorph:ee&&T.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:J===null?i.outputColorSpace:J.isXRRenderTarget===!0?J.texture.colorSpace:gs,alphaToCoverage:!!E.alphaToCoverage,map:ye,matcap:de,envMap:W,envMapMode:W&&D.mapping,envMapCubeUVHeight:O,aoMap:Te,lightMap:he,bumpMap:Ae,normalMap:Ee,displacementMap:h&&Ne,emissiveMap:Ie,normalMapObjectSpace:Ee&&E.normalMapType===tA,normalMapTangentSpace:Ee&&E.normalMapType===eA,metalnessMap:Pe,roughnessMap:K,anisotropy:N,anisotropyMap:Me,clearcoat:X,clearcoatMap:Se,clearcoatNormalMap:Oe,clearcoatRoughnessMap:we,dispersion:ie,iridescence:ae,iridescenceMap:Fe,iridescenceThicknessMap:Ge,sheen:re,sheenColorMap:Je,sheenRoughnessMap:$e,specularMap:qe,specularColorMap:at,specularIntensityMap:dt,transmission:Ce,transmissionMap:oe,thicknessMap:Le,gradientMap:be,opaque:E.transparent===!1&&E.blending===fa&&E.alphaToCoverage===!1,alphaMap:xe,alphaTest:ke,alphaHash:We,combine:E.combine,mapUv:ye&&g(E.map.channel),aoMapUv:Te&&g(E.aoMap.channel),lightMapUv:he&&g(E.lightMap.channel),bumpMapUv:Ae&&g(E.bumpMap.channel),normalMapUv:Ee&&g(E.normalMap.channel),displacementMapUv:Ne&&g(E.displacementMap.channel),emissiveMapUv:Ie&&g(E.emissiveMap.channel),metalnessMapUv:Pe&&g(E.metalnessMap.channel),roughnessMapUv:K&&g(E.roughnessMap.channel),anisotropyMapUv:Me&&g(E.anisotropyMap.channel),clearcoatMapUv:Se&&g(E.clearcoatMap.channel),clearcoatNormalMapUv:Oe&&g(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&g(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Fe&&g(E.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&g(E.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&g(E.sheenColorMap.channel),sheenRoughnessMapUv:$e&&g(E.sheenRoughnessMap.channel),specularMapUv:qe&&g(E.specularMap.channel),specularColorMapUv:at&&g(E.specularColorMap.channel),specularIntensityMapUv:dt&&g(E.specularIntensityMap.channel),transmissionMapUv:oe&&g(E.transmissionMap.channel),thicknessMapUv:Le&&g(E.thicknessMap.channel),alphaMapUv:xe&&g(E.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(Ee||N),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,pointsUvs:T.isPoints===!0&&!!F.attributes.uv&&(ye||xe),fog:!!R,useFog:E.fog===!0,fogExp2:!!R&&R.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:T.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:I,morphTextureStride:U,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numSpotLightMaps:w.spotLightMap.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numSpotLightShadowsWithMaps:w.numSpotLightShadowsWithMaps,numLightProbes:w.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:E.dithering,shadowMapEnabled:i.shadowMap.enabled&&C.length>0,shadowMapType:i.shadowMap.type,toneMapping:At,decodeVideoTexture:ye&&E.map.isVideoTexture===!0&&St.getTransfer(E.map.colorSpace)===kt,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===as,flipSided:E.side===ki,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:ot&&E.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ot&&E.extensions.multiDraw===!0||se)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return Nt.vertexUv1s=u.has(1),Nt.vertexUv2s=u.has(2),Nt.vertexUv3s=u.has(3),u.clear(),Nt}function m(E){const w=[];if(E.shaderID?w.push(E.shaderID):(w.push(E.customVertexShaderID),w.push(E.customFragmentShaderID)),E.defines!==void 0)for(const C in E.defines)w.push(C),w.push(E.defines[C]);return E.isRawShaderMaterial===!1&&(b(w,E),_(w,E),w.push(i.outputColorSpace)),w.push(E.customProgramCacheKey),w.join()}function b(E,w){E.push(w.precision),E.push(w.outputColorSpace),E.push(w.envMapMode),E.push(w.envMapCubeUVHeight),E.push(w.mapUv),E.push(w.alphaMapUv),E.push(w.lightMapUv),E.push(w.aoMapUv),E.push(w.bumpMapUv),E.push(w.normalMapUv),E.push(w.displacementMapUv),E.push(w.emissiveMapUv),E.push(w.metalnessMapUv),E.push(w.roughnessMapUv),E.push(w.anisotropyMapUv),E.push(w.clearcoatMapUv),E.push(w.clearcoatNormalMapUv),E.push(w.clearcoatRoughnessMapUv),E.push(w.iridescenceMapUv),E.push(w.iridescenceThicknessMapUv),E.push(w.sheenColorMapUv),E.push(w.sheenRoughnessMapUv),E.push(w.specularMapUv),E.push(w.specularColorMapUv),E.push(w.specularIntensityMapUv),E.push(w.transmissionMapUv),E.push(w.thicknessMapUv),E.push(w.combine),E.push(w.fogExp2),E.push(w.sizeAttenuation),E.push(w.morphTargetsCount),E.push(w.morphAttributeCount),E.push(w.numDirLights),E.push(w.numPointLights),E.push(w.numSpotLights),E.push(w.numSpotLightMaps),E.push(w.numHemiLights),E.push(w.numRectAreaLights),E.push(w.numDirLightShadows),E.push(w.numPointLightShadows),E.push(w.numSpotLightShadows),E.push(w.numSpotLightShadowsWithMaps),E.push(w.numLightProbes),E.push(w.shadowMapType),E.push(w.toneMapping),E.push(w.numClippingPlanes),E.push(w.numClipIntersection),E.push(w.depthPacking)}function _(E,w){o.disableAll(),w.supportsVertexTextures&&o.enable(0),w.instancing&&o.enable(1),w.instancingColor&&o.enable(2),w.instancingMorph&&o.enable(3),w.matcap&&o.enable(4),w.envMap&&o.enable(5),w.normalMapObjectSpace&&o.enable(6),w.normalMapTangentSpace&&o.enable(7),w.clearcoat&&o.enable(8),w.iridescence&&o.enable(9),w.alphaTest&&o.enable(10),w.vertexColors&&o.enable(11),w.vertexAlphas&&o.enable(12),w.vertexUv1s&&o.enable(13),w.vertexUv2s&&o.enable(14),w.vertexUv3s&&o.enable(15),w.vertexTangents&&o.enable(16),w.anisotropy&&o.enable(17),w.alphaHash&&o.enable(18),w.batching&&o.enable(19),w.dispersion&&o.enable(20),w.batchingColor&&o.enable(21),E.push(o.mask),o.disableAll(),w.fog&&o.enable(0),w.useFog&&o.enable(1),w.flatShading&&o.enable(2),w.logarithmicDepthBuffer&&o.enable(3),w.skinning&&o.enable(4),w.morphTargets&&o.enable(5),w.morphNormals&&o.enable(6),w.morphColors&&o.enable(7),w.premultipliedAlpha&&o.enable(8),w.shadowMapEnabled&&o.enable(9),w.doubleSided&&o.enable(10),w.flipSided&&o.enable(11),w.useDepthPacking&&o.enable(12),w.dithering&&o.enable(13),w.transmission&&o.enable(14),w.sheen&&o.enable(15),w.opaque&&o.enable(16),w.pointsUvs&&o.enable(17),w.decodeVideoTexture&&o.enable(18),w.alphaToCoverage&&o.enable(19),E.push(o.mask)}function y(E){const w=p[E.type];let C;if(w){const P=On[w];C=GA.clone(P.uniforms)}else C=E.uniforms;return C}function M(E,w){let C;for(let P=0,T=c.length;P<T;P++){const R=c[P];if(R.cacheKey===w){C=R,++C.usedTimes;break}}return C===void 0&&(C=new sI(i,w,E,r),c.push(C)),C}function x(E){if(--E.usedTimes===0){const w=c.indexOf(E);c[w]=c[c.length-1],c.pop(),E.destroy()}}function S(E){l.remove(E)}function A(){l.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:y,acquireProgram:M,releaseProgram:x,releaseShaderCache:S,programs:c,dispose:A}}function cI(){let i=new WeakMap;function e(r){let a=i.get(r);return a===void 0&&(a={},i.set(r,a)),a}function t(r){i.delete(r)}function n(r,a,o){i.get(r)[a]=o}function s(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:s}}function uI(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function fv(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function pv(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function a(d,h,f,p,g,v){let m=i[e];return m===void 0?(m={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:v},i[e]=m):(m.id=d.id,m.object=d,m.geometry=h,m.material=f,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=g,m.group=v),e++,m}function o(d,h,f,p,g,v){const m=a(d,h,f,p,g,v);f.transmission>0?n.push(m):f.transparent===!0?s.push(m):t.push(m)}function l(d,h,f,p,g,v){const m=a(d,h,f,p,g,v);f.transmission>0?n.unshift(m):f.transparent===!0?s.unshift(m):t.unshift(m)}function u(d,h){t.length>1&&t.sort(d||uI),n.length>1&&n.sort(h||fv),s.length>1&&s.sort(h||fv)}function c(){for(let d=e,h=i.length;d<h;d++){const f=i[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:o,unshift:l,finish:c,sort:u}}function dI(){let i=new WeakMap;function e(n,s){const r=i.get(n);let a;return r===void 0?(a=new pv,i.set(n,[a])):s>=r.length?(a=new pv,r.push(a)):a=r[s],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function hI(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new me,color:new Lt};break;case"SpotLight":t={position:new me,direction:new me,color:new Lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new me,color:new Lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new me,skyColor:new Lt,groundColor:new Lt};break;case"RectAreaLight":t={color:new Lt,position:new me,halfWidth:new me,halfHeight:new me};break}return i[e.id]=t,t}}}function fI(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let pI=0;function mI(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function gI(i){const e=new hI,t=fI(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new me);const s=new me,r=new Zt,a=new Zt;function o(u){let c=0,d=0,h=0;for(let E=0;E<9;E++)n.probe[E].set(0,0,0);let f=0,p=0,g=0,v=0,m=0,b=0,_=0,y=0,M=0,x=0,S=0;u.sort(mI);for(let E=0,w=u.length;E<w;E++){const C=u[E],P=C.color,T=C.intensity,R=C.distance,F=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)c+=P.r*T,d+=P.g*T,h+=P.b*T;else if(C.isLightProbe){for(let z=0;z<9;z++)n.probe[z].addScaledVector(C.sh.coefficients[z],T);S++}else if(C.isDirectionalLight){const z=e.get(C);if(z.color.copy(C.color).multiplyScalar(C.intensity),C.castShadow){const D=C.shadow,O=t.get(C);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,n.directionalShadow[f]=O,n.directionalShadowMap[f]=F,n.directionalShadowMatrix[f]=C.shadow.matrix,b++}n.directional[f]=z,f++}else if(C.isSpotLight){const z=e.get(C);z.position.setFromMatrixPosition(C.matrixWorld),z.color.copy(P).multiplyScalar(T),z.distance=R,z.coneCos=Math.cos(C.angle),z.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),z.decay=C.decay,n.spot[g]=z;const D=C.shadow;if(C.map&&(n.spotLightMap[M]=C.map,M++,D.updateMatrices(C),C.castShadow&&x++),n.spotLightMatrix[g]=D.matrix,C.castShadow){const O=t.get(C);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,n.spotShadow[g]=O,n.spotShadowMap[g]=F,y++}g++}else if(C.isRectAreaLight){const z=e.get(C);z.color.copy(P).multiplyScalar(T),z.halfWidth.set(C.width*.5,0,0),z.halfHeight.set(0,C.height*.5,0),n.rectArea[v]=z,v++}else if(C.isPointLight){const z=e.get(C);if(z.color.copy(C.color).multiplyScalar(C.intensity),z.distance=C.distance,z.decay=C.decay,C.castShadow){const D=C.shadow,O=t.get(C);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,O.shadowCameraNear=D.camera.near,O.shadowCameraFar=D.camera.far,n.pointShadow[p]=O,n.pointShadowMap[p]=F,n.pointShadowMatrix[p]=C.shadow.matrix,_++}n.point[p]=z,p++}else if(C.isHemisphereLight){const z=e.get(C);z.skyColor.copy(C.color).multiplyScalar(T),z.groundColor.copy(C.groundColor).multiplyScalar(T),n.hemi[m]=z,m++}}v>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=He.LTC_FLOAT_1,n.rectAreaLTC2=He.LTC_FLOAT_2):(n.rectAreaLTC1=He.LTC_HALF_1,n.rectAreaLTC2=He.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=d,n.ambient[2]=h;const A=n.hash;(A.directionalLength!==f||A.pointLength!==p||A.spotLength!==g||A.rectAreaLength!==v||A.hemiLength!==m||A.numDirectionalShadows!==b||A.numPointShadows!==_||A.numSpotShadows!==y||A.numSpotMaps!==M||A.numLightProbes!==S)&&(n.directional.length=f,n.spot.length=g,n.rectArea.length=v,n.point.length=p,n.hemi.length=m,n.directionalShadow.length=b,n.directionalShadowMap.length=b,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=y,n.spotShadowMap.length=y,n.directionalShadowMatrix.length=b,n.pointShadowMatrix.length=_,n.spotLightMatrix.length=y+M-x,n.spotLightMap.length=M,n.numSpotLightShadowsWithMaps=x,n.numLightProbes=S,A.directionalLength=f,A.pointLength=p,A.spotLength=g,A.rectAreaLength=v,A.hemiLength=m,A.numDirectionalShadows=b,A.numPointShadows=_,A.numSpotShadows=y,A.numSpotMaps=M,A.numLightProbes=S,n.version=pI++)}function l(u,c){let d=0,h=0,f=0,p=0,g=0;const v=c.matrixWorldInverse;for(let m=0,b=u.length;m<b;m++){const _=u[m];if(_.isDirectionalLight){const y=n.directional[d];y.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),y.direction.sub(s),y.direction.transformDirection(v),d++}else if(_.isSpotLight){const y=n.spot[f];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(v),y.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),y.direction.sub(s),y.direction.transformDirection(v),f++}else if(_.isRectAreaLight){const y=n.rectArea[p];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(v),a.identity(),r.copy(_.matrixWorld),r.premultiply(v),a.extractRotation(r),y.halfWidth.set(_.width*.5,0,0),y.halfHeight.set(0,_.height*.5,0),y.halfWidth.applyMatrix4(a),y.halfHeight.applyMatrix4(a),p++}else if(_.isPointLight){const y=n.point[h];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(v),h++}else if(_.isHemisphereLight){const y=n.hemi[g];y.direction.setFromMatrixPosition(_.matrixWorld),y.direction.transformDirection(v),g++}}}return{setup:o,setupView:l,state:n}}function mv(i){const e=new gI(i),t=[],n=[];function s(c){u.camera=c,t.length=0,n.length=0}function r(c){t.push(c)}function a(c){n.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:u,setupLights:o,setupLightsView:l,pushLight:r,pushShadow:a}}function vI(i){let e=new WeakMap;function t(s,r=0){const a=e.get(s);let o;return a===void 0?(o=new mv(i),e.set(s,[o])):r>=a.length?(o=new mv(i),a.push(o)):o=a[r],o}function n(){e=new WeakMap}return{get:t,dispose:n}}class yI extends Eu{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=QC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class bI extends Eu{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const _I=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wI=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function EI(i,e,t){let n=new up;const s=new gt,r=new gt,a=new li,o=new yI({depthPacking:JC}),l=new bI,u={},c=t.maxTextureSize,d={[Bs]:ki,[ki]:Bs,[as]:as},h=new Vs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:_I,fragmentShader:wI}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Ws;p.setAttribute("position",new Bn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new En(p,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=my;let m=this.type;this.render=function(x,S,A){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||x.length===0)return;const E=i.getRenderTarget(),w=i.getActiveCubeFace(),C=i.getActiveMipmapLevel(),P=i.state;P.setBlending(Os),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const T=m!==is&&this.type===is,R=m===is&&this.type!==is;for(let F=0,z=x.length;F<z;F++){const D=x[F],O=D.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;s.copy(O.mapSize);const j=O.getFrameExtents();if(s.multiply(j),r.copy(O.mapSize),(s.x>c||s.y>c)&&(s.x>c&&(r.x=Math.floor(c/j.x),s.x=r.x*j.x,O.mapSize.x=r.x),s.y>c&&(r.y=Math.floor(c/j.y),s.y=r.y*j.y,O.mapSize.y=r.y)),O.map===null||T===!0||R===!0){const I=this.type!==is?{minFilter:cn,magFilter:cn}:{};O.map!==null&&O.map.dispose(),O.map=new Hs(s.x,s.y,I),O.map.texture.name=D.name+".shadowMap",O.camera.updateProjectionMatrix()}i.setRenderTarget(O.map),i.clear();const k=O.getViewportCount();for(let I=0;I<k;I++){const U=O.getViewport(I);a.set(r.x*U.x,r.y*U.y,r.x*U.z,r.y*U.w),P.viewport(a),O.updateMatrices(D,I),n=O.getFrustum(),y(S,A,O.camera,D,this.type)}O.isPointLightShadow!==!0&&this.type===is&&b(O,A),O.needsUpdate=!1}m=this.type,v.needsUpdate=!1,i.setRenderTarget(E,w,C)};function b(x,S){const A=e.update(g);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Hs(s.x,s.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,i.setRenderTarget(x.mapPass),i.clear(),i.renderBufferDirect(S,null,A,h,g,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,i.setRenderTarget(x.map),i.clear(),i.renderBufferDirect(S,null,A,f,g,null)}function _(x,S,A,E){let w=null;const C=A.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(C!==void 0)w=C;else if(w=A.isPointLight===!0?l:o,i.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const P=w.uuid,T=S.uuid;let R=u[P];R===void 0&&(R={},u[P]=R);let F=R[T];F===void 0&&(F=w.clone(),R[T]=F,S.addEventListener("dispose",M)),w=F}if(w.visible=S.visible,w.wireframe=S.wireframe,E===is?w.side=S.shadowSide!==null?S.shadowSide:S.side:w.side=S.shadowSide!==null?S.shadowSide:d[S.side],w.alphaMap=S.alphaMap,w.alphaTest=S.alphaTest,w.map=S.map,w.clipShadows=S.clipShadows,w.clippingPlanes=S.clippingPlanes,w.clipIntersection=S.clipIntersection,w.displacementMap=S.displacementMap,w.displacementScale=S.displacementScale,w.displacementBias=S.displacementBias,w.wireframeLinewidth=S.wireframeLinewidth,w.linewidth=S.linewidth,A.isPointLight===!0&&w.isMeshDistanceMaterial===!0){const P=i.properties.get(w);P.light=A}return w}function y(x,S,A,E,w){if(x.visible===!1)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&w===is)&&(!x.frustumCulled||n.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,x.matrixWorld);const T=e.update(x),R=x.material;if(Array.isArray(R)){const F=T.groups;for(let z=0,D=F.length;z<D;z++){const O=F[z],j=R[O.materialIndex];if(j&&j.visible){const k=_(x,j,E,w);x.onBeforeShadow(i,x,S,A,T,k,O),i.renderBufferDirect(A,null,T,k,x,O),x.onAfterShadow(i,x,S,A,T,k,O)}}}else if(R.visible){const F=_(x,R,E,w);x.onBeforeShadow(i,x,S,A,T,F,null),i.renderBufferDirect(A,null,T,F,x,null),x.onAfterShadow(i,x,S,A,T,F,null)}}const P=x.children;for(let T=0,R=P.length;T<R;T++)y(P[T],S,A,E,w)}function M(x){x.target.removeEventListener("dispose",M);for(const A in u){const E=u[A],w=x.target.uuid;w in E&&(E[w].dispose(),delete E[w])}}}function xI(i){function e(){let oe=!1;const Le=new li;let be=null;const xe=new li(0,0,0,0);return{setMask:function(ke){be!==ke&&!oe&&(i.colorMask(ke,ke,ke,ke),be=ke)},setLocked:function(ke){oe=ke},setClear:function(ke,We,ot,At,Nt){Nt===!0&&(ke*=At,We*=At,ot*=At),Le.set(ke,We,ot,At),xe.equals(Le)===!1&&(i.clearColor(ke,We,ot,At),xe.copy(Le))},reset:function(){oe=!1,be=null,xe.set(-1,0,0,0)}}}function t(){let oe=!1,Le=null,be=null,xe=null;return{setTest:function(ke){ke?Y(i.DEPTH_TEST):J(i.DEPTH_TEST)},setMask:function(ke){Le!==ke&&!oe&&(i.depthMask(ke),Le=ke)},setFunc:function(ke){if(be!==ke){switch(ke){case kC:i.depthFunc(i.NEVER);break;case NC:i.depthFunc(i.ALWAYS);break;case FC:i.depthFunc(i.LESS);break;case qc:i.depthFunc(i.LEQUAL);break;case UC:i.depthFunc(i.EQUAL);break;case zC:i.depthFunc(i.GEQUAL);break;case BC:i.depthFunc(i.GREATER);break;case HC:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}be=ke}},setLocked:function(ke){oe=ke},setClear:function(ke){xe!==ke&&(i.clearDepth(ke),xe=ke)},reset:function(){oe=!1,Le=null,be=null,xe=null}}}function n(){let oe=!1,Le=null,be=null,xe=null,ke=null,We=null,ot=null,At=null,Nt=null;return{setTest:function(lt){oe||(lt?Y(i.STENCIL_TEST):J(i.STENCIL_TEST))},setMask:function(lt){Le!==lt&&!oe&&(i.stencilMask(lt),Le=lt)},setFunc:function(lt,vi,ci){(be!==lt||xe!==vi||ke!==ci)&&(i.stencilFunc(lt,vi,ci),be=lt,xe=vi,ke=ci)},setOp:function(lt,vi,ci){(We!==lt||ot!==vi||At!==ci)&&(i.stencilOp(lt,vi,ci),We=lt,ot=vi,At=ci)},setLocked:function(lt){oe=lt},setClear:function(lt){Nt!==lt&&(i.clearStencil(lt),Nt=lt)},reset:function(){oe=!1,Le=null,be=null,xe=null,ke=null,We=null,ot=null,At=null,Nt=null}}}const s=new e,r=new t,a=new n,o=new WeakMap,l=new WeakMap;let u={},c={},d=new WeakMap,h=[],f=null,p=!1,g=null,v=null,m=null,b=null,_=null,y=null,M=null,x=new Lt(0,0,0),S=0,A=!1,E=null,w=null,C=null,P=null,T=null;const R=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,z=0;const D=i.getParameter(i.VERSION);D.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(D)[1]),F=z>=1):D.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),F=z>=2);let O=null,j={};const k=i.getParameter(i.SCISSOR_BOX),I=i.getParameter(i.VIEWPORT),U=new li().fromArray(k),B=new li().fromArray(I);function V(oe,Le,be,xe){const ke=new Uint8Array(4),We=i.createTexture();i.bindTexture(oe,We),i.texParameteri(oe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(oe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ot=0;ot<be;ot++)oe===i.TEXTURE_3D||oe===i.TEXTURE_2D_ARRAY?i.texImage3D(Le,0,i.RGBA,1,1,xe,0,i.RGBA,i.UNSIGNED_BYTE,ke):i.texImage2D(Le+ot,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ke);return We}const H={};H[i.TEXTURE_2D]=V(i.TEXTURE_2D,i.TEXTURE_2D,1),H[i.TEXTURE_CUBE_MAP]=V(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),H[i.TEXTURE_2D_ARRAY]=V(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),H[i.TEXTURE_3D]=V(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),r.setClear(1),a.setClear(0),Y(i.DEPTH_TEST),r.setFunc(qc),Ae(!1),Ee(_g),Y(i.CULL_FACE),Te(Os);function Y(oe){u[oe]!==!0&&(i.enable(oe),u[oe]=!0)}function J(oe){u[oe]!==!1&&(i.disable(oe),u[oe]=!1)}function ee(oe,Le){return c[oe]!==Le?(i.bindFramebuffer(oe,Le),c[oe]=Le,oe===i.DRAW_FRAMEBUFFER&&(c[i.FRAMEBUFFER]=Le),oe===i.FRAMEBUFFER&&(c[i.DRAW_FRAMEBUFFER]=Le),!0):!1}function se(oe,Le){let be=h,xe=!1;if(oe){be=d.get(Le),be===void 0&&(be=[],d.set(Le,be));const ke=oe.textures;if(be.length!==ke.length||be[0]!==i.COLOR_ATTACHMENT0){for(let We=0,ot=ke.length;We<ot;We++)be[We]=i.COLOR_ATTACHMENT0+We;be.length=ke.length,xe=!0}}else be[0]!==i.BACK&&(be[0]=i.BACK,xe=!0);xe&&i.drawBuffers(be)}function ye(oe){return f!==oe?(i.useProgram(oe),f=oe,!0):!1}const de={[fr]:i.FUNC_ADD,[yC]:i.FUNC_SUBTRACT,[bC]:i.FUNC_REVERSE_SUBTRACT};de[_C]=i.MIN,de[wC]=i.MAX;const W={[EC]:i.ZERO,[xC]:i.ONE,[SC]:i.SRC_COLOR,[Ch]:i.SRC_ALPHA,[LC]:i.SRC_ALPHA_SATURATE,[AC]:i.DST_COLOR,[MC]:i.DST_ALPHA,[TC]:i.ONE_MINUS_SRC_COLOR,[Ah]:i.ONE_MINUS_SRC_ALPHA,[PC]:i.ONE_MINUS_DST_COLOR,[CC]:i.ONE_MINUS_DST_ALPHA,[RC]:i.CONSTANT_COLOR,[IC]:i.ONE_MINUS_CONSTANT_COLOR,[OC]:i.CONSTANT_ALPHA,[DC]:i.ONE_MINUS_CONSTANT_ALPHA};function Te(oe,Le,be,xe,ke,We,ot,At,Nt,lt){if(oe===Os){p===!0&&(J(i.BLEND),p=!1);return}if(p===!1&&(Y(i.BLEND),p=!0),oe!==vC){if(oe!==g||lt!==A){if((v!==fr||_!==fr)&&(i.blendEquation(i.FUNC_ADD),v=fr,_=fr),lt)switch(oe){case fa:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case wg:i.blendFunc(i.ONE,i.ONE);break;case Eg:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case xg:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}else switch(oe){case fa:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case wg:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case Eg:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case xg:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}m=null,b=null,y=null,M=null,x.set(0,0,0),S=0,g=oe,A=lt}return}ke=ke||Le,We=We||be,ot=ot||xe,(Le!==v||ke!==_)&&(i.blendEquationSeparate(de[Le],de[ke]),v=Le,_=ke),(be!==m||xe!==b||We!==y||ot!==M)&&(i.blendFuncSeparate(W[be],W[xe],W[We],W[ot]),m=be,b=xe,y=We,M=ot),(At.equals(x)===!1||Nt!==S)&&(i.blendColor(At.r,At.g,At.b,Nt),x.copy(At),S=Nt),g=oe,A=!1}function he(oe,Le){oe.side===as?J(i.CULL_FACE):Y(i.CULL_FACE);let be=oe.side===ki;Le&&(be=!be),Ae(be),oe.blending===fa&&oe.transparent===!1?Te(Os):Te(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),r.setFunc(oe.depthFunc),r.setTest(oe.depthTest),r.setMask(oe.depthWrite),s.setMask(oe.colorWrite);const xe=oe.stencilWrite;a.setTest(xe),xe&&(a.setMask(oe.stencilWriteMask),a.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),a.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Ie(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Y(i.SAMPLE_ALPHA_TO_COVERAGE):J(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(oe){E!==oe&&(oe?i.frontFace(i.CW):i.frontFace(i.CCW),E=oe)}function Ee(oe){oe!==pC?(Y(i.CULL_FACE),oe!==w&&(oe===_g?i.cullFace(i.BACK):oe===mC?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):J(i.CULL_FACE),w=oe}function Ne(oe){oe!==C&&(F&&i.lineWidth(oe),C=oe)}function Ie(oe,Le,be){oe?(Y(i.POLYGON_OFFSET_FILL),(P!==Le||T!==be)&&(i.polygonOffset(Le,be),P=Le,T=be)):J(i.POLYGON_OFFSET_FILL)}function Pe(oe){oe?Y(i.SCISSOR_TEST):J(i.SCISSOR_TEST)}function K(oe){oe===void 0&&(oe=i.TEXTURE0+R-1),O!==oe&&(i.activeTexture(oe),O=oe)}function N(oe,Le,be){be===void 0&&(O===null?be=i.TEXTURE0+R-1:be=O);let xe=j[be];xe===void 0&&(xe={type:void 0,texture:void 0},j[be]=xe),(xe.type!==oe||xe.texture!==Le)&&(O!==be&&(i.activeTexture(be),O=be),i.bindTexture(oe,Le||H[oe]),xe.type=oe,xe.texture=Le)}function X(){const oe=j[O];oe!==void 0&&oe.type!==void 0&&(i.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function ie(){try{i.compressedTexImage2D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function ae(){try{i.compressedTexImage3D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function re(){try{i.texSubImage2D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ce(){try{i.texSubImage3D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Me(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Se(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Oe(){try{i.texStorage2D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function we(){try{i.texStorage3D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Fe(){try{i.texImage2D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ge(){try{i.texImage3D.apply(i,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Je(oe){U.equals(oe)===!1&&(i.scissor(oe.x,oe.y,oe.z,oe.w),U.copy(oe))}function $e(oe){B.equals(oe)===!1&&(i.viewport(oe.x,oe.y,oe.z,oe.w),B.copy(oe))}function qe(oe,Le){let be=l.get(Le);be===void 0&&(be=new WeakMap,l.set(Le,be));let xe=be.get(oe);xe===void 0&&(xe=i.getUniformBlockIndex(Le,oe.name),be.set(oe,xe))}function at(oe,Le){const xe=l.get(Le).get(oe);o.get(Le)!==xe&&(i.uniformBlockBinding(Le,xe,oe.__bindingPointIndex),o.set(Le,xe))}function dt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},O=null,j={},c={},d=new WeakMap,h=[],f=null,p=!1,g=null,v=null,m=null,b=null,_=null,y=null,M=null,x=new Lt(0,0,0),S=0,A=!1,E=null,w=null,C=null,P=null,T=null,U.set(0,0,i.canvas.width,i.canvas.height),B.set(0,0,i.canvas.width,i.canvas.height),s.reset(),r.reset(),a.reset()}return{buffers:{color:s,depth:r,stencil:a},enable:Y,disable:J,bindFramebuffer:ee,drawBuffers:se,useProgram:ye,setBlending:Te,setMaterial:he,setFlipSided:Ae,setCullFace:Ee,setLineWidth:Ne,setPolygonOffset:Ie,setScissorTest:Pe,activeTexture:K,bindTexture:N,unbindTexture:X,compressedTexImage2D:ie,compressedTexImage3D:ae,texImage2D:Fe,texImage3D:Ge,updateUBOMapping:qe,uniformBlockBinding:at,texStorage2D:Oe,texStorage3D:we,texSubImage2D:re,texSubImage3D:Ce,compressedTexSubImage2D:Me,compressedTexSubImage3D:Se,scissor:Je,viewport:$e,reset:dt}}function gv(i,e,t,n){const s=SI(n);switch(t){case wy:return i*e;case xy:return i*e;case Sy:return i*e*2;case Ty:return i*e/s.components*s.byteLength;case np:return i*e/s.components*s.byteLength;case My:return i*e*2/s.components*s.byteLength;case sp:return i*e*2/s.components*s.byteLength;case Ey:return i*e*3/s.components*s.byteLength;case wn:return i*e*4/s.components*s.byteLength;case rp:return i*e*4/s.components*s.byteLength;case Tc:case Mc:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Cc:case Ac:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Dh:case Nh:return Math.max(i,16)*Math.max(e,8)/4;case Oh:case kh:return Math.max(i,8)*Math.max(e,8)/2;case Fh:case Uh:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case zh:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Bh:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Hh:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Vh:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case $h:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Gh:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Wh:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case jh:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Xh:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case qh:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Yh:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Kh:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Zh:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Qh:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Jh:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Pc:case ef:case tf:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Cy:case nf:return Math.ceil(i/4)*Math.ceil(e/4)*8;case sf:case rf:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function SI(i){switch(i){case ps:case yy:return{byteLength:1,components:1};case jo:case by:case ol:return{byteLength:2,components:1};case tp:case ip:return{byteLength:2,components:4};case xr:case ep:case cs:return{byteLength:4,components:1};case _y:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}function TI(i,e,t,n,s,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new gt,c=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(K,N){return f?new OffscreenCanvas(K,N):Jc("canvas")}function g(K,N,X){let ie=1;const ae=Pe(K);if((ae.width>X||ae.height>X)&&(ie=X/Math.max(ae.width,ae.height)),ie<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const re=Math.floor(ie*ae.width),Ce=Math.floor(ie*ae.height);d===void 0&&(d=p(re,Ce));const Me=N?p(re,Ce):d;return Me.width=re,Me.height=Ce,Me.getContext("2d").drawImage(K,0,0,re,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+re+"x"+Ce+")."),Me}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),K;return K}function v(K){return K.generateMipmaps&&K.minFilter!==cn&&K.minFilter!==on}function m(K){i.generateMipmap(K)}function b(K,N,X,ie,ae=!1){if(K!==null){if(i[K]!==void 0)return i[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let re=N;if(N===i.RED&&(X===i.FLOAT&&(re=i.R32F),X===i.HALF_FLOAT&&(re=i.R16F),X===i.UNSIGNED_BYTE&&(re=i.R8)),N===i.RED_INTEGER&&(X===i.UNSIGNED_BYTE&&(re=i.R8UI),X===i.UNSIGNED_SHORT&&(re=i.R16UI),X===i.UNSIGNED_INT&&(re=i.R32UI),X===i.BYTE&&(re=i.R8I),X===i.SHORT&&(re=i.R16I),X===i.INT&&(re=i.R32I)),N===i.RG&&(X===i.FLOAT&&(re=i.RG32F),X===i.HALF_FLOAT&&(re=i.RG16F),X===i.UNSIGNED_BYTE&&(re=i.RG8)),N===i.RG_INTEGER&&(X===i.UNSIGNED_BYTE&&(re=i.RG8UI),X===i.UNSIGNED_SHORT&&(re=i.RG16UI),X===i.UNSIGNED_INT&&(re=i.RG32UI),X===i.BYTE&&(re=i.RG8I),X===i.SHORT&&(re=i.RG16I),X===i.INT&&(re=i.RG32I)),N===i.RGB&&X===i.UNSIGNED_INT_5_9_9_9_REV&&(re=i.RGB9_E5),N===i.RGBA){const Ce=ae?Yc:St.getTransfer(ie);X===i.FLOAT&&(re=i.RGBA32F),X===i.HALF_FLOAT&&(re=i.RGBA16F),X===i.UNSIGNED_BYTE&&(re=Ce===kt?i.SRGB8_ALPHA8:i.RGBA8),X===i.UNSIGNED_SHORT_4_4_4_4&&(re=i.RGBA4),X===i.UNSIGNED_SHORT_5_5_5_1&&(re=i.RGB5_A1)}return(re===i.R16F||re===i.R32F||re===i.RG16F||re===i.RG32F||re===i.RGBA16F||re===i.RGBA32F)&&e.get("EXT_color_buffer_float"),re}function _(K,N){let X;return K?N===null||N===xr||N===Ma?X=i.DEPTH24_STENCIL8:N===cs?X=i.DEPTH32F_STENCIL8:N===jo&&(X=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===xr||N===Ma?X=i.DEPTH_COMPONENT24:N===cs?X=i.DEPTH_COMPONENT32F:N===jo&&(X=i.DEPTH_COMPONENT16),X}function y(K,N){return v(K)===!0||K.isFramebufferTexture&&K.minFilter!==cn&&K.minFilter!==on?Math.log2(Math.max(N.width,N.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?N.mipmaps.length:1}function M(K){const N=K.target;N.removeEventListener("dispose",M),S(N),N.isVideoTexture&&c.delete(N)}function x(K){const N=K.target;N.removeEventListener("dispose",x),E(N)}function S(K){const N=n.get(K);if(N.__webglInit===void 0)return;const X=K.source,ie=h.get(X);if(ie){const ae=ie[N.__cacheKey];ae.usedTimes--,ae.usedTimes===0&&A(K),Object.keys(ie).length===0&&h.delete(X)}n.remove(K)}function A(K){const N=n.get(K);i.deleteTexture(N.__webglTexture);const X=K.source,ie=h.get(X);delete ie[N.__cacheKey],a.memory.textures--}function E(K){const N=n.get(K);if(K.depthTexture&&K.depthTexture.dispose(),K.isWebGLCubeRenderTarget)for(let ie=0;ie<6;ie++){if(Array.isArray(N.__webglFramebuffer[ie]))for(let ae=0;ae<N.__webglFramebuffer[ie].length;ae++)i.deleteFramebuffer(N.__webglFramebuffer[ie][ae]);else i.deleteFramebuffer(N.__webglFramebuffer[ie]);N.__webglDepthbuffer&&i.deleteRenderbuffer(N.__webglDepthbuffer[ie])}else{if(Array.isArray(N.__webglFramebuffer))for(let ie=0;ie<N.__webglFramebuffer.length;ie++)i.deleteFramebuffer(N.__webglFramebuffer[ie]);else i.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&i.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&i.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let ie=0;ie<N.__webglColorRenderbuffer.length;ie++)N.__webglColorRenderbuffer[ie]&&i.deleteRenderbuffer(N.__webglColorRenderbuffer[ie]);N.__webglDepthRenderbuffer&&i.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const X=K.textures;for(let ie=0,ae=X.length;ie<ae;ie++){const re=n.get(X[ie]);re.__webglTexture&&(i.deleteTexture(re.__webglTexture),a.memory.textures--),n.remove(X[ie])}n.remove(K)}let w=0;function C(){w=0}function P(){const K=w;return K>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+s.maxTextures),w+=1,K}function T(K){const N=[];return N.push(K.wrapS),N.push(K.wrapT),N.push(K.wrapR||0),N.push(K.magFilter),N.push(K.minFilter),N.push(K.anisotropy),N.push(K.internalFormat),N.push(K.format),N.push(K.type),N.push(K.generateMipmaps),N.push(K.premultiplyAlpha),N.push(K.flipY),N.push(K.unpackAlignment),N.push(K.colorSpace),N.join()}function R(K,N){const X=n.get(K);if(K.isVideoTexture&&Ne(K),K.isRenderTargetTexture===!1&&K.version>0&&X.__version!==K.version){const ie=K.image;if(ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{B(X,K,N);return}}t.bindTexture(i.TEXTURE_2D,X.__webglTexture,i.TEXTURE0+N)}function F(K,N){const X=n.get(K);if(K.version>0&&X.__version!==K.version){B(X,K,N);return}t.bindTexture(i.TEXTURE_2D_ARRAY,X.__webglTexture,i.TEXTURE0+N)}function z(K,N){const X=n.get(K);if(K.version>0&&X.__version!==K.version){B(X,K,N);return}t.bindTexture(i.TEXTURE_3D,X.__webglTexture,i.TEXTURE0+N)}function D(K,N){const X=n.get(K);if(K.version>0&&X.__version!==K.version){V(X,K,N);return}t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+N)}const O={[Rh]:i.REPEAT,[vr]:i.CLAMP_TO_EDGE,[Ih]:i.MIRRORED_REPEAT},j={[cn]:i.NEAREST,[ZC]:i.NEAREST_MIPMAP_NEAREST,[jl]:i.NEAREST_MIPMAP_LINEAR,[on]:i.LINEAR,[Rd]:i.LINEAR_MIPMAP_NEAREST,[Is]:i.LINEAR_MIPMAP_LINEAR},k={[iA]:i.NEVER,[lA]:i.ALWAYS,[nA]:i.LESS,[Ay]:i.LEQUAL,[sA]:i.EQUAL,[oA]:i.GEQUAL,[rA]:i.GREATER,[aA]:i.NOTEQUAL};function I(K,N){if(N.type===cs&&e.has("OES_texture_float_linear")===!1&&(N.magFilter===on||N.magFilter===Rd||N.magFilter===jl||N.magFilter===Is||N.minFilter===on||N.minFilter===Rd||N.minFilter===jl||N.minFilter===Is)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(K,i.TEXTURE_WRAP_S,O[N.wrapS]),i.texParameteri(K,i.TEXTURE_WRAP_T,O[N.wrapT]),(K===i.TEXTURE_3D||K===i.TEXTURE_2D_ARRAY)&&i.texParameteri(K,i.TEXTURE_WRAP_R,O[N.wrapR]),i.texParameteri(K,i.TEXTURE_MAG_FILTER,j[N.magFilter]),i.texParameteri(K,i.TEXTURE_MIN_FILTER,j[N.minFilter]),N.compareFunction&&(i.texParameteri(K,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(K,i.TEXTURE_COMPARE_FUNC,k[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===cn||N.minFilter!==jl&&N.minFilter!==Is||N.type===cs&&e.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||n.get(N).__currentAnisotropy){const X=e.get("EXT_texture_filter_anisotropic");i.texParameterf(K,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,s.getMaxAnisotropy())),n.get(N).__currentAnisotropy=N.anisotropy}}}function U(K,N){let X=!1;K.__webglInit===void 0&&(K.__webglInit=!0,N.addEventListener("dispose",M));const ie=N.source;let ae=h.get(ie);ae===void 0&&(ae={},h.set(ie,ae));const re=T(N);if(re!==K.__cacheKey){ae[re]===void 0&&(ae[re]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,X=!0),ae[re].usedTimes++;const Ce=ae[K.__cacheKey];Ce!==void 0&&(ae[K.__cacheKey].usedTimes--,Ce.usedTimes===0&&A(N)),K.__cacheKey=re,K.__webglTexture=ae[re].texture}return X}function B(K,N,X){let ie=i.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(ie=i.TEXTURE_2D_ARRAY),N.isData3DTexture&&(ie=i.TEXTURE_3D);const ae=U(K,N),re=N.source;t.bindTexture(ie,K.__webglTexture,i.TEXTURE0+X);const Ce=n.get(re);if(re.version!==Ce.__version||ae===!0){t.activeTexture(i.TEXTURE0+X);const Me=St.getPrimaries(St.workingColorSpace),Se=N.colorSpace===As?null:St.getPrimaries(N.colorSpace),Oe=N.colorSpace===As||Me===Se?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,N.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,N.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);let we=g(N.image,!1,s.maxTextureSize);we=Ie(N,we);const Fe=r.convert(N.format,N.colorSpace),Ge=r.convert(N.type);let Je=b(N.internalFormat,Fe,Ge,N.colorSpace,N.isVideoTexture);I(ie,N);let $e;const qe=N.mipmaps,at=N.isVideoTexture!==!0,dt=Ce.__version===void 0||ae===!0,oe=re.dataReady,Le=y(N,we);if(N.isDepthTexture)Je=_(N.format===Ca,N.type),dt&&(at?t.texStorage2D(i.TEXTURE_2D,1,Je,we.width,we.height):t.texImage2D(i.TEXTURE_2D,0,Je,we.width,we.height,0,Fe,Ge,null));else if(N.isDataTexture)if(qe.length>0){at&&dt&&t.texStorage2D(i.TEXTURE_2D,Le,Je,qe[0].width,qe[0].height);for(let be=0,xe=qe.length;be<xe;be++)$e=qe[be],at?oe&&t.texSubImage2D(i.TEXTURE_2D,be,0,0,$e.width,$e.height,Fe,Ge,$e.data):t.texImage2D(i.TEXTURE_2D,be,Je,$e.width,$e.height,0,Fe,Ge,$e.data);N.generateMipmaps=!1}else at?(dt&&t.texStorage2D(i.TEXTURE_2D,Le,Je,we.width,we.height),oe&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,we.width,we.height,Fe,Ge,we.data)):t.texImage2D(i.TEXTURE_2D,0,Je,we.width,we.height,0,Fe,Ge,we.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){at&&dt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Le,Je,qe[0].width,qe[0].height,we.depth);for(let be=0,xe=qe.length;be<xe;be++)if($e=qe[be],N.format!==wn)if(Fe!==null)if(at){if(oe)if(N.layerUpdates.size>0){const ke=gv($e.width,$e.height,N.format,N.type);for(const We of N.layerUpdates){const ot=$e.data.subarray(We*ke/$e.data.BYTES_PER_ELEMENT,(We+1)*ke/$e.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,be,0,0,We,$e.width,$e.height,1,Fe,ot,0,0)}N.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,be,0,0,0,$e.width,$e.height,we.depth,Fe,$e.data,0,0)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,be,Je,$e.width,$e.height,we.depth,0,$e.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else at?oe&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,be,0,0,0,$e.width,$e.height,we.depth,Fe,Ge,$e.data):t.texImage3D(i.TEXTURE_2D_ARRAY,be,Je,$e.width,$e.height,we.depth,0,Fe,Ge,$e.data)}else{at&&dt&&t.texStorage2D(i.TEXTURE_2D,Le,Je,qe[0].width,qe[0].height);for(let be=0,xe=qe.length;be<xe;be++)$e=qe[be],N.format!==wn?Fe!==null?at?oe&&t.compressedTexSubImage2D(i.TEXTURE_2D,be,0,0,$e.width,$e.height,Fe,$e.data):t.compressedTexImage2D(i.TEXTURE_2D,be,Je,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):at?oe&&t.texSubImage2D(i.TEXTURE_2D,be,0,0,$e.width,$e.height,Fe,Ge,$e.data):t.texImage2D(i.TEXTURE_2D,be,Je,$e.width,$e.height,0,Fe,Ge,$e.data)}else if(N.isDataArrayTexture)if(at){if(dt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Le,Je,we.width,we.height,we.depth),oe)if(N.layerUpdates.size>0){const be=gv(we.width,we.height,N.format,N.type);for(const xe of N.layerUpdates){const ke=we.data.subarray(xe*be/we.data.BYTES_PER_ELEMENT,(xe+1)*be/we.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,xe,we.width,we.height,1,Fe,Ge,ke)}N.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,we.width,we.height,we.depth,Fe,Ge,we.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,Je,we.width,we.height,we.depth,0,Fe,Ge,we.data);else if(N.isData3DTexture)at?(dt&&t.texStorage3D(i.TEXTURE_3D,Le,Je,we.width,we.height,we.depth),oe&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,we.width,we.height,we.depth,Fe,Ge,we.data)):t.texImage3D(i.TEXTURE_3D,0,Je,we.width,we.height,we.depth,0,Fe,Ge,we.data);else if(N.isFramebufferTexture){if(dt)if(at)t.texStorage2D(i.TEXTURE_2D,Le,Je,we.width,we.height);else{let be=we.width,xe=we.height;for(let ke=0;ke<Le;ke++)t.texImage2D(i.TEXTURE_2D,ke,Je,be,xe,0,Fe,Ge,null),be>>=1,xe>>=1}}else if(qe.length>0){if(at&&dt){const be=Pe(qe[0]);t.texStorage2D(i.TEXTURE_2D,Le,Je,be.width,be.height)}for(let be=0,xe=qe.length;be<xe;be++)$e=qe[be],at?oe&&t.texSubImage2D(i.TEXTURE_2D,be,0,0,Fe,Ge,$e):t.texImage2D(i.TEXTURE_2D,be,Je,Fe,Ge,$e);N.generateMipmaps=!1}else if(at){if(dt){const be=Pe(we);t.texStorage2D(i.TEXTURE_2D,Le,Je,be.width,be.height)}oe&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Fe,Ge,we)}else t.texImage2D(i.TEXTURE_2D,0,Je,Fe,Ge,we);v(N)&&m(ie),Ce.__version=re.version,N.onUpdate&&N.onUpdate(N)}K.__version=N.version}function V(K,N,X){if(N.image.length!==6)return;const ie=U(K,N),ae=N.source;t.bindTexture(i.TEXTURE_CUBE_MAP,K.__webglTexture,i.TEXTURE0+X);const re=n.get(ae);if(ae.version!==re.__version||ie===!0){t.activeTexture(i.TEXTURE0+X);const Ce=St.getPrimaries(St.workingColorSpace),Me=N.colorSpace===As?null:St.getPrimaries(N.colorSpace),Se=N.colorSpace===As||Ce===Me?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,N.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,N.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);const Oe=N.isCompressedTexture||N.image[0].isCompressedTexture,we=N.image[0]&&N.image[0].isDataTexture,Fe=[];for(let xe=0;xe<6;xe++)!Oe&&!we?Fe[xe]=g(N.image[xe],!0,s.maxCubemapSize):Fe[xe]=we?N.image[xe].image:N.image[xe],Fe[xe]=Ie(N,Fe[xe]);const Ge=Fe[0],Je=r.convert(N.format,N.colorSpace),$e=r.convert(N.type),qe=b(N.internalFormat,Je,$e,N.colorSpace),at=N.isVideoTexture!==!0,dt=re.__version===void 0||ie===!0,oe=ae.dataReady;let Le=y(N,Ge);I(i.TEXTURE_CUBE_MAP,N);let be;if(Oe){at&&dt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Le,qe,Ge.width,Ge.height);for(let xe=0;xe<6;xe++){be=Fe[xe].mipmaps;for(let ke=0;ke<be.length;ke++){const We=be[ke];N.format!==wn?Je!==null?at?oe&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke,0,0,We.width,We.height,Je,We.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke,qe,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):at?oe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke,0,0,We.width,We.height,Je,$e,We.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke,qe,We.width,We.height,0,Je,$e,We.data)}}}else{if(be=N.mipmaps,at&&dt){be.length>0&&Le++;const xe=Pe(Fe[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Le,qe,xe.width,xe.height)}for(let xe=0;xe<6;xe++)if(we){at?oe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,Fe[xe].width,Fe[xe].height,Je,$e,Fe[xe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,qe,Fe[xe].width,Fe[xe].height,0,Je,$e,Fe[xe].data);for(let ke=0;ke<be.length;ke++){const ot=be[ke].image[xe].image;at?oe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke+1,0,0,ot.width,ot.height,Je,$e,ot.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke+1,qe,ot.width,ot.height,0,Je,$e,ot.data)}}else{at?oe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,Je,$e,Fe[xe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,qe,Je,$e,Fe[xe]);for(let ke=0;ke<be.length;ke++){const We=be[ke];at?oe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke+1,0,0,Je,$e,We.image[xe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+xe,ke+1,qe,Je,$e,We.image[xe])}}}v(N)&&m(i.TEXTURE_CUBE_MAP),re.__version=ae.version,N.onUpdate&&N.onUpdate(N)}K.__version=N.version}function H(K,N,X,ie,ae,re){const Ce=r.convert(X.format,X.colorSpace),Me=r.convert(X.type),Se=b(X.internalFormat,Ce,Me,X.colorSpace);if(!n.get(N).__hasExternalTextures){const we=Math.max(1,N.width>>re),Fe=Math.max(1,N.height>>re);ae===i.TEXTURE_3D||ae===i.TEXTURE_2D_ARRAY?t.texImage3D(ae,re,Se,we,Fe,N.depth,0,Ce,Me,null):t.texImage2D(ae,re,Se,we,Fe,0,Ce,Me,null)}t.bindFramebuffer(i.FRAMEBUFFER,K),Ee(N)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,ie,ae,n.get(X).__webglTexture,0,Ae(N)):(ae===i.TEXTURE_2D||ae>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ae<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,ie,ae,n.get(X).__webglTexture,re),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Y(K,N,X){if(i.bindRenderbuffer(i.RENDERBUFFER,K),N.depthBuffer){const ie=N.depthTexture,ae=ie&&ie.isDepthTexture?ie.type:null,re=_(N.stencilBuffer,ae),Ce=N.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Me=Ae(N);Ee(N)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Me,re,N.width,N.height):X?i.renderbufferStorageMultisample(i.RENDERBUFFER,Me,re,N.width,N.height):i.renderbufferStorage(i.RENDERBUFFER,re,N.width,N.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ce,i.RENDERBUFFER,K)}else{const ie=N.textures;for(let ae=0;ae<ie.length;ae++){const re=ie[ae],Ce=r.convert(re.format,re.colorSpace),Me=r.convert(re.type),Se=b(re.internalFormat,Ce,Me,re.colorSpace),Oe=Ae(N);X&&Ee(N)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Oe,Se,N.width,N.height):Ee(N)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Oe,Se,N.width,N.height):i.renderbufferStorage(i.RENDERBUFFER,Se,N.width,N.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function J(K,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,K),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),R(N.depthTexture,0);const ie=n.get(N.depthTexture).__webglTexture,ae=Ae(N);if(N.depthTexture.format===pa)Ee(N)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ie,0,ae):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ie,0);else if(N.depthTexture.format===Ca)Ee(N)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ie,0,ae):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ie,0);else throw new Error("Unknown depthTexture format")}function ee(K){const N=n.get(K),X=K.isWebGLCubeRenderTarget===!0;if(K.depthTexture&&!N.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");J(N.__webglFramebuffer,K)}else if(X){N.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)t.bindFramebuffer(i.FRAMEBUFFER,N.__webglFramebuffer[ie]),N.__webglDepthbuffer[ie]=i.createRenderbuffer(),Y(N.__webglDepthbuffer[ie],K,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer=i.createRenderbuffer(),Y(N.__webglDepthbuffer,K,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function se(K,N,X){const ie=n.get(K);N!==void 0&&H(ie.__webglFramebuffer,K,K.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),X!==void 0&&ee(K)}function ye(K){const N=K.texture,X=n.get(K),ie=n.get(N);K.addEventListener("dispose",x);const ae=K.textures,re=K.isWebGLCubeRenderTarget===!0,Ce=ae.length>1;if(Ce||(ie.__webglTexture===void 0&&(ie.__webglTexture=i.createTexture()),ie.__version=N.version,a.memory.textures++),re){X.__webglFramebuffer=[];for(let Me=0;Me<6;Me++)if(N.mipmaps&&N.mipmaps.length>0){X.__webglFramebuffer[Me]=[];for(let Se=0;Se<N.mipmaps.length;Se++)X.__webglFramebuffer[Me][Se]=i.createFramebuffer()}else X.__webglFramebuffer[Me]=i.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){X.__webglFramebuffer=[];for(let Me=0;Me<N.mipmaps.length;Me++)X.__webglFramebuffer[Me]=i.createFramebuffer()}else X.__webglFramebuffer=i.createFramebuffer();if(Ce)for(let Me=0,Se=ae.length;Me<Se;Me++){const Oe=n.get(ae[Me]);Oe.__webglTexture===void 0&&(Oe.__webglTexture=i.createTexture(),a.memory.textures++)}if(K.samples>0&&Ee(K)===!1){X.__webglMultisampledFramebuffer=i.createFramebuffer(),X.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let Me=0;Me<ae.length;Me++){const Se=ae[Me];X.__webglColorRenderbuffer[Me]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,X.__webglColorRenderbuffer[Me]);const Oe=r.convert(Se.format,Se.colorSpace),we=r.convert(Se.type),Fe=b(Se.internalFormat,Oe,we,Se.colorSpace,K.isXRRenderTarget===!0),Ge=Ae(K);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ge,Fe,K.width,K.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Me,i.RENDERBUFFER,X.__webglColorRenderbuffer[Me])}i.bindRenderbuffer(i.RENDERBUFFER,null),K.depthBuffer&&(X.__webglDepthRenderbuffer=i.createRenderbuffer(),Y(X.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(re){t.bindTexture(i.TEXTURE_CUBE_MAP,ie.__webglTexture),I(i.TEXTURE_CUBE_MAP,N);for(let Me=0;Me<6;Me++)if(N.mipmaps&&N.mipmaps.length>0)for(let Se=0;Se<N.mipmaps.length;Se++)H(X.__webglFramebuffer[Me][Se],K,N,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Se);else H(X.__webglFramebuffer[Me],K,N,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0);v(N)&&m(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ce){for(let Me=0,Se=ae.length;Me<Se;Me++){const Oe=ae[Me],we=n.get(Oe);t.bindTexture(i.TEXTURE_2D,we.__webglTexture),I(i.TEXTURE_2D,Oe),H(X.__webglFramebuffer,K,Oe,i.COLOR_ATTACHMENT0+Me,i.TEXTURE_2D,0),v(Oe)&&m(i.TEXTURE_2D)}t.unbindTexture()}else{let Me=i.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(Me=K.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Me,ie.__webglTexture),I(Me,N),N.mipmaps&&N.mipmaps.length>0)for(let Se=0;Se<N.mipmaps.length;Se++)H(X.__webglFramebuffer[Se],K,N,i.COLOR_ATTACHMENT0,Me,Se);else H(X.__webglFramebuffer,K,N,i.COLOR_ATTACHMENT0,Me,0);v(N)&&m(Me),t.unbindTexture()}K.depthBuffer&&ee(K)}function de(K){const N=K.textures;for(let X=0,ie=N.length;X<ie;X++){const ae=N[X];if(v(ae)){const re=K.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Ce=n.get(ae).__webglTexture;t.bindTexture(re,Ce),m(re),t.unbindTexture()}}}const W=[],Te=[];function he(K){if(K.samples>0){if(Ee(K)===!1){const N=K.textures,X=K.width,ie=K.height;let ae=i.COLOR_BUFFER_BIT;const re=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ce=n.get(K),Me=N.length>1;if(Me)for(let Se=0;Se<N.length;Se++)t.bindFramebuffer(i.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Ce.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ce.__webglFramebuffer);for(let Se=0;Se<N.length;Se++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(ae|=i.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(ae|=i.STENCIL_BUFFER_BIT)),Me){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Ce.__webglColorRenderbuffer[Se]);const Oe=n.get(N[Se]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Oe,0)}i.blitFramebuffer(0,0,X,ie,0,0,X,ie,ae,i.NEAREST),l===!0&&(W.length=0,Te.length=0,W.push(i.COLOR_ATTACHMENT0+Se),K.depthBuffer&&K.resolveDepthBuffer===!1&&(W.push(re),Te.push(re),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Te)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,W))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Me)for(let Se=0;Se<N.length;Se++){t.bindFramebuffer(i.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.RENDERBUFFER,Ce.__webglColorRenderbuffer[Se]);const Oe=n.get(N[Se]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Ce.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.TEXTURE_2D,Oe,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&l){const N=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[N])}}}function Ae(K){return Math.min(s.maxSamples,K.samples)}function Ee(K){const N=n.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function Ne(K){const N=a.render.frame;c.get(K)!==N&&(c.set(K,N),K.update())}function Ie(K,N){const X=K.colorSpace,ie=K.format,ae=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||X!==gs&&X!==As&&(St.getTransfer(X)===kt?(ie!==wn||ae!==ps)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",X)),N}function Pe(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(u.width=K.naturalWidth||K.width,u.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(u.width=K.displayWidth,u.height=K.displayHeight):(u.width=K.width,u.height=K.height),u}this.allocateTextureUnit=P,this.resetTextureUnits=C,this.setTexture2D=R,this.setTexture2DArray=F,this.setTexture3D=z,this.setTextureCube=D,this.rebindTextures=se,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=he,this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=H,this.useMultisampledRTT=Ee}function MI(i,e){function t(n,s=As){let r;const a=St.getTransfer(s);if(n===ps)return i.UNSIGNED_BYTE;if(n===tp)return i.UNSIGNED_SHORT_4_4_4_4;if(n===ip)return i.UNSIGNED_SHORT_5_5_5_1;if(n===_y)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===yy)return i.BYTE;if(n===by)return i.SHORT;if(n===jo)return i.UNSIGNED_SHORT;if(n===ep)return i.INT;if(n===xr)return i.UNSIGNED_INT;if(n===cs)return i.FLOAT;if(n===ol)return i.HALF_FLOAT;if(n===wy)return i.ALPHA;if(n===Ey)return i.RGB;if(n===wn)return i.RGBA;if(n===xy)return i.LUMINANCE;if(n===Sy)return i.LUMINANCE_ALPHA;if(n===pa)return i.DEPTH_COMPONENT;if(n===Ca)return i.DEPTH_STENCIL;if(n===Ty)return i.RED;if(n===np)return i.RED_INTEGER;if(n===My)return i.RG;if(n===sp)return i.RG_INTEGER;if(n===rp)return i.RGBA_INTEGER;if(n===Tc||n===Mc||n===Cc||n===Ac)if(a===kt)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Tc)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Mc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Cc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ac)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Tc)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Mc)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Cc)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ac)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Oh||n===Dh||n===kh||n===Nh)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===Oh)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Dh)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===kh)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Nh)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Fh||n===Uh||n===zh)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===Fh||n===Uh)return a===kt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===zh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Bh||n===Hh||n===Vh||n===$h||n===Gh||n===Wh||n===jh||n===Xh||n===qh||n===Yh||n===Kh||n===Zh||n===Qh||n===Jh)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===Bh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Hh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Vh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===$h)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Gh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Wh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===jh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Xh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===qh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Yh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Kh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Zh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Qh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Jh)return a===kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Pc||n===ef||n===tf)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Pc)return a===kt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ef)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===tf)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Cy||n===nf||n===sf||n===rf)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Pc)return r.COMPRESSED_RED_RGTC1_EXT;if(n===nf)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===sf)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===rf)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Ma?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}class CI extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class oa extends Yi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const AI={type:"move"};class ih{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new oa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new oa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new oa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,n),m=this._getHandJoint(u,g);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=v.radius),m.visible=v!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],h=c.position.distanceTo(d.position),f=.02,p=.005;u.inputState.pinching&&h>f+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=f-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(AI)))}return o!==null&&(o.visible=s!==null),l!==null&&(l.visible=r!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new oa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const PI=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,LI=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class RI{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Pi,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Vs({vertexShader:PI,fragmentShader:LI,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new En(new Su(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class II extends Na{constructor(e,t){super();const n=this;let s=null,r=1,a=null,o="local-floor",l=1,u=null,c=null,d=null,h=null,f=null,p=null;const g=new RI,v=t.getContextAttributes();let m=null,b=null;const _=[],y=[],M=new gt;let x=null;const S=new rn;S.layers.enable(1),S.viewport=new li;const A=new rn;A.layers.enable(2),A.viewport=new li;const E=[S,A],w=new CI;w.layers.enable(1),w.layers.enable(2);let C=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let H=_[V];return H===void 0&&(H=new ih,_[V]=H),H.getTargetRaySpace()},this.getControllerGrip=function(V){let H=_[V];return H===void 0&&(H=new ih,_[V]=H),H.getGripSpace()},this.getHand=function(V){let H=_[V];return H===void 0&&(H=new ih,_[V]=H),H.getHandSpace()};function T(V){const H=y.indexOf(V.inputSource);if(H===-1)return;const Y=_[H];Y!==void 0&&(Y.update(V.inputSource,V.frame,u||a),Y.dispatchEvent({type:V.type,data:V.inputSource}))}function R(){s.removeEventListener("select",T),s.removeEventListener("selectstart",T),s.removeEventListener("selectend",T),s.removeEventListener("squeeze",T),s.removeEventListener("squeezestart",T),s.removeEventListener("squeezeend",T),s.removeEventListener("end",R),s.removeEventListener("inputsourceschange",F);for(let V=0;V<_.length;V++){const H=y[V];H!==null&&(y[V]=null,_[V].disconnect(H))}C=null,P=null,g.reset(),e.setRenderTarget(m),f=null,h=null,d=null,s=null,b=null,B.stop(),n.isPresenting=!1,e.setPixelRatio(x),e.setSize(M.width,M.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){r=V,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){o=V,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(V){u=V},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return s},this.setSession=async function(V){if(s=V,s!==null){if(m=e.getRenderTarget(),s.addEventListener("select",T),s.addEventListener("selectstart",T),s.addEventListener("selectend",T),s.addEventListener("squeeze",T),s.addEventListener("squeezestart",T),s.addEventListener("squeezeend",T),s.addEventListener("end",R),s.addEventListener("inputsourceschange",F),v.xrCompatible!==!0&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(M),s.renderState.layers===void 0){const H={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(s,t,H),s.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),b=new Hs(f.framebufferWidth,f.framebufferHeight,{format:wn,type:ps,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let H=null,Y=null,J=null;v.depth&&(J=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,H=v.stencil?Ca:pa,Y=v.stencil?Ma:xr);const ee={colorFormat:t.RGBA8,depthFormat:J,scaleFactor:r};d=new XRWebGLBinding(s,t),h=d.createProjectionLayer(ee),s.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new Hs(h.textureWidth,h.textureHeight,{format:wn,type:ps,depthTexture:new Vy(h.textureWidth,h.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await s.requestReferenceSpace(o),B.setContext(s),B.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function F(V){for(let H=0;H<V.removed.length;H++){const Y=V.removed[H],J=y.indexOf(Y);J>=0&&(y[J]=null,_[J].disconnect(Y))}for(let H=0;H<V.added.length;H++){const Y=V.added[H];let J=y.indexOf(Y);if(J===-1){for(let se=0;se<_.length;se++)if(se>=y.length){y.push(Y),J=se;break}else if(y[se]===null){y[se]=Y,J=se;break}if(J===-1)break}const ee=_[J];ee&&ee.connect(Y)}}const z=new me,D=new me;function O(V,H,Y){z.setFromMatrixPosition(H.matrixWorld),D.setFromMatrixPosition(Y.matrixWorld);const J=z.distanceTo(D),ee=H.projectionMatrix.elements,se=Y.projectionMatrix.elements,ye=ee[14]/(ee[10]-1),de=ee[14]/(ee[10]+1),W=(ee[9]+1)/ee[5],Te=(ee[9]-1)/ee[5],he=(ee[8]-1)/ee[0],Ae=(se[8]+1)/se[0],Ee=ye*he,Ne=ye*Ae,Ie=J/(-he+Ae),Pe=Ie*-he;H.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Pe),V.translateZ(Ie),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const K=ye+Ie,N=de+Ie,X=Ee-Pe,ie=Ne+(J-Pe),ae=W*de/N*K,re=Te*de/N*K;V.projectionMatrix.makePerspective(X,ie,ae,re,K,N),V.projectionMatrixInverse.copy(V.projectionMatrix).invert()}function j(V,H){H===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(H.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(s===null)return;g.texture!==null&&(V.near=g.depthNear,V.far=g.depthFar),w.near=A.near=S.near=V.near,w.far=A.far=S.far=V.far,(C!==w.near||P!==w.far)&&(s.updateRenderState({depthNear:w.near,depthFar:w.far}),C=w.near,P=w.far,S.near=C,S.far=P,A.near=C,A.far=P,S.updateProjectionMatrix(),A.updateProjectionMatrix(),V.updateProjectionMatrix());const H=V.parent,Y=w.cameras;j(w,H);for(let J=0;J<Y.length;J++)j(Y[J],H);Y.length===2?O(w,S,A):w.projectionMatrix.copy(S.projectionMatrix),k(V,w,H)};function k(V,H,Y){Y===null?V.matrix.copy(H.matrixWorld):(V.matrix.copy(Y.matrixWorld),V.matrix.invert(),V.matrix.multiply(H.matrixWorld)),V.matrix.decompose(V.position,V.quaternion,V.scale),V.updateMatrixWorld(!0),V.projectionMatrix.copy(H.projectionMatrix),V.projectionMatrixInverse.copy(H.projectionMatrixInverse),V.isPerspectiveCamera&&(V.fov=Xo*2*Math.atan(1/V.projectionMatrix.elements[5]),V.zoom=1)}this.getCamera=function(){return w},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(V){l=V,h!==null&&(h.fixedFoveation=V),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=V)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(w)};let I=null;function U(V,H){if(c=H.getViewerPose(u||a),p=H,c!==null){const Y=c.views;f!==null&&(e.setRenderTargetFramebuffer(b,f.framebuffer),e.setRenderTarget(b));let J=!1;Y.length!==w.cameras.length&&(w.cameras.length=0,J=!0);for(let se=0;se<Y.length;se++){const ye=Y[se];let de=null;if(f!==null)de=f.getViewport(ye);else{const Te=d.getViewSubImage(h,ye);de=Te.viewport,se===0&&(e.setRenderTargetTextures(b,Te.colorTexture,h.ignoreDepthValues?void 0:Te.depthStencilTexture),e.setRenderTarget(b))}let W=E[se];W===void 0&&(W=new rn,W.layers.enable(se),W.viewport=new li,E[se]=W),W.matrix.fromArray(ye.transform.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale),W.projectionMatrix.fromArray(ye.projectionMatrix),W.projectionMatrixInverse.copy(W.projectionMatrix).invert(),W.viewport.set(de.x,de.y,de.width,de.height),se===0&&(w.matrix.copy(W.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),J===!0&&w.cameras.push(W)}const ee=s.enabledFeatures;if(ee&&ee.includes("depth-sensing")){const se=d.getDepthInformation(Y[0]);se&&se.isValid&&se.texture&&g.init(e,se,s.renderState)}}for(let Y=0;Y<_.length;Y++){const J=y[Y],ee=_[Y];J!==null&&ee!==void 0&&ee.update(J,H,u||a)}I&&I(V,H),H.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:H}),p=null}const B=new Hy;B.setAnimationLoop(U),this.setAnimationLoop=function(V){I=V},this.dispose=function(){}}}const cr=new $n,OI=new Zt;function DI(i,e){function t(v,m){v.matrixAutoUpdate===!0&&v.updateMatrix(),m.value.copy(v.matrix)}function n(v,m){m.color.getRGB(v.fogColor.value,Uy(i)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function s(v,m,b,_,y){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(v,m):m.isMeshToonMaterial?(r(v,m),d(v,m)):m.isMeshPhongMaterial?(r(v,m),c(v,m)):m.isMeshStandardMaterial?(r(v,m),h(v,m),m.isMeshPhysicalMaterial&&f(v,m,y)):m.isMeshMatcapMaterial?(r(v,m),p(v,m)):m.isMeshDepthMaterial?r(v,m):m.isMeshDistanceMaterial?(r(v,m),g(v,m)):m.isMeshNormalMaterial?r(v,m):m.isLineBasicMaterial?(a(v,m),m.isLineDashedMaterial&&o(v,m)):m.isPointsMaterial?l(v,m,b,_):m.isSpriteMaterial?u(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function r(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map,t(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,t(m.alphaMap,v.alphaMapTransform)),m.bumpMap&&(v.bumpMap.value=m.bumpMap,t(m.bumpMap,v.bumpMapTransform),v.bumpScale.value=m.bumpScale,m.side===ki&&(v.bumpScale.value*=-1)),m.normalMap&&(v.normalMap.value=m.normalMap,t(m.normalMap,v.normalMapTransform),v.normalScale.value.copy(m.normalScale),m.side===ki&&v.normalScale.value.negate()),m.displacementMap&&(v.displacementMap.value=m.displacementMap,t(m.displacementMap,v.displacementMapTransform),v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,v.emissiveMapTransform)),m.specularMap&&(v.specularMap.value=m.specularMap,t(m.specularMap,v.specularMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);const b=e.get(m),_=b.envMap,y=b.envMapRotation;_&&(v.envMap.value=_,cr.copy(y),cr.x*=-1,cr.y*=-1,cr.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(cr.y*=-1,cr.z*=-1),v.envMapRotation.value.setFromMatrix4(OI.makeRotationFromEuler(cr)),v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap&&(v.lightMap.value=m.lightMap,v.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,v.lightMapTransform)),m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,v.aoMapTransform))}function a(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,m.map&&(v.map.value=m.map,t(m.map,v.mapTransform))}function o(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function l(v,m,b,_){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*b,v.scale.value=_*.5,m.map&&(v.map.value=m.map,t(m.map,v.uvTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,t(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function u(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map,t(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,t(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function c(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function d(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function h(v,m){v.metalness.value=m.metalness,m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,v.metalnessMapTransform)),v.roughness.value=m.roughness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,v.roughnessMapTransform)),m.envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function f(v,m,b){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,v.sheenColorMapTransform)),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,v.sheenRoughnessMapTransform))),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,v.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(v.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===ki&&v.clearcoatNormalScale.value.negate())),m.dispersion>0&&(v.dispersion.value=m.dispersion),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,v.iridescenceMapTransform)),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,v.transmissionMapTransform)),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(v.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(v.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,v.specularColorMapTransform)),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,m){m.matcap&&(v.matcap.value=m.matcap)}function g(v,m){const b=e.get(m).light;v.referencePosition.value.setFromMatrixPosition(b.matrixWorld),v.nearDistance.value=b.shadow.camera.near,v.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function kI(i,e,t,n){let s={},r={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,_){const y=_.program;n.uniformBlockBinding(b,y)}function u(b,_){let y=s[b.id];y===void 0&&(p(b),y=c(b),s[b.id]=y,b.addEventListener("dispose",v));const M=_.program;n.updateUBOMapping(b,M);const x=e.render.frame;r[b.id]!==x&&(h(b),r[b.id]=x)}function c(b){const _=d();b.__bindingPointIndex=_;const y=i.createBuffer(),M=b.__size,x=b.usage;return i.bindBuffer(i.UNIFORM_BUFFER,y),i.bufferData(i.UNIFORM_BUFFER,M,x),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,_,y),y}function d(){for(let b=0;b<o;b++)if(a.indexOf(b)===-1)return a.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){const _=s[b.id],y=b.uniforms,M=b.__cache;i.bindBuffer(i.UNIFORM_BUFFER,_);for(let x=0,S=y.length;x<S;x++){const A=Array.isArray(y[x])?y[x]:[y[x]];for(let E=0,w=A.length;E<w;E++){const C=A[E];if(f(C,x,E,M)===!0){const P=C.__offset,T=Array.isArray(C.value)?C.value:[C.value];let R=0;for(let F=0;F<T.length;F++){const z=T[F],D=g(z);typeof z=="number"||typeof z=="boolean"?(C.__data[0]=z,i.bufferSubData(i.UNIFORM_BUFFER,P+R,C.__data)):z.isMatrix3?(C.__data[0]=z.elements[0],C.__data[1]=z.elements[1],C.__data[2]=z.elements[2],C.__data[3]=0,C.__data[4]=z.elements[3],C.__data[5]=z.elements[4],C.__data[6]=z.elements[5],C.__data[7]=0,C.__data[8]=z.elements[6],C.__data[9]=z.elements[7],C.__data[10]=z.elements[8],C.__data[11]=0):(z.toArray(C.__data,R),R+=D.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,P,C.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(b,_,y,M){const x=b.value,S=_+"_"+y;if(M[S]===void 0)return typeof x=="number"||typeof x=="boolean"?M[S]=x:M[S]=x.clone(),!0;{const A=M[S];if(typeof x=="number"||typeof x=="boolean"){if(A!==x)return M[S]=x,!0}else if(A.equals(x)===!1)return A.copy(x),!0}return!1}function p(b){const _=b.uniforms;let y=0;const M=16;for(let S=0,A=_.length;S<A;S++){const E=Array.isArray(_[S])?_[S]:[_[S]];for(let w=0,C=E.length;w<C;w++){const P=E[w],T=Array.isArray(P.value)?P.value:[P.value];for(let R=0,F=T.length;R<F;R++){const z=T[R],D=g(z),O=y%M,j=O%D.boundary,k=O+j;y+=j,k!==0&&M-k<D.storage&&(y+=M-k),P.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=y,y+=D.storage}}}const x=y%M;return x>0&&(y+=M-x),b.__size=y,b.__cache={},this}function g(b){const _={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(_.boundary=4,_.storage=4):b.isVector2?(_.boundary=8,_.storage=8):b.isVector3||b.isColor?(_.boundary=16,_.storage=12):b.isVector4?(_.boundary=16,_.storage=16):b.isMatrix3?(_.boundary=48,_.storage=48):b.isMatrix4?(_.boundary=64,_.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),_}function v(b){const _=b.target;_.removeEventListener("dispose",v);const y=a.indexOf(_.__bindingPointIndex);a.splice(y,1),i.deleteBuffer(s[_.id]),delete s[_.id],delete r[_.id]}function m(){for(const b in s)i.deleteBuffer(s[b]);a=[],s={},r={}}return{bind:l,update:u,dispose:m}}class NI{constructor(e={}){const{canvas:t=TA(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=a;const f=new Uint32Array(4),p=new Int32Array(4);let g=null,v=null;const m=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Rn,this.toneMapping=Ds,this.toneMappingExposure=1;const _=this;let y=!1,M=0,x=0,S=null,A=-1,E=null;const w=new li,C=new li;let P=null;const T=new Lt(0);let R=0,F=t.width,z=t.height,D=1,O=null,j=null;const k=new li(0,0,F,z),I=new li(0,0,F,z);let U=!1;const B=new up;let V=!1,H=!1;const Y=new Zt,J=new me,ee=new li,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ye=!1;function de(){return S===null?D:1}let W=n;function Te(q,le){return t.getContext(q,le)}try{const q={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Jf}`),t.addEventListener("webglcontextlost",be,!1),t.addEventListener("webglcontextrestored",xe,!1),t.addEventListener("webglcontextcreationerror",ke,!1),W===null){const le="webgl2";if(W=Te(le,q),W===null)throw Te(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let he,Ae,Ee,Ne,Ie,Pe,K,N,X,ie,ae,re,Ce,Me,Se,Oe,we,Fe,Ge,Je,$e,qe,at,dt;function oe(){he=new VL(W),he.init(),qe=new MI(W,he),Ae=new kL(W,he,e,qe),Ee=new xI(W),Ne=new WL(W),Ie=new cI,Pe=new TI(W,he,Ee,Ie,Ae,qe,Ne),K=new FL(_),N=new HL(_),X=new ZA(W),at=new OL(W,X),ie=new $L(W,X,Ne,at),ae=new XL(W,ie,X,Ne),Ge=new jL(W,Ae,Pe),Oe=new NL(Ie),re=new lI(_,K,N,he,Ae,at,Oe),Ce=new DI(_,Ie),Me=new dI,Se=new vI(he),Fe=new IL(_,K,N,Ee,ae,h,l),we=new EI(_,ae,Ae),dt=new kI(W,Ne,Ae,Ee),Je=new DL(W,he,Ne),$e=new GL(W,he,Ne),Ne.programs=re.programs,_.capabilities=Ae,_.extensions=he,_.properties=Ie,_.renderLists=Me,_.shadowMap=we,_.state=Ee,_.info=Ne}oe();const Le=new II(_,W);this.xr=Le,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const q=he.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=he.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(q){q!==void 0&&(D=q,this.setSize(F,z,!1))},this.getSize=function(q){return q.set(F,z)},this.setSize=function(q,le,pe=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=q,z=le,t.width=Math.floor(q*D),t.height=Math.floor(le*D),pe===!0&&(t.style.width=q+"px",t.style.height=le+"px"),this.setViewport(0,0,q,le)},this.getDrawingBufferSize=function(q){return q.set(F*D,z*D).floor()},this.setDrawingBufferSize=function(q,le,pe){F=q,z=le,D=pe,t.width=Math.floor(q*pe),t.height=Math.floor(le*pe),this.setViewport(0,0,q,le)},this.getCurrentViewport=function(q){return q.copy(w)},this.getViewport=function(q){return q.copy(k)},this.setViewport=function(q,le,pe,ge){q.isVector4?k.set(q.x,q.y,q.z,q.w):k.set(q,le,pe,ge),Ee.viewport(w.copy(k).multiplyScalar(D).round())},this.getScissor=function(q){return q.copy(I)},this.setScissor=function(q,le,pe,ge){q.isVector4?I.set(q.x,q.y,q.z,q.w):I.set(q,le,pe,ge),Ee.scissor(C.copy(I).multiplyScalar(D).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(q){Ee.setScissorTest(U=q)},this.setOpaqueSort=function(q){O=q},this.setTransparentSort=function(q){j=q},this.getClearColor=function(q){return q.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor.apply(Fe,arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha.apply(Fe,arguments)},this.clear=function(q=!0,le=!0,pe=!0){let ge=0;if(q){let ue=!1;if(S!==null){const De=S.texture.format;ue=De===rp||De===sp||De===np}if(ue){const De=S.texture.type,Be=De===ps||De===xr||De===jo||De===Ma||De===tp||De===ip,je=Fe.getClearColor(),Xe=Fe.getClearAlpha(),Ze=je.r,et=je.g,Qe=je.b;Be?(f[0]=Ze,f[1]=et,f[2]=Qe,f[3]=Xe,W.clearBufferuiv(W.COLOR,0,f)):(p[0]=Ze,p[1]=et,p[2]=Qe,p[3]=Xe,W.clearBufferiv(W.COLOR,0,p))}else ge|=W.COLOR_BUFFER_BIT}le&&(ge|=W.DEPTH_BUFFER_BIT),pe&&(ge|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",be,!1),t.removeEventListener("webglcontextrestored",xe,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),Me.dispose(),Se.dispose(),Ie.dispose(),K.dispose(),N.dispose(),ae.dispose(),at.dispose(),dt.dispose(),re.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",ci),Le.removeEventListener("sessionend",jn),Ri.stop()};function be(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const q=Ne.autoReset,le=we.enabled,pe=we.autoUpdate,ge=we.needsUpdate,ue=we.type;oe(),Ne.autoReset=q,we.enabled=le,we.autoUpdate=pe,we.needsUpdate=ge,we.type=ue}function ke(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function We(q){const le=q.target;le.removeEventListener("dispose",We),ot(le)}function ot(q){At(q),Ie.remove(q)}function At(q){const le=Ie.get(q).programs;le!==void 0&&(le.forEach(function(pe){re.releaseProgram(pe)}),q.isShaderMaterial&&re.releaseShaderCache(q))}this.renderBufferDirect=function(q,le,pe,ge,ue,De){le===null&&(le=se);const Be=ue.isMesh&&ue.matrixWorld.determinant()<0,je=$u(q,le,pe,ge,ue);Ee.setMaterial(ge,Be);let Xe=pe.index,Ze=1;if(ge.wireframe===!0){if(Xe=ie.getWireframeAttribute(pe),Xe===void 0)return;Ze=2}const et=pe.drawRange,Qe=pe.attributes.position;let pt=et.start*Ze,Dt=(et.start+et.count)*Ze;De!==null&&(pt=Math.max(pt,De.start*Ze),Dt=Math.min(Dt,(De.start+De.count)*Ze)),Xe!==null?(pt=Math.max(pt,0),Dt=Math.min(Dt,Xe.count)):Qe!=null&&(pt=Math.max(pt,0),Dt=Math.min(Dt,Qe.count));const Ft=Dt-pt;if(Ft<0||Ft===1/0)return;at.setup(ue,ge,je,pe,Xe);let xi,vt=Je;if(Xe!==null&&(xi=X.get(Xe),vt=$e,vt.setIndex(xi)),ue.isMesh)ge.wireframe===!0?(Ee.setLineWidth(ge.wireframeLinewidth*de()),vt.setMode(W.LINES)):vt.setMode(W.TRIANGLES);else if(ue.isLine){let Ke=ge.linewidth;Ke===void 0&&(Ke=1),Ee.setLineWidth(Ke*de()),ue.isLineSegments?vt.setMode(W.LINES):ue.isLineLoop?vt.setMode(W.LINE_LOOP):vt.setMode(W.LINE_STRIP)}else ue.isPoints?vt.setMode(W.POINTS):ue.isSprite&&vt.setMode(W.TRIANGLES);if(ue.isBatchedMesh)if(ue._multiDrawInstances!==null)vt.renderMultiDrawInstances(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount,ue._multiDrawInstances);else if(he.get("WEBGL_multi_draw"))vt.renderMultiDraw(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount);else{const Ke=ue._multiDrawStarts,Yt=ue._multiDrawCounts,yt=ue._multiDrawCount,Fi=Xe?X.get(Xe).bytesPerElement:1,qn=Ie.get(ge).currentProgram.getUniforms();for(let ui=0;ui<yt;ui++)qn.setValue(W,"_gl_DrawID",ui),vt.render(Ke[ui]/Fi,Yt[ui])}else if(ue.isInstancedMesh)vt.renderInstances(pt,Ft,ue.count);else if(pe.isInstancedBufferGeometry){const Ke=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,Yt=Math.min(pe.instanceCount,Ke);vt.renderInstances(pt,Ft,Yt)}else vt.render(pt,Ft)};function Nt(q,le,pe){q.transparent===!0&&q.side===as&&q.forceSinglePass===!1?(q.side=ki,q.needsUpdate=!0,Ar(q,le,pe),q.side=Bs,q.needsUpdate=!0,Ar(q,le,pe),q.side=as):Ar(q,le,pe)}this.compile=function(q,le,pe=null){pe===null&&(pe=q),v=Se.get(pe),v.init(le),b.push(v),pe.traverseVisible(function(ue){ue.isLight&&ue.layers.test(le.layers)&&(v.pushLight(ue),ue.castShadow&&v.pushShadow(ue))}),q!==pe&&q.traverseVisible(function(ue){ue.isLight&&ue.layers.test(le.layers)&&(v.pushLight(ue),ue.castShadow&&v.pushShadow(ue))}),v.setupLights();const ge=new Set;return q.traverse(function(ue){const De=ue.material;if(De)if(Array.isArray(De))for(let Be=0;Be<De.length;Be++){const je=De[Be];Nt(je,pe,ue),ge.add(je)}else Nt(De,pe,ue),ge.add(De)}),b.pop(),v=null,ge},this.compileAsync=function(q,le,pe=null){const ge=this.compile(q,le,pe);return new Promise(ue=>{function De(){if(ge.forEach(function(Be){Ie.get(Be).currentProgram.isReady()&&ge.delete(Be)}),ge.size===0){ue(q);return}setTimeout(De,10)}he.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let lt=null;function vi(q){lt&&lt(q)}function ci(){Ri.stop()}function jn(){Ri.start()}const Ri=new Hy;Ri.setAnimationLoop(vi),typeof self<"u"&&Ri.setContext(self),this.setAnimationLoop=function(q){lt=q,Le.setAnimationLoop(q),q===null?Ri.stop():Ri.start()},Le.addEventListener("sessionstart",ci),Le.addEventListener("sessionend",jn),this.render=function(q,le){if(le!==void 0&&le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(le),le=Le.getCamera()),q.isScene===!0&&q.onBeforeRender(_,q,le,S),v=Se.get(q,b.length),v.init(le),b.push(v),Y.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),B.setFromProjectionMatrix(Y),H=this.localClippingEnabled,V=Oe.init(this.clippingPlanes,H),g=Me.get(q,m.length),g.init(),m.push(g),Le.enabled===!0&&Le.isPresenting===!0){const De=_.xr.getDepthSensingMesh();De!==null&&qs(De,le,-1/0,_.sortObjects)}qs(q,le,0,_.sortObjects),g.finish(),_.sortObjects===!0&&g.sort(O,j),ye=Le.enabled===!1||Le.isPresenting===!1||Le.hasDepthSensing()===!1,ye&&Fe.addToRenderList(g,q),this.info.render.frame++,V===!0&&Oe.beginShadows();const pe=v.state.shadowsArray;we.render(pe,q,le),V===!0&&Oe.endShadows(),this.info.autoReset===!0&&this.info.reset();const ge=g.opaque,ue=g.transmissive;if(v.setupLights(),le.isArrayCamera){const De=le.cameras;if(ue.length>0)for(let Be=0,je=De.length;Be<je;Be++){const Xe=De[Be];vl(ge,ue,q,Xe)}ye&&Fe.render(q);for(let Be=0,je=De.length;Be<je;Be++){const Xe=De[Be];Ys(g,q,Xe,Xe.viewport)}}else ue.length>0&&vl(ge,ue,q,le),ye&&Fe.render(q),Ys(g,q,le);S!==null&&(Pe.updateMultisampleRenderTarget(S),Pe.updateRenderTargetMipmap(S)),q.isScene===!0&&q.onAfterRender(_,q,le),at.resetDefaultState(),A=-1,E=null,b.pop(),b.length>0?(v=b[b.length-1],V===!0&&Oe.setGlobalState(_.clippingPlanes,v.state.camera)):v=null,m.pop(),m.length>0?g=m[m.length-1]:g=null};function qs(q,le,pe,ge){if(q.visible===!1)return;if(q.layers.test(le.layers)){if(q.isGroup)pe=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(le);else if(q.isLight)v.pushLight(q),q.castShadow&&v.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||B.intersectsSprite(q)){ge&&ee.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Y);const Be=ae.update(q),je=q.material;je.visible&&g.push(q,Be,je,pe,ee.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||B.intersectsObject(q))){const Be=ae.update(q),je=q.material;if(ge&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),ee.copy(q.boundingSphere.center)):(Be.boundingSphere===null&&Be.computeBoundingSphere(),ee.copy(Be.boundingSphere.center)),ee.applyMatrix4(q.matrixWorld).applyMatrix4(Y)),Array.isArray(je)){const Xe=Be.groups;for(let Ze=0,et=Xe.length;Ze<et;Ze++){const Qe=Xe[Ze],pt=je[Qe.materialIndex];pt&&pt.visible&&g.push(q,Be,pt,pe,ee.z,Qe)}}else je.visible&&g.push(q,Be,je,pe,ee.z,null)}}const De=q.children;for(let Be=0,je=De.length;Be<je;Be++)qs(De[Be],le,pe,ge)}function Ys(q,le,pe,ge){const ue=q.opaque,De=q.transmissive,Be=q.transparent;v.setupLightsView(pe),V===!0&&Oe.setGlobalState(_.clippingPlanes,pe),ge&&Ee.viewport(w.copy(ge)),ue.length>0&&Xn(ue,le,pe),De.length>0&&Xn(De,le,pe),Be.length>0&&Xn(Be,le,pe),Ee.buffers.depth.setTest(!0),Ee.buffers.depth.setMask(!0),Ee.buffers.color.setMask(!0),Ee.setPolygonOffset(!1)}function vl(q,le,pe,ge){if((pe.isScene===!0?pe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[ge.id]===void 0&&(v.state.transmissionRenderTarget[ge.id]=new Hs(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?ol:ps,minFilter:Is,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:St.workingColorSpace}));const De=v.state.transmissionRenderTarget[ge.id],Be=ge.viewport||w;De.setSize(Be.z,Be.w);const je=_.getRenderTarget();_.setRenderTarget(De),_.getClearColor(T),R=_.getClearAlpha(),R<1&&_.setClearColor(16777215,.5),_.clear(),ye&&Fe.render(pe);const Xe=_.toneMapping;_.toneMapping=Ds;const Ze=ge.viewport;if(ge.viewport!==void 0&&(ge.viewport=void 0),v.setupLightsView(ge),V===!0&&Oe.setGlobalState(_.clippingPlanes,ge),Xn(q,pe,ge),Pe.updateMultisampleRenderTarget(De),Pe.updateRenderTargetMipmap(De),he.has("WEBGL_multisampled_render_to_texture")===!1){let et=!1;for(let Qe=0,pt=le.length;Qe<pt;Qe++){const Dt=le[Qe],Ft=Dt.object,xi=Dt.geometry,vt=Dt.material,Ke=Dt.group;if(vt.side===as&&Ft.layers.test(ge.layers)){const Yt=vt.side;vt.side=ki,vt.needsUpdate=!0,yl(Ft,pe,ge,xi,vt,Ke),vt.side=Yt,vt.needsUpdate=!0,et=!0}}et===!0&&(Pe.updateMultisampleRenderTarget(De),Pe.updateRenderTargetMipmap(De))}_.setRenderTarget(je),_.setClearColor(T,R),Ze!==void 0&&(ge.viewport=Ze),_.toneMapping=Xe}function Xn(q,le,pe){const ge=le.isScene===!0?le.overrideMaterial:null;for(let ue=0,De=q.length;ue<De;ue++){const Be=q[ue],je=Be.object,Xe=Be.geometry,Ze=ge===null?Be.material:ge,et=Be.group;je.layers.test(pe.layers)&&yl(je,le,pe,Xe,Ze,et)}}function yl(q,le,pe,ge,ue,De){q.onBeforeRender(_,le,pe,ge,ue,De),q.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),ue.transparent===!0&&ue.side===as&&ue.forceSinglePass===!1?(ue.side=ki,ue.needsUpdate=!0,_.renderBufferDirect(pe,le,ge,ue,q,De),ue.side=Bs,ue.needsUpdate=!0,_.renderBufferDirect(pe,le,ge,ue,q,De),ue.side=as):_.renderBufferDirect(pe,le,ge,ue,q,De),q.onAfterRender(_,le,pe,ge,ue,De)}function Ar(q,le,pe){le.isScene!==!0&&(le=se);const ge=Ie.get(q),ue=v.state.lights,De=v.state.shadowsArray,Be=ue.state.version,je=re.getParameters(q,ue.state,De,le,pe),Xe=re.getProgramCacheKey(je);let Ze=ge.programs;ge.environment=q.isMeshStandardMaterial?le.environment:null,ge.fog=le.fog,ge.envMap=(q.isMeshStandardMaterial?N:K).get(q.envMap||ge.environment),ge.envMapRotation=ge.environment!==null&&q.envMap===null?le.environmentRotation:q.envMapRotation,Ze===void 0&&(q.addEventListener("dispose",We),Ze=new Map,ge.programs=Ze);let et=Ze.get(Xe);if(et!==void 0){if(ge.currentProgram===et&&ge.lightsStateVersion===Be)return _l(q,je),et}else je.uniforms=re.getUniforms(q),q.onBeforeCompile(je,_),et=re.acquireProgram(je,Xe),Ze.set(Xe,et),ge.uniforms=je.uniforms;const Qe=ge.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(Qe.clippingPlanes=Oe.uniform),_l(q,je),ge.needsLights=$a(q),ge.lightsStateVersion=Be,ge.needsLights&&(Qe.ambientLightColor.value=ue.state.ambient,Qe.lightProbe.value=ue.state.probe,Qe.directionalLights.value=ue.state.directional,Qe.directionalLightShadows.value=ue.state.directionalShadow,Qe.spotLights.value=ue.state.spot,Qe.spotLightShadows.value=ue.state.spotShadow,Qe.rectAreaLights.value=ue.state.rectArea,Qe.ltc_1.value=ue.state.rectAreaLTC1,Qe.ltc_2.value=ue.state.rectAreaLTC2,Qe.pointLights.value=ue.state.point,Qe.pointLightShadows.value=ue.state.pointShadow,Qe.hemisphereLights.value=ue.state.hemi,Qe.directionalShadowMap.value=ue.state.directionalShadowMap,Qe.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,Qe.spotShadowMap.value=ue.state.spotShadowMap,Qe.spotLightMatrix.value=ue.state.spotLightMatrix,Qe.spotLightMap.value=ue.state.spotLightMap,Qe.pointShadowMap.value=ue.state.pointShadowMap,Qe.pointShadowMatrix.value=ue.state.pointShadowMatrix),ge.currentProgram=et,ge.uniformsList=null,et}function bl(q){if(q.uniformsList===null){const le=q.currentProgram.getUniforms();q.uniformsList=Lc.seqWithValue(le.seq,q.uniforms)}return q.uniformsList}function _l(q,le){const pe=Ie.get(q);pe.outputColorSpace=le.outputColorSpace,pe.batching=le.batching,pe.batchingColor=le.batchingColor,pe.instancing=le.instancing,pe.instancingColor=le.instancingColor,pe.instancingMorph=le.instancingMorph,pe.skinning=le.skinning,pe.morphTargets=le.morphTargets,pe.morphNormals=le.morphNormals,pe.morphColors=le.morphColors,pe.morphTargetsCount=le.morphTargetsCount,pe.numClippingPlanes=le.numClippingPlanes,pe.numIntersection=le.numClipIntersection,pe.vertexAlphas=le.vertexAlphas,pe.vertexTangents=le.vertexTangents,pe.toneMapping=le.toneMapping}function $u(q,le,pe,ge,ue){le.isScene!==!0&&(le=se),Pe.resetTextureUnits();const De=le.fog,Be=ge.isMeshStandardMaterial?le.environment:null,je=S===null?_.outputColorSpace:S.isXRRenderTarget===!0?S.texture.colorSpace:gs,Xe=(ge.isMeshStandardMaterial?N:K).get(ge.envMap||Be),Ze=ge.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,et=!!pe.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),Qe=!!pe.morphAttributes.position,pt=!!pe.morphAttributes.normal,Dt=!!pe.morphAttributes.color;let Ft=Ds;ge.toneMapped&&(S===null||S.isXRRenderTarget===!0)&&(Ft=_.toneMapping);const xi=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,vt=xi!==void 0?xi.length:0,Ke=Ie.get(ge),Yt=v.state.lights;if(V===!0&&(H===!0||q!==E)){const ei=q===E&&ge.id===A;Oe.setState(ge,q,ei)}let yt=!1;ge.version===Ke.__version?(Ke.needsLights&&Ke.lightsStateVersion!==Yt.state.version||Ke.outputColorSpace!==je||ue.isBatchedMesh&&Ke.batching===!1||!ue.isBatchedMesh&&Ke.batching===!0||ue.isBatchedMesh&&Ke.batchingColor===!0&&ue.colorTexture===null||ue.isBatchedMesh&&Ke.batchingColor===!1&&ue.colorTexture!==null||ue.isInstancedMesh&&Ke.instancing===!1||!ue.isInstancedMesh&&Ke.instancing===!0||ue.isSkinnedMesh&&Ke.skinning===!1||!ue.isSkinnedMesh&&Ke.skinning===!0||ue.isInstancedMesh&&Ke.instancingColor===!0&&ue.instanceColor===null||ue.isInstancedMesh&&Ke.instancingColor===!1&&ue.instanceColor!==null||ue.isInstancedMesh&&Ke.instancingMorph===!0&&ue.morphTexture===null||ue.isInstancedMesh&&Ke.instancingMorph===!1&&ue.morphTexture!==null||Ke.envMap!==Xe||ge.fog===!0&&Ke.fog!==De||Ke.numClippingPlanes!==void 0&&(Ke.numClippingPlanes!==Oe.numPlanes||Ke.numIntersection!==Oe.numIntersection)||Ke.vertexAlphas!==Ze||Ke.vertexTangents!==et||Ke.morphTargets!==Qe||Ke.morphNormals!==pt||Ke.morphColors!==Dt||Ke.toneMapping!==Ft||Ke.morphTargetsCount!==vt)&&(yt=!0):(yt=!0,Ke.__version=ge.version);let Fi=Ke.currentProgram;yt===!0&&(Fi=Ar(ge,le,ue));let qn=!1,ui=!1,Ga=!1;const Ot=Fi.getUniforms(),Si=Ke.uniforms;if(Ee.useProgram(Fi.program)&&(qn=!0,ui=!0,Ga=!0),ge.id!==A&&(A=ge.id,ui=!0),qn||E!==q){Ot.setValue(W,"projectionMatrix",q.projectionMatrix),Ot.setValue(W,"viewMatrix",q.matrixWorldInverse);const ei=Ot.map.cameraPosition;ei!==void 0&&ei.setValue(W,J.setFromMatrixPosition(q.matrixWorld)),Ae.logarithmicDepthBuffer&&Ot.setValue(W,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Ot.setValue(W,"isOrthographic",q.isOrthographicCamera===!0),E!==q&&(E=q,ui=!0,Ga=!0)}if(ue.isSkinnedMesh){Ot.setOptional(W,ue,"bindMatrix"),Ot.setOptional(W,ue,"bindMatrixInverse");const ei=ue.skeleton;ei&&(ei.boneTexture===null&&ei.computeBoneTexture(),Ot.setValue(W,"boneTexture",ei.boneTexture,Pe))}ue.isBatchedMesh&&(Ot.setOptional(W,ue,"batchingTexture"),Ot.setValue(W,"batchingTexture",ue._matricesTexture,Pe),Ot.setOptional(W,ue,"batchingIdTexture"),Ot.setValue(W,"batchingIdTexture",ue._indirectTexture,Pe),Ot.setOptional(W,ue,"batchingColorTexture"),ue._colorsTexture!==null&&Ot.setValue(W,"batchingColorTexture",ue._colorsTexture,Pe));const Wa=pe.morphAttributes;if((Wa.position!==void 0||Wa.normal!==void 0||Wa.color!==void 0)&&Ge.update(ue,pe,Fi),(ui||Ke.receiveShadow!==ue.receiveShadow)&&(Ke.receiveShadow=ue.receiveShadow,Ot.setValue(W,"receiveShadow",ue.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Si.envMap.value=Xe,Si.flipEnvMap.value=Xe.isCubeTexture&&Xe.isRenderTargetTexture===!1?-1:1),ge.isMeshStandardMaterial&&ge.envMap===null&&le.environment!==null&&(Si.envMapIntensity.value=le.environmentIntensity),ui&&(Ot.setValue(W,"toneMappingExposure",_.toneMappingExposure),Ke.needsLights&&Gu(Si,Ga),De&&ge.fog===!0&&Ce.refreshFogUniforms(Si,De),Ce.refreshMaterialUniforms(Si,ge,D,z,v.state.transmissionRenderTarget[q.id]),Lc.upload(W,bl(Ke),Si,Pe)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(Lc.upload(W,bl(Ke),Si,Pe),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Ot.setValue(W,"center",ue.center),Ot.setValue(W,"modelViewMatrix",ue.modelViewMatrix),Ot.setValue(W,"normalMatrix",ue.normalMatrix),Ot.setValue(W,"modelMatrix",ue.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const ei=ge.uniformsGroups;for(let Ui=0,ja=ei.length;Ui<ja;Ui++){const wl=ei[Ui];dt.update(wl,Fi),dt.bind(wl,Fi)}}return Fi}function Gu(q,le){q.ambientLightColor.needsUpdate=le,q.lightProbe.needsUpdate=le,q.directionalLights.needsUpdate=le,q.directionalLightShadows.needsUpdate=le,q.pointLights.needsUpdate=le,q.pointLightShadows.needsUpdate=le,q.spotLights.needsUpdate=le,q.spotLightShadows.needsUpdate=le,q.rectAreaLights.needsUpdate=le,q.hemisphereLights.needsUpdate=le}function $a(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(q,le,pe){Ie.get(q.texture).__webglTexture=le,Ie.get(q.depthTexture).__webglTexture=pe;const ge=Ie.get(q);ge.__hasExternalTextures=!0,ge.__autoAllocateDepthBuffer=pe===void 0,ge.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(q,le){const pe=Ie.get(q);pe.__webglFramebuffer=le,pe.__useDefaultFramebuffer=le===void 0},this.setRenderTarget=function(q,le=0,pe=0){S=q,M=le,x=pe;let ge=!0,ue=null,De=!1,Be=!1;if(q){const Xe=Ie.get(q);Xe.__useDefaultFramebuffer!==void 0?(Ee.bindFramebuffer(W.FRAMEBUFFER,null),ge=!1):Xe.__webglFramebuffer===void 0?Pe.setupRenderTarget(q):Xe.__hasExternalTextures&&Pe.rebindTextures(q,Ie.get(q.texture).__webglTexture,Ie.get(q.depthTexture).__webglTexture);const Ze=q.texture;(Ze.isData3DTexture||Ze.isDataArrayTexture||Ze.isCompressedArrayTexture)&&(Be=!0);const et=Ie.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(et[le])?ue=et[le][pe]:ue=et[le],De=!0):q.samples>0&&Pe.useMultisampledRTT(q)===!1?ue=Ie.get(q).__webglMultisampledFramebuffer:Array.isArray(et)?ue=et[pe]:ue=et,w.copy(q.viewport),C.copy(q.scissor),P=q.scissorTest}else w.copy(k).multiplyScalar(D).floor(),C.copy(I).multiplyScalar(D).floor(),P=U;if(Ee.bindFramebuffer(W.FRAMEBUFFER,ue)&&ge&&Ee.drawBuffers(q,ue),Ee.viewport(w),Ee.scissor(C),Ee.setScissorTest(P),De){const Xe=Ie.get(q.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+le,Xe.__webglTexture,pe)}else if(Be){const Xe=Ie.get(q.texture),Ze=le||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,Xe.__webglTexture,pe||0,Ze)}A=-1},this.readRenderTargetPixels=function(q,le,pe,ge,ue,De,Be){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=Ie.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&Be!==void 0&&(je=je[Be]),je){Ee.bindFramebuffer(W.FRAMEBUFFER,je);try{const Xe=q.texture,Ze=Xe.format,et=Xe.type;if(!Ae.textureFormatReadable(Ze)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ae.textureTypeReadable(et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=q.width-ge&&pe>=0&&pe<=q.height-ue&&W.readPixels(le,pe,ge,ue,qe.convert(Ze),qe.convert(et),De)}finally{const Xe=S!==null?Ie.get(S).__webglFramebuffer:null;Ee.bindFramebuffer(W.FRAMEBUFFER,Xe)}}},this.readRenderTargetPixelsAsync=async function(q,le,pe,ge,ue,De,Be){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let je=Ie.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&Be!==void 0&&(je=je[Be]),je){Ee.bindFramebuffer(W.FRAMEBUFFER,je);try{const Xe=q.texture,Ze=Xe.format,et=Xe.type;if(!Ae.textureFormatReadable(Ze))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ae.textureTypeReadable(et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(le>=0&&le<=q.width-ge&&pe>=0&&pe<=q.height-ue){const Qe=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,Qe),W.bufferData(W.PIXEL_PACK_BUFFER,De.byteLength,W.STREAM_READ),W.readPixels(le,pe,ge,ue,qe.convert(Ze),qe.convert(et),0),W.flush();const pt=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);await MA(W,pt,4);try{W.bindBuffer(W.PIXEL_PACK_BUFFER,Qe),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,De)}finally{W.deleteBuffer(Qe),W.deleteSync(pt)}return De}}finally{const Xe=S!==null?Ie.get(S).__webglFramebuffer:null;Ee.bindFramebuffer(W.FRAMEBUFFER,Xe)}}},this.copyFramebufferToTexture=function(q,le=null,pe=0){q.isTexture!==!0&&(Po("WebGLRenderer: copyFramebufferToTexture function signature has changed."),le=arguments[0]||null,q=arguments[1]);const ge=Math.pow(2,-pe),ue=Math.floor(q.image.width*ge),De=Math.floor(q.image.height*ge),Be=le!==null?le.x:0,je=le!==null?le.y:0;Pe.setTexture2D(q,0),W.copyTexSubImage2D(W.TEXTURE_2D,pe,0,0,Be,je,ue,De),Ee.unbindTexture()},this.copyTextureToTexture=function(q,le,pe=null,ge=null,ue=0){q.isTexture!==!0&&(Po("WebGLRenderer: copyTextureToTexture function signature has changed."),ge=arguments[0]||null,q=arguments[1],le=arguments[2],ue=arguments[3]||0,pe=null);let De,Be,je,Xe,Ze,et;pe!==null?(De=pe.max.x-pe.min.x,Be=pe.max.y-pe.min.y,je=pe.min.x,Xe=pe.min.y):(De=q.image.width,Be=q.image.height,je=0,Xe=0),ge!==null?(Ze=ge.x,et=ge.y):(Ze=0,et=0);const Qe=qe.convert(le.format),pt=qe.convert(le.type);Pe.setTexture2D(le,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,le.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,le.unpackAlignment);const Dt=W.getParameter(W.UNPACK_ROW_LENGTH),Ft=W.getParameter(W.UNPACK_IMAGE_HEIGHT),xi=W.getParameter(W.UNPACK_SKIP_PIXELS),vt=W.getParameter(W.UNPACK_SKIP_ROWS),Ke=W.getParameter(W.UNPACK_SKIP_IMAGES),Yt=q.isCompressedTexture?q.mipmaps[ue]:q.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,Yt.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Yt.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,je),W.pixelStorei(W.UNPACK_SKIP_ROWS,Xe),q.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,ue,Ze,et,De,Be,Qe,pt,Yt.data):q.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,ue,Ze,et,Yt.width,Yt.height,Qe,Yt.data):W.texSubImage2D(W.TEXTURE_2D,ue,Ze,et,De,Be,Qe,pt,Yt),W.pixelStorei(W.UNPACK_ROW_LENGTH,Dt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Ft),W.pixelStorei(W.UNPACK_SKIP_PIXELS,xi),W.pixelStorei(W.UNPACK_SKIP_ROWS,vt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Ke),ue===0&&le.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),Ee.unbindTexture()},this.copyTextureToTexture3D=function(q,le,pe=null,ge=null,ue=0){q.isTexture!==!0&&(Po("WebGLRenderer: copyTextureToTexture3D function signature has changed."),pe=arguments[0]||null,ge=arguments[1]||null,q=arguments[2],le=arguments[3],ue=arguments[4]||0);let De,Be,je,Xe,Ze,et,Qe,pt,Dt;const Ft=q.isCompressedTexture?q.mipmaps[ue]:q.image;pe!==null?(De=pe.max.x-pe.min.x,Be=pe.max.y-pe.min.y,je=pe.max.z-pe.min.z,Xe=pe.min.x,Ze=pe.min.y,et=pe.min.z):(De=Ft.width,Be=Ft.height,je=Ft.depth,Xe=0,Ze=0,et=0),ge!==null?(Qe=ge.x,pt=ge.y,Dt=ge.z):(Qe=0,pt=0,Dt=0);const xi=qe.convert(le.format),vt=qe.convert(le.type);let Ke;if(le.isData3DTexture)Pe.setTexture3D(le,0),Ke=W.TEXTURE_3D;else if(le.isDataArrayTexture||le.isCompressedArrayTexture)Pe.setTexture2DArray(le,0),Ke=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,le.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,le.unpackAlignment);const Yt=W.getParameter(W.UNPACK_ROW_LENGTH),yt=W.getParameter(W.UNPACK_IMAGE_HEIGHT),Fi=W.getParameter(W.UNPACK_SKIP_PIXELS),qn=W.getParameter(W.UNPACK_SKIP_ROWS),ui=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,Ft.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Ft.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Xe),W.pixelStorei(W.UNPACK_SKIP_ROWS,Ze),W.pixelStorei(W.UNPACK_SKIP_IMAGES,et),q.isDataTexture||q.isData3DTexture?W.texSubImage3D(Ke,ue,Qe,pt,Dt,De,Be,je,xi,vt,Ft.data):le.isCompressedArrayTexture?W.compressedTexSubImage3D(Ke,ue,Qe,pt,Dt,De,Be,je,xi,Ft.data):W.texSubImage3D(Ke,ue,Qe,pt,Dt,De,Be,je,xi,vt,Ft),W.pixelStorei(W.UNPACK_ROW_LENGTH,Yt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,yt),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Fi),W.pixelStorei(W.UNPACK_SKIP_ROWS,qn),W.pixelStorei(W.UNPACK_SKIP_IMAGES,ui),ue===0&&le.generateMipmaps&&W.generateMipmap(Ke),Ee.unbindTexture()},this.initRenderTarget=function(q){Ie.get(q).__webglFramebuffer===void 0&&Pe.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?Pe.setTextureCube(q,0):q.isData3DTexture?Pe.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?Pe.setTexture2DArray(q,0):Pe.setTexture2D(q,0),Ee.unbindTexture()},this.resetState=function(){M=0,x=0,S=null,Ee.reset(),at.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return us}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===ap?"display-p3":"srgb",t.unpackColorSpace=St.workingColorSpace===wu?"display-p3":"srgb"}}class vv extends Yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $n,this.environmentIntensity=1,this.environmentRotation=new $n,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}let FI=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let s=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let o=0,l=r-1,u;for(;o<=l;)if(s=Math.floor(o+(l-o)/2),u=n[s]-a,u<0)o=s+1;else if(u>0)l=s-1;else{l=s;break}if(s=l,n[s]===a)return s/(r-1);const c=n[s],h=n[s+1]-c,f=(a-c)/h;return(s+f)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),l=t||(a.isVector2?new gt:new me);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new me,s=[],r=[],a=[],o=new me,l=new Zt;for(let f=0;f<=e;f++){const p=f/e;s[f]=this.getTangentAt(p,new me)}r[0]=new me,a[0]=new me;let u=Number.MAX_VALUE;const c=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);c<=u&&(u=c,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),h<=u&&n.set(0,0,1),o.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(s[f-1],s[f]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(hi(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(o,p))}a[f].crossVectors(s[f],r[f])}if(t===!0){let f=Math.acos(hi(r[0].dot(r[e]),-1,1));f/=e,s[0].dot(o.crossVectors(r[0],r[e]))>0&&(f=-f);for(let p=1;p<=e;p++)r[p].applyMatrix4(l.makeRotationAxis(s[p],f*p)),a[p].crossVectors(s[p],r[p])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};function yv(i,e,t,n,s){const r=(n-e)*.5,a=(s-t)*.5,o=i*i,l=i*o;return(2*t-2*n+r+a)*l+(-3*t+3*n-2*r-a)*o+r*i+t}let UI=class extends FI{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new gt){const n=t,s=this.points,r=(s.length-1)*e,a=Math.floor(r),o=r-a,l=s[a===0?a:a-1],u=s[a],c=s[a>s.length-2?s.length-1:a+1],d=s[a>s.length-3?s.length-1:a+2];return n.set(yv(o,l.x,u.x,c.x,d.x),yv(o,l.y,u.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new gt().fromArray(s))}return this}};class Mu extends Ws{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let u=0;const c=[],d=new me,h=new me,f=[],p=[],g=[],v=[];for(let m=0;m<=n;m++){const b=[],_=m/n;let y=0;m===0&&a===0?y=.5/t:m===n&&l===Math.PI&&(y=-.5/t);for(let M=0;M<=t;M++){const x=M/t;d.x=-e*Math.cos(s+x*r)*Math.sin(a+_*o),d.y=e*Math.cos(a+_*o),d.z=e*Math.sin(s+x*r)*Math.sin(a+_*o),p.push(d.x,d.y,d.z),h.copy(d).normalize(),g.push(h.x,h.y,h.z),v.push(x+y,1-_),b.push(u++)}c.push(b)}for(let m=0;m<n;m++)for(let b=0;b<t;b++){const _=c[m][b+1],y=c[m][b],M=c[m+1][b],x=c[m+1][b+1];(m!==0||a>0)&&f.push(_,y,x),(m!==n-1||l<Math.PI)&&f.push(y,M,x)}this.setIndex(f),this.setAttribute("position",new Hn(p,3)),this.setAttribute("normal",new Hn(g,3)),this.setAttribute("uv",new Hn(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}const lf={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class zI{constructor(e,t,n){const s=this;let r=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){o++,r===!1&&s.onStart!==void 0&&s.onStart(c,a,o),r=!0},this.itemEnd=function(c){a++,s.onProgress!==void 0&&s.onProgress(c,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(c){s.onError!==void 0&&s.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=u.length;d<h;d+=2){const f=u[d],p=u[d+1];if(f.global&&(f.lastIndex=0),f.test(c))return p}return null}}}const BI=new zI;let hp=class{constructor(e){this.manager=e!==void 0?e:BI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};hp.DEFAULT_MATERIAL_NAME="__DEFAULT";const bv=new Zt;class HI{constructor(e,t,n=0,s=1/0){this.ray=new Dy(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new cp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return bv.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(bv),this}intersectObject(e,t=!0,n=[]){return cf(e,this,n,t),n.sort(_v),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)cf(e[s],this,n,t);return n.sort(_v),n}}function _v(i,e){return i.distance-e.distance}function cf(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,o=r.length;a<o;a++)cf(r[a],e,t,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Jf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Jf);/*!
 * Photo Sphere Viewer 5.10.0
 * @copyright 2014-2015 Jrmy Heleine
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var VI=Object.defineProperty,fp=(i,e)=>{for(var t in e)VI(i,t,{get:e[t],enumerable:!0})},eu={};fp(eu,{ACTIONS:()=>Jy,ANIMATION_MIN_DURATION:()=>uf,CAPTURE_EVENTS_CLASS:()=>cl,CTRLZOOM_TIMEOUT:()=>Qy,DBLCLICK_DELAY:()=>Yy,DEFAULT_TRANSITION:()=>Xy,EASINGS:()=>Rc,ICONS:()=>xn,IDS:()=>fi,INERTIA_WINDOW:()=>df,KEY_CODES:()=>ri,LONGTOUCH_DELAY:()=>Ky,MOVE_THRESHOLD:()=>qy,SPHERE_RADIUS:()=>Ha,TWOFINGERSOVERLAY_DELAY:()=>Zy,VIEWER_DATA:()=>$s});var $I=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g><!-- Created by Flatart from the Noun Project --></svg>
`,GI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',WI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/><!--Created by Michael Zenaty from the Noun Project--></svg>
`,jI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,XI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,qI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/><!--Created by Arafat Uddin from the Noun Project--></svg>
`,YI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g><!-- Created by Richard Kunk from the Noun Project--></svg>
`,KI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,ZI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,Xy=1500,uf=500,qy=4,Yy=300,Ky=500,Zy=100,Qy=2e3,df=300,Ha=10,$s="photoSphereViewer",cl="psv--capture-event",Jy=(i=>(i.ROTATE_UP="ROTATE_UP",i.ROTATE_DOWN="ROTATE_DOWN",i.ROTATE_RIGHT="ROTATE_RIGHT",i.ROTATE_LEFT="ROTATE_LEFT",i.ZOOM_IN="ZOOM_IN",i.ZOOM_OUT="ZOOM_OUT",i))(Jy||{}),fi={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},ri={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},xn={arrow:$I,close:GI,download:WI,fullscreenIn:jI,fullscreenOut:XI,info:qI,menu:YI,zoomIn:KI,zoomOut:ZI},Rc={linear:i=>i,inQuad:i=>i*i,outQuad:i=>i*(2-i),inOutQuad:i=>i<.5?2*i*i:-1+(4-2*i)*i,inCubic:i=>i*i*i,outCubic:i=>--i*i*i+1,inOutCubic:i=>i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,inQuart:i=>i*i*i*i,outQuart:i=>1- --i*i*i*i,inOutQuart:i=>i<.5?8*i*i*i*i:1-8*--i*i*i*i,inQuint:i=>i*i*i*i*i,outQuint:i=>1+--i*i*i*i*i,inOutQuint:i=>i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i,inSine:i=>1-Math.cos(i*(Math.PI/2)),outSine:i=>Math.sin(i*(Math.PI/2)),inOutSine:i=>.5-.5*Math.cos(Math.PI*i),inExpo:i=>Math.pow(2,10*(i-1)),outExpo:i=>1-Math.pow(2,-10*i),inOutExpo:i=>(i=i*2-1)<0?.5*Math.pow(2,10*i):1-.5*Math.pow(2,-10*i),inCirc:i=>1-Math.sqrt(1-i*i),outCirc:i=>Math.sqrt(1-(i-1)*(i-1)),inOutCirc:i=>(i*=2)<1?.5-.5*Math.sqrt(1-i*i):.5+.5*Math.sqrt(1-(i-=2)*i)},Bt={};fp(Bt,{Animation:()=>qo,Dynamic:()=>xo,MultiDynamic:()=>bb,PressHandler:()=>Ru,Slider:()=>wb,SliderDirection:()=>_b,addClasses:()=>mp,angle:()=>eb,applyEulerInverse:()=>gf,checkClosedShadowDom:()=>yb,checkStylesheet:()=>vb,checkVersion:()=>wp,cleanCssPosition:()=>mb,clone:()=>Au,createTexture:()=>mf,cssPositionIsOrdered:()=>_p,dasherize:()=>iO,deepEqual:()=>hb,deepmerge:()=>ub,distance:()=>pp,exitFullscreen:()=>cb,firstNonNull:()=>An,getAbortError:()=>ff,getAngle:()=>ib,getClosest:()=>sb,getConfigParser:()=>Lu,getElement:()=>nb,getEventTarget:()=>tu,getMatchingTarget:()=>rb,getPosition:()=>ab,getShortestArc:()=>tb,getStyleProperty:()=>Un,getTouchData:()=>hf,getXMPValue:()=>$i,greatArcDistance:()=>JI,hasParent:()=>tO,invertResolvableBoolean:()=>Pu,isAbortError:()=>pb,isEmpty:()=>db,isExtendedPosition:()=>bp,isFullscreenEnabled:()=>ob,isNil:()=>oi,isPlainObject:()=>vp,logWarn:()=>Ht,parseAngle:()=>In,parsePoint:()=>nO,parseSpeed:()=>gb,removeClasses:()=>eO,requestFullscreen:()=>lb,resolveBoolean:()=>yp,speedToDuration:()=>pf,sum:()=>QI,throttle:()=>gp,toggleClass:()=>Cu,wrap:()=>Lo});function Lo(i,e){let t=i%e;return t<0&&(t+=e),t}function QI(i){return i.reduce((e,t)=>e+t,0)}function pp(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function eb(i,e){return Math.atan2(e.y-i.y,e.x-i.x)}function tb(i,e){return[0,Math.PI*2,-Math.PI*2].reduce((n,s)=>{const r=e-i+s;return Math.abs(r)<Math.abs(n)?r:n},1/0)}function ib(i,e){return Math.acos(Math.cos(i.pitch)*Math.cos(e.pitch)*Math.cos(i.yaw-e.yaw)+Math.sin(i.pitch)*Math.sin(e.pitch))}function JI([i,e],[t,n]){i-t>Math.PI?i-=2*Math.PI:i-t<-Math.PI&&(i+=2*Math.PI);const s=(t-i)*Math.cos((e+n)/2),r=n-e;return Math.sqrt(s*s+r*r)}function nb(i){return typeof i=="string"?i.match(/^[a-z]/i)?document.getElementById(i):document.querySelector(i):i}function Cu(i,e,t){t===void 0?i.classList.toggle(e):t?i.classList.add(e):t||i.classList.remove(e)}function mp(i,e){i.classList.add(...e.split(" ").filter(t=>!!t))}function eO(i,e){i.classList.remove(...e.split(" ").filter(t=>!!t))}function tO(i,e){let t=i;do{if(t===e)return!0;t=t.parentElement}while(t);return!1}function sb(i,e){if(!(i!=null&&i.matches))return null;let t=i;do{if(t.matches(e))return t;t=t.parentElement}while(t);return null}function tu(i){return(i==null?void 0:i.composedPath()[0])||null}function rb(i,e){return i?i.composedPath().find(t=>!(t instanceof HTMLElement)&&!(t instanceof SVGElement)?!1:t.matches(e)):null}function ab(i){let e=0,t=0,n=i;for(;n;)e+=n.offsetLeft-n.scrollLeft+n.clientLeft,t+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return e-=window.scrollX,t-=window.scrollY,{x:e,y:t}}function Un(i,e){return window.getComputedStyle(i).getPropertyValue(e)}function hf(i){if(i.touches.length<2)return null;const e={x:i.touches[0].clientX,y:i.touches[0].clientY},t={x:i.touches[1].clientX,y:i.touches[1].clientY};return{distance:pp(e,t),angle:eb(e,t),center:{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}}var iu;function ob(i,e=!1){return e?i===iu:document.fullscreenElement===i}function lb(i,e=!1){e?(iu=i,i.classList.add("psv-fullscreen-emulation"),document.dispatchEvent(new Event("fullscreenchange"))):i.requestFullscreen()}function cb(i=!1){i?(iu.classList.remove("psv-fullscreen-emulation"),iu=null,document.dispatchEvent(new Event("fullscreenchange"))):document.exitFullscreen()}function iO(i){return i.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,(e,t)=>(t>0?"-":"")+e.toLowerCase())}function gp(i,e){let t=!1;return function(...n){t||(t=!0,setTimeout(()=>{i.apply(this,n),t=!1},e))}}function vp(i){if(typeof i!="object"||i===null||Object.prototype.toString.call(i)!=="[object Object]")return!1;if(Object.getPrototypeOf(i)===null)return!0;let e=i;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function ub(i,e){const t=e;return function n(s,r){return Array.isArray(r)?(!s||!Array.isArray(s)?s=[]:s.length=0,r.forEach((a,o)=>{s[o]=n(null,a)})):typeof r=="object"?((!s||Array.isArray(s))&&(s={}),Object.keys(r).forEach(a=>{typeof r[a]!="object"||!r[a]||!vp(r[a])?s[a]=r[a]:r[a]!==t&&(s[a]?n(s[a],r[a]):s[a]=n(null,r[a]))})):s=r,s}(i,e)}function Au(i){return ub(null,i)}function db(i){return!i||Object.keys(i).length===0&&i.constructor===Object}function oi(i){return i==null}function An(...i){for(const e of i)if(!oi(e))return e;return null}function hb(i,e){if(i===e)return!0;if(wv(i)&&wv(e)){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t of Object.keys(i))if(!hb(i[t],e[t]))return!1;return!0}else return!1}function wv(i){return typeof i=="object"&&i!==null}var ft=class fb extends Error{constructor(e,t){var n;super(t&&t instanceof Error?`${e}: ${t.message}`:e),this.name="PSVError",(n=Error.captureStackTrace)==null||n.call(Error,this,fb)}};function yp(i,e){vp(i)?(e(i.initial,!0),i.promise.then(t=>e(t,!1))):e(i,!0)}function Pu(i){return{initial:!i.initial,promise:i.promise.then(e=>!e)}}function ff(){const i=new Error("Loading was aborted.");return i.name="AbortError",i}function pb(i){return(i==null?void 0:i.name)==="AbortError"}function Ht(i){console.warn(`PhotoSphereViewer: ${i}`)}function bp(i){return!i||Array.isArray(i)?!1:[["textureX","textureY"],["yaw","pitch"]].some(([e,t])=>i[e]!==void 0&&i[t]!==void 0)}function $i(i,e,t=!0){let n=i.match("<GPano:"+e+">(.*)</GPano:"+e+">");if(n!==null){const s=t?parseInt(n[1],10):parseFloat(n[1]);return isNaN(s)?null:s}if(n=i.match("GPano:"+e+'="(.*?)"'),n!==null){const s=t?parseInt(n[1],10):parseFloat(n[1]);return isNaN(s)?null:s}return null}var Ev={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},nu=["left","center","right"],su=["top","center","bottom"],xv=[...nu,...su],sn="center";function nO(i){if(!i)return{x:.5,y:.5};if(typeof i=="object")return i;let e=i.toLocaleLowerCase().split(" ").slice(0,2);e.length===1&&(Ev[e[0]]?e=[e[0],sn]:e=[e[0],e[0]]);const t=e[1]!=="left"&&e[1]!=="right"&&e[0]!=="top"&&e[0]!=="bottom";e=e.map(s=>Ev[s]||s),t||e.reverse();const n=e.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return n?{x:parseFloat(n[1])/100,y:parseFloat(n[2])/100}:{x:.5,y:.5}}function mb(i,{allowCenter:e,cssOrder:t}={allowCenter:!0,cssOrder:!0}){return i?(typeof i=="string"&&(i=i.split(" ")),i.length===1&&(i[0]===sn?i=[sn,sn]:nu.indexOf(i[0])!==-1?i=[sn,i[0]]:su.indexOf(i[0])!==-1&&(i=[i[0],sn])),i.length!==2||xv.indexOf(i[0])===-1||xv.indexOf(i[1])===-1?(Ht(`Unparsable position ${i}`),null):!e&&i[0]===sn&&i[1]===sn?(Ht("Invalid position center center"),null):(t&&!_p(i)&&(i=[i[1],i[0]]),i[1]===sn&&nu.indexOf(i[0])!==-1&&(i=[sn,i[0]]),i[0]===sn&&su.indexOf(i[1])!==-1&&(i=[i[1],sn]),i)):null}function _p(i){return su.indexOf(i[0])!==-1&&nu.indexOf(i[1])!==-1}function gb(i){let e;if(typeof i=="string"){const t=i.toString().trim();let n=parseFloat(t.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1"));const s=t.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(s.match(/(pm|per minute)$/)&&(n/=60),s){case"dpm":case"degrees per minute":case"dps":case"degrees per second":e=$t.degToRad(n);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":e=n;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":e=n*Math.PI*2;break;default:throw new ft(`Unknown speed unit "${s}"`)}}else e=i;return e}function pf(i,e){if(typeof i!="number"){const t=gb(i);return e/Math.abs(t)*1e3}else return Math.abs(i)}function In(i,e=!1,t=e){let n;if(typeof i=="string"){const s=i.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!s)throw new ft(`Unknown angle "${i}"`);const r=parseFloat(s[1]),a=s[2];if(a)switch(a){case"deg":case"degs":n=$t.degToRad(r);break;case"rad":case"rads":n=r;break;default:throw new ft(`Unknown angle unit "${a}"`)}else n=r}else if(typeof i=="number"&&!isNaN(i))n=i;else throw new ft(`Unknown angle "${i}"`);return n=Lo(e?n+Math.PI:n,Math.PI*2),e?$t.clamp(n-Math.PI,-Math.PI/(t?2:1),Math.PI/(t?2:1)):n}function mf(i,e=!1){const t=new Pi(i);return t.needsUpdate=!0,t.minFilter=e?Is:on,t.generateMipmaps=e,t.anisotropy=e?2:1,t}var Sv=new Ua;function gf(i,e){Sv.setFromEuler(e).invert(),i.applyQuaternion(Sv)}function Lu(i,e){const t=function(n){const s=Au({...i,...n}),r={};for(let[a,o]of Object.entries(s)){if(e&&a in e)o=e[a](o,{rawConfig:s,defValue:i[a]});else if(!(a in i)){Ht(`Unknown option ${a}`);continue}r[a]=o}return r};return t.defaults=i,t.parsers=e||{},t}function vb(i,e){Un(i,`--psv-${e}-loaded`)!=="true"&&console.error(`PhotoSphereViewer: stylesheet "@photo-sphere-viewer/${e}/index.css" is not loaded`)}function wp(i,e,t){e&&e!==t&&console.error(`PhotoSphereViewer: @photo-sphere-viewer/${i} is in version ${e} but @photo-sphere-viewer/core is in version ${t}`)}function yb(i){do{if(i instanceof ShadowRoot&&i.mode==="closed"){console.error("PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected");return}i=i.parentNode}while(i)}var qo=class{constructor(i){this.easing=Rc.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=i,i?(i.easing&&(this.easing=typeof i.easing=="function"?i.easing:Rc[i.easing]||Rc.linear),this.delayTimeout=setTimeout(()=>{this.delayTimeout=void 0,this.animationFrame=window.requestAnimationFrame(e=>this.__run(e))},i.delay||0)):this.resolved=!0}__run(i){if(this.cancelled)return;this.start||(this.start=i);const e=(i-this.start)/this.options.duration,t={};if(e<1){for(const[n,s]of Object.entries(this.options.properties))if(s){const r=s.start+(s.end-s.start)*this.easing(e);t[n]=r}this.options.onTick(t,e),this.animationFrame=window.requestAnimationFrame(n=>this.__run(n))}else{for(const[n,s]of Object.entries(this.options.properties))s&&(t[n]=s.end);this.options.onTick(t,1),this.__resolve(!0),this.animationFrame=void 0}}__resolve(i){i?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach(e=>e(i)),this.callbacks.length=0}then(i){return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(i):new Promise(e=>{this.callbacks.push(e)}).then(i)}cancel(){!this.cancelled&&!this.resolved&&(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}},xo=class{constructor(i,e){if(this.fn=i,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=e.min,this.max=e.max,this.wrap=e.wrap,this.current=e.defaultValue,this.wrap&&this.min!==0)throw new ft("invalid config");this.fn&&this.fn(this.current)}get current(){return this.__current}set current(i){this.__current=i}setSpeed(i){this.speed=i}goto(i,e=1){this.mode=2,this.target=this.wrap?Lo(i,this.max):$t.clamp(i,this.min,this.max),this.speedMult=e}step(i,e=1){e===0?this.setValue(this.current+i):(this.mode!==2&&(this.target=this.current),this.goto(this.target+i,e))}roll(i=!1,e=1){this.mode=1,this.target=i?-1/0:1/0,this.speedMult=e}stop(){this.mode=0}setValue(i){return this.target=this.wrap?Lo(i,this.max):$t.clamp(i,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current?(this.current=this.target,this.fn&&this.fn(this.current),!0):!1}update(i){if(this.mode===2){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);const n=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=n&&(this.mode=0)}let e=this.mode===0?0:this.speed*this.speedMult;this.target<this.current&&(e=-e),this.currentSpeed<e?this.currentSpeed=Math.min(e,this.currentSpeed+i/1e3*this.speed*this.speedMult*2):this.currentSpeed>e&&(this.currentSpeed=Math.max(e,this.currentSpeed-i/1e3*this.speed*this.speedMult*2));let t=null;return this.current>this.target&&this.currentSpeed?t=Math.max(this.target,this.current+this.currentSpeed*i/1e3):this.current<this.target&&this.currentSpeed&&(t=Math.min(this.target,this.current+this.currentSpeed*i/1e3)),t!==null&&(t=this.wrap?Lo(t,this.max):$t.clamp(t,this.min,this.max),t!==this.current)?(this.current=t,this.fn&&this.fn(this.current),!0):!1}},bb=class{constructor(i,e){this.fn=i,this.dynamics=e,this.fn&&this.fn(this.current)}get current(){return Object.entries(this.dynamics).reduce((i,[e,t])=>(i[e]=t.current,i),{})}setSpeed(i){for(const e of Object.values(this.dynamics))e.setSpeed(i)}goto(i,e=1){for(const[t,n]of Object.entries(i))this.dynamics[t].goto(n,e)}step(i,e=1){if(e===0)this.setValue(Object.keys(i).reduce((t,n)=>(t[n]=i[n]+this.dynamics[n].current,t),{}));else for(const[t,n]of Object.entries(i))this.dynamics[t].step(n,e)}roll(i,e=1){for(const[t,n]of Object.entries(i))this.dynamics[t].roll(n,e)}stop(){for(const i of Object.values(this.dynamics))i.stop()}setValue(i){let e=!1;for(const[t,n]of Object.entries(i))e=this.dynamics[t].setValue(n)||e;return e&&this.fn&&this.fn(this.current),e}update(i){let e=!1;for(const t of Object.values(this.dynamics))e=t.update(i)||e;return e&&this.fn&&this.fn(this.current),e}},Ru=class{constructor(i=200){this.delay=i,this.time=0,this.delay=i}get pending(){return this.time!==0}down(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=new Date().getTime()}up(i){if(!this.time)return;Date.now()-this.time<this.delay?this.timeout=setTimeout(()=>{i(),this.timeout=void 0,this.time=0},this.delay):(i(),this.time=0)}},_b=(i=>(i.VERTICAL="VERTICAL",i.HORIZONTAL="HORIZONTAL",i))(_b||{}),wb=class{constructor(i,e,t){this.container=i,this.direction=e,this.listener=t,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}get isVertical(){return this.direction==="VERTICAL"}get isHorizontal(){return this.direction==="HORIZONTAL"}destroy(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}handleEvent(i){switch(i.type){case"click":i.stopPropagation();break;case"mousedown":this.__onMouseDown(i);break;case"mouseenter":this.__onMouseEnter(i);break;case"mouseleave":this.__onMouseLeave(i);break;case"touchstart":this.__onTouchStart(i);break;case"mousemove":this.__onMouseMove(i);break;case"touchmove":this.__onTouchMove(i);break;case"mouseup":this.__onMouseUp(i);break;case"touchend":this.__onTouchEnd(i);break}}__onMouseDown(i){this.mousedown=!0,this.__update(i.clientX,i.clientY,!0)}__onMouseEnter(i){this.mouseover=!0,this.__update(i.clientX,i.clientY,!0)}__onTouchStart(i){this.mouseover=!0,this.mousedown=!0;const e=i.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}__onMouseMove(i){(this.mousedown||this.mouseover)&&(i.stopPropagation(),this.__update(i.clientX,i.clientY,!0))}__onTouchMove(i){if(this.mousedown||this.mouseover){i.stopPropagation();const e=i.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}}__onMouseUp(i){this.mousedown&&(this.mousedown=!1,this.__update(i.clientX,i.clientY,!1))}__onMouseLeave(i){this.mouseover&&(this.mouseover=!1,this.__update(i.clientX,i.clientY,!0))}__onTouchEnd(i){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;const e=i.changedTouches[0];this.__update(e.clientX,e.clientY,!1)}}__update(i,e,t){const n=this.container.getBoundingClientRect(),s=this.isVertical?e:i,r=n[this.isVertical?"bottom":"left"],a=n[this.isVertical?"height":"width"],o=Math.abs((r-s)/a);this.listener({value:o,click:!t,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:i,clientY:e}})}},di={};fp(di,{BeforeAnimateEvent:()=>Ep,BeforeRenderEvent:()=>Cb,BeforeRotateEvent:()=>Lb,ClickEvent:()=>Ob,ConfigChangedEvent:()=>Ni,DoubleClickEvent:()=>Ub,FullscreenEvent:()=>Ro,HideNotificationEvent:()=>Io,HideOverlayEvent:()=>Wb,HidePanelEvent:()=>ks,HideTooltipEvent:()=>Kb,KeypressEvent:()=>Ns,LoadProgressEvent:()=>t_,ObjectEnterEvent:()=>U_,ObjectEvent:()=>Ou,ObjectHoverEvent:()=>$_,ObjectLeaveEvent:()=>yf,PanoramaErrorEvent:()=>c_,PanoramaLoadEvent:()=>s_,PanoramaLoadedEvent:()=>vf,PositionUpdatedEvent:()=>Oo,ReadyEvent:()=>ko,RenderEvent:()=>y_,RollUpdatedEvent:()=>Do,ShowNotificationEvent:()=>No,ShowOverlayEvent:()=>x_,ShowPanelEvent:()=>Fs,ShowTooltipEvent:()=>A_,SizeUpdatedEvent:()=>Fo,StopAllEvent:()=>O_,ViewerEvent:()=>Ct,ZoomUpdatedEvent:()=>ds});var Iu=class extends Event{constructor(i,e=!1){super(i,{cancelable:e})}},Eb=class extends EventTarget{dispatchEvent(i){return super.dispatchEvent(i)}addEventListener(i,e,t){super.addEventListener(i,e,t)}removeEventListener(i,e,t){super.removeEventListener(i,e,t)}},Ct=class extends Iu{},xb=class Sb extends Ct{constructor(e,t){super(Sb.type,!0),this.position=e,this.zoomLevel=t}};xb.type="before-animate";var Ep=xb,Tb=class Mb extends Ct{constructor(e,t){super(Mb.type),this.timestamp=e,this.elapsed=t}};Tb.type="before-render";var Cb=Tb,Ab=class Pb extends Ct{constructor(e){super(Pb.type,!0),this.position=e}};Ab.type="before-rotate";var Lb=Ab,Rb=class Ib extends Ct{constructor(e){super(Ib.type),this.data=e}};Rb.type="click";var Ob=Rb,Db=class kb extends Ct{constructor(e){super(kb.type),this.options=e}containsOptions(...e){return e.some(t=>this.options.includes(t))}};Db.type="config-changed";var Ni=Db,Nb=class Fb extends Ct{constructor(e){super(Fb.type),this.data=e}};Nb.type="dblclick";var Ub=Nb,zb=class Bb extends Ct{constructor(e){super(Bb.type),this.fullscreenEnabled=e}};zb.type="fullscreen";var Ro=zb,Hb=class Vb extends Ct{constructor(e){super(Vb.type),this.notificationId=e}};Hb.type="hide-notification";var Io=Hb,$b=class Gb extends Ct{constructor(e){super(Gb.type),this.overlayId=e}};$b.type="hide-overlay";var Wb=$b,jb=class Xb extends Ct{constructor(e){super(Xb.type),this.panelId=e}};jb.type="hide-panel";var ks=jb,qb=class Yb extends Ct{constructor(e){super(Yb.type),this.tooltipData=e}};qb.type="hide-tooltip";var Kb=qb,Zb=class Qb extends Ct{constructor(e){super(Qb.type,!0),this.key=e}};Zb.type="key-press";var Ns=Zb,Jb=class e_ extends Ct{constructor(e){super(e_.type),this.progress=e}};Jb.type="load-progress";var t_=Jb,i_=class n_ extends Ct{constructor(e){super(n_.type),this.panorama=e}};i_.type="panorama-load";var s_=i_,r_=class a_ extends Ct{constructor(e){super(a_.type),this.data=e}};r_.type="panorama-loaded";var vf=r_,o_=class l_ extends Ct{constructor(e,t){super(l_.type),this.panorama=e,this.error=t}};o_.type="panorama-error";var c_=o_,u_=class d_ extends Ct{constructor(e){super(d_.type),this.position=e}};u_.type="position-updated";var Oo=u_,h_=class f_ extends Ct{constructor(e){super(f_.type),this.roll=e}};h_.type="roll-updated";var Do=h_,p_=class m_ extends Ct{constructor(){super(m_.type)}};p_.type="ready";var ko=p_,g_=class v_ extends Ct{constructor(){super(v_.type)}};g_.type="render";var y_=g_,b_=class __ extends Ct{constructor(e){super(__.type),this.notificationId=e}};b_.type="show-notification";var No=b_,w_=class E_ extends Ct{constructor(e){super(E_.type),this.overlayId=e}};w_.type="show-overlay";var x_=w_,S_=class T_ extends Ct{constructor(e){super(T_.type),this.panelId=e}};S_.type="show-panel";var Fs=S_,M_=class C_ extends Ct{constructor(e,t){super(C_.type),this.tooltip=e,this.tooltipData=t}};M_.type="show-tooltip";var A_=M_,P_=class L_ extends Ct{constructor(e){super(L_.type),this.size=e}};P_.type="size-updated";var Fo=P_,R_=class I_ extends Ct{constructor(){super(I_.type)}};R_.type="stop-all";var O_=R_,D_=class k_ extends Ct{constructor(e){super(k_.type),this.zoomLevel=e}};D_.type="zoom-updated";var ds=D_,Ou=class extends Ct{constructor(i,e,t,n,s){super(i),this.originalEvent=e,this.object=t,this.viewerPoint=n,this.userDataKey=s}},N_=class F_ extends Ou{constructor(e,t,n,s){super(F_.type,e,t,n,s)}};N_.type="enter-object";var U_=N_,z_=class B_ extends Ou{constructor(e,t,n,s){super(B_.type,e,t,n,s)}};z_.type="leave-object";var yf=z_,H_=class V_ extends Ou{constructor(e,t,n,s){super(V_.type,e,t,n,s)}};H_.type="hover-object";var $_=H_,xp=class{constructor(i){this.viewer=i}init(){}destroy(){}supportsTransition(i){return!1}supportsPreload(i){return!1}textureCoordsToSphericalCoords(i,e){throw new ft("Current adapter does not support texture coordinates.")}sphericalCoordsToTextureCoords(i,e){throw new ft("Current adapter does not support texture coordinates.")}};xp.supportsDownload=!1;function Tv(i){if(i){for(const[,e]of[["_",i],...Object.entries(i)])if(e.prototype instanceof xp)return wp(e.id,e.VERSION,"5.10.0"),e}return null}var vo=`${$s}_touchSupport`,pi={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,__maxCanvasWidth:null,isIphone:!1,get maxCanvasWidth(){return this.__maxCanvasWidth===null&&(this.__maxCanvasWidth=aO(this.maxTextureWidth)),this.__maxCanvasWidth},load(){if(!this.loaded){const i=sO();this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=!!i,this.maxTextureWidth=i?i.getParameter(i.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=rO(),this.isIphone=/iPhone/i.test(navigator.userAgent),this.loaded=!0}if(!pi.isWebGLSupported)throw new ft("WebGL 2 is not supported.");if(pi.maxTextureWidth===0)throw new ft("Unable to detect system capabilities")}};function sO(){try{return document.createElement("canvas").getContext("webgl2")}catch{return null}}function rO(){let i="ontouchstart"in window||navigator.maxTouchPoints>0;vo in localStorage&&(i=localStorage[vo]==="true");const e=new Promise(t=>{const n=()=>{window.removeEventListener("mousedown",s),window.removeEventListener("touchstart",r),clearTimeout(o)},s=()=>{n(),localStorage[vo]=!1,t(!1)},r=()=>{n(),localStorage[vo]=!0,t(!0)},a=()=>{n(),localStorage[vo]=i,t(i)};window.addEventListener("mousedown",s,!1),window.addEventListener("touchstart",r,!1);const o=setTimeout(a,1e4)});return{initial:i,promise:e}}function aO(i){let e=i,t=!1;for(;e>1024&&!t;){const n=document.createElement("canvas"),s=n.getContext("2d");n.width=e,n.height=e/2,s.fillStyle="white",s.fillRect(0,0,1,1);try{s.getImageData(0,0,1,1).data[0]>0&&(t=!0)}catch{}n.width=0,n.height=0,t||(e/=2)}if(t)return e;throw new ft("Unable to detect system capabilities")}function oO(){self.onmessage=r=>{const a=r.data.panoData,o=new OffscreenCanvas(a.fullWidth,a.fullHeight),l=o.getContext("2d",{willReadFrequently:!0}),u=new OffscreenCanvas(a.croppedWidth,a.croppedHeight);u.getContext("2d").putImageData(r.data.image,0,0),i(o,u,a),postMessage(l.getImageData(0,0,o.width,o.height))};function i(r,a,o){const l=o.fullHeight-o.croppedHeight-o.croppedY,u=o.fullWidth-o.croppedWidth-o.croppedX,c=o.croppedY+o.croppedHeight/2,d=r.width/32,h=d,f=10,p=`blur(${d}px)`,g=r.getContext("2d");if(g.drawImage(a,o.croppedX,o.croppedY,o.croppedWidth,o.croppedHeight),o.croppedY>0){if(o.croppedX>0||u>0){g.filter="none";const v=s(g,o.croppedX,o.croppedY,f,f,2),m=s(g,r.width-u-11,o.croppedY,f,f,2),b=t(v,m);o.croppedX>0&&(g.fillStyle=n(g,0,o.croppedX,b,v),g.fillRect(-h,-h,o.croppedX+h*2,c+h)),u>0&&(g.fillStyle=n(g,r.width-u,r.width,m,b),g.fillRect(r.width-u-h,-h,u+h*2,c+h))}g.filter=p,g.drawImage(a,0,0,a.width,f,o.croppedX,-h,o.croppedWidth,o.croppedY+h*2),g.fillStyle=e(s(g,0,0,r.width,f,f)),g.fillRect(-h,-h,r.width+h*2,h*2)}if(l>0){if(o.croppedX>0||u>0){g.filter="none";const v=s(g,o.croppedX,r.height-l-1-f,f,f,2),m=s(g,r.width-u-1-f,r.height-l-1-f,f,f,2),b=t(v,m);o.croppedX>0&&(g.fillStyle=n(g,0,o.croppedX,b,v),g.fillRect(-h,c,o.croppedX+h*2,r.height-c+h)),u>0&&(g.fillStyle=n(g,r.width-u,r.width,m,b),g.fillRect(r.width-u-h,c,u+h*2,r.height-c+h))}g.filter=p,g.drawImage(a,0,a.height-f,a.width,f,o.croppedX,r.height-l-h,o.croppedWidth,l+h*2),g.fillStyle=e(s(g,0,r.height-1-f,r.width,f,f)),g.fillRect(-h,r.height-h,r.width+h*2,h*2)}o.croppedX>0&&(g.filter=p,g.drawImage(a,a.width-f,0,f,a.height,-h,o.croppedY,h*2,o.croppedHeight),g.drawImage(a,0,0,f,a.height,0,o.croppedY,o.croppedX+h,o.croppedHeight)),u>0&&(g.filter=p,g.drawImage(a,0,0,f,a.height,r.width-h,o.croppedY,h*2,o.croppedHeight),g.drawImage(a,a.width-f,0,f,a.height,r.width-u-h,o.croppedY,u+h,o.croppedHeight)),g.filter="none",g.drawImage(a,o.croppedX,o.croppedY,o.croppedWidth,o.croppedHeight)}function e(r){return`rgb(${r.r}, ${r.g}, ${r.b})`}function t(r,a){return{r:Math.round(r.r/2+a.r/2),g:Math.round(r.g/2+a.g/2),b:Math.round(r.b/2+a.b/2)}}function n(r,a,o,l,u){const c=r.createLinearGradient(a,0,o,0);return c.addColorStop(0,e(l)),c.addColorStop(1,e(u)),c}function s(r,a,o,l,u,c){c=Math.round(c);let d=0,h=0,f=0,p=0;const g=r.getImageData(a,o,l,u);for(let v=0;v<u;v+=c)for(let m=0;m<l;m+=c){const b=4*(v*l+m);d+=g.data[b],h+=g.data[b+1],f+=g.data[b+2],p++}return d=Math.round(d/p),h=Math.round(h/p),f=Math.round(f/p),{r:d,g:h,b:f}}}var lO=URL.createObjectURL(new Blob(["(",oO.toString(),")()"],{type:"application/javascript"})),cO=Lu({backgroundColor:"#000",interpolateBackground:!1,resolution:64,useXmpData:!0,blur:!1},{resolution:i=>{if(!i||!$t.isPowerOfTwo(i))throw new ft("EquirectangularAdapter resolution must be power of two");return i}}),ul=class extends xp{constructor(i,e){super(i),this.config=cO(e),this.config.interpolateBackground&&(window.Worker?this.interpolationWorker=new Worker(lO,{name:"photo-sphere-viewer-interpolation"}):(Ht("Web Worker API not available"),this.config.interpolateBackground=!1)),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2}supportsTransition(){return!0}supportsPreload(){return!0}destroy(){var i;(i=this.interpolationWorker)==null||i.terminate(),super.destroy()}textureCoordsToSphericalCoords(i,e){if(oi(i.textureX)||oi(i.textureY))throw new ft("Texture position is missing 'textureX' or 'textureY'");const t=(i.textureX+e.croppedX)/e.fullWidth*Math.PI*2,n=(i.textureY+e.croppedY)/e.fullHeight*Math.PI;return{yaw:t>=Math.PI?t-Math.PI:t+Math.PI,pitch:Math.PI/2-n}}sphericalCoordsToTextureCoords(i,e){const t=i.yaw/Math.PI/2*e.fullWidth,n=i.pitch/Math.PI*e.fullHeight;return{textureX:Math.round(i.yaw<Math.PI?t+e.fullWidth/2:t-e.fullWidth/2)-e.croppedX,textureY:Math.round(e.fullHeight/2-n)-e.croppedY}}async loadTexture(i,e=!0,t,n=this.config.useXmpData){if(typeof i!="string")return Promise.reject(new ft("Invalid panorama url, are you using the right adapter?"));const s=await this.viewer.textureLoader.loadFile(i,e?u=>this.viewer.loader.setProgress(u):null,i),r=n?await this.loadXMP(s):null,a=await this.viewer.textureLoader.blobToImage(s);typeof t=="function"&&(t=t(a,r)),!t&&!r&&(t=this.__defaultPanoData(a));const o={isEquirectangular:!0,fullWidth:An(t==null?void 0:t.fullWidth,r==null?void 0:r.fullWidth,a.width),fullHeight:An(t==null?void 0:t.fullHeight,r==null?void 0:r.fullHeight,a.height),croppedWidth:An(t==null?void 0:t.croppedWidth,r==null?void 0:r.croppedWidth,a.width),croppedHeight:An(t==null?void 0:t.croppedHeight,r==null?void 0:r.croppedHeight,a.height),croppedX:An(t==null?void 0:t.croppedX,r==null?void 0:r.croppedX,0),croppedY:An(t==null?void 0:t.croppedY,r==null?void 0:r.croppedY,0),poseHeading:An(t==null?void 0:t.poseHeading,r==null?void 0:r.poseHeading,0),posePitch:An(t==null?void 0:t.posePitch,r==null?void 0:r.posePitch,0),poseRoll:An(t==null?void 0:t.poseRoll,r==null?void 0:r.poseRoll,0),initialHeading:r==null?void 0:r.initialHeading,initialPitch:r==null?void 0:r.initialPitch,initialFov:r==null?void 0:r.initialFov};(o.croppedWidth!==a.width||o.croppedHeight!==a.height)&&Ht(`Invalid panoData, croppedWidth/croppedHeight is not coherent with the loaded image.
            panoData: ${o.croppedWidth}x${o.croppedHeight}, image: ${a.width}x${a.height}`),Math.abs(o.fullWidth-o.fullHeight*2)>1&&(Ht("Invalid panoData, fullWidth should be twice fullHeight"),o.fullWidth=o.fullHeight*2),o.croppedX+o.croppedWidth>o.fullWidth&&(Ht("Invalid panoData, croppedX + croppedWidth > fullWidth"),o.croppedX=o.fullWidth-o.croppedWidth),o.croppedY+o.croppedHeight>o.fullHeight&&(Ht("Invalid panoData, croppedY + croppedHeight > fullHeight"),o.croppedY=o.fullHeight-o.croppedHeight);const l=this.createEquirectangularTexture(a,o);return{panorama:i,texture:l,panoData:o,cacheKey:i}}async loadXMP(i){const e=await this.loadBlobAsString(i),t=e.indexOf("<x:xmpmeta"),n=e.indexOf("</x:xmpmeta>"),s=e.substring(t,n);return t!==-1&&n!==-1&&s.includes("GPano:")?{isEquirectangular:!0,fullWidth:$i(s,"FullPanoWidthPixels"),fullHeight:$i(s,"FullPanoHeightPixels"),croppedWidth:$i(s,"CroppedAreaImageWidthPixels"),croppedHeight:$i(s,"CroppedAreaImageHeightPixels"),croppedX:$i(s,"CroppedAreaLeftPixels"),croppedY:$i(s,"CroppedAreaTopPixels"),poseHeading:$i(s,"PoseHeadingDegrees",!1),posePitch:$i(s,"PosePitchDegrees",!1),poseRoll:$i(s,"PoseRollDegrees",!1),initialHeading:$i(s,"InitialViewHeadingDegrees",!1),initialPitch:$i(s,"InitialViewPitchDegrees",!1),initialFov:$i(s,"InitialHorizontalFOVDegrees",!1)}:null}loadBlobAsString(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(i)})}createEquirectangularTexture(i,e){if(this.config.blur||e.fullWidth>pi.maxTextureWidth||e.croppedWidth!==e.fullWidth||e.croppedHeight!==e.fullHeight){const t=Math.min(1,pi.maxCanvasWidth/e.fullWidth),n={fullWidth:e.fullWidth*t,fullHeight:e.fullHeight*t,croppedWidth:e.croppedWidth*t,croppedHeight:e.croppedHeight*t,croppedX:e.croppedX*t,croppedY:e.croppedY*t},s=document.createElement("canvas");s.width=n.fullWidth,s.height=n.fullHeight;const r=s.getContext("2d");if(this.config.backgroundColor&&(r.fillStyle=this.config.backgroundColor,r.fillRect(0,0,s.width,s.height)),this.config.blur){const o=s.width/2048,l=Math.ceil(o*2);n.croppedWidth===s.width&&(r.drawImage(i,0,0,l/t,i.height,0,n.croppedY,l,n.croppedHeight),r.drawImage(i,i.width-l/t,0,l/t,i.height,s.width-l,n.croppedY,l,n.croppedHeight)),n.croppedHeight===s.height&&(r.drawImage(i,0,0,1,1,n.croppedX,0,n.croppedWidth,l),r.drawImage(i,0,i.height-1,1,1,n.croppedX,s.height-l,n.croppedWidth,l)),r.filter=`blur(${o}px)`}r.drawImage(i,n.croppedX,n.croppedY,n.croppedWidth,n.croppedHeight);const a=mf(s);return this.config.interpolateBackground&&n.fullWidth<=8096&&(e.croppedWidth!==e.fullWidth||e.croppedHeight!==e.fullHeight)&&(this.interpolationWorker.postMessage({image:r.getImageData(n.croppedX,n.croppedY,n.croppedWidth,n.croppedHeight),panoData:n}),this.interpolationWorker.onmessage=o=>{r.putImageData(o.data,0,0),a.needsUpdate=!0,this.viewer.needsUpdate()}),a}return mf(i)}createMesh(){const i=new Mu(Ha,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1);return new En(i)}setTexture(i,e,t){const n=new xu;n.map=e.texture,t&&(n.depthTest=!1,n.depthWrite=!1),i.material=n}setTextureOpacity(i,e){i.material.opacity=e,i.material.transparent=e<1}disposeTexture(i){var e;(e=i.texture)==null||e.dispose()}__defaultPanoData(i){const e=Math.max(i.width,i.height*2),t=Math.round(e/2),n=Math.round((e-i.width)/2),s=Math.round((t-i.height)/2);return{isEquirectangular:!0,fullWidth:e,fullHeight:t,croppedWidth:i.width,croppedHeight:i.height,croppedX:n,croppedY:s}}};ul.id="equirectangular";ul.VERSION="5.10.0";ul.supportsDownload=!0;var G_=class extends ul{constructor(i,e){super(i,{resolution:(e==null?void 0:e.resolution)??64,interpolateBackground:!1,useXmpData:!1})}async loadTexture(i,e){const t=await super.loadTexture(i,e,null,!1);return t.panoData=null,t}createMesh(){const i=new Mu(Ha,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS).scale(-1,1,1).toNonIndexed(),e=i.getAttribute("uv"),t=i.getAttribute("normal");for(let n=0;n<e.count;n++)for(let s=0;s<3;s++){const r=n*3+s,a=t.getX(r),o=t.getY(r),l=t.getZ(r),u=.947;if(n<e.count/6){const c=a===0&&l===0?1:Math.acos(o)/Math.sqrt(a*a+l*l)*(2/Math.PI);e.setXY(r,a*(u/4)*c+1/4,l*(u/2)*c+1/2)}else{const c=a===0&&l===0?1:Math.acos(-o)/Math.sqrt(a*a+l*l)*(2/Math.PI);e.setXY(r,-a*(u/4)*c+3/4,l*(u/2)*c+1/2)}}return i.rotateX(-Math.PI/2),i.rotateY(Math.PI),new En(i,new xu)}};G_.id="dual-fisheye";G_.VERSION="5.10.0";var js=class W_{constructor(e,t){this.parent=e,this.children=[],this.container=document.createElement("div"),this.state={visible:!0},this.viewer=e instanceof W_?e.viewer:e,this.container.className=t.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}destroy(){this.parent.container.removeChild(this.container);const e=this.parent.children.indexOf(this);e!==-1&&this.parent.children.splice(e,1),this.children.slice().forEach(t=>t.destroy()),this.children.length=0}toggle(e=!this.isVisible()){e?this.show():this.hide()}hide(e){this.container.style.display="none",this.state.visible=!1}show(e){this.container.style.display="",this.state.visible=!0}isVisible(){return this.state.visible}},uO=Lu({id:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),Ai=class extends js{constructor(i,e){super(i,{className:`psv-button ${e.hoverScale?"psv-button--hover-scale":""} ${e.className||""}`}),this.state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},this.config=uO(e),this.config.id=this.constructor.id,e.icon&&this.__setIcon(e.icon),this.state.width=this.container.offsetWidth,this.config.title?this.container.title=this.config.title:this.id&&this.id in this.viewer.config.lang&&(this.container.title=this.viewer.config.lang[this.id]),e.tabbable&&(this.container.tabIndex=0),this.container.addEventListener("click",t=>{this.state.enabled&&this.onClick(),t.stopPropagation()}),this.container.addEventListener("keydown",t=>{t.key===ri.Enter&&this.state.enabled&&(this.onClick(),t.stopPropagation())})}get id(){return this.config.id}get title(){return this.container.title}get content(){return this.container.innerHTML}get width(){return this.state.width}get collapsable(){return this.config.collapsable}show(i=!0){this.isVisible()||(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),i&&this.viewer.navbar.autoSize())}hide(i=!0){this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",i&&this.viewer.navbar.autoSize())}checkSupported(){yp(this.isSupported(),(i,e)=>{this.state&&(this.state.supported=i,e?i||this.hide():this.toggle(i))})}autoSize(){}isSupported(){return!0}toggleActive(i=!this.state.active){i!==this.state.active&&(this.state.active=i,Cu(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}disable(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}enable(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}collapse(){this.state.collapsed=!0,this.container.style.display="none"}uncollapse(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}__setIcon(i){this.container.innerHTML=i,mp(this.container.querySelector("svg"),"psv-button-svg")}},dO=class extends Ai{constructor(i,e){var t,n;super(i,{className:`psv-custom-button ${e.className||""}`,hoverScale:!1,collapsable:e.collapsable!==!1,tabbable:e.tabbable!==!1,title:e.title}),this.customOnClick=e.onClick,e.id?this.config.id=e.id:this.config.id="psvButton-"+Math.random().toString(36).substring(2),e.content&&(typeof e.content=="string"?this.container.innerHTML=e.content:(this.container.classList.add("psv-custom-button--no-padding"),e.content.style.height="100%",(n=(t=e.content).attachViewer)==null||n.call(t,this.viewer),this.container.appendChild(e.content))),this.state.width=this.container.offsetWidth,e.disabled&&this.disable(),e.visible===!1&&this.hide()}onClick(){var i;(i=this.customOnClick)==null||i.call(this,this.viewer)}},Yo=class extends Ai{constructor(i){super(i,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:xn.info}),this.mode=0,this.viewer.addEventListener(Io.type,this),this.viewer.addEventListener(No.type,this),this.viewer.addEventListener(ks.type,this),this.viewer.addEventListener(Fs.type,this),this.viewer.addEventListener(Ni.type,this)}destroy(){this.viewer.removeEventListener(Io.type,this),this.viewer.removeEventListener(No.type,this),this.viewer.removeEventListener(ks.type,this),this.viewer.removeEventListener(Fs.type,this),this.viewer.removeEventListener(Ni.type,this),super.destroy()}handleEvent(i){if(i instanceof Ni){i.containsOptions("description")&&this.autoSize(!0);return}if(!this.mode)return;let e=!1;i instanceof Io?e=this.mode===1:i instanceof No?e=this.mode===1&&i.notificationId!==fi.DESCRIPTION:i instanceof ks?e=this.mode===2:i instanceof Fs&&(e=this.mode===2&&i.panelId!==fi.DESCRIPTION),e&&(this.toggleActive(!1),this.mode=0)}onClick(){this.mode?this.__close():this.__open()}hide(i){super.hide(i),this.mode&&this.__close()}autoSize(i=!1){if(i){const e=this.viewer.navbar.getButton("caption",!1),t=e&&!e.isVisible(),n=!!this.viewer.config.description;t||n?this.show(!1):this.hide(!1)}}__close(){switch(this.mode){case 1:this.viewer.notification.hide(fi.DESCRIPTION);break;case 2:this.viewer.panel.hide(fi.DESCRIPTION);break}}__open(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:fi.DESCRIPTION,content:(this.viewer.config.caption?`<p>${this.viewer.config.caption}</p>`:"")+this.viewer.config.description})):(this.mode=1,this.viewer.notification.show({id:fi.DESCRIPTION,content:this.viewer.config.caption}))}};Yo.id="description";var j_=class extends Ai{constructor(i){super(i,{className:"psv-download-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:xn.download}),this.viewer.addEventListener(Ni.type,this)}destroy(){this.viewer.removeEventListener(Ni.type,this),super.destroy()}handleEvent(i){i instanceof Ni&&i.containsOptions("downloadUrl")&&this.checkSupported()}onClick(){const i=document.createElement("a");i.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,i.href.startsWith("data:")&&!this.viewer.config.downloadName?i.download="panorama."+i.href.substring(0,i.href.indexOf(";")).split("/").pop():i.download=this.viewer.config.downloadName||i.href.split("/").pop(),i.target="_blank",this.viewer.container.appendChild(i),i.click(),setTimeout(()=>{this.viewer.container.removeChild(i)},100)}checkSupported(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}};j_.id="download";var X_=class extends Ai{constructor(i){super(i,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:xn.fullscreenIn,iconActive:xn.fullscreenOut}),this.viewer.addEventListener(Ro.type,this)}destroy(){this.viewer.removeEventListener(Ro.type,this),super.destroy()}handleEvent(i){i instanceof Ro&&this.toggleActive(i.fullscreenEnabled)}onClick(){this.viewer.toggleFullscreen()}};X_.id="fullscreen";var hO="psvButton",fO=(i,e)=>`
<div class="psv-panel-menu psv-panel-menu--stripped">
  <h1 class="psv-panel-menu-title">${xn.menu} ${e}</h1>
  <ul class="psv-panel-menu-list">
    ${i.map(t=>`
    <li data-psv-button="${t.id}" class="psv-panel-menu-item" tabindex="0">
      <span class="psv-panel-menu-item-icon">${t.content}</span>
      <span class="psv-panel-menu-item-label">${t.title}</span>
    </li>
    `).join("")}
  </ul>
</div>
`,Ic=class extends Ai{constructor(i){super(i,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:xn.menu}),this.viewer.addEventListener(Fs.type,this),this.viewer.addEventListener(ks.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Fs.type,this),this.viewer.removeEventListener(ks.type,this),super.destroy()}handleEvent(i){i instanceof Fs?this.toggleActive(i.panelId===fi.MENU):i instanceof ks&&this.toggleActive(!1)}onClick(){this.state.active?this.__hideMenu():this.__showMenu()}hide(i){super.hide(i),this.__hideMenu()}show(i){super.show(i),this.state.active&&this.__showMenu()}__showMenu(){this.viewer.panel.show({id:fi.MENU,content:fO(this.viewer.navbar.collapsed,this.viewer.config.lang.menu),noMargin:!0,clickHandler:i=>{const e=i?sb(i,".psv-panel-menu-item"):void 0,t=e?e.dataset[hO]:void 0;t&&(this.viewer.navbar.getButton(t).onClick(),this.__hideMenu())}})}__hideMenu(){this.viewer.panel.hide(fi.MENU)}};Ic.id="menu";function pO(i){let e=0;switch(i){case 0:e=90;break;case 1:e=-90;break;case 3:e=180;break;default:e=0;break}return xn.arrow.replace("rotate(0",`rotate(${e}`)}var dl=class extends Ai{constructor(i,e){super(i,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:pO(e)}),this.direction=e,this.handler=new Ru,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(i){switch(i.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":i.key===ri.Enter&&this.__onMouseDown();break;case"keyup":i.key===ri.Enter&&this.__onMouseUp();break}}onClick(){}isSupported(){return Pu(pi.isTouchEnabled)}__onMouseDown(){if(!this.state.enabled)return;const i={};switch(this.direction){case 0:i.pitch=!1;break;case 1:i.pitch=!0;break;case 3:i.yaw=!1;break;default:i.yaw=!0;break}this.viewer.stopAll(),this.viewer.dynamics.position.roll(i),this.handler.down()}__onMouseUp(){this.state.enabled&&this.handler.up(()=>{this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer()})}};dl.groupId="move";var q_=class extends dl{constructor(i){super(i,1)}};q_.id="moveDown";var Y_=class extends dl{constructor(i){super(i,2)}};Y_.id="moveLeft";var K_=class extends dl{constructor(i){super(i,3)}};K_.id="moveRight";var Z_=class extends dl{constructor(i){super(i,0)}};Z_.id="moveUp";var Sp=class extends Ai{constructor(i,e,t){super(i,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:e}),this.direction=t,this.handler=new Ru,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(i){switch(i.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":i.key===ri.Enter&&this.__onMouseDown();break;case"keyup":i.key===ri.Enter&&this.__onMouseUp();break}}onClick(){}isSupported(){return Pu(pi.isTouchEnabled)}__onMouseDown(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(this.direction===1),this.handler.down())}__onMouseUp(){this.state.enabled&&this.handler.up(()=>this.viewer.dynamics.zoom.stop())}};Sp.groupId="zoom";var Q_=class extends Sp{constructor(i){super(i,xn.zoomIn,0)}};Q_.id="zoomIn";var J_=class extends Sp{constructor(i){super(i,xn.zoomOut,1)}};J_.id="zoomOut";var Tp=class extends Ai{constructor(i){super(i,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1}),this.zoomRange=document.createElement("div"),this.zoomRange.className="psv-zoom-range-line",this.container.appendChild(this.zoomRange),this.zoomValue=document.createElement("div"),this.zoomValue.className="psv-zoom-range-handle",this.zoomRange.appendChild(this.zoomValue),this.slider=new wb(this.container,"HORIZONTAL",e=>this.__onSliderUpdate(e)),this.mediaMinWidth=parseInt(Un(this.container,"max-width"),10),this.viewer.addEventListener(ds.type,this),this.viewer.state.ready?this.__moveZoomValue(this.viewer.getZoomLevel()):this.viewer.addEventListener(ko.type,this)}destroy(){this.slider.destroy(),this.viewer.removeEventListener(ds.type,this),this.viewer.removeEventListener(ko.type,this),super.destroy()}handleEvent(i){i instanceof ds?this.__moveZoomValue(i.zoomLevel):i instanceof ko&&this.__moveZoomValue(this.viewer.getZoomLevel())}onClick(){}isSupported(){return Pu(pi.isTouchEnabled)}autoSize(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}__moveZoomValue(i){this.zoomValue.style.left=i/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}__onSliderUpdate(i){i.mousedown&&this.viewer.zoom(i.value*100)}};Tp.id="zoomRange";Tp.groupId="zoom";var ew=class extends Eb{constructor(i){super(),this.viewer=i}init(){}destroy(){}},Mp=class extends ew{constructor(i,e){super(i),this.config=this.constructor.configParser(e)}setOption(i,e){this.setOptions({[i]:e})}setOptions(i){const e={...this.config,...i},t=this.constructor,n=t.configParser,s=t.readonlyOptions,r=t.id;for(let[a,o]of Object.entries(i)){if(!(a in n.defaults)){Ht(`${r}: Unknown option "${a}"`);continue}if(s.includes(a)){Ht(`${r}: Option "${a}" cannot be updated`);continue}a in n.parsers&&(o=n.parsers[a](o,{rawConfig:e,defValue:n.defaults[a]})),this.config[a]=o}}};Mp.readonlyOptions=[];function bf(i){if(i){for(const[,e]of[["_",i],...Object.entries(i)])if(e.prototype instanceof ew)return wp(e.id,e.VERSION,"5.10.0"),e}return null}var Gs={panorama:null,container:null,adapter:[ul,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:!0,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,panoData:null,requestHeaders:null,rendererParameters:{alpha:!0,antialias:!0},withCredentials:!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",description:"Description",download:"Download",fullscreen:"Fullscreen",loading:"Loading...",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama cannot be loaded",webglError:"Your browser does not seem to support WebGL"},keyboard:"fullscreen",keyboardActions:{[ri.ArrowUp]:"ROTATE_UP",[ri.ArrowDown]:"ROTATE_DOWN",[ri.ArrowRight]:"ROTATE_RIGHT",[ri.ArrowLeft]:"ROTATE_LEFT",[ri.PageUp]:"ZOOM_IN",[ri.PageDown]:"ZOOM_OUT",[ri.Plus]:"ZOOM_IN",[ri.Minus]:"ZOOM_OUT"}},Mv={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},_f={container:i=>{if(!i)throw new ft("No value given for container.");return i},adapter:(i,{defValue:e})=>{if(i?Array.isArray(i)?i=[Tv(i[0]),i[1]]:i=[Tv(i),null]:i=e,!i[0])throw new ft("An undefined value was given for adapter.");if(!i[0].id)throw new ft("Adapter has no id.");return i[0].id==="little-planet"&&(Ht("LittlePlanetAdapter support has been removed, use `{ fisheye: 2, maxFov: 130 }` to achieve similar effect."),i=e),i},defaultYaw:i=>In(i),defaultPitch:i=>In(i,!0),defaultZoomLvl:i=>$t.clamp(i,0,100),minFov:(i,{rawConfig:e})=>(e.maxFov<i&&(Ht("maxFov cannot be lower than minFov"),i=e.maxFov),$t.clamp(i,1,179)),maxFov:(i,{rawConfig:e})=>(i<e.minFov&&(i=e.minFov),$t.clamp(i,1,179)),lang:i=>({...Gs.lang,...i}),keyboard:i=>i?typeof i=="object"?(Ht("Use keyboardActions to configure the keyboard actions, keyboard option must be either true, false, 'fullscreen' or 'always'"),"fullscreen"):i==="always"?"always":"fullscreen":!1,keyboardActions:(i,{rawConfig:e})=>e.keyboard&&typeof e.keyboard=="object"?e.keyboard:i,fisheye:i=>i===!0?1:i===!1?0:i,requestHeaders:i=>i&&typeof i=="object"?()=>i:typeof i=="function"?i:null,rendererParameters:(i,{defValue:e})=>({...i,...e}),plugins:i=>i.map((e,t)=>{if(Array.isArray(e)?e=[bf(e[0]),e[1]]:e=[bf(e),null],!e[0])throw new ft(`An undefined value was given for plugin ${t}.`);if(!e[0].id)throw new ft(`Plugin ${t} has no id.`);return e}),navbar:i=>i===!1?null:i===!0?Au(Gs.navbar):typeof i=="string"?i.split(/[ ,]/):i},mO=Lu(Gs,_f),la=class extends Ai{constructor(i){super(i,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0}),this.contentWidth=0,this.state.width=0,this.contentElt=document.createElement("div"),this.contentElt.className="psv-caption-content",this.container.appendChild(this.contentElt),this.setCaption(this.viewer.config.caption)}hide(){this.contentElt.style.display="none",this.state.visible=!1}show(){this.contentElt.style.display="",this.state.visible=!0}onClick(){}setCaption(i){this.show(),this.contentElt.innerHTML=i??"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}autoSize(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}__refreshButton(){var i;(i=this.viewer.navbar.getButton(Yo.id,!1))==null||i.autoSize(!0)}};la.id="caption";var wf={},ru={};function Cp(i,e){if(!i.id)throw new ft("Button id is required");if(wf[i.id]=i,i.groupId&&(ru[i.groupId]=ru[i.groupId]||[]).push(i),e){const t=Gs.navbar;switch(e){case"start":t.unshift(i.id);break;case"end":t.push(i.id);break;default:{const[n,s]=e.split(":"),r=t.indexOf(n);if(!n||!s||r===-1)throw new ft(`Invalid defaultPosition ${e}`);t.splice(r+(s==="right"?1:0),0,i.id)}}}}[J_,Tp,Q_,Yo,la,j_,X_,Y_,K_,Z_,q_].forEach(i=>Cp(i));var gO=class extends js{constructor(i){super(i,{className:`psv-navbar ${cl}`}),this.collapsed=[],this.state.visible=!1}show(){this.viewer.container.classList.add("psv--has-navbar"),this.container.classList.add("psv-navbar--open"),this.state.visible=!0}hide(){this.viewer.container.classList.remove("psv--has-navbar"),this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}setButtons(i){this.children.slice().forEach(e=>e.destroy()),this.children.length=0,i.indexOf(la.id)!==-1&&i.indexOf(Yo.id)===-1&&i.splice(i.indexOf(la.id),0,Yo.id),i.forEach(e=>{typeof e=="object"?new dO(this,e):wf[e]?new wf[e](this):ru[e]?ru[e].forEach(t=>{new t(this)}):Ht(`Unknown button ${e}`)}),new Ic(this),this.children.forEach(e=>{e instanceof Ai&&e.checkSupported()}),this.autoSize()}setCaption(i){this.children.some(e=>e instanceof la?(e.setCaption(i),!0):!1)}getButton(i,e=!0){const t=this.children.find(n=>n instanceof Ai&&n.id===i);return!t&&e&&Ht(`button "${i}" not found in the navbar`),t}autoSize(){var n;this.children.forEach(s=>{s instanceof Ai&&s.autoSize()});const i=this.container.offsetWidth;let e=0;const t=[];this.children.forEach(s=>{s.isVisible()&&s instanceof Ai&&(e+=s.width,s.collapsable&&t.push(s))}),e!==0&&(i<e&&t.length>0?(t.forEach(s=>s.collapse()),this.collapsed=t,this.getButton(Ic.id).show(!1)):i>=e&&this.collapsed.length>0&&(this.collapsed.forEach(s=>s.uncollapse()),this.collapsed=[],this.getButton(Ic.id).hide(!1)),(n=this.getButton(la.id,!1))==null||n.autoSize())}};lf.enabled=!1;var ra={enabled:!0,maxItems:10,ttl:10*60,items:{},purgeInterval:null,init(){lf.enabled&&(Ht("ThreeJS cache should be disabled"),lf.enabled=!1),!this.purgeInterval&&this.enabled&&(this.purgeInterval=setInterval(()=>this.purge(),60*1e3))},add(i,e,t){this.enabled&&e&&(this.items[e]=this.items[e]??{files:{},lastAccess:null},this.items[e].files[i]=t,this.items[e].lastAccess=Date.now())},get(i,e){if(this.enabled&&e&&this.items[e])return this.items[e].lastAccess=Date.now(),this.items[e].files[i]},remove(i,e){this.enabled&&e&&this.items[e]&&(delete this.items[e].files[i],Object.keys(this.items[e].files).length===0&&delete this.items[e])},purge(){Object.entries(this.items).sort(([,i],[,e])=>e.lastAccess-i.lastAccess).forEach(([i,{lastAccess:e}],t)=>{t>0&&(Date.now()-e>=this.ttl*1e3||t>=this.maxItems)&&delete this.items[i]})}},vO=class extends js{constructor(i){super(i,{className:"psv-loader-container"}),this.loader=document.createElement("div"),this.loader.className="psv-loader",this.container.appendChild(this.loader),this.size=this.loader.offsetWidth,this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("class","psv-loader-canvas"),this.canvas.setAttribute("viewBox",`0 0 ${this.size} ${this.size}`),this.loader.appendChild(this.canvas),this.textColor=Un(this.loader,"color"),this.color=Un(this.canvas,"color"),this.border=parseInt(Un(this.loader,"--psv-loader-border"),10),this.thickness=parseInt(Un(this.loader,"--psv-loader-tickness"),10),this.viewer.addEventListener(Ni.type,this),this.__updateContent(),this.hide()}destroy(){this.viewer.removeEventListener(Ni.type,this),super.destroy()}handleEvent(i){i instanceof Ni&&i.containsOptions("loadingImg","loadingTxt")&&this.__updateContent()}setProgress(i){const e=Math.min(i,99.999)/100*Math.PI*2,t=this.size/2,n=t,s=this.thickness/2+this.border,r=(this.size-this.thickness)/2-this.border,a=Math.sin(e)*r+t,o=-Math.cos(e)*r+t,l=i>50?"1":"0";this.canvas.innerHTML=`
            <circle cx="${t}" cy="${t}" r="${t}" fill="${this.color}"/>
            <path d="M ${n} ${s} A ${r} ${r} 0 ${l} 1 ${a} ${o}" 
                  fill="none" stroke="${this.textColor}" stroke-width="${this.thickness}" stroke-linecap="round"/>
        `,this.viewer.dispatchEvent(new t_(Math.round(i)))}__updateContent(){const i=this.loader.querySelector(".psv-loader-image, .psv-loader-text");i&&this.loader.removeChild(i);let e;if(this.viewer.config.loadingImg?(e=document.createElement("img"),e.className="psv-loader-image",e.src=this.viewer.config.loadingImg):this.viewer.config.loadingTxt!==null&&(e=document.createElement("div"),e.className="psv-loader-text",e.innerHTML=this.viewer.config.loadingTxt||this.viewer.config.lang.loading),e){const t=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));e.style.maxWidth=t+"px",e.style.maxHeight=t+"px",this.loader.appendChild(e)}}},yO=class extends js{constructor(i){super(i,{className:"psv-notification"}),this.state={visible:!1,contentId:null,timeout:null},this.content=document.createElement("div"),this.content.className="psv-notification-content",this.container.appendChild(this.content),this.content.addEventListener("click",()=>this.hide())}isVisible(i){return this.state.visible&&(!i||!this.state.contentId||this.state.contentId===i)}toggle(){throw new ft("Notification cannot be toggled")}show(i){this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),typeof i=="string"&&(i={content:i}),this.state.contentId=i.id||null,this.content.innerHTML=i.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new No(i.id)),i.timeout&&(this.state.timeout=setTimeout(()=>this.hide(this.state.contentId),i.timeout))}hide(i){if(this.isVisible(i)){const e=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new Io(e))}}},bO=class extends js{constructor(i){super(i,{className:`psv-overlay ${cl}`}),this.state={visible:!1,contentId:null,dissmisable:!0},this.image=document.createElement("div"),this.image.className="psv-overlay-image",this.container.appendChild(this.image),this.title=document.createElement("div"),this.title.className="psv-overlay-title",this.container.appendChild(this.title),this.text=document.createElement("div"),this.text.className="psv-overlay-text",this.container.appendChild(this.text),this.container.addEventListener("click",this),this.viewer.addEventListener(Ns.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Ns.type,this),super.destroy()}handleEvent(i){i.type==="click"?this.isVisible()&&this.state.dissmisable&&(this.hide(),i.stopPropagation()):i instanceof Ns&&this.isVisible()&&this.state.dissmisable&&i.key===ri.Escape&&(this.hide(),i.preventDefault())}isVisible(i){return this.state.visible&&(!i||!this.state.contentId||this.state.contentId===i)}toggle(){throw new ft("Overlay cannot be toggled")}show(i){typeof i=="string"&&(i={title:i}),this.state.contentId=i.id||null,this.state.dissmisable=i.dissmisable!==!1,this.image.innerHTML=i.image||"",this.title.innerHTML=i.title||"",this.text.innerHTML=i.text||"",super.show(),this.viewer.dispatchEvent(new x_(i.id))}hide(i){if(this.isVisible(i)){const e=this.state.contentId;super.hide(),this.state.contentId=null,this.viewer.dispatchEvent(new Wb(e))}}},_O=200,nh="psv-panel-content--no-interaction",wO=class extends js{constructor(i){super(i,{className:`psv-panel ${cl}`}),this.state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};const e=document.createElement("div");e.className="psv-panel-resizer",this.container.appendChild(e);const t=document.createElement("div");t.className="psv-panel-close-button",t.innerHTML=xn.close,t.title=i.config.lang.close,this.container.appendChild(t),this.content=document.createElement("div"),this.content.className="psv-panel-content",this.container.appendChild(this.content),this.container.addEventListener("wheel",n=>n.stopPropagation()),t.addEventListener("click",()=>this.hide()),e.addEventListener("mousedown",this),e.addEventListener("touchstart",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this),this.viewer.container.addEventListener("mousemove",this),this.viewer.container.addEventListener("touchmove",this),this.viewer.addEventListener(Ns.type,this)}destroy(){this.viewer.removeEventListener(Ns.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(i){switch(i.type){case"mousedown":this.__onMouseDown(i);break;case"touchstart":this.__onTouchStart(i);break;case"mousemove":this.__onMouseMove(i);break;case"touchmove":this.__onTouchMove(i);break;case"mouseup":this.__onMouseUp(i);break;case"touchend":this.__onTouchEnd(i);break;case Ns.type:this.__onKeyPress(i);break}}isVisible(i){return this.state.visible&&(!i||!this.state.contentId||this.state.contentId===i)}toggle(){throw new ft("Panel cannot be toggled")}show(i){typeof i=="string"&&(i={content:i});const e=this.isVisible(i.id);this.state.contentId=i.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),i.id&&this.state.width[i.id]?this.container.style.width=this.state.width[i.id]:i.width?this.container.style.width=i.width:this.container.style.width=null,this.content.innerHTML=i.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),Cu(this.content,"psv-panel-content--no-margin",i.noMargin===!0),i.clickHandler&&(this.state.clickHandler=t=>{i.clickHandler(tu(t))},this.state.keyHandler=t=>{t.key===ri.Enter&&i.clickHandler(tu(t))},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),e||setTimeout(()=>{var t;(t=this.content.querySelector("a,button,[tabindex]"))==null||t.focus()},300)),this.viewer.dispatchEvent(new Fs(i.id))}hide(i){if(this.isVisible(i)){const e=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.state.clickHandler=null),this.viewer.dispatchEvent(new ks(e))}}__onMouseDown(i){i.stopPropagation(),this.__startResize(i.clientX,i.clientY)}__onTouchStart(i){if(i.stopPropagation(),i.touches.length===1){const e=i.touches[0];this.__startResize(e.clientX,e.clientY)}}__onMouseUp(i){this.state.mousedown&&(i.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(nh))}__onTouchEnd(i){this.state.mousedown&&(i.stopPropagation(),i.touches.length===0&&(this.state.mousedown=!1,this.content.classList.remove(nh)))}__onMouseMove(i){this.state.mousedown&&(i.stopPropagation(),this.__resize(i.clientX,i.clientY))}__onTouchMove(i){if(this.state.mousedown){const e=i.touches[0];this.__resize(e.clientX,e.clientY)}}__onKeyPress(i){this.isVisible()&&i.key===ri.Escape&&(this.hide(),i.preventDefault())}__startResize(i,e){this.state.mouseX=i,this.state.mouseY=e,this.state.mousedown=!0,this.content.classList.add(nh)}__resize(i,e){const t=i,n=e,s=Math.max(_O,this.container.offsetWidth-(t-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=s),this.container.style.width=s,this.state.mouseX=t,this.state.mouseY=n}},EO=class extends js{constructor(i,e){super(i,{className:"psv-tooltip"}),this.state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null,hideTimeout:null},this.content=document.createElement("div"),this.content.className="psv-tooltip-content",this.container.appendChild(this.content),this.arrow=document.createElement("div"),this.arrow.className="psv-tooltip-arrow",this.container.appendChild(this.arrow),this.container.addEventListener("transitionend",this),this.container.addEventListener("touchdown",t=>t.stopPropagation()),this.container.addEventListener("mousedown",t=>t.stopPropagation()),this.container.style.top="-1000px",this.container.style.left="-1000px",this.show(e)}handleEvent(i){i.type==="transitionend"&&this.__onTransitionEnd(i)}destroy(){clearTimeout(this.state.hideTimeout),delete this.state.data,super.destroy()}toggle(){throw new ft("Tooltip cannot be toggled")}show(i){if(this.state.state!==0)throw new ft("Initialized tooltip cannot be re-initialized");i.className&&mp(this.container,i.className),i.style&&Object.assign(this.container.style,i.style),this.state.state=3,this.update(i.content,i),this.state.data=i.data,this.state.state=1,this.viewer.dispatchEvent(new A_(this,this.state.data)),this.__waitImages()}update(i,e){this.content.innerHTML=i;const t=this.container.getBoundingClientRect();this.state.width=t.right-t.left,this.state.height=t.bottom-t.top,this.state.arrow=parseInt(Un(this.arrow,"border-top-width"),10),this.state.border=parseInt(Un(this.container,"border-top-left-radius"),10),this.move(e??this.state.config),this.__waitImages()}move(i){var o;if(this.state.state!==1&&this.state.state!==3)throw new ft("Uninitialized tooltip cannot be moved");i.box=i.box??((o=this.state.config)==null?void 0:o.box)??{width:0,height:0},this.state.config=i;const e=this.container,t=this.arrow,n={posClass:mb(i.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(n,i);let s=null,r=null;if(n.top<0?s="bottom":n.top+n.height>this.viewer.state.size.height&&(s="top"),n.left<0?r="right":n.left+n.width>this.viewer.state.size.width&&(r="left"),r||s){const l=_p(n.posClass);s&&(n.posClass[l?0:1]=s),r&&(n.posClass[l?1:0]=r),this.__computeTooltipPosition(n,i)}e.style.top=n.top+"px",e.style.left=n.left+"px",t.style.top=n.arrowTop+"px",t.style.left=n.arrowLeft+"px";const a=n.posClass.join("-");a!==this.state.pos&&(e.classList.remove(`psv-tooltip--${this.state.pos}`),this.state.pos=a,e.classList.add(`psv-tooltip--${this.state.pos}`))}hide(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new Kb(this.state.data));const i=parseFloat(Un(this.container,"transition-duration"));this.state.hideTimeout=setTimeout(()=>{this.destroy()},i*2)}__onTransitionEnd(i){if(i.propertyName==="transform")switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy();break}}__computeTooltipPosition(i,e){const t=this.state.arrow,n=e.top,s=i.height,r=e.left,a=i.width,o=t+this.state.border,l=e.box.width/2+t*2,u=e.box.height/2+t*2;switch(i.posClass.join("-")){case"top-left":i.top=n-u-s,i.left=r+o-a,i.arrowTop=s,i.arrowLeft=a-o-t;break;case"top-center":i.top=n-u-s,i.left=r-a/2,i.arrowTop=s,i.arrowLeft=a/2-t;break;case"top-right":i.top=n-u-s,i.left=r-o,i.arrowTop=s,i.arrowLeft=t;break;case"bottom-left":i.top=n+u,i.left=r+o-a,i.arrowTop=-t*2,i.arrowLeft=a-o-t;break;case"bottom-center":i.top=n+u,i.left=r-a/2,i.arrowTop=-t*2,i.arrowLeft=a/2-t;break;case"bottom-right":i.top=n+u,i.left=r-o,i.arrowTop=-t*2,i.arrowLeft=t;break;case"left-top":i.top=n+o-s,i.left=r-l-a,i.arrowTop=s-o-t,i.arrowLeft=a;break;case"center-left":i.top=n-s/2,i.left=r-l-a,i.arrowTop=s/2-t,i.arrowLeft=a;break;case"left-bottom":i.top=n-o,i.left=r-l-a,i.arrowTop=t,i.arrowLeft=a;break;case"right-top":i.top=n+o-s,i.left=r+l,i.arrowTop=s-o-t,i.arrowLeft=-t*2;break;case"center-right":i.top=n-s/2,i.left=r+l,i.arrowTop=s/2-t,i.arrowLeft=-t*2;break;case"right-bottom":i.top=n-o,i.left=r+l,i.arrowTop=t,i.arrowLeft=-t*2;break}}__waitImages(){const i=this.content.querySelectorAll("img");if(i.length>0){const e=[];i.forEach(t=>{t.complete||e.push(new Promise(n=>{t.onload=n,t.onerror=n}))}),e.length&&Promise.all(e).then(()=>{if(this.state.state===1||this.state.state===3){const t=this.container.getBoundingClientRect();this.state.width=t.right-t.left,this.state.height=t.bottom-t.top,this.move(this.state.config)}})}}},xO=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/><!--Created by Shastry from the Noun Project--></svg>
`,hl=class{constructor(i){this.viewer=i,this.config=i.config,this.state=i.state}destroy(){}},yn=new me,pc=new $n(0,0,0,"ZXY"),SO=class extends hl{constructor(i){super(i)}fovToZoomLevel(i){const e=Math.round((i-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return $t.clamp(e-2*(e-50),0,100)}zoomLevelToFov(i){return this.config.maxFov+i/100*(this.config.minFov-this.config.maxFov)}vFovToHFov(i){return $t.radToDeg(2*Math.atan(Math.tan($t.degToRad(i)/2)*this.state.aspect))}hFovToVFov(i){return $t.radToDeg(2*Math.atan(Math.tan($t.degToRad(i)/2)/this.state.aspect))}getAnimationProperties(i,e,t){const n=!oi(e),s=!oi(t),r={};let a=null;if(n){const o=this.viewer.getPosition(),l=tb(o.yaw,e.yaw);r.yaw={start:o.yaw,end:o.yaw+l},r.pitch={start:o.pitch,end:e.pitch},a=pf(i,ib(o,e))}if(s){const o=this.viewer.getZoomLevel(),l=Math.abs(t-o);r.zoom={start:o,end:t},a===null&&(a=pf(i,Math.PI/4*l/100))}return a===null?typeof i=="number"?a=i:a=uf:a=Math.max(uf,a),{duration:a,properties:r}}textureCoordsToSphericalCoords(i){var t;if(!((t=this.state.textureData)!=null&&t.panoData))throw new ft("Current adapter does not support texture coordinates or no texture has been loaded");const e=this.viewer.adapter.textureCoordsToSphericalCoords(i,this.state.textureData.panoData);return!pc.equals(this.viewer.renderer.panoramaPose)||!pc.equals(this.viewer.renderer.sphereCorrection)?(this.sphericalCoordsToVector3(e,yn),yn.applyEuler(this.viewer.renderer.panoramaPose),yn.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(yn)):e}sphericalCoordsToTextureCoords(i){var e;if(!((e=this.state.textureData)!=null&&e.panoData))throw new ft("Current adapter does not support texture coordinates or no texture has been loaded");return(!pc.equals(this.viewer.renderer.panoramaPose)||!pc.equals(this.viewer.renderer.sphereCorrection))&&(this.sphericalCoordsToVector3(i,yn),gf(yn,this.viewer.renderer.sphereCorrection),gf(yn,this.viewer.renderer.panoramaPose),i=this.vector3ToSphericalCoords(yn)),this.viewer.adapter.sphericalCoordsToTextureCoords(i,this.state.textureData.panoData)}sphericalCoordsToVector3(i,e,t=Ha){return e||(e=new me),e.x=t*-Math.cos(i.pitch)*Math.sin(i.yaw),e.y=t*Math.sin(i.pitch),e.z=t*Math.cos(i.pitch)*Math.cos(i.yaw),e}vector3ToSphericalCoords(i){const e=Math.acos(i.y/Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z)),t=Math.atan2(i.x,i.z);return{yaw:t<0?-t:Math.PI*2-t,pitch:Math.PI/2-e}}viewerCoordsToVector3(i){const e=this.viewer.renderer.getIntersections(i).filter(t=>t.object.userData[$s]);return e.length?e[0].point:null}viewerCoordsToSphericalCoords(i){const e=this.viewerCoordsToVector3(i);return e?this.vector3ToSphericalCoords(e):null}vector3ToViewerCoords(i){const e=i.clone();return e.project(this.viewer.renderer.camera),{x:Math.round((e.x+1)/2*this.state.size.width),y:Math.round((1-e.y)/2*this.state.size.height)}}sphericalCoordsToViewerCoords(i){return this.sphericalCoordsToVector3(i,yn),this.vector3ToViewerCoords(yn)}isPointVisible(i){let e,t;if(i instanceof me)e=i,t=this.vector3ToViewerCoords(i);else if(bp(i))e=this.sphericalCoordsToVector3(i,yn),t=this.vector3ToViewerCoords(e);else return!1;return e.dot(this.viewer.state.direction)>0&&t.x>=0&&t.x<=this.viewer.state.size.width&&t.y>=0&&t.y<=this.viewer.state.size.height}cleanPosition(i){if("yaw"in i||"pitch"in i){if(!("yaw"in i)||!("pitch"in i))throw new ft("Position is missing 'yaw' or 'pitch'");return{yaw:In(i.yaw),pitch:In(i.pitch,!0)}}else return this.textureCoordsToSphericalCoords(i)}cleanSphereCorrection(i){return{pan:In((i==null?void 0:i.pan)||0),tilt:In((i==null?void 0:i.tilt)||0,!0),roll:In((i==null?void 0:i.roll)||0,!0,!1)}}cleanPanoramaPose(i){return{pan:$t.degToRad((i==null?void 0:i.poseHeading)||0),tilt:$t.degToRad((i==null?void 0:i.posePitch)||0),roll:$t.degToRad((i==null?void 0:i.poseRoll)||0)}}cleanPanoramaOptions(i,e){return e!=null&&e.isEquirectangular&&(oi(i.zoom)&&!oi(e.initialFov)&&(i={...i,zoom:this.fovToZoomLevel(this.hFovToVFov(e.initialFov))}),oi(i.position)&&!oi(e.initialHeading)&&!oi(e.initialPitch)&&(i={...i,position:{yaw:In(e.initialHeading),pitch:In(e.initialPitch,!0)}})),i}},TO=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/><!--Created by AomAm from the Noun Project--></svg>
`,MO=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/><!-- Created by Icon Island from the Noun Project --></svg>
`,fl=class tw{constructor(){this.$=tw.IDLE}is(...e){return e.some(t=>this.$&t)}set(e){this.$=e}add(e){this.$|=e}remove(e){this.$&=~e}};fl.IDLE=0;fl.CLICK=1;fl.MOVING=2;fl.INERTIA=4;var Ut=fl,CO=class extends hl{constructor(i){super(i),this.data={startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,mouseHistory:[],pinchDist:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},this.step=new Ut,this.keyHandler=new Ru,this.resizeObserver=new ResizeObserver(gp(()=>this.viewer.autoSize(),50)),this.moveThreshold=qy*pi.pixelRatio}init(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener("fullscreenchange",this),this.resizeObserver.observe(this.viewer.container)}destroy(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener("fullscreenchange",this),this.resizeObserver.disconnect(),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),super.destroy()}handleEvent(i){switch(i.type){case"keydown":this.__onKeyDown(i);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(i);break;case"mouseup":this.__onMouseUp(i);break;case"touchmove":this.__onTouchMove(i);break;case"touchend":this.__onTouchEnd(i);break;case"fullscreenchange":this.__onFullscreenChange();break}if(!rb(i,"."+cl))switch(i.type){case"mousedown":this.__onMouseDown(i);break;case"touchstart":this.__onTouchStart(i);break;case"wheel":this.__onMouseWheel(i);break}}__onKeyDown(i){var t;if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=i.key===ri.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(fi.CTRL_ZOOM))),!this.viewer.dispatchEvent(new Ns(i.key))||!this.state.keyboardEnabled)return;const e=(t=this.config.keyboardActions)==null?void 0:t[i.key];if(typeof e=="function")e(this.viewer),i.preventDefault();else if(e&&!this.keyHandler.pending){switch(e!=="ZOOM_IN"&&e!=="ZOOM_OUT"&&this.viewer.stopAll(),e){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0);break}this.keyHandler.down(),i.preventDefault()}}__onKeyUp(){this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up(()=>{this.viewer.dynamics.position.stop(),this.viewer.dynamics.zoom.stop(),this.viewer.resetIdleTimer()})}__onMouseDown(i){this.step.add(Ut.CLICK),this.data.startMouseX=i.clientX,this.data.startMouseY=i.clientY}__onMouseUp(i){this.step.is(Ut.CLICK,Ut.MOVING)&&this.__stopMove(i.clientX,i.clientY,i,i.button===2)}__onMouseMove(i){this.config.mousemove&&this.step.is(Ut.CLICK,Ut.MOVING)&&(i.preventDefault(),this.__doMove(i.clientX,i.clientY)),this.__handleObjectsEvents(i)}__onTouchStart(i){i.touches.length===1?(this.step.add(Ut.CLICK),this.data.startMouseX=i.touches[0].clientX,this.data.startMouseY=i.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout(()=>{const e=i.touches[0];this.__stopMove(e.clientX,e.clientY,i,!0),this.data.longtouchTimeout=null},Ky))):i.touches.length===2&&(this.step.set(Ut.IDLE),this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(i),i.preventDefault()))}__onTouchEnd(i){if(this.__cancelLongTouch(),this.step.is(Ut.CLICK,Ut.MOVING)){if(i.preventDefault(),this.__cancelTwoFingersOverlay(),i.touches.length===1)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(i.touches.length===0){const e=i.changedTouches[0];this.__stopMove(e.clientX,e.clientY,i)}}}__onTouchMove(i){if(this.__cancelLongTouch(),!!this.config.mousemove)if(i.touches.length===1){if(this.config.touchmoveTwoFingers)this.step.is(Ut.CLICK)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout(()=>{this.viewer.overlay.show({id:fi.TWO_FINGERS,image:TO,title:this.config.lang.twoFingers})},Zy));else if(this.step.is(Ut.CLICK,Ut.MOVING)){i.preventDefault();const e=i.touches[0];this.__doMove(e.clientX,e.clientY)}}else this.__doMoveZoom(i),this.__cancelTwoFingersOverlay()}__cancelLongTouch(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}__cancelTwoFingersOverlay(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(fi.TWO_FINGERS))}__onMouseWheel(i){if(!this.config.mousewheel||!i.deltaY)return;if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown){this.viewer.overlay.show({id:fi.CTRL_ZOOM,image:MO,title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),this.data.ctrlZoomTimeout=setTimeout(()=>this.viewer.overlay.hide(fi.CTRL_ZOOM),Qy);return}i.preventDefault(),i.stopPropagation();const e=i.deltaY/Math.abs(i.deltaY)*5*this.config.zoomSpeed;e!==0&&this.viewer.dynamics.zoom.step(-e,5)}__onFullscreenChange(){const i=this.viewer.isFullscreenEnabled();this.config.keyboard==="fullscreen"&&(i?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new Ro(i))}__resetMove(){this.step.set(Ut.IDLE),this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0,this.data.mouseHistory.length=0}__startMoveZoom(i){this.viewer.stopAll(),this.__resetMove();const e=hf(i);this.step.set(Ut.MOVING),{distance:this.data.pinchDist,center:{x:this.data.mouseX,y:this.data.mouseY}}=e,this.__logMouseMove(this.data.mouseX,this.data.mouseY)}__stopMove(i,e,t,n=!1){this.step.is(Ut.MOVING)?this.config.moveInertia?(this.__logMouseMove(i,e),this.__stopMoveInertia(i,e)):(this.__resetMove(),this.viewer.resetIdleTimer()):(this.step.is(Ut.CLICK)&&!this.__moveThresholdReached(i,e)&&this.__doClick(i,e,t,n),this.step.remove(Ut.CLICK),this.step.is(Ut.INERTIA)||(this.__resetMove(),this.viewer.resetIdleTimer()))}__stopMoveInertia(i,e){const n=new UI(this.data.mouseHistory.map(([,o,l])=>new gt(o,l))).getTangent(1),s=this.data.mouseHistory.reduce(({total:o,prev:l},u)=>({total:l?o+pp({x:l[1],y:l[2]},{x:u[1],y:u[2]})/(u[0]-l[0]):0,prev:u}),{total:0,prev:null}).total/this.data.mouseHistory.length;if(!s){this.__resetMove(),this.viewer.resetIdleTimer();return}this.step.set(Ut.INERTIA);let r=i,a=e;this.state.animation=new qo({properties:{speed:{start:s,end:0}},duration:1e3,easing:"outQuad",onTick:o=>{r+=o.speed*n.x*3*pi.pixelRatio,a+=o.speed*n.y*3*pi.pixelRatio,this.__applyMove(r,a)}}),this.state.animation.then(o=>{this.state.animation=null,o&&(this.__resetMove(),this.viewer.resetIdleTimer())})}__doClick(i,e,t,n=!1){const s=this.viewer.container.getBoundingClientRect(),r=i-s.left,a=e-s.top,o=this.viewer.renderer.getIntersections({x:r,y:a}),l=o.find(u=>u.object.userData[$s]);if(l){const u=this.viewer.dataHelper.vector3ToSphericalCoords(l.point),c={rightclick:n,originalEvent:t,target:tu(t),clientX:i,clientY:e,viewerX:r,viewerY:a,yaw:u.yaw,pitch:u.pitch,objects:o.map(d=>d.object).filter(d=>!d.userData[$s])};try{const d=this.viewer.dataHelper.sphericalCoordsToTextureCoords(c);Object.assign(c,d)}catch{}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-c.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-c.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new Ub(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new Ob(c)),this.data.dblclickData=Au(c),this.data.dblclickTimeout=setTimeout(()=>{this.data.dblclickTimeout=null,this.data.dblclickData=null},Yy))}}__handleObjectsEvents(i){if(!db(this.state.objectsObservers)&&i.composedPath().includes(this.viewer.container)){const e=ab(this.viewer.container),t={x:i.clientX-e.x,y:i.clientY-e.y},n=this.viewer.renderer.getIntersections(t),s=(r,a,o)=>{this.viewer.dispatchEvent(new o(i,r,t,a))};for(const[r,a]of Object.entries(this.state.objectsObservers)){const o=n.find(l=>l.object.userData[r]);o?(a&&o.object!==a&&(s(a,r,yf),this.state.objectsObservers[r]=null),a?s(o.object,r,$_):(this.state.objectsObservers[r]=o.object,s(o.object,r,U_))):a&&(s(a,r,yf),this.state.objectsObservers[r]=null)}}}__doMove(i,e){this.step.is(Ut.CLICK)&&this.__moveThresholdReached(i,e)?(this.viewer.stopAll(),this.__resetMove(),this.step.set(Ut.MOVING),this.data.mouseX=i,this.data.mouseY=e,this.__logMouseMove(i,e)):this.step.is(Ut.MOVING)&&(this.__applyMove(i,e),this.__logMouseMove(i,e))}__moveThresholdReached(i,e){return Math.abs(i-this.data.startMouseX)>=this.moveThreshold||Math.abs(e-this.data.startMouseY)>=this.moveThreshold}__applyMove(i,e){const t=(i-this.data.mouseX)*Math.cos(this.state.roll)-(e-this.data.mouseY)*Math.sin(this.state.roll),n=(e-this.data.mouseY)*Math.cos(this.state.roll)+(i-this.data.mouseX)*Math.sin(this.state.roll),s={yaw:this.config.moveSpeed*(t/this.state.size.width)*$t.degToRad(this.state.hFov),pitch:this.config.moveSpeed*(n/this.state.size.height)*$t.degToRad(this.state.vFov)},r=this.viewer.getPosition();this.viewer.rotate({yaw:r.yaw-s.yaw,pitch:r.pitch+s.pitch}),this.data.mouseX=i,this.data.mouseY=e}__doMoveZoom(i){if(this.step.is(Ut.MOVING)){i.preventDefault();const e=hf(i),t=(e.distance-this.data.pinchDist)/pi.pixelRatio*this.config.zoomSpeed;this.viewer.zoom(this.viewer.getZoomLevel()+t),this.__doMove(e.center.x,e.center.y),this.data.pinchDist=e.distance}}__logMouseMove(i,e){const t=Date.now(),n=this.data.mouseHistory.length?this.data.mouseHistory[this.data.mouseHistory.length-1]:[0,-1,-1];n[1]===i&&n[2]===e?n[0]=t:t===n[0]?(n[1]=i,n[2]=e):this.data.mouseHistory.push([t,i,e]);let s=null;for(let r=0;r<this.data.mouseHistory.length;)this.data.mouseHistory[r][0]<t-df?this.data.mouseHistory.splice(r,1):s&&this.data.mouseHistory[r][0]-s>df/10?(this.data.mouseHistory.splice(0,r),r=0,s=this.data.mouseHistory[r][0]):(s=this.data.mouseHistory[r][0],r++)}};St.enabled=!1;var mc=new gt,Cv=new Zt,Av=new za,AO=class extends hl{constructor(i){super(i),this.frustumNeedsUpdate=!0,this.renderer=new NI(this.config.rendererParameters),this.renderer.setPixelRatio(pi.pixelRatio),this.renderer.outputColorSpace=gs,this.renderer.domElement.className="psv-canvas",this.scene=new vv,this.camera=new rn(50,16/9,.1,2*Ha),this.camera.matrixAutoUpdate=!1,this.mesh=this.viewer.adapter.createMesh(),this.mesh.userData={[$s]:!0},this.meshContainer=new oa,this.meshContainer.add(this.mesh),this.scene.add(this.meshContainer),this.raycaster=new HI,this.frustum=new up,this.container=document.createElement("div"),this.container.className="psv-canvas-container",this.container.appendChild(this.renderer.domElement),this.viewer.container.appendChild(this.container),this.viewer.addEventListener(Fo.type,this),this.viewer.addEventListener(ds.type,this),this.viewer.addEventListener(Oo.type,this),this.viewer.addEventListener(Do.type,this),this.viewer.addEventListener(Ni.type,this),this.hide()}get panoramaPose(){return this.mesh.rotation}get sphereCorrection(){return this.meshContainer.rotation}init(){this.show(),this.renderer.setAnimationLoop(i=>this.__renderLoop(i))}destroy(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(Fo.type,this),this.viewer.removeEventListener(ds.type,this),this.viewer.removeEventListener(Oo.type,this),this.viewer.removeEventListener(Do.type,this),this.viewer.removeEventListener(Ni.type,this),super.destroy()}handleEvent(i){switch(i.type){case Fo.type:this.__onSizeUpdated();break;case ds.type:this.__onZoomUpdated();break;case Oo.type:this.__onPositionUpdated();break;case Do.type:this.__onPositionUpdated();break;case Ni.type:i.containsOptions("fisheye")&&this.__onPositionUpdated();break}}hide(){this.container.style.opacity="0"}show(){this.container.style.opacity="1"}setCustomRenderer(i){i?this.customRenderer=i(this.renderer):this.customRenderer=null,this.viewer.needsUpdate()}__onSizeUpdated(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onZoomUpdated(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onPositionUpdated(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.rotateZ(-this.state.roll),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__renderLoop(i){const e=this.timestamp?i-this.timestamp:0;this.timestamp=i,this.viewer.dispatchEvent(new Cb(i,e)),this.viewer.dynamics.update(e),(this.state.needsUpdate||this.state.continuousUpdateCount>0)&&(this.state.needsUpdate=!1,(this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new y_))}setTexture(i){this.state.textureData&&this.viewer.adapter.disposeTexture(this.state.textureData),this.state.textureData=i,this.viewer.adapter.setTexture(this.mesh,i),this.viewer.needsUpdate()}setPanoramaPose(i,e=this.mesh){const t=this.viewer.dataHelper.cleanPanoramaPose(i),n=(t.pan?1:0)+(t.tilt?1:0)+(t.roll?1:0);!ca.useNewAnglesOrder&&n>1&&(Ht("'panoData' Euler angles will change in version 5.11.0."),Ht("Set 'Viewer.useNewAnglesOrder = true;' to remove this warning (you might have to adapt your poseHeading/posePitch/poseRoll parameters).")),ca.useNewAnglesOrder?e.rotation.set(t.tilt,t.pan,t.roll,"YXZ"):e.rotation.set(-t.tilt,-t.pan,-t.roll,"ZXY")}setSphereCorrection(i,e=this.meshContainer){const t=this.viewer.dataHelper.cleanSphereCorrection(i),n=(t.pan?1:0)+(t.tilt?1:0)+(t.roll?1:0);!ca.useNewAnglesOrder&&n>1&&(Ht("'sphereCorrection' Euler angles will change in version 5.11.0."),Ht("Set 'Viewer.useNewAnglesOrder = true;' to remove this warning (you might have to adapt your pan/tilt/roll parameters).")),ca.useNewAnglesOrder?e.rotation.set(t.tilt,t.pan,t.roll,"YXZ"):e.rotation.set(t.tilt,t.pan,t.roll,"ZXY")}transition(i,e){const t=!oi(e.position),n=!oi(e.zoom),s=new Ep(t?this.viewer.dataHelper.cleanPosition(e.position):void 0,e.zoom);this.viewer.dispatchEvent(s);const r=new oa,a=this.viewer.adapter.createMesh();if(this.viewer.adapter.setTexture(a,i,!0),this.viewer.adapter.setTextureOpacity(a,0),this.setPanoramaPose(i.panoData,a),this.setSphereCorrection(e.sphereCorrection,r),t&&e.transition==="fade-only"){const c=this.viewer.getPosition(),d=new me(0,1,0);r.rotateOnWorldAxis(d,s.position.yaw-c.yaw);const h=new me(0,1,0).cross(this.camera.getWorldDirection(new me)).normalize();r.rotateOnWorldAxis(h,s.position.pitch-c.pitch)}r.add(a),this.scene.add(r),this.renderer.setRenderTarget(new Hs),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);const{duration:o,properties:l}=this.viewer.dataHelper.getAnimationProperties(e.speed,e.transition===!0?s.position:null,s.zoomLevel),u=new qo({properties:{...l,opacity:{start:0,end:1}},duration:o,easing:"inOutCubic",onTick:c=>{this.viewer.adapter.setTextureOpacity(a,c.opacity),t&&e.transition===!0&&this.viewer.dynamics.position.setValue({yaw:c.yaw,pitch:c.pitch}),n&&this.viewer.dynamics.zoom.setValue(c.zoom),this.viewer.needsUpdate()}});return u.then(c=>{c?(this.setTexture(i),this.viewer.adapter.setTextureOpacity(this.mesh,1),this.setPanoramaPose(i.panoData),this.setSphereCorrection(e.sphereCorrection),t&&e.transition==="fade-only"&&this.viewer.rotate(e.position)):this.viewer.adapter.disposeTexture(i),this.scene.remove(r),a.geometry.dispose(),a.geometry=null}),u}getIntersections(i){var t;mc.x=2*i.x/this.state.size.width-1,mc.y=-2*i.y/this.state.size.height+1,this.raycaster.setFromCamera(mc,this.camera);const e=this.raycaster.intersectObjects(this.scene.children,!0).filter(n=>n.object.visible).filter(n=>n.object.isMesh&&!!n.object.userData);return(t=this.customRenderer)!=null&&t.getIntersections&&e.push(...this.customRenderer.getIntersections(this.raycaster,mc)),e}isObjectVisible(i){if(!i)return!1;if(this.frustumNeedsUpdate&&(Cv.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.frustum.setFromProjectionMatrix(Cv),this.frustumNeedsUpdate=!1),i.isVector3)return this.frustum.containsPoint(i);if(i.isMesh&&i.geometry){const e=i;return e.geometry.boundingBox||e.geometry.computeBoundingBox(),Av.copy(e.geometry.boundingBox).applyMatrix4(e.matrixWorld),this.frustum.intersectsBox(Av)}else return i.isObject3D?this.frustum.intersectsObject(i):!1}addObject(i){this.scene.add(i)}removeObject(i){this.scene.remove(i)}cleanScene(i){const e=t=>{var n;(n=t.map)==null||n.dispose(),t.uniforms&&Object.values(t.uniforms).forEach(s=>{var r,a;(a=(r=s.value)==null?void 0:r.dispose)==null||a.call(r)}),t.dispose()};i.traverse(t=>{var n,s;(n=t.geometry)==null||n.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(r=>{e(r)}):e(t.material)),t instanceof vv||(s=t.dispose)==null||s.call(t),t!==i&&this.cleanScene(t)})}},PO=class extends hp{load(i,e,t,n,s){const r=new Request(i,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(r,{signal:s}).then(a=>{if(a.status===200||a.status===0){const o=a.body.getReader(),l=a.headers.get("Content-Length")||a.headers.get("X-File-Size"),u=l?parseInt(l):0,c=u!==0;let d=0;const h=new ReadableStream({start(f){p();function p(){o.read().then(({done:g,value:v})=>{if(g)f.close();else{d+=v.byteLength;const m=new ProgressEvent("progress",{lengthComputable:c,loaded:d,total:u});t(m),f.enqueue(v),p()}}).catch(g=>{n(g)})}}});return new Response(h)}else throw new Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>a.blob()).then(a=>{e(a)}).catch(a=>{n(a)})}},LO=class extends hp{load(i,e,t,n){const s=document.createElement("img");function r(){l(),e(this)}function a(u){if(l(),n!=null&&n.aborted){const c=new Error;c.name="AbortError",c.message="The operation was aborted.",t(c)}else t(u)}function o(){s.src=""}function l(){s.removeEventListener("load",r,!1),s.removeEventListener("error",a,!1),n==null||n.removeEventListener("abort",o,!1)}return s.addEventListener("load",r,!1),s.addEventListener("error",a,!1),n==null||n.addEventListener("abort",o,!1),!i.startsWith("data:")&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),s.src=i,s}},RO=class extends hl{constructor(i){super(i),this.abortCtrl={},this.fileLoader=new PO,this.imageLoader=new LO,this.config.withCredentials&&(this.fileLoader.setWithCredentials(!0),this.imageLoader.setCrossOrigin("use-credentials"))}destroy(){this.abortLoading(),super.destroy()}abortLoading(){Object.values(this.abortCtrl).forEach(i=>i.abort()),this.abortCtrl={}}loadFile(i,e,t){const n=ra.get(i,t);if(n){if(n instanceof Blob)return e==null||e(100),Promise.resolve(n);ra.remove(i,t)}return this.config.requestHeaders&&this.fileLoader.setRequestHeader(this.config.requestHeaders(i)),new Promise((s,r)=>{let a=0;e==null||e(a),this.fileLoader.load(i,o=>{a=100,e==null||e(a),ra.add(i,t,o),s(o)},o=>{if(o.lengthComputable){const l=o.loaded/o.total*100;l>a&&(a=l,e==null||e(a))}},o=>{r(o)},this.__getAbortSignal(t))})}loadImage(i,e,t){const n=ra.get(i,t);return n?(e==null||e(100),n instanceof Blob?this.blobToImage(n):Promise.resolve(n)):!e&&!this.config.requestHeaders?new Promise((s,r)=>{this.imageLoader.load(i,a=>{ra.add(i,t,a),s(a)},a=>{r(a)},this.__getAbortSignal(t))}):this.loadFile(i,e,t).then(s=>this.blobToImage(s))}blobToImage(i){return new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{URL.revokeObjectURL(n.src),e(n)},n.onerror=t,n.src=URL.createObjectURL(i)})}preloadPanorama(i){return this.viewer.adapter.supportsPreload(i)?this.viewer.adapter.loadTexture(i,!1):Promise.reject(new ft("Current adapter does not support preload"))}__getAbortSignal(i){var e;return i?((e=this.abortCtrl[i])!=null&&e.signal.aborted&&delete this.abortCtrl[i],this.abortCtrl[i]||(this.abortCtrl[i]=new AbortController),this.abortCtrl[i].signal):null}},IO=class extends hl{constructor(i){super(i),this.zoom=new xo(e=>{this.viewer.state.vFov=this.viewer.dataHelper.zoomLevelToFov(e),this.viewer.state.hFov=this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov),this.viewer.dispatchEvent(new ds(e))},{defaultValue:this.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),this.position=new bb(e=>{this.viewer.dataHelper.sphericalCoordsToVector3(e,this.viewer.state.direction),this.viewer.dispatchEvent(new Oo(e))},{yaw:new xo(null,{defaultValue:this.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new xo(null,{defaultValue:this.config.defaultPitch,min:-Math.PI/2,max:Math.PI/2,wrap:!1})}),this.roll=new xo(e=>{this.viewer.state.roll=e,this.viewer.dispatchEvent(new Do(e))},{defaultValue:0,min:-Math.PI,max:Math.PI,wrap:!1}),this.updateSpeeds()}updateSpeeds(){this.zoom.setSpeed(this.config.zoomSpeed*50),this.position.setSpeed($t.degToRad(this.config.moveSpeed*50)),this.roll.setSpeed($t.degToRad(this.config.moveSpeed*50))}update(i){this.zoom.update(i),this.position.update(i),this.roll.update(i)}},OO=class{constructor(){this.ready=!1,this.needsUpdate=!1,this.continuousUpdateCount=0,this.keyboardEnabled=!1,this.direction=new me(0,0,Ha),this.roll=0,this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0}}},ca=class extends Eb{constructor(i){var e,t,n;if(super(),this.plugins={},this.children=[],this.onResize=gp(()=>this.navbar.autoSize(),500),this.parent=nb(i.container),!this.parent)throw new ft('"container" element not found.');this.parent[$s]=this,this.container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),yb(this.parent),vb(this.container,"core"),this.state=new OO,this.config=mO(i),this.__setSize(this.config.size),this.overlay=new bO(this);try{pi.load()}catch(s){console.error(s),this.showError(this.config.lang.webglError);return}ra.init(),this.adapter=new this.config.adapter[0](this,this.config.adapter[1]),this.renderer=new AO(this),this.textureLoader=new RO(this),this.eventsHandler=new CO(this),this.dataHelper=new SO(this),this.dynamics=new IO(this),(t=(e=this.adapter).init)==null||t.call(e),this.loader=new vO(this),this.navbar=new gO(this),this.panel=new wO(this),this.notification=new yO(this),this.autoSize(),this.setCursor(null),yp(pi.isTouchEnabled,s=>{Cu(this.container,"psv--is-touch",s)}),this.config.plugins.forEach(([s,r])=>{this.plugins[s.id]=new s(this,r)});for(const s of Object.values(this.plugins))(n=s.init)==null||n.call(s);this.config.navbar&&this.navbar.setButtons(this.config.navbar),this.state.loadingPromise||(this.config.panorama?this.setPanorama(this.config.panorama):this.loader.show())}destroy(){var i,e,t,n,s,r;this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(const[a,o]of Object.entries(this.plugins))o.destroy(),delete this.plugins[a];this.children.slice().forEach(a=>a.destroy()),this.children.length=0,(i=this.eventsHandler)==null||i.destroy(),(e=this.renderer)==null||e.destroy(),(t=this.textureLoader)==null||t.destroy(),(n=this.dataHelper)==null||n.destroy(),(s=this.adapter)==null||s.destroy(),(r=this.dynamics)==null||r.destroy(),this.parent.removeChild(this.container),delete this.parent[$s]}init(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&this.navbar.show(),this.config.keyboard==="always"&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new ko)}resetIdleTimer(){this.state.idleTime=performance.now()}disableIdleTimer(){this.state.idleTime=-1}getPlugin(i){if(typeof i=="string")return this.plugins[i];{const e=bf(i);return e?this.plugins[e.id]:null}}getPosition(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}getZoomLevel(){return this.dynamics.zoom.current}getSize(){return{...this.state.size}}isFullscreenEnabled(){return ob(this.parent,pi.isIphone)}needsUpdate(){this.state.needsUpdate=!0}needsContinuousUpdate(i){i?this.state.continuousUpdateCount++:this.state.continuousUpdateCount>0&&this.state.continuousUpdateCount--}autoSize(){(this.container.clientWidth!==this.state.size.width||this.container.clientHeight!==this.state.size.height)&&(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new Fo(this.getSize())),this.onResize())}setPanorama(i,e={}){var s;this.textureLoader.abortLoading(),(s=this.state.transitionAnimation)==null||s.cancel(),this.state.ready||["sphereCorrection","panoData"].forEach(r=>{r in e||(e[r]=this.config[r])}),e.transition===void 0&&(e.transition=!0),e.speed===void 0&&(e.speed=Xy),e.showLoader===void 0&&(e.showLoader=!0),e.caption===void 0&&(e.caption=this.config.caption),e.description===void 0&&(e.description=this.config.description),!e.panoData&&typeof this.config.panoData=="function"&&(e.panoData=this.config.panoData),this.hideError(),this.resetIdleTimer(),this.config.panorama=i,this.config.caption=e.caption,this.config.description=e.description;const t=r=>{if(pb(r))return!1;if(this.loader.hide(),this.state.loadingPromise=null,r)throw this.navbar.setCaption(""),this.showError(this.config.lang.loadError),console.error(r),this.dispatchEvent(new c_(i,r)),r;return this.navbar.setCaption(this.config.caption),!0};this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`),(e.showLoader||!this.state.ready)&&this.loader.show(),this.dispatchEvent(new s_(i));const n=this.adapter.loadTexture(this.config.panorama,!0,e.panoData).then(r=>{if(r.panorama!==this.config.panorama)throw this.adapter.disposeTexture(r),ff();const a=this.dataHelper.cleanPanoramaOptions(e,r.panoData);return(!oi(a.zoom)||!oi(a.position))&&this.stopAll(),{textureData:r,cleanOptions:a}});return!e.transition||!this.state.ready||!this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=n.then(({textureData:r,cleanOptions:a})=>{this.renderer.show(),this.renderer.setTexture(r),this.renderer.setPanoramaPose(r.panoData),this.renderer.setSphereCorrection(e.sphereCorrection),this.state.ready||this.init(),this.dispatchEvent(new vf(r)),oi(a.zoom)||this.zoom(a.zoom),oi(a.position)||this.rotate(a.position)}).then(()=>t(),r=>t(r)):this.state.loadingPromise=n.then(({textureData:r,cleanOptions:a})=>(this.loader.hide(),this.dispatchEvent(new vf(r)),this.state.transitionAnimation=this.renderer.transition(r,a),this.state.transitionAnimation)).then(r=>{if(this.state.transitionAnimation=null,!r)throw ff()}).then(()=>t(),r=>t(r)),this.state.loadingPromise}setOptions(i){const e={...this.config,...i};for(let[t,n]of Object.entries(i)){if(!(t in Gs)){Ht(`Unknown option ${t}`);continue}if(t in Mv){Ht(Mv[t]);continue}switch(t in _f&&(n=_f[t](n,{rawConfig:e,defValue:Gs[t]})),this.config[t]=n,t){case"mousemove":this.state.cursorOverride||this.setCursor(null);break;case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new ds(this.getZoomLevel()));break;case"keyboard":this.config.keyboard==="always"?this.startKeyboardControl():this.stopKeyboardControl();break}}this.needsUpdate(),this.dispatchEvent(new Ni(Object.keys(i)))}setOption(i,e){this.setOptions({[i]:e})}showError(i){this.overlay.show({id:fi.ERROR,image:xO,title:i,dissmisable:!1})}hideError(){this.overlay.hide(fi.ERROR)}rotate(i){const e=new Lb(this.dataHelper.cleanPosition(i));this.dispatchEvent(e),!e.defaultPrevented&&this.dynamics.position.setValue(e.position)}zoom(i){this.dynamics.zoom.setValue(i)}zoomIn(i=1){this.dynamics.zoom.step(i)}zoomOut(i=1){this.dynamics.zoom.step(-i)}animate(i){const e=bp(i),t=!oi(i.zoom),n=new Ep(e?this.dataHelper.cleanPosition(i):void 0,i.zoom);if(this.dispatchEvent(n),n.defaultPrevented)return;this.stopAll();const{duration:s,properties:r}=this.dataHelper.getAnimationProperties(i.speed,n.position,n.zoomLevel);return s?(this.state.animation=new qo({properties:r,duration:s,easing:i.easing||"inOutSine",onTick:a=>{e&&this.dynamics.position.setValue({yaw:a.yaw,pitch:a.pitch}),t&&this.dynamics.zoom.setValue(a.zoom)}}),this.state.animation.then(()=>{this.state.animation=null,this.resetIdleTimer()}),this.state.animation):(e&&this.rotate(n.position),t&&this.zoom(n.zoomLevel),new qo(null))}stopAnimation(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}resize(i){this.__setSize(i),this.autoSize()}__setSize(i){const e=i;["width","height"].forEach(t=>{i&&e[t]&&(/^[0-9.]+$/.test(e[t])&&(e[t]+="px"),this.parent.style[t]=e[t])})}enterFullscreen(){this.isFullscreenEnabled()||lb(this.parent,pi.isIphone)}exitFullscreen(){this.isFullscreenEnabled()&&cb(pi.isIphone)}toggleFullscreen(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}startKeyboardControl(){this.state.keyboardEnabled=!0}stopKeyboardControl(){this.state.keyboardEnabled=!1}createTooltip(i){return new EO(this,i)}setCursor(i){this.state.cursorOverride=i,i?this.container.style.cursor=i:this.container.style.cursor=this.config.mousemove?"move":"default"}observeObjects(i){this.state.objectsObservers[i]||(this.state.objectsObservers[i]=null)}unobserveObjects(i){delete this.state.objectsObservers[i]}stopAll(){return this.dispatchEvent(new O_),this.disableIdleTimer(),this.stopAnimation()}};ca.useNewAnglesOrder=!1;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const iw="168",gc=2e3,Pv=2001,wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Lv=1234567;const nw=Math.PI/180,sw=180/Math.PI;function DO(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(wi[i&255]+wi[i>>8&255]+wi[i>>16&255]+wi[i>>24&255]+"-"+wi[e&255]+wi[e>>8&255]+"-"+wi[e>>16&15|64]+wi[e>>24&255]+"-"+wi[t&63|128]+wi[t>>8&255]+"-"+wi[t>>16&255]+wi[t>>24&255]+wi[n&255]+wi[n>>8&255]+wi[n>>16&255]+wi[n>>24&255]).toLowerCase()}function Pa(i,e,t){return Math.max(e,Math.min(t,i))}function rw(i,e){return(i%e+e)%e}function kO(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function NO(i,e,t){return i!==e?(t-i)/(e-i):0}function aw(i,e,t){return(1-t)*i+t*e}function FO(i,e,t,n){return aw(i,e,1-Math.exp(-t*n))}function UO(i,e=1){return e-Math.abs(rw(i,e*2)-e)}function zO(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function BO(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function HO(i,e){return i+Math.floor(Math.random()*(e-i+1))}function VO(i,e){return i+Math.random()*(e-i)}function $O(i){return i*(.5-Math.random())}function GO(i){i!==void 0&&(Lv=i);let e=Lv+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function WO(i){return i*nw}function jO(i){return i*sw}function XO(i){return(i&i-1)===0&&i!==0}function qO(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function YO(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function KO(i,e,t,n,s){const r=Math.cos,a=Math.sin,o=r(t/2),l=a(t/2),u=r((e+n)/2),c=a((e+n)/2),d=r((e-n)/2),h=a((e-n)/2),f=r((n-e)/2),p=a((n-e)/2);switch(s){case"XYX":i.set(o*c,l*d,l*h,o*u);break;case"YZY":i.set(l*h,o*c,l*d,o*u);break;case"ZXZ":i.set(l*d,l*h,o*c,o*u);break;case"XZX":i.set(o*c,l*p,l*f,o*u);break;case"YXY":i.set(l*f,o*c,l*p,o*u);break;case"ZYZ":i.set(l*p,l*f,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ZO(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function QO(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const JO={DEG2RAD:nw,RAD2DEG:sw,generateUUID:DO,clamp:Pa,euclideanModulo:rw,mapLinear:kO,inverseLerp:NO,lerp:aw,damp:FO,pingpong:UO,smoothstep:zO,smootherstep:BO,randInt:HO,randFloat:VO,randFloatSpread:$O,seededRandom:GO,degToRad:WO,radToDeg:jO,isPowerOfTwo:XO,ceilPowerOfTwo:qO,floorPowerOfTwo:YO,setQuaternionFromProperEuler:KO,normalize:QO,denormalize:ZO};class Sr{constructor(e=0,t=0){Sr.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Pa(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*s+e.x,this.y=r*s+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class eD{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,a,o){let l=n[s+0],u=n[s+1],c=n[s+2],d=n[s+3];const h=r[a+0],f=r[a+1],p=r[a+2],g=r[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(d!==g||l!==h||u!==f||c!==p){let v=1-o;const m=l*h+u*f+c*p+d*g,b=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){const M=Math.sqrt(_),x=Math.atan2(M,m*b);v=Math.sin(v*x)/M,o=Math.sin(o*x)/M}const y=o*b;if(l=l*v+h*y,u=u*v+f*y,c=c*v+p*y,d=d*v+g*y,v===1-o){const M=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=M,u*=M,c*=M,d*=M}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,s,r,a){const o=n[s],l=n[s+1],u=n[s+2],c=n[s+3],d=r[a],h=r[a+1],f=r[a+2],p=r[a+3];return e[t]=o*p+c*d+l*f-u*h,e[t+1]=l*p+c*h+u*d-o*f,e[t+2]=u*p+c*f+o*h-l*d,e[t+3]=c*p-o*d-l*h-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(n/2),c=o(s/2),d=o(r/2),h=l(n/2),f=l(s/2),p=l(r/2);switch(a){case"XYZ":this._x=h*c*d+u*f*p,this._y=u*f*d-h*c*p,this._z=u*c*p+h*f*d,this._w=u*c*d-h*f*p;break;case"YXZ":this._x=h*c*d+u*f*p,this._y=u*f*d-h*c*p,this._z=u*c*p-h*f*d,this._w=u*c*d+h*f*p;break;case"ZXY":this._x=h*c*d-u*f*p,this._y=u*f*d+h*c*p,this._z=u*c*p+h*f*d,this._w=u*c*d-h*f*p;break;case"ZYX":this._x=h*c*d-u*f*p,this._y=u*f*d+h*c*p,this._z=u*c*p-h*f*d,this._w=u*c*d+h*f*p;break;case"YZX":this._x=h*c*d+u*f*p,this._y=u*f*d+h*c*p,this._z=u*c*p-h*f*d,this._w=u*c*d-h*f*p;break;case"XZY":this._x=h*c*d-u*f*p,this._y=u*f*d-h*c*p,this._z=u*c*p+h*f*d,this._w=u*c*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],h=n+o+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-l)*f,this._y=(r-u)*f,this._z=(a-s)*f}else if(n>o&&n>d){const f=2*Math.sqrt(1+n-o-d);this._w=(c-l)/f,this._x=.25*f,this._y=(s+a)/f,this._z=(r+u)/f}else if(o>d){const f=2*Math.sqrt(1+o-n-d);this._w=(r-u)/f,this._x=(s+a)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+d-n-o);this._w=(a-s)/f,this._x=(r+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Pa(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+s*u-r*l,this._y=s*c+a*l+r*o-n*u,this._z=r*c+a*u+n*l-s*o,this._w=a*c-n*o-s*l-r*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*n+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ci{constructor(e=0,t=0,n=0){Ci.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Rv.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Rv.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*s-o*n),c=2*(o*t-r*s),d=2*(r*n-a*t);return this.x=t+l*u+a*d-o*c,this.y=n+l*c+o*u-r*d,this.z=s+l*d+r*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,a=t.x,o=t.y,l=t.z;return this.x=s*l-r*o,this.y=r*a-n*l,this.z=n*o-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return sh.copy(this).projectOnVector(e),this.sub(sh)}reflect(e){return this.sub(sh.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Pa(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sh=new Ci,Rv=new eD;class Ko{constructor(e,t,n,s,r,a,o,l,u,c,d,h,f,p,g,v){Ko.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,u,c,d,h,f,p,g,v)}set(e,t,n,s,r,a,o,l,u,c,d,h,f,p,g,v){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=s,m[1]=r,m[5]=a,m[9]=o,m[13]=l,m[2]=u,m[6]=c,m[10]=d,m[14]=h,m[3]=f,m[7]=p,m[11]=g,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ko().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/na.setFromMatrixColumn(e,0).length(),r=1/na.setFromMatrixColumn(e,1).length(),a=1/na.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(s),u=Math.sin(s),c=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=a*c,f=a*d,p=o*c,g=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=f+p*u,t[5]=h-g*u,t[9]=-o*l,t[2]=g-h*u,t[6]=p+f*u,t[10]=a*l}else if(e.order==="YXZ"){const h=l*c,f=l*d,p=u*c,g=u*d;t[0]=h+g*o,t[4]=p*o-f,t[8]=a*u,t[1]=a*d,t[5]=a*c,t[9]=-o,t[2]=f*o-p,t[6]=g+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*c,f=l*d,p=u*c,g=u*d;t[0]=h-g*o,t[4]=-a*d,t[8]=p+f*o,t[1]=f+p*o,t[5]=a*c,t[9]=g-h*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*c,f=a*d,p=o*c,g=o*d;t[0]=l*c,t[4]=p*u-f,t[8]=h*u+g,t[1]=l*d,t[5]=g*u+h,t[9]=f*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,f=a*u,p=o*l,g=o*u;t[0]=l*c,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=f*d+p,t[10]=h-g*d}else if(e.order==="XZY"){const h=a*l,f=a*u,p=o*l,g=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=h*d+g,t[5]=a*c,t[9]=f*d-p,t[2]=p*d-f,t[6]=o*c,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tD,e,iD)}lookAt(e,t,n){const s=this.elements;return Vi.subVectors(e,t),Vi.lengthSq()===0&&(Vi.z=1),Vi.normalize(),Ts.crossVectors(n,Vi),Ts.lengthSq()===0&&(Math.abs(n.z)===1?Vi.x+=1e-4:Vi.z+=1e-4,Vi.normalize(),Ts.crossVectors(n,Vi)),Ts.normalize(),vc.crossVectors(Vi,Ts),s[0]=Ts.x,s[4]=vc.x,s[8]=Vi.x,s[1]=Ts.y,s[5]=vc.y,s[9]=Vi.y,s[2]=Ts.z,s[6]=vc.z,s[10]=Vi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[4],l=n[8],u=n[12],c=n[1],d=n[5],h=n[9],f=n[13],p=n[2],g=n[6],v=n[10],m=n[14],b=n[3],_=n[7],y=n[11],M=n[15],x=s[0],S=s[4],A=s[8],E=s[12],w=s[1],C=s[5],P=s[9],T=s[13],R=s[2],F=s[6],z=s[10],D=s[14],O=s[3],j=s[7],k=s[11],I=s[15];return r[0]=a*x+o*w+l*R+u*O,r[4]=a*S+o*C+l*F+u*j,r[8]=a*A+o*P+l*z+u*k,r[12]=a*E+o*T+l*D+u*I,r[1]=c*x+d*w+h*R+f*O,r[5]=c*S+d*C+h*F+f*j,r[9]=c*A+d*P+h*z+f*k,r[13]=c*E+d*T+h*D+f*I,r[2]=p*x+g*w+v*R+m*O,r[6]=p*S+g*C+v*F+m*j,r[10]=p*A+g*P+v*z+m*k,r[14]=p*E+g*T+v*D+m*I,r[3]=b*x+_*w+y*R+M*O,r[7]=b*S+_*C+y*F+M*j,r[11]=b*A+_*P+y*z+M*k,r[15]=b*E+_*T+y*D+M*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],f=e[14],p=e[3],g=e[7],v=e[11],m=e[15];return p*(+r*l*d-s*u*d-r*o*h+n*u*h+s*o*f-n*l*f)+g*(+t*l*f-t*u*h+r*a*h-s*a*f+s*u*c-r*l*c)+v*(+t*u*d-t*o*f-r*a*d+n*a*f+r*o*c-n*u*c)+m*(-s*o*c-t*l*d+t*o*h+s*a*d-n*a*h+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],b=d*v*u-g*h*u+g*l*f-o*v*f-d*l*m+o*h*m,_=p*h*u-c*v*u-p*l*f+a*v*f+c*l*m-a*h*m,y=c*g*u-p*d*u+p*o*f-a*g*f-c*o*m+a*d*m,M=p*d*l-c*g*l-p*o*h+a*g*h+c*o*v-a*d*v,x=t*b+n*_+s*y+r*M;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=b*S,e[1]=(g*h*r-d*v*r-g*s*f+n*v*f+d*s*m-n*h*m)*S,e[2]=(o*v*r-g*l*r+g*s*u-n*v*u-o*s*m+n*l*m)*S,e[3]=(d*l*r-o*h*r-d*s*u+n*h*u+o*s*f-n*l*f)*S,e[4]=_*S,e[5]=(c*v*r-p*h*r+p*s*f-t*v*f-c*s*m+t*h*m)*S,e[6]=(p*l*r-a*v*r-p*s*u+t*v*u+a*s*m-t*l*m)*S,e[7]=(a*h*r-c*l*r+c*s*u-t*h*u-a*s*f+t*l*f)*S,e[8]=y*S,e[9]=(p*d*r-c*g*r-p*n*f+t*g*f+c*n*m-t*d*m)*S,e[10]=(a*g*r-p*o*r+p*n*u-t*g*u-a*n*m+t*o*m)*S,e[11]=(c*o*r-a*d*r-c*n*u+t*d*u+a*n*f-t*o*f)*S,e[12]=M*S,e[13]=(c*g*s-p*d*s+p*n*h-t*g*h-c*n*v+t*d*v)*S,e[14]=(p*o*s-a*g*s-p*n*l+t*g*l+a*n*v-t*o*v)*S,e[15]=(a*d*s-c*o*s+c*n*l-t*d*l-a*n*h+t*o*h)*S,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,a=e.x,o=e.y,l=e.z,u=r*a,c=r*o;return this.set(u*a+n,u*o-s*l,u*l+s*o,0,u*o+s*l,c*o+n,c*l-s*a,0,u*l-s*o,c*l+s*a,r*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,a){return this.set(1,n,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,a=t._y,o=t._z,l=t._w,u=r+r,c=a+a,d=o+o,h=r*u,f=r*c,p=r*d,g=a*c,v=a*d,m=o*d,b=l*u,_=l*c,y=l*d,M=n.x,x=n.y,S=n.z;return s[0]=(1-(g+m))*M,s[1]=(f+y)*M,s[2]=(p-_)*M,s[3]=0,s[4]=(f-y)*x,s[5]=(1-(h+m))*x,s[6]=(v+b)*x,s[7]=0,s[8]=(p+_)*S,s[9]=(v-b)*S,s[10]=(1-(h+g))*S,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=na.set(s[0],s[1],s[2]).length();const a=na.set(s[4],s[5],s[6]).length(),o=na.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],bn.copy(this);const u=1/r,c=1/a,d=1/o;return bn.elements[0]*=u,bn.elements[1]*=u,bn.elements[2]*=u,bn.elements[4]*=c,bn.elements[5]*=c,bn.elements[6]*=c,bn.elements[8]*=d,bn.elements[9]*=d,bn.elements[10]*=d,t.setFromRotationMatrix(bn),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,s,r,a,o=gc){const l=this.elements,u=2*r/(t-e),c=2*r/(n-s),d=(t+e)/(t-e),h=(n+s)/(n-s);let f,p;if(o===gc)f=-(a+r)/(a-r),p=-2*a*r/(a-r);else if(o===Pv)f=-a/(a-r),p=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,s,r,a,o=gc){const l=this.elements,u=1/(t-e),c=1/(n-s),d=1/(a-r),h=(t+e)*u,f=(n+s)*c;let p,g;if(o===gc)p=(a+r)*d,g=-2*d;else if(o===Pv)p=r*d,g=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const na=new Ci,bn=new Ko,tD=new Ci(0,0,0),iD=new Ci(1,1,1),Ts=new Ci,vc=new Ci,Vi=new Ci;class nD{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let s=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let o=0,l=r-1,u;for(;o<=l;)if(s=Math.floor(o+(l-o)/2),u=n[s]-a,u<0)o=s+1;else if(u>0)l=s-1;else{l=s;break}if(s=l,n[s]===a)return s/(r-1);const c=n[s],h=n[s+1]-c,f=(a-c)/h;return(s+f)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),l=t||(a.isVector2?new Sr:new Ci);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Ci,s=[],r=[],a=[],o=new Ci,l=new Ko;for(let f=0;f<=e;f++){const p=f/e;s[f]=this.getTangentAt(p,new Ci)}r[0]=new Ci,a[0]=new Ci;let u=Number.MAX_VALUE;const c=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);c<=u&&(u=c,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),h<=u&&n.set(0,0,1),o.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(s[f-1],s[f]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(Pa(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(o,p))}a[f].crossVectors(s[f],r[f])}if(t===!0){let f=Math.acos(Pa(r[0].dot(r[e]),-1,1));f/=e,s[0].dot(o.crossVectors(r[0],r[e]))>0&&(f=-f);for(let p=1;p<=e;p++)r[p].applyMatrix4(l.makeRotationAxis(s[p],f*p)),a[p].crossVectors(s[p],r[p])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function Iv(i,e,t,n,s){const r=(n-e)*.5,a=(s-t)*.5,o=i*i,l=i*o;return(2*t-2*n+r+a)*l+(-3*t+3*n-2*r-a)*o+r*i+t}class sD extends nD{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Sr){const n=t,s=this.points,r=(s.length-1)*e,a=Math.floor(r),o=r-a,l=s[a===0?a:a-1],u=s[a],c=s[a>s.length-2?s.length-1:a+1],d=s[a>s.length-3?s.length-1:a+2];return n.set(Iv(o,l.x,u.x,c.x,d.x),Iv(o,l.y,u.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Sr().fromArray(s))}return this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:iw}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=iw);/*!
 * Photo Sphere Viewer / Autorotate Plugin 5.10.0
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var rD=Object.defineProperty,aD=(i,e)=>{for(var t in e)rD(i,t,{get:e[t],enumerable:!0})},oD={};aD(oD,{AutorotateEvent:()=>ga});var ow=class lw extends Iu{constructor(e){super(lw.type),this.autorotateEnabled=e}};ow.type="autorotate";var ga=ow,lD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>
`,cD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z"/><path d="M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>
`,Ap=class extends Ai{constructor(i){var e;super(i,{className:"psv-autorotate-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:cD,iconActive:lD}),this.plugin=this.viewer.getPlugin("autorotate"),(e=this.plugin)==null||e.addEventListener(ga.type,this)}destroy(){var i;(i=this.plugin)==null||i.removeEventListener(ga.type,this),super.destroy()}isSupported(){return!!this.plugin}handleEvent(i){i instanceof ga&&this.toggleActive(i.autorotateEnabled)}onClick(){this.plugin.isEnabled()&&(this.plugin.config.autostartOnIdle=!1),this.plugin.toggle()}};Ap.id="autorotate";var uD=Bt.getConfigParser({autostartDelay:2e3,autostartOnIdle:!0,autorotateSpeed:Bt.parseSpeed("2rpm"),autorotatePitch:null,autorotateZoomLvl:null,keypoints:null,startFromClosest:!0},{autostartOnIdle:(i,{rawConfig:e})=>i&&Bt.isNil(e.autostartDelay)?(Bt.logWarn("autostartOnIdle requires a non null autostartDelay"),!1):i,autorotateSpeed:i=>Bt.parseSpeed(i),autorotatePitch:i=>Bt.isNil(i)?null:Bt.parseAngle(i,!0),autorotateZoomLvl:i=>Bt.isNil(i)?null:JO.clamp(i,0,100)}),rh=16;function yo(i){return[i.yaw,i.pitch]}var pl=class extends Mp{constructor(i,e){super(i,e),this.state={initialStart:!0,enabled:!1,idx:-1,curve:[],startStep:null,endStep:null,startTime:null,stepDuration:null,remainingPause:null,lastTime:null,tooltip:null},this.state.initialStart=!Bt.isNil(this.config.autostartDelay)}init(){super.init(),this.video=this.viewer.getPlugin("video"),this.markers=this.viewer.getPlugin("markers"),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),this.viewer.addEventListener(di.StopAllEvent.type,this),this.viewer.addEventListener(di.BeforeRenderEvent.type,this),this.video||this.viewer.addEventListener(di.KeypressEvent.type,this)}destroy(){this.viewer.removeEventListener(di.StopAllEvent.type,this),this.viewer.removeEventListener(di.BeforeRenderEvent.type,this),this.viewer.removeEventListener(di.KeypressEvent.type,this),delete this.video,delete this.markers,delete this.keypoints,super.destroy()}handleEvent(i){switch(i.type){case di.StopAllEvent.type:this.stop();break;case di.BeforeRenderEvent.type:{this.__beforeRender(i.timestamp);break}case di.KeypressEvent.type:i.key===eu.KEY_CODES.Space&&this.viewer.state.keyboardEnabled&&(this.toggle(),i.preventDefault());break}}setKeypoints(i){if(!i)this.keypoints=null;else{if(i.length<2)throw new ft("At least two points are required");this.keypoints=i.map((e,t)=>{const n={position:null,markerId:null,pause:0,tooltip:null};let s;if(typeof e=="string"?n.markerId=e:Bt.isExtendedPosition(e)?s=e:(n.markerId=e.markerId,n.pause=e.pause,s=e.position,e.tooltip&&typeof e.tooltip=="object"?n.tooltip=e.tooltip:typeof e.tooltip=="string"&&(n.tooltip={content:e.tooltip})),n.markerId){if(!this.markers)throw new ft(`Keypoint #${t} references a marker but the markers plugin is not loaded`);const r=this.markers.getMarker(n.markerId);n.position=yo(r.state.position)}else if(s)n.position=yo(this.viewer.dataHelper.cleanPosition(s));else throw new ft(`Keypoint #${t} is missing marker or position`);return n})}this.isEnabled()&&(this.stop(),this.start())}isEnabled(){return this.state.enabled}start(){this.isEnabled()||(this.viewer.stopAll(),this.keypoints?this.config.startFromClosest&&this.__shiftKeypoints():this.__animate(),this.state.initialStart=!1,this.state.enabled=!0,this.dispatchEvent(new ga(!0)))}stop(){this.isEnabled()&&(this.__hideTooltip(),this.__reset(),this.viewer.stopAnimation(),this.viewer.dynamics.position.stop(),this.viewer.dynamics.zoom.stop(),this.state.enabled=!1,this.dispatchEvent(new ga(!1)))}toggle(){this.isEnabled()?this.stop():this.start()}reverse(){this.isEnabled()&&!this.keypoints&&(this.config.autorotateSpeed=-this.config.autorotateSpeed,this.__animate())}__animate(){let i;Bt.isNil(this.config.autorotateZoomLvl)?i=Promise.resolve(!0):i=this.viewer.animate({zoom:this.config.autorotateZoomLvl,speed:`${this.viewer.config.zoomSpeed*2}rpm`}),i.then(e=>{e&&(this.viewer.dynamics.position.roll({yaw:this.config.autorotateSpeed<0},Math.abs(this.config.autorotateSpeed/this.viewer.config.moveSpeed)),Bt.isNil(this.config.autorotatePitch)||this.viewer.dynamics.position.goto({pitch:this.config.autorotatePitch},Math.abs(this.config.autorotateSpeed/this.viewer.config.moveSpeed)))})}__reset(){this.state.idx=-1,this.state.curve=[],this.state.startStep=null,this.state.endStep=null,this.state.startTime=null,this.state.stepDuration=null,this.state.remainingPause=null,this.state.lastTime=null,this.state.tooltip=null}__beforeRender(i){(this.state.initialStart||this.config.autostartOnIdle)&&this.viewer.state.idleTime>0&&i-this.viewer.state.idleTime>this.config.autostartDelay&&this.start(),this.isEnabled()&&this.keypoints&&(this.state.startTime||(this.state.endStep=yo(this.viewer.getPosition()),this.__nextStep(),this.state.startTime=i,this.state.lastTime=i),this.__nextFrame(i))}__shiftKeypoints(){const i=yo(this.viewer.getPosition()),e=this.__findMinIndex(this.keypoints,t=>Bt.greatArcDistance(t.position,i));this.keypoints.push(...this.keypoints.splice(0,e))}__incrementIdx(){this.state.idx++,this.state.idx===this.keypoints.length&&(this.state.idx=0)}__showTooltip(){const i=this.keypoints[this.state.idx];if(i.tooltip){const e=this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);this.state.tooltip=this.viewer.createTooltip({content:i.tooltip.content,position:i.tooltip.position,top:e.y,left:e.x})}else if(i.markerId){const e=this.markers.getMarker(i.markerId);e.showTooltip(),this.state.tooltip=e.tooltip}}__hideTooltip(){if(this.state.tooltip){const i=this.keypoints[this.state.idx];i.tooltip?this.state.tooltip.hide():i.markerId&&this.markers.getMarker(i.markerId).hideTooltip(),this.state.tooltip=null}}__nextPoint(){const i=[];if(this.state.idx===-1){const s=yo(this.viewer.getPosition());i.push(s,s,this.keypoints[0].position,this.keypoints[1].position)}else for(let s=-1;s<3;s++){const r=this.state.idx+s<0?this.keypoints[this.keypoints.length-1]:this.keypoints[(this.state.idx+s)%this.keypoints.length];i.push(r.position)}const e=[new Sr(i[0][0],i[0][1])];let t=0;for(let s=1;s<=3;s++){const r=i[s-1][0]-i[s][0];r>Math.PI?t+=1:r<-Math.PI&&(t-=1),t!==0&&s===1&&(e[0].x-=t*2*Math.PI,t=0),e.push(new Sr(i[s][0]+t*2*Math.PI,i[s][1]))}const n=new sD(e).getPoints(rh*3).map(s=>[s.x,s.y]);this.state.curve=n.slice(rh+1,rh*2+1),this.state.idx!==-1?(this.state.remainingPause=this.keypoints[this.state.idx].pause,this.state.remainingPause?this.__showTooltip():this.__incrementIdx()):this.__incrementIdx()}__nextStep(){this.state.curve.length===0&&(this.__nextPoint(),this.state.endStep[0]=Bt.parseAngle(this.state.endStep[0])),this.state.startStep=this.state.endStep,this.state.endStep=this.state.curve.shift();const i=Bt.greatArcDistance(this.state.startStep,this.state.endStep);this.state.stepDuration=i*1e3/Math.abs(this.config.autorotateSpeed),i===0&&this.__nextStep()}__nextFrame(i){const e=i-this.state.lastTime;if(this.state.lastTime=i,this.state.remainingPause){if(this.state.remainingPause=Math.max(0,this.state.remainingPause-e),this.state.remainingPause>0)return;this.__hideTooltip(),this.__incrementIdx(),this.state.startTime=i}let t=(i-this.state.startTime)/this.state.stepDuration;t>=1&&(this.__nextStep(),t=0,this.state.startTime=i),this.viewer.rotate({yaw:this.state.startStep[0]+(this.state.endStep[0]-this.state.startStep[0])*t,pitch:this.state.startStep[1]+(this.state.endStep[1]-this.state.startStep[1])*t})}__findMinIndex(i,e){let t=0,n=Number.MAX_VALUE;return i.forEach((s,r)=>{const a=e(s);a<n&&(n=a,t=r)}),t}};pl.id="autorotate";pl.VERSION="5.10.0";pl.configParser=uD;pl.readonlyOptions=["keypoints"];Cp(Ap,"start");Gs.lang[Ap.id]="Automatic rotation";/*!
 * Photo Sphere Viewer / Gallery Plugin 5.10.0
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var dD=Object.defineProperty,hD=(i,e)=>{for(var t in e)dD(i,t,{get:e[t],enumerable:!0})},fD={};hD(fD,{HideGalleryEvent:()=>zo,ShowGalleryEvent:()=>Uo});var cw=class uw extends Iu{constructor(e){super(uw.type),this.fullscreen=e}};cw.type="show-gallery";var Uo=cw,dw=class hw extends Iu{constructor(){super(hw.type)}};dw.type="hide-gallery";var zo=dw,pD='<svg viewBox="185 115 330 330" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z"/><!--Created by Wolf Bse from the Noun Project--></svg>',Du=class extends Ai{constructor(i){super(i,{className:"psv-gallery-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:pD}),this.plugin=this.viewer.getPlugin("gallery"),this.plugin&&(this.plugin.addEventListener(Uo.type,this),this.plugin.addEventListener(zo.type,this))}destroy(){this.plugin&&(this.plugin.removeEventListener(Uo.type,this),this.plugin.removeEventListener(zo.type,this)),super.destroy()}handleEvent(i){i instanceof Uo?this.toggleActive(!0):i instanceof zo&&this.toggleActive(!1)}isSupported(){return!!this.plugin}onClick(){this.plugin.toggle()}};Du.id="gallery";var fw="psvGalleryItem",pw=Bt.dasherize(fw),ah="psv-gallery-item--active",mD=(i,e)=>`
${i.map(t=>`
<div class="psv-gallery-item" data-${pw}="${t.id}" style="width:${e.width}px; aspect-ratio:${e.width/e.height};">
  ${t.name?`<div class="psv-gallery-item-title"><span>${t.name}</span></div>`:""}
  <svg class="psv-gallery-item-thumb" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid slice"><use href="#psvGalleryBlankIcon"></use></svg>
  ${t.thumbnail?`<div class="psv-gallery-item-thumb" data-src="${t.thumbnail}"></div>`:""}
</div>
`).join("")}
`,gD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
  <defs>
    <symbol id="psvGalleryBlankIcon" viewBox="0 0 200 200">
      <rect x="0" y="0" width="200" height="200" fill="#666"/>
      <g transform="scale(0.25) translate(25 20) " fill="#eee">
        <path d="M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z"/>
        <path d="M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z"/>
        <path d="M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0"/>
      </g>
    </symbol>
  </defs>
</svg>`,vD=class extends js{constructor(i,e){super(e,{className:`psv-gallery ${eu.CAPTURE_EVENTS_CLASS}`}),this.plugin=i,this.state={visible:!0,mousedown:!1,initMouse:null,mouse:null,itemMargin:null,breakpoint:null},this.container.innerHTML=gD,this.container.querySelector("svg").style.display="none";const t=document.createElement("div");t.className="psv-panel-close-button",t.innerHTML=eu.ICONS.close,this.container.appendChild(t),this.items=document.createElement("div"),this.items.className="psv-gallery-container",this.container.appendChild(this.items),this.state.itemMargin=parseInt(Bt.getStyleProperty(this.items,"padding-left"),10),this.state.breakpoint=parseInt(Bt.getStyleProperty(this.container,"--psv-gallery-breakpoint"),10),this.observer=new IntersectionObserver(n=>{n.forEach(s=>{if(s.intersectionRatio>0){const r=s.target;r.style.backgroundImage=`url("${r.dataset.src}")`,delete r.dataset.src,this.observer.unobserve(s.target)}})},{root:this.viewer.container}),this.items.addEventListener("wheel",this),this.items.addEventListener("mousedown",this),this.items.addEventListener("mousemove",this),this.items.addEventListener("click",this),window.addEventListener("mouseup",this),t.addEventListener("click",()=>this.plugin.hide()),this.hide()}get isAboveBreakpoint(){return window.innerWidth>this.state.breakpoint}destroy(){window.removeEventListener("mouseup",this),this.observer.disconnect(),super.destroy()}handleEvent(i){switch(i.type){case"wheel":{if(this.isAboveBreakpoint){const e=i,t=this.plugin.config.thumbnailSize.width+(this.state.itemMargin??0);this.items.scrollLeft+=e.deltaY/Math.abs(e.deltaY)*t,i.preventDefault()}break}case"mousedown":this.state.mousedown=!0,this.isAboveBreakpoint?this.state.initMouse=i.clientX:this.state.initMouse=i.clientY,this.state.mouse=this.state.initMouse;break;case"mousemove":if(this.state.mousedown)if(this.isAboveBreakpoint){const e=this.state.mouse-i.clientX;this.items.scrollLeft+=e,this.state.mouse=i.clientX}else{const e=this.state.mouse-i.clientY;this.items.scrollTop+=e,this.state.mouse=i.clientY}break;case"mouseup":this.state.mousedown=!1,this.state.mouse=null,i.preventDefault();break;case"click":{const e=this.isAboveBreakpoint?i.clientX:i.clientY;if(Math.abs(this.state.initMouse-e)<10){const t=Bt.getMatchingTarget(i,".psv-gallery-item");t&&this.plugin.__click(t.dataset[fw])}break}}}show(){this.container.classList.add("psv-gallery--open"),this.state.visible=!0}hide(){this.container.classList.remove("psv-gallery--open"),this.state.visible=!1}setItems(i){this.items.innerHTML=mD(i,this.plugin.config.thumbnailSize),this.observer&&(this.observer.disconnect(),this.items.querySelectorAll("[data-src]").forEach(e=>{this.observer.observe(e)}))}setActive(i){const e=this.items.querySelector("."+ah);if(e==null||e.classList.remove(ah),i){const t=this.items.querySelector(`[data-${pw}="${i}"]`);t&&(t.classList.add(ah),this.items.scrollLeft=t.offsetLeft+t.clientWidth/2-this.items.clientWidth/2)}}},yD=Bt.getConfigParser({items:[],visibleOnLoad:!1,hideOnClick:!0,thumbnailSize:{width:200,height:100}}),La=class extends Mp{constructor(i,e){super(i,e),this.items=[],this.gallery=new vD(this,this.viewer)}init(){super.init(),Bt.checkStylesheet(this.viewer.container,"gallery-plugin"),this.map=this.viewer.getPlugin("map"),this.plan=this.viewer.getPlugin("plan"),this.viewer.addEventListener(di.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(di.ShowPanelEvent.type,this),this.config.visibleOnLoad&&this.viewer.addEventListener(di.ReadyEvent.type,()=>{this.show()},{once:!0}),this.setItems(this.config.items),delete this.config.items,setTimeout(()=>this.__updateButton())}destroy(){this.viewer.removeEventListener(di.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(di.ShowPanelEvent.type,this),this.gallery.destroy(),super.destroy()}setOptions(i){super.setOptions(i),i.thumbnailSize&&this.gallery.setItems(this.items)}handleEvent(i){if(i instanceof di.PanoramaLoadedEvent){const e=this.items.find(t=>Bt.deepEqual(t.panorama,i.data.panorama));this.currentId=e==null?void 0:e.id,this.gallery.setActive(this.currentId)}else i instanceof di.ShowPanelEvent&&this.gallery.isVisible()&&this.hide()}show(){var i,e;return(i=this.map)==null||i.minimize(),(e=this.plan)==null||e.minimize(),this.dispatchEvent(new Uo(!this.gallery.isAboveBreakpoint)),this.gallery.show()}hide(){return this.dispatchEvent(new zo),this.gallery.hide()}toggle(){this.gallery.isVisible()?this.hide():this.show()}isVisible(){return this.gallery.isVisible()}setItems(i,e){if(i?i.forEach((t,n)=>{if(!t.id)throw new ft(`Item ${n} has no "id".`);if(!t.panorama)throw new ft(`Item ${t.id} has no "panorama".`)}):i=[],this.handler=e,this.items=i.map(t=>({...t,id:`${t.id}`})),this.gallery.setItems(this.items),this.currentId){const t=this.items.find(n=>n.id===this.currentId);this.currentId=t==null?void 0:t.id,this.gallery.setActive(this.currentId)}this.__updateButton()}__click(i){if(i!==this.currentId){if(this.handler)this.handler(i);else{const e=this.items.find(t=>t.id===i);this.viewer.setPanorama(e.panorama,{caption:e.name,...e.options})}this.currentId=i,this.gallery.setActive(i),(this.config.hideOnClick||!this.gallery.isAboveBreakpoint)&&this.hide()}}__updateButton(){var i;(i=this.viewer.navbar.getButton(Du.id,!1))==null||i.toggle(this.items.length>0)}};La.id="gallery";La.VERSION="5.10.0";La.configParser=yD;La.readonlyOptions=["visibleOnLoad","items"];Gs.lang[Du.id]="Gallery";Cp(Du,"caption:left");document.addEventListener("DOMContentLoaded",()=>{const i=document.querySelector(".tour-viewer");i&&new ca({container:i,panorama:"img/3d-1.jpeg",touchmoveTwoFingers:!0,mousewheelCtrlKey:!0,loadingImg:"img/loader.gif",lang:{ctrlZoom:" ctrl +   scroll   zoom",twoFingers:"    ",loading:"..."},plugins:[[pl,{autostartDelay:1e3,autorotatePitch:"5deg"}],[La,{}]],navbar:["autorotate","zoom","move","gallery","fullscreen"]}).getPlugin(La).setItems([{id:"panoram-img-1",panorama:"img/3d-1.jpeg",thumbnail:"img/3d-1.jpeg",name:" 1"},{id:"panoram-img-2",panorama:"img/3d-2.jpeg",thumbnail:"img/3d-2.jpeg",name:" 2"}])});/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const Gi=(i,e)=>{const{o:t,i:n,u:s}=i;let r=t,a;const o=(c,d)=>{const h=r,f=c,p=d||(n?!n(h,f):h!==f);return(p||s)&&(r=f,a=h),[r,p,a]};return[e?c=>o(e(r,a),c):o,c=>[r,!!c,a]]},bD=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,Di=bD?window:{},mw=Math.max,_D=Math.min,Ef=Math.round,au=Math.abs,Ov=Math.sign,gw=Di.cancelAnimationFrame,Pp=Di.requestAnimationFrame,ou=Di.setTimeout,xf=Di.clearTimeout,ku=i=>typeof Di[i]<"u"?Di[i]:void 0,wD=ku("MutationObserver"),Dv=ku("IntersectionObserver"),lu=ku("ResizeObserver"),Oc=ku("ScrollTimeline"),Lp=i=>i===void 0,Nu=i=>i===null,Vn=i=>typeof i=="number",ml=i=>typeof i=="string",Rp=i=>typeof i=="boolean",un=i=>typeof i=="function",Gn=i=>Array.isArray(i),cu=i=>typeof i=="object"&&!Gn(i)&&!Nu(i),Ip=i=>{const e=!!i&&i.length,t=Vn(e)&&e>-1&&e%1==0;return Gn(i)||!un(i)&&t?e>0&&cu(i)?e-1 in i:!0:!1},uu=i=>!!i&&i.constructor===Object,du=i=>i instanceof HTMLElement,Fu=i=>i instanceof Element;function Rt(i,e){if(Ip(i))for(let t=0;t<i.length&&e(i[t],t,i)!==!1;t++);else i&&Rt(Object.keys(i),t=>e(i[t],t,i));return i}const vw=(i,e)=>i.indexOf(e)>=0,Zo=(i,e)=>i.concat(e),Vt=(i,e,t)=>(!ml(e)&&Ip(e)?Array.prototype.push.apply(i,e):i.push(e),i),Xs=i=>Array.from(i||[]),Op=i=>Gn(i)?i:!ml(i)&&Ip(i)?Xs(i):[i],Sf=i=>!!i&&!i.length,Tf=i=>Xs(new Set(i)),Ki=(i,e,t)=>{Rt(i,s=>s?s.apply(void 0,e||[]):!0),!t&&(i.length=0)},yw="paddingTop",bw="paddingRight",_w="paddingLeft",ww="paddingBottom",Ew="marginLeft",xw="marginRight",Sw="marginBottom",Tw="overflowX",Mw="overflowY",Uu="width",zu="height",Ps="visible",yr="hidden",Ra="scroll",ED=i=>{const e=String(i||"");return e?e[0].toUpperCase()+e.slice(1):""},Bu=(i,e,t,n)=>{if(i&&e){let s=!0;return Rt(t,r=>{const a=i[r],o=e[r];a!==o&&(s=!1)}),s}return!1},Cw=(i,e)=>Bu(i,e,["w","h"]),Dc=(i,e)=>Bu(i,e,["x","y"]),xD=(i,e)=>Bu(i,e,["t","r","b","l"]),_r=()=>{},rt=(i,...e)=>i.bind(0,...e),ua=i=>{let e;const t=i?ou:Pp,n=i?xf:gw;return[s=>{n(e),e=t(()=>s(),un(i)?i():i)},()=>n(e)]},Mf=(i,e)=>{const{_:t,v:n,p:s,S:r}=e||{};let a,o,l,u,c=_r;const d=function(v){c(),xf(a),u=a=o=void 0,c=_r,i.apply(this,v)},h=g=>r&&o?r(o,g):g,f=()=>{c!==_r&&d(h(l)||l)},p=function(){const v=Xs(arguments),m=un(t)?t():t;if(Vn(m)&&m>=0){const _=un(n)?n():n,y=Vn(_)&&_>=0,M=m>0?ou:Pp,x=m>0?xf:gw,A=h(v)||v,E=d.bind(0,A);let w;c(),s&&!u?(E(),u=!0,w=M(()=>u=void 0,m)):(w=M(E,m),y&&!a&&(a=ou(f,_))),c=()=>x(w),o=l=A}else d(v)};return p.m=f,p},Aw=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),Sn=i=>i?Object.keys(i):[],wt=(i,e,t,n,s,r,a)=>{const o=[e,t,n,s,r,a];return(typeof i!="object"||Nu(i))&&!un(i)&&(i={}),Rt(o,l=>{Rt(l,(u,c)=>{const d=l[c];if(i===d)return!0;const h=Gn(d);if(d&&uu(d)){const f=i[c];let p=f;h&&!Gn(f)?p=[]:!h&&!uu(f)&&(p={}),i[c]=wt(p,d)}else i[c]=h?d.slice():d})}),i},Pw=(i,e)=>Rt(wt({},i),(t,n,s)=>{t===void 0?delete s[n]:t&&uu(t)&&(s[n]=Pw(t))}),Dp=i=>!Sn(i).length,Lw=(i,e,t)=>mw(i,_D(e,t)),wr=i=>Tf((Gn(i)?i:(i||"").split(" ")).filter(e=>e)),kp=(i,e)=>i&&i.getAttribute(e),kv=(i,e)=>i&&i.hasAttribute(e),ns=(i,e,t)=>{Rt(wr(e),n=>{i&&i.setAttribute(n,String(t||""))})},Pn=(i,e)=>{Rt(wr(e),t=>i&&i.removeAttribute(t))},Hu=(i,e)=>{const t=wr(kp(i,e)),n=rt(ns,i,e),s=(r,a)=>{const o=new Set(t);return Rt(wr(r),l=>{o[a](l)}),Xs(o).join(" ")};return{O:r=>n(s(r,"delete")),$:r=>n(s(r,"add")),C:r=>{const a=wr(r);return a.reduce((o,l)=>o&&t.includes(l),a.length>0)}}},Rw=(i,e,t)=>(Hu(i,e).O(t),rt(Np,i,e,t)),Np=(i,e,t)=>(Hu(i,e).$(t),rt(Rw,i,e,t)),hu=(i,e,t,n)=>(n?Np:Rw)(i,e,t),Fp=(i,e,t)=>Hu(i,e).C(t),Iw=i=>Hu(i,"class"),Ow=(i,e)=>{Iw(i).O(e)},Up=(i,e)=>(Iw(i).$(e),rt(Ow,i,e)),Dw=(i,e)=>{const t=e?Fu(e)&&e:document;return t?Xs(t.querySelectorAll(i)):[]},SD=(i,e)=>{const t=e?Fu(e)&&e:document;return t&&t.querySelector(i)},Cf=(i,e)=>Fu(i)&&i.matches(e),kw=i=>Cf(i,"body"),Af=i=>i?Xs(i.childNodes):[],Qo=i=>i&&i.parentElement,da=(i,e)=>Fu(i)&&i.closest(e),Pf=i=>document.activeElement,TD=(i,e,t)=>{const n=da(i,e),s=i&&SD(t,n),r=da(s,e)===n;return n&&s?n===i||s===i||r&&da(da(i,t),e)!==n:!1},Ia=i=>{Rt(Op(i),e=>{const t=Qo(e);e&&t&&t.removeChild(e)})},ji=(i,e)=>rt(Ia,i&&e&&Rt(Op(e),t=>{t&&i.appendChild(t)})),va=i=>{const e=document.createElement("div");return ns(e,"class",i),e},Nw=i=>{const e=va();return e.innerHTML=i.trim(),Rt(Af(e),t=>Ia(t))},Nv=(i,e)=>i.getPropertyValue(e)||i[e]||"",Fw=i=>{const e=i||0;return isFinite(e)?e:0},yc=i=>Fw(parseFloat(i||"")),Lf=i=>Math.round(i*1e4)/1e4,Uw=i=>`${Lf(Fw(i))}px`;function Jo(i,e){i&&e&&Rt(e,(t,n)=>{try{const s=i.style,r=Nu(t)||Rp(t)?"":Vn(t)?Uw(t):t;n.indexOf("--")===0?s.setProperty(n,r):s[n]=r}catch{}})}function ms(i,e,t){const n=ml(e);let s=n?"":{};if(i){const r=Di.getComputedStyle(i,t)||i.style;s=n?Nv(r,e):Xs(e).reduce((a,o)=>(a[o]=Nv(r,o),a),s)}return s}const Fv=(i,e,t)=>{const n=e?`${e}-`:"",s=t?`-${t}`:"",r=`${n}top${s}`,a=`${n}right${s}`,o=`${n}bottom${s}`,l=`${n}left${s}`,u=ms(i,[r,a,o,l]);return{t:yc(u[r]),r:yc(u[a]),b:yc(u[o]),l:yc(u[l])}},MD=(i,e)=>`translate${cu(i)?`(${i.x},${i.y})`:`Y(${i})`}`,CD=i=>!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length),AD={w:0,h:0},Vu=(i,e)=>e?{w:e[`${i}Width`],h:e[`${i}Height`]}:AD,PD=i=>Vu("inner",i||Di),ya=rt(Vu,"offset"),zw=rt(Vu,"client"),fu=rt(Vu,"scroll"),zp=i=>{const e=parseFloat(ms(i,Uu))||0,t=parseFloat(ms(i,zu))||0;return{w:e-Ef(e),h:t-Ef(t)}},oh=i=>i.getBoundingClientRect(),LD=i=>!!i&&CD(i),Rf=i=>!!(i&&(i[zu]||i[Uu])),Bw=(i,e)=>{const t=Rf(i);return!Rf(e)&&t},Uv=(i,e,t,n)=>{Rt(wr(e),s=>{i&&i.removeEventListener(s,t,n)})},zt=(i,e,t,n)=>{var s;const r=(s=n&&n.H)!=null?s:!0,a=n&&n.I||!1,o=n&&n.A||!1,l={passive:r,capture:a};return rt(Ki,wr(e).map(u=>{const c=o?d=>{Uv(i,u,c,a),t&&t(d)}:t;return i&&i.addEventListener(u,c,l),rt(Uv,i,u,c,a)}))},Hw=i=>i.stopPropagation(),If=i=>i.preventDefault(),Vw=i=>Hw(i)||If(i),zn=(i,e)=>{const{x:t,y:n}=Vn(e)?{x:e,y:e}:e||{};Vn(t)&&(i.scrollLeft=t),Vn(n)&&(i.scrollTop=n)},Xi=i=>({x:i.scrollLeft,y:i.scrollTop}),$w=()=>({D:{x:0,y:0},M:{x:0,y:0}}),RD=(i,e)=>{const{D:t,M:n}=i,{w:s,h:r}=e,a=(d,h,f)=>{let p=Ov(d)*f,g=Ov(h)*f;if(p===g){const v=au(d),m=au(h);g=v>m?0:g,p=v<m?0:p}return p=p===g?0:p,[p+0,g+0]},[o,l]=a(t.x,n.x,s),[u,c]=a(t.y,n.y,r);return{D:{x:o,y:u},M:{x:l,y:c}}},zv=({D:i,M:e})=>{const t=(n,s)=>n===0&&n<=s;return{x:t(i.x,e.x),y:t(i.y,e.y)}},Bv=({D:i,M:e},t)=>{const n=(s,r,a)=>Lw(0,1,(s-a)/(s-r)||0);return{x:n(i.x,e.x,t.x),y:n(i.y,e.y,t.y)}},Of=i=>{i&&i.focus&&i.focus({preventScroll:!0})},Hv=(i,e)=>{Rt(Op(e),i)},Df=i=>{const e=new Map,t=(r,a)=>{if(r){const o=e.get(r);Hv(l=>{o&&o[l?"delete":"clear"](l)},a)}else e.forEach(o=>{o.clear()}),e.clear()},n=(r,a)=>{if(ml(r)){const u=e.get(r)||new Set;return e.set(r,u),Hv(c=>{un(c)&&u.add(c)},a),rt(t,r,a)}Rp(a)&&a&&t();const o=Sn(r),l=[];return Rt(o,u=>{const c=r[u];c&&Vt(l,n(u,c))}),rt(Ki,l)},s=(r,a)=>{Rt(Xs(e.get(r)),o=>{a&&!Sf(a)?o.apply(0,a):o()})};return n(i||{}),[n,t,s]},Vv=i=>JSON.stringify(i,(e,t)=>{if(un(t))throw 0;return t}),$v=(i,e)=>i?`${e}`.split(".").reduce((t,n)=>t&&Aw(t,n)?t[n]:void 0,i):void 0,ID={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Gw=(i,e)=>{const t={},n=Zo(Sn(e),Sn(i));return Rt(n,s=>{const r=i[s],a=e[s];if(cu(r)&&cu(a))wt(t[s]={},Gw(r,a)),Dp(t[s])&&delete t[s];else if(Aw(e,s)&&a!==r){let o=!0;if(Gn(r)||Gn(a))try{Vv(r)===Vv(a)&&(o=!1)}catch{}o&&(t[s]=a)}}),t},Gv=(i,e,t)=>n=>[$v(i,n),t||$v(e,n)!==void 0],Va="data-overlayscrollbars",kc="os-environment",bc=`${kc}-scrollbar-hidden`,lh=`${Va}-initialize`,Nc="noClipping",Wv=`${Va}-body`,Us=Va,OD="host",ss=`${Va}-viewport`,DD=Tw,kD=Mw,ND="arrange",Ww="measuring",FD="scrolling",jw="scrollbarHidden",UD="noContent",kf=`${Va}-padding`,jv=`${Va}-content`,Bp="os-size-observer",zD=`${Bp}-appear`,BD=`${Bp}-listener`,HD="os-trinsic-observer",VD="os-theme-none",Zi="os-scrollbar",$D=`${Zi}-rtl`,GD=`${Zi}-horizontal`,WD=`${Zi}-vertical`,Xw=`${Zi}-track`,Hp=`${Zi}-handle`,jD=`${Zi}-visible`,XD=`${Zi}-cornerless`,Xv=`${Zi}-interaction`,qv=`${Zi}-unusable`,Nf=`${Zi}-auto-hide`,Yv=`${Nf}-hidden`,Kv=`${Zi}-wheel`,qD=`${Xw}-interactive`,YD=`${Hp}-interactive`;let qw;const KD=()=>qw,ZD=i=>{qw=i};let ch;const QD=()=>{const i=(y,M,x)=>{ji(document.body,y),ji(document.body,y);const S=zw(y),A=ya(y),E=zp(M);return x&&Ia(y),{x:A.h-S.h+E.h,y:A.w-S.w+E.w}},e=y=>{let M=!1;const x=Up(y,bc);try{M=ms(y,"scrollbar-width")==="none"||ms(y,"display","::-webkit-scrollbar")==="none"}catch{}return x(),M},t=`.${kc}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${kc} div{width:200%;height:200%;margin:10px 0}.${bc}{scrollbar-width:none!important}.${bc}::-webkit-scrollbar,.${bc}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,s=Nw(`<div class="${kc}"><div></div><style>${t}</style></div>`)[0],r=s.firstChild,a=s.lastChild,o=KD();o&&(a.nonce=o);const[l,,u]=Df(),[c,d]=Gi({o:i(s,r),i:Dc},rt(i,s,r,!0)),[h]=d(),f=e(s),p={x:h.x===0,y:h.y===0},g={elements:{host:null,padding:!f,viewport:y=>f&&kw(y)&&y,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},v=wt({},ID),m=rt(wt,{},v),b=rt(wt,{},g),_={T:h,k:p,R:f,V:!!Oc,L:rt(l,"r"),U:b,P:y=>wt(g,y)&&b(),N:m,q:y=>wt(v,y)&&m(),B:wt({},g),F:wt({},v)};if(Pn(s,"style"),Ia(s),zt(Di,"resize",()=>{u("r",[])}),un(Di.matchMedia)&&!f&&(!p.x||!p.y)){const y=M=>{const x=Di.matchMedia(`(resolution: ${Di.devicePixelRatio}dppx)`);zt(x,"change",()=>{M(),y(M)},{A:!0})};y(()=>{const[M,x]=c();wt(_.T,M),u("r",[x])})}return _},Wn=()=>(ch||(ch=QD()),ch),Yw=(i,e)=>un(e)?e.apply(0,i):e,JD=(i,e,t,n)=>{const s=Lp(n)?t:n;return Yw(i,s)||e.apply(0,i)},Kw=(i,e,t,n)=>{const s=Lp(n)?t:n,r=Yw(i,s);return!!r&&(du(r)?r:e.apply(0,i))},ek=(i,e)=>{const{nativeScrollbarsOverlaid:t,body:n}=e||{},{k:s,R:r,U:a}=Wn(),{nativeScrollbarsOverlaid:o,body:l}=a().cancel,u=t??o,c=Lp(n)?l:n,d=(s.x||s.y)&&u,h=i&&(Nu(c)?!r:c);return!!d||!!h},Vp=new WeakMap,tk=(i,e)=>{Vp.set(i,e)},ik=i=>{Vp.delete(i)},Zw=i=>Vp.get(i),nk=(i,e,t)=>{let n=!1;const s=t?new WeakMap:!1,r=()=>{n=!0},a=o=>{if(s&&t){const l=t.map(u=>{const[c,d]=u||[];return[d&&c?(o||Dw)(c,i):[],d]});Rt(l,u=>Rt(u[0],c=>{const d=u[1],h=s.get(c)||[];if(i.contains(c)&&d){const p=zt(c,d,g=>{n?(p(),s.delete(c)):e(g)});s.set(c,Vt(h,p))}else Ki(h),s.delete(c)}))}};return a(),[r,a]},Zv=(i,e,t,n)=>{let s=!1;const{j:r,X:a,Y:o,W:l,J:u,G:c}=n||{},d=Mf(()=>s&&t(!0),{_:33,v:99}),[h,f]=nk(i,d,o),p=r||[],g=a||[],v=Zo(p,g),m=(_,y)=>{if(!Sf(y)){const M=u||_r,x=c||_r,S=[],A=[];let E=!1,w=!1;if(Rt(y,C=>{const{attributeName:P,target:T,type:R,oldValue:F,addedNodes:z,removedNodes:D}=C,O=R==="attributes",j=R==="childList",k=i===T,I=O&&P,U=I&&kp(T,P||""),B=ml(U)?U:null,V=I&&F!==B,H=vw(g,P)&&V;if(e&&(j||!k)){const Y=O&&V,J=Y&&l&&Cf(T,l),se=(J?!M(T,P,F,B):!O||Y)&&!x(C,!!J,i,n);Rt(z,ye=>Vt(S,ye)),Rt(D,ye=>Vt(S,ye)),w=w||se}!e&&k&&V&&!M(T,P,F,B)&&(Vt(A,P),E=E||H)}),f(C=>Tf(S).reduce((P,T)=>(Vt(P,Dw(C,T)),Cf(T,C)?Vt(P,T):P),[])),e)return!_&&w&&t(!1),[!1];if(!Sf(A)||E){const C=[Tf(A),E];return!_&&t.apply(0,C),C}}},b=new wD(rt(m,!1));return[()=>(b.observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:v,subtree:e,childList:e,characterData:e}),s=!0,()=>{s&&(h(),b.disconnect(),s=!1)}),()=>{if(s)return d.m(),m(!0,b.takeRecords())}]},Qw={},Jw={},sk=i=>{Rt(i,e=>Rt(e,(t,n)=>{Qw[n]=e[n]}))},eE=(i,e,t)=>Sn(i).map(n=>{const{static:s,instance:r}=i[n],[a,o,l]=t||[],u=t?r:s;if(u){const c=t?u(a,o,e):u(e);return(l||Jw)[n]=c}}),gl=i=>Jw[i],rk="__osOptionsValidationPlugin",ak="__osSizeObserverPlugin",ok=(i,e)=>{const{k:t}=e,[n,s]=i("showNativeOverlaidScrollbars");return[n&&t.x&&t.y,s]},Oa=i=>i.indexOf(Ps)===0,lk=(i,e)=>{const t=(s,r,a,o)=>{const l=s===Ps?yr:s.replace(`${Ps}-`,""),u=Oa(s),c=Oa(a);return!r&&!o?yr:u&&c?Ps:u?r&&o?l:r?Ps:yr:r?l:c&&o?Ps:yr},n={x:t(e.x,i.x,e.y,i.y),y:t(e.y,i.y,e.x,i.x)};return{K:n,Z:{x:n.x===Ra,y:n.y===Ra}}},tE="__osScrollbarsHidingPlugin",ck="__osClickScrollPlugin",iE=(i,e,t)=>{const{dt:n}=t||{},s=gl(ak),[r]=Gi({o:!1,u:!0});return()=>{const a=[],l=Nw(`<div class="${Bp}"><div class="${BD}"></div></div>`)[0],u=l.firstChild,c=d=>{const h=d instanceof ResizeObserverEntry;let f=!1,p=!1;if(h){const[g,,v]=r(d.contentRect),m=Rf(g);p=Bw(g,v),f=!p&&!m}else p=d===!0;f||e({ft:!0,dt:p})};if(lu){const d=new lu(h=>c(h.pop()));d.observe(u),Vt(a,()=>{d.disconnect()})}else if(s){const[d,h]=s(u,c,n);Vt(a,Zo([Up(l,zD),zt(l,"animationstart",d)],h))}else return _r;return rt(Ki,Vt(a,ji(i,l)))}},uk=(i,e)=>{let t;const n=l=>l.h===0||l.isIntersecting||l.intersectionRatio>0,s=va(HD),[r]=Gi({o:!1}),a=(l,u)=>{if(l){const c=r(n(l)),[,d]=c;return d&&!u&&e(c)&&[c]}},o=(l,u)=>a(u.pop(),l);return[()=>{const l=[];if(Dv)t=new Dv(rt(o,!1),{root:i}),t.observe(s),Vt(l,()=>{t.disconnect()});else{const u=()=>{const c=ya(s);a(c)};Vt(l,iE(s,u)()),u()}return rt(Ki,Vt(l,ji(i,s)))},()=>t&&o(!0,t.takeRecords())]},dk=(i,e,t,n)=>{let s,r,a,o,l,u;const c=`[${Us}]`,d=`[${ss}]`,h=["id","class","style","open","wrap","cols","rows"],{vt:f,ht:p,ot:g,gt:v,bt:m,nt:b,wt:_,yt:y,St:M,Ot:x}=i,S=H=>ms(H,"direction")==="rtl",A={$t:!1,ct:S(f)},E=Wn(),w=gl(tE),[C]=Gi({i:Cw,o:{w:0,h:0}},()=>{const H=w&&w.tt(i,e,A,E,t).ut,J=!(_&&b)&&Fp(p,Us,Nc),ee=!b&&y(ND),se=ee&&Xi(v),ye=se&&x(),de=M(Ww,J),W=ee&&H&&H()[0],Te=fu(g),he=zp(g);return W&&W(),zn(v,se),ye&&ye(),J&&de(),{w:Te.w+he.w,h:Te.h+he.h}}),P=Mf(n,{_:()=>s,v:()=>r,S(H,Y){const[J]=H,[ee]=Y;return[Zo(Sn(J),Sn(ee)).reduce((se,ye)=>(se[ye]=J[ye]||ee[ye],se),{})]}}),T=H=>{const Y=S(f);wt(H,{Ct:u!==Y}),wt(A,{ct:Y}),u=Y},R=(H,Y)=>{const[J,ee]=H,se={xt:ee};return wt(A,{$t:J}),!Y&&n(se),se},F=({ft:H,dt:Y})=>{const ee=!(H&&!Y)&&E.R?P:n,se={ft:H||Y,dt:Y};T(se),ee(se)},z=(H,Y)=>{const[,J]=C(),ee={Ht:J};return T(ee),J&&!Y&&(H?n:P)(ee),ee},D=(H,Y,J)=>{const ee={Et:Y};return T(ee),Y&&!J&&P(ee),ee},[O,j]=m?uk(p,R):[],k=!b&&iE(p,F,{dt:!0}),[I,U]=Zv(p,!1,D,{X:h,j:h}),B=b&&lu&&new lu(H=>{const Y=H[H.length-1].contentRect;F({ft:!0,dt:Bw(Y,l)}),l=Y}),V=Mf(()=>{const[,H]=C();n({Ht:H})},{_:222,p:!0});return[()=>{B&&B.observe(p);const H=k&&k(),Y=O&&O(),J=I(),ee=E.L(se=>{se?P({zt:se}):V()});return()=>{B&&B.disconnect(),H&&H(),Y&&Y(),o&&o(),J(),ee()}},({It:H,At:Y,Dt:J})=>{const ee={},[se]=H("update.ignoreMutation"),[ye,de]=H("update.attributes"),[W,Te]=H("update.elementEvents"),[he,Ae]=H("update.debounce"),Ee=Te||de,Ne=Y||J,Ie=Pe=>un(se)&&se(Pe);if(Ee){a&&a(),o&&o();const[Pe,K]=Zv(m||g,!0,z,{j:Zo(h,ye||[]),Y:W,W:c,G:(N,X)=>{const{target:ie,attributeName:ae}=N;return(!X&&ae&&!b?TD(ie,c,d):!1)||!!da(ie,`.${Zi}`)||!!Ie(N)}});o=Pe(),a=K}if(Ae)if(P.m(),Gn(he)){const Pe=he[0],K=he[1];s=Vn(Pe)&&Pe,r=Vn(K)&&K}else Vn(he)?(s=he,r=!1):(s=!1,r=!1);if(Ne){const Pe=U(),K=j&&j(),N=a&&a();Pe&&wt(ee,D(Pe[0],Pe[1],Ne)),K&&wt(ee,R(K[0],Ne)),N&&wt(ee,z(N[0],Ne))}return T(ee),ee},A]},hk=(i,e,t,n)=>{const s="--os-viewport-percent",r="--os-scroll-percent",a="--os-scroll-direction",{U:o}=Wn(),{scrollbars:l}=o(),{slot:u}=l,{vt:c,ht:d,ot:h,Mt:f,gt:p,wt:g,nt:v}=e,{scrollbars:m}=f?{}:i,{slot:b}=m||{},_=[],y=[],M=[],x=Kw([c,d,h],()=>v&&g?c:d,u,b),S=I=>{if(Oc){const U=new Oc({source:p,axis:I});return{kt:V=>{const H=V.Tt.animate({clear:["left"],[r]:[0,1]},{timeline:U});return()=>H.cancel()}}}},A={x:S("x"),y:S("y")},E=()=>{const{Rt:I,Vt:U}=t,B=(V,H)=>Lw(0,1,V/(V+H)||0);return{x:B(U.x,I.x),y:B(U.y,I.y)}},w=(I,U,B)=>{const V=B?Up:Ow;Rt(I,H=>{V(H.Tt,U)})},C=(I,U)=>{Rt(I,B=>{const[V,H]=U(B);Jo(V,H)})},P=(I,U,B)=>{const V=Rp(B),H=V?B:!0,Y=V?!B:!0;H&&w(y,I,U),Y&&w(M,I,U)},T=()=>{const I=E(),U=B=>V=>[V.Tt,{[s]:Lf(B)+""}];C(y,U(I.x)),C(M,U(I.y))},R=()=>{if(!Oc){const{Lt:I}=t,U=Bv(I,Xi(p)),B=V=>H=>[H.Tt,{[r]:Lf(V)+""}];C(y,B(U.x)),C(M,B(U.y))}},F=()=>{const{Lt:I}=t,U=zv(I),B=V=>H=>[H.Tt,{[a]:V?"0":"1"}];C(y,B(U.x)),C(M,B(U.y))},z=()=>{if(v&&!g){const{Rt:I,Lt:U}=t,B=zv(U),V=Bv(U,Xi(p)),H=Y=>{const{Tt:J}=Y,ee=Qo(J)===h&&J,se=(ye,de,W)=>{const Te=de*ye;return Uw(W?Te:-Te)};return[ee,ee&&{transform:MD({x:se(V.x,I.x,B.x),y:se(V.y,I.y,B.y)})}]};C(y,H),C(M,H)}},D=I=>{const U=I?"x":"y",V=va(`${Zi} ${I?GD:WD}`),H=va(Xw),Y=va(Hp),J={Tt:V,Ut:H,Pt:Y},ee=A[U];return Vt(I?y:M,J),Vt(_,[ji(V,H),ji(H,Y),rt(Ia,V),ee&&ee.kt(J),n(J,P,I)]),J},O=rt(D,!0),j=rt(D,!1),k=()=>(ji(x,y[0].Tt),ji(x,M[0].Tt),rt(Ki,_));return O(),j(),[{Nt:T,qt:R,Bt:F,Ft:z,jt:P,Xt:{Yt:y,Wt:O,Jt:rt(C,y)},Gt:{Yt:M,Wt:j,Jt:rt(C,M)}},k]},fk=(i,e,t,n)=>(s,r,a)=>{const{ht:o,ot:l,nt:u,gt:c,Kt:d,Ot:h}=e,{Tt:f,Ut:p,Pt:g}=s,[v,m]=ua(333),[b,_]=ua(444),y=S=>{un(c.scrollBy)&&c.scrollBy({behavior:"smooth",left:S.x,top:S.y})},M=()=>{const S="pointerup pointercancel lostpointercapture",A=`client${a?"X":"Y"}`,E=a?Uu:zu,w=a?"left":"top",C=a?"w":"h",P=a?"x":"y",T=(F,z)=>D=>{const{Rt:O}=t,j=ya(p)[C]-ya(g)[C],I=z*D/j*O[P];zn(c,{[P]:F+I})},R=[];return zt(p,"pointerdown",F=>{const z=da(F.target,`.${Hp}`)===g,D=z?g:p,O=i.scrollbars,j=O[z?"dragScroll":"clickScroll"],{button:k,isPrimary:I,pointerType:U}=F,{pointers:B}=O;if(k===0&&I&&j&&(B||[]).includes(U)){Ki(R),_();const H=!z&&(F.shiftKey||j==="instant"),Y=rt(oh,g),J=rt(oh,p),ee=(X,ie)=>(X||Y())[w]-(ie||J())[w],se=Ef(oh(c)[E])/ya(c)[C]||1,ye=T(Xi(c)[P],1/se),de=F[A],W=Y(),Te=J(),he=W[E],Ae=ee(W,Te)+he/2,Ee=de-Te[w],Ne=z?0:Ee-Ae,Ie=X=>{Ki(N),D.releasePointerCapture(X.pointerId)},Pe=z||H,K=h(),N=[zt(d,S,Ie),zt(d,"selectstart",X=>If(X),{H:!1}),zt(p,S,Ie),Pe&&zt(p,"pointermove",X=>ye(Ne+(X[A]-de))),Pe&&(()=>{const X=Xi(c);K();const ie=Xi(c),ae={x:ie.x-X.x,y:ie.y-X.y};(au(ae.x)>3||au(ae.y)>3)&&(h(),zn(c,X),y(ae),b(K))})];if(D.setPointerCapture(F.pointerId),H)ye(Ne);else if(!z){const X=gl(ck);if(X){const ie=X(ye,Ne,he,ae=>{ae?K():Vt(N,K)});Vt(N,ie),Vt(R,rt(ie,!0))}}}})};let x=!0;return rt(Ki,[zt(g,"pointermove pointerleave",n),zt(f,"pointerenter",()=>{r(Xv,!0)}),zt(f,"pointerleave pointercancel",()=>{r(Xv,!1)}),!u&&zt(f,"mousedown",()=>{const S=Pf();(kv(S,ss)||kv(S,Us)||S===document.body)&&ou(rt(Of,l),25)}),zt(f,"wheel",S=>{const{deltaX:A,deltaY:E,deltaMode:w}=S;x&&w===0&&Qo(f)===o&&y({x:A,y:E}),x=!1,r(Kv,!0),v(()=>{x=!0,r(Kv)}),If(S)},{H:!1,I:!0}),zt(f,"pointerdown",rt(zt,d,"click",Vw,{A:!0,I:!0,H:!1}),{I:!0}),M(),m,_])},pk=(i,e,t,n,s,r)=>{let a,o,l,u,c,d=_r,h=0;const f=I=>I.pointerType==="mouse",[p,g]=ua(),[v,m]=ua(100),[b,_]=ua(100),[y,M]=ua(()=>h),[x,S]=hk(i,s,n,fk(e,s,n,I=>f(I)&&D())),{ht:A,Qt:E,wt:w}=s,{jt:C,Nt:P,qt:T,Bt:R,Ft:F}=x,z=(I,U)=>{if(M(),I)C(Yv);else{const B=rt(C,Yv,!0);h>0&&!U?y(B):B()}},D=()=>{(l?!a:!u)&&(z(!0),v(()=>{z(!1)}))},O=I=>{C(Nf,I,!0),C(Nf,I,!1)},j=I=>{f(I)&&(a=l,l&&z(!0))},k=[M,m,_,g,()=>d(),zt(A,"pointerover",j,{A:!0}),zt(A,"pointerenter",j),zt(A,"pointerleave",I=>{f(I)&&(a=!1,l&&z(!1))}),zt(A,"pointermove",I=>{f(I)&&o&&D()}),zt(E,"scroll",I=>{p(()=>{T(),D()}),r(I),F()})];return[()=>rt(Ki,Vt(k,S())),({It:I,Dt:U,Zt:B,tn:V})=>{const{nn:H,sn:Y,en:J,cn:ee}=V||{},{Ct:se,dt:ye}=B||{},{ct:de}=t,{k:W}=Wn(),{K:Te,rn:he}=n,[Ae,Ee]=I("showNativeOverlaidScrollbars"),[Ne,Ie]=I("scrollbars.theme"),[Pe,K]=I("scrollbars.visibility"),[N,X]=I("scrollbars.autoHide"),[ie,ae]=I("scrollbars.autoHideSuspend"),[re]=I("scrollbars.autoHideDelay"),[Ce,Me]=I("scrollbars.dragScroll"),[Se,Oe]=I("scrollbars.clickScroll"),[we,Fe]=I("overflow"),Ge=ye&&!U,Je=he.x||he.y,$e=H||Y||ee||se||U,qe=J||K||Fe,at=Ae&&W.x&&W.y,dt=(oe,Le,be)=>{const xe=oe.includes(Ra)&&(Pe===Ps||Pe==="auto"&&Le===Ra);return C(jD,xe,be),xe};if(h=re,Ge&&(ie&&Je?(O(!1),d(),b(()=>{d=zt(E,"scroll",rt(O,!0),{A:!0})})):O(!0)),Ee&&C(VD,at),Ie&&(C(c),C(Ne,!0),c=Ne),ae&&!ie&&O(!0),X&&(o=N==="move",l=N==="leave",u=N==="never",z(u,!0)),Me&&C(YD,Ce),Oe&&C(qD,!!Se),qe){const oe=dt(we.x,Te.x,!0),Le=dt(we.y,Te.y,!1);C(XD,!(oe&&Le))}$e&&(T(),P(),F(),ee&&R(),C(qv,!he.x,!0),C(qv,!he.y,!1),C($D,de&&!w))},{},x]},mk=i=>{const e=Wn(),{U:t,R:n}=e,{elements:s}=t(),{padding:r,viewport:a,content:o}=s,l=du(i),u=l?{}:i,{elements:c}=u,{padding:d,viewport:h,content:f}=c||{},p=l?i:u.target,g=kw(p),v=p.ownerDocument,m=v.documentElement,b=()=>v.defaultView||Di,_=rt(JD,[p]),y=rt(Kw,[p]),M=rt(va,""),x=rt(_,M,a),S=rt(y,M,o),A=he=>{const Ae=ya(he),Ee=fu(he),Ne=ms(he,Tw),Ie=ms(he,Mw);return Ee.w-Ae.w>0&&!Oa(Ne)||Ee.h-Ae.h>0&&!Oa(Ie)},E=x(h),w=E===p,C=w&&g,P=!w&&S(f),T=!w&&E===P,R=C?m:E,F=C?R:p,z=!w&&y(M,r,d),D=!T&&P,O=[D,R,z,F].map(he=>du(he)&&!Qo(he)&&he),j=he=>he&&vw(O,he),k=!j(R)&&A(R)?R:p,I=C?m:R,B={vt:p,ht:F,ot:R,ln:z,bt:D,gt:I,Qt:C?v:R,an:g?m:k,Kt:v,wt:g,Mt:l,nt:w,un:b,yt:he=>Fp(R,ss,he),St:(he,Ae)=>hu(R,ss,he,Ae),Ot:()=>hu(I,ss,FD,!0)},{vt:V,ht:H,ln:Y,ot:J,bt:ee}=B,se=[()=>{Pn(H,[Us,lh]),Pn(V,lh),g&&Pn(m,[lh,Us])}];let ye=Af([ee,J,Y,H,V].find(he=>he&&!j(he)));const de=C?V:ee||J,W=rt(Ki,se);return[B,()=>{const he=b(),Ae=Pf(),Ee=N=>{ji(Qo(N),Af(N)),Ia(N)},Ne=N=>zt(N,"focusin focusout focus blur",Vw,{I:!0,H:!1}),Ie="tabindex",Pe=kp(J,Ie),K=Ne(Ae);return ns(H,Us,w?"":OD),ns(Y,kf,""),ns(J,ss,""),ns(ee,jv,""),w||(ns(J,Ie,Pe||"-1"),g&&ns(m,Wv,"")),ji(de,ye),ji(H,Y),ji(Y||H,!w&&J),ji(J,ee),Vt(se,[K,()=>{const N=Pf(),X=j(J),ie=X&&N===J?V:N,ae=Ne(ie);Pn(Y,kf),Pn(ee,jv),Pn(J,ss),g&&Pn(m,Wv),Pe?ns(J,Ie,Pe):Pn(J,Ie),j(ee)&&Ee(ee),X&&Ee(J),j(Y)&&Ee(Y),Of(ie),ae()}]),n&&!w&&(Np(J,ss,jw),Vt(se,rt(Pn,J,ss))),Of(!w&&g&&Ae===V&&he.top===he?J:Ae),K(),ye=0,W},W]},gk=({bt:i})=>({Zt:e,_n:t,Dt:n})=>{const{xt:s}=e||{},{$t:r}=t;i&&(s||n)&&Jo(i,{[zu]:r&&"100%"})},vk=({ht:i,ln:e,ot:t,nt:n},s)=>{const[r,a]=Gi({i:xD,o:Fv()},rt(Fv,i,"padding",""));return({It:o,Zt:l,_n:u,Dt:c})=>{let[d,h]=a(c);const{R:f}=Wn(),{ft:p,Ht:g,Ct:v}=l||{},{ct:m}=u,[b,_]=o("paddingAbsolute");(p||h||(c||g))&&([d,h]=r(c));const M=!n&&(_||v||h);if(M){const x=!b||!e&&!f,S=d.r+d.l,A=d.t+d.b,E={[xw]:x&&!m?-S:0,[Sw]:x?-A:0,[Ew]:x&&m?-S:0,top:x?-d.t:0,right:x?m?-d.r:"auto":0,left:x?m?"auto":-d.l:0,[Uu]:x&&`calc(100% + ${S}px)`},w={[yw]:x?d.t:0,[bw]:x?d.r:0,[ww]:x?d.b:0,[_w]:x?d.l:0};Jo(e||t,E),Jo(t,w),wt(s,{ln:d,dn:!x,rt:e?w:wt({},E,w)})}return{fn:M}}},yk=(i,e)=>{const t=Wn(),{ht:n,ln:s,ot:r,nt:a,Qt:o,gt:l,wt:u,St:c,un:d}=i,{R:h}=t,f=u&&a,p=rt(mw,0),g={display:()=>!1,direction:U=>U!=="ltr",flexDirection:U=>U.endsWith("-reverse"),writingMode:U=>U!=="horizontal-tb"},v=Sn(g),m={i:Cw,o:{w:0,h:0}},b={i:Dc,o:{}},_=U=>{c(Ww,!f&&U)},y=U=>{if(!v.some(de=>{const W=U[de];return W&&g[de](W)}))return{D:{x:0,y:0},M:{x:1,y:1}};_(!0);const V=Xi(l),H=c(UD,!0),Y=zt(o,Ra,de=>{const W=Xi(l);de.isTrusted&&W.x===V.x&&W.y===V.y&&Hw(de)},{I:!0,A:!0});zn(l,{x:0,y:0}),H();const J=Xi(l),ee=fu(l);zn(l,{x:ee.w,y:ee.h});const se=Xi(l);zn(l,{x:se.x-J.x<1&&-ee.w,y:se.y-J.y<1&&-ee.h});const ye=Xi(l);return zn(l,V),Pp(()=>Y()),{D:J,M:ye}},M=(U,B)=>{const V=Di.devicePixelRatio%1!==0?1:0,H={w:p(U.w-B.w),h:p(U.h-B.h)};return{w:H.w>V?H.w:0,h:H.h>V?H.h:0}},[x,S]=Gi(m,rt(zp,r)),[A,E]=Gi(m,rt(fu,r)),[w,C]=Gi(m),[P]=Gi(b),[T,R]=Gi(m),[F]=Gi(b),[z]=Gi({i:(U,B)=>Bu(U,B,v),o:{}},()=>LD(r)?ms(r,v):{}),[D,O]=Gi({i:(U,B)=>Dc(U.D,B.D)&&Dc(U.M,B.M),o:$w()}),j=gl(tE),k=(U,B)=>`${B?DD:kD}${ED(U)}`,I=U=>{const B=H=>[Ps,yr,Ra].map(Y=>k(Y,H)),V=B(!0).concat(B()).join(" ");c(V),c(Sn(U).map(H=>k(U[H],H==="x")).join(" "),!0)};return({It:U,Zt:B,_n:V,Dt:H},{fn:Y})=>{const{ft:J,Ht:ee,Ct:se,dt:ye,zt:de}=B||{},W=j&&j.tt(i,e,V,t,U),{it:Te,ut:he,_t:Ae}=W||{},[Ee,Ne]=ok(U,t),[Ie,Pe]=U("overflow"),K=Oa(Ie.x),N=Oa(Ie.y),X=!0;let ie=S(H),ae=E(H),re=C(H),Ce=R(H);Ne&&h&&c(jw,!Ee);{Fp(n,Us,Nc)&&_(!0);const[lt]=he?he():[],[vi]=ie=x(H),[ci]=ae=A(H),jn=zw(r),Ri=f&&PD(d()),qs={w:p(ci.w+vi.w),h:p(ci.h+vi.h)},Ys={w:p((Ri?Ri.w:jn.w+p(jn.w-ci.w))+vi.w),h:p((Ri?Ri.h:jn.h+p(jn.h-ci.h))+vi.h)};lt&&lt(),Ce=T(Ys),re=w(M(qs,Ys),H)}const[Me,Se]=Ce,[Oe,we]=re,[Fe,Ge]=ae,[Je,$e]=ie,[qe,at]=P({x:Oe.w>0,y:Oe.h>0}),dt=K&&N&&(qe.x||qe.y)||K&&qe.x&&!qe.y||N&&qe.y&&!qe.x,oe=Y||se||de||$e||Ge||Se||we||Pe||Ne||X,Le=lk(qe,Ie),[be,xe]=F(Le.K),[ke,We]=z(H),ot=se||ye||We||at||H,[At,Nt]=ot?D(y(ke),H):O();return oe&&(xe&&I(Le.K),Ae&&Te&&Jo(r,Ae(Le,V,Te(Le,Fe,Je)))),_(!1),hu(n,Us,Nc,dt),hu(s,kf,Nc,dt),wt(e,{K:be,Vt:{x:Me.w,y:Me.h},Rt:{x:Oe.w,y:Oe.h},rn:qe,Lt:RD(At,Oe)}),{en:xe,nn:Se,sn:we,cn:Nt||we,vn:ot}}},bk=i=>{const[e,t,n]=mk(i),s={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[xw]:0,[Sw]:0,[Ew]:0,[yw]:0,[bw]:0,[ww]:0,[_w]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:yr,y:yr},rn:{x:!1,y:!1},Lt:$w()},{vt:r,gt:a,nt:o,Ot:l}=e,{R:u,k:c}=Wn(),d=!u&&(c.x||c.y),h=[gk(e),vk(e,s),yk(e,s)];return[t,f=>{const p={},v=d&&Xi(a),m=v&&l();return Rt(h,b=>{wt(p,b(f,p)||{})}),zn(a,v),m&&m(),!o&&zn(r,0),p},s,e,n]},_k=(i,e,t,n,s)=>{let r=!1;const a=Gv(e,{}),[o,l,u,c,d]=bk(i),[h,f,p]=dk(c,u,a,y=>{_({},y)}),[g,v,,m]=pk(i,e,p,u,c,s),b=y=>Sn(y).some(M=>!!y[M]),_=(y,M)=>{if(t())return!1;const{pn:x,Dt:S,At:A,hn:E}=y,w=x||{},C=!!S||!r,P={It:Gv(e,w,C),pn:w,Dt:C};if(E)return v(P),!1;const T=M||f(wt({},P,{At:A})),R=l(wt({},P,{_n:p,Zt:T}));v(wt({},P,{Zt:T,tn:R}));const F=b(T),z=b(R),D=F||z||!Dp(w)||C;return r=!0,D&&n(y,{Zt:T,tn:R}),D};return[()=>{const{an:y,gt:M,Ot:x}=c,S=Xi(y),A=[h(),o(),g()],E=x();return zn(M,S),E(),rt(Ki,A)},_,()=>({gn:p,bn:u}),{wn:c,yn:m},d]},Tr=(i,e,t)=>{const{N:n}=Wn(),s=du(i),r=s?i:i.target,a=Zw(r);if(e&&!a){let o=!1;const l=[],u={},c=w=>{const C=Pw(w),P=gl(rk);return P?P(C,!0):C},d=wt({},n(),c(e)),[h,f,p]=Df(),[g,v,m]=Df(t),b=(w,C)=>{m(w,C),p(w,C)},[_,y,M,x,S]=_k(i,d,()=>o,({pn:w,Dt:C},{Zt:P,tn:T})=>{const{ft:R,Ct:F,xt:z,Ht:D,Et:O,dt:j}=P,{nn:k,sn:I,en:U,cn:B}=T;b("updated",[E,{updateHints:{sizeChanged:!!R,directionChanged:!!F,heightIntrinsicChanged:!!z,overflowEdgeChanged:!!k,overflowAmountChanged:!!I,overflowStyleChanged:!!U,scrollCoordinatesChanged:!!B,contentMutation:!!D,hostMutation:!!O,appear:!!j},changedOptions:w||{},force:!!C}])},w=>b("scroll",[E,w])),A=w=>{ik(r),Ki(l),o=!0,b("destroyed",[E,w]),f(),v()},E={options(w,C){if(w){const P=C?n():{},T=Gw(d,wt(P,c(w)));Dp(T)||(wt(d,T),y({pn:T}))}return wt({},d)},on:g,off:(w,C)=>{w&&C&&v(w,C)},state(){const{gn:w,bn:C}=M(),{ct:P}=w,{Vt:T,Rt:R,K:F,rn:z,ln:D,dn:O,Lt:j}=C;return wt({},{overflowEdge:T,overflowAmount:R,overflowStyle:F,hasOverflow:z,scrollCoordinates:{start:j.D,end:j.M},padding:D,paddingAbsolute:O,directionRTL:P,destroyed:o})},elements(){const{vt:w,ht:C,ln:P,ot:T,bt:R,gt:F,Qt:z}=x.wn,{Xt:D,Gt:O}=x.yn,j=I=>{const{Pt:U,Ut:B,Tt:V}=I;return{scrollbar:V,track:B,handle:U}},k=I=>{const{Yt:U,Wt:B}=I,V=j(U[0]);return wt({},V,{clone:()=>{const H=j(B());return y({hn:!0}),H}})};return wt({},{target:w,host:C,padding:P||T,viewport:T,content:R||T,scrollOffsetElement:F,scrollEventElement:z,scrollbarHorizontal:k(D),scrollbarVertical:k(O)})},update:w=>y({Dt:w,At:!0}),destroy:rt(A,!1),plugin:w=>u[Sn(w)[0]]};return Vt(l,[S]),tk(r,E),eE(Qw,Tr,[E,h,u]),ek(x.wn.wt,!s&&i.cancel)?(A(!0),E):(Vt(l,_()),b("initialized",[E]),E.update(),E)}return a};Tr.plugin=i=>{const e=Gn(i),t=e?i:[i],n=t.map(s=>eE(s,Tr)[0]);return sk(t),e?n:n[0]};Tr.valid=i=>{const e=i&&i.elements,t=un(e)&&e();return uu(t)&&!!Zw(t.target)};Tr.env=()=>{const{T:i,k:e,R:t,V:n,B:s,F:r,U:a,P:o,N:l,q:u}=Wn();return wt({},{scrollbarsSize:i,scrollbarsOverlaid:e,scrollbarsHiding:t,scrollTimeline:n,staticDefaultInitialization:s,staticDefaultOptions:r,getDefaultInitialization:a,setDefaultInitialization:o,getDefaultOptions:l,setDefaultOptions:u})};Tr.nonce=ZD;document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".os-scrollbar-overflow").forEach(e=>{Tr(e,{})})});function wk(i){let e=i,t;function n(s){if(window.innerWidth<=s){t||(t=document.querySelector('meta[name="viewport"]'));let a=document.querySelector('meta[name="viewport"]'),o=document.createElement("meta");o.setAttribute("name","viewport"),o.setAttribute("content",`width=${s}`),document.head.replaceChild(o,a)}else if(t&&document.querySelector('meta[name="viewport"]')!=t){let a=document.querySelector('meta[name="viewport"]');document.head.replaceChild(t,a)}}window.addEventListener("resize",function(){n(e)}),n(e)}function Ek(){let i=window.navigator.userAgent.toLowerCase(),e;switch(!0){case i.indexOf("edge")>-1:e="msEdge";break;case i.indexOf("edg/")>-1:e="chrEdge";break;case(i.indexOf("opr")>-1&&!!window.opr):e="opera";break;case(i.indexOf("chrome")>-1&&!!window.chrome):e="hrome";break;case i.indexOf("trident")>-1:e="ie";break;case i.indexOf("firefox")>-1:e="firefox";break;case i.indexOf("safari")>-1:e="safari";break;default:e="other"}(e=="safari"||e=="firefox")&&wk(430)}Ek();ce(document).on("click",'a.anchor[href^="#"]',function(i){var e=ce(this);ce("html, body").stop().animate({scrollTop:ce(e.attr("href")).offset().top-70},800),i.preventDefault()});var Ff=ce("#btnTop");ce(window).scroll(function(){ce(window).scrollTop()>145?Ff.addClass("show"):Ff.removeClass("show")});Ff.on("click",function(i){i.preventDefault(),ce("html, body").animate({scrollTop:0},"145")});function hs(i){if(ce(i).length>0){var e=ce("header").outerHeight(),t=ce(i).offset().top-e-20;ce("html, body").animate({scrollTop:t},"slow")}}function $p(i,e,t){if(t<5)throw"maxLength must be at least 5";function n(o,l){return Array.from(Array(l-o+1),(u,c)=>c+o)}var s=t<9?1:2,r=t-s*2-3>>1,a=t-s*2-2>>1;return i<=t?n(1,i):e<=t-s-1-a?n(1,t-s-1).concat([0]).concat(n(i-s+1,i)):e>=i-s-1-a?n(1,s).concat([0]).concat(n(i-s-1-a-r,i)):n(1,s).concat([0]).concat(n(e-r,e+a)).concat([0]).concat(n(i-s+1,i))}ce(function(){var i="#doctors",e=ce("#doctors .content-item").length,t=screen.width;if(t<768)var n=5;else if(t<1024)var n=8;else var n=16;var s=Math.ceil(e/n),r=7,a;function o(l){return l<1||l>s?!1:(a=l,ce(i+" .content-item").hide().slice((a-1)*n,a*n).show(),ce(i+" .pagination li").slice(1,-1).remove(),$p(s,a,r).forEach(u=>{ce("<li>").addClass("page-item "+(u?"current-page ":"")+(u===a?"active ":"")).append(ce("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),a===1?ce("#previous-page").addClass("active"):ce("#previous-page").removeClass("active"),a===s?ce("#next-page").addClass("active"):ce("#next-page").removeClass("active"),!0)}ce("#doctors .pagination").append(ce("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ce('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ce("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ce('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ce("#doctors").show(),o(1)):ce("#doctors .pagination").hide(),ce(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ce(this).text();o(l),hs(i)}),ce(i+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),hs(i)}}),ce(i+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),hs(i)}})});ce(function(){var i="#shares",e=ce("#shares .content-item").length,t=screen.width;if(t<768)var n=5;else if(t<1200)var n=8;else var n=9;var s=Math.ceil(e/n),r=7,a;function o(l){return l<1||l>s?!1:(a=l,ce(i+" .content-item").hide().slice((a-1)*n,a*n).show(),ce(i+" .pagination li").slice(1,-1).remove(),$p(s,a,r).forEach(u=>{ce("<li>").addClass("page-item "+(u?"current-page ":"")+(u===a?"active ":"")).append(ce("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),a===1?ce("#previous-page").addClass("active"):ce("#previous-page").removeClass("active"),a===s?ce("#next-page").addClass("active"):ce("#next-page").removeClass("active"),!0)}ce("#shares .pagination").append(ce("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ce('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ce("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ce('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ce("#shares").show(),o(1)):ce("#shares .pagination").hide(),ce(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ce(this).text();o(l),hs(i)}),ce(i+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),hs(i)}}),ce(i+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),hs(i)}})});ce(function(){var i="#news",e=ce("#news .content-item").length,t=screen.width;if(t<768)var n=5;else if(t<1200)var n=8;else var n=9;var s=Math.ceil(e/n),r=9,a;function o(l){return console.log(l),l<1||l>s?!1:(a=l,ce(i+" .content-item").hide().slice((a-1)*n,a*n).show(),ce(i+" .pagination li").slice(1,-1).remove(),$p(s,a,r).forEach(u=>{ce("<li>").addClass("page-item "+(u?"current-page ":"")+(u===a?"active ":"")).append(ce("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),a===1?ce("#previous-page").addClass("active"):ce("#previous-page").removeClass("active"),a===s?ce("#next-page").addClass("active"):ce("#next-page").removeClass("active"),!0)}ce("#news .pagination").append(ce("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ce('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ce("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ce('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ce("#news").show(),o(1)):ce("#news .pagination").hide(),ce(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ce(this).text();o(l),hs(i)}),ce(i+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),hs(i)}}),ce(i+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),hs(i)}})});let Qv=0;ce(window).scroll(function(i){let e=ce(this).scrollTop(),t=15,n=15;ce(window).width()<1024&&(t=5,n=5),e>Qv&&ce(window).scrollTop()>=n?(ce(".header").removeClass("header--show").addClass("header--hide"),ce("main").addClass("show")):(ce(".header").removeClass("header--hide"),ce(window).scrollTop()<=t?(ce(".header").removeClass("header--show"),ce("main").removeClass("show")):(ce(".header").addClass("header--show"),ce("main").addClass("show"))),Qv=e});setInterval(function(){ce(".header").hasClass("header--hide")&&(ce(".header-top .current-lang").removeClass("active"),ce(".header-top .current-lang--inner").removeClass("active"),ce(".header-top .current-lang .submenu").removeClass("active"))},300);nE(ce(".header .languages .current-lang .current-lang--inner"),ce(".header .languages .current-lang .submenu"),ce(".header .languages .current-lang"));nE(ce(".header-main--desk .nav-link .nav-link--inner"),ce(".header-main--desk .nav-link .submenu"),ce(".header-main--desk .nav-link"));function nE(i,e,t){i.each(function(n){xk(ce(this),e.eq(n),t.eq(n))})}function xk(i,e,t){ce(document).mouseup(function(n){t.is(n.target)||t.has(n.target).length!==0?t.hasClass("active")?(i.is(n.target)||i.has(n.target).length!==0)&&i.hasClass("active")&&(e.removeClass("active"),t.removeClass("active"),i.removeClass("active")):(e.addClass("active"),t.addClass("active"),i.addClass("active")):!e.is(n.target)&&e.has(n.target).length===0&&(e.removeClass("active"),t.removeClass("active"),i.removeClass("active"))})}(function(){function i(){var n=document.createElement("div"),s={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var r in s)if(s.hasOwnProperty(r)&&n.style[r]!==void 0)return s[r]}function e(n,s){var r={};for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);for(var a in s)s.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(r[a]=s[a]);return r}var t=function(n){var s=this;this.curItem=null,this.curLevel=0,this.transitionEnd=i(),this.options={};var r={initElem:".push-menu",menuTitle:"Menu"};n&&typeof n=="object"?this.options=e(r,n):this.options=r,this.options.menuTitle=this.options.initElem.find(".nav-title").text().trim()||this.options.menuTitle,this.options.defaultSlug=this.options.initElem.find(".nav-title").closest("a").attr("href")||"#",t.prototype.setMenuTitle=function(c){return s.options.menuTitle=c,l(s),c},function(c){a(c),l(c)}(this);function a(c){c.options.initElem.find(".navbar-toggler").on("click",function(d){d.preventDefault(),c.curItem=ce(this).parent(),o(c,"start")}),c.options.initElem.on("click",".has-dropdown > span",function(d){d.preventDefault(),c.curItem=ce(this).parent(),o(c,"forward")}),c.options.initElem.on("click",".nav-back",function(){o(c,"back")})}function o(c,d){u(c,d),d==="back"||d==="start"?(c.curItem.removeClass("nav-dropdown-open nav-dropdown-active"),c.curItem=c.curItem.parent().closest(".item"),c.curItem.length&&c.curItem.addClass("nav-dropdown-open nav-dropdown-active"),l(c)):(c.curItem.addClass("nav-dropdown-open nav-dropdown-active"),l(c))}function l(c){var d=c.options.menuTitle,h=c.options.initElem.find(".nav-toggle");if(c.curLevel>0&&c.curItem&&c.curItem.length){const f=c.curItem.children("span");d=f.text().trim();let p=f.data("slug")||"#";h.addClass("back-visible");let g=h.find(".nav-title").closest("a");if(g.length)g.attr("href",p).find(".nav-title").text(d);else{let v='<a href="'+p+'"><span class="nav-title h3">'+d+"</span></a>";h.find(".nav-title").replaceWith(v)}}else{d=c.options.menuTitle;let f=c.options.defaultSlug||"#";h.removeClass("back-visible");let p=h.find(".nav-title").closest("a");if(p.length)p.attr("href",f).find(".nav-title").text(d);else{let g='<a href="'+f+'"><span class="nav-title h3">'+d+"</span></a>";h.find(".nav-title").replaceWith(g)}}}function u(c,d){d==="back"?c.curLevel=c.curLevel>0?c.curLevel-1:0:d==="forward"?c.curLevel+=1:c.curLevel=0,c.options.initElem.children(".push-menu--nav").children(".push-menu--lvl").css({transform:"translateX(-"+c.curLevel*100+"%)"})}};ce(document).ready(function(){ce(".header-main--desk .push-menu, .header-main--mob .push-menu").each(function(){new t({initElem:ce(this)})})})})();ce(document).ready(function(){let i=document.querySelector("body"),e=document.querySelector(".navbar-toggler"),t=document.querySelector(".popup-bg-body"),n=!0;e.addEventListener("click",function(s){n?(i.classList.add("lock"),t.classList.add("open"),n=!1,setTimeout(function(){n=!0},1e3)):s.preventDefault()}),setInterval(function(){ce(t).hasClass("collapsed")&&(i.classList.remove("lock"),t.classList.remove("open"))},100)});ce(document).mouseup(function(i){!ce(".header").is(i.target)&&ce(".header").has(i.target).length===0&&(ce(".popup-bg-body").removeClass("open"),ce("body").removeClass("lock"))});setInterval(function(){window.innerWidth>=1024&&ce(".navbar-collapse").hasClass("show")&&ce(".navbar-toggler").click()},1e3);let Sk=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${Sk}px`);window.addEventListener("resize",()=>{let i=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${i}px`)});const Tk=document.querySelectorAll(".form-textarea");document.querySelectorAll(".textarea-counter .count");function Mk(i){const e=i.target,t=e.parentElement.querySelector(".textarea-counter .count");t.textContent=e.value.length}Tk.forEach(i=>{i.addEventListener("input",Mk)});function Gp(){var i=document.querySelectorAll(".select2-results__options");i.forEach(function(e){e.scrollHeight>e.clientHeight?(e.classList.add("has-scrollbar"),e.classList.remove("no-scrollbar")):(e.classList.add("no-scrollbar"),e.classList.remove("has-scrollbar"))})}function Ck(){const i=new MutationObserver(t=>{for(let n of t)n.type==="attributes"&&n.attributeName==="class"&&n.target.classList.contains("select2-container--open")&&Gp()}),e={attributes:!0,subtree:!0,childList:!0};i.observe(document.body,e)}window.onload=function(){Gp(),Ck()};window.onresize=Gp;window.addEventListener("resize",i=>{});window.addEventListener("load",function(){setTimeout(()=>{},500)},!1);ce(document).ready(function(){});(function(){var i=function(e){var t=this;this.curItem=null,this.curLevel=0,this.transitionEnd=r(),this.options={};var n={initElem:".push-menu"};e&&typeof e=="object"?this.options=s(n,e):this.options=n;function s(u,c){var d={};for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h]);for(var h in c)c.hasOwnProperty(h)&&u.hasOwnProperty(h)&&(d[h]=c[h]);return d}i.prototype.getCurrentItem=function(){return t.curItem},function(u){a(u)}(this);function r(){var u=document.createElement("div"),c={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var d in c)if(c.hasOwnProperty(d)&&u.style[d]!==void 0)return c[d]}function a(u){u.options.initElem.find(".btn-nav-back").on("click",function(c){c.preventDefault(),o(u,"back")}),u.options.initElem.find(".btn-nav-forward").on("click",function(c){c.preventDefault(),u.curItem=ce(this).closest(".item.has-dropdown"),o(u,"forward")}),u.options.initElem.on("click",".has-dropdown > a",function(c){})}function o(u,c){l(u,c),c==="back"?u.curItem&&(u.curItem.removeClass("nav-dropdown-open nav-dropdown-active"),u.curItem=u.curItem.parent().closest(".item"),u.curItem.length&&u.curItem.addClass("nav-dropdown-open nav-dropdown-active")):u.curItem.addClass("nav-dropdown-open nav-dropdown-active")}function l(u,c){c==="back"?u.curLevel=u.curLevel>0?u.curLevel-1:0:c==="forward"?u.curLevel+=1:u.curLevel=0,u.options.initElem.children(".push-menu--nav").children(".push-menu--lvl").css({transform:"translateX(-"+u.curLevel*100+"%)"}),u.curLevel>0?u.options.initElem.find(".nav-toggle").addClass("back-visible"):u.options.initElem.find(".nav-toggle").removeClass("back-visible")}};ce(document).ready(function(){ce(".offices-direction .push-menu").each(function(){new i({initElem:ce(this)})})})})();ce(document).on("click",'a.anchor[href^="#"]',function(i){var e=ce(this);ce("html, body").stop().animate({scrollTop:ce(e.attr("href")).offset().top-140},800),i.preventDefault()});const Ak=document.querySelectorAll(".btn-read-more--check-up");Ak.forEach(i=>{i.addEventListener("click",function(){const e=this.closest(".check-up--item");e.classList.contains("active")?(e.classList.remove("active"),this.textContent=transMoreDetails):(document.querySelectorAll(".check-up--item").forEach(t=>{t.classList.remove("active"),t.querySelector(".btn-read-more--check-up").textContent=transMoreDetails}),e.classList.add("active"),this.textContent=transCollapse)})});function sE(){if(window.innerWidth>=768){var i=document.getElementById("doctor-features--inner-1"),e=document.getElementById("doctor-features--inner-2");if(i&&e){var t=e.offsetHeight;i.style.height=t+"px"}}}window.onload=sE;window.onresize=sE;$(".contact-details").on("click",function(){var i=$(this).data("city"),e=$(this).data("affiliates")||[];$("#popup--contacts #modal-city").text(i);let t=$("#popup--contacts #affiliates-container");t.empty(),e.forEach(n=>{let s=$("<div>").addClass("col-12 col-xl-6"),r=$("<ul>").addClass("list-unstyled mb-0");n.address&&r.append(`<li><div class="offices-address">${n.address}</div></li>`),n.first_phone&&r.append(`<li><a href="tel:${n.first_phone}"><div class="link-phone">${n.first_phone}</div></a></li>`),n.second_phone&&r.append(`<li><a href="tel:${n.second_phone}"><div class="link-phone">${n.second_phone}</div></a></li>`),n.hours&&r.append(`<li><div class="offices-time">${n.hours}</div></li>`),n.email&&r.append(`<li><a href="mailto:${n.email}"><div class="offices-email">${n.email}</div></a></li>`),s.append(r),n.latitude&&s.append(`<input type="hidden" id="first-latitude" value="${n.latitude}">`),n.longitude&&s.append(`<input type="hidden" id="first-longitude" value="${n.longitude}">`),t.append(s)}),Pk(e)});function Pk(i){[{elementId:"map",center:{lat:50.45668411158,lng:30.50518209469263},zoom:7,tourStops:i.filter(t=>t.latitude&&t.longitude&&t.address).map(t=>({position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},title:t.address}))}].forEach(({elementId:t,zoom:n,tourStops:s})=>{const r=document.getElementById(t);if(r){const a=new google.maps.LatLngBounds,o=new google.maps.Map(r,{zoom:n,disableDefaultUI:!0,scaleControl:!0,zoomControl:!0,scrollwheel:!1,mapId:"cd19383a34cacd50",styles:[{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{visibility:"off"}]}]}),l=new google.maps.InfoWindow;s.forEach(({position:u,title:c})=>{a.extend(u);const d=document.createElement("div");d.className="map-marker-place";const h=new google.maps.marker.AdvancedMarkerView({position:u,map:o,title:`${c}`,content:d});h.addListener("click",({domEvent:f,latLng:p})=>{l.close(),l.setContent(h.title),l.open(h.map,h)})}),o.fitBounds(a),o.data.setStyle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:1.5,fillColor:"#dce2ff",fillOpacity:.25})}})}var rE={exports:{}};/*!
 * dist/inputmask
 * https://github.com/RobinHerbots/Inputmask
 * Copyright (c) 2010 - 2024 Robin Herbots
 * Licensed under the MIT license
 * Version: 5.0.9
 */(function(i,e){(function(t,n){i.exports=n()})(typeof self<"u"?self:Jv,function(){return function(){var t={3976:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default={_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:function(){},onincomplete:function(){},oncleared:function(){},repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:function(){},onBeforeMask:null,onBeforePaste:function(l,u){return typeof u.onBeforeMask=="function"?u.onBeforeMask.call(this,l,u):l},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:function(){},skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0,usePrototypeDefinitions:!0,validationEventTimeOut:3e3,substitutes:{}}},7392:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default={9:{validator:"[0-9-]",definitionSymbol:"*"},a:{validator:"[A-Za-z--]",definitionSymbol:"*"},"*":{validator:"[0-9-A-Za-z--]"}}},253:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(l,u,c){if(c===void 0)return l.__data?l.__data[u]:null;l.__data=l.__data||{},l.__data[u]=c}},3776:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.Event=void 0,o.off=function(b,_){var y,M;return v(this[0])&&b&&(y=this[0].eventRegistry,M=this[0],b.split(" ").forEach(function(x){var S=h(x.split("."),2);(function(A,E){var w,C,P=[];if(A.length>0)if(_===void 0)for(w=0,C=y[A][E].length;w<C;w++)P.push({ev:A,namespace:E&&E.length>0?E:"global",handler:y[A][E][w]});else P.push({ev:A,namespace:E&&E.length>0?E:"global",handler:_});else if(E.length>0){for(var T in y)for(var R in y[T])if(R===E)if(_===void 0)for(w=0,C=y[T][R].length;w<C;w++)P.push({ev:T,namespace:R,handler:y[T][R][w]});else P.push({ev:T,namespace:R,handler:_})}return P})(S[0],S[1]).forEach(function(A){var E=A.ev,w=A.handler;(function(C,P,T){if(C in y==1)if(M.removeEventListener?M.removeEventListener(C,T,!1):M.detachEvent&&M.detachEvent("on".concat(C),T),P==="global")for(var R in y[C])y[C][R].splice(y[C][R].indexOf(T),1);else y[C][P].splice(y[C][P].indexOf(T),1)})(E,A.namespace,w)})})),this},o.on=function(b,_){if(v(this[0])){var y=this[0].eventRegistry,M=this[0];b.split(" ").forEach(function(x){var S=h(x.split("."),2),A=S[0],E=S[1];(function(w,C){M.addEventListener?M.addEventListener(w,_,!1):M.attachEvent&&M.attachEvent("on".concat(w),_),y[w]=y[w]||{},y[w][C]=y[w][C]||[],y[w][C].push(_)})(A,E===void 0?"global":E)})}return this},o.trigger=function(b){var _=arguments;if(v(this[0]))for(var y=this[0].eventRegistry,M=this[0],x=typeof b=="string"?b.split(" "):[b.type],S=0;S<x.length;S++){var A=x[S].split("."),E=A[0],w=A[1]||"global";if(g!==void 0&&w==="global"){var C,P={bubbles:!0,cancelable:!0,composed:!0,detail:arguments[1]};if(g.createEvent){try{E==="input"?(P.inputType="insertText",C=new InputEvent(E,P)):C=new CustomEvent(E,P)}catch{(C=g.createEvent("CustomEvent")).initCustomEvent(E,P.bubbles,P.cancelable,P.detail)}b.type&&(0,c.default)(C,b),M.dispatchEvent(C)}else(C=g.createEventObject()).eventType=E,C.detail=arguments[1],b.type&&(0,c.default)(C,b),M.fireEvent("on"+C.eventType,C)}else if(y[E]!==void 0){arguments[0]=arguments[0].type?arguments[0]:d.default.Event(arguments[0]),arguments[0].detail=arguments.slice(1);var T=y[E];(w==="global"?Object.values(T).flat():T[w]).forEach(function(R){return R.apply(M,_)})}}return this};var u=p(l(9380)),c=p(l(600)),d=p(l(4963));function h(b,_){return function(y){if(Array.isArray(y))return y}(b)||function(y,M){var x=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(x!=null){var S,A,E,w,C=[],P=!0,T=!1;try{if(E=(x=x.call(y)).next,M!==0)for(;!(P=(S=E.call(x)).done)&&(C.push(S.value),C.length!==M);P=!0);}catch(R){T=!0,A=R}finally{try{if(!P&&x.return!=null&&(w=x.return(),Object(w)!==w))return}finally{if(T)throw A}}return C}}(b,_)||function(y,M){if(y){if(typeof y=="string")return f(y,M);var x=Object.prototype.toString.call(y).slice(8,-1);if(x==="Object"&&y.constructor&&(x=y.constructor.name),x==="Map"||x==="Set")return Array.from(y);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return f(y,M)}}(b,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f(b,_){(_==null||_>b.length)&&(_=b.length);for(var y=0,M=new Array(_);y<_;y++)M[y]=b[y];return M}function p(b){return b&&b.__esModule?b:{default:b}}var g=u.default.document;function v(b){return b instanceof Element}var m=o.Event=void 0;typeof u.default.CustomEvent=="function"?o.Event=m=u.default.CustomEvent:u.default.Event&&g&&g.createEvent?(o.Event=m=function(b,_){_=_||{bubbles:!1,cancelable:!1,composed:!0,detail:void 0};var y=g.createEvent("CustomEvent");return y.initCustomEvent(b,_.bubbles,_.cancelable,_.detail),y},m.prototype=u.default.Event.prototype):typeof Event<"u"&&(o.Event=m=Event)},600:function(a,o){function l(u){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},l(u)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function u(){var c,d,h,f,p,g,v=arguments[0]||{},m=1,b=arguments.length,_=!1;for(typeof v=="boolean"&&(_=v,v=arguments[m]||{},m++),l(v)!=="object"&&typeof v!="function"&&(v={});m<b;m++)if((c=arguments[m])!=null)for(d in c)h=v[d],v!==(f=c[d])&&(_&&f&&(Object.prototype.toString.call(f)==="[object Object]"||(p=Array.isArray(f)))?(p?(p=!1,g=h&&Array.isArray(h)?h:[]):g=h&&Object.prototype.toString.call(h)==="[object Object]"?h:{},v[d]=u(_,g,f)):f!==void 0&&(v[d]=f));return v}},4963:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=f(l(9380)),c=f(l(253)),d=l(3776),h=f(l(600));function f(v){return v&&v.__esModule?v:{default:v}}var p=u.default.document;function g(v){return v instanceof g?v:this instanceof g?void(v!=null&&v!==u.default&&(this[0]=v.nodeName?v:v[0]!==void 0&&v[0].nodeName?v[0]:p.querySelector(v),this[0]!==void 0&&this[0]!==null&&(this[0].eventRegistry=this[0].eventRegistry||{}))):new g(v)}g.prototype={on:d.on,off:d.off,trigger:d.trigger},g.extend=h.default,g.data=c.default,g.Event=d.Event,o.default=g},9845:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.mobile=o.iphone=o.ie=void 0;var u,c=(u=l(9380))&&u.__esModule?u:{default:u},d=c.default.navigator&&c.default.navigator.userAgent||"";o.ie=d.indexOf("MSIE ")>0||d.indexOf("Trident/")>0,o.mobile=c.default.navigator&&c.default.navigator.userAgentData&&c.default.navigator.userAgentData.mobile||c.default.navigator&&c.default.navigator.maxTouchPoints||"ontouchstart"in c.default,o.iphone=/iphone/i.test(d)},7184:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(u){return u.replace(l,"\\$1")};var l=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim")},6030:function(a,o,l){function u(E){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},u(E)}Object.defineProperty(o,"__esModule",{value:!0}),o.EventHandlers=void 0;var c,d=l(9845),h=(c=l(9380))&&c.__esModule?c:{default:c},f=l(7760),p=l(2839),g=l(8711),v=l(7215),m=l(4713);function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return w};var E,w={},C=Object.prototype,P=C.hasOwnProperty,T=Object.defineProperty||function(N,X,ie){N[X]=ie.value},R=typeof Symbol=="function"?Symbol:{},F=R.iterator||"@@iterator",z=R.asyncIterator||"@@asyncIterator",D=R.toStringTag||"@@toStringTag";function O(N,X,ie){return Object.defineProperty(N,X,{value:ie,enumerable:!0,configurable:!0,writable:!0}),N[X]}try{O({},"")}catch{O=function(X,ie,ae){return X[ie]=ae}}function j(N,X,ie,ae){var re=X&&X.prototype instanceof Y?X:Y,Ce=Object.create(re.prototype),Me=new Pe(ae||[]);return T(Ce,"_invoke",{value:Ae(N,ie,Me)}),Ce}function k(N,X,ie){try{return{type:"normal",arg:N.call(X,ie)}}catch(ae){return{type:"throw",arg:ae}}}w.wrap=j;var I="suspendedStart",U="suspendedYield",B="executing",V="completed",H={};function Y(){}function J(){}function ee(){}var se={};O(se,F,function(){return this});var ye=Object.getPrototypeOf,de=ye&&ye(ye(K([])));de&&de!==C&&P.call(de,F)&&(se=de);var W=ee.prototype=Y.prototype=Object.create(se);function Te(N){["next","throw","return"].forEach(function(X){O(N,X,function(ie){return this._invoke(X,ie)})})}function he(N,X){function ie(re,Ce,Me,Se){var Oe=k(N[re],N,Ce);if(Oe.type!=="throw"){var we=Oe.arg,Fe=we.value;return Fe&&u(Fe)=="object"&&P.call(Fe,"__await")?X.resolve(Fe.__await).then(function(Ge){ie("next",Ge,Me,Se)},function(Ge){ie("throw",Ge,Me,Se)}):X.resolve(Fe).then(function(Ge){we.value=Ge,Me(we)},function(Ge){return ie("throw",Ge,Me,Se)})}Se(Oe.arg)}var ae;T(this,"_invoke",{value:function(re,Ce){function Me(){return new X(function(Se,Oe){ie(re,Ce,Se,Oe)})}return ae=ae?ae.then(Me,Me):Me()}})}function Ae(N,X,ie){var ae=I;return function(re,Ce){if(ae===B)throw new Error("Generator is already running");if(ae===V){if(re==="throw")throw Ce;return{value:E,done:!0}}for(ie.method=re,ie.arg=Ce;;){var Me=ie.delegate;if(Me){var Se=Ee(Me,ie);if(Se){if(Se===H)continue;return Se}}if(ie.method==="next")ie.sent=ie._sent=ie.arg;else if(ie.method==="throw"){if(ae===I)throw ae=V,ie.arg;ie.dispatchException(ie.arg)}else ie.method==="return"&&ie.abrupt("return",ie.arg);ae=B;var Oe=k(N,X,ie);if(Oe.type==="normal"){if(ae=ie.done?V:U,Oe.arg===H)continue;return{value:Oe.arg,done:ie.done}}Oe.type==="throw"&&(ae=V,ie.method="throw",ie.arg=Oe.arg)}}}function Ee(N,X){var ie=X.method,ae=N.iterator[ie];if(ae===E)return X.delegate=null,ie==="throw"&&N.iterator.return&&(X.method="return",X.arg=E,Ee(N,X),X.method==="throw")||ie!=="return"&&(X.method="throw",X.arg=new TypeError("The iterator does not provide a '"+ie+"' method")),H;var re=k(ae,N.iterator,X.arg);if(re.type==="throw")return X.method="throw",X.arg=re.arg,X.delegate=null,H;var Ce=re.arg;return Ce?Ce.done?(X[N.resultName]=Ce.value,X.next=N.nextLoc,X.method!=="return"&&(X.method="next",X.arg=E),X.delegate=null,H):Ce:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,H)}function Ne(N){var X={tryLoc:N[0]};1 in N&&(X.catchLoc=N[1]),2 in N&&(X.finallyLoc=N[2],X.afterLoc=N[3]),this.tryEntries.push(X)}function Ie(N){var X=N.completion||{};X.type="normal",delete X.arg,N.completion=X}function Pe(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(Ne,this),this.reset(!0)}function K(N){if(N||N===""){var X=N[F];if(X)return X.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var ie=-1,ae=function re(){for(;++ie<N.length;)if(P.call(N,ie))return re.value=N[ie],re.done=!1,re;return re.value=E,re.done=!0,re};return ae.next=ae}}throw new TypeError(u(N)+" is not iterable")}return J.prototype=ee,T(W,"constructor",{value:ee,configurable:!0}),T(ee,"constructor",{value:J,configurable:!0}),J.displayName=O(ee,D,"GeneratorFunction"),w.isGeneratorFunction=function(N){var X=typeof N=="function"&&N.constructor;return!!X&&(X===J||(X.displayName||X.name)==="GeneratorFunction")},w.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,ee):(N.__proto__=ee,O(N,D,"GeneratorFunction")),N.prototype=Object.create(W),N},w.awrap=function(N){return{__await:N}},Te(he.prototype),O(he.prototype,z,function(){return this}),w.AsyncIterator=he,w.async=function(N,X,ie,ae,re){re===void 0&&(re=Promise);var Ce=new he(j(N,X,ie,ae),re);return w.isGeneratorFunction(X)?Ce:Ce.next().then(function(Me){return Me.done?Me.value:Ce.next()})},Te(W),O(W,D,"Generator"),O(W,F,function(){return this}),O(W,"toString",function(){return"[object Generator]"}),w.keys=function(N){var X=Object(N),ie=[];for(var ae in X)ie.push(ae);return ie.reverse(),function re(){for(;ie.length;){var Ce=ie.pop();if(Ce in X)return re.value=Ce,re.done=!1,re}return re.done=!0,re}},w.values=K,Pe.prototype={constructor:Pe,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=E,this.done=!1,this.delegate=null,this.method="next",this.arg=E,this.tryEntries.forEach(Ie),!N)for(var X in this)X.charAt(0)==="t"&&P.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=E)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var X=this;function ie(Oe,we){return Ce.type="throw",Ce.arg=N,X.next=Oe,we&&(X.method="next",X.arg=E),!!we}for(var ae=this.tryEntries.length-1;ae>=0;--ae){var re=this.tryEntries[ae],Ce=re.completion;if(re.tryLoc==="root")return ie("end");if(re.tryLoc<=this.prev){var Me=P.call(re,"catchLoc"),Se=P.call(re,"finallyLoc");if(Me&&Se){if(this.prev<re.catchLoc)return ie(re.catchLoc,!0);if(this.prev<re.finallyLoc)return ie(re.finallyLoc)}else if(Me){if(this.prev<re.catchLoc)return ie(re.catchLoc,!0)}else{if(!Se)throw new Error("try statement without catch or finally");if(this.prev<re.finallyLoc)return ie(re.finallyLoc)}}}},abrupt:function(N,X){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ae=this.tryEntries[ie];if(ae.tryLoc<=this.prev&&P.call(ae,"finallyLoc")&&this.prev<ae.finallyLoc){var re=ae;break}}re&&(N==="break"||N==="continue")&&re.tryLoc<=X&&X<=re.finallyLoc&&(re=null);var Ce=re?re.completion:{};return Ce.type=N,Ce.arg=X,re?(this.method="next",this.next=re.finallyLoc,H):this.complete(Ce)},complete:function(N,X){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&X&&(this.next=X),H},finish:function(N){for(var X=this.tryEntries.length-1;X>=0;--X){var ie=this.tryEntries[X];if(ie.finallyLoc===N)return this.complete(ie.completion,ie.afterLoc),Ie(ie),H}},catch:function(N){for(var X=this.tryEntries.length-1;X>=0;--X){var ie=this.tryEntries[X];if(ie.tryLoc===N){var ae=ie.completion;if(ae.type==="throw"){var re=ae.arg;Ie(ie)}return re}}throw new Error("illegal catch attempt")},delegateYield:function(N,X,ie){return this.delegate={iterator:K(N),resultName:X,nextLoc:ie},this.method==="next"&&(this.arg=E),H}},w}function _(E,w){var C=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!C){if(Array.isArray(E)||(C=function(D,O){if(D){if(typeof D=="string")return y(D,O);var j=Object.prototype.toString.call(D).slice(8,-1);if(j==="Object"&&D.constructor&&(j=D.constructor.name),j==="Map"||j==="Set")return Array.from(D);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return y(D,O)}}(E))||w){C&&(E=C);var P=0,T=function(){};return{s:T,n:function(){return P>=E.length?{done:!0}:{done:!1,value:E[P++]}},e:function(D){throw D},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R,F=!0,z=!1;return{s:function(){C=C.call(E)},n:function(){var D=C.next();return F=D.done,D},e:function(D){z=!0,R=D},f:function(){try{F||C.return==null||C.return()}finally{if(z)throw R}}}}function y(E,w){(w==null||w>E.length)&&(w=E.length);for(var C=0,P=new Array(w);C<w;C++)P[C]=E[C];return P}function M(E,w,C,P,T,R,F){try{var z=E[R](F),D=z.value}catch(O){return void C(O)}z.done?w(D):Promise.resolve(D).then(P,T)}var x,S,A=o.EventHandlers={keyEvent:function(E,w,C,P,T){var R=this.inputmask,F=R.opts,z=R.dependencyLib,D=R.maskset,O=this,j=z(O),k=E.key,I=g.caret.call(R,O),U=F.onKeyDown.call(this,E,g.getBuffer.call(R),I,F);if(U!==void 0)return U;if(k===p.keys.Backspace||k===p.keys.Delete||d.iphone&&k===p.keys.BACKSPACE_SAFARI||E.ctrlKey&&k===p.keys.x&&!("oncut"in O))E.preventDefault(),v.handleRemove.call(R,O,k,I),(0,f.writeBuffer)(O,g.getBuffer.call(R,!0),D.p,E,O.inputmask._valueGet()!==g.getBuffer.call(R).join(""));else if(k===p.keys.End||k===p.keys.PageDown){E.preventDefault();var B=g.seekNext.call(R,g.getLastValidPosition.call(R));g.caret.call(R,O,E.shiftKey?I.begin:B,B,!0)}else k===p.keys.Home&&!E.shiftKey||k===p.keys.PageUp?(E.preventDefault(),g.caret.call(R,O,0,E.shiftKey?I.begin:0,!0)):F.undoOnEscape&&k===p.keys.Escape&&E.altKey!==!0?((0,f.checkVal)(O,!0,!1,R.undoValue.split("")),j.trigger("click")):k!==p.keys.Insert||E.shiftKey||E.ctrlKey||R.userOptions.insertMode!==void 0?F.tabThrough===!0&&k===p.keys.Tab?E.shiftKey===!0?(I.end=g.seekPrevious.call(R,I.end,!0),m.getTest.call(R,I.end-1).match.static===!0&&I.end--,I.begin=g.seekPrevious.call(R,I.end,!0),I.begin>=0&&I.end>0&&(E.preventDefault(),g.caret.call(R,O,I.begin,I.end))):(I.begin=g.seekNext.call(R,I.begin,!0),I.end=g.seekNext.call(R,I.begin,!0),I.end<D.maskLength&&I.end--,I.begin<=D.maskLength&&(E.preventDefault(),g.caret.call(R,O,I.begin,I.end))):E.shiftKey||(F.insertModeVisual&&F.insertMode===!1?k===p.keys.ArrowRight?setTimeout(function(){var V=g.caret.call(R,O);g.caret.call(R,O,V.begin)},0):k===p.keys.ArrowLeft&&setTimeout(function(){var V=g.translatePosition.call(R,O.inputmask.caretPos.begin);g.translatePosition.call(R,O.inputmask.caretPos.end),R.isRTL?g.caret.call(R,O,V+(V===D.maskLength?0:1)):g.caret.call(R,O,V-(V===0?0:1))},0):R.keyEventHook===void 0||R.keyEventHook(E)):v.isSelection.call(R,I)?F.insertMode=!F.insertMode:(F.insertMode=!F.insertMode,g.caret.call(R,O,I.begin,I.begin));return R.isComposing=k==p.keys.Process||k==p.keys.Unidentified,R.ignorable=k.length>1&&!(O.tagName.toLowerCase()==="textarea"&&k==p.keys.Enter),A.keypressEvent.call(this,E,w,C,P,T)},keypressEvent:function(E,w,C,P,T){var R=this.inputmask||this,F=R.opts,z=R.dependencyLib,D=R.maskset,O=R.el,j=z(O),k=E.key;if(w===!0||E.ctrlKey&&E.altKey&&!R.ignorable||!(E.ctrlKey||E.metaKey||R.ignorable)){if(k){var I,U=w?{begin:T,end:T}:g.caret.call(R,O);w||(k=F.substitutes[k]||k),D.writeOutBuffer=!0;var B=v.isValid.call(R,U,k,P,void 0,void 0,void 0,w);if(B!==!1&&(g.resetMaskSet.call(R,!0),I=B.caret!==void 0?B.caret:g.seekNext.call(R,B.pos.begin?B.pos.begin:B.pos),D.p=I),I=F.numericInput&&B.caret===void 0?g.seekPrevious.call(R,I):I,C!==!1&&(setTimeout(function(){F.onKeyValidation.call(O,k,B)},0),D.writeOutBuffer&&B!==!1)){var V=g.getBuffer.call(R);(0,f.writeBuffer)(O,V,I,E,w!==!0)}if(E.preventDefault(),w)return B!==!1&&(B.forwardPosition=I),B}}else k===p.keys.Enter&&R.undoValue!==R._valueGet(!0)&&(R.undoValue=R._valueGet(!0),setTimeout(function(){j.trigger("change")},0))},pasteEvent:(x=b().mark(function E(w){var C,P,T,R,F,z;return b().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:C=function(O,j,k,I,U){var B=g.caret.call(O,j,void 0,void 0,!0),V=k.substr(0,B.begin),H=k.substr(B.end,k.length);if(V==(O.isRTL?g.getBufferTemplate.call(O).slice().reverse():g.getBufferTemplate.call(O)).slice(0,B.begin).join("")&&(V=""),H==(O.isRTL?g.getBufferTemplate.call(O).slice().reverse():g.getBufferTemplate.call(O)).slice(B.end).join("")&&(H=""),I=V+I+H,O.isRTL&&R.numericInput!==!0){I=I.split("");var Y,J=_(g.getBufferTemplate.call(O));try{for(J.s();!(Y=J.n()).done;){var ee=Y.value;I[0]===ee&&I.shift()}}catch(ye){J.e(ye)}finally{J.f()}I=I.reverse().join("")}var se=I;if(typeof U=="function"){if((se=U.call(O,se,R))===!1)return!1;se||(se=k)}(0,f.checkVal)(j,!0,!1,se.toString().split(""),w)},P=this,T=this.inputmask,R=T.opts,F=T._valueGet(!0),T.skipInputEvent=!0,w.clipboardData&&w.clipboardData.getData?z=w.clipboardData.getData("text/plain"):h.default.clipboardData&&h.default.clipboardData.getData&&(z=h.default.clipboardData.getData("Text")),C(T,P,F,z,R.onBeforePaste),w.preventDefault();case 7:case"end":return D.stop()}},E,this)}),S=function(){var E=this,w=arguments;return new Promise(function(C,P){var T=x.apply(E,w);function R(z){M(T,C,P,R,F,"next",z)}function F(z){M(T,C,P,R,F,"throw",z)}R(void 0)})},function(E){return S.apply(this,arguments)}),inputFallBackEvent:function(E){var w=this.inputmask,C=w.opts,P=w.dependencyLib,T,R=this,F=R.inputmask._valueGet(!0),z=(w.isRTL?g.getBuffer.call(w).slice().reverse():g.getBuffer.call(w)).join(""),D=g.caret.call(w,R,void 0,void 0,!0);if(z!==F){if(T=function(j,k,I){for(var U,B,V,H=j.substr(0,I.begin).split(""),Y=j.substr(I.begin).split(""),J=k.substr(0,I.begin).split(""),ee=k.substr(I.begin).split(""),se=H.length>=J.length?H.length:J.length,ye=Y.length>=ee.length?Y.length:ee.length,de="",W=[],Te="~";H.length<se;)H.push(Te);for(;J.length<se;)J.push(Te);for(;Y.length<ye;)Y.unshift(Te);for(;ee.length<ye;)ee.unshift(Te);var he=H.concat(Y),Ae=J.concat(ee);for(B=0,U=he.length;B<U;B++)switch(V=m.getPlaceholder.call(w,g.translatePosition.call(w,B)),de){case"insertText":Ae[B-1]===he[B]&&I.begin==he.length-1&&W.push(he[B]),B=U;break;case"insertReplacementText":case"deleteContentBackward":he[B]===Te?I.end++:B=U;break;default:he[B]!==Ae[B]&&(he[B+1]!==Te&&he[B+1]!==V&&he[B+1]!==void 0||(Ae[B]!==V||Ae[B+1]!==Te)&&Ae[B]!==Te?Ae[B+1]===Te&&Ae[B]===he[B+1]?(de="insertText",W.push(he[B]),I.begin--,I.end--):he[B]!==V&&he[B]!==Te&&(he[B+1]===Te||Ae[B]!==he[B]&&Ae[B+1]===he[B+1])?(de="insertReplacementText",W.push(he[B]),I.begin--):he[B]===Te?(de="deleteContentBackward",(g.isMask.call(w,g.translatePosition.call(w,B),!0)||Ae[B]===C.radixPoint)&&I.end++):B=U:(de="insertText",W.push(he[B]),I.begin--,I.end--))}return{action:de,data:W,caret:I}}(F,z,D),(R.inputmask.shadowRoot||R.ownerDocument).activeElement!==R&&R.focus(),(0,f.writeBuffer)(R,g.getBuffer.call(w)),g.caret.call(w,R,D.begin,D.end,!0),!d.mobile&&w.skipNextInsert&&E.inputType==="insertText"&&T.action==="insertText"&&w.isComposing)return!1;switch(E.inputType==="insertCompositionText"&&T.action==="insertText"&&w.isComposing?w.skipNextInsert=!0:w.skipNextInsert=!1,T.action){case"insertText":case"insertReplacementText":T.data.forEach(function(j,k){var I=new P.Event("keypress");I.key=j,w.ignorable=!1,A.keypressEvent.call(R,I)}),setTimeout(function(){w.$el.trigger("keyup")},0);break;case"deleteContentBackward":var O=new P.Event("keydown");O.key=p.keys.Backspace,A.keyEvent.call(R,O);break;default:(0,f.applyInputValue)(R,F),g.caret.call(w,R,D.begin,D.end,!0)}E.preventDefault()}},setValueEvent:function(E){var w=this.inputmask,C=w.dependencyLib,P=this,T=E&&E.detail?E.detail[0]:arguments[1];T===void 0&&(T=P.inputmask._valueGet(!0)),(0,f.applyInputValue)(P,T,new C.Event("input")),(E.detail&&E.detail[1]!==void 0||arguments[2]!==void 0)&&g.caret.call(w,P,E.detail?E.detail[1]:arguments[2])},focusEvent:function(E){var w=this.inputmask,C=w.opts,P=w&&w._valueGet();C.showMaskOnFocus&&P!==g.getBuffer.call(w).join("")&&(0,f.writeBuffer)(this,g.getBuffer.call(w),g.seekNext.call(w,g.getLastValidPosition.call(w))),C.positionCaretOnTab!==!0||w.mouseEnter!==!1||v.isComplete.call(w,g.getBuffer.call(w))&&g.getLastValidPosition.call(w)!==-1||A.clickEvent.apply(this,[E,!0]),w.undoValue=w&&w._valueGet(!0)},invalidEvent:function(E){this.inputmask.validationEvent=!0},mouseleaveEvent:function(){var E=this.inputmask,w=E.opts,C=this;E.mouseEnter=!1,w.clearMaskOnLostFocus&&(C.inputmask.shadowRoot||C.ownerDocument).activeElement!==C&&(0,f.HandleNativePlaceholder)(C,E.originalPlaceholder)},clickEvent:function(E,w){var C=this.inputmask;C.clicked++;var P=this;if((P.inputmask.shadowRoot||P.ownerDocument).activeElement===P){var T=g.determineNewCaretPosition.call(C,g.caret.call(C,P),w);T!==void 0&&g.caret.call(C,P,T)}},cutEvent:function(E){var w=this.inputmask,C=w.maskset,P=this,T=g.caret.call(w,P),R=w.isRTL?g.getBuffer.call(w).slice(T.end,T.begin):g.getBuffer.call(w).slice(T.begin,T.end),F=w.isRTL?R.reverse().join(""):R.join("");h.default.navigator&&h.default.navigator.clipboard?h.default.navigator.clipboard.writeText(F):h.default.clipboardData&&h.default.clipboardData.getData&&h.default.clipboardData.setData("Text",F),v.handleRemove.call(w,P,p.keys.Delete,T),(0,f.writeBuffer)(P,g.getBuffer.call(w),C.p,E,w.undoValue!==w._valueGet(!0))},blurEvent:function(E){var w=this.inputmask,C=w.opts,P=w.dependencyLib;w.clicked=0;var T=P(this),R=this;if(R.inputmask){(0,f.HandleNativePlaceholder)(R,w.originalPlaceholder);var F=R.inputmask._valueGet(),z=g.getBuffer.call(w).slice();F!==""&&(C.clearMaskOnLostFocus&&(g.getLastValidPosition.call(w)===-1&&F===g.getBufferTemplate.call(w).join("")?z=[]:f.clearOptionalTail.call(w,z)),v.isComplete.call(w,z)===!1&&(setTimeout(function(){T.trigger("incomplete")},0),C.clearIncomplete&&(g.resetMaskSet.call(w,!1),z=C.clearMaskOnLostFocus?[]:g.getBufferTemplate.call(w).slice())),(0,f.writeBuffer)(R,z,void 0,E)),F=w._valueGet(!0),w.undoValue!==F&&(F!=""||w.undoValue!=g.getBufferTemplate.call(w).join("")||w.undoValue==g.getBufferTemplate.call(w).join("")&&w.maskset.validPositions.length>0)&&(w.undoValue=F,T.trigger("change"))}},mouseenterEvent:function(){var E=this.inputmask,w=E.opts.showMaskOnHover,C=this;if(E.mouseEnter=!0,(C.inputmask.shadowRoot||C.ownerDocument).activeElement!==C){var P=(E.isRTL?g.getBufferTemplate.call(E).slice().reverse():g.getBufferTemplate.call(E)).join("");w&&(0,f.HandleNativePlaceholder)(C,P)}},submitEvent:function(){var E=this.inputmask,w=E.opts;E.undoValue!==E._valueGet(!0)&&E.$el.trigger("change"),g.getLastValidPosition.call(E)===-1&&E._valueGet&&E._valueGet()===g.getBufferTemplate.call(E).join("")&&E._valueSet(""),w.clearIncomplete&&v.isComplete.call(E,g.getBuffer.call(E))===!1&&E._valueSet(""),w.removeMaskOnSubmit&&(E._valueSet(E.unmaskedvalue(),!0),setTimeout(function(){(0,f.writeBuffer)(E.el,g.getBuffer.call(E))},0))},resetEvent:function(){var E=this.inputmask;E.refreshValue=!0,setTimeout(function(){(0,f.applyInputValue)(E.el,E._valueGet(!0))},0)}}},9716:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.EventRuler=void 0;var u,c=l(7760),d=(u=l(2394))&&u.__esModule?u:{default:u},h=l(2839),f=l(8711);o.EventRuler={on:function(p,g,v){var m=p.inputmask.dependencyLib,b=function(_){_.originalEvent&&(_=_.originalEvent||_,arguments[0]=_);var y,M=this,x=M.inputmask,S=x?x.opts:void 0;if(x===void 0&&this.nodeName!=="FORM"){var A=m.data(M,"_inputmask_opts");m(M).off(),A&&new d.default(A).mask(M)}else{if(["submit","reset","setvalue"].includes(_.type)||this.nodeName==="FORM"||!(M.disabled||M.readOnly&&!(_.type==="keydown"&&_.ctrlKey&&_.key===h.keys.c||S.tabThrough===!1&&_.key===h.keys.Tab))){switch(_.type){case"input":if(x.skipInputEvent===!0)return x.skipInputEvent=!1,_.preventDefault();break;case"click":case"focus":return x.validationEvent?(x.validationEvent=!1,p.blur(),(0,c.HandleNativePlaceholder)(p,(x.isRTL?f.getBufferTemplate.call(x).slice().reverse():f.getBufferTemplate.call(x)).join("")),setTimeout(function(){p.focus()},S.validationEventTimeOut),!1):(y=arguments,void setTimeout(function(){p.inputmask&&v.apply(M,y)},0))}var E=v.apply(M,arguments);return E===!1&&(_.preventDefault(),_.stopPropagation()),E}_.preventDefault()}};["submit","reset"].includes(g)?(b=b.bind(p),p.form!==null&&m(p.form).on(g,b)):m(p).on(g,b),p.inputmask.events[g]=p.inputmask.events[g]||[],p.inputmask.events[g].push(b)},off:function(p,g){if(p.inputmask&&p.inputmask.events){var v=p.inputmask.dependencyLib,m=p.inputmask.events;for(var b in g&&((m=[])[g]=p.inputmask.events[g]),m){for(var _=m[b];_.length>0;){var y=_.pop();["submit","reset"].includes(b)?p.form!==null&&v(p.form).off(b,y):v(p).off(b,y)}delete p.inputmask.events[b]}}}}},219:function(a,o,l){var u=b(l(7184)),c=b(l(2394)),d=l(2839),h=l(8711),f=l(4713);function p(k,I){return function(U){if(Array.isArray(U))return U}(k)||function(U,B){var V=U==null?null:typeof Symbol<"u"&&U[Symbol.iterator]||U["@@iterator"];if(V!=null){var H,Y,J,ee,se=[],ye=!0,de=!1;try{if(J=(V=V.call(U)).next,B!==0)for(;!(ye=(H=J.call(V)).done)&&(se.push(H.value),se.length!==B);ye=!0);}catch(W){de=!0,Y=W}finally{try{if(!ye&&V.return!=null&&(ee=V.return(),Object(ee)!==ee))return}finally{if(de)throw Y}}return se}}(k,I)||function(U,B){if(U){if(typeof U=="string")return g(U,B);var V=Object.prototype.toString.call(U).slice(8,-1);if(V==="Object"&&U.constructor&&(V=U.constructor.name),V==="Map"||V==="Set")return Array.from(U);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return g(U,B)}}(k,I)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(k,I){(I==null||I>k.length)&&(I=k.length);for(var U=0,B=new Array(I);U<I;U++)B[U]=k[U];return B}function v(k){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},v(k)}function m(k,I){for(var U=0;U<I.length;U++){var B=I[U];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(k,(V=B.key,H=void 0,H=function(Y,J){if(v(Y)!=="object"||Y===null)return Y;var ee=Y[Symbol.toPrimitive];if(ee!==void 0){var se=ee.call(Y,J||"default");if(v(se)!=="object")return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(Y)}(V,"string"),v(H)==="symbol"?H:String(H)),B)}var V,H}function b(k){return k&&k.__esModule?k:{default:k}}l(1313);var _=c.default.dependencyLib,y=function(){function k(B,V,H,Y){(function(J,ee){if(!(J instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),this.mask=B,this.format=V,this.opts=H,this.inputmask=Y,this._date=new Date(1,0,1),this.initDateObject(B,this.opts,this.inputmask)}var I,U;return I=k,(U=[{key:"date",get:function(){return this._date===void 0&&(this._date=new Date(1,0,1),this.initDateObject(void 0,this.opts,this.inputmask)),this._date}},{key:"initDateObject",value:function(B,V,H){var Y;for(T(V).lastIndex=0;Y=T(V).exec(this.format);){var J=/\d+$/.exec(Y[0]),ee=J?Y[0][0]+"x":Y[0],se=void 0;if(B!==void 0){if(J){var ye=T(V).lastIndex,de=j.call(H,Y.index,V,H&&H.maskset);T(V).lastIndex=ye,se=B.slice(0,B.indexOf(de.nextMatch[0]))}else{for(var W=Y[0][0],Te=Y.index;H&&(V.placeholder[f.getTest.call(H,Te).match.placeholder]||f.getTest.call(H,Te).match.placeholder)===W;)Te++;var he=Te-Y.index;se=B.slice(0,he||A[ee]&&A[ee][4]||ee.length)}B=B.slice(se.length)}Object.prototype.hasOwnProperty.call(A,ee)&&this.setValue(this,se,ee,A[ee][2],A[ee][1])}}},{key:"setValue",value:function(B,V,H,Y,J){if(V!==void 0)switch(Y){case"ampm":B[Y]=V,B["raw"+Y]=V.replace(/\s/g,"_");break;case"month":if(H==="mmm"||H==="mmmm"){B[Y]=z(H==="mmm"?x.monthNames.slice(0,12).findIndex(function(se){return V.toLowerCase()===se.toLowerCase()})+1:x.monthNames.slice(12,24).findIndex(function(se){return V.toLowerCase()===se.toLowerCase()})+1,2),B[Y]=B[Y]==="00"?"":B[Y].toString(),B["raw"+Y]=B[Y];break}default:B[Y]=V.replace(/[^0-9]/g,"0"),B["raw"+Y]=V.replace(/\s/g,"_")}if(J!==void 0){var ee=B[Y];(Y==="day"&&parseInt(ee)===29||Y==="month"&&parseInt(ee)===2)&&(parseInt(B.day)!==29||parseInt(B.month)!==2||B.year!==""&&B.year!==void 0||B._date.setFullYear(2012,1,29)),Y==="day"&&(S=!0,parseInt(ee)===0&&(ee=1)),Y==="month"&&(S=!0),Y==="year"&&(S=!0,ee.length<A[H][4]&&(ee=z(ee,A[H][4],!0))),(ee!==""&&!isNaN(ee)||Y==="ampm")&&J.call(B._date,ee)}}},{key:"reset",value:function(){this._date=new Date(1,0,1)}},{key:"reInit",value:function(){this._date=void 0,this.date}}])&&m(I.prototype,U),Object.defineProperty(I,"prototype",{writable:!1}),k}(),M=new Date().getFullYear(),x=c.default.prototype.i18n,S=!1,A={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return z(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",function(k){var I=k?parseInt(k):0;return I>0&&I--,Date.prototype.setMonth.call(this,I)},"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",function(k){var I=k?parseInt(k):0;return I>0&&I--,Date.prototype.setMonth.call(this,I)},"month",function(){return z(Date.prototype.getMonth.call(this)+1,2)}],mmm:[x.monthNames.slice(0,12).join("|"),function(k){var I=x.monthNames.slice(0,12).findIndex(function(U){return k.toLowerCase()===U.toLowerCase()});return I!==-1&&Date.prototype.setMonth.call(this,I)},"month",function(){return x.monthNames.slice(0,12)[Date.prototype.getMonth.call(this)]}],mmmm:[x.monthNames.slice(12,24).join("|"),function(k){var I=x.monthNames.slice(12,24).findIndex(function(U){return k.toLowerCase()===U.toLowerCase()});return I!==-1&&Date.prototype.setMonth.call(this,I)},"month",function(){return x.monthNames.slice(12,24)[Date.prototype.getMonth.call(this)]}],yy:["[0-9]{2}",function(k){var I=new Date().getFullYear().toString().slice(0,2);Date.prototype.setFullYear.call(this,"".concat(I).concat(k))},"year",function(){return z(Date.prototype.getFullYear.call(this),2)},2],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return z(Date.prototype.getFullYear.call(this),4)},4],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return z(Date.prototype.getHours.call(this),2)}],hx:[function(k){return"[0-9]{".concat(k,"}")},Date.prototype.setHours,"hours",function(k){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return z(Date.prototype.getHours.call(this),2)}],Hx:[function(k){return"[0-9]{".concat(k,"}")},Date.prototype.setHours,"hours",function(k){return function(){return z(Date.prototype.getHours.call(this),k)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return z(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return z(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return z(Date.prototype.getMilliseconds.call(this),3)},3],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return z(Date.prototype.getMilliseconds.call(this),2)},2],t:["[ap]",w,"ampm",C,1],tt:["[ap]m",w,"ampm",C,2],T:["[AP]",w,"ampm",C,1],TT:["[AP]M",w,"ampm",C,2],Z:[".*",void 0,"Z",function(){var k=this.toString().match(/\((.+)\)/)[1];return k.includes(" ")&&(k=(k=k.replace("-"," ").toUpperCase()).split(" ").map(function(I){return p(I,1)[0]}).join("")),k}],o:[""],S:[""]},E={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function w(k){var I=this.getHours();k.toLowerCase().includes("p")?this.setHours(I+12):k.toLowerCase().includes("a")&&I>=12&&this.setHours(I-12)}function C(){var k=this.getHours();return(k=k||12)>=12?"PM":"AM"}function P(k){var I=/\d+$/.exec(k[0]);if(I&&I[0]!==void 0){var U=A[k[0][0]+"x"].slice("");return U[0]=U[0](I[0]),U[3]=U[3](I[0]),U}if(A[k[0]])return A[k[0]]}function T(k){if(!k.tokenizer){var I=[],U=[];for(var B in A)if(/\.*x$/.test(B)){var V=B[0]+"\\d+";U.indexOf(V)===-1&&U.push(V)}else I.indexOf(B[0])===-1&&I.push(B[0]);k.tokenizer="("+(U.length>0?U.join("|")+"|":"")+I.join("+|")+")+?|.",k.tokenizer=new RegExp(k.tokenizer,"g")}return k.tokenizer}function R(k,I,U){if(!S)return!0;if(k.rawday===void 0||!isFinite(k.rawday)&&new Date(k.date.getFullYear(),isFinite(k.rawmonth)?k.month:k.date.getMonth()+1,0).getDate()>=k.day||k.day=="29"&&(!isFinite(k.rawyear)||k.rawyear===void 0||k.rawyear==="")||new Date(k.date.getFullYear(),isFinite(k.rawmonth)?k.month:k.date.getMonth()+1,0).getDate()>=k.day)return I;if(k.day=="29"){var B=j.call(this,I.pos,U,this.maskset);if(B.targetMatch&&B.targetMatch[0]==="yyyy"&&I.pos-B.targetMatchIndex==2)return I.remove=I.pos+1,I}else if(k.date.getMonth()==2&&k.day=="30"&&I.c!==void 0)return k.day="03",k.date.setDate(3),k.date.setMonth(1),I.insert=[{pos:I.pos,c:"0"},{pos:I.pos+1,c:I.c}],I.caret=h.seekNext.call(this,I.pos+1),I;return!1}function F(k,I,U,B){var V,H,Y="",J=0,ee={};for(T(U).lastIndex=0;V=T(U).exec(k);){if(I===void 0)if(H=P(V))Y+="("+H[0]+")",U.placeholder&&U.placeholder!==""?(ee[J]=U.placeholder[V.index%U.placeholder.length],ee[U.placeholder[V.index%U.placeholder.length]]=V[0].charAt(0)):ee[J]=V[0].charAt(0);else switch(V[0]){case"[":Y+="(";break;case"]":Y+=")?";break;default:Y+=(0,u.default)(V[0]),ee[J]=V[0].charAt(0)}else(H=P(V))?B!==!0&&H[3]?Y+=H[3].call(I.date):H[2]?Y+=I["raw"+H[2]]:Y+=V[0]:Y+=V[0];J++}return I===void 0&&(U.placeholder=ee),Y}function z(k,I,U){for(k=String(k),I=I||2;k.length<I;)k=U?k+"0":"0"+k;return k}function D(k,I,U){return typeof k=="string"?new y(k,I,U,this):k&&v(k)==="object"&&Object.prototype.hasOwnProperty.call(k,"date")?k:void 0}function O(k,I){return F(I.inputFormat,{date:k},I)}function j(k,I,U){var B,V,H=this,Y=U&&U.tests[k]?I.placeholder[U.tests[k][0].match.placeholder]||U.tests[k][0].match.placeholder:"",J=0,ee=0;for(T(I).lastIndex=0;V=T(I).exec(I.inputFormat);){var se=/\d+$/.exec(V[0]);if(se)ee=parseInt(se[0]);else{for(var ye=V[0][0],de=J;H&&(I.placeholder[f.getTest.call(H,de).match.placeholder]||f.getTest.call(H,de).match.placeholder)===ye;)de++;(ee=de-J)===0&&(ee=V[0].length)}if(J+=ee,V[0].indexOf(Y)!=-1||J>=k+1){B=V,V=T(I).exec(I.inputFormat);break}}return{targetMatchIndex:J-ee,nextMatch:V,targetMatch:B}}c.default.extendAliases({datetime:{mask:function(k){return k.numericInput=!1,A.S=x.ordinalSuffix.join("|"),k.inputFormat=E[k.inputFormat]||k.inputFormat,k.displayFormat=E[k.displayFormat]||k.displayFormat||k.inputFormat,k.outputFormat=E[k.outputFormat]||k.outputFormat||k.inputFormat,k.regex=F(k.inputFormat,void 0,k),k.min=D(k.min,k.inputFormat,k),k.max=D(k.max,k.inputFormat,k),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:null,outputFormat:null,min:null,max:null,skipOptionalPartCharacter:"",preValidation:function(k,I,U,B,V,H,Y,J){if(J)return!0;if(isNaN(U)&&k[I]!==U){var ee=j.call(this,I,V,H);if(ee.nextMatch&&ee.nextMatch[0]===U&&ee.targetMatch[0].length>1){var se=P(ee.targetMatch)[0];if(new RegExp(se).test("0"+k[I-1]))return k[I]=k[I-1],k[I-1]="0",{fuzzy:!0,buffer:k,refreshFromBuffer:{start:I-1,end:I+1},pos:I+1}}}return!0},postValidation:function(k,I,U,B,V,H,Y,J){var ee,se,ye=this;if(Y)return!0;if(B===!1&&(((ee=j.call(ye,I+1,V,H)).targetMatch&&ee.targetMatchIndex===I&&ee.targetMatch[0].length>1&&A[ee.targetMatch[0]]!==void 0||(ee=j.call(ye,I+2,V,H)).targetMatch&&ee.targetMatchIndex===I+1&&ee.targetMatch[0].length>1&&A[ee.targetMatch[0]]!==void 0)&&(se=P(ee.targetMatch)[0]),se!==void 0&&(H.validPositions[I+1]!==void 0&&new RegExp(se).test(U+"0")?(k[I]=U,k[I+1]="0",B={pos:I+2,caret:I}):new RegExp(se).test("0"+U)&&(k[I]="0",k[I+1]=U,B={pos:I+2})),B===!1))return B;if(B.fuzzy&&(k=B.buffer,I=B.pos),(ee=j.call(ye,I,V,H)).targetMatch&&ee.targetMatch[0]&&A[ee.targetMatch[0]]!==void 0){var de=P(ee.targetMatch);se=de[0];var W=k.slice(ee.targetMatchIndex,ee.targetMatchIndex+ee.targetMatch[0].length);if(new RegExp(se).test(W.join(""))===!1&&ee.targetMatch[0].length===2&&H.validPositions[ee.targetMatchIndex]&&H.validPositions[ee.targetMatchIndex+1]&&(H.validPositions[ee.targetMatchIndex+1].input="0"),de[2]=="year")for(var Te=f.getMaskTemplate.call(ye,!1,1,void 0,!0),he=I+1;he<k.length;he++)k[he]=Te[he],H.validPositions.splice(I+1,1)}var Ae=B,Ee=D.call(ye,k.join(""),V.inputFormat,V);return Ae&&!isNaN(Ee.date.getTime())&&(V.prefillYear&&(Ae=function(Ne,Ie,Pe){if(Ne.year!==Ne.rawyear){var K=M.toString(),N=Ne.rawyear.replace(/[^0-9]/g,""),X=K.slice(0,N.length),ie=K.slice(N.length);if(N.length===2&&N===X){var ae=new Date(M,Ne.month-1,Ne.day);Ne.day==ae.getDate()&&(!Pe.max||Pe.max.date.getTime()>=ae.getTime())&&(Ne.date.setFullYear(M),Ne.year=K,Ie.insert=[{pos:Ie.pos+1,c:ie[0]},{pos:Ie.pos+2,c:ie[1]}])}}return Ie}(Ee,Ae,V)),Ae=function(Ne,Ie,Pe,K,N){if(!Ie)return Ie;if(Ie&&Pe.min&&!isNaN(Pe.min.date.getTime())){var X;for(Ne.reset(),T(Pe).lastIndex=0;X=T(Pe).exec(Pe.inputFormat);){var ie;if((ie=P(X))&&ie[3]){for(var ae=ie[1],re=Ne[ie[2]],Ce=Pe.min[ie[2]],Me=Pe.max?Pe.max[ie[2]]:Ce+1,Se=[],Oe=!1,we=0;we<Ce.length;we++)K.validPositions[we+X.index]!==void 0||Oe?(Se[we]=re[we],Oe=Oe||re[we]>Ce[we]):(we+X.index==0&&re[we]<Ce[we]?(Se[we]=re[we],Oe=!0):Se[we]=Ce[we],ie[2]==="year"&&re.length-1==we&&Ce!=Me&&(Se=(parseInt(Se.join(""))+1).toString().split("")),ie[2]==="ampm"&&Ce!=Me&&Pe.min.date.getTime()>Ne.date.getTime()&&(Se[we]=Me[we]));ae.call(Ne._date,Se.join(""))}}Ie=Pe.min.date.getTime()<=Ne.date.getTime(),Ne.reInit()}return Ie&&Pe.max&&(isNaN(Pe.max.date.getTime())||(Ie=Pe.max.date.getTime()>=Ne.date.getTime())),Ie}(Ee,Ae=R.call(ye,Ee,Ae,V),V,H)),I!==void 0&&Ae&&B.pos!==I?{buffer:F(V.inputFormat,Ee,V).split(""),refreshFromBuffer:{start:I,end:B.pos},pos:B.caret||B.pos}:Ae},onKeyDown:function(k,I,U,B){k.ctrlKey&&k.key===d.keys.ArrowRight&&(this.inputmask._valueSet(O(new Date,B)),_(this).trigger("setvalue"))},onUnMask:function(k,I,U){return I&&F(U.outputFormat,D.call(this,k,U.inputFormat,U),U,!0)},casing:function(k,I,U,B){if(I.nativeDef.indexOf("[ap]")==0)return k.toLowerCase();if(I.nativeDef.indexOf("[AP]")==0)return k.toUpperCase();var V=f.getTest.call(this,[U-1]);return V.match.def.indexOf("[AP]")==0||U===0||V&&V.input===String.fromCharCode(d.keyCode.Space)||V&&V.match.def===String.fromCharCode(d.keyCode.Space)?k.toUpperCase():k.toLowerCase()},onBeforeMask:function(k,I){return Object.prototype.toString.call(k)==="[object Date]"&&(k=O(k,I)),k},insertMode:!1,insertModeVisual:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric",prefillYear:!0}})},1313:function(a,o,l){var u,c=(u=l(2394))&&u.__esModule?u:{default:u};c.default.dependencyLib.extend(!0,c.default.prototype.i18n,{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]})},3851:function(a,o,l){var u,c=(u=l(2394))&&u.__esModule?u:{default:u},d=l(8711),h=l(4713);function f(m){return function(b){if(Array.isArray(b))return p(b)}(m)||function(b){if(typeof Symbol<"u"&&b[Symbol.iterator]!=null||b["@@iterator"]!=null)return Array.from(b)}(m)||function(b,_){if(b){if(typeof b=="string")return p(b,_);var y=Object.prototype.toString.call(b).slice(8,-1);if(y==="Object"&&b.constructor&&(y=b.constructor.name),y==="Map"||y==="Set")return Array.from(b);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return p(b,_)}}(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p(m,b){(b==null||b>m.length)&&(b=m.length);for(var _=0,y=new Array(b);_<b;_++)y[_]=m[_];return y}c.default.extendDefinitions({A:{validator:"[A-Za-z--]",casing:"upper"},"&":{validator:"[0-9A-Za-z--]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});var g=/25[0-5]|2[0-4][0-9]|[01][0-9][0-9]/;function v(m,b,_,y,M){if(_-1>-1&&b.buffer[_-1]!=="."?(m=b.buffer[_-1]+m,m=_-2>-1&&b.buffer[_-2]!=="."?b.buffer[_-2]+m:"0"+m):m="00"+m,M.greedy&&parseInt(m)>255&&g.test("00"+m.charAt(2))){var x=[].concat(f(b.buffer.slice(0,_)),[".",m.charAt(2)]);if(x.join("").match(/\./g).length<4)return{refreshFromBuffer:!0,buffer:x,caret:_+2}}return g.test(m)}c.default.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)://.*",autoUnmask:!1,keepStatic:!1,tabThrough:!0},ip:{mask:"i{1,3}.j{1,3}.k{1,3}.l{1,3}",definitions:{i:{validator:v},j:{validator:v},k:{validator:v},l:{validator:v}},onUnMask:function(m,b,_){return m},inputmode:"decimal",substitutes:{",":"."}},email:{mask:function(m){var b=m.separator,_=m.quantifier,y="*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",M=y;if(b)for(var x=0;x<_;x++)M+="[".concat(b).concat(y,"]");return M},greedy:!1,casing:"lower",separator:null,quantifier:5,skipOptionalPartCharacter:"",onBeforePaste:function(m,b){return(m=m.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9-A-Za-z--!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function(m,b,_){return m},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function(m,b,_,y,M,x,S){var A=h.getMaskTemplate.call(this,!0,d.getLastValidPosition.call(this),!0,!0);return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(A.join(""))}}})},207:function(a,o,l){var u=f(l(7184)),c=f(l(2394)),d=l(2839),h=l(8711);function f(y){return y&&y.__esModule?y:{default:y}}var p=c.default.dependencyLib;function g(y,M){for(var x="",S=0;S<y.length;S++)c.default.prototype.definitions[y.charAt(S)]||M.definitions[y.charAt(S)]||M.optionalmarker[0]===y.charAt(S)||M.optionalmarker[1]===y.charAt(S)||M.quantifiermarker[0]===y.charAt(S)||M.quantifiermarker[1]===y.charAt(S)||M.groupmarker[0]===y.charAt(S)||M.groupmarker[1]===y.charAt(S)||M.alternatormarker===y.charAt(S)?x+="\\"+y.charAt(S):x+=y.charAt(S);return x}function v(y,M,x,S){if(y.length>0&&M>0&&(!x.digitsOptional||S)){var A=y.indexOf(x.radixPoint),E=!1;x.negationSymbol.back===y[y.length-1]&&(E=!0,y.length--),A===-1&&(y.push(x.radixPoint),A=y.length-1);for(var w=1;w<=M;w++)isFinite(y[A+w])||(y[A+w]="0")}return E&&y.push(x.negationSymbol.back),y}function m(y,M){var x=0;for(var S in y==="+"&&(x=h.seekNext.call(this,M.validPositions.length-1)),M.tests)if((S=parseInt(S))>=x){for(var A=0,E=M.tests[S].length;A<E;A++)if((M.validPositions[S]===void 0||y==="-")&&M.tests[S][A].match.def===y)return S+(M.validPositions[S]!==void 0&&y!=="-"?1:0)}return x}function b(y,M){for(var x=-1,S=0,A=M.validPositions.length;S<A;S++){var E=M.validPositions[S];if(E&&E.match.def===y){x=S;break}}return x}function _(y,M,x,S,A){var E=M.buffer?M.buffer.indexOf(A.radixPoint):-1,w=(E!==-1||S&&A.jitMasking)&&new RegExp(A.definitions[9].validator).test(y);return!S&&A._radixDance&&E!==-1&&w&&M.validPositions[E]==null?{insert:{pos:E===x?E+1:E,c:A.radixPoint},pos:x}:w}c.default.extendAliases({numeric:{mask:function(y){y.repeat=0,y.groupSeparator===y.radixPoint&&y.digits&&y.digits!=="0"&&(y.radixPoint==="."?y.groupSeparator=",":y.radixPoint===","?y.groupSeparator=".":y.groupSeparator=""),y.groupSeparator===" "&&(y.skipOptionalPartCharacter=void 0),y.placeholder.length>1&&(y.placeholder=y.placeholder.charAt(0)),y.positionCaretOnClick==="radixFocus"&&y.placeholder===""&&(y.positionCaretOnClick="lvp");var M="0",x=y.radixPoint;y.numericInput===!0&&y.__financeInput===void 0?(M="1",y.positionCaretOnClick=y.positionCaretOnClick==="radixFocus"?"lvp":y.positionCaretOnClick,y.digitsOptional=!1,isNaN(y.digits)&&(y.digits=2),y._radixDance=!1,x=y.radixPoint===","?"?":"!",y.radixPoint!==""&&y.definitions[x]===void 0&&(y.definitions[x]={},y.definitions[x].validator="["+y.radixPoint+"]",y.definitions[x].placeholder=y.radixPoint,y.definitions[x].static=!0,y.definitions[x].generated=!0)):(y.__financeInput=!1,y.numericInput=!0);var S,A="[+]";if(A+=g(y.prefix,y),y.groupSeparator!==""?(y.definitions[y.groupSeparator]===void 0&&(y.definitions[y.groupSeparator]={},y.definitions[y.groupSeparator].validator="["+y.groupSeparator+"]",y.definitions[y.groupSeparator].placeholder=y.groupSeparator,y.definitions[y.groupSeparator].static=!0,y.definitions[y.groupSeparator].generated=!0),A+=y._mask(y)):A+="9{+}",y.digits!==void 0&&y.digits!==0){var E=y.digits.toString().split(",");isFinite(E[0])&&E[1]&&isFinite(E[1])?A+=x+M+"{"+y.digits+"}":(isNaN(y.digits)||parseInt(y.digits)>0)&&(y.digitsOptional||y.jitMasking?(S=A+x+M+"{0,"+y.digits+"}",y.keepStatic=!0):A+=x+M+"{"+y.digits+"}")}else y.inputmode="numeric";return A+=g(y.suffix,y),A+="[-]",S&&(A=[S+g(y.suffix,y)+"[-]",A]),y.greedy=!1,function(w){w.parseMinMaxOptions===void 0&&(w.min!==null&&(w.min=w.min.toString().replace(new RegExp((0,u.default)(w.groupSeparator),"g"),""),w.radixPoint===","&&(w.min=w.min.replace(w.radixPoint,".")),w.min=isFinite(w.min)?parseFloat(w.min):NaN,isNaN(w.min)&&(w.min=Number.MIN_VALUE)),w.max!==null&&(w.max=w.max.toString().replace(new RegExp((0,u.default)(w.groupSeparator),"g"),""),w.radixPoint===","&&(w.max=w.max.replace(w.radixPoint,".")),w.max=isFinite(w.max)?parseFloat(w.max):NaN,isNaN(w.max)&&(w.max=Number.MAX_VALUE)),w.parseMinMaxOptions="done")}(y),y.radixPoint!==""&&y.substituteRadixPoint&&(y.substitutes[y.radixPoint=="."?",":"."]=y.radixPoint),A},_mask:function(y){return"("+y.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,SetMaxOnOverflow:!1,step:1,inputType:"text",unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"decimal",shortcuts:{k:"1000",m:"1000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",usePrototypeDefinitions:!1,stripLeadingZeroes:!0,substituteRadixPoint:!0,definitions:{0:{validator:_},1:{validator:_,definitionSymbol:"9"},9:{validator:"[0-9---]",definitionSymbol:"*"},"+":{validator:function(y,M,x,S,A){return A.allowMinus&&(y==="-"||y===A.negationSymbol.front)}},"-":{validator:function(y,M,x,S,A){return A.allowMinus&&y===A.negationSymbol.back}}},preValidation:function(y,M,x,S,A,E,w,C){var P=this;if(A.__financeInput!==!1&&x===A.radixPoint)return!1;var T=y.indexOf(A.radixPoint),R=M;if(M=function(j,k,I,U,B){return B._radixDance&&B.numericInput&&k!==B.negationSymbol.back&&j<=I&&(I>0||k==B.radixPoint)&&(U.validPositions[j-1]===void 0||U.validPositions[j-1].input!==B.negationSymbol.back)&&(j-=1),j}(M,x,T,E,A),x==="-"||x===A.negationSymbol.front){if(A.allowMinus!==!0)return!1;var F=!1,z=b("+",E),D=b("-",E);return z!==-1&&(F=[z],D!==-1&&F.push(D)),F!==!1?{remove:F,caret:R-A.negationSymbol.back.length}:{insert:[{pos:m.call(P,"+",E),c:A.negationSymbol.front,fromIsValid:!0},{pos:m.call(P,"-",E),c:A.negationSymbol.back,fromIsValid:void 0}],caret:R+A.negationSymbol.back.length}}if(x===A.groupSeparator)return{caret:R};if(C)return!0;if(T!==-1&&A._radixDance===!0&&S===!1&&x===A.radixPoint&&A.digits!==void 0&&(isNaN(A.digits)||parseInt(A.digits)>0)&&T!==M){var O=m.call(P,A.radixPoint,E);return E.validPositions[O]&&(E.validPositions[O].generatedInput=E.validPositions[O].generated||!1),{caret:A._radixDance&&M===T-1?T+1:T}}if(A.__financeInput===!1){if(S){if(A.digitsOptional)return{rewritePosition:w.end};if(!A.digitsOptional){if(w.begin>T&&w.end<=T)return x===A.radixPoint?{insert:{pos:T+1,c:"0",fromIsValid:!0},rewritePosition:T}:{rewritePosition:T+1};if(w.begin<T)return{rewritePosition:w.begin-1}}}else if(!A.showMaskOnHover&&!A.showMaskOnFocus&&!A.digitsOptional&&A.digits>0&&this.__valueGet.call(this.el)==="")return{rewritePosition:T}}return{rewritePosition:M}},postValidation:function(y,M,x,S,A,E,w){if(S===!1)return S;if(w)return!0;if(A.min!==null||A.max!==null){var C=A.onUnMask(y.slice().reverse().join(""),void 0,p.extend({},A,{unmaskAsNumber:!0}));if(A.min!==null&&C<A.min&&(C.toString().length>A.min.toString().length||C<0))return!1;if(A.max!==null&&C>A.max)return!!A.SetMaxOnOverflow&&{refreshFromBuffer:!0,buffer:v(A.max.toString().replace(".",A.radixPoint).split(""),A.digits,A).reverse()}}return S},onUnMask:function(y,M,x){if(M===""&&x.nullable===!0)return M;var S=y.replace(x.prefix,"");return S=(S=S.replace(x.suffix,"")).replace(new RegExp((0,u.default)(x.groupSeparator),"g"),""),x.placeholder.charAt(0)!==""&&(S=S.replace(new RegExp(x.placeholder.charAt(0),"g"),"0")),x.unmaskAsNumber?(x.radixPoint!==""&&S.indexOf(x.radixPoint)!==-1&&(S=S.replace(u.default.call(this,x.radixPoint),".")),S=(S=S.replace(new RegExp("^"+(0,u.default)(x.negationSymbol.front)),"-")).replace(new RegExp((0,u.default)(x.negationSymbol.back)+"$"),""),Number(S)):S},isComplete:function(y,M){var x=(M.numericInput?y.slice().reverse():y).join("");return x=(x=(x=(x=(x=x.replace(new RegExp("^"+(0,u.default)(M.negationSymbol.front)),"-")).replace(new RegExp((0,u.default)(M.negationSymbol.back)+"$"),"")).replace(M.prefix,"")).replace(M.suffix,"")).replace(new RegExp((0,u.default)(M.groupSeparator)+"([0-9]{3})","g"),"$1"),M.radixPoint===","&&(x=x.replace((0,u.default)(M.radixPoint),".")),isFinite(x)},onBeforeMask:function(y,M){var x;y=(x=y)!==null&&x!==void 0?x:"";var S=M.radixPoint||",";isFinite(M.digits)&&(M.digits=parseInt(M.digits)),typeof y!="number"&&M.inputType!=="number"||S===""||(y=y.toString().replace(".",S));var A=y.charAt(0)==="-"||y.charAt(0)===M.negationSymbol.front,E=y.split(S),w=E[0].replace(/[^\-0-9]/g,""),C=E.length>1?E[1].replace(/[^0-9]/g,""):"",P=E.length>1;y=w+(C!==""?S+C:C);var T=0;if(S!==""&&(T=M.digitsOptional?M.digits<C.length?M.digits:C.length:M.digits,C!==""||!M.digitsOptional)){var R=Math.pow(10,T||1);y=y.replace((0,u.default)(S),"."),isNaN(parseFloat(y))||(y=(M.roundingFN(parseFloat(y)*R)/R).toFixed(T)),y=y.toString().replace(".",S)}if(M.digits===0&&y.indexOf(S)!==-1&&(y=y.substring(0,y.indexOf(S))),M.min!==null||M.max!==null){var F=y.toString().replace(S,".");M.min!==null&&F<M.min?y=M.min.toString().replace(".",S):M.max!==null&&F>M.max&&(y=M.max.toString().replace(".",S))}return A&&y.charAt(0)!=="-"&&(y="-"+y),v(y.toString().split(""),T,M,P).join("")},onBeforeWrite:function(y,M,x,S){function A(D,O){if(S.__financeInput!==!1||O){var j=D.indexOf(S.radixPoint);j!==-1&&D.splice(j,1)}if(S.groupSeparator!=="")for(;(j=D.indexOf(S.groupSeparator))!==-1;)D.splice(j,1);return D}var E,w;if(S.stripLeadingZeroes&&(w=function(D,O){var j=new RegExp("(^"+(O.negationSymbol.front!==""?(0,u.default)(O.negationSymbol.front)+"?":"")+(0,u.default)(O.prefix)+")(.*)("+(0,u.default)(O.suffix)+(O.negationSymbol.back!=""?(0,u.default)(O.negationSymbol.back)+"?":"")+"$)").exec(D.slice().reverse().join("")),k=j?j[2]:"",I=!1;return k&&(k=k.split(O.radixPoint.charAt(0))[0],I=new RegExp("^[0"+O.groupSeparator+"]*").exec(k)),!(!I||!(I[0].length>1||I[0].length>0&&I[0].length<k.length))&&I}(M,S)))for(var C=M.join("").lastIndexOf(w[0].split("").reverse().join(""))-(w[0]==w.input?0:1),P=w[0]==w.input?1:0,T=w[0].length-P;T>0;T--)this.maskset.validPositions.splice(C+T,1),delete M[C+T];if(y)switch(y.type){case"blur":case"checkval":if(S.min!==null){var R=S.onUnMask(M.slice().reverse().join(""),void 0,p.extend({},S,{unmaskAsNumber:!0}));if(S.min!==null&&R<S.min)return{refreshFromBuffer:!0,buffer:v(S.min.toString().replace(".",S.radixPoint).split(""),S.digits,S).reverse()}}if(M[M.length-1]===S.negationSymbol.front){var F=new RegExp("(^"+(S.negationSymbol.front!=""?(0,u.default)(S.negationSymbol.front)+"?":"")+(0,u.default)(S.prefix)+")(.*)("+(0,u.default)(S.suffix)+(S.negationSymbol.back!=""?(0,u.default)(S.negationSymbol.back)+"?":"")+"$)").exec(A(M.slice(),!0).reverse().join(""));(F?F[2]:"")==0&&(E={refreshFromBuffer:!0,buffer:[0]})}else S.radixPoint!==""&&M.indexOf(S.radixPoint)===S.suffix.length&&(E&&E.buffer?E.buffer.splice(0,1+S.suffix.length):(M.splice(0,1+S.suffix.length),E={refreshFromBuffer:!0,buffer:A(M)}));if(S.enforceDigitsOnBlur){var z=(E=E||{})&&E.buffer||M.slice().reverse();E.refreshFromBuffer=!0,E.buffer=v(z,S.digits,S,!0).reverse()}}return E},onKeyDown:function(y,M,x,S){var A,E=p(this);if(y.location!=3){var w,C=y.key;if((w=S.shortcuts&&S.shortcuts[C])&&w.length>1)return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())*parseInt(w)),E.trigger("setvalue"),!1}if(y.ctrlKey)switch(y.key){case d.keys.ArrowUp:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(S.step)),E.trigger("setvalue"),!1;case d.keys.ArrowDown:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(S.step)),E.trigger("setvalue"),!1}if(!y.shiftKey&&(y.key===d.keys.Delete||y.key===d.keys.Backspace||y.key===d.keys.BACKSPACE_SAFARI)&&x.begin!==M.length){if(M[y.key===d.keys.Delete?x.begin-1:x.end]===S.negationSymbol.front)return A=M.slice().reverse(),S.negationSymbol.front!==""&&A.shift(),S.negationSymbol.back!==""&&A.pop(),E.trigger("setvalue",[A.join(""),x.begin]),!1;if(S._radixDance===!0){var P,T=M.indexOf(S.radixPoint);if(S.digitsOptional){if(T===0)return(A=M.slice().reverse()).pop(),E.trigger("setvalue",[A.join(""),x.begin>=A.length?A.length:x.begin]),!1}else if(T!==-1&&(x.begin<T||x.end<T||y.key===d.keys.Delete&&(x.begin===T||x.begin-1===T)))return x.begin===x.end&&(y.key===d.keys.Backspace||y.key===d.keys.BACKSPACE_SAFARI?x.begin++:y.key===d.keys.Delete&&x.begin-1===T&&(P=p.extend({},x),x.begin--,x.end--)),(A=M.slice().reverse()).splice(A.length-x.begin,x.begin-x.end+1),A=v(A,S.digits,S).join(""),P&&(x=P),E.trigger("setvalue",[A,x.begin>=A.length?T+1:x.begin]),!1}}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",inputmode:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function(y){return"("+y.groupSeparator+"99){*|1}("+y.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}})},9380:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=!(typeof window>"u"||!window.document||!window.document.createElement);o.default=l?window:{}},7760:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.HandleNativePlaceholder=function(_,y){var M=_?_.inputmask:this;if(u.ie){if(_.inputmask._valueGet()!==y&&(_.placeholder!==y||_.placeholder==="")){var x=h.getBuffer.call(M).slice(),S=_.inputmask._valueGet();if(S!==y){var A=h.getLastValidPosition.call(M);A===-1&&S===h.getBufferTemplate.call(M).join("")?x=[]:A!==-1&&v.call(M,x),b(_,x)}}}else _.placeholder!==y&&(_.placeholder=y,_.placeholder===""&&_.removeAttribute("placeholder"))},o.applyInputValue=g,o.checkVal=m,o.clearOptionalTail=v,o.unmaskedvalue=function(_){var y=_?_.inputmask:this,M=y.opts,x=y.maskset;if(_){if(_.inputmask===void 0)return _.value;_.inputmask&&_.inputmask.refreshValue&&g(_,_.inputmask._valueGet(!0))}for(var S=[],A=x.validPositions,E=0,w=A.length;E<w;E++)A[E]&&A[E].match&&(A[E].match.static!=1||Array.isArray(x.metadata)&&A[E].generatedInput!==!0)&&S.push(A[E].input);var C=S.length===0?"":(y.isRTL?S.reverse():S).join("");if(typeof M.onUnMask=="function"){var P=(y.isRTL?h.getBuffer.call(y).slice().reverse():h.getBuffer.call(y)).join("");C=M.onUnMask.call(y,P,C,M)}return C},o.writeBuffer=b;var u=l(9845),c=l(6030),d=l(2839),h=l(8711),f=l(7215),p=l(4713);function g(_,y,M){var x=_?_.inputmask:this,S=x.opts;_.inputmask.refreshValue=!1,typeof S.onBeforeMask=="function"&&(y=S.onBeforeMask.call(x,y,S)||y),m(_,!0,!1,y=(y||"").toString().split(""),M),x.undoValue=x._valueGet(!0),(S.clearMaskOnLostFocus||S.clearIncomplete)&&_.inputmask._valueGet()===h.getBufferTemplate.call(x).join("")&&h.getLastValidPosition.call(x)===-1&&_.inputmask._valueSet("")}function v(_){_.length=0;for(var y,M=p.getMaskTemplate.call(this,!0,0,!0,void 0,!0);(y=M.shift())!==void 0;)_.push(y);return _}function m(_,y,M,x,S){var A,E=_?_.inputmask:this,w=E.maskset,C=E.opts,P=E.dependencyLib,T=x.slice(),R="",F=-1,z=C.skipOptionalPartCharacter;C.skipOptionalPartCharacter="",h.resetMaskSet.call(E,!1),E.clicked=0,F=C.radixPoint?h.determineNewCaretPosition.call(E,{begin:0,end:0},!1,C.__financeInput===!1?"radixFocus":void 0).begin:0,w.p=F,E.caretPos={begin:F};var D=[],O=E.caretPos;if(T.forEach(function(V,H){if(V!==void 0){var Y=new P.Event("_checkval");Y.key=V,R+=V;var J=h.getLastValidPosition.call(E,void 0,!0);(function(ee,se){for(var ye=p.getMaskTemplate.call(E,!0,0).slice(ee,h.seekNext.call(E,ee,!1,!1)).join("").replace(/'/g,""),de=ye.indexOf(se);de>0&&ye[de-1]===" ";)de--;var W=de===0&&!h.isMask.call(E,ee)&&(p.getTest.call(E,ee).match.nativeDef===se.charAt(0)||p.getTest.call(E,ee).match.static===!0&&p.getTest.call(E,ee).match.nativeDef==="'"+se.charAt(0)||p.getTest.call(E,ee).match.nativeDef===" "&&(p.getTest.call(E,ee+1).match.nativeDef===se.charAt(0)||p.getTest.call(E,ee+1).match.static===!0&&p.getTest.call(E,ee+1).match.nativeDef==="'"+se.charAt(0)));if(!W&&de>0&&!h.isMask.call(E,ee,!1,!0)){var Te=h.seekNext.call(E,ee);E.caretPos.begin<Te&&(E.caretPos={begin:Te})}return W})(F,R)?A=c.EventHandlers.keypressEvent.call(E,Y,!0,!1,M,J+1):(A=c.EventHandlers.keypressEvent.call(E,Y,!0,!1,M,E.caretPos.begin))&&(F=E.caretPos.begin+1,R=""),A?(A.pos!==void 0&&w.validPositions[A.pos]&&w.validPositions[A.pos].match.static===!0&&w.validPositions[A.pos].alternation===void 0&&(D.push(A.pos),E.isRTL||(A.forwardPosition=A.pos+1)),b.call(E,void 0,h.getBuffer.call(E),A.forwardPosition,Y,!1),E.caretPos={begin:A.forwardPosition,end:A.forwardPosition},O=E.caretPos):w.validPositions[H]===void 0&&T[H]===p.getPlaceholder.call(E,H)&&h.isMask.call(E,H,!0)?E.caretPos.begin++:E.caretPos=O}}),D.length>0){var j,k,I=h.seekNext.call(E,-1,void 0,!1);if(!f.isComplete.call(E,h.getBuffer.call(E))&&D.length<=I||f.isComplete.call(E,h.getBuffer.call(E))&&D.length>0&&D.length!==I&&D[0]===0){for(var U=I;(j=D.shift())!==void 0;)if(j<U){var B=new P.Event("_checkval");if((k=w.validPositions[j]).generatedInput=!0,B.key=k.input,(A=c.EventHandlers.keypressEvent.call(E,B,!0,!1,M,U))&&A.pos!==void 0&&A.pos!==j&&w.validPositions[A.pos]&&w.validPositions[A.pos].match.static===!0)D.push(A.pos);else if(!A)break;U++}}}y&&b.call(E,_,h.getBuffer.call(E),A?A.forwardPosition:E.caretPos.begin,S||new P.Event("checkval"),S&&(S.type==="input"&&E.undoValue!==h.getBuffer.call(E).join("")||S.type==="paste")),C.skipOptionalPartCharacter=z}function b(_,y,M,x,S){var A=_?_.inputmask:this,E=A.opts,w=A.dependencyLib;if(x&&typeof E.onBeforeWrite=="function"){var C=E.onBeforeWrite.call(A,x,y,M,E);if(C){if(C.refreshFromBuffer){var P=C.refreshFromBuffer;f.refreshFromBuffer.call(A,P===!0?P:P.start,P.end,C.buffer||y),y=h.getBuffer.call(A,!0)}M!==void 0&&(M=C.caret!==void 0?C.caret:M)}}if(_!==void 0&&(_.inputmask._valueSet(y.join("")),M===void 0||x!==void 0&&x.type==="blur"||h.caret.call(A,_,M,void 0,void 0,x!==void 0&&x.type==="keydown"&&(x.key===d.keys.Delete||x.key===d.keys.Backspace)),_.inputmask.writeBufferHook===void 0||_.inputmask.writeBufferHook(M),S===!0)){var T=w(_),R=_.inputmask._valueGet();_.inputmask.skipInputEvent=!0,T.trigger("input"),setTimeout(function(){R===h.getBufferTemplate.call(A).join("")?T.trigger("cleared"):f.isComplete.call(A,y)===!0&&T.trigger("complete")},0)}}},2394:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=M(l(3976)),c=M(l(7392)),d=M(l(4963)),h=l(9716),f=M(l(9380)),p=l(7760),g=l(157),v=l(2391),m=l(8711),b=l(7215),_=l(4713);function y(w){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},y(w)}function M(w){return w&&w.__esModule?w:{default:w}}var x=f.default.document,S="_inputmask_opts";function A(w,C,P){if(!(this instanceof A))return new A(w,C,P);this.dependencyLib=d.default,this.el=void 0,this.events={},this.maskset=void 0,P!==!0&&(Object.prototype.toString.call(w)==="[object Object]"?C=w:(C=C||{},w&&(C.alias=w)),this.opts=d.default.extend(!0,{},this.defaults,C),this.noMasksCache=C&&C.definitions!==void 0,this.userOptions=C||{},E(this.opts.alias,C,this.opts)),this.refreshValue=!1,this.undoValue=void 0,this.$el=void 0,this.skipInputEvent=!1,this.validationEvent=!1,this.ignorable=!1,this.maxLength,this.mouseEnter=!1,this.clicked=0,this.originalPlaceholder=void 0,this.isComposing=!1,this.hasAlternator=!1}function E(w,C,P){var T=A.prototype.aliases[w];return T?(T.alias&&E(T.alias,void 0,P),d.default.extend(!0,P,T),d.default.extend(!0,P,C),!0):(P.mask===null&&(P.mask=w),!1)}A.prototype={dataAttribute:"data-inputmask",defaults:u.default,definitions:c.default,aliases:{},masksCache:{},i18n:{},get isRTL(){return this.opts.isRTL||this.opts.numericInput},mask:function(w){var C=this;return typeof w=="string"&&(w=x.getElementById(w)||x.querySelectorAll(w)),(w=w.nodeName?[w]:Array.isArray(w)?w:[].slice.call(w)).forEach(function(P,T){var R=d.default.extend(!0,{},C.opts);if(function(z,D,O,j){function k(Y,J){var ee=j===""?Y:j+"-"+Y;(J=J!==void 0?J:z.getAttribute(ee))!==null&&(typeof J=="string"&&(Y.indexOf("on")===0?J=f.default[J]:J==="false"?J=!1:J==="true"&&(J=!0)),O[Y]=J)}if(D.importDataAttributes===!0){var I,U,B,V,H=z.getAttribute(j);if(H&&H!==""&&(H=H.replace(/'/g,'"'),U=JSON.parse("{"+H+"}")),U){for(V in B=void 0,U)if(V.toLowerCase()==="alias"){B=U[V];break}}for(I in k("alias",B),O.alias&&E(O.alias,O,D),D){if(U){for(V in B=void 0,U)if(V.toLowerCase()===I.toLowerCase()){B=U[V];break}}k(I,B)}}return d.default.extend(!0,D,O),(z.dir==="rtl"||D.rightAlign)&&(z.style.textAlign="right"),(z.dir==="rtl"||D.numericInput)&&(z.dir="ltr",z.removeAttribute("dir"),D.isRTL=!0),Object.keys(O).length}(P,R,d.default.extend(!0,{},C.userOptions),C.dataAttribute)){var F=(0,v.generateMaskSet)(R,C.noMasksCache);F!==void 0&&(P.inputmask!==void 0&&(P.inputmask.opts.autoUnmask=!0,P.inputmask.remove()),P.inputmask=new A(void 0,void 0,!0),P.inputmask.opts=R,P.inputmask.noMasksCache=C.noMasksCache,P.inputmask.userOptions=d.default.extend(!0,{},C.userOptions),P.inputmask.el=P,P.inputmask.$el=(0,d.default)(P),P.inputmask.maskset=F,d.default.data(P,S,C.userOptions),g.mask.call(P.inputmask))}}),w&&w[0]&&w[0].inputmask||this},option:function(w,C){return typeof w=="string"?this.opts[w]:y(w)==="object"?(d.default.extend(this.userOptions,w),this.el&&C!==!0&&this.mask(this.el),this):void 0},unmaskedvalue:function(w){if(this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),this.el===void 0||w!==void 0){var C=(typeof this.opts.onBeforeMask=="function"&&this.opts.onBeforeMask.call(this,w,this.opts)||w).split("");p.checkVal.call(this,void 0,!1,!1,C),typeof this.opts.onBeforeWrite=="function"&&this.opts.onBeforeWrite.call(this,void 0,m.getBuffer.call(this),0,this.opts)}return p.unmaskedvalue.call(this,this.el)},remove:function(){if(this.el){d.default.data(this.el,S,null);var w=this.opts.autoUnmask?(0,p.unmaskedvalue)(this.el):this._valueGet(this.opts.autoUnmask);w!==m.getBufferTemplate.call(this).join("")?this._valueSet(w,this.opts.autoUnmask):this._valueSet(""),h.EventRuler.off(this.el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el),"value")&&this.__valueGet&&Object.defineProperty(this.el,"value",{get:this.__valueGet,set:this.__valueSet,configurable:!0}):x.__lookupGetter__&&this.el.__lookupGetter__("value")&&this.__valueGet&&(this.el.__defineGetter__("value",this.__valueGet),this.el.__defineSetter__("value",this.__valueSet)),this.el.inputmask=void 0}return this.el},getemptymask:function(){return this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),(this.isRTL?m.getBufferTemplate.call(this).reverse():m.getBufferTemplate.call(this)).join("")},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),b.isComplete.call(this,m.getBuffer.call(this))},getmetadata:function(){if(this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),Array.isArray(this.maskset.metadata)){var w=_.getMaskTemplate.call(this,!0,0,!1).join("");return this.maskset.metadata.forEach(function(C){return C.mask!==w||(w=C,!1)}),w}return this.maskset.metadata},isValid:function(w){if(this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),w){var C=(typeof this.opts.onBeforeMask=="function"&&this.opts.onBeforeMask.call(this,w,this.opts)||w).split("");p.checkVal.call(this,void 0,!0,!1,C)}else w=this.isRTL?m.getBuffer.call(this).slice().reverse().join(""):m.getBuffer.call(this).join("");for(var P=m.getBuffer.call(this),T=m.determineLastRequiredPosition.call(this),R=P.length-1;R>T&&!m.isMask.call(this,R);R--);return P.splice(T,R+1-T),b.isComplete.call(this,P)&&w===(this.isRTL?m.getBuffer.call(this).slice().reverse().join(""):m.getBuffer.call(this).join(""))},format:function(w,C){this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache);var P=(typeof this.opts.onBeforeMask=="function"&&this.opts.onBeforeMask.call(this,w,this.opts)||w).split("");p.checkVal.call(this,void 0,!0,!1,P);var T=this.isRTL?m.getBuffer.call(this).slice().reverse().join(""):m.getBuffer.call(this).join("");return C?{value:T,metadata:this.getmetadata()}:T},setValue:function(w){this.el&&(0,d.default)(this.el).trigger("setvalue",[w])},analyseMask:v.analyseMask},A.extendDefaults=function(w){d.default.extend(!0,A.prototype.defaults,w)},A.extendDefinitions=function(w){d.default.extend(!0,A.prototype.definitions,w)},A.extendAliases=function(w){d.default.extend(!0,A.prototype.aliases,w)},A.format=function(w,C,P){return A(C).format(w,P)},A.unmask=function(w,C){return A(C).unmaskedvalue(w)},A.isValid=function(w,C){return A(C).isValid(w)},A.remove=function(w){typeof w=="string"&&(w=x.getElementById(w)||x.querySelectorAll(w)),(w=w.nodeName?[w]:w).forEach(function(C){C.inputmask&&C.inputmask.remove()})},A.setValue=function(w,C){typeof w=="string"&&(w=x.getElementById(w)||x.querySelectorAll(w)),(w=w.nodeName?[w]:w).forEach(function(P){P.inputmask?P.inputmask.setValue(C):(0,d.default)(P).trigger("setvalue",[C])})},A.dependencyLib=d.default,f.default.Inputmask=A,o.default=A},5296:function(a,o,l){function u(x){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u(x)}var c=_(l(9380)),d=_(l(2394));function h(x,S){for(var A=0;A<S.length;A++){var E=S[A];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(x,(w=E.key,C=void 0,C=function(P,T){if(u(P)!=="object"||P===null)return P;var R=P[Symbol.toPrimitive];if(R!==void 0){var F=R.call(P,T||"default");if(u(F)!=="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(P)}(w,"string"),u(C)==="symbol"?C:String(C)),E)}var w,C}function f(x){var S=v();return function(){var A,E=b(x);if(S){var w=b(this).constructor;A=Reflect.construct(E,arguments,w)}else A=E.apply(this,arguments);return function(C,P){if(P&&(u(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(C)}(this,A)}}function p(x){var S=typeof Map=="function"?new Map:void 0;return p=function(A){if(A===null||!function(w){try{return Function.toString.call(w).indexOf("[native code]")!==-1}catch{return typeof w=="function"}}(A))return A;if(typeof A!="function")throw new TypeError("Super expression must either be null or a function");if(S!==void 0){if(S.has(A))return S.get(A);S.set(A,E)}function E(){return g(A,arguments,b(this).constructor)}return E.prototype=Object.create(A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m(E,A)},p(x)}function g(x,S,A){return g=v()?Reflect.construct.bind():function(E,w,C){var P=[null];P.push.apply(P,w);var T=new(Function.bind.apply(E,P));return C&&m(T,C.prototype),T},g.apply(null,arguments)}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(x,S){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,E){return A.__proto__=E,A},m(x,S)}function b(x){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},b(x)}function _(x){return x&&x.__esModule?x:{default:x}}var y=c.default.document;if(y&&y.head&&y.head.attachShadow&&c.default.customElements&&c.default.customElements.get("input-mask")===void 0){var M=function(x){(function(C,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(P&&P.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),P&&m(C,P)})(w,x);var S,A,E=f(w);function w(){var C;(function(z,D){if(!(z instanceof D))throw new TypeError("Cannot call a class as a function")})(this,w);var P=(C=E.call(this)).getAttributeNames(),T=C.attachShadow({mode:"closed"});for(var R in C.input=y.createElement("input"),C.input.type="text",T.appendChild(C.input),P)Object.prototype.hasOwnProperty.call(P,R)&&C.input.setAttribute(P[R],C.getAttribute(P[R]));var F=new d.default;return F.dataAttribute="",F.mask(C.input),C.input.inputmask.shadowRoot=T,C}return S=w,(A=[{key:"attributeChangedCallback",value:function(C,P,T){this.input.setAttribute(C,T)}},{key:"value",get:function(){return this.input.value},set:function(C){this.input.value=C}}])&&h(S.prototype,A),Object.defineProperty(S,"prototype",{writable:!1}),w}(p(HTMLElement));c.default.customElements.define("input-mask",M)}},2839:function(a,o){function l(g){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l(g)}function u(g,v){return function(m){if(Array.isArray(m))return m}(g)||function(m,b){var _=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(_!=null){var y,M,x,S,A=[],E=!0,w=!1;try{if(x=(_=_.call(m)).next,b!==0)for(;!(E=(y=x.call(_)).done)&&(A.push(y.value),A.length!==b);E=!0);}catch(C){w=!0,M=C}finally{try{if(!E&&_.return!=null&&(S=_.return(),Object(S)!==S))return}finally{if(w)throw M}}return A}}(g,v)||function(m,b){if(m){if(typeof m=="string")return c(m,b);var _=Object.prototype.toString.call(m).slice(8,-1);if(_==="Object"&&m.constructor&&(_=m.constructor.name),_==="Map"||_==="Set")return Array.from(m);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return c(m,b)}}(g,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c(g,v){(v==null||v>g.length)&&(v=g.length);for(var m=0,b=new Array(v);m<v;m++)b[m]=g[m];return b}function d(g,v){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(g);v&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable})),m.push.apply(m,b)}return m}function h(g,v,m){return(v=function(b){var _=function(y,M){if(l(y)!=="object"||y===null)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var S=x.call(y,M||"default");if(l(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(y)}(b,"string");return l(_)==="symbol"?_:String(_)}(v))in g?Object.defineProperty(g,v,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[v]=m,g}Object.defineProperty(o,"__esModule",{value:!0}),o.keys=o.keyCode=void 0,o.toKey=function(g,v){return p[g]||(v?String.fromCharCode(g):String.fromCharCode(g).toLowerCase())},o.toKeyCode=function(g){return f[g]};var f=o.keyCode=function(g){for(var v=1;v<arguments.length;v++){var m=arguments[v]!=null?arguments[v]:{};v%2?d(Object(m),!0).forEach(function(b){h(g,b,m[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(m)):d(Object(m)).forEach(function(b){Object.defineProperty(g,b,Object.getOwnPropertyDescriptor(m,b))})}return g}({c:67,x:88,z:90,BACKSPACE_SAFARI:127,Enter:13,Meta_LEFT:91,Meta_RIGHT:92,Space:32},{Alt:18,AltGraph:18,ArrowDown:40,ArrowLeft:37,ArrowRight:39,ArrowUp:38,Backspace:8,CapsLock:20,Control:17,ContextMenu:93,Dead:221,Delete:46,End:35,Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Home:36,Insert:45,NumLock:144,PageDown:34,PageUp:33,Pause:19,PrintScreen:44,Process:229,Shift:16,ScrollLock:145,Tab:9,Unidentified:229}),p=Object.entries(f).reduce(function(g,v){var m=u(v,2),b=m[0],_=m[1];return g[_]=g[_]===void 0?b:g[_],g},{});o.keys=Object.entries(f).reduce(function(g,v){var m=u(v,2),b=m[0];return m[1],g[b]=b==="Space"?" ":b,g},{})},2391:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.analyseMask=function(v,m,b){var _,y,M,x,S,A,E=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,w=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,C=!1,P=new h.default,T=[],R=[],F=!1;function z(de,W,Te){Te=Te!==void 0?Te:de.matches.length;var he=de.matches[Te-1];if(m){if(W.indexOf("[")===0||C&&/\\d|\\s|\\w|\\p/i.test(W)||W==="."){var Ae=b.casing?"i":"";/\\p\{.*}/i.test(W)&&(Ae+="u"),de.matches.splice(Te++,0,{fn:new RegExp(W,Ae),static:!1,optionality:!1,newBlockMarker:he===void 0?"master":he.def!==W,casing:null,def:W,placeholder:f(b.placeholder)==="object"?b.placeholder[P.matches.length]:void 0,nativeDef:W})}else C&&(W=W[W.length-1]),W.split("").forEach(function(Ne,Ie){he=de.matches[Te-1],de.matches.splice(Te++,0,{fn:/[a-z]/i.test(b.staticDefinitionSymbol||Ne)?new RegExp("["+(b.staticDefinitionSymbol||Ne)+"]",b.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:he===void 0?"master":he.def!==Ne&&he.static!==!0,casing:null,def:b.staticDefinitionSymbol||Ne,placeholder:b.staticDefinitionSymbol!==void 0?Ne:f(b.placeholder)==="object"?b.placeholder[P.matches.length]:void 0,nativeDef:(C?"'":"")+Ne})});C=!1}else{var Ee=b.definitions&&b.definitions[W]||b.usePrototypeDefinitions&&d.default.prototype.definitions[W];Ee&&!C?de.matches.splice(Te++,0,{fn:Ee.validator?typeof Ee.validator=="string"?new RegExp(Ee.validator,b.casing?"i":""):new function(){this.test=Ee.validator}:/./,static:Ee.static||!1,optionality:Ee.optional||!1,defOptionality:Ee.optional||!1,newBlockMarker:he===void 0||Ee.optional?"master":he.def!==(Ee.definitionSymbol||W),casing:Ee.casing,def:Ee.definitionSymbol||W,placeholder:Ee.placeholder,nativeDef:W,generated:Ee.generated}):(de.matches.splice(Te++,0,{fn:/[a-z]/i.test(b.staticDefinitionSymbol||W)?new RegExp("["+(b.staticDefinitionSymbol||W)+"]",b.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:he===void 0?"master":he.def!==W&&he.static!==!0,casing:null,def:b.staticDefinitionSymbol||W,placeholder:b.staticDefinitionSymbol!==void 0?W:void 0,nativeDef:(C?"'":"")+W}),C=!1)}}function D(){if(T.length>0){if(z(x=T[T.length-1],y),x.isAlternator){S=T.pop();for(var de=0;de<S.matches.length;de++)S.matches[de].isGroup&&(S.matches[de].isGroup=!1);T.length>0?(x=T[T.length-1]).matches.push(S):P.matches.push(S)}}else z(P,y)}function O(de){var W=new h.default(!0);return W.openGroup=!1,W.matches=de,W}function j(){if((M=T.pop()).openGroup=!1,M!==void 0)if(T.length>0){if((x=T[T.length-1]).matches.push(M),x.isAlternator){S=T.pop();for(var de=0;de<S.matches.length;de++)S.matches[de].isGroup=!1,S.matches[de].alternatorGroup=!1;T.length>0?(x=T[T.length-1]).matches.push(S):P.matches.push(S)}}else P.matches.push(M);else D()}function k(de){var W=de.pop();return W.isQuantifier&&(W=O([de.pop(),W])),W}for(m&&(b.optionalmarker[0]=void 0,b.optionalmarker[1]=void 0);_=m?w.exec(v):E.exec(v);){if(y=_[0],m){switch(y.charAt(0)){case"?":y="{0,1}";break;case"+":case"*":y="{"+y+"}";break;case"|":if(T.length===0){var I=O(P.matches);I.openGroup=!0,T.push(I),P.matches=[],F=!0}}switch(y){case"\\d":y="[0-9]";break;case"\\p":y+=w.exec(v)[0],y+=w.exec(v)[0]}}if(C)D();else switch(y.charAt(0)){case"$":case"^":m||D();break;case b.escapeChar:C=!0,m&&D();break;case b.optionalmarker[1]:case b.groupmarker[1]:j();break;case b.optionalmarker[0]:T.push(new h.default(!1,!0));break;case b.groupmarker[0]:T.push(new h.default(!0));break;case b.quantifiermarker[0]:var U=new h.default(!1,!1,!0),B=(y=y.replace(/[{}?]/g,"")).split("|"),V=B[0].split(","),H=isNaN(V[0])?V[0]:parseInt(V[0]),Y=V.length===1?H:isNaN(V[1])?V[1]:parseInt(V[1]),J=isNaN(B[1])?B[1]:parseInt(B[1]);H!=="*"&&H!=="+"||(H=Y==="*"?0:1),U.quantifier={min:H,max:Y,jit:J};var ee=T.length>0?T[T.length-1].matches:P.matches;(_=ee.pop()).isGroup||(_=O([_])),ee.push(_),ee.push(U);break;case b.alternatormarker:if(T.length>0){var se=(x=T[T.length-1]).matches[x.matches.length-1];A=x.openGroup&&(se.matches===void 0||se.isGroup===!1&&se.isAlternator===!1)?T.pop():k(x.matches)}else A=k(P.matches);if(A.isAlternator)T.push(A);else if(A.alternatorGroup?(S=T.pop(),A.alternatorGroup=!1):S=new h.default(!1,!1,!1,!0),S.matches.push(A),T.push(S),A.openGroup){A.openGroup=!1;var ye=new h.default(!0);ye.alternatorGroup=!0,T.push(ye)}break;default:D()}}for(F&&j();T.length>0;)M=T.pop(),P.matches.push(M);return P.matches.length>0&&(function de(W){W&&W.matches&&W.matches.forEach(function(Te,he){var Ae=W.matches[he+1];(Ae===void 0||Ae.matches===void 0||Ae.isQuantifier===!1)&&Te&&Te.isGroup&&(Te.isGroup=!1,m||(z(Te,b.groupmarker[0],0),Te.openGroup!==!0&&z(Te,b.groupmarker[1]))),de(Te)})}(P),R.push(P)),(b.numericInput||b.isRTL)&&function de(W){for(var Te in W.matches=W.matches.reverse(),W.matches)if(Object.prototype.hasOwnProperty.call(W.matches,Te)){var he=parseInt(Te);if(W.matches[Te].isQuantifier&&W.matches[he+1]&&W.matches[he+1].isGroup){var Ae=W.matches[Te];W.matches.splice(Te,1),W.matches.splice(he+1,0,Ae)}W.matches[Te].matches!==void 0?W.matches[Te]=de(W.matches[Te]):W.matches[Te]=((Ee=W.matches[Te])===b.optionalmarker[0]?Ee=b.optionalmarker[1]:Ee===b.optionalmarker[1]?Ee=b.optionalmarker[0]:Ee===b.groupmarker[0]?Ee=b.groupmarker[1]:Ee===b.groupmarker[1]&&(Ee=b.groupmarker[0]),Ee)}var Ee;return W}(R[0]),R},o.generateMaskSet=function(v,m){var b;function _(x,S){var A=S.repeat,E=S.groupmarker,w=S.quantifiermarker,C=S.keepStatic;if(A>0||A==="*"||A==="+"){var P=A==="*"?0:A==="+"?1:A;if(P!=A)x=E[0]+x+E[1]+w[0]+P+","+A+w[1];else for(var T=x,R=1;R<P;R++)x+=T}if(C===!0){var F=x.match(new RegExp("(.)\\[([^\\]]*)\\]","g"));F&&F.forEach(function(z,D){var O=function(I,U){return function(B){if(Array.isArray(B))return B}(I)||function(B,V){var H=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(H!=null){var Y,J,ee,se,ye=[],de=!0,W=!1;try{if(ee=(H=H.call(B)).next,V!==0)for(;!(de=(Y=ee.call(H)).done)&&(ye.push(Y.value),ye.length!==V);de=!0);}catch(Te){W=!0,J=Te}finally{try{if(!de&&H.return!=null&&(se=H.return(),Object(se)!==se))return}finally{if(W)throw J}}return ye}}(I,U)||function(B,V){if(B){if(typeof B=="string")return p(B,V);var H=Object.prototype.toString.call(B).slice(8,-1);if(H==="Object"&&B.constructor&&(H=B.constructor.name),H==="Map"||H==="Set")return Array.from(B);if(H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return p(B,V)}}(I,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(z.split("["),2),j=O[0],k=O[1];k=k.replace("]",""),x=x.replace(new RegExp("".concat((0,c.default)(j),"\\[").concat((0,c.default)(k),"\\]")),j.charAt(0)===k.charAt(0)?"(".concat(j,"|").concat(j).concat(k,")"):"".concat(j,"[").concat(k,"]"))})}return x}function y(x,S,A){var E,w,C=!1;return x!==null&&x!==""||((C=A.regex!==null)?x=(x=A.regex).replace(/^(\^)(.*)(\$)$/,"$2"):(C=!0,x=".*")),x.length===1&&A.greedy===!1&&A.repeat!==0&&(A.placeholder=""),x=_(x,A),w=C?"regex_"+A.regex:A.numericInput?x.split("").reverse().join(""):x,A.keepStatic!==null&&(w="ks_"+A.keepStatic+w),f(A.placeholder)==="object"&&(w="ph_"+JSON.stringify(A.placeholder)+w),d.default.prototype.masksCache[w]===void 0||m===!0?(E={mask:x,maskToken:d.default.prototype.analyseMask(x,C,A),validPositions:[],_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:S,maskLength:void 0,jitOffset:{}},m!==!0&&(d.default.prototype.masksCache[w]=E,E=u.default.extend(!0,{},d.default.prototype.masksCache[w]))):E=u.default.extend(!0,{},d.default.prototype.masksCache[w]),E}if(typeof v.mask=="function"&&(v.mask=v.mask(v)),Array.isArray(v.mask)){if(v.mask.length>1){v.keepStatic===null&&(v.keepStatic=!0);var M=v.groupmarker[0];return(v.isRTL?v.mask.reverse():v.mask).forEach(function(x){M.length>1&&(M+=v.alternatormarker),x.mask!==void 0&&typeof x.mask!="function"?M+=x.mask:M+=x}),y(M+=v.groupmarker[1],v.mask,v)}v.mask=v.mask.pop()}return b=v.mask&&v.mask.mask!==void 0&&typeof v.mask.mask!="function"?y(v.mask.mask,v.mask,v):y(v.mask,v.mask,v),v.keepStatic===null&&(v.keepStatic=!1),b};var u=g(l(4963)),c=g(l(7184)),d=g(l(2394)),h=g(l(9695));function f(v){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},f(v)}function p(v,m){(m==null||m>v.length)&&(m=v.length);for(var b=0,_=new Array(m);b<m;b++)_[b]=v[b];return _}function g(v){return v&&v.__esModule?v:{default:v}}},157:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.mask=function(){var g=this,v=this.opts,m=this.el,b=this.dependencyLib;d.EventRuler.off(m);var _=function(x,S){var A=x.getAttribute("type"),E=x.tagName.toLowerCase()==="input"&&S.supportsInputType.includes(A)||x.isContentEditable||x.tagName.toLowerCase()==="textarea";if(!E)if(x.tagName.toLowerCase()==="input"){var w=document.createElement("input");w.setAttribute("type",A),E=w.type==="text",w=null}else E="partial";return E!==!1?function(C){var P,T;function R(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():f.getLastValidPosition.call(g)!==-1||S.nullable!==!0?(this.inputmask.shadowRoot||this.ownerDocument).activeElement===this&&S.clearMaskOnLostFocus?(g.isRTL?h.clearOptionalTail.call(g,f.getBuffer.call(g).slice()).reverse():h.clearOptionalTail.call(g,f.getBuffer.call(g).slice())).join(""):P.call(this):"":P.call(this)}function F(D){T.call(this,D),this.inputmask&&(0,h.applyInputValue)(this,D)}if(!C.inputmask.__valueGet){if(S.noValuePatching!==!0){if(Object.getOwnPropertyDescriptor){var z=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(C),"value"):void 0;z&&z.get&&z.set?(P=z.get,T=z.set,Object.defineProperty(C,"value",{get:R,set:F,configurable:!0})):C.tagName.toLowerCase()!=="input"&&(P=function(){return this.textContent},T=function(D){this.textContent=D},Object.defineProperty(C,"value",{get:R,set:F,configurable:!0}))}else document.__lookupGetter__&&C.__lookupGetter__("value")&&(P=C.__lookupGetter__("value"),T=C.__lookupSetter__("value"),C.__defineGetter__("value",R),C.__defineSetter__("value",F));C.inputmask.__valueGet=P,C.inputmask.__valueSet=T}C.inputmask._valueGet=function(D){return g.isRTL&&D!==!0?P.call(this.el).split("").reverse().join(""):P.call(this.el)},C.inputmask._valueSet=function(D,O){T.call(this.el,D==null?"":O!==!0&&g.isRTL?D.split("").reverse().join(""):D)},P===void 0&&(P=function(){return this.value},T=function(D){this.value=D},function(D){if(b.valHooks&&(b.valHooks[D]===void 0||b.valHooks[D].inputmaskpatch!==!0)){var O=b.valHooks[D]&&b.valHooks[D].get?b.valHooks[D].get:function(k){return k.value},j=b.valHooks[D]&&b.valHooks[D].set?b.valHooks[D].set:function(k,I){return k.value=I,k};b.valHooks[D]={get:function(k){if(k.inputmask){if(k.inputmask.opts.autoUnmask)return k.inputmask.unmaskedvalue();var I=O(k);return f.getLastValidPosition.call(g,void 0,void 0,k.inputmask.maskset.validPositions)!==-1||S.nullable!==!0?I:""}return O(k)},set:function(k,I){var U=j(k,I);return k.inputmask&&(0,h.applyInputValue)(k,I),U},inputmaskpatch:!0}}}(C.type),function(D){d.EventRuler.on(D,"mouseenter",function(){var O=this,j=O.inputmask._valueGet(!0);j!=(O.inputmask.isRTL?f.getBuffer.call(O.inputmask).slice().reverse():f.getBuffer.call(O.inputmask)).join("")&&(0,h.applyInputValue)(O,j)})}(C))}}(x):x.inputmask=void 0,E}(m,v);if(_!==!1){g.originalPlaceholder=m.placeholder,g.maxLength=m!==void 0?m.maxLength:void 0,g.maxLength===-1&&(g.maxLength=void 0),"inputMode"in m&&m.getAttribute("inputmode")===null&&(m.inputMode=v.inputmode,m.setAttribute("inputmode",v.inputmode)),_===!0&&(v.showMaskOnFocus=v.showMaskOnFocus&&["cc-number","cc-exp"].indexOf(m.autocomplete)===-1,u.iphone&&(v.insertModeVisual=!1,m.setAttribute("autocorrect","off")),d.EventRuler.on(m,"submit",c.EventHandlers.submitEvent),d.EventRuler.on(m,"reset",c.EventHandlers.resetEvent),d.EventRuler.on(m,"blur",c.EventHandlers.blurEvent),d.EventRuler.on(m,"focus",c.EventHandlers.focusEvent),d.EventRuler.on(m,"invalid",c.EventHandlers.invalidEvent),d.EventRuler.on(m,"click",c.EventHandlers.clickEvent),d.EventRuler.on(m,"mouseleave",c.EventHandlers.mouseleaveEvent),d.EventRuler.on(m,"mouseenter",c.EventHandlers.mouseenterEvent),d.EventRuler.on(m,"paste",c.EventHandlers.pasteEvent),d.EventRuler.on(m,"cut",c.EventHandlers.cutEvent),d.EventRuler.on(m,"complete",v.oncomplete),d.EventRuler.on(m,"incomplete",v.onincomplete),d.EventRuler.on(m,"cleared",v.oncleared),v.inputEventOnly!==!0&&d.EventRuler.on(m,"keydown",c.EventHandlers.keyEvent),(u.mobile||v.inputEventOnly)&&m.removeAttribute("maxLength"),d.EventRuler.on(m,"input",c.EventHandlers.inputFallBackEvent)),d.EventRuler.on(m,"setvalue",c.EventHandlers.setValueEvent),g.applyMaskHook===void 0||g.applyMaskHook(),f.getBufferTemplate.call(g).join(""),g.undoValue=g._valueGet(!0);var y=(m.inputmask.shadowRoot||m.ownerDocument).activeElement;if(m.inputmask._valueGet(!0)!==""||v.clearMaskOnLostFocus===!1||y===m){(0,h.applyInputValue)(m,m.inputmask._valueGet(!0),v);var M=f.getBuffer.call(g).slice();p.isComplete.call(g,M)===!1&&v.clearIncomplete&&f.resetMaskSet.call(g,!1),v.clearMaskOnLostFocus&&y!==m&&(f.getLastValidPosition.call(g)===-1?M=[]:h.clearOptionalTail.call(g,M)),(v.clearMaskOnLostFocus===!1||v.showMaskOnFocus&&y===m||m.inputmask._valueGet(!0)!=="")&&(0,h.writeBuffer)(m,M),y===m&&f.caret.call(g,m,f.seekNext.call(g,f.getLastValidPosition.call(g)))}}};var u=l(9845),c=l(6030),d=l(9716),h=l(7760),f=l(8711),p=l(7215)},9695:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(l,u,c,d){this.matches=[],this.openGroup=l||!1,this.alternatorGroup=!1,this.isGroup=l||!1,this.isOptional=u||!1,this.isQuantifier=c||!1,this.isAlternator=d||!1,this.quantifier={min:1,max:1}}},3194:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,o){if(this==null)throw new TypeError('"this" is null or not defined');var l=Object(this),u=l.length>>>0;if(u===0)return!1;for(var c=0|o,d=Math.max(c>=0?c:u-Math.abs(c),0);d<u;){if(l[d]===a)return!0;d++}return!1}})},9302:function(){var a=Function.bind.call(Function.call,Array.prototype.reduce),o=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),l=Function.bind.call(Function.call,Array.prototype.concat),u=Object.keys;Object.entries||(Object.entries=function(c){return a(u(c),function(d,h){return l(d,typeof h=="string"&&o(c,h)?[[h,c[h]]]:[])},[])})},7149:function(){function a(o){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},a(o)}typeof Object.getPrototypeOf!="function"&&(Object.getPrototypeOf=a("test".__proto__)==="object"?function(o){return o.__proto__}:function(o){return o.constructor.prototype})},4013:function(){String.prototype.includes||(String.prototype.includes=function(a,o){return typeof o!="number"&&(o=0),!(o+a.length>this.length)&&this.indexOf(a,o)!==-1})},8711:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.caret=function(b,_,y,M,x){var S,A=this,E=this.opts;if(_===void 0)return"selectionStart"in b&&"selectionEnd"in b?(_=b.selectionStart,y=b.selectionEnd):c.default.getSelection?(S=c.default.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==b&&S.commonAncestorContainer!==b||(_=S.startOffset,y=S.endOffset):document.selection&&document.selection.createRange&&(y=(_=0-(S=document.selection.createRange()).duplicate().moveStart("character",-b.inputmask._valueGet().length))+S.text.length),{begin:M?_:m.call(A,_),end:M?y:m.call(A,y)};if(Array.isArray(_)&&(y=A.isRTL?_[0]:_[1],_=A.isRTL?_[1]:_[0]),_.begin!==void 0&&(y=A.isRTL?_.begin:_.end,_=A.isRTL?_.end:_.begin),typeof _=="number"){_=M?_:m.call(A,_),y=typeof(y=M?y:m.call(A,y))=="number"?y:_;var w=parseInt(((b.ownerDocument.defaultView||c.default).getComputedStyle?(b.ownerDocument.defaultView||c.default).getComputedStyle(b,null):b.currentStyle).fontSize)*y;if(b.scrollLeft=w>b.scrollWidth?w:0,b.inputmask.caretPos={begin:_,end:y},E.insertModeVisual&&E.insertMode===!1&&_===y&&(x||y++),b===(b.inputmask.shadowRoot||b.ownerDocument).activeElement){if("setSelectionRange"in b)b.setSelectionRange(_,y);else if(c.default.getSelection){if(S=document.createRange(),b.firstChild===void 0||b.firstChild===null){var C=document.createTextNode("");b.appendChild(C)}S.setStart(b.firstChild,_<b.inputmask._valueGet().length?_:b.inputmask._valueGet().length),S.setEnd(b.firstChild,y<b.inputmask._valueGet().length?y:b.inputmask._valueGet().length),S.collapse(!0);var P=c.default.getSelection();P.removeAllRanges(),P.addRange(S)}else b.createTextRange&&((S=b.createTextRange()).collapse(!0),S.moveEnd("character",y),S.moveStart("character",_),S.select());b.inputmask.caretHook===void 0||b.inputmask.caretHook.call(A,{begin:_,end:y})}}},o.determineLastRequiredPosition=function(b){var _,y,M=this,x=M.maskset,S=M.dependencyLib,A=p.call(M),E={},w=x.validPositions[A],C=h.getMaskTemplate.call(M,!0,p.call(M),!0,!0),P=C.length,T=w!==void 0?w.locator.slice():void 0;for(_=A+1;_<C.length;_++)T=(y=h.getTestTemplate.call(M,_,T,_-1)).locator.slice(),E[_]=S.extend(!0,{},y);var R=w&&w.alternation!==void 0?w.locator[w.alternation]:void 0;for(_=P-1;_>A&&((y=E[_]).match.optionality||y.match.optionalQuantifier&&y.match.newBlockMarker||R&&(R!==E[_].locator[w.alternation]&&y.match.static!==!0||y.match.static===!0&&y.locator[w.alternation]&&d.checkAlternationMatch.call(M,y.locator[w.alternation].toString().split(","),R.toString().split(","))&&h.getTests.call(M,_)[0].def!==""))&&C[_]===h.getPlaceholder.call(M,_,y.match);_--)P--;return b?{l:P,def:E[P]?E[P].match:void 0}:P},o.determineNewCaretPosition=function(b,_,y){var M,x,S,A=this,E=A.maskset,w=A.opts;if(_&&(A.isRTL?b.end=b.begin:b.begin=b.end),b.begin===b.end){switch(y=y||w.positionCaretOnClick){case"none":break;case"select":b={begin:0,end:f.call(A).length};break;case"ignore":b.end=b.begin=v.call(A,p.call(A));break;case"radixFocus":if(A.clicked>1&&E.validPositions.length===0)break;if(function(z){if(w.radixPoint!==""&&w.digits!==0){var D=E.validPositions;if(D[z]===void 0||D[z].input===void 0){if(z<v.call(A,-1))return!0;var O=f.call(A).indexOf(w.radixPoint);if(O!==-1){for(var j=0,k=D.length;j<k;j++)if(D[j]&&O<j&&D[j].input!==h.getPlaceholder.call(A,j))return!1;return!0}}}return!1}(b.begin)){var C=f.call(A).join("").indexOf(w.radixPoint);b.end=b.begin=w.numericInput?v.call(A,C):C;break}default:if(M=b.begin,x=p.call(A,M,!0),M<=(S=v.call(A,x!==-1||g.call(A,0)?x:-1)))b.end=b.begin=g.call(A,M,!1,!0)?M:v.call(A,M);else{var P=E.validPositions[x],T=h.getTestTemplate.call(A,S,P?P.match.locator:void 0,P),R=h.getPlaceholder.call(A,S,T.match);if(R!==""&&f.call(A)[S]!==R&&T.match.optionalQuantifier!==!0&&T.match.newBlockMarker!==!0||!g.call(A,S,w.keepStatic,!0)&&T.match.def===R){var F=v.call(A,S);(M>=F||M===S)&&(S=F)}b.end=b.begin=S}}return b}},o.getBuffer=f,o.getBufferTemplate=function(){var b=this.maskset;return b._buffer===void 0&&(b._buffer=h.getMaskTemplate.call(this,!1,1),b.buffer===void 0&&(b.buffer=b._buffer.slice())),b._buffer},o.getLastValidPosition=p,o.isMask=g,o.resetMaskSet=function(b){var _=this.maskset;_.buffer=void 0,b!==!0&&(_.validPositions=[],_.p=0),b===!1&&(_.tests={},_.jitOffset={})},o.seekNext=v,o.seekPrevious=function(b,_){var y=this,M=b-1;if(b<=0)return 0;for(;M>0&&(_===!0&&(h.getTest.call(y,M).match.newBlockMarker!==!0||!g.call(y,M,void 0,!0))||_!==!0&&!g.call(y,M,void 0,!0));)M--;return M},o.translatePosition=m;var u,c=(u=l(9380))&&u.__esModule?u:{default:u},d=l(7215),h=l(4713);function f(b){var _=this,y=_.maskset;return y.buffer!==void 0&&b!==!0||(y.buffer=h.getMaskTemplate.call(_,!0,p.call(_),!0),y._buffer===void 0&&(y._buffer=y.buffer.slice())),y.buffer}function p(b,_,y){var M=this.maskset,x=-1,S=-1,A=y||M.validPositions;b===void 0&&(b=-1);for(var E=0,w=A.length;E<w;E++)A[E]&&(_||A[E].generatedInput!==!0)&&(E<=b&&(x=E),E>=b&&(S=E));return x===-1||x===b?S:S===-1||b-x<S-b?x:S}function g(b,_,y){var M=this,x=this.maskset,S=h.getTestTemplate.call(M,b).match;if(S.def===""&&(S=h.getTest.call(M,b).match),S.static!==!0)return S.fn;if(y===!0&&x.validPositions[b]!==void 0&&x.validPositions[b].generatedInput!==!0)return!0;if(_!==!0&&b>-1){if(y){var A=h.getTests.call(M,b);return A.length>1+(A[A.length-1].match.def===""?1:0)}var E=h.determineTestTemplate.call(M,b,h.getTests.call(M,b)),w=h.getPlaceholder.call(M,b,E.match);return E.match.def!==w}return!1}function v(b,_,y){var M=this;y===void 0&&(y=!0);for(var x=b+1;h.getTest.call(M,x).match.def!==""&&(_===!0&&(h.getTest.call(M,x).match.newBlockMarker!==!0||!g.call(M,x,void 0,!0))||_!==!0&&!g.call(M,x,void 0,y));)x++;return x}function m(b){var _=this.opts,y=this.el;return!this.isRTL||typeof b!="number"||_.greedy&&_.placeholder===""||!y||(b=this._valueGet().length-b)<0&&(b=0),b}},4713:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.determineTestTemplate=m,o.getDecisionTaker=p,o.getMaskTemplate=function(M,x,S,A,E){var w=this,C=this.opts,P=this.maskset,T=C.greedy;E&&C.greedy&&(C.greedy=!1,w.maskset.tests={}),x=x||0;var R,F,z,D,O=[],j=0;do{if(M===!0&&P.validPositions[j])F=(z=E&&P.validPositions[j].match.optionality&&P.validPositions[j+1]===void 0&&(P.validPositions[j].generatedInput===!0||P.validPositions[j].input==C.skipOptionalPartCharacter&&j>0)?m.call(w,j,y.call(w,j,R,j-1)):P.validPositions[j]).match,R=z.locator.slice(),O.push(S===!0?z.input:S===!1?F.nativeDef:g.call(w,j,F));else{F=(z=v.call(w,j,R,j-1)).match,R=z.locator.slice();var k=A!==!0&&(C.jitMasking!==!1?C.jitMasking:F.jit);(D=(D||P.validPositions[j-1])&&F.static&&F.def!==C.groupSeparator&&F.fn===null)||k===!1||k===void 0||typeof k=="number"&&isFinite(k)&&k>j?O.push(S===!1?F.nativeDef:g.call(w,O.length,F)):D=!1}j++}while(F.static!==!0||F.def!==""||x>j);return O[O.length-1]===""&&O.pop(),S===!1&&P.maskLength!==void 0||(P.maskLength=j-1),C.greedy=T,O},o.getPlaceholder=g,o.getTest=b,o.getTestTemplate=v,o.getTests=y,o.isSubsetOf=_;var u,c=(u=l(2394))&&u.__esModule?u:{default:u},d=l(8711);function h(M){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},h(M)}function f(M,x){var S=(M.alternation!=null?M.mloc[p(M)]:M.locator).join("");if(S!=="")for(S=S.split(":")[0];S.length<x;)S+="0";return S}function p(M){var x=M.locator[M.alternation];return typeof x=="string"&&x.length>0&&(x=x.split(",")[0]),x!==void 0?x.toString():""}function g(M,x,S){var A=this,E=this.opts,w=this.maskset;if((x=x||b.call(A,M).match).placeholder!==void 0||S===!0){if(x.placeholder!==""&&x.static===!0&&x.generated!==!0){var C=d.getLastValidPosition.call(A,M),P=d.seekNext.call(A,C);return(S?M<=P:M<P)?E.staticDefinitionSymbol&&x.static?x.nativeDef:x.def:typeof x.placeholder=="function"?x.placeholder(E):x.placeholder}return typeof x.placeholder=="function"?x.placeholder(E):x.placeholder}if(x.static===!0){if(M>-1&&w.validPositions[M]===void 0){var T,R=y.call(A,M),F=[];if(typeof E.placeholder=="string"&&R.length>1+(R[R.length-1].match.def===""?1:0)){for(var z=0;z<R.length;z++)if(R[z].match.def!==""&&R[z].match.optionality!==!0&&R[z].match.optionalQuantifier!==!0&&(R[z].match.static===!0||T===void 0||R[z].match.fn.test(T.match.def,w,M,!0,E)!==!1)&&(F.push(R[z]),R[z].match.static===!0&&(T=R[z]),F.length>1&&/[0-9a-bA-Z]/.test(F[0].match.def)))return E.placeholder.charAt(M%E.placeholder.length)}}return x.def}return h(E.placeholder)==="object"?x.def:E.placeholder.charAt(M%E.placeholder.length)}function v(M,x,S){return this.maskset.validPositions[M]||m.call(this,M,y.call(this,M,x&&x.slice(),S))}function m(M,x){var S=this.opts,A=0,E=function(D,O){var j=0,k=!1;return O.forEach(function(I){I.match.optionality&&(j!==0&&j!==I.match.optionality&&(k=!0),(j===0||j>I.match.optionality)&&(j=I.match.optionality))}),j&&(D==0||O.length==1?j=0:k||(j=0)),j}(M,x);M=M>0?M-1:0;var w,C,P,T=f(b.call(this,M));S.greedy&&x.length>1&&x[x.length-1].match.def===""&&(A=1);for(var R=0;R<x.length-A;R++){var F=x[R];w=f(F,T.length);var z=Math.abs(w-T);(F.unMatchedAlternationStopped!==!0||x.filter(function(D){return D.unMatchedAlternationStopped!==!0}).length<=1)&&(C===void 0||w!==""&&z<C||P&&!S.greedy&&P.match.optionality&&P.match.optionality-E>0&&P.match.newBlockMarker==="master"&&(!F.match.optionality||F.match.optionality-E<1||!F.match.newBlockMarker)||P&&!S.greedy&&P.match.optionalQuantifier&&!F.match.optionalQuantifier)&&(C=z,P=F)}return P}function b(M,x){var S=this.maskset;return S.validPositions[M]?S.validPositions[M]:(x||y.call(this,M))[0]}function _(M,x,S){function A(E){for(var w,C=[],P=-1,T=0,R=E.length;T<R;T++)if(E.charAt(T)==="-")for(w=E.charCodeAt(T+1);++P<w;)C.push(String.fromCharCode(P));else P=E.charCodeAt(T),C.push(E.charAt(T));return C.join("")}return M.match.def===x.match.nativeDef||!(!(S.regex||M.match.fn instanceof RegExp&&x.match.fn instanceof RegExp)||M.match.static===!0||x.match.static===!0)&&(x.match.fn.source==="."||A(x.match.fn.source.replace(/[[\]/]/g,"")).indexOf(A(M.match.fn.source.replace(/[[\]/]/g,"")))!==-1)}function y(M,x,S){var A,E,w=this,C=this.dependencyLib,P=this.maskset,T=this.opts,R=this.el,F=P.maskToken,z=x?S:0,D=x?x.slice():[0],O=[],j=!1,k=x?x.join(""):"",I=!1;function U(J,ee,se,ye){function de(he,Ae,Ee){function Ne(X,ie){var ae=ie.matches.indexOf(X)===0;return ae||ie.matches.every(function(re,Ce){return re.isQuantifier===!0?ae=Ne(X,ie.matches[Ce-1]):Object.prototype.hasOwnProperty.call(re,"matches")&&(ae=Ne(X,re)),!ae}),ae}function Ie(X,ie,ae){var re,Ce;if((P.tests[X]||P.validPositions[X])&&(P.validPositions[X]?[P.validPositions[X]]:P.tests[X]).every(function(Oe,we){if(Oe.mloc[ie])return re=Oe,!1;var Fe=ae!==void 0?ae:Oe.alternation,Ge=Oe.locator[Fe]!==void 0?Oe.locator[Fe].toString().indexOf(ie):-1;return(Ce===void 0||Ge<Ce)&&Ge!==-1&&(re=Oe,Ce=Ge),!0}),re){var Me=re.locator[re.alternation],Se=re.mloc[ie]||re.mloc[Me]||re.locator;return Se[Se.length-1].toString().indexOf(":")!==-1&&Se.pop(),Se.slice((ae!==void 0?ae:re.alternation)+1)}return ae!==void 0?Ie(X,ie):void 0}function Pe(X,ie){return X.match.static===!0&&ie.match.static!==!0&&ie.match.fn.test(X.match.def,P,M,!1,T,!1)}function K(X,ie){var ae=X.alternation,re=ie===void 0||ae<=ie.alternation&&X.locator[ae].toString().indexOf(ie.locator[ae])===-1;if(!re&&ae>ie.alternation){for(var Ce=0;Ce<ae;Ce++)if(X.locator[Ce]!==ie.locator[Ce]){ae=Ce,re=!0;break}}return!!re&&function(Me){X.mloc=X.mloc||{};var Se=X.locator[Me];if(Se!==void 0){if(typeof Se=="string"&&(Se=Se.split(",")[0]),X.mloc[Se]===void 0&&(X.mloc[Se]=X.locator.slice(),X.mloc[Se].push(":".concat(X.alternation))),ie!==void 0){for(var Oe in ie.mloc)typeof Oe=="string"&&(Oe=parseInt(Oe.split(",")[0])),X.mloc[Oe+0]=ie.mloc[Oe];X.locator[Me]=Object.keys(X.mloc).join(",")}return X.alternation>Me&&(X.alternation=Me),!0}return X.alternation=void 0,!1}(ae)}function N(X,ie){if(X.locator.length!==ie.locator.length)return!1;for(var ae=X.alternation+1;ae<X.locator.length;ae++)if(X.locator[ae]!==ie.locator[ae])return!1;return!0}if(z>M+T._maxTestPos)throw new Error("Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. ".concat(P.mask));if(z===M&&he.matches===void 0){if(O.push({match:he,locator:Ae.reverse(),cd:k,mloc:{}}),!he.optionality||Ee!==void 0||!(T.definitions&&T.definitions[he.nativeDef]&&T.definitions[he.nativeDef].optional||c.default.prototype.definitions[he.nativeDef]&&c.default.prototype.definitions[he.nativeDef].optional))return!0;j=!0,z=M}else if(he.matches!==void 0){if(he.isGroup&&Ee!==he)return function(){if(he=de(J.matches[J.matches.indexOf(he)+1],Ae,Ee))return!0}();if(he.isOptional)return function(){var X=he,ie=O.length;if(he=U(he,ee,Ae,Ee),O.length>0){if(O.forEach(function(ae,re){re>=ie&&(ae.match.optionality=ae.match.optionality?ae.match.optionality+1:1)}),A=O[O.length-1].match,Ee!==void 0||!Ne(A,X))return he;j=!0,z=M}}();if(he.isAlternator)return function(){function X(ot){for(var At,Nt=ot.matches[0].matches?ot.matches[0].matches.length:1,lt=0;lt<ot.matches.length&&Nt===(At=ot.matches[lt].matches?ot.matches[lt].matches.length:1);lt++);return Nt!==At}w.hasAlternator=!0;var ie,ae=he,re=[],Ce=O.slice(),Me=Ae.length,Se=ee.length>0?ee.shift():-1;if(Se===-1||typeof Se=="string"){var Oe,we=z,Fe=ee.slice(),Ge=[];if(typeof Se=="string")Ge=Se.split(",");else for(Oe=0;Oe<ae.matches.length;Oe++)Ge.push(Oe.toString());if(P.excludes[M]!==void 0){for(var Je=Ge.slice(),$e=0,qe=P.excludes[M].length;$e<qe;$e++){var at=P.excludes[M][$e].toString().split(":");Ae.length==at[1]&&Ge.splice(Ge.indexOf(at[0]),1)}Ge.length===0&&(delete P.excludes[M],Ge=Je)}(T.keepStatic===!0||isFinite(parseInt(T.keepStatic))&&we>=T.keepStatic)&&(Ge=Ge.slice(0,1));for(var dt=0;dt<Ge.length;dt++){Oe=parseInt(Ge[dt]),O=[],ee=typeof Se=="string"&&Ie(z,Oe,Me)||Fe.slice();var oe=ae.matches[Oe];if(oe&&de(oe,[Oe].concat(Ae),Ee))he=!0;else if(dt===0&&(I=X(ae)),oe&&oe.matches&&oe.matches.length>ae.matches[0].matches.length)break;ie=O.slice(),z=we,O=[];for(var Le=0;Le<ie.length;Le++){var be=ie[Le],xe=!1;be.alternation=be.alternation||Me,K(be);for(var ke=0;ke<re.length;ke++){var We=re[ke];if(typeof Se!="string"||be.alternation!==void 0&&Ge.includes(be.locator[be.alternation].toString())){if(be.match.nativeDef===We.match.nativeDef){xe=!0,K(We,be);break}if(_(be,We,T)){K(be,We)&&(xe=!0,re.splice(re.indexOf(We),0,be));break}if(_(We,be,T)){K(We,be);break}if(Pe(be,We)){N(be,We)||R.inputmask.userOptions.keepStatic!==void 0?K(be,We)&&(xe=!0,re.splice(re.indexOf(We),0,be)):T.keepStatic=!0;break}if(Pe(We,be)){K(We,be);break}}}xe||re.push(be)}}O=Ce.concat(re),z=M,j=O.length>0&&I,he=re.length>0&&!I,I&&j&&!he&&O.forEach(function(ot,At){ot.unMatchedAlternationStopped=!0}),ee=Fe.slice()}else he=de(ae.matches[Se]||J.matches[Se],[Se].concat(Ae),Ee);if(he)return!0}();if(he.isQuantifier&&Ee!==J.matches[J.matches.indexOf(he)-1])return function(){for(var X=he,ie=!1,ae=ee.length>0?ee.shift():0;ae<(isNaN(X.quantifier.max)?ae+1:X.quantifier.max)&&z<=M;ae++){var re=J.matches[J.matches.indexOf(X)-1];if(he=de(re,[ae].concat(Ae),re)){if(O.forEach(function(Ce,Me){(A=B(re,Ce.match)?Ce.match:O[O.length-1].match).optionalQuantifier=ae>=X.quantifier.min,A.jit=(ae+1)*(re.matches.indexOf(A)+1)>X.quantifier.jit,A.optionalQuantifier&&Ne(A,re)&&(j=!0,z=M,T.greedy&&P.validPositions[M-1]==null&&ae>X.quantifier.min&&["*","+"].indexOf(X.quantifier.max)!=-1&&(O.pop(),k=void 0),ie=!0,he=!1),!ie&&A.jit&&(P.jitOffset[M]=re.matches.length-re.matches.indexOf(A))}),ie)break;return!0}}}();if(he=U(he,ee,Ae,Ee))return!0}else z++}for(var W=ee.length>0?ee.shift():0;W<J.matches.length;W++)if(J.matches[W].isQuantifier!==!0){var Te=de(J.matches[W],[W].concat(se),ye);if(Te&&z===M)return Te;if(z>M)break}}function B(J,ee){var se=J.matches.indexOf(ee)!=-1;return se||J.matches.forEach(function(ye,de){ye.matches===void 0||se||(se=B(ye,ee))}),se}if(M>-1){if(x===void 0){for(var V,H=M-1;(V=P.validPositions[H]||P.tests[H])===void 0&&H>-1;)H--;V!==void 0&&H>-1&&(D=function(J,ee){var se,ye=[];return Array.isArray(ee)||(ee=[ee]),ee.length>0&&(ee[0].alternation===void 0||T.keepStatic===!0?(ye=m.call(w,J,ee.slice()).locator.slice()).length===0&&(ye=ee[0].locator.slice()):ee.forEach(function(de){de.def!==""&&(ye.length===0?(se=de.alternation,ye=de.locator.slice()):de.locator[se]&&ye[se].toString().indexOf(de.locator[se])===-1&&(ye[se]+=","+de.locator[se]))})),ye}(H,V),k=D.join(""),z=H)}if(P.tests[M]&&P.tests[M][0].cd===k)return P.tests[M];for(var Y=D.shift();Y<F.length&&!(U(F[Y],D,[Y])&&z===M||z>M);Y++);}return(O.length===0||j)&&O.push({match:{fn:null,static:!0,optionality:!1,casing:null,def:"",placeholder:""},locator:I&&O.filter(function(J){return J.unMatchedAlternationStopped!==!0}).length===0?[0]:[],mloc:{},cd:k}),x!==void 0&&P.tests[M]?E=C.extend(!0,[],O):(P.tests[M]=C.extend(!0,[],O),E=P.tests[M]),O.forEach(function(J){J.match.optionality=J.match.defOptionality||!1}),E}},7215:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.alternate=f,o.checkAlternationMatch=function(x,S,A){for(var E,w=this.opts.greedy?S:S.slice(0,1),C=!1,P=A!==void 0?A.split(","):[],T=0;T<P.length;T++)(E=x.indexOf(P[T]))!==-1&&x.splice(E,1);for(var R=0;R<x.length;R++)if(w.includes(x[R])){C=!0;break}return C},o.handleRemove=function(x,S,A,E,w){var C=this,P=this.maskset,T=this.opts;if((T.numericInput||C.isRTL)&&(S===c.keys.Backspace?S=c.keys.Delete:S===c.keys.Delete&&(S=c.keys.Backspace),C.isRTL)){var R=A.end;A.end=A.begin,A.begin=R}var F,z=d.getLastValidPosition.call(C,void 0,!0);A.end>=d.getBuffer.call(C).length&&z>=A.end&&(A.end=z+1),S===c.keys.Backspace?A.end-A.begin<1&&(A.begin=d.seekPrevious.call(C,A.begin)):S===c.keys.Delete&&A.begin===A.end&&(A.end=d.isMask.call(C,A.end,!0,!0)?A.end+1:d.seekNext.call(C,A.end)+1),(F=M.call(C,A))!==!1&&((E!==!0&&T.keepStatic!==!1||T.regex!==null&&h.getTest.call(C,A.begin).match.def.indexOf("|")!==-1)&&f.call(C,!0),E!==!0&&(P.p=S===c.keys.Delete?A.begin+F:A.begin,P.p=d.determineNewCaretPosition.call(C,{begin:P.p,end:P.p},!1,T.insertMode===!1&&S===c.keys.Backspace?"none":void 0).begin))},o.isComplete=g,o.isSelection=v,o.isValid=m,o.refreshFromBuffer=_,o.revalidateMask=M;var u=l(6030),c=l(2839),d=l(8711),h=l(4713);function f(x,S,A,E,w,C){var P=this,T=this.dependencyLib,R=this.opts,F=P.maskset;if(!P.hasAlternator)return!1;var z,D,O,j,k,I,U,B,V,H,Y,J=T.extend(!0,[],F.validPositions),ee=T.extend(!0,{},F.tests),se=!1,ye=!1,de=w!==void 0?w:d.getLastValidPosition.call(P);if(C&&(H=C.begin,Y=C.end,C.begin>C.end&&(H=C.end,Y=C.begin)),de===-1&&w===void 0)z=0,D=(j=h.getTest.call(P,z)).alternation;else for(;de>=0;de--)if((O=F.validPositions[de])&&O.alternation!==void 0){if(de<=(x||0)&&j&&j.locator[O.alternation]!==O.locator[O.alternation])break;z=de,D=F.validPositions[z].alternation,j=O}if(D!==void 0){U=parseInt(z),F.excludes[U]=F.excludes[U]||[],x!==!0&&F.excludes[U].push((0,h.getDecisionTaker)(j)+":"+j.alternation);var W=[],Te=-1;for(k=U;U<d.getLastValidPosition.call(P,void 0,!0)+1;k++)Te===-1&&x<=k&&S!==void 0&&(W.push(S),Te=W.length-1),(I=F.validPositions[U])&&I.generatedInput!==!0&&(C===void 0||k<H||k>=Y)&&W.push(I.input),F.validPositions.splice(U,1);for(Te===-1&&S!==void 0&&(W.push(S),Te=W.length-1);F.excludes[U]!==void 0&&F.excludes[U].length<10;){for(F.tests={},d.resetMaskSet.call(P,!0),se=!0,k=0;k<W.length&&(B=se.caret||R.insertMode==0&&B!=null?d.seekNext.call(P,B):d.getLastValidPosition.call(P,void 0,!0)+1,V=W[k],se=m.call(P,B,V,!1,E,!0));k++)k===Te&&(ye=se),x==1&&se&&(ye={caretPos:k});if(se)break;if(d.resetMaskSet.call(P),j=h.getTest.call(P,U),F.validPositions=T.extend(!0,[],J),F.tests=T.extend(!0,{},ee),!F.excludes[U]){ye=f.call(P,x,S,A,E,U-1,C);break}if(j.alternation!=null){var he=(0,h.getDecisionTaker)(j);if(F.excludes[U].indexOf(he+":"+j.alternation)!==-1){ye=f.call(P,x,S,A,E,U-1,C);break}for(F.excludes[U].push(he+":"+j.alternation),k=U;k<d.getLastValidPosition.call(P,void 0,!0)+1;k++)F.validPositions.splice(U)}else delete F.excludes[U]}}return ye&&R.keepStatic===!1||delete F.excludes[U],ye}function p(x,S,A){var E=this.opts,w=this.maskset;switch(E.casing||S.casing){case"upper":x=x.toUpperCase();break;case"lower":x=x.toLowerCase();break;case"title":var C=w.validPositions[A-1];x=A===0||C&&C.input===String.fromCharCode(c.keyCode.Space)?x.toUpperCase():x.toLowerCase();break;default:if(typeof E.casing=="function"){var P=Array.prototype.slice.call(arguments);P.push(w.validPositions),x=E.casing.apply(this,P)}}return x}function g(x){var S=this,A=this.opts,E=this.maskset;if(typeof A.isComplete=="function")return A.isComplete(x,A);if(A.repeat!=="*"){var w=!1,C=d.determineLastRequiredPosition.call(S,!0),P=C.l;if(C.def===void 0||C.def.newBlockMarker||C.def.optionality||C.def.optionalQuantifier){w=!0;for(var T=0;T<=P;T++){var R=h.getTestTemplate.call(S,T).match;if(R.static!==!0&&E.validPositions[T]===void 0&&(R.optionality===!1||R.optionality===void 0||R.optionality&&R.newBlockMarker==0)&&(R.optionalQuantifier===!1||R.optionalQuantifier===void 0)||R.static===!0&&R.def!=""&&x[T]!==h.getPlaceholder.call(S,T,R)){w=!1;break}}}return w}}function v(x){var S=this.opts.insertMode?0:1;return this.isRTL?x.begin-x.end>S:x.end-x.begin>S}function m(x,S,A,E,w,C,P){var T=this,R=this.dependencyLib,F=this.opts,z=T.maskset;A=A===!0;var D=x;function O(se){if(se!==void 0){if(se.remove!==void 0&&(Array.isArray(se.remove)||(se.remove=[se.remove]),se.remove.sort(function(de,W){return T.isRTL?de.pos-W.pos:W.pos-de.pos}).forEach(function(de){M.call(T,{begin:de,end:de+1})}),se.remove=void 0),se.insert!==void 0&&(Array.isArray(se.insert)||(se.insert=[se.insert]),se.insert.sort(function(de,W){return T.isRTL?W.pos-de.pos:de.pos-W.pos}).forEach(function(de){de.c!==""&&m.call(T,de.pos,de.c,de.strict===void 0||de.strict,de.fromIsValid!==void 0?de.fromIsValid:E)}),se.insert=void 0),se.refreshFromBuffer&&se.buffer){var ye=se.refreshFromBuffer;_.call(T,ye===!0?ye:ye.start,ye.end,se.buffer),se.refreshFromBuffer=void 0}se.rewritePosition!==void 0&&(D=se.rewritePosition,se=!0)}return se}function j(se,ye,de){var W=!1;return h.getTests.call(T,se).every(function(Te,he){var Ae=Te.match;if(d.getBuffer.call(T,!0),(W=(!Ae.jit||z.validPositions[d.seekPrevious.call(T,se)]!==void 0)&&(Ae.fn!=null?Ae.fn.test(ye,z,se,de,F,v.call(T,x)):(ye===Ae.def||ye===F.skipOptionalPartCharacter)&&Ae.def!==""&&{c:h.getPlaceholder.call(T,se,Ae,!0)||Ae.def,pos:se}))!==!1){var Ee=W.c!==void 0?W.c:ye,Ne=se;return Ee=Ee===F.skipOptionalPartCharacter&&Ae.static===!0?h.getPlaceholder.call(T,se,Ae,!0)||Ae.def:Ee,(W=O(W))!==!0&&W.pos!==void 0&&W.pos!==se&&(Ne=W.pos),W!==!0&&W.pos===void 0&&W.c===void 0||M.call(T,x,R.extend({},Te,{input:p.call(T,Ee,Ae,Ne)}),E,Ne)===!1&&(W=!1),!1}return!0}),W}x.begin!==void 0&&(D=T.isRTL?x.end:x.begin);var k=!0,I=R.extend(!0,[],z.validPositions);if(F.keepStatic===!1&&z.excludes[D]!==void 0&&w!==!0&&E!==!0)for(var U=D;U<(T.isRTL?x.begin:x.end);U++)z.excludes[U]!==void 0&&(z.excludes[U]=void 0,delete z.tests[U]);if(typeof F.preValidation=="function"&&E!==!0&&C!==!0&&(k=O(k=F.preValidation.call(T,d.getBuffer.call(T),D,S,v.call(T,x),F,z,x,A||w))),k===!0){if(k=j(D,S,A),(!A||E===!0)&&k===!1&&C!==!0){var B=z.validPositions[D];if(!B||B.match.static!==!0||B.match.def!==S&&S!==F.skipOptionalPartCharacter){if(F.insertMode||z.validPositions[d.seekNext.call(T,D)]===void 0||x.end>D){var V=!1;if(z.jitOffset[D]&&z.validPositions[d.seekNext.call(T,D)]===void 0&&(k=m.call(T,D+z.jitOffset[D],S,!0,!0))!==!1&&(w!==!0&&(k.caret=D),V=!0),x.end>D&&(z.validPositions[D]=void 0),!V&&!d.isMask.call(T,D,F.keepStatic&&D===0)){for(var H=D+1,Y=d.seekNext.call(T,D,!1,D!==0);H<=Y;H++)if((k=j(H,S,A))!==!1){k=y.call(T,D,k.pos!==void 0?k.pos:H)||k,D=H;break}}}}else k={caret:d.seekNext.call(T,D)}}T.hasAlternator&&w!==!0&&!A&&(w=!0,k===!1&&F.keepStatic&&(g.call(T,d.getBuffer.call(T))||D===0)?k=f.call(T,D,S,A,E,void 0,x):(v.call(T,x)&&z.tests[D]&&z.tests[D].length>1&&F.keepStatic||k==1&&F.numericInput!==!0&&z.tests[D]&&z.tests[D].length>1&&d.getLastValidPosition.call(T,void 0,!0)>D)&&(k=f.call(T,!0))),k===!0&&(k={pos:D})}if(typeof F.postValidation=="function"&&E!==!0&&C!==!0){var J=F.postValidation.call(T,d.getBuffer.call(T,!0),x.begin!==void 0?T.isRTL?x.end:x.begin:x,S,k,F,z,A,P);J!==void 0&&(k=J===!0?k:J)}k&&k.pos===void 0&&(k.pos=D),k===!1||C===!0?(d.resetMaskSet.call(T,!0),z.validPositions=R.extend(!0,[],I)):y.call(T,void 0,D,!0);var ee=O(k);return T.maxLength!==void 0&&d.getBuffer.call(T).length>T.maxLength&&!E&&(d.resetMaskSet.call(T,!0),z.validPositions=R.extend(!0,[],I),ee=!1),ee}function b(x,S,A){for(var E=this.maskset,w=!1,C=h.getTests.call(this,x),P=0;P<C.length;P++){if(C[P].match&&(C[P].match.nativeDef===S.match[A.shiftPositions?"def":"nativeDef"]&&(!A.shiftPositions||!S.match.static)||C[P].match.nativeDef===S.match.nativeDef||A.regex&&!C[P].match.static&&C[P].match.fn.test(S.input,E,x,!1,A))){w=!0;break}if(C[P].match&&C[P].match.def===S.match.nativeDef){w=void 0;break}}return w===!1&&E.jitOffset[x]!==void 0&&(w=b.call(this,x+E.jitOffset[x],S,A)),w}function _(x,S,A){var E,w,C=this,P=this.maskset,T=this.opts,R=this.dependencyLib,F=T.skipOptionalPartCharacter,z=C.isRTL?A.slice().reverse():A;if(T.skipOptionalPartCharacter="",x===!0)d.resetMaskSet.call(C,!1),x=0,S=A.length,w=d.determineNewCaretPosition.call(C,{begin:0,end:0},!1).begin;else{for(E=x;E<S;E++)P.validPositions.splice(x,0);w=x}var D=new R.Event("keypress");for(E=x;E<S;E++){D.key=z[E].toString(),C.ignorable=!1;var O=u.EventHandlers.keypressEvent.call(C,D,!0,!1,!1,w);O!==!1&&O!==void 0&&(w=O.forwardPosition)}T.skipOptionalPartCharacter=F}function y(x,S,A){var E=this,w=this.maskset,C=this.dependencyLib;if(x===void 0)for(x=S-1;x>0&&!w.validPositions[x];x--);for(var P=x;P<S;P++)if(w.validPositions[P]===void 0&&!d.isMask.call(E,P,!1)&&(P==0?h.getTest.call(E,P):w.validPositions[P-1])){var T=h.getTests.call(E,P).slice();T[T.length-1].match.def===""&&T.pop();var R,F=h.determineTestTemplate.call(E,P,T);if(F&&(F.match.jit!==!0||F.match.newBlockMarker==="master"&&(R=w.validPositions[P+1])&&R.match.optionalQuantifier===!0)&&((F=C.extend({},F,{input:h.getPlaceholder.call(E,P,F.match,!0)||F.match.def})).generatedInput=!0,M.call(E,P,F,!0),A!==!0)){var z=w.validPositions[S].input;return w.validPositions[S]=void 0,m.call(E,S,z,!0,!0)}}}function M(x,S,A,E){var w=this,C=this.maskset,P=this.opts,T=this.dependencyLib;function R(ee,se,ye){var de=se[ee];if(de!==void 0&&de.match.static===!0&&de.match.optionality!==!0&&(se[0]===void 0||se[0].alternation===void 0)){var W=ye.begin<=ee-1?se[ee-1]&&se[ee-1].match.static===!0&&se[ee-1]:se[ee-1],Te=ye.end>ee+1?se[ee+1]&&se[ee+1].match.static===!0&&se[ee+1]:se[ee+1];return W&&Te}return!1}var F=0,z=x.begin!==void 0?x.begin:x,D=x.end!==void 0?x.end:x,O=!0;if(x.begin>x.end&&(z=x.end,D=x.begin),E=E!==void 0?E:z,A===void 0&&(z!==D||P.insertMode&&C.validPositions[E]!==void 0||S===void 0||S.match.optionalQuantifier||S.match.optionality)){var j,k=T.extend(!0,[],C.validPositions),I=d.getLastValidPosition.call(w,void 0,!0);C.p=z;var U=v.call(w,x)?z:E;for(j=I;j>=U;j--)C.validPositions.splice(j,1),S===void 0&&delete C.tests[j+1];var B,V,H=E,Y=H;for(S&&(C.validPositions[E]=T.extend(!0,{},S),Y++,H++),k[D]==null&&C.jitOffset[D]&&(D+=C.jitOffset[D]+1),j=S?D:D-1;j<=I;j++){if((B=k[j])!==void 0&&B.generatedInput!==!0&&(j>=D||j>=z&&R(j,k,{begin:z,end:D}))){for(;h.getTest.call(w,Y).match.def!=="";){if((V=b.call(w,Y,B,P))!==!1||B.match.def==="+"){B.match.def==="+"&&d.getBuffer.call(w,!0);var J=m.call(w,Y,B.input,B.match.def!=="+",!0);if(O=J!==!1,H=(J.pos||Y)+1,!O&&V)break}else O=!1;if(O){S===void 0&&B.match.static&&j===x.begin&&F++;break}if(!O&&d.getBuffer.call(w),Y>C.maskLength)break;Y++}h.getTest.call(w,Y).match.def==""&&(O=!1),Y=H}if(!O)break}if(!O)return C.validPositions=T.extend(!0,[],k),d.resetMaskSet.call(w,!0),!1}else S&&h.getTest.call(w,E).match.cd===S.match.cd&&(C.validPositions[E]=T.extend(!0,{},S));return d.resetMaskSet.call(w,!0),F}}},n={};function s(a){var o=n[a];if(o!==void 0)return o.exports;var l=n[a]={exports:{}};return t[a](l,l.exports,s),l.exports}var r={};return function(){var a=r;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s(7149),s(3194),s(9302),s(4013),s(3851),s(219),s(207),s(5296);var o,l=(o=s(2394))&&o.__esModule?o:{default:o};a.default=l.default}(),r}()})})(rE);var Lk=rE.exports;const Wp=e0(Lk);Wp("+38 (099) 999-99-99").mask("#form-meeting-phone");Wp("+38 (099) 999-99-99").mask("#form-any-questions-phone-2");Wp("+38 (099) 999-99-99").mask("#form-interview--phone");
