import{$ as t}from"./jquery-CqDs7TUd.js";t(document).ready(function(){t("#user-write-review").submit(function(a){a.preventDefault();let e=t(this),i=e.find('button[type="submit"]');if(!i.hasClass("processing")){i.addClass("processing").prop("disabled",!0);var n=new FormData(this);e.find(".field-error").remove(),d(function(s){if(s){let r=e.find("button.btn-review-add-pic");e.find(".field-error").remove(),e.find("button.art-open-review-success").click(),r.find("svg").removeClass("d-none"),r.find("img").remove(),e.find('input[name="name"]').val(""),e.find("textarea.art-review-text").val("")}i.removeClass("processing").prop("disabled",!1)},function(s){s.status===422?o(s.responseJSON.errors,n,e):console.error("[Review]: error during sending the review."),i.removeClass("processing").prop("disabled",!1)},n)}});function o(a,e,i){for(let n in a)i.find('input[name="'+n+'"]').val(""),i.find("."+n+"-field").after(`<p class="field-error ${n}">${a[n]}</p>`)}function d(a,e,i){const n=document.head.querySelector('meta[name="app-url"]').content;t.ajax({url:`${n}/user-write-review`,type:"post",data:i,processData:!1,contentType:!1,dataType:"json"}).done(function(s){a(s)}).fail(function(s){e(s)})}t(".btn-review-add-pic").click(function(){t(this).siblings('input[type="file"]').click()}),t('input[type="file"]').change(function(a){var e=t(this)[0],i=t(this).siblings(".btn-review-add-pic");if(e.files&&e.files[0]){var n=new FileReader;n.onload=function(s){i.find("svg").addClass("d-none"),i.find("img.selected-image").remove(),i.append('<img src="'+s.target.result+'" alt="user image" class="selected-image" style="max-width: 100%; max-height: 100%;">');var r=i.siblings(".remove-selected-image");r.removeClass("d-none").addClass("d-block")},n.readAsDataURL(e.files[0])}}),t(".remove-selected-image").click(function(a){a.preventDefault();var e=t(this).closest(".image-field"),i=e.find('input[type="file"]'),n=e.find(".btn-review-add-pic");i.val(""),n.find("img.selected-image").remove(),n.find("svg").removeClass("d-none"),t(this).removeClass("d-block").addClass("d-none")})});
