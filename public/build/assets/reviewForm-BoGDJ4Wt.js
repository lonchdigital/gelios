import{$ as t}from"./jquery-CqDs7TUd.js";t(document).ready(function(){t("#user-write-review").submit(function(a){a.preventDefault();let e=t(this);var n=new FormData(this);e.find(".field-error").remove(),d(function(i){if(i){let r=e.find("button.btn-review-add-pic");e.find(".field-error").remove(),e.find("button.art-open-review-success").click(),r.find("svg").removeClass("d-none"),r.find("img").remove(),e.find('input[name="name"]').val(""),e.find("textarea.art-review-text").val("")}},function(i){i.status===422?s(i.responseJSON.errors,n,e):console.error("[Review]: error during sending the review.")},n)});function s(a,e,n){for(let i in a)n.find('input[name="'+i+'"]').val(""),n.find("."+i+"-field").after(`<p class="field-error ${i}">${a[i]}</p>`)}function d(a,e,n){const i=document.head.querySelector('meta[name="app-url"]').content;t.ajax({url:`${i}/user-write-review`,type:"post",data:n,processData:!1,contentType:!1,dataType:"json"}).done(function(r){a(r)}).fail(function(r){e(r)})}t(".btn-review-add-pic").click(function(){t(this).siblings('input[type="file"]').click()}),t('input[type="file"]').change(function(a){var e=t(this)[0],n=t(this).siblings(".btn-review-add-pic");if(e.files&&e.files[0]){var i=new FileReader;i.onload=function(r){n.find("svg").addClass("d-none"),n.find("img.selected-image").remove(),n.append('<img src="'+r.target.result+'" alt="user image" class="selected-image" style="max-width: 100%; max-height: 100%;">');var o=n.siblings(".remove-selected-image");o.removeClass("d-none").addClass("d-block")},i.readAsDataURL(e.files[0])}}),t(".remove-selected-image").click(function(a){a.preventDefault();var e=t(this).closest(".image-field"),n=e.find('input[type="file"]'),i=e.find(".btn-review-add-pic");n.val(""),i.find("img.selected-image").remove(),i.find("svg").removeClass("d-none"),t(this).removeClass("d-block").addClass("d-none")})});
