import{$ as n}from"./jquery-CqDs7TUd.js";n(document).ready(function(){n("#user-write-review").submit(function(a){a.preventDefault();let e=n(this);var t=new FormData(this);e.find(".field-error").remove(),o(function(i){if(i){let r=e.find("button.btn-review-add-pic");e.find(".field-error").remove(),e.find("button.art-open-review-success").click(),r.find("svg").removeClass("d-none"),r.find("img").remove(),e.find('input[name="name"]').val(""),e.find("textarea.art-review-text").val("")}},function(i){i.status===422?s(i.responseJSON.errors,t,e):console.error("[Review]: error during sending the review.")},t)});function s(a,e,t){for(let i in a)t.find('input[name="'+i+'"]').val(""),t.find("."+i+"-field").after(`<p class="field-error ${i}">${a[i]}</p>`)}function o(a,e,t){const i=document.head.querySelector('meta[name="app-url"]').content;n.ajax({url:`${i}/user-write-review`,type:"post",data:t,processData:!1,contentType:!1,dataType:"json"}).done(function(r){a(r)}).fail(function(r){e(r)})}n(".btn-review-add-pic").click(function(){n(this).siblings('input[type="file"]').click()}),n('input[type="file"]').change(function(a){var e=n(this)[0],t=n(this).siblings(".btn-review-add-pic");if(e.files&&e.files[0]){var i=new FileReader;i.onload=function(r){t.find("svg").addClass("d-none"),t.find("img.selected-image").remove(),t.append('<img src="'+r.target.result+'" alt="user image" class="selected-image" style="max-width: 100%; max-height: 100%;">')},i.readAsDataURL(e.files[0])}})});
