import{g as Ix,j as Rc,c as kv,a as Nv,$ as we}from"./jquery-CqDs7TUd.js";var cm={exports:{}};/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var el=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",Dx=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(el&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();function Ox(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}function kx(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},Dx))}}var Nx=el&&window.Promise,Fx=Nx?Ox:kx;function Fv(t){var e={};return t&&e.toString.call(t)==="[object Function]"}function Lr(t,e){if(t.nodeType!==1)return[];var n=t.ownerDocument.defaultView,i=n.getComputedStyle(t,null);return e?i[e]:i}function Tf(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function tl(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Lr(t),n=e.overflow,i=e.overflowX,s=e.overflowY;return/(auto|scroll|overlay)/.test(n+s+i)?t:tl(Tf(t))}function Uv(t){return t&&t.referenceNode?t.referenceNode:t}var um=el&&!!(window.MSInputMethodContext&&document.documentMode),dm=el&&/MSIE 10/.test(navigator.userAgent);function ka(t){return t===11?um:t===10?dm:um||dm}function wa(t){if(!t)return document.documentElement;for(var e=ka(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return!i||i==="BODY"||i==="HTML"?t?t.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(n.nodeName)!==-1&&Lr(n,"position")==="static"?wa(n):n}function Ux(t){var e=t.nodeName;return e==="BODY"?!1:e==="HTML"||wa(t.firstElementChild)===t}function Wd(t){return t.parentNode!==null?Wd(t.parentNode):t}function Ic(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,s=n?e:t,r=document.createRange();r.setStart(i,0),r.setEnd(s,0);var a=r.commonAncestorContainer;if(t!==a&&e!==a||i.contains(s))return Ux(a)?a:wa(a);var o=Wd(t);return o.host?Ic(o.host,e):Ic(t,Wd(e).host)}function xa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",n=e==="top"?"scrollTop":"scrollLeft",i=t.nodeName;if(i==="BODY"||i==="HTML"){var s=t.ownerDocument.documentElement,r=t.ownerDocument.scrollingElement||s;return r[n]}return t[n]}function zx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=xa(e,"top"),s=xa(e,"left"),r=n?-1:1;return t.top+=i*r,t.bottom+=i*r,t.left+=s*r,t.right+=s*r,t}function hm(t,e){var n=e==="x"?"Left":"Top",i=n==="Left"?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+i+"Width"])}function fm(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],ka(10)?parseInt(n["offset"+t])+parseInt(i["margin"+(t==="Height"?"Top":"Left")])+parseInt(i["margin"+(t==="Height"?"Bottom":"Right")]):0)}function zv(t){var e=t.body,n=t.documentElement,i=ka(10)&&getComputedStyle(n);return{height:fm("Height",e,n,i),width:fm("Width",e,n,i)}}var Bx=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Hx=function(){function t(e,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Sa=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},li=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function Xs(t){return li({},t,{right:t.left+t.width,bottom:t.top+t.height})}function jd(t){var e={};try{if(ka(10)){e=t.getBoundingClientRect();var n=xa(t,"top"),i=xa(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}else e=t.getBoundingClientRect()}catch{}var s={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r=t.nodeName==="HTML"?zv(t.ownerDocument):{},a=r.width||t.clientWidth||s.width,o=r.height||t.clientHeight||s.height,l=t.offsetWidth-a,c=t.offsetHeight-o;if(l||c){var u=Lr(t);l-=hm(u,"x"),c-=hm(u,"y"),s.width-=l,s.height-=c}return Xs(s)}function Mf(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=ka(10),s=e.nodeName==="HTML",r=jd(t),a=jd(e),o=tl(t),l=Lr(e),c=parseFloat(l.borderTopWidth),u=parseFloat(l.borderLeftWidth);n&&s&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var d=Xs({top:r.top-a.top-c,left:r.left-a.left-u,width:r.width,height:r.height});if(d.marginTop=0,d.marginLeft=0,!i&&s){var h=parseFloat(l.marginTop),p=parseFloat(l.marginLeft);d.top-=c-h,d.bottom-=c-h,d.left-=u-p,d.right-=u-p,d.marginTop=h,d.marginLeft=p}return(i&&!n?e.contains(o):e===o&&o.nodeName!=="BODY")&&(d=zx(d,e)),d}function Vx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t.ownerDocument.documentElement,i=Mf(t,n),s=Math.max(n.clientWidth,window.innerWidth||0),r=Math.max(n.clientHeight,window.innerHeight||0),a=e?0:xa(n),o=e?0:xa(n,"left"),l={top:a-i.top+i.marginTop,left:o-i.left+i.marginLeft,width:s,height:r};return Xs(l)}function Bv(t){var e=t.nodeName;if(e==="BODY"||e==="HTML")return!1;if(Lr(t,"position")==="fixed")return!0;var n=Tf(t);return n?Bv(n):!1}function Hv(t){if(!t||!t.parentElement||ka())return document.documentElement;for(var e=t.parentElement;e&&Lr(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function Af(t,e,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r={top:0,left:0},a=s?Hv(t):Ic(t,Uv(e));if(i==="viewport")r=Vx(a,s);else{var o=void 0;i==="scrollParent"?(o=tl(Tf(e)),o.nodeName==="BODY"&&(o=t.ownerDocument.documentElement)):i==="window"?o=t.ownerDocument.documentElement:o=i;var l=Mf(o,a,s);if(o.nodeName==="HTML"&&!Bv(a)){var c=zv(t.ownerDocument),u=c.height,d=c.width;r.top+=l.top-l.marginTop,r.bottom=u+l.top,r.left+=l.left-l.marginLeft,r.right=d+l.left}else r=l}n=n||0;var h=typeof n=="number";return r.left+=h?n:n.left||0,r.top+=h?n:n.top||0,r.right-=h?n:n.right||0,r.bottom-=h?n:n.bottom||0,r}function $x(t){var e=t.width,n=t.height;return e*n}function Vv(t,e,n,i,s){var r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(t.indexOf("auto")===-1)return t;var a=Af(n,i,r,s),o={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(o).map(function(h){return li({key:h},o[h],{area:$x(o[h])})}).sort(function(h,p){return p.area-h.area}),c=l.filter(function(h){var p=h.width,f=h.height;return p>=n.clientWidth&&f>=n.clientHeight}),u=c.length>0?c[0].key:l[0].key,d=t.split("-")[1];return u+(d?"-"+d:"")}function $v(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=i?Hv(e):Ic(e,Uv(n));return Mf(n,s,i)}function Gv(t){var e=t.ownerDocument.defaultView,n=e.getComputedStyle(t),i=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),s=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0),r={width:t.offsetWidth+s,height:t.offsetHeight+i};return r}function Dc(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(n){return e[n]})}function Wv(t,e,n){n=n.split("-")[0];var i=Gv(t),s={width:i.width,height:i.height},r=["right","left"].indexOf(n)!==-1,a=r?"top":"left",o=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return s[a]=e[a]+e[l]/2-i[l]/2,n===o?s[o]=e[o]-i[c]:s[o]=e[Dc(o)],s}function nl(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function Gx(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(s){return s[e]===n});var i=nl(t,function(s){return s[e]===n});return t.indexOf(i)}function jv(t,e,n){var i=n===void 0?t:t.slice(0,Gx(t,"name",n));return i.forEach(function(s){s.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=s.function||s.fn;s.enabled&&Fv(r)&&(e.offsets.popper=Xs(e.offsets.popper),e.offsets.reference=Xs(e.offsets.reference),e=r(e,s))}),e}function Wx(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=$v(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=Vv(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=Wv(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=jv(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function Xv(t,e){return t.some(function(n){var i=n.name,s=n.enabled;return s&&i===e})}function Cf(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var s=e[i],r=s?""+s+n:t;if(typeof document.body.style[r]<"u")return r}return null}function jx(){return this.state.isDestroyed=!0,Xv(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Cf("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function qv(t){var e=t.ownerDocument;return e?e.defaultView:window}function Yv(t,e,n,i){var s=t.nodeName==="BODY",r=s?t.ownerDocument.defaultView:t;r.addEventListener(e,n,{passive:!0}),s||Yv(tl(r.parentNode),e,n,i),i.push(r)}function Xx(t,e,n,i){n.updateBound=i,qv(t).addEventListener("resize",n.updateBound,{passive:!0});var s=tl(t);return Yv(s,"scroll",n.updateBound,n.scrollParents),n.scrollElement=s,n.eventsEnabled=!0,n}function qx(){this.state.eventsEnabled||(this.state=Xx(this.reference,this.options,this.state,this.scheduleUpdate))}function Yx(t,e){return qv(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(n){n.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function Kx(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Yx(this.reference,this.state))}function Pf(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(t)}function Xd(t,e){Object.keys(e).forEach(function(n){var i="";["width","height","top","right","bottom","left"].indexOf(n)!==-1&&Pf(e[n])&&(i="px"),t.style[n]=e[n]+i})}function Zx(t,e){Object.keys(e).forEach(function(n){var i=e[n];i!==!1?t.setAttribute(n,e[n]):t.removeAttribute(n)})}function Qx(t){return Xd(t.instance.popper,t.styles),Zx(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&Xd(t.arrowElement,t.arrowStyles),t}function Jx(t,e,n,i,s){var r=$v(s,e,t,n.positionFixed),a=Vv(n.placement,r,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),Xd(e,{position:n.positionFixed?"fixed":"absolute"}),n}function e1(t,e){var n=t.offsets,i=n.popper,s=n.reference,r=Math.round,a=Math.floor,o=function(g){return g},l=r(s.width),c=r(i.width),u=["left","right"].indexOf(t.placement)!==-1,d=t.placement.indexOf("-")!==-1,h=l%2===c%2,p=l%2===1&&c%2===1,f=e?u||d||h?r:a:o,m=e?r:o;return{left:f(p&&!d&&e?i.left-1:i.left),top:m(i.top),bottom:m(i.bottom),right:f(i.right)}}var t1=el&&/Firefox/i.test(navigator.userAgent);function n1(t,e){var n=e.x,i=e.y,s=t.offsets.popper,r=nl(t.instance.modifiers,function(b){return b.name==="applyStyle"}).gpuAcceleration;r!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=r!==void 0?r:e.gpuAcceleration,o=wa(t.instance.popper),l=jd(o),c={position:s.position},u=e1(t,window.devicePixelRatio<2||!t1),d=n==="bottom"?"top":"bottom",h=i==="right"?"left":"right",p=Cf("transform"),f=void 0,m=void 0;if(d==="bottom"?o.nodeName==="HTML"?m=-o.clientHeight+u.bottom:m=-l.height+u.bottom:m=u.top,h==="right"?o.nodeName==="HTML"?f=-o.clientWidth+u.right:f=-l.width+u.right:f=u.left,a&&p)c[p]="translate3d("+f+"px, "+m+"px, 0)",c[d]=0,c[h]=0,c.willChange="transform";else{var v=d==="bottom"?-1:1,g=h==="right"?-1:1;c[d]=m*v,c[h]=f*g,c.willChange=d+", "+h}var _={"x-placement":t.placement};return t.attributes=li({},_,t.attributes),t.styles=li({},c,t.styles),t.arrowStyles=li({},t.offsets.arrow,t.arrowStyles),t}function Kv(t,e,n){var i=nl(t,function(o){var l=o.name;return l===e}),s=!!i&&t.some(function(o){return o.name===n&&o.enabled&&o.order<i.order});if(!s){var r="`"+e+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return s}function i1(t,e){var n;if(!Kv(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if(typeof i=="string"){if(i=t.instance.popper.querySelector(i),!i)return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var s=t.placement.split("-")[0],r=t.offsets,a=r.popper,o=r.reference,l=["left","right"].indexOf(s)!==-1,c=l?"height":"width",u=l?"Top":"Left",d=u.toLowerCase(),h=l?"left":"top",p=l?"bottom":"right",f=Gv(i)[c];o[p]-f<a[d]&&(t.offsets.popper[d]-=a[d]-(o[p]-f)),o[d]+f>a[p]&&(t.offsets.popper[d]+=o[d]+f-a[p]),t.offsets.popper=Xs(t.offsets.popper);var m=o[d]+o[c]/2-f/2,v=Lr(t.instance.popper),g=parseFloat(v["margin"+u]),_=parseFloat(v["border"+u+"Width"]),b=m-t.offsets.popper[d]-g-_;return b=Math.max(Math.min(a[c]-f,b),0),t.arrowElement=i,t.offsets.arrow=(n={},Sa(n,d,Math.round(b)),Sa(n,h,""),n),t}function s1(t){return t==="end"?"start":t==="start"?"end":t}var Zv=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],$u=Zv.slice(3);function pm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=$u.indexOf(t),i=$u.slice(n+1).concat($u.slice(0,n));return e?i.reverse():i}var Gu={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function r1(t,e){if(Xv(t.instance.modifiers,"inner")||t.flipped&&t.placement===t.originalPlacement)return t;var n=Af(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),i=t.placement.split("-")[0],s=Dc(i),r=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case Gu.FLIP:a=[i,s];break;case Gu.CLOCKWISE:a=pm(i);break;case Gu.COUNTERCLOCKWISE:a=pm(i,!0);break;default:a=e.behavior}return a.forEach(function(o,l){if(i!==o||a.length===l+1)return t;i=t.placement.split("-")[0],s=Dc(i);var c=t.offsets.popper,u=t.offsets.reference,d=Math.floor,h=i==="left"&&d(c.right)>d(u.left)||i==="right"&&d(c.left)<d(u.right)||i==="top"&&d(c.bottom)>d(u.top)||i==="bottom"&&d(c.top)<d(u.bottom),p=d(c.left)<d(n.left),f=d(c.right)>d(n.right),m=d(c.top)<d(n.top),v=d(c.bottom)>d(n.bottom),g=i==="left"&&p||i==="right"&&f||i==="top"&&m||i==="bottom"&&v,_=["top","bottom"].indexOf(i)!==-1,b=!!e.flipVariations&&(_&&r==="start"&&p||_&&r==="end"&&f||!_&&r==="start"&&m||!_&&r==="end"&&v),y=!!e.flipVariationsByContent&&(_&&r==="start"&&f||_&&r==="end"&&p||!_&&r==="start"&&v||!_&&r==="end"&&m),T=b||y;(h||g||T)&&(t.flipped=!0,(h||g)&&(i=a[l+1]),T&&(r=s1(r)),t.placement=i+(r?"-"+r:""),t.offsets.popper=li({},t.offsets.popper,Wv(t.instance.popper,t.offsets.reference,t.placement)),t=jv(t.instance.modifiers,t,"flip"))}),t}function a1(t){var e=t.offsets,n=e.popper,i=e.reference,s=t.placement.split("-")[0],r=Math.floor,a=["top","bottom"].indexOf(s)!==-1,o=a?"right":"bottom",l=a?"left":"top",c=a?"width":"height";return n[o]<r(i[l])&&(t.offsets.popper[l]=r(i[l])-n[c]),n[l]>r(i[o])&&(t.offsets.popper[l]=r(i[o])),t}function o1(t,e,n,i){var s=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+s[1],a=s[2];if(!r)return t;if(a.indexOf("%")===0){var o=void 0;switch(a){case"%p":o=n;break;case"%":case"%r":default:o=i}var l=Xs(o);return l[e]/100*r}else if(a==="vh"||a==="vw"){var c=void 0;return a==="vh"?c=Math.max(document.documentElement.clientHeight,window.innerHeight||0):c=Math.max(document.documentElement.clientWidth,window.innerWidth||0),c/100*r}else return r}function l1(t,e,n,i){var s=[0,0],r=["right","left"].indexOf(i)!==-1,a=t.split(/(\+|\-)/).map(function(u){return u.trim()}),o=a.indexOf(nl(a,function(u){return u.search(/,|\s/)!==-1}));a[o]&&a[o].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=o!==-1?[a.slice(0,o).concat([a[o].split(l)[0]]),[a[o].split(l)[1]].concat(a.slice(o+1))]:[a];return c=c.map(function(u,d){var h=(d===1?!r:r)?"height":"width",p=!1;return u.reduce(function(f,m){return f[f.length-1]===""&&["+","-"].indexOf(m)!==-1?(f[f.length-1]=m,p=!0,f):p?(f[f.length-1]+=m,p=!1,f):f.concat(m)},[]).map(function(f){return o1(f,h,e,n)})}),c.forEach(function(u,d){u.forEach(function(h,p){Pf(h)&&(s[d]+=h*(u[p-1]==="-"?-1:1))})}),s}function c1(t,e){var n=e.offset,i=t.placement,s=t.offsets,r=s.popper,a=s.reference,o=i.split("-")[0],l=void 0;return Pf(+n)?l=[+n,0]:l=l1(n,r,a,o),o==="left"?(r.top+=l[0],r.left-=l[1]):o==="right"?(r.top+=l[0],r.left+=l[1]):o==="top"?(r.left+=l[0],r.top-=l[1]):o==="bottom"&&(r.left+=l[0],r.top+=l[1]),t.popper=r,t}function u1(t,e){var n=e.boundariesElement||wa(t.instance.popper);t.instance.reference===n&&(n=wa(n));var i=Cf("transform"),s=t.instance.popper.style,r=s.top,a=s.left,o=s[i];s.top="",s.left="",s[i]="";var l=Af(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);s.top=r,s.left=a,s[i]=o,e.boundaries=l;var c=e.priority,u=t.offsets.popper,d={primary:function(p){var f=u[p];return u[p]<l[p]&&!e.escapeWithReference&&(f=Math.max(u[p],l[p])),Sa({},p,f)},secondary:function(p){var f=p==="right"?"left":"top",m=u[f];return u[p]>l[p]&&!e.escapeWithReference&&(m=Math.min(u[f],l[p]-(p==="right"?u.width:u.height))),Sa({},f,m)}};return c.forEach(function(h){var p=["left","top"].indexOf(h)!==-1?"primary":"secondary";u=li({},u,d[p](h))}),t.offsets.popper=u,t}function d1(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var s=t.offsets,r=s.reference,a=s.popper,o=["bottom","top"].indexOf(n)!==-1,l=o?"left":"top",c=o?"width":"height",u={start:Sa({},l,r[l]),end:Sa({},l,r[l]+r[c]-a[c])};t.offsets.popper=li({},a,u[i])}return t}function h1(t){if(!Kv(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=nl(t.instance.modifiers,function(i){return i.name==="preventOverflow"}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(t.hide===!0)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(t.hide===!1)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}function f1(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,s=i.popper,r=i.reference,a=["left","right"].indexOf(n)!==-1,o=["top","left"].indexOf(n)===-1;return s[a?"left":"top"]=r[n]-(o?s[a?"width":"height"]:0),t.placement=Dc(e),t.offsets.popper=Xs(s),t}var p1={shift:{order:100,enabled:!0,fn:d1},offset:{order:200,enabled:!0,fn:c1,offset:0},preventOverflow:{order:300,enabled:!0,fn:u1,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:a1},arrow:{order:500,enabled:!0,fn:i1,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:r1,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:f1},hide:{order:800,enabled:!0,fn:h1},computeStyle:{order:850,enabled:!0,fn:n1,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Qx,onLoad:Jx,gpuAcceleration:void 0}},m1={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:p1},au=function(){function t(e,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Bx(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=Fx(this.update.bind(this)),this.options=li({},t.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(li({},t.Defaults.modifiers,s.modifiers)).forEach(function(a){i.options.modifiers[a]=li({},t.Defaults.modifiers[a]||{},s.modifiers?s.modifiers[a]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return li({name:a},i.options.modifiers[a])}).sort(function(a,o){return a.order-o.order}),this.modifiers.forEach(function(a){a.enabled&&Fv(a.onLoad)&&a.onLoad(i.reference,i.popper,i.options,a,i.state)}),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return Hx(t,[{key:"update",value:function(){return Wx.call(this)}},{key:"destroy",value:function(){return jx.call(this)}},{key:"enableEventListeners",value:function(){return qx.call(this)}},{key:"disableEventListeners",value:function(){return Kx.call(this)}}]),t}();au.Utils=(typeof window<"u"?window:global).PopperUtils;au.placements=Zv;au.Defaults=m1;const g1=Object.freeze(Object.defineProperty({__proto__:null,default:au},Symbol.toStringTag,{value:"Module"})),v1=Ix(g1);/*!
  * Bootstrap v4.6.2 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,i){i(e,Rc,v1)})(kv,function(n,i,s){function r(Ae){return Ae&&typeof Ae=="object"&&"default"in Ae?Ae:{default:Ae}}var a=r(i),o=r(s);function l(Ae,me){for(var ce=0;ce<me.length;ce++){var I=me[ce];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(Ae,I.key,I)}}function c(Ae,me,ce){return ce&&l(Ae,ce),Object.defineProperty(Ae,"prototype",{writable:!1}),Ae}function u(){return u=Object.assign?Object.assign.bind():function(Ae){for(var me=1;me<arguments.length;me++){var ce=arguments[me];for(var I in ce)Object.prototype.hasOwnProperty.call(ce,I)&&(Ae[I]=ce[I])}return Ae},u.apply(this,arguments)}function d(Ae,me){Ae.prototype=Object.create(me.prototype),Ae.prototype.constructor=Ae,h(Ae,me)}function h(Ae,me){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,Z){return I.__proto__=Z,I},h(Ae,me)}var p="transitionend",f=1e6,m=1e3;function v(Ae){return Ae===null||typeof Ae>"u"?""+Ae:{}.toString.call(Ae).match(/\s([a-z]+)/i)[1].toLowerCase()}function g(){return{bindType:p,delegateType:p,handle:function(me){if(a.default(me.target).is(this))return me.handleObj.handler.apply(this,arguments)}}}function _(Ae){var me=this,ce=!1;return a.default(this).one(y.TRANSITION_END,function(){ce=!0}),setTimeout(function(){ce||y.triggerTransitionEnd(me)},Ae),this}function b(){a.default.fn.emulateTransitionEnd=_,a.default.event.special[y.TRANSITION_END]=g()}var y={TRANSITION_END:"bsTransitionEnd",getUID:function(me){do me+=~~(Math.random()*f);while(document.getElementById(me));return me},getSelectorFromElement:function(me){var ce=me.getAttribute("data-target");if(!ce||ce==="#"){var I=me.getAttribute("href");ce=I&&I!=="#"?I.trim():""}try{return document.querySelector(ce)?ce:null}catch{return null}},getTransitionDurationFromElement:function(me){if(!me)return 0;var ce=a.default(me).css("transition-duration"),I=a.default(me).css("transition-delay"),Z=parseFloat(ce),ae=parseFloat(I);return!Z&&!ae?0:(ce=ce.split(",")[0],I=I.split(",")[0],(parseFloat(ce)+parseFloat(I))*m)},reflow:function(me){return me.offsetHeight},triggerTransitionEnd:function(me){a.default(me).trigger(p)},supportsTransitionEnd:function(){return!!p},isElement:function(me){return(me[0]||me).nodeType},typeCheckConfig:function(me,ce,I){for(var Z in I)if(Object.prototype.hasOwnProperty.call(I,Z)){var ae=I[Z],Re=ce[Z],Fe=Re&&y.isElement(Re)?"element":v(Re);if(!new RegExp(ae).test(Fe))throw new Error(me.toUpperCase()+": "+('Option "'+Z+'" provided type "'+Fe+'" ')+('but expected type "'+ae+'".'))}},findShadowRoot:function(me){if(!document.documentElement.attachShadow)return null;if(typeof me.getRootNode=="function"){var ce=me.getRootNode();return ce instanceof ShadowRoot?ce:null}return me instanceof ShadowRoot?me:me.parentNode?y.findShadowRoot(me.parentNode):null},jQueryDetection:function(){if(typeof a.default>"u")throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var me=a.default.fn.jquery.split(" ")[0].split("."),ce=1,I=2,Z=9,ae=1,Re=4;if(me[0]<I&&me[1]<Z||me[0]===ce&&me[1]===Z&&me[2]<ae||me[0]>=Re)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};y.jQueryDetection(),b();var T="alert",x="4.6.2",S="bs.alert",M="."+S,w=".data-api",E=a.default.fn[T],C="alert",P="fade",A="show",R="close"+M,N="closed"+M,U="click"+M+w,k='[data-dismiss="alert"]',D=function(){function Ae(ce){this._element=ce}var me=Ae.prototype;return me.close=function(I){var Z=this._element;I&&(Z=this._getRootElement(I));var ae=this._triggerCloseEvent(Z);ae.isDefaultPrevented()||this._removeElement(Z)},me.dispose=function(){a.default.removeData(this._element,S),this._element=null},me._getRootElement=function(I){var Z=y.getSelectorFromElement(I),ae=!1;return Z&&(ae=document.querySelector(Z)),ae||(ae=a.default(I).closest("."+C)[0]),ae},me._triggerCloseEvent=function(I){var Z=a.default.Event(R);return a.default(I).trigger(Z),Z},me._removeElement=function(I){var Z=this;if(a.default(I).removeClass(A),!a.default(I).hasClass(P)){this._destroyElement(I);return}var ae=y.getTransitionDurationFromElement(I);a.default(I).one(y.TRANSITION_END,function(Re){return Z._destroyElement(I,Re)}).emulateTransitionEnd(ae)},me._destroyElement=function(I){a.default(I).detach().trigger(N).remove()},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this),ae=Z.data(S);ae||(ae=new Ae(this),Z.data(S,ae)),I==="close"&&ae[I](this)})},Ae._handleDismiss=function(I){return function(Z){Z&&Z.preventDefault(),I.close(this)}},c(Ae,null,[{key:"VERSION",get:function(){return x}}]),Ae}();a.default(document).on(U,k,D._handleDismiss(new D)),a.default.fn[T]=D._jQueryInterface,a.default.fn[T].Constructor=D,a.default.fn[T].noConflict=function(){return a.default.fn[T]=E,D._jQueryInterface};var W="button",O="4.6.2",B="bs.button",V="."+B,j=".data-api",Y=a.default.fn[W],H="active",q="btn",K="focus",G="click"+V+j,te="focus"+V+j+" "+("blur"+V+j),ue="load"+V+j,se='[data-toggle^="button"]',X='[data-toggle="buttons"]',ne='[data-toggle="button"]',F='[data-toggle="buttons"] .btn',fe='input:not([type="hidden"])',ve=".active",pe=".btn",Me=function(){function Ae(ce){this._element=ce,this.shouldAvoidTriggerChange=!1}var me=Ae.prototype;return me.toggle=function(){var I=!0,Z=!0,ae=a.default(this._element).closest(X)[0];if(ae){var Re=this._element.querySelector(fe);if(Re){if(Re.type==="radio")if(Re.checked&&this._element.classList.contains(H))I=!1;else{var Fe=ae.querySelector(ve);Fe&&a.default(Fe).removeClass(H)}I&&((Re.type==="checkbox"||Re.type==="radio")&&(Re.checked=!this._element.classList.contains(H)),this.shouldAvoidTriggerChange||a.default(Re).trigger("change")),Re.focus(),Z=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(Z&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(H)),I&&a.default(this._element).toggleClass(H))},me.dispose=function(){a.default.removeData(this._element,B),this._element=null},Ae._jQueryInterface=function(I,Z){return this.each(function(){var ae=a.default(this),Re=ae.data(B);Re||(Re=new Ae(this),ae.data(B,Re)),Re.shouldAvoidTriggerChange=Z,I==="toggle"&&Re[I]()})},c(Ae,null,[{key:"VERSION",get:function(){return O}}]),Ae}();a.default(document).on(G,se,function(Ae){var me=Ae.target,ce=me;if(a.default(me).hasClass(q)||(me=a.default(me).closest(pe)[0]),!me||me.hasAttribute("disabled")||me.classList.contains("disabled"))Ae.preventDefault();else{var I=me.querySelector(fe);if(I&&(I.hasAttribute("disabled")||I.classList.contains("disabled"))){Ae.preventDefault();return}(ce.tagName==="INPUT"||me.tagName!=="LABEL")&&Me._jQueryInterface.call(a.default(me),"toggle",ce.tagName==="INPUT")}}).on(te,se,function(Ae){var me=a.default(Ae.target).closest(pe)[0];a.default(me).toggleClass(K,/^focus(in)?$/.test(Ae.type))}),a.default(window).on(ue,function(){for(var Ae=[].slice.call(document.querySelectorAll(F)),me=0,ce=Ae.length;me<ce;me++){var I=Ae[me],Z=I.querySelector(fe);Z.checked||Z.hasAttribute("checked")?I.classList.add(H):I.classList.remove(H)}Ae=[].slice.call(document.querySelectorAll(ne));for(var ae=0,Re=Ae.length;ae<Re;ae++){var Fe=Ae[ae];Fe.getAttribute("aria-pressed")==="true"?Fe.classList.add(H):Fe.classList.remove(H)}}),a.default.fn[W]=Me._jQueryInterface,a.default.fn[W].Constructor=Me,a.default.fn[W].noConflict=function(){return a.default.fn[W]=Y,Me._jQueryInterface};var Pe="carousel",Ce="4.6.2",z="bs.carousel",L="."+z,Q=".data-api",oe=a.default.fn[Pe],he=37,de=39,ee=500,ie=40,le="carousel",ye="active",Se="slide",_e="carousel-item-right",Te="carousel-item-left",ke="carousel-item-next",Ne="carousel-item-prev",Ge="pointer-event",Be="next",qe="prev",ge="left",Ue="right",xe="slide"+L,Le="slid"+L,ze="keydown"+L,He="mouseenter"+L,We="mouseleave"+L,tt="touchstart"+L,zt="touchmove"+L,_t="touchend"+L,En="pointerdown"+L,wn="pointerup"+L,ji="dragstart"+L,Xi="load"+L+Q,Un="click"+L+Q,sr=".active",Ri=".active.carousel-item",_l=".carousel-item",Ir=".carousel-item img",bl=".carousel-item-next, .carousel-item-prev",Dr=".carousel-indicators",El="[data-slide], [data-slide-to]",wl='[data-ride="carousel"]',$a={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Du={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},xl={TOUCH:"touch",PEN:"pen"},vs=function(){function Ae(ce,I){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(I),this._element=ce,this._indicatorsElement=this._element.querySelector(Dr),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=!!(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var me=Ae.prototype;return me.next=function(){this._isSliding||this._slide(Be)},me.nextWhenVisible=function(){var I=a.default(this._element);!document.hidden&&I.is(":visible")&&I.css("visibility")!=="hidden"&&this.next()},me.prev=function(){this._isSliding||this._slide(qe)},me.pause=function(I){I||(this._isPaused=!0),this._element.querySelector(bl)&&(y.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},me.cycle=function(I){I||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},me.to=function(I){var Z=this;this._activeElement=this._element.querySelector(Ri);var ae=this._getItemIndex(this._activeElement);if(!(I>this._items.length-1||I<0)){if(this._isSliding){a.default(this._element).one(Le,function(){return Z.to(I)});return}if(ae===I){this.pause(),this.cycle();return}var Re=I>ae?Be:qe;this._slide(Re,this._items[I])}},me.dispose=function(){a.default(this._element).off(L),a.default.removeData(this._element,z),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},me._getConfig=function(I){return I=u({},$a,I),y.typeCheckConfig(Pe,I,Du),I},me._handleSwipe=function(){var I=Math.abs(this.touchDeltaX);if(!(I<=ie)){var Z=I/this.touchDeltaX;this.touchDeltaX=0,Z>0&&this.prev(),Z<0&&this.next()}},me._addEventListeners=function(){var I=this;this._config.keyboard&&a.default(this._element).on(ze,function(Z){return I._keydown(Z)}),this._config.pause==="hover"&&a.default(this._element).on(He,function(Z){return I.pause(Z)}).on(We,function(Z){return I.cycle(Z)}),this._config.touch&&this._addTouchEventListeners()},me._addTouchEventListeners=function(){var I=this;if(this._touchSupported){var Z=function($e){I._pointerEvent&&xl[$e.originalEvent.pointerType.toUpperCase()]?I.touchStartX=$e.originalEvent.clientX:I._pointerEvent||(I.touchStartX=$e.originalEvent.touches[0].clientX)},ae=function($e){I.touchDeltaX=$e.originalEvent.touches&&$e.originalEvent.touches.length>1?0:$e.originalEvent.touches[0].clientX-I.touchStartX},Re=function($e){I._pointerEvent&&xl[$e.originalEvent.pointerType.toUpperCase()]&&(I.touchDeltaX=$e.originalEvent.clientX-I.touchStartX),I._handleSwipe(),I._config.pause==="hover"&&(I.pause(),I.touchTimeout&&clearTimeout(I.touchTimeout),I.touchTimeout=setTimeout(function(it){return I.cycle(it)},ee+I._config.interval))};a.default(this._element.querySelectorAll(Ir)).on(ji,function(Fe){return Fe.preventDefault()}),this._pointerEvent?(a.default(this._element).on(En,function(Fe){return Z(Fe)}),a.default(this._element).on(wn,function(Fe){return Re(Fe)}),this._element.classList.add(Ge)):(a.default(this._element).on(tt,function(Fe){return Z(Fe)}),a.default(this._element).on(zt,function(Fe){return ae(Fe)}),a.default(this._element).on(_t,function(Fe){return Re(Fe)}))}},me._keydown=function(I){if(!/input|textarea/i.test(I.target.tagName))switch(I.which){case he:I.preventDefault(),this.prev();break;case de:I.preventDefault(),this.next();break}},me._getItemIndex=function(I){return this._items=I&&I.parentNode?[].slice.call(I.parentNode.querySelectorAll(_l)):[],this._items.indexOf(I)},me._getItemByDirection=function(I,Z){var ae=I===Be,Re=I===qe,Fe=this._getItemIndex(Z),$e=this._items.length-1,it=Re&&Fe===0||ae&&Fe===$e;if(it&&!this._config.wrap)return Z;var xt=I===qe?-1:1,Mt=(Fe+xt)%this._items.length;return Mt===-1?this._items[this._items.length-1]:this._items[Mt]},me._triggerSlideEvent=function(I,Z){var ae=this._getItemIndex(I),Re=this._getItemIndex(this._element.querySelector(Ri)),Fe=a.default.Event(xe,{relatedTarget:I,direction:Z,from:Re,to:ae});return a.default(this._element).trigger(Fe),Fe},me._setActiveIndicatorElement=function(I){if(this._indicatorsElement){var Z=[].slice.call(this._indicatorsElement.querySelectorAll(sr));a.default(Z).removeClass(ye);var ae=this._indicatorsElement.children[this._getItemIndex(I)];ae&&a.default(ae).addClass(ye)}},me._updateInterval=function(){var I=this._activeElement||this._element.querySelector(Ri);if(I){var Z=parseInt(I.getAttribute("data-interval"),10);Z?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=Z):this._config.interval=this._config.defaultInterval||this._config.interval}},me._slide=function(I,Z){var ae=this,Re=this._element.querySelector(Ri),Fe=this._getItemIndex(Re),$e=Z||Re&&this._getItemByDirection(I,Re),it=this._getItemIndex($e),xt=!!this._interval,Mt,on,Ii;if(I===Be?(Mt=Te,on=ke,Ii=ge):(Mt=_e,on=Ne,Ii=Ue),$e&&a.default($e).hasClass(ye)){this._isSliding=!1;return}var mi=this._triggerSlideEvent($e,Ii);if(!mi.isDefaultPrevented()&&!(!Re||!$e)){this._isSliding=!0,xt&&this.pause(),this._setActiveIndicatorElement($e),this._activeElement=$e;var Ur=a.default.Event(Le,{relatedTarget:$e,direction:Ii,from:Fe,to:it});if(a.default(this._element).hasClass(Se)){a.default($e).addClass(on),y.reflow($e),a.default(Re).addClass(Mt),a.default($e).addClass(Mt);var Vu=y.getTransitionDurationFromElement(Re);a.default(Re).one(y.TRANSITION_END,function(){a.default($e).removeClass(Mt+" "+on).addClass(ye),a.default(Re).removeClass(ye+" "+on+" "+Mt),ae._isSliding=!1,setTimeout(function(){return a.default(ae._element).trigger(Ur)},0)}).emulateTransitionEnd(Vu)}else a.default(Re).removeClass(ye),a.default($e).addClass(ye),this._isSliding=!1,a.default(this._element).trigger(Ur);xt&&this.cycle()}},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this).data(z),ae=u({},$a,a.default(this).data());typeof I=="object"&&(ae=u({},ae,I));var Re=typeof I=="string"?I:ae.slide;if(Z||(Z=new Ae(this,ae),a.default(this).data(z,Z)),typeof I=="number")Z.to(I);else if(typeof Re=="string"){if(typeof Z[Re]>"u")throw new TypeError('No method named "'+Re+'"');Z[Re]()}else ae.interval&&ae.ride&&(Z.pause(),Z.cycle())})},Ae._dataApiClickHandler=function(I){var Z=y.getSelectorFromElement(this);if(Z){var ae=a.default(Z)[0];if(!(!ae||!a.default(ae).hasClass(le))){var Re=u({},a.default(ae).data(),a.default(this).data()),Fe=this.getAttribute("data-slide-to");Fe&&(Re.interval=!1),Ae._jQueryInterface.call(a.default(ae),Re),Fe&&a.default(ae).data(z).to(Fe),I.preventDefault()}}},c(Ae,null,[{key:"VERSION",get:function(){return Ce}},{key:"Default",get:function(){return $a}}]),Ae}();a.default(document).on(Un,El,vs._dataApiClickHandler),a.default(window).on(Xi,function(){for(var Ae=[].slice.call(document.querySelectorAll(wl)),me=0,ce=Ae.length;me<ce;me++){var I=a.default(Ae[me]);vs._jQueryInterface.call(I,I.data())}}),a.default.fn[Pe]=vs._jQueryInterface,a.default.fn[Pe].Constructor=vs,a.default.fn[Pe].noConflict=function(){return a.default.fn[Pe]=oe,vs._jQueryInterface};var ys="collapse",Ou="4.6.2",J="bs.collapse",be="."+J,De=".data-api",Oe=a.default.fn[ys],Ee="show",Ve="collapse",je="collapsing",Ze="collapsed",Je="width",ot="height",rt="show"+be,nt="shown"+be,gt="hide"+be,wt="hidden"+be,Gt="click"+be+De,Ht=".show, .collapsing",vt='[data-toggle="collapse"]',et={toggle:!0,parent:""},Zt={toggle:"boolean",parent:"(string|element)"},ft=function(){function Ae(ce,I){this._isTransitioning=!1,this._element=ce,this._config=this._getConfig(I),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+ce.id+'"],'+('[data-toggle="collapse"][data-target="#'+ce.id+'"]')));for(var Z=[].slice.call(document.querySelectorAll(vt)),ae=0,Re=Z.length;ae<Re;ae++){var Fe=Z[ae],$e=y.getSelectorFromElement(Fe),it=[].slice.call(document.querySelectorAll($e)).filter(function(xt){return xt===ce});$e!==null&&it.length>0&&(this._selector=$e,this._triggerArray.push(Fe))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var me=Ae.prototype;return me.toggle=function(){a.default(this._element).hasClass(Ee)?this.hide():this.show()},me.show=function(){var I=this;if(!(this._isTransitioning||a.default(this._element).hasClass(Ee))){var Z,ae;if(this._parent&&(Z=[].slice.call(this._parent.querySelectorAll(Ht)).filter(function(on){return typeof I._config.parent=="string"?on.getAttribute("data-parent")===I._config.parent:on.classList.contains(Ve)}),Z.length===0&&(Z=null)),!(Z&&(ae=a.default(Z).not(this._selector).data(J),ae&&ae._isTransitioning))){var Re=a.default.Event(rt);if(a.default(this._element).trigger(Re),!Re.isDefaultPrevented()){Z&&(Ae._jQueryInterface.call(a.default(Z).not(this._selector),"hide"),ae||a.default(Z).data(J,null));var Fe=this._getDimension();a.default(this._element).removeClass(Ve).addClass(je),this._element.style[Fe]=0,this._triggerArray.length&&a.default(this._triggerArray).removeClass(Ze).attr("aria-expanded",!0),this.setTransitioning(!0);var $e=function(){a.default(I._element).removeClass(je).addClass(Ve+" "+Ee),I._element.style[Fe]="",I.setTransitioning(!1),a.default(I._element).trigger(nt)},it=Fe[0].toUpperCase()+Fe.slice(1),xt="scroll"+it,Mt=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,$e).emulateTransitionEnd(Mt),this._element.style[Fe]=this._element[xt]+"px"}}}},me.hide=function(){var I=this;if(!(this._isTransitioning||!a.default(this._element).hasClass(Ee))){var Z=a.default.Event(gt);if(a.default(this._element).trigger(Z),!Z.isDefaultPrevented()){var ae=this._getDimension();this._element.style[ae]=this._element.getBoundingClientRect()[ae]+"px",y.reflow(this._element),a.default(this._element).addClass(je).removeClass(Ve+" "+Ee);var Re=this._triggerArray.length;if(Re>0)for(var Fe=0;Fe<Re;Fe++){var $e=this._triggerArray[Fe],it=y.getSelectorFromElement($e);if(it!==null){var xt=a.default([].slice.call(document.querySelectorAll(it)));xt.hasClass(Ee)||a.default($e).addClass(Ze).attr("aria-expanded",!1)}}this.setTransitioning(!0);var Mt=function(){I.setTransitioning(!1),a.default(I._element).removeClass(je).addClass(Ve).trigger(wt)};this._element.style[ae]="";var on=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,Mt).emulateTransitionEnd(on)}}},me.setTransitioning=function(I){this._isTransitioning=I},me.dispose=function(){a.default.removeData(this._element,J),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},me._getConfig=function(I){return I=u({},et,I),I.toggle=!!I.toggle,y.typeCheckConfig(ys,I,Zt),I},me._getDimension=function(){var I=a.default(this._element).hasClass(Je);return I?Je:ot},me._getParent=function(){var I=this,Z;y.isElement(this._config.parent)?(Z=this._config.parent,typeof this._config.parent.jquery<"u"&&(Z=this._config.parent[0])):Z=document.querySelector(this._config.parent);var ae='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',Re=[].slice.call(Z.querySelectorAll(ae));return a.default(Re).each(function(Fe,$e){I._addAriaAndCollapsedClass(Ae._getTargetFromElement($e),[$e])}),Z},me._addAriaAndCollapsedClass=function(I,Z){var ae=a.default(I).hasClass(Ee);Z.length&&a.default(Z).toggleClass(Ze,!ae).attr("aria-expanded",ae)},Ae._getTargetFromElement=function(I){var Z=y.getSelectorFromElement(I);return Z?document.querySelector(Z):null},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this),ae=Z.data(J),Re=u({},et,Z.data(),typeof I=="object"&&I?I:{});if(!ae&&Re.toggle&&typeof I=="string"&&/show|hide/.test(I)&&(Re.toggle=!1),ae||(ae=new Ae(this,Re),Z.data(J,ae)),typeof I=="string"){if(typeof ae[I]>"u")throw new TypeError('No method named "'+I+'"');ae[I]()}})},c(Ae,null,[{key:"VERSION",get:function(){return Ou}},{key:"Default",get:function(){return et}}]),Ae}();a.default(document).on(Gt,vt,function(Ae){Ae.currentTarget.tagName==="A"&&Ae.preventDefault();var me=a.default(this),ce=y.getSelectorFromElement(this),I=[].slice.call(document.querySelectorAll(ce));a.default(I).each(function(){var Z=a.default(this),ae=Z.data(J),Re=ae?"toggle":me.data();ft._jQueryInterface.call(Z,Re)})}),a.default.fn[ys]=ft._jQueryInterface,a.default.fn[ys].Constructor=ft,a.default.fn[ys].noConflict=function(){return a.default.fn[ys]=Oe,ft._jQueryInterface};var sn="dropdown",_s="4.6.2",Qt="bs.dropdown",An="."+Qt,Rt=".data-api",zn=a.default.fn[sn],rn=27,an=32,vn=9,rr=38,di=40,NE=3,FE=new RegExp(rr+"|"+di+"|"+rn),Sl="disabled",hi="show",UE="dropup",zE="dropright",BE="dropleft",Dp="dropdown-menu-right",HE="position-static",Op="hide"+An,kp="hidden"+An,VE="show"+An,$E="shown"+An,GE="click"+An,ku="click"+An+Rt,Np="keydown"+An+Rt,WE="keyup"+An+Rt,Tl='[data-toggle="dropdown"]',jE=".dropdown form",Nu=".dropdown-menu",XE=".navbar-nav",qE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",YE="top-start",KE="top-end",ZE="bottom-start",QE="bottom-end",JE="right-start",ew="left-start",tw={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},nw={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},bs=function(){function Ae(ce,I){this._element=ce,this._popper=null,this._config=this._getConfig(I),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var me=Ae.prototype;return me.toggle=function(){if(!(this._element.disabled||a.default(this._element).hasClass(Sl))){var I=a.default(this._menu).hasClass(hi);Ae._clearMenus(),!I&&this.show(!0)}},me.show=function(I){if(I===void 0&&(I=!1),!(this._element.disabled||a.default(this._element).hasClass(Sl)||a.default(this._menu).hasClass(hi))){var Z={relatedTarget:this._element},ae=a.default.Event(VE,Z),Re=Ae._getParentFromElement(this._element);if(a.default(Re).trigger(ae),!ae.isDefaultPrevented()){if(!this._inNavbar&&I){if(typeof o.default>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var Fe=this._element;this._config.reference==="parent"?Fe=Re:y.isElement(this._config.reference)&&(Fe=this._config.reference,typeof this._config.reference.jquery<"u"&&(Fe=this._config.reference[0])),this._config.boundary!=="scrollParent"&&a.default(Re).addClass(HE),this._popper=new o.default(Fe,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&a.default(Re).closest(XE).length===0&&a.default(document.body).children().on("mouseover",null,a.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),a.default(this._menu).toggleClass(hi),a.default(Re).toggleClass(hi).trigger(a.default.Event($E,Z))}}},me.hide=function(){if(!(this._element.disabled||a.default(this._element).hasClass(Sl)||!a.default(this._menu).hasClass(hi))){var I={relatedTarget:this._element},Z=a.default.Event(Op,I),ae=Ae._getParentFromElement(this._element);a.default(ae).trigger(Z),!Z.isDefaultPrevented()&&(this._popper&&this._popper.destroy(),a.default(this._menu).toggleClass(hi),a.default(ae).toggleClass(hi).trigger(a.default.Event(kp,I)))}},me.dispose=function(){a.default.removeData(this._element,Qt),a.default(this._element).off(An),this._element=null,this._menu=null,this._popper!==null&&(this._popper.destroy(),this._popper=null)},me.update=function(){this._inNavbar=this._detectNavbar(),this._popper!==null&&this._popper.scheduleUpdate()},me._addEventListeners=function(){var I=this;a.default(this._element).on(GE,function(Z){Z.preventDefault(),Z.stopPropagation(),I.toggle()})},me._getConfig=function(I){return I=u({},this.constructor.Default,a.default(this._element).data(),I),y.typeCheckConfig(sn,I,this.constructor.DefaultType),I},me._getMenuElement=function(){if(!this._menu){var I=Ae._getParentFromElement(this._element);I&&(this._menu=I.querySelector(Nu))}return this._menu},me._getPlacement=function(){var I=a.default(this._element.parentNode),Z=ZE;return I.hasClass(UE)?Z=a.default(this._menu).hasClass(Dp)?KE:YE:I.hasClass(zE)?Z=JE:I.hasClass(BE)?Z=ew:a.default(this._menu).hasClass(Dp)&&(Z=QE),Z},me._detectNavbar=function(){return a.default(this._element).closest(".navbar").length>0},me._getOffset=function(){var I=this,Z={};return typeof this._config.offset=="function"?Z.fn=function(ae){return ae.offsets=u({},ae.offsets,I._config.offset(ae.offsets,I._element)),ae}:Z.offset=this._config.offset,Z},me._getPopperConfig=function(){var I={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return this._config.display==="static"&&(I.modifiers.applyStyle={enabled:!1}),u({},I,this._config.popperConfig)},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this).data(Qt),ae=typeof I=="object"?I:null;if(Z||(Z=new Ae(this,ae),a.default(this).data(Qt,Z)),typeof I=="string"){if(typeof Z[I]>"u")throw new TypeError('No method named "'+I+'"');Z[I]()}})},Ae._clearMenus=function(I){if(!(I&&(I.which===NE||I.type==="keyup"&&I.which!==vn)))for(var Z=[].slice.call(document.querySelectorAll(Tl)),ae=0,Re=Z.length;ae<Re;ae++){var Fe=Ae._getParentFromElement(Z[ae]),$e=a.default(Z[ae]).data(Qt),it={relatedTarget:Z[ae]};if(I&&I.type==="click"&&(it.clickEvent=I),!!$e){var xt=$e._menu;if(a.default(Fe).hasClass(hi)&&!(I&&(I.type==="click"&&/input|textarea/i.test(I.target.tagName)||I.type==="keyup"&&I.which===vn)&&a.default.contains(Fe,I.target))){var Mt=a.default.Event(Op,it);a.default(Fe).trigger(Mt),!Mt.isDefaultPrevented()&&("ontouchstart"in document.documentElement&&a.default(document.body).children().off("mouseover",null,a.default.noop),Z[ae].setAttribute("aria-expanded","false"),$e._popper&&$e._popper.destroy(),a.default(xt).removeClass(hi),a.default(Fe).removeClass(hi).trigger(a.default.Event(kp,it)))}}}},Ae._getParentFromElement=function(I){var Z,ae=y.getSelectorFromElement(I);return ae&&(Z=document.querySelector(ae)),Z||I.parentNode},Ae._dataApiKeydownHandler=function(I){if(!(/input|textarea/i.test(I.target.tagName)?I.which===an||I.which!==rn&&(I.which!==di&&I.which!==rr||a.default(I.target).closest(Nu).length):!FE.test(I.which))&&!(this.disabled||a.default(this).hasClass(Sl))){var Z=Ae._getParentFromElement(this),ae=a.default(Z).hasClass(hi);if(!(!ae&&I.which===rn)){if(I.preventDefault(),I.stopPropagation(),!ae||I.which===rn||I.which===an){I.which===rn&&a.default(Z.querySelector(Tl)).trigger("focus"),a.default(this).trigger("click");return}var Re=[].slice.call(Z.querySelectorAll(qE)).filter(function($e){return a.default($e).is(":visible")});if(Re.length!==0){var Fe=Re.indexOf(I.target);I.which===rr&&Fe>0&&Fe--,I.which===di&&Fe<Re.length-1&&Fe++,Fe<0&&(Fe=0),Re[Fe].focus()}}}},c(Ae,null,[{key:"VERSION",get:function(){return _s}},{key:"Default",get:function(){return tw}},{key:"DefaultType",get:function(){return nw}}]),Ae}();a.default(document).on(Np,Tl,bs._dataApiKeydownHandler).on(Np,Nu,bs._dataApiKeydownHandler).on(ku+" "+WE,bs._clearMenus).on(ku,Tl,function(Ae){Ae.preventDefault(),Ae.stopPropagation(),bs._jQueryInterface.call(a.default(this),"toggle")}).on(ku,jE,function(Ae){Ae.stopPropagation()}),a.default.fn[sn]=bs._jQueryInterface,a.default.fn[sn].Constructor=bs,a.default.fn[sn].noConflict=function(){return a.default.fn[sn]=zn,bs._jQueryInterface};var Or="modal",iw="4.6.2",Ga="bs.modal",Gn="."+Ga,sw=".data-api",rw=a.default.fn[Or],Fp=27,aw="modal-dialog-scrollable",ow="modal-scrollbar-measure",lw="modal-backdrop",Up="modal-open",kr="fade",Ml="show",zp="modal-static",cw="hide"+Gn,uw="hidePrevented"+Gn,Bp="hidden"+Gn,Hp="show"+Gn,dw="shown"+Gn,Al="focusin"+Gn,Vp="resize"+Gn,Fu="click.dismiss"+Gn,$p="keydown.dismiss"+Gn,hw="mouseup.dismiss"+Gn,Gp="mousedown.dismiss"+Gn,fw="click"+Gn+sw,pw=".modal-dialog",mw=".modal-body",gw='[data-toggle="modal"]',vw='[data-dismiss="modal"]',Wp=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",jp=".sticky-top",Uu={backdrop:!0,keyboard:!0,focus:!0,show:!0},yw={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Wa=function(){function Ae(ce,I){this._config=this._getConfig(I),this._element=ce,this._dialog=ce.querySelector(pw),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var me=Ae.prototype;return me.toggle=function(I){return this._isShown?this.hide():this.show(I)},me.show=function(I){var Z=this;if(!(this._isShown||this._isTransitioning)){var ae=a.default.Event(Hp,{relatedTarget:I});a.default(this._element).trigger(ae),!ae.isDefaultPrevented()&&(this._isShown=!0,a.default(this._element).hasClass(kr)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),a.default(this._element).on(Fu,vw,function(Re){return Z.hide(Re)}),a.default(this._dialog).on(Gp,function(){a.default(Z._element).one(hw,function(Re){a.default(Re.target).is(Z._element)&&(Z._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return Z._showElement(I)}))}},me.hide=function(I){var Z=this;if(I&&I.preventDefault(),!(!this._isShown||this._isTransitioning)){var ae=a.default.Event(cw);if(a.default(this._element).trigger(ae),!(!this._isShown||ae.isDefaultPrevented())){this._isShown=!1;var Re=a.default(this._element).hasClass(kr);if(Re&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),a.default(document).off(Al),a.default(this._element).removeClass(Ml),a.default(this._element).off(Fu),a.default(this._dialog).off(Gp),Re){var Fe=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,function($e){return Z._hideModal($e)}).emulateTransitionEnd(Fe)}else this._hideModal()}}},me.dispose=function(){[window,this._element,this._dialog].forEach(function(I){return a.default(I).off(Gn)}),a.default(document).off(Al),a.default.removeData(this._element,Ga),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},me.handleUpdate=function(){this._adjustDialog()},me._getConfig=function(I){return I=u({},Uu,I),y.typeCheckConfig(Or,I,yw),I},me._triggerBackdropTransition=function(){var I=this,Z=a.default.Event(uw);if(a.default(this._element).trigger(Z),!Z.isDefaultPrevented()){var ae=this._element.scrollHeight>document.documentElement.clientHeight;ae||(this._element.style.overflowY="hidden"),this._element.classList.add(zp);var Re=y.getTransitionDurationFromElement(this._dialog);a.default(this._element).off(y.TRANSITION_END),a.default(this._element).one(y.TRANSITION_END,function(){I._element.classList.remove(zp),ae||a.default(I._element).one(y.TRANSITION_END,function(){I._element.style.overflowY=""}).emulateTransitionEnd(I._element,Re)}).emulateTransitionEnd(Re),this._element.focus()}},me._showElement=function(I){var Z=this,ae=a.default(this._element).hasClass(kr),Re=this._dialog?this._dialog.querySelector(mw):null;(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),a.default(this._dialog).hasClass(aw)&&Re?Re.scrollTop=0:this._element.scrollTop=0,ae&&y.reflow(this._element),a.default(this._element).addClass(Ml),this._config.focus&&this._enforceFocus();var Fe=a.default.Event(dw,{relatedTarget:I}),$e=function(){Z._config.focus&&Z._element.focus(),Z._isTransitioning=!1,a.default(Z._element).trigger(Fe)};if(ae){var it=y.getTransitionDurationFromElement(this._dialog);a.default(this._dialog).one(y.TRANSITION_END,$e).emulateTransitionEnd(it)}else $e()},me._enforceFocus=function(){var I=this;a.default(document).off(Al).on(Al,function(Z){document!==Z.target&&I._element!==Z.target&&a.default(I._element).has(Z.target).length===0&&I._element.focus()})},me._setEscapeEvent=function(){var I=this;this._isShown?a.default(this._element).on($p,function(Z){I._config.keyboard&&Z.which===Fp?(Z.preventDefault(),I.hide()):!I._config.keyboard&&Z.which===Fp&&I._triggerBackdropTransition()}):this._isShown||a.default(this._element).off($p)},me._setResizeEvent=function(){var I=this;this._isShown?a.default(window).on(Vp,function(Z){return I.handleUpdate(Z)}):a.default(window).off(Vp)},me._hideModal=function(){var I=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){a.default(document.body).removeClass(Up),I._resetAdjustments(),I._resetScrollbar(),a.default(I._element).trigger(Bp)})},me._removeBackdrop=function(){this._backdrop&&(a.default(this._backdrop).remove(),this._backdrop=null)},me._showBackdrop=function(I){var Z=this,ae=a.default(this._element).hasClass(kr)?kr:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=lw,ae&&this._backdrop.classList.add(ae),a.default(this._backdrop).appendTo(document.body),a.default(this._element).on(Fu,function(it){if(Z._ignoreBackdropClick){Z._ignoreBackdropClick=!1;return}it.target===it.currentTarget&&(Z._config.backdrop==="static"?Z._triggerBackdropTransition():Z.hide())}),ae&&y.reflow(this._backdrop),a.default(this._backdrop).addClass(Ml),!I)return;if(!ae){I();return}var Re=y.getTransitionDurationFromElement(this._backdrop);a.default(this._backdrop).one(y.TRANSITION_END,I).emulateTransitionEnd(Re)}else if(!this._isShown&&this._backdrop){a.default(this._backdrop).removeClass(Ml);var Fe=function(){Z._removeBackdrop(),I&&I()};if(a.default(this._element).hasClass(kr)){var $e=y.getTransitionDurationFromElement(this._backdrop);a.default(this._backdrop).one(y.TRANSITION_END,Fe).emulateTransitionEnd($e)}else Fe()}else I&&I()},me._adjustDialog=function(){var I=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&I&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!I&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},me._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},me._checkScrollbar=function(){var I=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(I.left+I.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},me._setScrollbar=function(){var I=this;if(this._isBodyOverflowing){var Z=[].slice.call(document.querySelectorAll(Wp)),ae=[].slice.call(document.querySelectorAll(jp));a.default(Z).each(function($e,it){var xt=it.style.paddingRight,Mt=a.default(it).css("padding-right");a.default(it).data("padding-right",xt).css("padding-right",parseFloat(Mt)+I._scrollbarWidth+"px")}),a.default(ae).each(function($e,it){var xt=it.style.marginRight,Mt=a.default(it).css("margin-right");a.default(it).data("margin-right",xt).css("margin-right",parseFloat(Mt)-I._scrollbarWidth+"px")});var Re=document.body.style.paddingRight,Fe=a.default(document.body).css("padding-right");a.default(document.body).data("padding-right",Re).css("padding-right",parseFloat(Fe)+this._scrollbarWidth+"px")}a.default(document.body).addClass(Up)},me._resetScrollbar=function(){var I=[].slice.call(document.querySelectorAll(Wp));a.default(I).each(function(Re,Fe){var $e=a.default(Fe).data("padding-right");a.default(Fe).removeData("padding-right"),Fe.style.paddingRight=$e||""});var Z=[].slice.call(document.querySelectorAll(""+jp));a.default(Z).each(function(Re,Fe){var $e=a.default(Fe).data("margin-right");typeof $e<"u"&&a.default(Fe).css("margin-right",$e).removeData("margin-right")});var ae=a.default(document.body).data("padding-right");a.default(document.body).removeData("padding-right"),document.body.style.paddingRight=ae||""},me._getScrollbarWidth=function(){var I=document.createElement("div");I.className=ow,document.body.appendChild(I);var Z=I.getBoundingClientRect().width-I.clientWidth;return document.body.removeChild(I),Z},Ae._jQueryInterface=function(I,Z){return this.each(function(){var ae=a.default(this).data(Ga),Re=u({},Uu,a.default(this).data(),typeof I=="object"&&I?I:{});if(ae||(ae=new Ae(this,Re),a.default(this).data(Ga,ae)),typeof I=="string"){if(typeof ae[I]>"u")throw new TypeError('No method named "'+I+'"');ae[I](Z)}else Re.show&&ae.show(Z)})},c(Ae,null,[{key:"VERSION",get:function(){return iw}},{key:"Default",get:function(){return Uu}}]),Ae}();a.default(document).on(fw,gw,function(Ae){var me=this,ce,I=y.getSelectorFromElement(this);I&&(ce=document.querySelector(I));var Z=a.default(ce).data(Ga)?"toggle":u({},a.default(ce).data(),a.default(this).data());(this.tagName==="A"||this.tagName==="AREA")&&Ae.preventDefault();var ae=a.default(ce).one(Hp,function(Re){Re.isDefaultPrevented()||ae.one(Bp,function(){a.default(me).is(":visible")&&me.focus()})});Wa._jQueryInterface.call(a.default(ce),Z,this)}),a.default.fn[Or]=Wa._jQueryInterface,a.default.fn[Or].Constructor=Wa,a.default.fn[Or].noConflict=function(){return a.default.fn[Or]=rw,Wa._jQueryInterface};var _w=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],bw=/^aria-[\w-]*$/i,Ew={"*":["class","dir","id","lang","role",bw],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ww=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,xw=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function Sw(Ae,me){var ce=Ae.nodeName.toLowerCase();if(me.indexOf(ce)!==-1)return _w.indexOf(ce)!==-1?!!(ww.test(Ae.nodeValue)||xw.test(Ae.nodeValue)):!0;for(var I=me.filter(function(Re){return Re instanceof RegExp}),Z=0,ae=I.length;Z<ae;Z++)if(I[Z].test(ce))return!0;return!1}function Xp(Ae,me,ce){if(Ae.length===0)return Ae;if(ce&&typeof ce=="function")return ce(Ae);for(var I=new window.DOMParser,Z=I.parseFromString(Ae,"text/html"),ae=Object.keys(me),Re=[].slice.call(Z.body.querySelectorAll("*")),Fe=function(on,Ii){var mi=Re[on],Ur=mi.nodeName.toLowerCase();if(ae.indexOf(mi.nodeName.toLowerCase())===-1)return mi.parentNode.removeChild(mi),"continue";var Vu=[].slice.call(mi.attributes),Rx=[].concat(me["*"]||[],me[Ur]||[]);Vu.forEach(function(lm){Sw(lm,Rx)||mi.removeAttribute(lm.nodeName)})},$e=0,it=Re.length;$e<it;$e++)var xt=Fe($e);return Z.body.innerHTML}var ar="tooltip",Tw="4.6.2",Cl="bs.tooltip",fi="."+Cl,Mw=a.default.fn[ar],qp="bs-tooltip",Aw=new RegExp("(^|\\s)"+qp+"\\S+","g"),Cw=["sanitize","whiteList","sanitizeFn"],ja="fade",Xa="show",qa="show",zu="out",Pw=".tooltip-inner",Lw=".arrow",Ya="hover",Bu="focus",Rw="click",Iw="manual",Dw={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Ow={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:Ew,popperConfig:null},kw={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Nw={HIDE:"hide"+fi,HIDDEN:"hidden"+fi,SHOW:"show"+fi,SHOWN:"shown"+fi,INSERTED:"inserted"+fi,CLICK:"click"+fi,FOCUSIN:"focusin"+fi,FOCUSOUT:"focusout"+fi,MOUSEENTER:"mouseenter"+fi,MOUSELEAVE:"mouseleave"+fi},or=function(){function Ae(ce,I){if(typeof o.default>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=ce,this.config=this._getConfig(I),this.tip=null,this._setListeners()}var me=Ae.prototype;return me.enable=function(){this._isEnabled=!0},me.disable=function(){this._isEnabled=!1},me.toggleEnabled=function(){this._isEnabled=!this._isEnabled},me.toggle=function(I){if(this._isEnabled)if(I){var Z=this.constructor.DATA_KEY,ae=a.default(I.currentTarget).data(Z);ae||(ae=new this.constructor(I.currentTarget,this._getDelegateConfig()),a.default(I.currentTarget).data(Z,ae)),ae._activeTrigger.click=!ae._activeTrigger.click,ae._isWithActiveTrigger()?ae._enter(null,ae):ae._leave(null,ae)}else{if(a.default(this.getTipElement()).hasClass(Xa)){this._leave(null,this);return}this._enter(null,this)}},me.dispose=function(){clearTimeout(this._timeout),a.default.removeData(this.element,this.constructor.DATA_KEY),a.default(this.element).off(this.constructor.EVENT_KEY),a.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&a.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},me.show=function(){var I=this;if(a.default(this.element).css("display")==="none")throw new Error("Please use show on visible elements");var Z=a.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){a.default(this.element).trigger(Z);var ae=y.findShadowRoot(this.element),Re=a.default.contains(ae!==null?ae:this.element.ownerDocument.documentElement,this.element);if(Z.isDefaultPrevented()||!Re)return;var Fe=this.getTipElement(),$e=y.getUID(this.constructor.NAME);Fe.setAttribute("id",$e),this.element.setAttribute("aria-describedby",$e),this.setContent(),this.config.animation&&a.default(Fe).addClass(ja);var it=typeof this.config.placement=="function"?this.config.placement.call(this,Fe,this.element):this.config.placement,xt=this._getAttachment(it);this.addAttachmentClass(xt);var Mt=this._getContainer();a.default(Fe).data(this.constructor.DATA_KEY,this),a.default.contains(this.element.ownerDocument.documentElement,this.tip)||a.default(Fe).appendTo(Mt),a.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new o.default(this.element,Fe,this._getPopperConfig(xt)),a.default(Fe).addClass(Xa),a.default(Fe).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&a.default(document.body).children().on("mouseover",null,a.default.noop);var on=function(){I.config.animation&&I._fixTransition();var Ur=I._hoverState;I._hoverState=null,a.default(I.element).trigger(I.constructor.Event.SHOWN),Ur===zu&&I._leave(null,I)};if(a.default(this.tip).hasClass(ja)){var Ii=y.getTransitionDurationFromElement(this.tip);a.default(this.tip).one(y.TRANSITION_END,on).emulateTransitionEnd(Ii)}else on()}},me.hide=function(I){var Z=this,ae=this.getTipElement(),Re=a.default.Event(this.constructor.Event.HIDE),Fe=function(){Z._hoverState!==qa&&ae.parentNode&&ae.parentNode.removeChild(ae),Z._cleanTipClass(),Z.element.removeAttribute("aria-describedby"),a.default(Z.element).trigger(Z.constructor.Event.HIDDEN),Z._popper!==null&&Z._popper.destroy(),I&&I()};if(a.default(this.element).trigger(Re),!Re.isDefaultPrevented()){if(a.default(ae).removeClass(Xa),"ontouchstart"in document.documentElement&&a.default(document.body).children().off("mouseover",null,a.default.noop),this._activeTrigger[Rw]=!1,this._activeTrigger[Bu]=!1,this._activeTrigger[Ya]=!1,a.default(this.tip).hasClass(ja)){var $e=y.getTransitionDurationFromElement(ae);a.default(ae).one(y.TRANSITION_END,Fe).emulateTransitionEnd($e)}else Fe();this._hoverState=""}},me.update=function(){this._popper!==null&&this._popper.scheduleUpdate()},me.isWithContent=function(){return!!this.getTitle()},me.addAttachmentClass=function(I){a.default(this.getTipElement()).addClass(qp+"-"+I)},me.getTipElement=function(){return this.tip=this.tip||a.default(this.config.template)[0],this.tip},me.setContent=function(){var I=this.getTipElement();this.setElementContent(a.default(I.querySelectorAll(Pw)),this.getTitle()),a.default(I).removeClass(ja+" "+Xa)},me.setElementContent=function(I,Z){if(typeof Z=="object"&&(Z.nodeType||Z.jquery)){this.config.html?a.default(Z).parent().is(I)||I.empty().append(Z):I.text(a.default(Z).text());return}this.config.html?(this.config.sanitize&&(Z=Xp(Z,this.config.whiteList,this.config.sanitizeFn)),I.html(Z)):I.text(Z)},me.getTitle=function(){var I=this.element.getAttribute("data-original-title");return I||(I=typeof this.config.title=="function"?this.config.title.call(this.element):this.config.title),I},me._getPopperConfig=function(I){var Z=this,ae={placement:I,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:Lw},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(Fe){Fe.originalPlacement!==Fe.placement&&Z._handlePopperPlacementChange(Fe)},onUpdate:function(Fe){return Z._handlePopperPlacementChange(Fe)}};return u({},ae,this.config.popperConfig)},me._getOffset=function(){var I=this,Z={};return typeof this.config.offset=="function"?Z.fn=function(ae){return ae.offsets=u({},ae.offsets,I.config.offset(ae.offsets,I.element)),ae}:Z.offset=this.config.offset,Z},me._getContainer=function(){return this.config.container===!1?document.body:y.isElement(this.config.container)?a.default(this.config.container):a.default(document).find(this.config.container)},me._getAttachment=function(I){return Dw[I.toUpperCase()]},me._setListeners=function(){var I=this,Z=this.config.trigger.split(" ");Z.forEach(function(ae){if(ae==="click")a.default(I.element).on(I.constructor.Event.CLICK,I.config.selector,function($e){return I.toggle($e)});else if(ae!==Iw){var Re=ae===Ya?I.constructor.Event.MOUSEENTER:I.constructor.Event.FOCUSIN,Fe=ae===Ya?I.constructor.Event.MOUSELEAVE:I.constructor.Event.FOCUSOUT;a.default(I.element).on(Re,I.config.selector,function($e){return I._enter($e)}).on(Fe,I.config.selector,function($e){return I._leave($e)})}}),this._hideModalHandler=function(){I.element&&I.hide()},a.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=u({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},me._fixTitle=function(){var I=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||I!=="string")&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},me._enter=function(I,Z){var ae=this.constructor.DATA_KEY;if(Z=Z||a.default(I.currentTarget).data(ae),Z||(Z=new this.constructor(I.currentTarget,this._getDelegateConfig()),a.default(I.currentTarget).data(ae,Z)),I&&(Z._activeTrigger[I.type==="focusin"?Bu:Ya]=!0),a.default(Z.getTipElement()).hasClass(Xa)||Z._hoverState===qa){Z._hoverState=qa;return}if(clearTimeout(Z._timeout),Z._hoverState=qa,!Z.config.delay||!Z.config.delay.show){Z.show();return}Z._timeout=setTimeout(function(){Z._hoverState===qa&&Z.show()},Z.config.delay.show)},me._leave=function(I,Z){var ae=this.constructor.DATA_KEY;if(Z=Z||a.default(I.currentTarget).data(ae),Z||(Z=new this.constructor(I.currentTarget,this._getDelegateConfig()),a.default(I.currentTarget).data(ae,Z)),I&&(Z._activeTrigger[I.type==="focusout"?Bu:Ya]=!1),!Z._isWithActiveTrigger()){if(clearTimeout(Z._timeout),Z._hoverState=zu,!Z.config.delay||!Z.config.delay.hide){Z.hide();return}Z._timeout=setTimeout(function(){Z._hoverState===zu&&Z.hide()},Z.config.delay.hide)}},me._isWithActiveTrigger=function(){for(var I in this._activeTrigger)if(this._activeTrigger[I])return!0;return!1},me._getConfig=function(I){var Z=a.default(this.element).data();return Object.keys(Z).forEach(function(ae){Cw.indexOf(ae)!==-1&&delete Z[ae]}),I=u({},this.constructor.Default,Z,typeof I=="object"&&I?I:{}),typeof I.delay=="number"&&(I.delay={show:I.delay,hide:I.delay}),typeof I.title=="number"&&(I.title=I.title.toString()),typeof I.content=="number"&&(I.content=I.content.toString()),y.typeCheckConfig(ar,I,this.constructor.DefaultType),I.sanitize&&(I.template=Xp(I.template,I.whiteList,I.sanitizeFn)),I},me._getDelegateConfig=function(){var I={};if(this.config)for(var Z in this.config)this.constructor.Default[Z]!==this.config[Z]&&(I[Z]=this.config[Z]);return I},me._cleanTipClass=function(){var I=a.default(this.getTipElement()),Z=I.attr("class").match(Aw);Z!==null&&Z.length&&I.removeClass(Z.join(""))},me._handlePopperPlacementChange=function(I){this.tip=I.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(I.placement))},me._fixTransition=function(){var I=this.getTipElement(),Z=this.config.animation;I.getAttribute("x-placement")===null&&(a.default(I).removeClass(ja),this.config.animation=!1,this.hide(),this.show(),this.config.animation=Z)},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this),ae=Z.data(Cl),Re=typeof I=="object"&&I;if(!(!ae&&/dispose|hide/.test(I))&&(ae||(ae=new Ae(this,Re),Z.data(Cl,ae)),typeof I=="string")){if(typeof ae[I]>"u")throw new TypeError('No method named "'+I+'"');ae[I]()}})},c(Ae,null,[{key:"VERSION",get:function(){return Tw}},{key:"Default",get:function(){return Ow}},{key:"NAME",get:function(){return ar}},{key:"DATA_KEY",get:function(){return Cl}},{key:"Event",get:function(){return Nw}},{key:"EVENT_KEY",get:function(){return fi}},{key:"DefaultType",get:function(){return kw}}]),Ae}();a.default.fn[ar]=or._jQueryInterface,a.default.fn[ar].Constructor=or,a.default.fn[ar].noConflict=function(){return a.default.fn[ar]=Mw,or._jQueryInterface};var Nr="popover",Fw="4.6.2",Pl="bs.popover",pi="."+Pl,Uw=a.default.fn[Nr],Yp="bs-popover",zw=new RegExp("(^|\\s)"+Yp+"\\S+","g"),Bw="fade",Hw="show",Vw=".popover-header",$w=".popover-body",Gw=u({},or.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Ww=u({},or.DefaultType,{content:"(string|element|function)"}),jw={HIDE:"hide"+pi,HIDDEN:"hidden"+pi,SHOW:"show"+pi,SHOWN:"shown"+pi,INSERTED:"inserted"+pi,CLICK:"click"+pi,FOCUSIN:"focusin"+pi,FOCUSOUT:"focusout"+pi,MOUSEENTER:"mouseenter"+pi,MOUSELEAVE:"mouseleave"+pi},Ll=function(Ae){d(me,Ae);function me(){return Ae.apply(this,arguments)||this}var ce=me.prototype;return ce.isWithContent=function(){return this.getTitle()||this._getContent()},ce.addAttachmentClass=function(Z){a.default(this.getTipElement()).addClass(Yp+"-"+Z)},ce.getTipElement=function(){return this.tip=this.tip||a.default(this.config.template)[0],this.tip},ce.setContent=function(){var Z=a.default(this.getTipElement());this.setElementContent(Z.find(Vw),this.getTitle());var ae=this._getContent();typeof ae=="function"&&(ae=ae.call(this.element)),this.setElementContent(Z.find($w),ae),Z.removeClass(Bw+" "+Hw)},ce._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},ce._cleanTipClass=function(){var Z=a.default(this.getTipElement()),ae=Z.attr("class").match(zw);ae!==null&&ae.length>0&&Z.removeClass(ae.join(""))},me._jQueryInterface=function(Z){return this.each(function(){var ae=a.default(this).data(Pl),Re=typeof Z=="object"?Z:null;if(!(!ae&&/dispose|hide/.test(Z))&&(ae||(ae=new me(this,Re),a.default(this).data(Pl,ae)),typeof Z=="string")){if(typeof ae[Z]>"u")throw new TypeError('No method named "'+Z+'"');ae[Z]()}})},c(me,null,[{key:"VERSION",get:function(){return Fw}},{key:"Default",get:function(){return Gw}},{key:"NAME",get:function(){return Nr}},{key:"DATA_KEY",get:function(){return Pl}},{key:"Event",get:function(){return jw}},{key:"EVENT_KEY",get:function(){return pi}},{key:"DefaultType",get:function(){return Ww}}]),me}(or);a.default.fn[Nr]=Ll._jQueryInterface,a.default.fn[Nr].Constructor=Ll,a.default.fn[Nr].noConflict=function(){return a.default.fn[Nr]=Uw,Ll._jQueryInterface};var lr="scrollspy",Xw="4.6.2",Rl="bs.scrollspy",Il="."+Rl,qw=".data-api",Yw=a.default.fn[lr],Kw="dropdown-item",cr="active",Zw="activate"+Il,Qw="scroll"+Il,Jw="load"+Il+qw,ex="offset",Kp="position",tx='[data-spy="scroll"]',Zp=".nav, .list-group",Hu=".nav-link",nx=".nav-item",Qp=".list-group-item",ix=".dropdown",sx=".dropdown-item",rx=".dropdown-toggle",Jp={offset:10,method:"auto",target:""},ax={offset:"number",method:"string",target:"(string|element)"},Ka=function(){function Ae(ce,I){var Z=this;this._element=ce,this._scrollElement=ce.tagName==="BODY"?window:ce,this._config=this._getConfig(I),this._selector=this._config.target+" "+Hu+","+(this._config.target+" "+Qp+",")+(this._config.target+" "+sx),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,a.default(this._scrollElement).on(Qw,function(ae){return Z._process(ae)}),this.refresh(),this._process()}var me=Ae.prototype;return me.refresh=function(){var I=this,Z=this._scrollElement===this._scrollElement.window?ex:Kp,ae=this._config.method==="auto"?Z:this._config.method,Re=ae===Kp?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var Fe=[].slice.call(document.querySelectorAll(this._selector));Fe.map(function($e){var it,xt=y.getSelectorFromElement($e);if(xt&&(it=document.querySelector(xt)),it){var Mt=it.getBoundingClientRect();if(Mt.width||Mt.height)return[a.default(it)[ae]().top+Re,xt]}return null}).filter(Boolean).sort(function($e,it){return $e[0]-it[0]}).forEach(function($e){I._offsets.push($e[0]),I._targets.push($e[1])})},me.dispose=function(){a.default.removeData(this._element,Rl),a.default(this._scrollElement).off(Il),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},me._getConfig=function(I){if(I=u({},Jp,typeof I=="object"&&I?I:{}),typeof I.target!="string"&&y.isElement(I.target)){var Z=a.default(I.target).attr("id");Z||(Z=y.getUID(lr),a.default(I.target).attr("id",Z)),I.target="#"+Z}return y.typeCheckConfig(lr,I,ax),I},me._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},me._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},me._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},me._process=function(){var I=this._getScrollTop()+this._config.offset,Z=this._getScrollHeight(),ae=this._config.offset+Z-this._getOffsetHeight();if(this._scrollHeight!==Z&&this.refresh(),I>=ae){var Re=this._targets[this._targets.length-1];this._activeTarget!==Re&&this._activate(Re);return}if(this._activeTarget&&I<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(var Fe=this._offsets.length;Fe--;){var $e=this._activeTarget!==this._targets[Fe]&&I>=this._offsets[Fe]&&(typeof this._offsets[Fe+1]>"u"||I<this._offsets[Fe+1]);$e&&this._activate(this._targets[Fe])}},me._activate=function(I){this._activeTarget=I,this._clear();var Z=this._selector.split(",").map(function(Re){return Re+'[data-target="'+I+'"],'+Re+'[href="'+I+'"]'}),ae=a.default([].slice.call(document.querySelectorAll(Z.join(","))));ae.hasClass(Kw)?(ae.closest(ix).find(rx).addClass(cr),ae.addClass(cr)):(ae.addClass(cr),ae.parents(Zp).prev(Hu+", "+Qp).addClass(cr),ae.parents(Zp).prev(nx).children(Hu).addClass(cr)),a.default(this._scrollElement).trigger(Zw,{relatedTarget:I})},me._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(I){return I.classList.contains(cr)}).forEach(function(I){return I.classList.remove(cr)})},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this).data(Rl),ae=typeof I=="object"&&I;if(Z||(Z=new Ae(this,ae),a.default(this).data(Rl,Z)),typeof I=="string"){if(typeof Z[I]>"u")throw new TypeError('No method named "'+I+'"');Z[I]()}})},c(Ae,null,[{key:"VERSION",get:function(){return Xw}},{key:"Default",get:function(){return Jp}}]),Ae}();a.default(window).on(Jw,function(){for(var Ae=[].slice.call(document.querySelectorAll(tx)),me=Ae.length,ce=me;ce--;){var I=a.default(Ae[ce]);Ka._jQueryInterface.call(I,I.data())}}),a.default.fn[lr]=Ka._jQueryInterface,a.default.fn[lr].Constructor=Ka,a.default.fn[lr].noConflict=function(){return a.default.fn[lr]=Yw,Ka._jQueryInterface};var Za="tab",ox="4.6.2",Dl="bs.tab",Qa="."+Dl,lx=".data-api",cx=a.default.fn[Za],ux="dropdown-menu",Ja="active",dx="disabled",em="fade",tm="show",hx="hide"+Qa,fx="hidden"+Qa,px="show"+Qa,mx="shown"+Qa,gx="click"+Qa+lx,vx=".dropdown",yx=".nav, .list-group",nm=".active",im="> li > .active",_x='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',bx=".dropdown-toggle",Ex="> .dropdown-menu .active",eo=function(){function Ae(ce){this._element=ce}var me=Ae.prototype;return me.show=function(){var I=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&a.default(this._element).hasClass(Ja)||a.default(this._element).hasClass(dx)||this._element.hasAttribute("disabled"))){var Z,ae,Re=a.default(this._element).closest(yx)[0],Fe=y.getSelectorFromElement(this._element);if(Re){var $e=Re.nodeName==="UL"||Re.nodeName==="OL"?im:nm;ae=a.default.makeArray(a.default(Re).find($e)),ae=ae[ae.length-1]}var it=a.default.Event(hx,{relatedTarget:this._element}),xt=a.default.Event(px,{relatedTarget:ae});if(ae&&a.default(ae).trigger(it),a.default(this._element).trigger(xt),!(xt.isDefaultPrevented()||it.isDefaultPrevented())){Fe&&(Z=document.querySelector(Fe)),this._activate(this._element,Re);var Mt=function(){var Ii=a.default.Event(fx,{relatedTarget:I._element}),mi=a.default.Event(mx,{relatedTarget:ae});a.default(ae).trigger(Ii),a.default(I._element).trigger(mi)};Z?this._activate(Z,Z.parentNode,Mt):Mt()}}},me.dispose=function(){a.default.removeData(this._element,Dl),this._element=null},me._activate=function(I,Z,ae){var Re=this,Fe=Z&&(Z.nodeName==="UL"||Z.nodeName==="OL")?a.default(Z).find(im):a.default(Z).children(nm),$e=Fe[0],it=ae&&$e&&a.default($e).hasClass(em),xt=function(){return Re._transitionComplete(I,$e,ae)};if($e&&it){var Mt=y.getTransitionDurationFromElement($e);a.default($e).removeClass(tm).one(y.TRANSITION_END,xt).emulateTransitionEnd(Mt)}else xt()},me._transitionComplete=function(I,Z,ae){if(Z){a.default(Z).removeClass(Ja);var Re=a.default(Z.parentNode).find(Ex)[0];Re&&a.default(Re).removeClass(Ja),Z.getAttribute("role")==="tab"&&Z.setAttribute("aria-selected",!1)}a.default(I).addClass(Ja),I.getAttribute("role")==="tab"&&I.setAttribute("aria-selected",!0),y.reflow(I),I.classList.contains(em)&&I.classList.add(tm);var Fe=I.parentNode;if(Fe&&Fe.nodeName==="LI"&&(Fe=Fe.parentNode),Fe&&a.default(Fe).hasClass(ux)){var $e=a.default(I).closest(vx)[0];if($e){var it=[].slice.call($e.querySelectorAll(bx));a.default(it).addClass(Ja)}I.setAttribute("aria-expanded",!0)}ae&&ae()},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this),ae=Z.data(Dl);if(ae||(ae=new Ae(this),Z.data(Dl,ae)),typeof I=="string"){if(typeof ae[I]>"u")throw new TypeError('No method named "'+I+'"');ae[I]()}})},c(Ae,null,[{key:"VERSION",get:function(){return ox}}]),Ae}();a.default(document).on(gx,_x,function(Ae){Ae.preventDefault(),eo._jQueryInterface.call(a.default(this),"show")}),a.default.fn[Za]=eo._jQueryInterface,a.default.fn[Za].Constructor=eo,a.default.fn[Za].noConflict=function(){return a.default.fn[Za]=cx,eo._jQueryInterface};var Fr="toast",wx="4.6.2",Ol="bs.toast",to="."+Ol,xx=a.default.fn[Fr],Sx="fade",sm="hide",no="show",rm="showing",am="click.dismiss"+to,Tx="hide"+to,Mx="hidden"+to,Ax="show"+to,Cx="shown"+to,Px='[data-dismiss="toast"]',om={animation:!0,autohide:!0,delay:500},Lx={animation:"boolean",autohide:"boolean",delay:"number"},kl=function(){function Ae(ce,I){this._element=ce,this._config=this._getConfig(I),this._timeout=null,this._setListeners()}var me=Ae.prototype;return me.show=function(){var I=this,Z=a.default.Event(Ax);if(a.default(this._element).trigger(Z),!Z.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add(Sx);var ae=function(){I._element.classList.remove(rm),I._element.classList.add(no),a.default(I._element).trigger(Cx),I._config.autohide&&(I._timeout=setTimeout(function(){I.hide()},I._config.delay))};if(this._element.classList.remove(sm),y.reflow(this._element),this._element.classList.add(rm),this._config.animation){var Re=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,ae).emulateTransitionEnd(Re)}else ae()}},me.hide=function(){if(this._element.classList.contains(no)){var I=a.default.Event(Tx);a.default(this._element).trigger(I),!I.isDefaultPrevented()&&this._close()}},me.dispose=function(){this._clearTimeout(),this._element.classList.contains(no)&&this._element.classList.remove(no),a.default(this._element).off(am),a.default.removeData(this._element,Ol),this._element=null,this._config=null},me._getConfig=function(I){return I=u({},om,a.default(this._element).data(),typeof I=="object"&&I?I:{}),y.typeCheckConfig(Fr,I,this.constructor.DefaultType),I},me._setListeners=function(){var I=this;a.default(this._element).on(am,Px,function(){return I.hide()})},me._close=function(){var I=this,Z=function(){I._element.classList.add(sm),a.default(I._element).trigger(Mx)};if(this._element.classList.remove(no),this._config.animation){var ae=y.getTransitionDurationFromElement(this._element);a.default(this._element).one(y.TRANSITION_END,Z).emulateTransitionEnd(ae)}else Z()},me._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},Ae._jQueryInterface=function(I){return this.each(function(){var Z=a.default(this),ae=Z.data(Ol),Re=typeof I=="object"&&I;if(ae||(ae=new Ae(this,Re),Z.data(Ol,ae)),typeof I=="string"){if(typeof ae[I]>"u")throw new TypeError('No method named "'+I+'"');ae[I](this)}})},c(Ae,null,[{key:"VERSION",get:function(){return wx}},{key:"DefaultType",get:function(){return Lx}},{key:"Default",get:function(){return om}}]),Ae}();a.default.fn[Fr]=kl._jQueryInterface,a.default.fn[Fr].Constructor=kl,a.default.fn[Fr].noConflict=function(){return a.default.fn[Fr]=xx,kl._jQueryInterface},n.Alert=D,n.Button=Me,n.Carousel=vs,n.Collapse=ft,n.Dropdown=bs,n.Modal=Wa,n.Popover=Ll,n.Scrollspy=Ka,n.Tab=eo,n.Toast=kl,n.Tooltip=or,n.Util=y,Object.defineProperty(n,"__esModule",{value:!0})})})(cm,cm.exports);function mm(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Lf(t,e){t===void 0&&(t={}),e===void 0&&(e={});const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:mm(e[i])&&mm(t[i])&&Object.keys(e[i]).length>0&&Lf(t[i],e[i])})}const Qv={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function gn(){const t=typeof document<"u"?document:{};return Lf(t,Qv),t}const y1={document:Qv,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Vt(){const t=typeof window<"u"?window:{};return Lf(t,y1),t}function Ls(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function _1(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function Ta(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function oi(){return Date.now()}function b1(t){const e=Vt();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function qd(t,e){e===void 0&&(e="x");const n=Vt();let i,s,r;const a=b1(t);return n.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(o=>o.replace(",",".")).join(", ")),r=new n.WebKitCSSMatrix(s==="none"?"":s)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?s=r.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?s=r.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function ho(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function E1(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Kn(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(i!=null&&!E1(i)){const s=Object.keys(Object(i)).filter(r=>e.indexOf(r)<0);for(let r=0,a=s.length;r<a;r+=1){const o=s[r],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(ho(t[o])&&ho(i[o])?i[o].__swiper__?t[o]=i[o]:Kn(t[o],i[o]):!ho(t[o])&&ho(i[o])?(t[o]={},i[o].__swiper__?t[o]=i[o]:Kn(t[o],i[o])):t[o]=i[o])}}}return t}function fo(t,e,n){t.style.setProperty(e,n)}function Jv(t){let{swiper:e,targetPosition:n,side:i}=t;const s=Vt(),r=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const c=n>r?"next":"prev",u=(h,p)=>c==="next"&&h>=p||c==="prev"&&h<=p,d=()=>{o=new Date().getTime(),a===null&&(a=o);const h=Math.max(Math.min((o-a)/l,1),0),p=.5-Math.cos(h*Math.PI)/2;let f=r+p*(n-r);if(u(f,n)&&(f=n),e.wrapperEl.scrollTo({[i]:f}),u(f,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:f})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function Rr(t){return t.querySelector(".swiper-slide-transform")||t.shadowRoot&&t.shadowRoot.querySelector(".swiper-slide-transform")||t}function bn(t,e){e===void 0&&(e="");const n=Vt(),i=[...t.children];return n.HTMLSlotElement&&t instanceof HTMLSlotElement&&i.push(...t.assignedElements()),e?i.filter(s=>s.matches(e)):i}function w1(t,e){const n=[e];for(;n.length>0;){const i=n.shift();if(t===i)return!0;n.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function x1(t,e){const n=Vt();let i=e.contains(t);return!i&&n.HTMLSlotElement&&e instanceof HTMLSlotElement&&(i=[...e.assignedElements()].includes(t),i||(i=w1(t,e))),i}function Oc(t){try{console.warn(t);return}catch{}}function Qn(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:Ls(e)),n}function kc(t){const e=Vt(),n=gn(),i=t.getBoundingClientRect(),s=n.body,r=t.clientTop||s.clientTop||0,a=t.clientLeft||s.clientLeft||0,o=t===e?e.scrollY:t.scrollTop,l=t===e?e.scrollX:t.scrollLeft;return{top:i.top+o-r,left:i.left+l-a}}function S1(t,e){const n=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function T1(t,e){const n=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function Fs(t,e){return Vt().getComputedStyle(t,null).getPropertyValue(e)}function No(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function Sr(t,e){const n=[];let i=t.parentElement;for(;i;)e?i.matches(e)&&n.push(i):n.push(i),i=i.parentElement;return n}function _o(t,e){function n(i){i.target===t&&(e.call(t,i),t.removeEventListener("transitionend",n))}e&&t.addEventListener("transitionend",n)}function Yd(t,e,n){const i=Vt();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function ht(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}function ou(t){return e=>Math.abs(e)>0&&t.browser&&t.browser.need3dFix&&Math.abs(e)%90===0?e+.001:e}function fs(t,e){e===void 0&&(e=""),typeof trustedTypes<"u"?t.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(e):t.innerHTML=e}let Wu;function M1(){const t=Vt(),e=gn();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function e0(){return Wu||(Wu=M1()),Wu}let ju;function A1(t){let{userAgent:e}=t===void 0?{}:t;const n=e0(),i=Vt(),s=i.navigator.platform,r=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let u=r.match(/(iPad).*OS\s([\d_]+)/);const d=r.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let f=s==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&f&&n.touch&&m.indexOf(`${o}x${l}`)>=0&&(u=r.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(u||h||d)&&(a.os="ios",a.ios=!0),a}function t0(t){return t===void 0&&(t={}),ju||(ju=A1(t)),ju}let Xu;function C1(){const t=Vt(),e=t0();let n=!1;function i(){const o=t.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(i()){const o=String(t.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));n=l<16||l===16&&c<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),r=i(),a=r||s&&e.ios;return{isSafari:n||r,needPerspectiveFix:n,need3dFix:a,isWebView:s}}function n0(){return Xu||(Xu=C1()),Xu}function P1(t){let{swiper:e,on:n,emit:i}=t;const s=Vt();let r=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(d=>{a=s.requestAnimationFrame(()=>{const{width:h,height:p}=e;let f=h,m=p;d.forEach(v=>{let{contentBoxSize:g,contentRect:_,target:b}=v;b&&b!==e.el||(f=_?_.width:(g[0]||g).inlineSize,m=_?_.height:(g[0]||g).blockSize)}),(f!==h||m!==p)&&o()})}),r.observe(e.el))},c=()=>{a&&s.cancelAnimationFrame(a),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",u)}),n("destroy",()=>{c(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",u)})}function L1(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r=[],a=Vt(),o=function(u,d){d===void 0&&(d={});const h=a.MutationObserver||a.WebkitMutationObserver,p=new h(f=>{if(e.__preventObserver__)return;if(f.length===1){s("observerUpdate",f[0]);return}const m=function(){s("observerUpdate",f[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});p.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),r.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=Sr(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(u=>{u.disconnect()}),r.splice(0,r.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var R1={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const s=n?"unshift":"push";return t.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][s](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function s(){i.off(t,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];e.apply(i,a)}return s.__emitterProxy=e,i.on(t,s,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&n.eventsListeners[i].splice(r,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,i;for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],n=r.slice(1,r.length),i=t):(e=r[0].events,n=r[0].data,i=r[0].context||t),n.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...n])}),t.eventsListeners&&t.eventsListeners[l]&&t.eventsListeners[l].forEach(c=>{c.apply(i,n)})}),t}};function I1(){const t=this;let e,n;const i=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(Fs(i,"padding-left")||0,10)-parseInt(Fs(i,"padding-right")||0,10),n=n-parseInt(Fs(i,"padding-top")||0,10)-parseInt(Fs(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function D1(){const t=this;function e(E,C){return parseFloat(E.getPropertyValue(t.getDirectionLabel(C))||0)}const n=t.params,{wrapperEl:i,slidesEl:s,size:r,rtlTranslate:a,wrongRTL:o}=t,l=t.virtual&&n.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,u=bn(s,`.${t.params.slideClass}, swiper-slide`),d=l?t.virtual.slides.length:u.length;let h=[];const p=[],f=[];let m=n.slidesOffsetBefore;typeof m=="function"&&(m=n.slidesOffsetBefore.call(t));let v=n.slidesOffsetAfter;typeof v=="function"&&(v=n.slidesOffsetAfter.call(t));const g=t.snapGrid.length,_=t.slidesGrid.length;let b=n.spaceBetween,y=-m,T=0,x=0;if(typeof r>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*r:typeof b=="string"&&(b=parseFloat(b)),t.virtualSize=-b,u.forEach(E=>{a?E.style.marginLeft="":E.style.marginRight="",E.style.marginBottom="",E.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(fo(i,"--swiper-centered-offset-before",""),fo(i,"--swiper-centered-offset-after",""));const S=n.grid&&n.grid.rows>1&&t.grid;S?t.grid.initSlides(u):t.grid&&t.grid.unsetSlides();let M;const w=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(E=>typeof n.breakpoints[E].slidesPerView<"u").length>0;for(let E=0;E<d;E+=1){M=0;let C;if(u[E]&&(C=u[E]),S&&t.grid.updateSlide(E,C,u),!(u[E]&&Fs(C,"display")==="none")){if(n.slidesPerView==="auto"){w&&(u[E].style[t.getDirectionLabel("width")]="");const P=getComputedStyle(C),A=C.style.transform,R=C.style.webkitTransform;if(A&&(C.style.transform="none"),R&&(C.style.webkitTransform="none"),n.roundLengths)M=t.isHorizontal()?Yd(C,"width"):Yd(C,"height");else{const N=e(P,"width"),U=e(P,"padding-left"),k=e(P,"padding-right"),D=e(P,"margin-left"),W=e(P,"margin-right"),O=P.getPropertyValue("box-sizing");if(O&&O==="border-box")M=N+D+W;else{const{clientWidth:B,offsetWidth:V}=C;M=N+U+k+D+W+(V-B)}}A&&(C.style.transform=A),R&&(C.style.webkitTransform=R),n.roundLengths&&(M=Math.floor(M))}else M=(r-(n.slidesPerView-1)*b)/n.slidesPerView,n.roundLengths&&(M=Math.floor(M)),u[E]&&(u[E].style[t.getDirectionLabel("width")]=`${M}px`);u[E]&&(u[E].swiperSlideSize=M),f.push(M),n.centeredSlides?(y=y+M/2+T/2+b,T===0&&E!==0&&(y=y-r/2-b),E===0&&(y=y-r/2-b),Math.abs(y)<1/1e3&&(y=0),n.roundLengths&&(y=Math.floor(y)),x%n.slidesPerGroup===0&&h.push(y),p.push(y)):(n.roundLengths&&(y=Math.floor(y)),(x-Math.min(t.params.slidesPerGroupSkip,x))%t.params.slidesPerGroup===0&&h.push(y),p.push(y),y=y+M+b),t.virtualSize+=M+b,T=M,x+=1}}if(t.virtualSize=Math.max(t.virtualSize,r)+v,a&&o&&(n.effect==="slide"||n.effect==="coverflow")&&(i.style.width=`${t.virtualSize+b}px`),n.setWrapperSize&&(i.style[t.getDirectionLabel("width")]=`${t.virtualSize+b}px`),S&&t.grid.updateWrapperSize(M,h),!n.centeredSlides){const E=[];for(let C=0;C<h.length;C+=1){let P=h[C];n.roundLengths&&(P=Math.floor(P)),h[C]<=t.virtualSize-r&&E.push(P)}h=E,Math.floor(t.virtualSize-r)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-r)}if(l&&n.loop){const E=f[0]+b;if(n.slidesPerGroup>1){const C=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),P=E*n.slidesPerGroup;for(let A=0;A<C;A+=1)h.push(h[h.length-1]+P)}for(let C=0;C<t.virtual.slidesBefore+t.virtual.slidesAfter;C+=1)n.slidesPerGroup===1&&h.push(h[h.length-1]+E),p.push(p[p.length-1]+E),t.virtualSize+=E}if(h.length===0&&(h=[0]),b!==0){const E=t.isHorizontal()&&a?"marginLeft":t.getDirectionLabel("marginRight");u.filter((C,P)=>!n.cssMode||n.loop?!0:P!==u.length-1).forEach(C=>{C.style[E]=`${b}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let E=0;f.forEach(P=>{E+=P+(b||0)}),E-=b;const C=E>r?E-r:0;h=h.map(P=>P<=0?-m:P>C?C+v:P)}if(n.centerInsufficientSlides){let E=0;f.forEach(P=>{E+=P+(b||0)}),E-=b;const C=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(E+C<r){const P=(r-E-C)/2;h.forEach((A,R)=>{h[R]=A-P}),p.forEach((A,R)=>{p[R]=A+P})}}if(Object.assign(t,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){fo(i,"--swiper-centered-offset-before",`${-h[0]}px`),fo(i,"--swiper-centered-offset-after",`${t.size/2-f[f.length-1]/2}px`);const E=-t.snapGrid[0],C=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(P=>P+E),t.slidesGrid=t.slidesGrid.map(P=>P+C)}if(d!==c&&t.emit("slidesLengthChange"),h.length!==g&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==_&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const E=`${n.containerModifierClass}backface-hidden`,C=t.el.classList.contains(E);d<=n.maxBackfaceHiddenSlides?C||t.el.classList.add(E):C&&t.el.classList.remove(E)}}function O1(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{n.push(o)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const o=e.activeIndex+r;if(o>e.slides.length&&!i)break;n.push(a(o))}else n.push(a(e.activeIndex));for(r=0;r<n.length;r+=1)if(typeof n[r]<"u"){const o=n[r].offsetHeight;s=o>s?o:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function k1(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-n-t.cssOverflowAdjustment()}const gm=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function N1(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:i,rtlTranslate:s,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-t;s&&(a=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=n.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=i[0].swiperSlideOffset);const d=(a+(n.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),h=(a-r[0]+(n.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),p=-(a-u),f=p+e.slidesSizesGrid[l],m=p>=0&&p<=e.size-e.slidesSizesGrid[l],v=p>=0&&p<e.size-1||f>1&&f<=e.size||p<=0&&f>=e.size;v&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),gm(c,v,n.slideVisibleClass),gm(c,m,n.slideFullyVisibleClass),c.progress=s?-d:d,c.originalProgress=s?-h:h}}function F1(t){const e=this;if(typeof t>"u"){const u=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*u||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:a,progressLoop:o}=e;const l=r,c=a;if(i===0)s=0,r=!0,a=!0;else{s=(t-e.minTranslate())/i;const u=Math.abs(t-e.minTranslate())<1,d=Math.abs(t-e.maxTranslate())<1;r=u||s<=0,a=d||s>=1,u&&(s=0),d&&(s=1)}if(n.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[u],p=e.slidesGrid[d],f=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(t);m>=h?o=(m-h)/f:o=(m+f-p)/f,o>1&&(o-=1)}Object.assign(e,{progress:s,progressLoop:o,isBeginning:r,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),r&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!r||c&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}const qu=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function U1(){const t=this,{slides:e,params:n,slidesEl:i,activeIndex:s}=t,r=t.virtual&&n.virtual.enabled,a=t.grid&&n.grid&&n.grid.rows>1,o=d=>bn(i,`.${n.slideClass}${d}, swiper-slide${d}`)[0];let l,c,u;if(r)if(n.loop){let d=s-t.virtual.slidesBefore;d<0&&(d=t.virtual.slides.length+d),d>=t.virtual.slides.length&&(d-=t.virtual.slides.length),l=o(`[data-swiper-slide-index="${d}"]`)}else l=o(`[data-swiper-slide-index="${s}"]`);else a?(l=e.find(d=>d.column===s),u=e.find(d=>d.column===s+1),c=e.find(d=>d.column===s-1)):l=e[s];l&&(a||(u=T1(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u&&(u=e[0]),c=S1(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(d=>{qu(d,d===l,n.slideActiveClass),qu(d,d===u,n.slideNextClass),qu(d,d===c,n.slidePrevClass)}),t.emitSlidesClasses()}const mc=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,i=e.closest(n());if(i){let s=i.querySelector(`.${t.params.lazyPreloaderClass}`);!s&&t.isElement&&(i.shadowRoot?s=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(s=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},Yu=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Kd=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const i=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),s=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const a=s,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),t.slides.forEach((l,c)=>{o.includes(l.column)&&Yu(t,c)});return}const r=s+i-1;if(t.params.rewind||t.params.loop)for(let a=s-e;a<=r+e;a+=1){const o=(a%n+n)%n;(o<s||o>r)&&Yu(t,o)}else for(let a=Math.max(s-e,0);a<=Math.min(r+e,n-1);a+=1)a!==s&&(a>r||a<s)&&Yu(t,a)};function z1(t){const{slidesGrid:e,params:n}=t,i=t.rtlTranslate?t.translate:-t.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?s=r:i>=e[r]&&i<e[r+1]&&(s=r+1):i>=e[r]&&(s=r);return n.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function B1(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:s,activeIndex:r,realIndex:a,snapIndex:o}=e;let l=t,c;const u=p=>{let f=p-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=z1(e)),i.indexOf(n)>=0)c=i.indexOf(n);else{const p=Math.min(s.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/s.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===r&&!e.params.loop){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const d=e.grid&&s.grid&&s.grid.rows>1;let h;if(e.virtual&&s.virtual.enabled&&s.loop)h=u(l);else if(d){const p=e.slides.find(m=>m.column===l);let f=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(f)&&(f=Math.max(e.slides.indexOf(p),0)),h=Math.floor(f/s.grid.rows)}else if(e.slides[l]){const p=e.slides[l].getAttribute("data-swiper-slide-index");p?h=parseInt(p,10):h=l}else h=l;Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:h,previousIndex:r,activeIndex:l}),e.initialized&&Kd(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==h&&e.emit("realIndexChange"),e.emit("slideChange"))}function H1(t,e){const n=this,i=n.params;let s=t.closest(`.${i.slideClass}, swiper-slide`);!s&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(o=>{!s&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(s=o)});let r=!1,a;if(s){for(let o=0;o<n.slides.length;o+=1)if(n.slides[o]===s){r=!0,a=o;break}}if(s&&r)n.clickedSlide=s,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=a;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}i.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var V1={updateSize:I1,updateSlides:D1,updateAutoHeight:O1,updateSlidesOffset:k1,updateSlidesProgress:N1,updateProgress:F1,updateSlidesClasses:U1,updateActiveIndex:B1,updateClickedSlide:H1};function $1(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:i,translate:s,wrapperEl:r}=e;if(n.virtualTranslate)return i?-s:s;if(n.cssMode)return s;let a=qd(r,t);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function G1(t,e){const n=this,{rtlTranslate:i,params:s,wrapperEl:r,progress:a}=n;let o=0,l=0;const c=0;n.isHorizontal()?o=i?-t:t:l=t,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?o:l,s.cssMode?r[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-o:-l:s.virtualTranslate||(n.isHorizontal()?o-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),r.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const d=n.maxTranslate()-n.minTranslate();d===0?u=0:u=(t-n.minTranslate())/d,u!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function W1(){return-this.snapGrid[0]}function j1(){return-this.snapGrid[this.snapGrid.length-1]}function X1(t,e,n,i,s){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),i===void 0&&(i=!0);const r=this,{params:a,wrapperEl:o}=r;if(r.animating&&a.preventInteractionOnTransition)return!1;const l=r.minTranslate(),c=r.maxTranslate();let u;if(i&&t>l?u=l:i&&t<c?u=c:u=t,r.updateProgress(u),a.cssMode){const d=r.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!r.support.smoothScroll)return Jv({swiper:r,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(u),n&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(u),n&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(h){!r||r.destroyed||h.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,n&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var q1={getTranslate:$1,setTranslate:G1,minTranslate:W1,maxTranslate:j1,translateTo:X1};function Y1(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function i0(t){let{swiper:e,runCallbacks:n,direction:i,step:s}=t;const{activeIndex:r,previousIndex:a}=e;let o=i;o||(r>a?o="next":r<a?o="prev":o="reset"),e.emit(`transition${s}`),n&&o==="reset"?e.emit(`slideResetTransition${s}`):n&&r!==a&&(e.emit(`slideChangeTransition${s}`),o==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`))}function K1(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),i0({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function Z1(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),i0({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var Q1={setTransition:Y1,transitionStart:K1,transitionEnd:Z1};function J1(t,e,n,i,s){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const r=this;let a=t;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:p,enabled:f}=r;if(!f&&!i&&!s||r.destroyed||r.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);const m=Math.min(r.params.slidesPerGroupSkip,a);let v=m+Math.floor((a-m)/r.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(o.normalizeSlideIndex)for(let S=0;S<c.length;S+=1){const M=-Math.floor(g*100),w=Math.floor(c[S]*100),E=Math.floor(c[S+1]*100);typeof c[S+1]<"u"?M>=w&&M<E-(E-w)/2?a=S:M>=w&&M<E&&(a=S+1):M>=w&&(a=S)}if(r.initialized&&a!==d&&(!r.allowSlideNext&&(h?g>r.translate&&g>r.minTranslate():g<r.translate&&g<r.minTranslate())||!r.allowSlidePrev&&g>r.translate&&g>r.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&n&&r.emit("beforeSlideChangeStart"),r.updateProgress(g);let _;a>d?_="next":a<d?_="prev":_="reset";const b=r.virtual&&r.params.virtual.enabled;if(!(b&&s)&&(h&&-g===r.translate||!h&&g===r.translate))return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),o.effect!=="slide"&&r.setTranslate(g),_!=="reset"&&(r.transitionStart(n,_),r.transitionEnd(n,_)),!1;if(o.cssMode){const S=r.isHorizontal(),M=h?g:-g;if(e===0)b&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),b&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[S?"scrollLeft":"scrollTop"]=M})):p[S?"scrollLeft":"scrollTop"]=M,b&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return Jv({swiper:r,targetPosition:M,side:S?"left":"top"}),!0;p.scrollTo({[S?"left":"top"]:M,behavior:"smooth"})}return!0}const x=n0().isSafari;return b&&!s&&x&&r.isElement&&r.virtual.update(!1,!1,a),r.setTransition(e),r.setTranslate(g),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(n,_),e===0?r.transitionEnd(n,_):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(M){!r||r.destroyed||M.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(n,_))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function eS(t,e,n,i){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let a=t;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)a=a+s.virtual.slidesBefore;else{let o;if(r){const h=a*s.params.grid.rows;o=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===h).column}else o=s.getSlideIndexByData(a);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:c}=s.params;let u=s.params.slidesPerView;u==="auto"?u=s.slidesPerViewDynamic():(u=Math.ceil(parseFloat(s.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let d=l-o<u;if(c&&(d=d||o<Math.ceil(u/2)),i&&c&&s.params.slidesPerView!=="auto"&&!r&&(d=!1),d){const h=c?o<s.activeIndex?"prev":"next":o-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?o+1:o-l+1,slideRealIndex:h==="next"?s.realIndex:void 0})}if(r){const h=a*s.params.grid.rows;a=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===h).column}else a=s.getSlideIndexByData(a)}return requestAnimationFrame(()=>{s.slideTo(a,e,n,i)}),s}function tS(t,e,n){e===void 0&&(e=!0);const i=this,{enabled:s,params:r,animating:a}=i;if(!s||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);let o=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<r.slidesPerGroupSkip?1:o,c=i.virtual&&r.virtual.enabled;if(r.loop){if(a&&!c&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,t,e,n)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+l,t,e,n)}function nS(t,e,n){e===void 0&&(e=!0);const i=this,{params:s,snapGrid:r,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);const u=i.virtual&&s.virtual.enabled;if(s.loop){if(c&&!u&&s.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function h(_){return _<0?-Math.floor(Math.abs(_)):Math.floor(_)}const p=h(d),f=r.map(_=>h(_)),m=s.freeMode&&s.freeMode.enabled;let v=r[f.indexOf(p)-1];if(typeof v>"u"&&(s.cssMode||m)){let _;r.forEach((b,y)=>{p>=b&&(_=y)}),typeof _<"u"&&(v=m?r[_]:r[_>0?_-1:_])}let g=0;if(typeof v<"u"&&(g=a.indexOf(v),g<0&&(g=i.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),s.rewind&&i.isBeginning){const _=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(_,t,e,n)}else if(s.loop&&i.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(g,t,e,n)}),!0;return i.slideTo(g,t,e,n)}function iS(t,e,n){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof t>"u"&&(t=i.params.speed),i.slideTo(i.activeIndex,t,e,n)}function sS(t,e,n,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const s=this;if(s.destroyed)return;typeof t>"u"&&(t=s.params.speed);let r=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,r),o=a+Math.floor((r-a)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[o]){const c=s.snapGrid[o],u=s.snapGrid[o+1];l-c>(u-c)*i&&(r+=s.params.slidesPerGroup)}else{const c=s.snapGrid[o-1],u=s.snapGrid[o];l-c<=(u-c)*i&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,t,e,n)}function rS(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let s=t.getSlideIndexWhenGrid(t.clickedIndex),r;const a=t.isElement?"swiper-slide":`.${e.slideClass}`,o=t.grid&&t.params.grid&&t.params.grid.rows>1;if(e.loop){if(t.animating)return;r=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?t.slideToLoop(r):s>(o?(t.slides.length-i)/2-(t.params.grid.rows-1):t.slides.length-i)?(t.loopFix(),s=t.getSlideIndex(bn(n,`${a}[data-swiper-slide-index="${r}"]`)[0]),Ta(()=>{t.slideTo(s)})):t.slideTo(s)}else t.slideTo(s)}var aS={slideTo:J1,slideToLoop:eS,slideNext:tS,slidePrev:nS,slideReset:iS,slideToClosest:sS,slideToClickedSlide:rS};function oS(t,e){const n=this,{params:i,slidesEl:s}=n;if(!i.loop||n.virtual&&n.params.virtual.enabled)return;const r=()=>{bn(s,`.${i.slideClass}, swiper-slide`).forEach((p,f)=>{p.setAttribute("data-swiper-slide-index",f)})},a=()=>{const h=bn(s,`.${i.slideBlankClass}`);h.forEach(p=>{p.remove()}),h.length>0&&(n.recalcSlides(),n.updateSlides())},o=n.grid&&i.grid&&i.grid.rows>1;i.loopAddBlankSlides&&(i.slidesPerGroup>1||o)&&a();const l=i.slidesPerGroup*(o?i.grid.rows:1),c=n.slides.length%l!==0,u=o&&n.slides.length%i.grid.rows!==0,d=h=>{for(let p=0;p<h;p+=1){const f=n.isElement?Qn("swiper-slide",[i.slideBlankClass]):Qn("div",[i.slideClass,i.slideBlankClass]);n.slidesEl.append(f)}};if(c){if(i.loopAddBlankSlides){const h=l-n.slides.length%l;d(h),n.recalcSlides(),n.updateSlides()}else Oc("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(u){if(i.loopAddBlankSlides){const h=i.grid.rows-n.slides.length%i.grid.rows;d(h),n.recalcSlides(),n.updateSlides()}else Oc("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();n.loopFix({slideRealIndex:t,direction:i.centeredSlides?void 0:"next",initial:e})}function lS(t){let{slideRealIndex:e,slideTo:n=!0,direction:i,setTranslate:s,activeSlideIndex:r,initial:a,byController:o,byMousewheel:l}=t===void 0?{}:t;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:d,allowSlideNext:h,slidesEl:p,params:f}=c,{centeredSlides:m,initialSlide:v}=f;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&f.virtual.enabled){n&&(!f.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):f.centeredSlides&&c.snapIndex<f.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=h,c.emit("loopFix");return}let g=f.slidesPerView;g==="auto"?g=c.slidesPerViewDynamic():(g=Math.ceil(parseFloat(f.slidesPerView,10)),m&&g%2===0&&(g=g+1));const _=f.slidesPerGroupAuto?g:f.slidesPerGroup;let b=m?Math.max(_,Math.ceil(g/2)):_;b%_!==0&&(b+=_-b%_),b+=f.loopAdditionalSlides,c.loopedSlides=b;const y=c.grid&&f.grid&&f.grid.rows>1;u.length<g+b||c.params.effect==="cards"&&u.length<g+b*2?Oc("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&f.grid.fill==="row"&&Oc("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const T=[],x=[],S=y?Math.ceil(u.length/f.grid.rows):u.length,M=a&&S-v<g&&!m;let w=M?v:c.activeIndex;typeof r>"u"?r=c.getSlideIndex(u.find(U=>U.classList.contains(f.slideActiveClass))):w=r;const E=i==="next"||!i,C=i==="prev"||!i;let P=0,A=0;const N=(y?u[r].column:r)+(m&&typeof s>"u"?-g/2+.5:0);if(N<b){P=Math.max(b-N,_);for(let U=0;U<b-N;U+=1){const k=U-Math.floor(U/S)*S;if(y){const D=S-k-1;for(let W=u.length-1;W>=0;W-=1)u[W].column===D&&T.push(W)}else T.push(S-k-1)}}else if(N+g>S-b){A=Math.max(N-(S-b*2),_),M&&(A=Math.max(A,g-S+v+1));for(let U=0;U<A;U+=1){const k=U-Math.floor(U/S)*S;y?u.forEach((D,W)=>{D.column===k&&x.push(W)}):x.push(k)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&u.length<g+b*2&&(x.includes(r)&&x.splice(x.indexOf(r),1),T.includes(r)&&T.splice(T.indexOf(r),1)),C&&T.forEach(U=>{u[U].swiperLoopMoveDOM=!0,p.prepend(u[U]),u[U].swiperLoopMoveDOM=!1}),E&&x.forEach(U=>{u[U].swiperLoopMoveDOM=!0,p.append(u[U]),u[U].swiperLoopMoveDOM=!1}),c.recalcSlides(),f.slidesPerView==="auto"?c.updateSlides():y&&(T.length>0&&C||x.length>0&&E)&&c.slides.forEach((U,k)=>{c.grid.updateSlide(k,U,c.slides)}),f.watchSlidesProgress&&c.updateSlidesOffset(),n){if(T.length>0&&C){if(typeof e>"u"){const U=c.slidesGrid[w],D=c.slidesGrid[w+P]-U;l?c.setTranslate(c.translate-D):(c.slideTo(w+Math.ceil(P),0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-D,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-D))}else if(s){const U=y?T.length/f.grid.rows:T.length;c.slideTo(c.activeIndex+U,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(x.length>0&&E)if(typeof e>"u"){const U=c.slidesGrid[w],D=c.slidesGrid[w-A]-U;l?c.setTranslate(c.translate-D):(c.slideTo(w-A,0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-D,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-D))}else{const U=y?x.length/f.grid.rows:x.length;c.slideTo(c.activeIndex-U,0,!1,!0)}}if(c.allowSlidePrev=d,c.allowSlideNext=h,c.controller&&c.controller.control&&!o){const U={slideRealIndex:e,direction:i,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(k=>{!k.destroyed&&k.params.loop&&k.loopFix({...U,slideTo:k.params.slidesPerView===f.slidesPerView?n:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...U,slideTo:c.controller.control.params.slidesPerView===f.slidesPerView?n:!1})}c.emit("loopFix")}function cS(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||!n||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[r]=s}),t.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{n.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var uS={loopCreate:oS,loopFix:lS,loopDestroy:cS};function dS(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function hS(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var fS={setGrabCursor:dS,unsetGrabCursor:hS};function pS(t,e){e===void 0&&(e=this);function n(i){if(!i||i===gn()||i===Vt())return null;i.assignedSlot&&(i=i.assignedSlot);const s=i.closest(t);return!s&&!i.getRootNode?null:s||n(i.getRootNode().host)}return n(e)}function vm(t,e,n){const i=Vt(),{params:s}=t,r=s.edgeSwipeDetection,a=s.edgeSwipeThreshold;return r&&(n<=a||n>=i.innerWidth-a)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function mS(t){const e=this,n=gn();let i=t;i.originalEvent&&(i=i.originalEvent);const s=e.touchEventsData;if(i.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==i.pointerId)return;s.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(s.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){vm(e,i,i.targetTouches[0].pageX);return}const{params:r,touches:a,enabled:o}=e;if(!o||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i.target;if(r.touchEventsTarget==="wrapper"&&!x1(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||s.isTouched&&s.isMoved)return;const c=!!r.noSwipingClass&&r.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);const d=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,h=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(h?pS(d,l):l.closest(d))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;const p=a.currentX,f=a.currentY;if(!vm(e,i,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,s.touchStartTime=oi(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let m=!0;l.matches(s.focusableElements)&&(m=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),n.activeElement&&n.activeElement.matches(s.focusableElements)&&n.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&n.activeElement.blur();const v=m&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||v)&&!l.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function gS(t){const e=gn(),n=this,i=n.touchEventsData,{params:s,touches:r,rtlTranslate:a,enabled:o}=n;if(!o||!s.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(T=>T.identifier===i.touchId),!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l);return}const u=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper){r.startX=u,r.startY=d;return}if(!n.allowTouchMove){l.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:u,startY:d,currentX:u,currentY:d}),i.touchStartTime=oi());return}if(s.touchReleaseOnEdges&&!s.loop)if(n.isVertical()){if(d<r.startY&&n.translate<=n.maxTranslate()||d>r.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(a&&(u>r.startX&&-n.translate<=n.maxTranslate()||u<r.startX&&-n.translate>=n.minTranslate()))return;if(!a&&(u<r.startX&&n.translate<=n.maxTranslate()||u>r.startX&&n.translate>=n.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}i.allowTouchCallbacks&&n.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=u,r.currentY=d;const h=r.currentX-r.startX,p=r.currentY-r.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let T;n.isHorizontal()&&r.currentY===r.startY||n.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:h*h+p*p>=25&&(T=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,i.isScrolling=n.isHorizontal()?T>s.touchAngle:90-T>s.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let f=n.isHorizontal()?h:p,m=n.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(f=Math.abs(f)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),r.diff=f,f*=s.touchRatio,a&&(f=-f,m=-m);const v=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const g=n.params.loop&&!s.cssMode,_=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!i.isMoved){if(g&&_&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const T=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(T)}i.allowMomentumBounce=!1,s.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}if(new Date().getTime(),s._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&v!==n.touchesDirection&&g&&_&&Math.abs(f)>=1){Object.assign(r,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}n.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=f+i.startTranslate;let b=!0,y=s.resistanceRatio;if(s.touchReleaseOnEdges&&(y=0),f>0?(g&&_&&i.allowThresholdMove&&i.currentTranslate>(s.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(s.slidesPerView!=="auto"&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(b=!1,s.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+f)**y))):f<0&&(g&&_&&i.allowThresholdMove&&i.currentTranslate<(s.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(s.slidesPerView!=="auto"&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(s.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(b=!1,s.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-f)**y))),b&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(f)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=n.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&n.freeMode||s.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function vS(t){const e=this,n=e.touchEventsData;let i=t;i.originalEvent&&(i=i.originalEvent);let s;if(i.type==="touchend"||i.type==="touchcancel"){if(s=[...i.changedTouches].find(T=>T.identifier===n.touchId),!s||s.identifier!==n.touchId)return}else{if(n.touchId!==null||i.pointerId!==n.pointerId)return;s=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!a.simulateTouch&&i.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&a.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}a.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=oi(),h=d-n.touchStartTime;if(e.allowClick){const T=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(T&&T[0]||i.target,T),e.emit("tap click",i),h<300&&d-n.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(n.lastClickTime=oi(),Ta(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||o.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let p;if(a.followFinger?p=l?e.translate:-e.translate:p=-n.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const f=p>=-e.maxTranslate()&&!e.params.loop;let m=0,v=e.slidesSizesGrid[0];for(let T=0;T<c.length;T+=T<a.slidesPerGroupSkip?1:a.slidesPerGroup){const x=T<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[T+x]<"u"?(f||p>=c[T]&&p<c[T+x])&&(m=T,v=c[T+x]-c[T]):(f||p>=c[T])&&(m=T,v=c[c.length-1]-c[c.length-2])}let g=null,_=null;a.rewind&&(e.isBeginning?_=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const b=(p-c[m])/v,y=m<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(h>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(b>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?g:m+y):e.slideTo(m)),e.swipeDirection==="prev"&&(b>1-a.longSwipesRatio?e.slideTo(m+y):_!==null&&b<0&&Math.abs(b)>a.longSwipesRatio?e.slideTo(_):e.slideTo(m))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(m+y):e.slideTo(m):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:m+y),e.swipeDirection==="prev"&&e.slideTo(_!==null?_:m))}}function ym(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:s,snapGrid:r}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!o?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=s,t.allowSlideNext=i,t.params.watchOverflow&&r!==t.snapGrid&&t.checkOverflow()}function yS(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function _S(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let s;const r=t.maxTranslate()-t.minTranslate();r===0?s=0:s=(t.translate-t.minTranslate())/r,s!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function bS(t){const e=this;mc(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function ES(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const s0=(t,e)=>{const n=gn(),{params:i,el:s,wrapperEl:r,device:a}=t,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!s||typeof s=="string"||(n[l]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:o}),s[l]("touchstart",t.onTouchStart,{passive:!1}),s[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("touchmove",t.onTouchMove,{passive:!1,capture:o}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:o}),n[l]("touchend",t.onTouchEnd,{passive:!0}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("touchcancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),n[l]("contextmenu",t.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&s[l]("click",t.onClick,!0),i.cssMode&&r[l]("scroll",t.onScroll),i.updateOnWindowResize?t[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",ym,!0):t[c]("observerUpdate",ym,!0),s[l]("load",t.onLoad,{capture:!0}))};function wS(){const t=this,{params:e}=t;t.onTouchStart=mS.bind(t),t.onTouchMove=gS.bind(t),t.onTouchEnd=vS.bind(t),t.onDocumentTouchStart=ES.bind(t),e.cssMode&&(t.onScroll=_S.bind(t)),t.onClick=yS.bind(t),t.onLoad=bS.bind(t),s0(t,"on")}function xS(){s0(this,"off")}var SS={attachEvents:wS,detachEvents:xS};const _m=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function TS(){const t=this,{realIndex:e,initialized:n,params:i,el:s}=t,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const a=gn(),o=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",l=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?t.el:a.querySelector(i.breakpointsBase),c=t.getBreakpoint(r,o,l);if(!c||t.currentBreakpoint===c)return;const d=(c in r?r[c]:void 0)||t.originalParams,h=_m(t,i),p=_m(t,d),f=t.params.grabCursor,m=d.grabCursor,v=i.enabled;h&&!p?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!h&&p&&(s.classList.add(`${i.containerModifierClass}grid`),(d.grid.fill&&d.grid.fill==="column"||!d.grid.fill&&i.grid.fill==="column")&&s.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),f&&!m?t.unsetGrabCursor():!f&&m&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(x=>{if(typeof d[x]>"u")return;const S=i[x]&&i[x].enabled,M=d[x]&&d[x].enabled;S&&!M&&t[x].disable(),!S&&M&&t[x].enable()});const g=d.direction&&d.direction!==i.direction,_=i.loop&&(d.slidesPerView!==i.slidesPerView||g),b=i.loop;g&&n&&t.changeDirection(),Kn(t.params,d);const y=t.params.enabled,T=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),v&&!y?t.disable():!v&&y&&t.enable(),t.currentBreakpoint=c,t.emit("_beforeBreakpoint",d),n&&(_?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!b&&T?(t.loopCreate(e),t.updateSlides()):b&&!T&&t.loopDestroy()),t.emit("breakpoint",d)}function MS(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let i=!1;const s=Vt(),r=e==="window"?s.innerHeight:n.clientHeight,a=Object.keys(t).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:r*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=n.clientWidth&&(i=l)}return i||"max"}var AS={setBreakpoint:TS,getBreakpoint:MS};function CS(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(s=>{i[s]&&n.push(e+s)}):typeof i=="string"&&n.push(e+i)}),n}function PS(){const t=this,{classNames:e,params:n,rtl:i,el:s,device:r}=t,a=CS(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),s.classList.add(...e),t.emitContainerClasses()}function LS(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var RS={addClasses:PS,removeClasses:LS};function IS(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const s=t.slides.length-1,r=t.slidesGrid[s]+t.slidesSizesGrid[s]+i*2;t.isLocked=t.size>r}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var DS={checkOverflow:IS},bm={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function OS(t,e){return function(i){i===void 0&&(i={});const s=Object.keys(i)[0],r=i[s];if(typeof r!="object"||r===null){Kn(e,i);return}if(t[s]===!0&&(t[s]={enabled:!0}),s==="navigation"&&t[s]&&t[s].enabled&&!t[s].prevEl&&!t[s].nextEl&&(t[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&t[s]&&t[s].enabled&&!t[s].el&&(t[s].auto=!0),!(s in t&&"enabled"in r)){Kn(e,i);return}typeof t[s]=="object"&&!("enabled"in t[s])&&(t[s].enabled=!0),t[s]||(t[s]={enabled:!1}),Kn(e,i)}}const Ku={eventsEmitter:R1,update:V1,translate:q1,transition:Q1,slide:aS,loop:uS,grabCursor:fS,events:SS,breakpoints:AS,checkOverflow:DS,classes:RS},Zu={};class Ft{constructor(){let e,n;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?n=s[0]:[e,n]=s,n||(n={}),n=Kn({},n),e&&!n.el&&(n.el=e);const a=gn();if(n.el&&typeof n.el=="string"&&a.querySelectorAll(n.el).length>1){const u=[];return a.querySelectorAll(n.el).forEach(d=>{const h=Kn({},n,{el:d});u.push(new Ft(h))}),u}const o=this;o.__swiper__=!0,o.support=e0(),o.device=t0({userAgent:n.userAgent}),o.browser=n0(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],n.modules&&Array.isArray(n.modules)&&o.modules.push(...n.modules);const l={};o.modules.forEach(u=>{u({params:n,swiper:o,extendParams:OS(n,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=Kn({},bm,l);return o.params=Kn({},c,Zu,n),o.originalParams=Kn({},o.params),o.passedParams=Kn({},n),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:i}=this,s=bn(n,`.${i.slideClass}, swiper-slide`),r=No(s[0]);return No(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:n,params:i}=e;e.slides=bn(n,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),a=(i.maxTranslate()-s)*e+s;i.translateTo(a,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);n.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const i=this,{params:s,slides:r,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let u=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let d=r[c]?Math.ceil(r[c].swiperSlideSize):0,h;for(let p=c+1;p<r.length;p+=1)r[p]&&!h&&(d+=Math.ceil(r[p].swiperSlideSize),u+=1,d>l&&(h=!0));for(let p=c-1;p>=0;p-=1)r[p]&&!h&&(d+=r[p].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<r.length;d+=1)(n?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&mc(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(a.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const i=this,s=i.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let i=e||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const s=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):bn(i,s())[0];return!a&&n.params.createElements&&(a=Qn("div",n.params.wrapperClass),i.append(a),bn(i,`.${n.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(n,{el:i,wrapperEl:a,slidesEl:n.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:n.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Fs(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Fs(i,"direction")==="rtl"),wrongRTL:Fs(a,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const s=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&s.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?mc(n,r):r.addEventListener("load",a=>{mc(n,a.target)})}),Kd(n),n.initialized=!0,Kd(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const i=this,{params:s,el:r,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),n&&(i.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),_1(i)),i.destroyed=!0),null}static extendDefaults(e){Kn(Zu,e)}static get extendedDefaults(){return Zu}static get defaults(){return bm}static installModule(e){Ft.prototype.__modules__||(Ft.prototype.__modules__=[]);const n=Ft.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Ft.installModule(n)),Ft):(Ft.installModule(e),Ft)}}Object.keys(Ku).forEach(t=>{Object.keys(Ku[t]).forEach(e=>{Ft.prototype[e]=Ku[t][e]})});Ft.use([P1,L1]);function kS(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;n({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let r;const a=gn();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const o=a.createElement("div");function l(f,m){const v=e.params.virtual;if(v.cache&&e.virtual.cache[m])return e.virtual.cache[m];let g;return v.renderSlide?(g=v.renderSlide.call(e,f,m),typeof g=="string"&&(fs(o,g),g=o.children[0])):e.isElement?g=Qn("swiper-slide"):g=Qn("div",e.params.slideClass),g.setAttribute("data-swiper-slide-index",m),v.renderSlide||fs(g,f),v.cache&&(e.virtual.cache[m]=g),g}function c(f,m,v){const{slidesPerView:g,slidesPerGroup:_,centeredSlides:b,loop:y,initialSlide:T}=e.params;if(m&&!y&&T>0)return;const{addSlidesBefore:x,addSlidesAfter:S}=e.params.virtual,{from:M,to:w,slides:E,slidesGrid:C,offset:P}=e.virtual;e.params.cssMode||e.updateActiveIndex();const A=typeof v>"u"?e.activeIndex||0:v;let R;e.rtlTranslate?R="right":R=e.isHorizontal()?"left":"top";let N,U;b?(N=Math.floor(g/2)+_+S,U=Math.floor(g/2)+_+x):(N=g+(_-1)+S,U=(y?g:_)+x);let k=A-U,D=A+N;y||(k=Math.max(k,0),D=Math.min(D,E.length-1));let W=(e.slidesGrid[k]||0)-(e.slidesGrid[0]||0);y&&A>=U?(k-=U,b||(W+=e.slidesGrid[0])):y&&A<U&&(k=-U,b&&(W+=e.slidesGrid[0])),Object.assign(e.virtual,{from:k,to:D,offset:W,slidesGrid:e.slidesGrid,slidesBefore:U,slidesAfter:N});function O(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s("virtualUpdate")}if(M===k&&w===D&&!f){e.slidesGrid!==C&&W!==P&&e.slides.forEach(q=>{q.style[R]=`${W-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),s("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:W,from:k,to:D,slides:function(){const K=[];for(let G=k;G<=D;G+=1)K.push(E[G]);return K}()}),e.params.virtual.renderExternalUpdate?O():s("virtualUpdate");return}const B=[],V=[],j=q=>{let K=q;return q<0?K=E.length+q:K>=E.length&&(K=K-E.length),K};if(f)e.slides.filter(q=>q.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(q=>{q.remove()});else for(let q=M;q<=w;q+=1)if(q<k||q>D){const K=j(q);e.slides.filter(G=>G.matches(`.${e.params.slideClass}[data-swiper-slide-index="${K}"], swiper-slide[data-swiper-slide-index="${K}"]`)).forEach(G=>{G.remove()})}const Y=y?-E.length:0,H=y?E.length*2:E.length;for(let q=Y;q<H;q+=1)if(q>=k&&q<=D){const K=j(q);typeof w>"u"||f?V.push(K):(q>w&&V.push(K),q<M&&B.push(K))}if(V.forEach(q=>{e.slidesEl.append(l(E[q],q))}),y)for(let q=B.length-1;q>=0;q-=1){const K=B[q];e.slidesEl.prepend(l(E[K],K))}else B.sort((q,K)=>K-q),B.forEach(q=>{e.slidesEl.prepend(l(E[q],q))});bn(e.slidesEl,".swiper-slide, swiper-slide").forEach(q=>{q.style[R]=`${W-Math.abs(e.cssOverflowAdjustment())}px`}),O()}function u(f){if(typeof f=="object"&&"length"in f)for(let m=0;m<f.length;m+=1)f[m]&&e.virtual.slides.push(f[m]);else e.virtual.slides.push(f);c(!0)}function d(f){const m=e.activeIndex;let v=m+1,g=1;if(Array.isArray(f)){for(let _=0;_<f.length;_+=1)f[_]&&e.virtual.slides.unshift(f[_]);v=m+f.length,g=f.length}else e.virtual.slides.unshift(f);if(e.params.virtual.cache){const _=e.virtual.cache,b={};Object.keys(_).forEach(y=>{const T=_[y],x=T.getAttribute("data-swiper-slide-index");x&&T.setAttribute("data-swiper-slide-index",parseInt(x,10)+g),b[parseInt(y,10)+g]=T}),e.virtual.cache=b}c(!0),e.slideTo(v,0)}function h(f){if(typeof f>"u"||f===null)return;let m=e.activeIndex;if(Array.isArray(f))for(let v=f.length-1;v>=0;v-=1)e.params.virtual.cache&&(delete e.virtual.cache[f[v]],Object.keys(e.virtual.cache).forEach(g=>{g>f&&(e.virtual.cache[g-1]=e.virtual.cache[g],e.virtual.cache[g-1].setAttribute("data-swiper-slide-index",g-1),delete e.virtual.cache[g])})),e.virtual.slides.splice(f[v],1),f[v]<m&&(m-=1),m=Math.max(m,0);else e.params.virtual.cache&&(delete e.virtual.cache[f],Object.keys(e.virtual.cache).forEach(v=>{v>f&&(e.virtual.cache[v-1]=e.virtual.cache[v],e.virtual.cache[v-1].setAttribute("data-swiper-slide-index",v-1),delete e.virtual.cache[v])})),e.virtual.slides.splice(f,1),f<m&&(m-=1),m=Math.max(m,0);c(!0),e.slideTo(m,0)}function p(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),c(!0),e.slideTo(0,0)}i("beforeInit",()=>{if(!e.params.virtual.enabled)return;let f;if(typeof e.passedParams.virtual.slides>"u"){const m=[...e.slidesEl.children].filter(v=>v.matches(`.${e.params.slideClass}, swiper-slide`));m&&m.length&&(e.virtual.slides=[...m],f=!0,m.forEach((v,g)=>{v.setAttribute("data-swiper-slide-index",g),e.virtual.cache[g]=v,v.remove()}))}f||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,c(!1,!0)}),i("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{c()},100)):c())}),i("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&fo(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:u,prependSlide:d,removeSlide:h,removeAllSlides:p,update:c})}function NS(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r=gn(),a=Vt();e.keyboard={enabled:!1},n({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function o(u){if(!e.enabled)return;const{rtlTranslate:d}=e;let h=u;h.originalEvent&&(h=h.originalEvent);const p=h.keyCode||h.charCode,f=e.params.keyboard.pageUpDown,m=f&&p===33,v=f&&p===34,g=p===37,_=p===39,b=p===38,y=p===40;if(!e.allowSlideNext&&(e.isHorizontal()&&_||e.isVertical()&&y||v)||!e.allowSlidePrev&&(e.isHorizontal()&&g||e.isVertical()&&b||m))return!1;if(!(h.shiftKey||h.altKey||h.ctrlKey||h.metaKey)&&!(r.activeElement&&(r.activeElement.isContentEditable||r.activeElement.nodeName&&(r.activeElement.nodeName.toLowerCase()==="input"||r.activeElement.nodeName.toLowerCase()==="textarea")))){if(e.params.keyboard.onlyInViewport&&(m||v||g||_||b||y)){let T=!1;if(Sr(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&Sr(e.el,`.${e.params.slideActiveClass}`).length===0)return;const x=e.el,S=x.clientWidth,M=x.clientHeight,w=a.innerWidth,E=a.innerHeight,C=kc(x);d&&(C.left-=x.scrollLeft);const P=[[C.left,C.top],[C.left+S,C.top],[C.left,C.top+M],[C.left+S,C.top+M]];for(let A=0;A<P.length;A+=1){const R=P[A];if(R[0]>=0&&R[0]<=w&&R[1]>=0&&R[1]<=E){if(R[0]===0&&R[1]===0)continue;T=!0}}if(!T)return}e.isHorizontal()?((m||v||g||_)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),((v||_)&&!d||(m||g)&&d)&&e.slideNext(),((m||g)&&!d||(v||_)&&d)&&e.slidePrev()):((m||v||b||y)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),(v||y)&&e.slideNext(),(m||b)&&e.slidePrev()),s("keyPress",p)}}function l(){e.keyboard.enabled||(r.addEventListener("keydown",o),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(r.removeEventListener("keydown",o),e.keyboard.enabled=!1)}i("init",()=>{e.params.keyboard.enabled&&l()}),i("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:l,disable:c})}function FS(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r=Vt();n({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let a,o=oi(),l;const c=[];function u(b){let S=0,M=0,w=0,E=0;return"detail"in b&&(M=b.detail),"wheelDelta"in b&&(M=-b.wheelDelta/120),"wheelDeltaY"in b&&(M=-b.wheelDeltaY/120),"wheelDeltaX"in b&&(S=-b.wheelDeltaX/120),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(S=M,M=0),w=S*10,E=M*10,"deltaY"in b&&(E=b.deltaY),"deltaX"in b&&(w=b.deltaX),b.shiftKey&&!w&&(w=E,E=0),(w||E)&&b.deltaMode&&(b.deltaMode===1?(w*=40,E*=40):(w*=800,E*=800)),w&&!S&&(S=w<1?-1:1),E&&!M&&(M=E<1?-1:1),{spinX:S,spinY:M,pixelX:w,pixelY:E}}function d(){e.enabled&&(e.mouseEntered=!0)}function h(){e.enabled&&(e.mouseEntered=!1)}function p(b){return e.params.mousewheel.thresholdDelta&&b.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&oi()-o<e.params.mousewheel.thresholdTime?!1:b.delta>=6&&oi()-o<60?!0:(b.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),s("scroll",b.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),s("scroll",b.raw)),o=new r.Date().getTime(),!1)}function f(b){const y=e.params.mousewheel;if(b.direction<0){if(e.isEnd&&!e.params.loop&&y.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&y.releaseOnEdges)return!0;return!1}function m(b){let y=b,T=!0;if(!e.enabled||b.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const x=e.params.mousewheel;e.params.cssMode&&y.preventDefault();let S=e.el;e.params.mousewheel.eventsTarget!=="container"&&(S=document.querySelector(e.params.mousewheel.eventsTarget));const M=S&&S.contains(y.target);if(!e.mouseEntered&&!M&&!x.releaseOnEdges)return!0;y.originalEvent&&(y=y.originalEvent);let w=0;const E=e.rtlTranslate?-1:1,C=u(y);if(x.forceToAxis)if(e.isHorizontal())if(Math.abs(C.pixelX)>Math.abs(C.pixelY))w=-C.pixelX*E;else return!0;else if(Math.abs(C.pixelY)>Math.abs(C.pixelX))w=-C.pixelY;else return!0;else w=Math.abs(C.pixelX)>Math.abs(C.pixelY)?-C.pixelX*E:-C.pixelY;if(w===0)return!0;x.invert&&(w=-w);let P=e.getTranslate()+w*x.sensitivity;if(P>=e.minTranslate()&&(P=e.minTranslate()),P<=e.maxTranslate()&&(P=e.maxTranslate()),T=e.params.loop?!0:!(P===e.minTranslate()||P===e.maxTranslate()),T&&e.params.nested&&y.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const A={time:oi(),delta:Math.abs(w),direction:Math.sign(w),raw:b};c.length>=2&&c.shift();const R=c.length?c[c.length-1]:void 0;if(c.push(A),R?(A.direction!==R.direction||A.delta>R.delta||A.time>R.time+150)&&p(A):p(A),f(A))return!0}else{const A={time:oi(),delta:Math.abs(w),direction:Math.sign(w)},R=l&&A.time<l.time+500&&A.delta<=l.delta&&A.direction===l.direction;if(!R){l=void 0;let N=e.getTranslate()+w*x.sensitivity;const U=e.isBeginning,k=e.isEnd;if(N>=e.minTranslate()&&(N=e.minTranslate()),N<=e.maxTranslate()&&(N=e.maxTranslate()),e.setTransition(0),e.setTranslate(N),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!U&&e.isBeginning||!k&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:A.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(a),a=void 0,c.length>=15&&c.shift();const D=c.length?c[c.length-1]:void 0,W=c[0];if(c.push(A),D&&(A.delta>D.delta||A.direction!==D.direction))c.splice(0);else if(c.length>=15&&A.time-W.time<500&&W.delta-A.delta>=1&&A.delta<=6){const O=w>0?.8:.2;l=A,c.splice(0),a=Ta(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,O)},0)}a||(a=Ta(()=>{if(e.destroyed||!e.params)return;const O=.5;l=A,c.splice(0),e.slideToClosest(e.params.speed,!0,void 0,O)},500))}if(R||s("scroll",y),e.params.autoplay&&e.params.autoplay.disableOnInteraction&&e.autoplay.stop(),x.releaseOnEdges&&(N===e.minTranslate()||N===e.maxTranslate()))return!0}}return y.preventDefault?y.preventDefault():y.returnValue=!1,!1}function v(b){let y=e.el;e.params.mousewheel.eventsTarget!=="container"&&(y=document.querySelector(e.params.mousewheel.eventsTarget)),y[b]("mouseenter",d),y[b]("mouseleave",h),y[b]("wheel",m)}function g(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",m),!0):e.mousewheel.enabled?!1:(v("addEventListener"),e.mousewheel.enabled=!0,!0)}function _(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,m),!0):e.mousewheel.enabled?(v("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}i("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&_(),e.params.mousewheel.enabled&&g()}),i("destroy",()=>{e.params.cssMode&&g(),e.mousewheel.enabled&&_()}),Object.assign(e.mousewheel,{enable:g,disable:_})}function Rf(t,e,n,i){return t.params.createElements&&Object.keys(i).forEach(s=>{if(!n[s]&&n.auto===!0){let r=bn(t.el,`.${i[s]}`)[0];r||(r=Qn("div",i[s]),r.className=i[s],t.el.append(r)),n[s]=r,e[s]=r}}),n}function US(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(f){let m;return f&&typeof f=="string"&&e.isElement&&(m=e.el.querySelector(f)||e.hostEl.querySelector(f),m)?m:(f&&(typeof f=="string"&&(m=[...document.querySelectorAll(f)]),e.params.uniqueNavElements&&typeof f=="string"&&m&&m.length>1&&e.el.querySelectorAll(f).length===1?m=e.el.querySelector(f):m&&m.length===1&&(m=m[0])),f&&!m?f:m)}function a(f,m){const v=e.params.navigation;f=ht(f),f.forEach(g=>{g&&(g.classList[m?"add":"remove"](...v.disabledClass.split(" ")),g.tagName==="BUTTON"&&(g.disabled=m),e.params.watchOverflow&&e.enabled&&g.classList[e.isLocked?"add":"remove"](v.lockClass))})}function o(){const{nextEl:f,prevEl:m}=e.navigation;if(e.params.loop){a(m,!1),a(f,!1);return}a(m,e.isBeginning&&!e.params.rewind),a(f,e.isEnd&&!e.params.rewind)}function l(f){f.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function c(f){f.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function u(){const f=e.params.navigation;if(e.params.navigation=Rf(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(f.nextEl||f.prevEl))return;let m=r(f.nextEl),v=r(f.prevEl);Object.assign(e.navigation,{nextEl:m,prevEl:v}),m=ht(m),v=ht(v);const g=(_,b)=>{_&&_.addEventListener("click",b==="next"?c:l),!e.enabled&&_&&_.classList.add(...f.lockClass.split(" "))};m.forEach(_=>g(_,"next")),v.forEach(_=>g(_,"prev"))}function d(){let{nextEl:f,prevEl:m}=e.navigation;f=ht(f),m=ht(m);const v=(g,_)=>{g.removeEventListener("click",_==="next"?c:l),g.classList.remove(...e.params.navigation.disabledClass.split(" "))};f.forEach(g=>v(g,"next")),m.forEach(g=>v(g,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?p():(u(),o())}),i("toEdge fromEdge lock unlock",()=>{o()}),i("destroy",()=>{d()}),i("enable disable",()=>{let{nextEl:f,prevEl:m}=e.navigation;if(f=ht(f),m=ht(m),e.enabled){o();return}[...f,...m].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),i("click",(f,m)=>{let{nextEl:v,prevEl:g}=e.navigation;v=ht(v),g=ht(g);const _=m.target;let b=g.includes(_)||v.includes(_);if(e.isElement&&!b){const y=m.path||m.composedPath&&m.composedPath();y&&(b=y.find(T=>v.includes(T)||g.includes(T)))}if(e.params.navigation.hideOnClick&&!b){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===_||e.pagination.el.contains(_)))return;let y;v.length?y=v[0].classList.contains(e.params.navigation.hiddenClass):g.length&&(y=g[0].classList.contains(e.params.navigation.hiddenClass)),s(y===!0?"navigationShow":"navigationHide"),[...v,...g].filter(T=>!!T).forEach(T=>T.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),o()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:h,disable:p,update:o,init:u,destroy:d})}function is(t){return t===void 0&&(t=""),`.${t.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function zS(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:_=>_,formatFractionTotal:_=>_,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(_,b){const{bulletActiveClass:y}=e.params.pagination;_&&(_=_[`${b==="prev"?"previous":"next"}ElementSibling`],_&&(_.classList.add(`${y}-${b}`),_=_[`${b==="prev"?"previous":"next"}ElementSibling`],_&&_.classList.add(`${y}-${b}-${b}`)))}function u(_,b,y){if(_=_%y,b=b%y,b===_+1)return"next";if(b===_-1)return"previous"}function d(_){const b=_.target.closest(is(e.params.pagination.bulletClass));if(!b)return;_.preventDefault();const y=No(b)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===y)return;const T=u(e.realIndex,y,e.slides.length);T==="next"?e.slideNext():T==="previous"?e.slidePrev():e.slideToLoop(y)}else e.slideTo(y)}function h(){const _=e.rtl,b=e.params.pagination;if(l())return;let y=e.pagination.el;y=ht(y);let T,x;const S=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,M=e.params.loop?Math.ceil(S/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(x=e.previousRealIndex||0,T=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(T=e.snapIndex,x=e.previousSnapIndex):(x=e.previousIndex||0,T=e.activeIndex||0),b.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const w=e.pagination.bullets;let E,C,P;if(b.dynamicBullets&&(a=Yd(w[0],e.isHorizontal()?"width":"height"),y.forEach(A=>{A.style[e.isHorizontal()?"width":"height"]=`${a*(b.dynamicMainBullets+4)}px`}),b.dynamicMainBullets>1&&x!==void 0&&(o+=T-(x||0),o>b.dynamicMainBullets-1?o=b.dynamicMainBullets-1:o<0&&(o=0)),E=Math.max(T-o,0),C=E+(Math.min(w.length,b.dynamicMainBullets)-1),P=(C+E)/2),w.forEach(A=>{const R=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(N=>`${b.bulletActiveClass}${N}`)].map(N=>typeof N=="string"&&N.includes(" ")?N.split(" "):N).flat();A.classList.remove(...R)}),y.length>1)w.forEach(A=>{const R=No(A);R===T?A.classList.add(...b.bulletActiveClass.split(" ")):e.isElement&&A.setAttribute("part","bullet"),b.dynamicBullets&&(R>=E&&R<=C&&A.classList.add(...`${b.bulletActiveClass}-main`.split(" ")),R===E&&c(A,"prev"),R===C&&c(A,"next"))});else{const A=w[T];if(A&&A.classList.add(...b.bulletActiveClass.split(" ")),e.isElement&&w.forEach((R,N)=>{R.setAttribute("part",N===T?"bullet-active":"bullet")}),b.dynamicBullets){const R=w[E],N=w[C];for(let U=E;U<=C;U+=1)w[U]&&w[U].classList.add(...`${b.bulletActiveClass}-main`.split(" "));c(R,"prev"),c(N,"next")}}if(b.dynamicBullets){const A=Math.min(w.length,b.dynamicMainBullets+4),R=(a*A-a)/2-P*a,N=_?"right":"left";w.forEach(U=>{U.style[e.isHorizontal()?N:"top"]=`${R}px`})}}y.forEach((w,E)=>{if(b.type==="fraction"&&(w.querySelectorAll(is(b.currentClass)).forEach(C=>{C.textContent=b.formatFractionCurrent(T+1)}),w.querySelectorAll(is(b.totalClass)).forEach(C=>{C.textContent=b.formatFractionTotal(M)})),b.type==="progressbar"){let C;b.progressbarOpposite?C=e.isHorizontal()?"vertical":"horizontal":C=e.isHorizontal()?"horizontal":"vertical";const P=(T+1)/M;let A=1,R=1;C==="horizontal"?A=P:R=P,w.querySelectorAll(is(b.progressbarFillClass)).forEach(N=>{N.style.transform=`translate3d(0,0,0) scaleX(${A}) scaleY(${R})`,N.style.transitionDuration=`${e.params.speed}ms`})}b.type==="custom"&&b.renderCustom?(fs(w,b.renderCustom(e,T+1,M)),E===0&&s("paginationRender",w)):(E===0&&s("paginationRender",w),s("paginationUpdate",w)),e.params.watchOverflow&&e.enabled&&w.classList[e.isLocked?"add":"remove"](b.lockClass)})}function p(){const _=e.params.pagination;if(l())return;const b=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let y=e.pagination.el;y=ht(y);let T="";if(_.type==="bullets"){let x=e.params.loop?Math.ceil(b/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&x>b&&(x=b);for(let S=0;S<x;S+=1)_.renderBullet?T+=_.renderBullet.call(e,S,_.bulletClass):T+=`<${_.bulletElement} ${e.isElement?'part="bullet"':""} class="${_.bulletClass}"></${_.bulletElement}>`}_.type==="fraction"&&(_.renderFraction?T=_.renderFraction.call(e,_.currentClass,_.totalClass):T=`<span class="${_.currentClass}"></span> / <span class="${_.totalClass}"></span>`),_.type==="progressbar"&&(_.renderProgressbar?T=_.renderProgressbar.call(e,_.progressbarFillClass):T=`<span class="${_.progressbarFillClass}"></span>`),e.pagination.bullets=[],y.forEach(x=>{_.type!=="custom"&&fs(x,T||""),_.type==="bullets"&&e.pagination.bullets.push(...x.querySelectorAll(is(_.bulletClass)))}),_.type!=="custom"&&s("paginationRender",y[0])}function f(){e.params.pagination=Rf(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const _=e.params.pagination;if(!_.el)return;let b;typeof _.el=="string"&&e.isElement&&(b=e.el.querySelector(_.el)),!b&&typeof _.el=="string"&&(b=[...document.querySelectorAll(_.el)]),b||(b=_.el),!(!b||b.length===0)&&(e.params.uniqueNavElements&&typeof _.el=="string"&&Array.isArray(b)&&b.length>1&&(b=[...e.el.querySelectorAll(_.el)],b.length>1&&(b=b.find(y=>Sr(y,".swiper")[0]===e.el))),Array.isArray(b)&&b.length===1&&(b=b[0]),Object.assign(e.pagination,{el:b}),b=ht(b),b.forEach(y=>{_.type==="bullets"&&_.clickable&&y.classList.add(...(_.clickableClass||"").split(" ")),y.classList.add(_.modifierClass+_.type),y.classList.add(e.isHorizontal()?_.horizontalClass:_.verticalClass),_.type==="bullets"&&_.dynamicBullets&&(y.classList.add(`${_.modifierClass}${_.type}-dynamic`),o=0,_.dynamicMainBullets<1&&(_.dynamicMainBullets=1)),_.type==="progressbar"&&_.progressbarOpposite&&y.classList.add(_.progressbarOppositeClass),_.clickable&&y.addEventListener("click",d),e.enabled||y.classList.add(_.lockClass)}))}function m(){const _=e.params.pagination;if(l())return;let b=e.pagination.el;b&&(b=ht(b),b.forEach(y=>{y.classList.remove(_.hiddenClass),y.classList.remove(_.modifierClass+_.type),y.classList.remove(e.isHorizontal()?_.horizontalClass:_.verticalClass),_.clickable&&(y.classList.remove(...(_.clickableClass||"").split(" ")),y.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(y=>y.classList.remove(..._.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const _=e.params.pagination;let{el:b}=e.pagination;b=ht(b),b.forEach(y=>{y.classList.remove(_.horizontalClass,_.verticalClass),y.classList.add(e.isHorizontal()?_.horizontalClass:_.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?g():(f(),p(),h())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),i("snapIndexChange",()=>{h()}),i("snapGridLengthChange",()=>{p(),h()}),i("destroy",()=>{m()}),i("enable disable",()=>{let{el:_}=e.pagination;_&&(_=ht(_),_.forEach(b=>b.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{h()}),i("click",(_,b)=>{const y=b.target,T=ht(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&T&&T.length>0&&!y.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&y===e.navigation.nextEl||e.navigation.prevEl&&y===e.navigation.prevEl))return;const x=T[0].classList.contains(e.params.pagination.hiddenClass);s(x===!0?"paginationShow":"paginationHide"),T.forEach(S=>S.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:_}=e.pagination;_&&(_=ht(_),_.forEach(b=>b.classList.remove(e.params.pagination.paginationDisabledClass))),f(),p(),h()},g=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:_}=e.pagination;_&&(_=ht(_),_.forEach(b=>b.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:v,disable:g,render:p,update:h,init:f,destroy:m})}function BS(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r=gn();let a=!1,o=null,l=null,c,u,d,h;n({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function p(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:P,rtlTranslate:A}=e,{dragEl:R,el:N}=P,U=e.params.scrollbar,k=e.params.loop?e.progressLoop:e.progress;let D=u,W=(d-u)*k;A?(W=-W,W>0?(D=u-W,W=0):-W+u>d&&(D=d+W)):W<0?(D=u+W,W=0):W+u>d&&(D=d-W),e.isHorizontal()?(R.style.transform=`translate3d(${W}px, 0, 0)`,R.style.width=`${D}px`):(R.style.transform=`translate3d(0px, ${W}px, 0)`,R.style.height=`${D}px`),U.hide&&(clearTimeout(o),N.style.opacity=1,o=setTimeout(()=>{N.style.opacity=0,N.style.transitionDuration="400ms"},1e3))}function f(P){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${P}ms`)}function m(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:P}=e,{dragEl:A,el:R}=P;A.style.width="",A.style.height="",d=e.isHorizontal()?R.offsetWidth:R.offsetHeight,h=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?u=d*h:u=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?A.style.width=`${u}px`:A.style.height=`${u}px`,h>=1?R.style.display="none":R.style.display="",e.params.scrollbar.hide&&(R.style.opacity=0),e.params.watchOverflow&&e.enabled&&P.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function v(P){return e.isHorizontal()?P.clientX:P.clientY}function g(P){const{scrollbar:A,rtlTranslate:R}=e,{el:N}=A;let U;U=(v(P)-kc(N)[e.isHorizontal()?"left":"top"]-(c!==null?c:u/2))/(d-u),U=Math.max(Math.min(U,1),0),R&&(U=1-U);const k=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*U;e.updateProgress(k),e.setTranslate(k),e.updateActiveIndex(),e.updateSlidesClasses()}function _(P){const A=e.params.scrollbar,{scrollbar:R,wrapperEl:N}=e,{el:U,dragEl:k}=R;a=!0,c=P.target===k?v(P)-P.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,P.preventDefault(),P.stopPropagation(),N.style.transitionDuration="100ms",k.style.transitionDuration="100ms",g(P),clearTimeout(l),U.style.transitionDuration="0ms",A.hide&&(U.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",P)}function b(P){const{scrollbar:A,wrapperEl:R}=e,{el:N,dragEl:U}=A;a&&(P.preventDefault&&P.cancelable?P.preventDefault():P.returnValue=!1,g(P),R.style.transitionDuration="0ms",N.style.transitionDuration="0ms",U.style.transitionDuration="0ms",s("scrollbarDragMove",P))}function y(P){const A=e.params.scrollbar,{scrollbar:R,wrapperEl:N}=e,{el:U}=R;a&&(a=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",N.style.transitionDuration=""),A.hide&&(clearTimeout(l),l=Ta(()=>{U.style.opacity=0,U.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",P),A.snapOnRelease&&e.slideToClosest())}function T(P){const{scrollbar:A,params:R}=e,N=A.el;if(!N)return;const U=N,k=R.passiveListeners?{passive:!1,capture:!1}:!1,D=R.passiveListeners?{passive:!0,capture:!1}:!1;if(!U)return;const W=P==="on"?"addEventListener":"removeEventListener";U[W]("pointerdown",_,k),r[W]("pointermove",b,k),r[W]("pointerup",y,D)}function x(){!e.params.scrollbar.el||!e.scrollbar.el||T("on")}function S(){!e.params.scrollbar.el||!e.scrollbar.el||T("off")}function M(){const{scrollbar:P,el:A}=e;e.params.scrollbar=Rf(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const R=e.params.scrollbar;if(!R.el)return;let N;if(typeof R.el=="string"&&e.isElement&&(N=e.el.querySelector(R.el)),!N&&typeof R.el=="string"){if(N=r.querySelectorAll(R.el),!N.length)return}else N||(N=R.el);e.params.uniqueNavElements&&typeof R.el=="string"&&N.length>1&&A.querySelectorAll(R.el).length===1&&(N=A.querySelector(R.el)),N.length>0&&(N=N[0]),N.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass);let U;N&&(U=N.querySelector(is(e.params.scrollbar.dragClass)),U||(U=Qn("div",e.params.scrollbar.dragClass),N.append(U))),Object.assign(P,{el:N,dragEl:U}),R.draggable&&x(),N&&N.classList[e.enabled?"remove":"add"](...Ls(e.params.scrollbar.lockClass))}function w(){const P=e.params.scrollbar,A=e.scrollbar.el;A&&A.classList.remove(...Ls(e.isHorizontal()?P.horizontalClass:P.verticalClass)),S()}i("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const P=e.params.scrollbar;let{el:A}=e.scrollbar;A=ht(A),A.forEach(R=>{R.classList.remove(P.horizontalClass,P.verticalClass),R.classList.add(e.isHorizontal()?P.horizontalClass:P.verticalClass)})}),i("init",()=>{e.params.scrollbar.enabled===!1?C():(M(),m(),p())}),i("update resize observerUpdate lock unlock changeDirection",()=>{m()}),i("setTranslate",()=>{p()}),i("setTransition",(P,A)=>{f(A)}),i("enable disable",()=>{const{el:P}=e.scrollbar;P&&P.classList[e.enabled?"remove":"add"](...Ls(e.params.scrollbar.lockClass))}),i("destroy",()=>{w()});const E=()=>{e.el.classList.remove(...Ls(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...Ls(e.params.scrollbar.scrollbarDisabledClass)),M(),m(),p()},C=()=>{e.el.classList.add(...Ls(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...Ls(e.params.scrollbar.scrollbarDisabledClass)),w()};Object.assign(e.scrollbar,{enable:E,disable:C,updateSize:m,setTranslate:p,init:M,destroy:w})}function HS(t){let{swiper:e,extendParams:n,on:i}=t;n({parallax:{enabled:!1}});const s="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",r=(l,c)=>{const{rtl:u}=e,d=u?-1:1,h=l.getAttribute("data-swiper-parallax")||"0";let p=l.getAttribute("data-swiper-parallax-x"),f=l.getAttribute("data-swiper-parallax-y");const m=l.getAttribute("data-swiper-parallax-scale"),v=l.getAttribute("data-swiper-parallax-opacity"),g=l.getAttribute("data-swiper-parallax-rotate");if(p||f?(p=p||"0",f=f||"0"):e.isHorizontal()?(p=h,f="0"):(f=h,p="0"),p.indexOf("%")>=0?p=`${parseInt(p,10)*c*d}%`:p=`${p*c*d}px`,f.indexOf("%")>=0?f=`${parseInt(f,10)*c}%`:f=`${f*c}px`,typeof v<"u"&&v!==null){const b=v-(v-1)*(1-Math.abs(c));l.style.opacity=b}let _=`translate3d(${p}, ${f}, 0px)`;if(typeof m<"u"&&m!==null){const b=m-(m-1)*(1-Math.abs(c));_+=` scale(${b})`}if(g&&typeof g<"u"&&g!==null){const b=g*c*-1;_+=` rotate(${b}deg)`}l.style.transform=_},a=()=>{const{el:l,slides:c,progress:u,snapGrid:d,isElement:h}=e,p=bn(l,s);e.isElement&&p.push(...bn(e.hostEl,s)),p.forEach(f=>{r(f,u)}),c.forEach((f,m)=>{let v=f.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(v+=Math.ceil(m/2)-u*(d.length-1)),v=Math.min(Math.max(v,-1),1),f.querySelectorAll(`${s}, [data-swiper-parallax-rotate]`).forEach(g=>{r(g,v)})})},o=function(l){l===void 0&&(l=e.params.speed);const{el:c,hostEl:u}=e,d=[...c.querySelectorAll(s)];e.isElement&&d.push(...u.querySelectorAll(s)),d.forEach(h=>{let p=parseInt(h.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(p=0),h.style.transitionDuration=`${p}ms`})};i("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),i("init",()=>{e.params.parallax.enabled&&a()}),i("setTranslate",()=>{e.params.parallax.enabled&&a()}),i("setTransition",(l,c)=>{e.params.parallax.enabled&&o(c)})}function VS(t){let{swiper:e,extendParams:n,on:i,emit:s}=t;const r=Vt();n({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,panOnMouseMove:!1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let a=1,o=!1,l=!1,c={x:0,y:0};const u=-3;let d,h;const p=[],f={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},m={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},v={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let g=1;Object.defineProperty(e.zoom,"scale",{get(){return g},set(H){if(g!==H){const q=f.imageEl,K=f.slideEl;s("zoomChange",H,q,K)}g=H}});function _(){if(p.length<2)return 1;const H=p[0].pageX,q=p[0].pageY,K=p[1].pageX,G=p[1].pageY;return Math.sqrt((K-H)**2+(G-q)**2)}function b(){const H=e.params.zoom,q=f.imageWrapEl.getAttribute("data-swiper-zoom")||H.maxRatio;if(H.limitToOriginalSize&&f.imageEl&&f.imageEl.naturalWidth){const K=f.imageEl.naturalWidth/f.imageEl.offsetWidth;return Math.min(K,q)}return q}function y(){if(p.length<2)return{x:null,y:null};const H=f.imageEl.getBoundingClientRect();return[(p[0].pageX+(p[1].pageX-p[0].pageX)/2-H.x-r.scrollX)/a,(p[0].pageY+(p[1].pageY-p[0].pageY)/2-H.y-r.scrollY)/a]}function T(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function x(H){const q=T();return!!(H.target.matches(q)||e.slides.filter(K=>K.contains(H.target)).length>0)}function S(H){const q=`.${e.params.zoom.containerClass}`;return!!(H.target.matches(q)||[...e.hostEl.querySelectorAll(q)].filter(K=>K.contains(H.target)).length>0)}function M(H){if(H.pointerType==="mouse"&&p.splice(0,p.length),!x(H))return;const q=e.params.zoom;if(d=!1,h=!1,p.push(H),!(p.length<2)){if(d=!0,f.scaleStart=_(),!f.slideEl){f.slideEl=H.target.closest(`.${e.params.slideClass}, swiper-slide`),f.slideEl||(f.slideEl=e.slides[e.activeIndex]);let K=f.slideEl.querySelector(`.${q.containerClass}`);if(K&&(K=K.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),f.imageEl=K,K?f.imageWrapEl=Sr(f.imageEl,`.${q.containerClass}`)[0]:f.imageWrapEl=void 0,!f.imageWrapEl){f.imageEl=void 0;return}f.maxRatio=b()}if(f.imageEl){const[K,G]=y();f.originX=K,f.originY=G,f.imageEl.style.transitionDuration="0ms"}o=!0}}function w(H){if(!x(H))return;const q=e.params.zoom,K=e.zoom,G=p.findIndex(te=>te.pointerId===H.pointerId);G>=0&&(p[G]=H),!(p.length<2)&&(h=!0,f.scaleMove=_(),f.imageEl&&(K.scale=f.scaleMove/f.scaleStart*a,K.scale>f.maxRatio&&(K.scale=f.maxRatio-1+(K.scale-f.maxRatio+1)**.5),K.scale<q.minRatio&&(K.scale=q.minRatio+1-(q.minRatio-K.scale+1)**.5),f.imageEl.style.transform=`translate3d(0,0,0) scale(${K.scale})`))}function E(H){if(!x(H)||H.pointerType==="mouse"&&H.type==="pointerout")return;const q=e.params.zoom,K=e.zoom,G=p.findIndex(te=>te.pointerId===H.pointerId);G>=0&&p.splice(G,1),!(!d||!h)&&(d=!1,h=!1,f.imageEl&&(K.scale=Math.max(Math.min(K.scale,f.maxRatio),q.minRatio),f.imageEl.style.transitionDuration=`${e.params.speed}ms`,f.imageEl.style.transform=`translate3d(0,0,0) scale(${K.scale})`,a=K.scale,o=!1,K.scale>1&&f.slideEl?f.slideEl.classList.add(`${q.zoomedSlideClass}`):K.scale<=1&&f.slideEl&&f.slideEl.classList.remove(`${q.zoomedSlideClass}`),K.scale===1&&(f.originX=0,f.originY=0,f.slideEl=void 0)))}let C;function P(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function A(){clearTimeout(C),e.touchEventsData.preventTouchMoveFromPointerMove=!0,C=setTimeout(()=>{e.destroyed||P()})}function R(H){const q=e.device;if(!f.imageEl||m.isTouched)return;q.android&&H.cancelable&&H.preventDefault(),m.isTouched=!0;const K=p.length>0?p[0]:H;m.touchesStart.x=K.pageX,m.touchesStart.y=K.pageY}function N(H){const K=H.pointerType==="mouse"&&e.params.zoom.panOnMouseMove;if(!x(H)||!S(H))return;const G=e.zoom;if(!f.imageEl)return;if(!m.isTouched||!f.slideEl){K&&D(H);return}if(K){D(H);return}m.isMoved||(m.width=f.imageEl.offsetWidth||f.imageEl.clientWidth,m.height=f.imageEl.offsetHeight||f.imageEl.clientHeight,m.startX=qd(f.imageWrapEl,"x")||0,m.startY=qd(f.imageWrapEl,"y")||0,f.slideWidth=f.slideEl.offsetWidth,f.slideHeight=f.slideEl.offsetHeight,f.imageWrapEl.style.transitionDuration="0ms");const te=m.width*G.scale,ue=m.height*G.scale;if(m.minX=Math.min(f.slideWidth/2-te/2,0),m.maxX=-m.minX,m.minY=Math.min(f.slideHeight/2-ue/2,0),m.maxY=-m.minY,m.touchesCurrent.x=p.length>0?p[0].pageX:H.pageX,m.touchesCurrent.y=p.length>0?p[0].pageY:H.pageY,Math.max(Math.abs(m.touchesCurrent.x-m.touchesStart.x),Math.abs(m.touchesCurrent.y-m.touchesStart.y))>5&&(e.allowClick=!1),!m.isMoved&&!o){if(e.isHorizontal()&&(Math.floor(m.minX)===Math.floor(m.startX)&&m.touchesCurrent.x<m.touchesStart.x||Math.floor(m.maxX)===Math.floor(m.startX)&&m.touchesCurrent.x>m.touchesStart.x)){m.isTouched=!1,P();return}if(!e.isHorizontal()&&(Math.floor(m.minY)===Math.floor(m.startY)&&m.touchesCurrent.y<m.touchesStart.y||Math.floor(m.maxY)===Math.floor(m.startY)&&m.touchesCurrent.y>m.touchesStart.y)){m.isTouched=!1,P();return}}H.cancelable&&H.preventDefault(),H.stopPropagation(),A(),m.isMoved=!0;const X=(G.scale-a)/(f.maxRatio-e.params.zoom.minRatio),{originX:ne,originY:F}=f;m.currentX=m.touchesCurrent.x-m.touchesStart.x+m.startX+X*(m.width-ne*2),m.currentY=m.touchesCurrent.y-m.touchesStart.y+m.startY+X*(m.height-F*2),m.currentX<m.minX&&(m.currentX=m.minX+1-(m.minX-m.currentX+1)**.8),m.currentX>m.maxX&&(m.currentX=m.maxX-1+(m.currentX-m.maxX+1)**.8),m.currentY<m.minY&&(m.currentY=m.minY+1-(m.minY-m.currentY+1)**.8),m.currentY>m.maxY&&(m.currentY=m.maxY-1+(m.currentY-m.maxY+1)**.8),v.prevPositionX||(v.prevPositionX=m.touchesCurrent.x),v.prevPositionY||(v.prevPositionY=m.touchesCurrent.y),v.prevTime||(v.prevTime=Date.now()),v.x=(m.touchesCurrent.x-v.prevPositionX)/(Date.now()-v.prevTime)/2,v.y=(m.touchesCurrent.y-v.prevPositionY)/(Date.now()-v.prevTime)/2,Math.abs(m.touchesCurrent.x-v.prevPositionX)<2&&(v.x=0),Math.abs(m.touchesCurrent.y-v.prevPositionY)<2&&(v.y=0),v.prevPositionX=m.touchesCurrent.x,v.prevPositionY=m.touchesCurrent.y,v.prevTime=Date.now(),f.imageWrapEl.style.transform=`translate3d(${m.currentX}px, ${m.currentY}px,0)`}function U(){const H=e.zoom;if(p.length=0,!f.imageEl)return;if(!m.isTouched||!m.isMoved){m.isTouched=!1,m.isMoved=!1;return}m.isTouched=!1,m.isMoved=!1;let q=300,K=300;const G=v.x*q,te=m.currentX+G,ue=v.y*K,se=m.currentY+ue;v.x!==0&&(q=Math.abs((te-m.currentX)/v.x)),v.y!==0&&(K=Math.abs((se-m.currentY)/v.y));const X=Math.max(q,K);m.currentX=te,m.currentY=se;const ne=m.width*H.scale,F=m.height*H.scale;m.minX=Math.min(f.slideWidth/2-ne/2,0),m.maxX=-m.minX,m.minY=Math.min(f.slideHeight/2-F/2,0),m.maxY=-m.minY,m.currentX=Math.max(Math.min(m.currentX,m.maxX),m.minX),m.currentY=Math.max(Math.min(m.currentY,m.maxY),m.minY),f.imageWrapEl.style.transitionDuration=`${X}ms`,f.imageWrapEl.style.transform=`translate3d(${m.currentX}px, ${m.currentY}px,0)`}function k(){const H=e.zoom;f.slideEl&&e.activeIndex!==e.slides.indexOf(f.slideEl)&&(f.imageEl&&(f.imageEl.style.transform="translate3d(0,0,0) scale(1)"),f.imageWrapEl&&(f.imageWrapEl.style.transform="translate3d(0,0,0)"),f.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),H.scale=1,a=1,f.slideEl=void 0,f.imageEl=void 0,f.imageWrapEl=void 0,f.originX=0,f.originY=0)}function D(H){if(a<=1||!f.imageWrapEl||!x(H)||!S(H))return;const q=r.getComputedStyle(f.imageWrapEl).transform,K=new r.DOMMatrix(q);if(!l){l=!0,c.x=H.clientX,c.y=H.clientY,m.startX=K.e,m.startY=K.f,m.width=f.imageEl.offsetWidth||f.imageEl.clientWidth,m.height=f.imageEl.offsetHeight||f.imageEl.clientHeight,f.slideWidth=f.slideEl.offsetWidth,f.slideHeight=f.slideEl.offsetHeight;return}const G=(H.clientX-c.x)*u,te=(H.clientY-c.y)*u,ue=m.width*a,se=m.height*a,X=f.slideWidth,ne=f.slideHeight,F=Math.min(X/2-ue/2,0),fe=-F,ve=Math.min(ne/2-se/2,0),pe=-ve,Me=Math.max(Math.min(m.startX+G,fe),F),Pe=Math.max(Math.min(m.startY+te,pe),ve);f.imageWrapEl.style.transitionDuration="0ms",f.imageWrapEl.style.transform=`translate3d(${Me}px, ${Pe}px, 0)`,c.x=H.clientX,c.y=H.clientY,m.startX=Me,m.startY=Pe,m.currentX=Me,m.currentY=Pe}function W(H){const q=e.zoom,K=e.params.zoom;if(!f.slideEl){H&&H.target&&(f.slideEl=H.target.closest(`.${e.params.slideClass}, swiper-slide`)),f.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?f.slideEl=bn(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:f.slideEl=e.slides[e.activeIndex]);let le=f.slideEl.querySelector(`.${K.containerClass}`);le&&(le=le.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),f.imageEl=le,le?f.imageWrapEl=Sr(f.imageEl,`.${K.containerClass}`)[0]:f.imageWrapEl=void 0}if(!f.imageEl||!f.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),f.slideEl.classList.add(`${K.zoomedSlideClass}`);let G,te,ue,se,X,ne,F,fe,ve,pe,Me,Pe,Ce,z,L,Q,oe,he;typeof m.touchesStart.x>"u"&&H?(G=H.pageX,te=H.pageY):(G=m.touchesStart.x,te=m.touchesStart.y);const de=a,ee=typeof H=="number"?H:null;a===1&&ee&&(G=void 0,te=void 0,m.touchesStart.x=void 0,m.touchesStart.y=void 0);const ie=b();q.scale=ee||ie,a=ee||ie,H&&!(a===1&&ee)?(oe=f.slideEl.offsetWidth,he=f.slideEl.offsetHeight,ue=kc(f.slideEl).left+r.scrollX,se=kc(f.slideEl).top+r.scrollY,X=ue+oe/2-G,ne=se+he/2-te,ve=f.imageEl.offsetWidth||f.imageEl.clientWidth,pe=f.imageEl.offsetHeight||f.imageEl.clientHeight,Me=ve*q.scale,Pe=pe*q.scale,Ce=Math.min(oe/2-Me/2,0),z=Math.min(he/2-Pe/2,0),L=-Ce,Q=-z,de>0&&ee&&typeof m.currentX=="number"&&typeof m.currentY=="number"?(F=m.currentX*q.scale/de,fe=m.currentY*q.scale/de):(F=X*q.scale,fe=ne*q.scale),F<Ce&&(F=Ce),F>L&&(F=L),fe<z&&(fe=z),fe>Q&&(fe=Q)):(F=0,fe=0),ee&&q.scale===1&&(f.originX=0,f.originY=0),m.currentX=F,m.currentY=fe,f.imageWrapEl.style.transitionDuration="300ms",f.imageWrapEl.style.transform=`translate3d(${F}px, ${fe}px,0)`,f.imageEl.style.transitionDuration="300ms",f.imageEl.style.transform=`translate3d(0,0,0) scale(${q.scale})`}function O(){const H=e.zoom,q=e.params.zoom;if(!f.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?f.slideEl=bn(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:f.slideEl=e.slides[e.activeIndex];let K=f.slideEl.querySelector(`.${q.containerClass}`);K&&(K=K.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),f.imageEl=K,K?f.imageWrapEl=Sr(f.imageEl,`.${q.containerClass}`)[0]:f.imageWrapEl=void 0}!f.imageEl||!f.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),H.scale=1,a=1,m.currentX=void 0,m.currentY=void 0,m.touchesStart.x=void 0,m.touchesStart.y=void 0,f.imageWrapEl.style.transitionDuration="300ms",f.imageWrapEl.style.transform="translate3d(0,0,0)",f.imageEl.style.transitionDuration="300ms",f.imageEl.style.transform="translate3d(0,0,0) scale(1)",f.slideEl.classList.remove(`${q.zoomedSlideClass}`),f.slideEl=void 0,f.originX=0,f.originY=0,e.params.zoom.panOnMouseMove&&(c={x:0,y:0},l&&(l=!1,m.startX=0,m.startY=0)))}function B(H){const q=e.zoom;q.scale&&q.scale!==1?O():W(H)}function V(){const H=e.params.passiveListeners?{passive:!0,capture:!1}:!1,q=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:H,activeListenerWithCapture:q}}function j(){const H=e.zoom;if(H.enabled)return;H.enabled=!0;const{passiveListener:q,activeListenerWithCapture:K}=V();e.wrapperEl.addEventListener("pointerdown",M,q),e.wrapperEl.addEventListener("pointermove",w,K),["pointerup","pointercancel","pointerout"].forEach(G=>{e.wrapperEl.addEventListener(G,E,q)}),e.wrapperEl.addEventListener("pointermove",N,K)}function Y(){const H=e.zoom;if(!H.enabled)return;H.enabled=!1;const{passiveListener:q,activeListenerWithCapture:K}=V();e.wrapperEl.removeEventListener("pointerdown",M,q),e.wrapperEl.removeEventListener("pointermove",w,K),["pointerup","pointercancel","pointerout"].forEach(G=>{e.wrapperEl.removeEventListener(G,E,q)}),e.wrapperEl.removeEventListener("pointermove",N,K)}i("init",()=>{e.params.zoom.enabled&&j()}),i("destroy",()=>{Y()}),i("touchStart",(H,q)=>{e.zoom.enabled&&R(q)}),i("touchEnd",(H,q)=>{e.zoom.enabled&&U()}),i("doubleTap",(H,q)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&B(q)}),i("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&k()}),i("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&k()}),Object.assign(e.zoom,{enable:j,disable:Y,in:W,out:O,toggle:B})}function $S(t){let{swiper:e,extendParams:n,on:i}=t;n({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(c,u){const d=function(){let m,v,g;return(_,b)=>{for(v=-1,m=_.length;m-v>1;)g=m+v>>1,_[g]<=b?v=g:m=g;return m}}();this.x=c,this.y=u,this.lastIndex=c.length-1;let h,p;return this.interpolate=function(m){return m?(p=d(this.x,m),h=p-1,(m-this.x[h])*(this.y[p]-this.y[h])/(this.x[p]-this.x[h])+this.y[h]):0},this}function r(c){e.controller.spline=e.params.loop?new s(e.slidesGrid,c.slidesGrid):new s(e.snapGrid,c.snapGrid)}function a(c,u){const d=e.controller.control;let h,p;const f=e.constructor;function m(v){if(v.destroyed)return;const g=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(r(v),p=-e.controller.spline.interpolate(-g)),(!p||e.params.controller.by==="container")&&(h=(v.maxTranslate()-v.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(h)||!Number.isFinite(h))&&(h=1),p=(g-e.minTranslate())*h+v.minTranslate()),e.params.controller.inverse&&(p=v.maxTranslate()-p),v.updateProgress(p),v.setTranslate(p,e),v.updateActiveIndex(),v.updateSlidesClasses()}if(Array.isArray(d))for(let v=0;v<d.length;v+=1)d[v]!==u&&d[v]instanceof f&&m(d[v]);else d instanceof f&&u!==d&&m(d)}function o(c,u){const d=e.constructor,h=e.controller.control;let p;function f(m){m.destroyed||(m.setTransition(c,e),c!==0&&(m.transitionStart(),m.params.autoHeight&&Ta(()=>{m.updateAutoHeight()}),_o(m.wrapperEl,()=>{h&&m.transitionEnd()})))}if(Array.isArray(h))for(p=0;p<h.length;p+=1)h[p]!==u&&h[p]instanceof d&&f(h[p]);else h instanceof d&&u!==h&&f(h)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}i("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(u=>{if(e.controller.control||(e.controller.control=[]),u&&u.swiper)e.controller.control.push(u.swiper);else if(u){const d=`${e.params.eventsPrefix}init`,h=p=>{e.controller.control.push(p.detail[0]),e.update(),u.removeEventListener(d,h)};u.addEventListener(d,h)}});return}e.controller.control=e.params.controller.control}),i("update",()=>{l()}),i("resize",()=>{l()}),i("observerUpdate",()=>{l()}),i("setTranslate",(c,u,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(u,d)}),i("setTransition",(c,u,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(u,d)}),Object.assign(e.controller,{setTranslate:a,setTransition:o})}function GS(t){let{swiper:e,extendParams:n,on:i}=t;n({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let s=null,r,a,o=new Date().getTime();function l(k){const D=s;D.length!==0&&fs(D,k)}function c(k){const D=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(k).replace(/x/g,D)}function u(k){k=ht(k),k.forEach(D=>{D.setAttribute("tabIndex","0")})}function d(k){k=ht(k),k.forEach(D=>{D.setAttribute("tabIndex","-1")})}function h(k,D){k=ht(k),k.forEach(W=>{W.setAttribute("role",D)})}function p(k,D){k=ht(k),k.forEach(W=>{W.setAttribute("aria-roledescription",D)})}function f(k,D){k=ht(k),k.forEach(W=>{W.setAttribute("aria-controls",D)})}function m(k,D){k=ht(k),k.forEach(W=>{W.setAttribute("aria-label",D)})}function v(k,D){k=ht(k),k.forEach(W=>{W.setAttribute("id",D)})}function g(k,D){k=ht(k),k.forEach(W=>{W.setAttribute("aria-live",D)})}function _(k){k=ht(k),k.forEach(D=>{D.setAttribute("aria-disabled",!0)})}function b(k){k=ht(k),k.forEach(D=>{D.setAttribute("aria-disabled",!1)})}function y(k){if(k.keyCode!==13&&k.keyCode!==32)return;const D=e.params.a11y,W=k.target;if(!(e.pagination&&e.pagination.el&&(W===e.pagination.el||e.pagination.el.contains(k.target))&&!k.target.matches(is(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){const O=ht(e.navigation.prevEl);ht(e.navigation.nextEl).includes(W)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(D.lastSlideMessage):l(D.nextSlideMessage)),O.includes(W)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(D.firstSlideMessage):l(D.prevSlideMessage))}e.pagination&&W.matches(is(e.params.pagination.bulletClass))&&W.click()}}function T(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:k,prevEl:D}=e.navigation;D&&(e.isBeginning?(_(D),d(D)):(b(D),u(D))),k&&(e.isEnd?(_(k),d(k)):(b(k),u(k)))}function x(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function S(){return x()&&e.params.pagination.clickable}function M(){const k=e.params.a11y;x()&&e.pagination.bullets.forEach(D=>{e.params.pagination.clickable&&(u(D),e.params.pagination.renderBullet||(h(D,"button"),m(D,k.paginationBulletMessage.replace(/\{\{index\}\}/,No(D)+1)))),D.matches(is(e.params.pagination.bulletActiveClass))?D.setAttribute("aria-current","true"):D.removeAttribute("aria-current")})}const w=(k,D,W)=>{u(k),k.tagName!=="BUTTON"&&(h(k,"button"),k.addEventListener("keydown",y)),m(k,W),f(k,D)},E=k=>{a&&a!==k.target&&!a.contains(k.target)&&(r=!0),e.a11y.clicked=!0},C=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},P=k=>{o=new Date().getTime()},A=k=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-o<100)return;const D=k.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!D||!e.slides.includes(D))return;a=D;const W=e.slides.indexOf(D)===e.activeIndex,O=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(D);W||O||k.sourceCapabilities&&k.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{r||(e.params.loop?e.slideToLoop(e.getSlideIndexWhenGrid(parseInt(D.getAttribute("data-swiper-slide-index"))),0):e.slideTo(e.getSlideIndexWhenGrid(e.slides.indexOf(D)),0),r=!1)}))},R=()=>{const k=e.params.a11y;k.itemRoleDescriptionMessage&&p(e.slides,k.itemRoleDescriptionMessage),k.slideRole&&h(e.slides,k.slideRole);const D=e.slides.length;k.slideLabelMessage&&e.slides.forEach((W,O)=>{const B=e.params.loop?parseInt(W.getAttribute("data-swiper-slide-index"),10):O,V=k.slideLabelMessage.replace(/\{\{index\}\}/,B+1).replace(/\{\{slidesLength\}\}/,D);m(W,V)})},N=()=>{const k=e.params.a11y;e.el.append(s);const D=e.el;k.containerRoleDescriptionMessage&&p(D,k.containerRoleDescriptionMessage),k.containerMessage&&m(D,k.containerMessage),k.containerRole&&h(D,k.containerRole);const W=e.wrapperEl,O=k.id||W.getAttribute("id")||`swiper-wrapper-${c(16)}`,B=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";v(W,O),g(W,B),R();let{nextEl:V,prevEl:j}=e.navigation?e.navigation:{};V=ht(V),j=ht(j),V&&V.forEach(H=>w(H,O,k.nextSlideMessage)),j&&j.forEach(H=>w(H,O,k.prevSlideMessage)),S()&&ht(e.pagination.el).forEach(q=>{q.addEventListener("keydown",y)}),gn().addEventListener("visibilitychange",P),e.el.addEventListener("focus",A,!0),e.el.addEventListener("focus",A,!0),e.el.addEventListener("pointerdown",E,!0),e.el.addEventListener("pointerup",C,!0)};function U(){s&&s.remove();let{nextEl:k,prevEl:D}=e.navigation?e.navigation:{};k=ht(k),D=ht(D),k&&k.forEach(O=>O.removeEventListener("keydown",y)),D&&D.forEach(O=>O.removeEventListener("keydown",y)),S()&&ht(e.pagination.el).forEach(B=>{B.removeEventListener("keydown",y)}),gn().removeEventListener("visibilitychange",P),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",A,!0),e.el.removeEventListener("pointerdown",E,!0),e.el.removeEventListener("pointerup",C,!0))}i("beforeInit",()=>{s=Qn("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),i("afterInit",()=>{e.params.a11y.enabled&&N()}),i("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&R()}),i("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&T()}),i("paginationUpdate",()=>{e.params.a11y.enabled&&M()}),i("destroy",()=>{e.params.a11y.enabled&&U()})}function WS(t){let{swiper:e,extendParams:n,on:i}=t;n({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let s=!1,r={};const a=p=>p.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),o=p=>{const f=Vt();let m;p?m=new URL(p):m=f.location;const v=m.pathname.slice(1).split("/").filter(y=>y!==""),g=v.length,_=v[g-2],b=v[g-1];return{key:_,value:b}},l=(p,f)=>{const m=Vt();if(!s||!e.params.history.enabled)return;let v;e.params.url?v=new URL(e.params.url):v=m.location;const g=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${f}"]`):e.slides[f];let _=a(g.getAttribute("data-history"));if(e.params.history.root.length>0){let y=e.params.history.root;y[y.length-1]==="/"&&(y=y.slice(0,y.length-1)),_=`${y}/${p?`${p}/`:""}${_}`}else v.pathname.includes(p)||(_=`${p?`${p}/`:""}${_}`);e.params.history.keepQuery&&(_+=v.search);const b=m.history.state;b&&b.value===_||(e.params.history.replaceState?m.history.replaceState({value:_},null,_):m.history.pushState({value:_},null,_))},c=(p,f,m)=>{if(f)for(let v=0,g=e.slides.length;v<g;v+=1){const _=e.slides[v];if(a(_.getAttribute("data-history"))===f){const y=e.getSlideIndex(_);e.slideTo(y,p,m)}}else e.slideTo(0,p,m)},u=()=>{r=o(e.params.url),c(e.params.speed,r.value,!1)},d=()=>{const p=Vt();if(e.params.history){if(!p.history||!p.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(s=!0,r=o(e.params.url),!r.key&&!r.value){e.params.history.replaceState||p.addEventListener("popstate",u);return}c(0,r.value,e.params.runCallbacksOnInit),e.params.history.replaceState||p.addEventListener("popstate",u)}},h=()=>{const p=Vt();e.params.history.replaceState||p.removeEventListener("popstate",u)};i("init",()=>{e.params.history.enabled&&d()}),i("destroy",()=>{e.params.history.enabled&&h()}),i("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l(e.params.history.key,e.activeIndex)}),i("slideChange",()=>{s&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function jS(t){let{swiper:e,extendParams:n,emit:i,on:s}=t,r=!1;const a=gn(),o=Vt();n({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,p){if(e.virtual&&e.params.virtual.enabled){const f=e.slides.find(v=>v.getAttribute("data-hash")===p);return f?parseInt(f.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(bn(e.slidesEl,`.${e.params.slideClass}[data-hash="${p}"], swiper-slide[data-hash="${p}"]`)[0])}}});const l=()=>{i("hashChange");const h=a.location.hash.replace("#",""),p=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],f=p?p.getAttribute("data-hash"):"";if(h!==f){const m=e.params.hashNavigation.getSlideIndex(e,h);if(typeof m>"u"||Number.isNaN(m))return;e.slideTo(m)}},c=()=>{if(!r||!e.params.hashNavigation.enabled)return;const h=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],p=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${p}`||""),i("hashSet")):(a.location.hash=p||"",i("hashSet"))},u=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;const h=a.location.hash.replace("#","");if(h){const f=e.params.hashNavigation.getSlideIndex(e,h);e.slideTo(f||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&o.addEventListener("hashchange",l)},d=()=>{e.params.hashNavigation.watchState&&o.removeEventListener("hashchange",l)};s("init",()=>{e.params.hashNavigation.enabled&&u()}),s("destroy",()=>{e.params.hashNavigation.enabled&&d()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{r&&c()}),s("slideChange",()=>{r&&e.params.cssMode&&c()})}function XS(t){let{swiper:e,extendParams:n,on:i,emit:s,params:r}=t;e.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=r&&r.autoplay?r.autoplay.delay:3e3,c=r&&r.autoplay?r.autoplay.delay:3e3,u,d=new Date().getTime(),h,p,f,m,v,g,_;function b(D){!e||e.destroyed||!e.wrapperEl||D.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",b),!(_||D.detail&&D.detail.bySwiperTouchMove)&&E())}const y=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?h=!0:h&&(c=u,h=!1);const D=e.autoplay.paused?u:d+c-new Date().getTime();e.autoplay.timeLeft=D,s("autoplayTimeLeft",D,D/l),o=requestAnimationFrame(()=>{y()})},T=()=>{let D;return e.virtual&&e.params.virtual.enabled?D=e.slides.find(O=>O.classList.contains("swiper-slide-active")):D=e.slides[e.activeIndex],D?parseInt(D.getAttribute("data-swiper-autoplay"),10):void 0},x=D=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),y();let W=typeof D>"u"?e.params.autoplay.delay:D;l=e.params.autoplay.delay,c=e.params.autoplay.delay;const O=T();!Number.isNaN(O)&&O>0&&typeof D>"u"&&(W=O,l=O,c=O),u=W;const B=e.params.speed,V=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(B,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,B,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(B,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,B,!0,!0),s("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{x()})))};return W>0?(clearTimeout(a),a=setTimeout(()=>{V()},W)):requestAnimationFrame(()=>{V()}),W},S=()=>{d=new Date().getTime(),e.autoplay.running=!0,x(),s("autoplayStart")},M=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),s("autoplayStop")},w=(D,W)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),D||(g=!0);const O=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",b):E()};if(e.autoplay.paused=!0,W){v&&(u=e.params.autoplay.delay),v=!1,O();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),O())},E=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),g?(g=!1,x(u)):x(),e.autoplay.paused=!1,s("autoplayResume"))},C=()=>{if(e.destroyed||!e.autoplay.running)return;const D=gn();D.visibilityState==="hidden"&&(g=!0,w(!0)),D.visibilityState==="visible"&&E()},P=D=>{D.pointerType==="mouse"&&(g=!0,_=!0,!(e.animating||e.autoplay.paused)&&w(!0))},A=D=>{D.pointerType==="mouse"&&(_=!1,e.autoplay.paused&&E())},R=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",P),e.el.addEventListener("pointerleave",A))},N=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",P),e.el.removeEventListener("pointerleave",A))},U=()=>{gn().addEventListener("visibilitychange",C)},k=()=>{gn().removeEventListener("visibilitychange",C)};i("init",()=>{e.params.autoplay.enabled&&(R(),U(),S())}),i("destroy",()=>{N(),k(),e.autoplay.running&&M()}),i("_freeModeStaticRelease",()=>{(f||g)&&E()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?M():w(!0,!0)}),i("beforeTransitionStart",(D,W,O)=>{e.destroyed||!e.autoplay.running||(O||!e.params.autoplay.disableOnInteraction?w(!0,!0):M())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){M();return}p=!0,f=!1,g=!1,m=setTimeout(()=>{g=!0,f=!0,w(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(m),clearTimeout(a),e.params.autoplay.disableOnInteraction){f=!1,p=!1;return}f&&e.params.cssMode&&E(),f=!1,p=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:S,stop:M,pause:w,resume:E})}function qS(t){let{swiper:e,extendParams:n,on:i}=t;n({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;e.thumbs={swiper:null};function a(){const c=e.thumbs.swiper;if(!c||c.destroyed)return;const u=c.clickedIndex,d=c.clickedSlide;if(d&&d.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof u>"u"||u===null)return;let h;c.params.loop?h=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):h=u,e.params.loop?e.slideToLoop(h):e.slideTo(h)}function o(){const{thumbs:c}=e.params;if(s)return!1;s=!0;const u=e.constructor;if(c.swiper instanceof u){if(c.swiper.destroyed)return s=!1,!1;e.thumbs.swiper=c.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(ho(c.swiper)){const d=Object.assign({},c.swiper);Object.assign(d,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new u(d),r=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",a),!0}function l(c){const u=e.thumbs.swiper;if(!u||u.destroyed)return;const d=u.params.slidesPerView==="auto"?u.slidesPerViewDynamic():u.params.slidesPerView;let h=1;const p=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(h=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),u.slides.forEach(v=>v.classList.remove(p)),u.params.loop||u.params.virtual&&u.params.virtual.enabled)for(let v=0;v<h;v+=1)bn(u.slidesEl,`[data-swiper-slide-index="${e.realIndex+v}"]`).forEach(g=>{g.classList.add(p)});else for(let v=0;v<h;v+=1)u.slides[e.realIndex+v]&&u.slides[e.realIndex+v].classList.add(p);const f=e.params.thumbs.autoScrollOffset,m=f&&!u.params.loop;if(e.realIndex!==u.realIndex||m){const v=u.activeIndex;let g,_;if(u.params.loop){const b=u.slides.find(y=>y.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);g=u.slides.indexOf(b),_=e.activeIndex>e.previousIndex?"next":"prev"}else g=e.realIndex,_=g>e.previousIndex?"next":"prev";m&&(g+=_==="next"?f:-1*f),u.visibleSlidesIndexes&&u.visibleSlidesIndexes.indexOf(g)<0&&(u.params.centeredSlides?g>v?g=g-Math.floor(d/2)+1:g=g+Math.floor(d/2)-1:g>v&&u.params.slidesPerGroup,u.slideTo(g,c?0:void 0))}}i("beforeInit",()=>{const{thumbs:c}=e.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){const u=gn(),d=()=>{const p=typeof c.swiper=="string"?u.querySelector(c.swiper):c.swiper;if(p&&p.swiper)c.swiper=p.swiper,o(),l(!0);else if(p){const f=`${e.params.eventsPrefix}init`,m=v=>{c.swiper=v.detail[0],p.removeEventListener(f,m),o(),l(!0),c.swiper.update(),e.update()};p.addEventListener(f,m)}return p},h=()=>{if(e.destroyed)return;d()||requestAnimationFrame(h)};requestAnimationFrame(h)}else o(),l(!0)}),i("slideChange update resize observerUpdate",()=>{l()}),i("setTransition",(c,u)=>{const d=e.thumbs.swiper;!d||d.destroyed||d.setTransition(u)}),i("beforeDestroy",()=>{const c=e.thumbs.swiper;!c||c.destroyed||r&&c.destroy()}),Object.assign(e.thumbs,{init:o,update:l})}function YS(t){let{swiper:e,extendParams:n,emit:i,once:s}=t;n({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(e.params.cssMode)return;const l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function a(){if(e.params.cssMode)return;const{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:oi()})}function o(l){let{currentPos:c}=l;if(e.params.cssMode)return;const{params:u,wrapperEl:d,rtlTranslate:h,snapGrid:p,touchEventsData:f}=e,v=oi()-f.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<p.length?e.slideTo(p.length-1):e.slideTo(e.slides.length-1);return}if(u.freeMode.momentum){if(f.velocities.length>1){const M=f.velocities.pop(),w=f.velocities.pop(),E=M.position-w.position,C=M.time-w.time;e.velocity=E/C,e.velocity/=2,Math.abs(e.velocity)<u.freeMode.minimumVelocity&&(e.velocity=0),(C>150||oi()-M.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=u.freeMode.momentumVelocityRatio,f.velocities.length=0;let g=1e3*u.freeMode.momentumRatio;const _=e.velocity*g;let b=e.translate+_;h&&(b=-b);let y=!1,T;const x=Math.abs(e.velocity)*20*u.freeMode.momentumBounceRatio;let S;if(b<e.maxTranslate())u.freeMode.momentumBounce?(b+e.maxTranslate()<-x&&(b=e.maxTranslate()-x),T=e.maxTranslate(),y=!0,f.allowMomentumBounce=!0):b=e.maxTranslate(),u.loop&&u.centeredSlides&&(S=!0);else if(b>e.minTranslate())u.freeMode.momentumBounce?(b-e.minTranslate()>x&&(b=e.minTranslate()+x),T=e.minTranslate(),y=!0,f.allowMomentumBounce=!0):b=e.minTranslate(),u.loop&&u.centeredSlides&&(S=!0);else if(u.freeMode.sticky){let M;for(let w=0;w<p.length;w+=1)if(p[w]>-b){M=w;break}Math.abs(p[M]-b)<Math.abs(p[M-1]-b)||e.swipeDirection==="next"?b=p[M]:b=p[M-1],b=-b}if(S&&s("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(h?g=Math.abs((-b-e.translate)/e.velocity):g=Math.abs((b-e.translate)/e.velocity),u.freeMode.sticky){const M=Math.abs((h?-b:b)-e.translate),w=e.slidesSizesGrid[e.activeIndex];M<w?g=u.speed:M<2*w?g=u.speed*1.5:g=u.speed*2.5}}else if(u.freeMode.sticky){e.slideToClosest();return}u.freeMode.momentumBounce&&y?(e.updateProgress(T),e.setTransition(g),e.setTranslate(b),e.transitionStart(!0,e.swipeDirection),e.animating=!0,_o(d,()=>{!e||e.destroyed||!f.allowMomentumBounce||(i("momentumBounce"),e.setTransition(u.speed),setTimeout(()=>{e.setTranslate(T),_o(d,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(i("_freeModeNoMomentumRelease"),e.updateProgress(b),e.setTransition(g),e.setTranslate(b),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,_o(d,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(b),e.updateActiveIndex(),e.updateSlidesClasses()}else if(u.freeMode.sticky){e.slideToClosest();return}else u.freeMode&&i("_freeModeNoMomentumRelease");(!u.freeMode.momentum||v>=u.longSwipesMs)&&(i("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:r,onTouchMove:a,onTouchEnd:o}})}function KS(t){let{swiper:e,extendParams:n,on:i}=t;n({grid:{rows:1,fill:"column"}});let s,r,a,o;const l=()=>{let m=e.params.spaceBetween;return typeof m=="string"&&m.indexOf("%")>=0?m=parseFloat(m.replace("%",""))/100*e.size:typeof m=="string"&&(m=parseFloat(m)),m},c=m=>{const{slidesPerView:v}=e.params,{rows:g,fill:_}=e.params.grid,b=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:m.length;a=Math.floor(b/g),Math.floor(b/g)===b/g?s=b:s=Math.ceil(b/g)*g,v!=="auto"&&_==="row"&&(s=Math.max(s,v*g)),r=s/g},u=()=>{e.slides&&e.slides.forEach(m=>{m.swiperSlideGridSet&&(m.style.height="",m.style[e.getDirectionLabel("margin-top")]="")})},d=(m,v,g)=>{const{slidesPerGroup:_}=e.params,b=l(),{rows:y,fill:T}=e.params.grid,x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:g.length;let S,M,w;if(T==="row"&&_>1){const E=Math.floor(m/(_*y)),C=m-y*_*E,P=E===0?_:Math.min(Math.ceil((x-E*y*_)/y),_);w=Math.floor(C/P),M=C-w*P+E*_,S=M+w*s/y,v.style.order=S}else T==="column"?(M=Math.floor(m/y),w=m-M*y,(M>a||M===a&&w===y-1)&&(w+=1,w>=y&&(w=0,M+=1))):(w=Math.floor(m/r),M=m-w*r);v.row=w,v.column=M,v.style.height=`calc((100% - ${(y-1)*b}px) / ${y})`,v.style[e.getDirectionLabel("margin-top")]=w!==0?b&&`${b}px`:"",v.swiperSlideGridSet=!0},h=(m,v)=>{const{centeredSlides:g,roundLengths:_}=e.params,b=l(),{rows:y}=e.params.grid;if(e.virtualSize=(m+b)*s,e.virtualSize=Math.ceil(e.virtualSize/y)-b,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),g){const T=[];for(let x=0;x<v.length;x+=1){let S=v[x];_&&(S=Math.floor(S)),v[x]<e.virtualSize+v[0]&&T.push(S)}v.splice(0,v.length),v.push(...T)}},p=()=>{o=e.params.grid&&e.params.grid.rows>1},f=()=>{const{params:m,el:v}=e,g=m.grid&&m.grid.rows>1;o&&!g?(v.classList.remove(`${m.containerModifierClass}grid`,`${m.containerModifierClass}grid-column`),a=1,e.emitContainerClasses()):!o&&g&&(v.classList.add(`${m.containerModifierClass}grid`),m.grid.fill==="column"&&v.classList.add(`${m.containerModifierClass}grid-column`),e.emitContainerClasses()),o=g};i("init",p),i("update",f),e.grid={initSlides:c,unsetSlides:u,updateSlide:d,updateWrapperSize:h}}function ZS(t){const e=this,{params:n,slidesEl:i}=e;n.loop&&e.loopDestroy();const s=r=>{if(typeof r=="string"){const a=document.createElement("div");fs(a,r),i.append(a.children[0]),fs(a,"")}else i.append(r)};if(typeof t=="object"&&"length"in t)for(let r=0;r<t.length;r+=1)t[r]&&s(t[r]);else s(t);e.recalcSlides(),n.loop&&e.loopCreate(),(!n.observer||e.isElement)&&e.update()}function QS(t){const e=this,{params:n,activeIndex:i,slidesEl:s}=e;n.loop&&e.loopDestroy();let r=i+1;const a=o=>{if(typeof o=="string"){const l=document.createElement("div");fs(l,o),s.prepend(l.children[0]),fs(l,"")}else s.prepend(o)};if(typeof t=="object"&&"length"in t){for(let o=0;o<t.length;o+=1)t[o]&&a(t[o]);r=i+t.length}else a(t);e.recalcSlides(),n.loop&&e.loopCreate(),(!n.observer||e.isElement)&&e.update(),e.slideTo(r,0,!1)}function JS(t,e){const n=this,{params:i,activeIndex:s,slidesEl:r}=n;let a=s;i.loop&&(a-=n.loopedSlides,n.loopDestroy(),n.recalcSlides());const o=n.slides.length;if(t<=0){n.prependSlide(e);return}if(t>=o){n.appendSlide(e);return}let l=a>t?a+1:a;const c=[];for(let u=o-1;u>=t;u-=1){const d=n.slides[u];d.remove(),c.unshift(d)}if(typeof e=="object"&&"length"in e){for(let u=0;u<e.length;u+=1)e[u]&&r.append(e[u]);l=a>t?a+e.length:a}else r.append(e);for(let u=0;u<c.length;u+=1)r.append(c[u]);n.recalcSlides(),i.loop&&n.loopCreate(),(!i.observer||n.isElement)&&n.update(),i.loop?n.slideTo(l+n.loopedSlides,0,!1):n.slideTo(l,0,!1)}function eT(t){const e=this,{params:n,activeIndex:i}=e;let s=i;n.loop&&(s-=e.loopedSlides,e.loopDestroy());let r=s,a;if(typeof t=="object"&&"length"in t){for(let o=0;o<t.length;o+=1)a=t[o],e.slides[a]&&e.slides[a].remove(),a<r&&(r-=1);r=Math.max(r,0)}else a=t,e.slides[a]&&e.slides[a].remove(),a<r&&(r-=1),r=Math.max(r,0);e.recalcSlides(),n.loop&&e.loopCreate(),(!n.observer||e.isElement)&&e.update(),n.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function tT(){const t=this,e=[];for(let n=0;n<t.slides.length;n+=1)e.push(n);t.removeSlide(e)}function nT(t){let{swiper:e}=t;Object.assign(e,{appendSlide:ZS.bind(e),prependSlide:QS.bind(e),addSlide:JS.bind(e),removeSlide:eT.bind(e),removeAllSlides:tT.bind(e)})}function Na(t){const{effect:e,swiper:n,on:i,setTranslate:s,setTransition:r,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:c}=t;i("beforeInit",()=>{if(n.params.effect!==e)return;n.classNames.push(`${n.params.containerModifierClass}${e}`),o&&o()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const d=a?a():{};Object.assign(n.params,d),Object.assign(n.originalParams,d)}),i("setTranslate _virtualUpdated",()=>{n.params.effect===e&&s()}),i("setTransition",(d,h)=>{n.params.effect===e&&r(h)}),i("transitionEnd",()=>{if(n.params.effect===e&&l){if(!c||!c().slideShadows)return;n.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let u;i("virtualUpdate",()=>{n.params.effect===e&&(n.slides.length||(u=!0),requestAnimationFrame(()=>{u&&n.slides&&n.slides.length&&(s(),u=!1)}))})}function il(t,e){const n=Rr(e);return n!==e&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function lu(t){let{swiper:e,duration:n,transformElements:i,allSlides:s}=t;const{activeIndex:r}=e,a=o=>o.parentElement?o.parentElement:e.slides.find(c=>c.shadowRoot&&c.shadowRoot===o.parentNode);if(e.params.virtualTranslate&&n!==0){let o=!1,l;s?l=i:l=i.filter(c=>{const u=c.classList.contains("swiper-slide-transform")?a(c):c;return e.getSlideIndex(u)===r}),l.forEach(c=>{_o(c,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const u=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(u)})})}}function iT(t){let{swiper:e,extendParams:n,on:i}=t;n({fadeEffect:{crossFade:!1}}),Na({effect:"fade",swiper:e,on:i,setTranslate:()=>{const{slides:a}=e,o=e.params.fadeEffect;for(let l=0;l<a.length;l+=1){const c=e.slides[l];let d=-c.swiperSlideOffset;e.params.virtualTranslate||(d-=e.translate);let h=0;e.isHorizontal()||(h=d,d=0);const p=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),f=il(o,c);f.style.opacity=p,f.style.transform=`translate3d(${d}px, ${h}px, 0px)`}},setTransition:a=>{const o=e.slides.map(l=>Rr(l));o.forEach(l=>{l.style.transitionDuration=`${a}ms`}),lu({swiper:e,duration:a,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function sT(t){let{swiper:e,extendParams:n,on:i}=t;n({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const s=(l,c,u)=>{let d=u?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=u?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=Qn("div",`swiper-slide-shadow-cube swiper-slide-shadow-${u?"left":"top"}`.split(" ")),l.append(d)),h||(h=Qn("div",`swiper-slide-shadow-cube swiper-slide-shadow-${u?"right":"bottom"}`.split(" ")),l.append(h)),d&&(d.style.opacity=Math.max(-c,0)),h&&(h.style.opacity=Math.max(c,0))};Na({effect:"cube",swiper:e,on:i,setTranslate:()=>{const{el:l,wrapperEl:c,slides:u,width:d,height:h,rtlTranslate:p,size:f,browser:m}=e,v=ou(e),g=e.params.cubeEffect,_=e.isHorizontal(),b=e.virtual&&e.params.virtual.enabled;let y=0,T;g.shadow&&(_?(T=e.wrapperEl.querySelector(".swiper-cube-shadow"),T||(T=Qn("div","swiper-cube-shadow"),e.wrapperEl.append(T)),T.style.height=`${d}px`):(T=l.querySelector(".swiper-cube-shadow"),T||(T=Qn("div","swiper-cube-shadow"),l.append(T))));for(let S=0;S<u.length;S+=1){const M=u[S];let w=S;b&&(w=parseInt(M.getAttribute("data-swiper-slide-index"),10));let E=w*90,C=Math.floor(E/360);p&&(E=-E,C=Math.floor(-E/360));const P=Math.max(Math.min(M.progress,1),-1);let A=0,R=0,N=0;w%4===0?(A=-C*4*f,N=0):(w-1)%4===0?(A=0,N=-C*4*f):(w-2)%4===0?(A=f+C*4*f,N=f):(w-3)%4===0&&(A=-f,N=3*f+f*4*C),p&&(A=-A),_||(R=A,A=0);const U=`rotateX(${v(_?0:-E)}deg) rotateY(${v(_?E:0)}deg) translate3d(${A}px, ${R}px, ${N}px)`;P<=1&&P>-1&&(y=w*90+P*90,p&&(y=-w*90-P*90)),M.style.transform=U,g.slideShadows&&s(M,P,_)}if(c.style.transformOrigin=`50% 50% -${f/2}px`,c.style["-webkit-transform-origin"]=`50% 50% -${f/2}px`,g.shadow)if(_)T.style.transform=`translate3d(0px, ${d/2+g.shadowOffset}px, ${-d/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${g.shadowScale})`;else{const S=Math.abs(y)-Math.floor(Math.abs(y)/90)*90,M=1.5-(Math.sin(S*2*Math.PI/360)/2+Math.cos(S*2*Math.PI/360)/2),w=g.shadowScale,E=g.shadowScale/M,C=g.shadowOffset;T.style.transform=`scale3d(${w}, 1, ${E}) translate3d(0px, ${h/2+C}px, ${-h/2/E}px) rotateX(-89.99deg)`}const x=(m.isSafari||m.isWebView)&&m.needPerspectiveFix?-f/2:0;c.style.transform=`translate3d(0px,0,${x}px) rotateX(${v(e.isHorizontal()?0:y)}deg) rotateY(${v(e.isHorizontal()?-y:0)}deg)`,c.style.setProperty("--swiper-cube-translate-z",`${x}px`)},setTransition:l=>{const{el:c,slides:u}=e;if(u.forEach(d=>{d.style.transitionDuration=`${l}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const d=c.querySelector(".swiper-cube-shadow");d&&(d.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{const l=e.isHorizontal();e.slides.forEach(c=>{const u=Math.max(Math.min(c.progress,1),-1);s(c,u,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Ma(t,e,n){const i=`swiper-slide-shadow${n?`-${n}`:""}${t?` swiper-slide-shadow-${t}`:""}`,s=Rr(e);let r=s.querySelector(`.${i.split(" ").join(".")}`);return r||(r=Qn("div",i.split(" ")),s.append(r)),r}function rT(t){let{swiper:e,extendParams:n,on:i}=t;n({flipEffect:{slideShadows:!0,limitRotation:!0}});const s=(l,c)=>{let u=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),d=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");u||(u=Ma("flip",l,e.isHorizontal()?"left":"top")),d||(d=Ma("flip",l,e.isHorizontal()?"right":"bottom")),u&&(u.style.opacity=Math.max(-c,0)),d&&(d.style.opacity=Math.max(c,0))};Na({effect:"flip",swiper:e,on:i,setTranslate:()=>{const{slides:l,rtlTranslate:c}=e,u=e.params.flipEffect,d=ou(e);for(let h=0;h<l.length;h+=1){const p=l[h];let f=p.progress;e.params.flipEffect.limitRotation&&(f=Math.max(Math.min(p.progress,1),-1));const m=p.swiperSlideOffset;let g=-180*f,_=0,b=e.params.cssMode?-m-e.translate:-m,y=0;e.isHorizontal()?c&&(g=-g):(y=b,b=0,_=-g,g=0),p.style.zIndex=-Math.abs(Math.round(f))+l.length,u.slideShadows&&s(p,f);const T=`translate3d(${b}px, ${y}px, 0px) rotateX(${d(_)}deg) rotateY(${d(g)}deg)`,x=il(u,p);x.style.transform=T}},setTransition:l=>{const c=e.slides.map(u=>Rr(u));c.forEach(u=>{u.style.transitionDuration=`${l}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>{d.style.transitionDuration=`${l}ms`})}),lu({swiper:e,duration:l,transformElements:c})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let c=l.progress;e.params.flipEffect.limitRotation&&(c=Math.max(Math.min(l.progress,1),-1)),s(l,c)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function aT(t){let{swiper:e,extendParams:n,on:i}=t;n({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Na({effect:"coverflow",swiper:e,on:i,setTranslate:()=>{const{width:a,height:o,slides:l,slidesSizesGrid:c}=e,u=e.params.coverflowEffect,d=e.isHorizontal(),h=e.translate,p=d?-h+a/2:-h+o/2,f=d?u.rotate:-u.rotate,m=u.depth,v=ou(e);for(let g=0,_=l.length;g<_;g+=1){const b=l[g],y=c[g],T=b.swiperSlideOffset,x=(p-T-y/2)/y,S=typeof u.modifier=="function"?u.modifier(x):x*u.modifier;let M=d?f*S:0,w=d?0:f*S,E=-m*Math.abs(S),C=u.stretch;typeof C=="string"&&C.indexOf("%")!==-1&&(C=parseFloat(u.stretch)/100*y);let P=d?0:C*S,A=d?C*S:0,R=1-(1-u.scale)*Math.abs(S);Math.abs(A)<.001&&(A=0),Math.abs(P)<.001&&(P=0),Math.abs(E)<.001&&(E=0),Math.abs(M)<.001&&(M=0),Math.abs(w)<.001&&(w=0),Math.abs(R)<.001&&(R=0);const N=`translate3d(${A}px,${P}px,${E}px)  rotateX(${v(w)}deg) rotateY(${v(M)}deg) scale(${R})`,U=il(u,b);if(U.style.transform=N,b.style.zIndex=-Math.abs(Math.round(S))+1,u.slideShadows){let k=d?b.querySelector(".swiper-slide-shadow-left"):b.querySelector(".swiper-slide-shadow-top"),D=d?b.querySelector(".swiper-slide-shadow-right"):b.querySelector(".swiper-slide-shadow-bottom");k||(k=Ma("coverflow",b,d?"left":"top")),D||(D=Ma("coverflow",b,d?"right":"bottom")),k&&(k.style.opacity=S>0?S:0),D&&(D.style.opacity=-S>0?-S:0)}}},setTransition:a=>{e.slides.map(l=>Rr(l)).forEach(l=>{l.style.transitionDuration=`${a}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${a}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function oT(t){let{swiper:e,extendParams:n,on:i}=t;n({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const s=o=>typeof o=="string"?o:`${o}px`;Na({effect:"creative",swiper:e,on:i,setTranslate:()=>{const{slides:o,wrapperEl:l,slidesSizesGrid:c}=e,u=e.params.creativeEffect,{progressMultiplier:d}=u,h=e.params.centeredSlides,p=ou(e);if(h){const f=c[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${f}px))`}for(let f=0;f<o.length;f+=1){const m=o[f],v=m.progress,g=Math.min(Math.max(m.progress,-u.limitProgress),u.limitProgress);let _=g;h||(_=Math.min(Math.max(m.originalProgress,-u.limitProgress),u.limitProgress));const b=m.swiperSlideOffset,y=[e.params.cssMode?-b-e.translate:-b,0,0],T=[0,0,0];let x=!1;e.isHorizontal()||(y[1]=y[0],y[0]=0);let S={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};g<0?(S=u.next,x=!0):g>0&&(S=u.prev,x=!0),y.forEach((R,N)=>{y[N]=`calc(${R}px + (${s(S.translate[N])} * ${Math.abs(g*d)}))`}),T.forEach((R,N)=>{let U=S.rotate[N]*Math.abs(g*d);T[N]=U}),m.style.zIndex=-Math.abs(Math.round(v))+o.length;const M=y.join(", "),w=`rotateX(${p(T[0])}deg) rotateY(${p(T[1])}deg) rotateZ(${p(T[2])}deg)`,E=_<0?`scale(${1+(1-S.scale)*_*d})`:`scale(${1-(1-S.scale)*_*d})`,C=_<0?1+(1-S.opacity)*_*d:1-(1-S.opacity)*_*d,P=`translate3d(${M}) ${w} ${E}`;if(x&&S.shadow||!x){let R=m.querySelector(".swiper-slide-shadow");if(!R&&S.shadow&&(R=Ma("creative",m)),R){const N=u.shadowPerProgress?g*(1/u.limitProgress):g;R.style.opacity=Math.min(Math.max(Math.abs(N),0),1)}}const A=il(u,m);A.style.transform=P,A.style.opacity=C,S.origin&&(A.style.transformOrigin=S.origin)}},setTransition:o=>{const l=e.slides.map(c=>Rr(c));l.forEach(c=>{c.style.transitionDuration=`${o}ms`,c.querySelectorAll(".swiper-slide-shadow").forEach(u=>{u.style.transitionDuration=`${o}ms`})}),lu({swiper:e,duration:o,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function lT(t){let{swiper:e,extendParams:n,on:i}=t;n({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),Na({effect:"cards",swiper:e,on:i,setTranslate:()=>{const{slides:a,activeIndex:o,rtlTranslate:l}=e,c=e.params.cardsEffect,{startTranslate:u,isTouched:d}=e.touchEventsData,h=l?-e.translate:e.translate;for(let p=0;p<a.length;p+=1){const f=a[p],m=f.progress,v=Math.min(Math.max(m,-4),4);let g=f.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(g-=a[0].swiperSlideOffset);let _=e.params.cssMode?-g-e.translate:-g,b=0;const y=-100*Math.abs(v);let T=1,x=-c.perSlideRotate*v,S=c.perSlideOffset-Math.abs(v)*.75;const M=e.virtual&&e.params.virtual.enabled?e.virtual.from+p:p,w=(M===o||M===o-1)&&v>0&&v<1&&(d||e.params.cssMode)&&h<u,E=(M===o||M===o+1)&&v<0&&v>-1&&(d||e.params.cssMode)&&h>u;if(w||E){const R=(1-Math.abs((Math.abs(v)-.5)/.5))**.5;x+=-28*v*R,T+=-.5*R,S+=96*R,b=`${-25*R*Math.abs(v)}%`}if(v<0?_=`calc(${_}px ${l?"-":"+"} (${S*Math.abs(v)}%))`:v>0?_=`calc(${_}px ${l?"-":"+"} (-${S*Math.abs(v)}%))`:_=`${_}px`,!e.isHorizontal()){const R=b;b=_,_=R}const C=v<0?`${1+(1-T)*v}`:`${1-(1-T)*v}`,P=`
        translate3d(${_}, ${b}, ${y}px)
        rotateZ(${c.rotate?l?-x:x:0}deg)
        scale(${C})
      `;if(c.slideShadows){let R=f.querySelector(".swiper-slide-shadow");R||(R=Ma("cards",f)),R&&(R.style.opacity=Math.min(Math.max((Math.abs(v)-.5)/.5,0),1))}f.style.zIndex=-Math.abs(Math.round(m))+a.length;const A=il(c,f);A.style.transform=P}},setTransition:a=>{const o=e.slides.map(l=>Rr(l));o.forEach(l=>{l.style.transitionDuration=`${a}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${a}ms`})}),lu({swiper:e,duration:a,transformElements:o})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}const cT=[kS,NS,FS,US,zS,BS,HS,VS,$S,GS,WS,jS,XS,qS,YS,KS,nT,iT,sT,rT,aT,oT,lT];Ft.use(cT);new Ft(".section-top--backdrop-swiper",{grabCursor:!0,slidesPerView:1,loop:!0,spaceBetween:20,pagination:{el:".section-top--backdrop-swiper .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},speed:1e3,effect:"fade"});new Ft(".shares--swiper",{grabCursor:!0,slidesPerView:3,loop:!0,spaceBetween:25,pagination:{el:".shares .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{loop:!1},1024:{slidesPerView:2.3,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".doctors--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".doctors .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},575:{slidesPerView:1.8,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".offices--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,autoHeight:!0,pagination:{el:".offices .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},575:{slidesPerView:1.8,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".reviews--swiper",{grabCursor:!0,slidesPerView:2,loop:!0,spaceBetween:25,pagination:{el:".reviews .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:1.8,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.3,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".partners--swiper",{slidesPerView:6.5,spaceBetween:25,loop:!0,speed:6e3,autoplay:{enabled:!0,delay:1},centeredSlides:!0,allowTouchMove:!1,breakpoints:{1200:{},1024:{slidesPerView:5.5,spaceBetween:20},768:{slidesPerView:4.2,spaceBetween:20},575:{slidesPerView:3.2,spaceBetween:15},0:{slidesPerView:1.8,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".news--swiper",{grabCursor:!0,slidesPerView:3,loop:!0,spaceBetween:25,pagination:{el:".news .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{loop:!1},1024:{slidesPerView:2.3,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".certificates--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".certificates .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.2,spaceBetween:20},768:{slidesPerView:2.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".stay-conditions--swiper",{grabCursor:!0,loop:!0,pagination:{el:".stay-conditions .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1024:{loop:!1},768:{slidesPerView:2.2,spaceBetween:20},575:{slidesPerView:1.7,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".hospital--swiper",{grabCursor:!0,loop:!0,pagination:{el:".hospital .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1024:{loop:!1},768:{slidesPerView:2.2,spaceBetween:20},575:{slidesPerView:1.7,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".media--swiper",{grabCursor:!0,loop:!0,slidesPerView:4.5,spaceBetween:25,pagination:{el:".media-content .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5},768:{slidesPerView:2.7,spaceBetween:20},575:{slidesPerView:2.2,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}},observer:!0,observeParents:!0,observeSlideChildren:!0});new Ft(".template-shares--swiper",{grabCursor:!0,slidesPerView:1,loop:!0,spaceBetween:25,pagination:{el:".template-shares--swiper .swiper-pagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:3},navigation:{nextEl:".template-shares--swiper .swiper-buttons .button-slider-next",prevEl:".template-shares--swiper .swiper-buttons .button-slider-prev"},autoplay:{delay:1e4,disableOnInteraction:!1},breakpoints:{1024:{},768:{spaceBetween:20,slidesPerView:2},0:{spaceBetween:15}},on:{init:function(){this.update()},resize:function(){this.update()}}});new Ft(".offices-anchor--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,autoHeight:!0,navigation:{nextEl:".offices-anchor--swiper .swiper-buttons .button-slider-next",prevEl:".offices-anchor--swiper .swiper-buttons .button-slider-prev"},autoplay:{delay:1e4,disableOnInteraction:!1},breakpoints:{1400:{},1200:{slidesPerView:3},1024:{slidesPerView:3},768:{spaceBetween:20,slidesPerView:2},575:{spaceBetween:15,slidesPerView:1},0:{spaceBetween:15,slidesPerView:1}}});document.querySelectorAll(".offices-direction-thumbs--swiper").forEach(function(t,e){var n=document.querySelectorAll(".offices-direction--swiper")[e];if(t&&n){var i=new Ft(t,{grabCursor:!0,spaceBetween:8,slidesPerView:"auto"});new Ft(n,{grabCursor:!0,slidesPerView:1,loop:!0,breakpoints:{1200:{spaceBetween:25},576:{spaceBetween:20},0:{}},autoplay:{delay:1e4,disableOnInteraction:!1},navigation:{nextEl:n.querySelector(".swiper-buttons .button-slider-next"),prevEl:n.querySelector(".swiper-buttons .button-slider-prev")},thumbs:{swiper:i}})}});var r0={exports:{}};/*!
 * Select2 4.1.0-rc.0
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */(function(t){(function(e){t.exports?t.exports=function(n,i){return i===void 0&&(typeof window<"u"?i=Rc:i=Rc(n)),e(i),i}:e(jQuery)})(function(e){var n=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var s=e.fn.select2.amd;var s;return function(){if(!s||!s.requirejs){s?a=s:s={};/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var r,a,o;(function(l){var c,u,d,h,p={},f={},m={},v={},g=Object.prototype.hasOwnProperty,_=[].slice,b=/\.js$/;function y(A,R){return g.call(A,R)}function T(A,R){var N,U,k,D,W,O,B,V,j,Y,H,q,K=R&&R.split("/"),G=m.map,te=G&&G["*"]||{};if(A){for(A=A.split("/"),W=A.length-1,m.nodeIdCompat&&b.test(A[W])&&(A[W]=A[W].replace(b,"")),A[0].charAt(0)==="."&&K&&(q=K.slice(0,K.length-1),A=q.concat(A)),j=0;j<A.length;j++)if(H=A[j],H===".")A.splice(j,1),j-=1;else if(H===".."){if(j===0||j===1&&A[2]===".."||A[j-1]==="..")continue;j>0&&(A.splice(j-1,2),j-=2)}A=A.join("/")}if((K||te)&&G){for(N=A.split("/"),j=N.length;j>0;j-=1){if(U=N.slice(0,j).join("/"),K){for(Y=K.length;Y>0;Y-=1)if(k=G[K.slice(0,Y).join("/")],k&&(k=k[U],k)){D=k,O=j;break}}if(D)break;!B&&te&&te[U]&&(B=te[U],V=j)}!D&&B&&(D=B,O=V),D&&(N.splice(0,O,D),A=N.join("/"))}return A}function x(A,R){return function(){var N=_.call(arguments,0);return typeof N[0]!="string"&&N.length===1&&N.push(null),u.apply(l,N.concat([A,R]))}}function S(A){return function(R){return T(R,A)}}function M(A){return function(R){p[A]=R}}function w(A){if(y(f,A)){var R=f[A];delete f[A],v[A]=!0,c.apply(l,R)}if(!y(p,A)&&!y(v,A))throw new Error("No "+A);return p[A]}function E(A){var R,N=A?A.indexOf("!"):-1;return N>-1&&(R=A.substring(0,N),A=A.substring(N+1,A.length)),[R,A]}function C(A){return A?E(A):[]}d=function(A,R){var N,U=E(A),k=U[0],D=R[1];return A=U[1],k&&(k=T(k,D),N=w(k)),k?N&&N.normalize?A=N.normalize(A,S(D)):A=T(A,D):(A=T(A,D),U=E(A),k=U[0],A=U[1],k&&(N=w(k))),{f:k?k+"!"+A:A,n:A,pr:k,p:N}};function P(A){return function(){return m&&m.config&&m.config[A]||{}}}h={require:function(A){return x(A)},exports:function(A){var R=p[A];return typeof R<"u"?R:p[A]={}},module:function(A){return{id:A,uri:"",exports:p[A],config:P(A)}}},c=function(A,R,N,U){var k,D,W,O,B,V,j=[],Y=typeof N,H;if(U=U||A,V=C(U),Y==="undefined"||Y==="function"){for(R=!R.length&&N.length?["require","exports","module"]:R,B=0;B<R.length;B+=1)if(O=d(R[B],V),D=O.f,D==="require")j[B]=h.require(A);else if(D==="exports")j[B]=h.exports(A),H=!0;else if(D==="module")k=j[B]=h.module(A);else if(y(p,D)||y(f,D)||y(v,D))j[B]=w(D);else if(O.p)O.p.load(O.n,x(U,!0),M(D),{}),j[B]=p[D];else throw new Error(A+" missing "+D);W=N?N.apply(p[A],j):void 0,A&&(k&&k.exports!==l&&k.exports!==p[A]?p[A]=k.exports:(W!==l||!H)&&(p[A]=W))}else A&&(p[A]=N)},r=a=u=function(A,R,N,U,k){if(typeof A=="string")return h[A]?h[A](R):w(d(A,C(R)).f);if(!A.splice){if(m=A,m.deps&&u(m.deps,m.callback),!R)return;R.splice?(A=R,R=N,N=null):A=l}return R=R||function(){},typeof N=="function"&&(N=U,U=k),U?c(l,A,R,N):setTimeout(function(){c(l,A,R,N)},4),u},u.config=function(A){return u(A)},r._defined=p,o=function(A,R,N){if(typeof A!="string")throw new Error("See almond README: incorrect module build, no module name");R.splice||(N=R,R=[]),!y(p,A)&&!y(f,A)&&(f[A]=[A,R,N])},o.amd={jQuery:!0}})(),s.requirejs=r,s.require=a,s.define=o}}(),s.define("almond",function(){}),s.define("jquery",[],function(){var r=e||$;return r==null&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),r}),s.define("select2/utils",["jquery"],function(r){var a={};a.Extend=function(u,d){var h={}.hasOwnProperty;function p(){this.constructor=u}for(var f in d)h.call(d,f)&&(u[f]=d[f]);return p.prototype=d.prototype,u.prototype=new p,u.__super__=d.prototype,u};function o(u){var d=u.prototype,h=[];for(var p in d){var f=d[p];typeof f=="function"&&p!=="constructor"&&h.push(p)}return h}a.Decorate=function(u,d){var h=o(d),p=o(u);function f(){var T=Array.prototype.unshift,x=d.prototype.constructor.length,S=u.prototype.constructor;x>0&&(T.call(arguments,u.prototype.constructor),S=d.prototype.constructor),S.apply(this,arguments)}d.displayName=u.displayName;function m(){this.constructor=f}f.prototype=new m;for(var v=0;v<p.length;v++){var g=p[v];f.prototype[g]=u.prototype[g]}for(var _=function(T){var x=function(){};T in f.prototype&&(x=f.prototype[T]);var S=d.prototype[T];return function(){var M=Array.prototype.unshift;return M.call(arguments,x),S.apply(this,arguments)}},b=0;b<h.length;b++){var y=h[b];f.prototype[y]=_(y)}return f};var l=function(){this.listeners={}};l.prototype.on=function(u,d){this.listeners=this.listeners||{},u in this.listeners?this.listeners[u].push(d):this.listeners[u]=[d]},l.prototype.trigger=function(u){var d=Array.prototype.slice,h=d.call(arguments,1);this.listeners=this.listeners||{},h==null&&(h=[]),h.length===0&&h.push({}),h[0]._type=u,u in this.listeners&&this.invoke(this.listeners[u],d.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},l.prototype.invoke=function(u,d){for(var h=0,p=u.length;h<p;h++)u[h].apply(this,d)},a.Observable=l,a.generateChars=function(u){for(var d="",h=0;h<u;h++){var p=Math.floor(Math.random()*36);d+=p.toString(36)}return d},a.bind=function(u,d){return function(){u.apply(d,arguments)}},a._convertData=function(u){for(var d in u){var h=d.split("-"),p=u;if(h.length!==1){for(var f=0;f<h.length;f++){var m=h[f];m=m.substring(0,1).toLowerCase()+m.substring(1),m in p||(p[m]={}),f==h.length-1&&(p[m]=u[d]),p=p[m]}delete u[d]}}return u},a.hasScroll=function(u,d){var h=r(d),p=d.style.overflowX,f=d.style.overflowY;return p===f&&(f==="hidden"||f==="visible")?!1:p==="scroll"||f==="scroll"?!0:h.innerHeight()<d.scrollHeight||h.innerWidth()<d.scrollWidth},a.escapeMarkup=function(u){var d={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return typeof u!="string"?u:String(u).replace(/[&<>"'\/\\]/g,function(h){return d[h]})},a.__cache={};var c=0;return a.GetUniqueElementId=function(u){var d=u.getAttribute("data-select2-id");return d!=null||(u.id?d="select2-data-"+u.id:d="select2-data-"+(++c).toString()+"-"+a.generateChars(4),u.setAttribute("data-select2-id",d)),d},a.StoreData=function(u,d,h){var p=a.GetUniqueElementId(u);a.__cache[p]||(a.__cache[p]={}),a.__cache[p][d]=h},a.GetData=function(u,d){var h=a.GetUniqueElementId(u);return d?a.__cache[h]&&a.__cache[h][d]!=null?a.__cache[h][d]:r(u).data(d):a.__cache[h]},a.RemoveData=function(u){var d=a.GetUniqueElementId(u);a.__cache[d]!=null&&delete a.__cache[d],u.removeAttribute("data-select2-id")},a.copyNonInternalCssClasses=function(u,d){var h=u.getAttribute("class").trim().split(/\s+/);h=h.filter(function(m){return m.indexOf("select2-")===0});var p=d.getAttribute("class").trim().split(/\s+/);p=p.filter(function(m){return m.indexOf("select2-")!==0});var f=h.concat(p);u.setAttribute("class",f.join(" "))},a}),s.define("select2/results",["jquery","./utils"],function(r,a){function o(l,c,u){this.$element=l,this.data=u,this.options=c,o.__super__.constructor.call(this)}return a.Extend(o,a.Observable),o.prototype.render=function(){var l=r('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&l.attr("aria-multiselectable","true"),this.$results=l,l},o.prototype.clear=function(){this.$results.empty()},o.prototype.displayMessage=function(l){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var u=r('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),d=this.options.get("translations").get(l.message);u.append(c(d(l.args))),u[0].className+=" select2-results__message",this.$results.append(u)},o.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},o.prototype.append=function(l){this.hideLoading();var c=[];if(l.results==null||l.results.length===0){this.$results.children().length===0&&this.trigger("results:message",{message:"noResults"});return}l.results=this.sort(l.results);for(var u=0;u<l.results.length;u++){var d=l.results[u],h=this.option(d);c.push(h)}this.$results.append(c)},o.prototype.position=function(l,c){var u=c.find(".select2-results");u.append(l)},o.prototype.sort=function(l){var c=this.options.get("sorter");return c(l)},o.prototype.highlightFirstItem=function(){var l=this.$results.find(".select2-results__option--selectable"),c=l.filter(".select2-results__option--selected");c.length>0?c.first().trigger("mouseenter"):l.first().trigger("mouseenter"),this.ensureHighlightVisible()},o.prototype.setClasses=function(){var l=this;this.data.current(function(c){var u=c.map(function(h){return h.id.toString()}),d=l.$results.find(".select2-results__option--selectable");d.each(function(){var h=r(this),p=a.GetData(this,"data"),f=""+p.id;p.element!=null&&p.element.selected||p.element==null&&u.indexOf(f)>-1?(this.classList.add("select2-results__option--selected"),h.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),h.attr("aria-selected","false"))})})},o.prototype.showLoading=function(l){this.hideLoading();var c=this.options.get("translations").get("searching"),u={disabled:!0,loading:!0,text:c(l)},d=this.option(u);d.className+=" loading-results",this.$results.prepend(d)},o.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},o.prototype.option=function(l){var c=document.createElement("li");c.classList.add("select2-results__option"),c.classList.add("select2-results__option--selectable");var u={role:"option"},d=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;(l.element!=null&&d.call(l.element,":disabled")||l.element==null&&l.disabled)&&(u["aria-disabled"]="true",c.classList.remove("select2-results__option--selectable"),c.classList.add("select2-results__option--disabled")),l.id==null&&c.classList.remove("select2-results__option--selectable"),l._resultId!=null&&(c.id=l._resultId),l.title&&(c.title=l.title),l.children&&(u.role="group",u["aria-label"]=l.text,c.classList.remove("select2-results__option--selectable"),c.classList.add("select2-results__option--group"));for(var h in u){var p=u[h];c.setAttribute(h,p)}if(l.children){var f=r(c),m=document.createElement("strong");m.className="select2-results__group",this.template(l,m);for(var v=[],g=0;g<l.children.length;g++){var _=l.children[g],b=this.option(_);v.push(b)}var y=r("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});y.append(v),f.append(m),f.append(y)}else this.template(l,c);return a.StoreData(c,"data",l),c},o.prototype.bind=function(l,c){var u=this,d=l.id+"-results";this.$results.attr("id",d),l.on("results:all",function(h){u.clear(),u.append(h.data),l.isOpen()&&(u.setClasses(),u.highlightFirstItem())}),l.on("results:append",function(h){u.append(h.data),l.isOpen()&&u.setClasses()}),l.on("query",function(h){u.hideMessages(),u.showLoading(h)}),l.on("select",function(){l.isOpen()&&(u.setClasses(),u.options.get("scrollAfterSelect")&&u.highlightFirstItem())}),l.on("unselect",function(){l.isOpen()&&(u.setClasses(),u.options.get("scrollAfterSelect")&&u.highlightFirstItem())}),l.on("open",function(){u.$results.attr("aria-expanded","true"),u.$results.attr("aria-hidden","false"),u.setClasses(),u.ensureHighlightVisible()}),l.on("close",function(){u.$results.attr("aria-expanded","false"),u.$results.attr("aria-hidden","true"),u.$results.removeAttr("aria-activedescendant")}),l.on("results:toggle",function(){var h=u.getHighlightedResults();h.length!==0&&h.trigger("mouseup")}),l.on("results:select",function(){var h=u.getHighlightedResults();if(h.length!==0){var p=a.GetData(h[0],"data");h.hasClass("select2-results__option--selected")?u.trigger("close",{}):u.trigger("select",{data:p})}}),l.on("results:previous",function(){var h=u.getHighlightedResults(),p=u.$results.find(".select2-results__option--selectable"),f=p.index(h);if(!(f<=0)){var m=f-1;h.length===0&&(m=0);var v=p.eq(m);v.trigger("mouseenter");var g=u.$results.offset().top,_=v.offset().top,b=u.$results.scrollTop()+(_-g);m===0?u.$results.scrollTop(0):_-g<0&&u.$results.scrollTop(b)}}),l.on("results:next",function(){var h=u.getHighlightedResults(),p=u.$results.find(".select2-results__option--selectable"),f=p.index(h),m=f+1;if(!(m>=p.length)){var v=p.eq(m);v.trigger("mouseenter");var g=u.$results.offset().top+u.$results.outerHeight(!1),_=v.offset().top+v.outerHeight(!1),b=u.$results.scrollTop()+_-g;m===0?u.$results.scrollTop(0):_>g&&u.$results.scrollTop(b)}}),l.on("results:focus",function(h){h.element[0].classList.add("select2-results__option--highlighted"),h.element[0].setAttribute("aria-selected","true")}),l.on("results:message",function(h){u.displayMessage(h)}),r.fn.mousewheel&&this.$results.on("mousewheel",function(h){var p=u.$results.scrollTop(),f=u.$results.get(0).scrollHeight-p+h.deltaY,m=h.deltaY>0&&p-h.deltaY<=0,v=h.deltaY<0&&f<=u.$results.height();m?(u.$results.scrollTop(0),h.preventDefault(),h.stopPropagation()):v&&(u.$results.scrollTop(u.$results.get(0).scrollHeight-u.$results.height()),h.preventDefault(),h.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(h){var p=r(this),f=a.GetData(this,"data");if(p.hasClass("select2-results__option--selected")){u.options.get("multiple")?u.trigger("unselect",{originalEvent:h,data:f}):u.trigger("close",{});return}u.trigger("select",{originalEvent:h,data:f})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(h){var p=a.GetData(this,"data");u.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),u.trigger("results:focus",{data:p,element:r(this)})})},o.prototype.getHighlightedResults=function(){var l=this.$results.find(".select2-results__option--highlighted");return l},o.prototype.destroy=function(){this.$results.remove()},o.prototype.ensureHighlightVisible=function(){var l=this.getHighlightedResults();if(l.length!==0){var c=this.$results.find(".select2-results__option--selectable"),u=c.index(l),d=this.$results.offset().top,h=l.offset().top,p=this.$results.scrollTop()+(h-d),f=h-d;p-=l.outerHeight(!1)*2,u<=2?this.$results.scrollTop(0):(f>this.$results.outerHeight()||f<0)&&this.$results.scrollTop(p)}},o.prototype.template=function(l,c){var u=this.options.get("templateResult"),d=this.options.get("escapeMarkup"),h=u(l,c);h==null?c.style.display="none":typeof h=="string"?c.innerHTML=d(h):r(c).append(h)},o}),s.define("select2/keys",[],function(){var r={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return r}),s.define("select2/selection/base",["jquery","../utils","../keys"],function(r,a,o){function l(c,u){this.$element=c,this.options=u,l.__super__.constructor.call(this)}return a.Extend(l,a.Observable),l.prototype.render=function(){var c=r('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,a.GetData(this.$element[0],"old-tabindex")!=null?this._tabindex=a.GetData(this.$element[0],"old-tabindex"):this.$element.attr("tabindex")!=null&&(this._tabindex=this.$element.attr("tabindex")),c.attr("title",this.$element.attr("title")),c.attr("tabindex",this._tabindex),c.attr("aria-disabled","false"),this.$selection=c,c},l.prototype.bind=function(c,u){var d=this,h=c.id+"-results";this.container=c,this.$selection.on("focus",function(p){d.trigger("focus",p)}),this.$selection.on("blur",function(p){d._handleBlur(p)}),this.$selection.on("keydown",function(p){d.trigger("keypress",p),p.which===o.SPACE&&p.preventDefault()}),c.on("results:focus",function(p){d.$selection.attr("aria-activedescendant",p.data._resultId)}),c.on("selection:update",function(p){d.update(p.data)}),c.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",h),d._attachCloseHandler(c)}),c.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.trigger("focus"),d._detachCloseHandler(c)}),c.on("enable",function(){d.$selection.attr("tabindex",d._tabindex),d.$selection.attr("aria-disabled","false")}),c.on("disable",function(){d.$selection.attr("tabindex","-1"),d.$selection.attr("aria-disabled","true")})},l.prototype._handleBlur=function(c){var u=this;window.setTimeout(function(){document.activeElement==u.$selection[0]||r.contains(u.$selection[0],document.activeElement)||u.trigger("blur",c)},1)},l.prototype._attachCloseHandler=function(c){r(document.body).on("mousedown.select2."+c.id,function(u){var d=r(u.target),h=d.closest(".select2"),p=r(".select2.select2-container--open");p.each(function(){if(this!=h[0]){var f=a.GetData(this,"element");f.select2("close")}})})},l.prototype._detachCloseHandler=function(c){r(document.body).off("mousedown.select2."+c.id)},l.prototype.position=function(c,u){var d=u.find(".selection");d.append(c)},l.prototype.destroy=function(){this._detachCloseHandler(this.container)},l.prototype.update=function(c){throw new Error("The `update` method must be defined in child classes.")},l.prototype.isEnabled=function(){return!this.isDisabled()},l.prototype.isDisabled=function(){return this.options.get("disabled")},l}),s.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(r,a,o,l){function c(){c.__super__.constructor.apply(this,arguments)}return o.Extend(c,a),c.prototype.render=function(){var u=c.__super__.render.call(this);return u[0].classList.add("select2-selection--single"),u.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),u},c.prototype.bind=function(u,d){var h=this;c.__super__.bind.apply(this,arguments);var p=u.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",p).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",p),this.$selection.attr("aria-controls",p),this.$selection.on("mousedown",function(f){f.which===1&&h.trigger("toggle",{originalEvent:f})}),this.$selection.on("focus",function(f){}),this.$selection.on("blur",function(f){}),u.on("focus",function(f){u.isOpen()||h.$selection.trigger("focus")})},c.prototype.clear=function(){var u=this.$selection.find(".select2-selection__rendered");u.empty(),u.removeAttr("title")},c.prototype.display=function(u,d){var h=this.options.get("templateSelection"),p=this.options.get("escapeMarkup");return p(h(u,d))},c.prototype.selectionContainer=function(){return r("<span></span>")},c.prototype.update=function(u){if(u.length===0){this.clear();return}var d=u[0],h=this.$selection.find(".select2-selection__rendered"),p=this.display(d,h);h.empty().append(p);var f=d.title||d.text;f?h.attr("title",f):h.removeAttr("title")},c}),s.define("select2/selection/multiple",["jquery","./base","../utils"],function(r,a,o){function l(c,u){l.__super__.constructor.apply(this,arguments)}return o.Extend(l,a),l.prototype.render=function(){var c=l.__super__.render.call(this);return c[0].classList.add("select2-selection--multiple"),c.html('<ul class="select2-selection__rendered"></ul>'),c},l.prototype.bind=function(c,u){var d=this;l.__super__.bind.apply(this,arguments);var h=c.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",h),this.$selection.on("click",function(p){d.trigger("toggle",{originalEvent:p})}),this.$selection.on("click",".select2-selection__choice__remove",function(p){if(!d.isDisabled()){var f=r(this),m=f.parent(),v=o.GetData(m[0],"data");d.trigger("unselect",{originalEvent:p,data:v})}}),this.$selection.on("keydown",".select2-selection__choice__remove",function(p){d.isDisabled()||p.stopPropagation()})},l.prototype.clear=function(){var c=this.$selection.find(".select2-selection__rendered");c.empty(),c.removeAttr("title")},l.prototype.display=function(c,u){var d=this.options.get("templateSelection"),h=this.options.get("escapeMarkup");return h(d(c,u))},l.prototype.selectionContainer=function(){var c=r('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>');return c},l.prototype.update=function(c){if(this.clear(),c.length!==0){for(var u=[],d=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",h=0;h<c.length;h++){var p=c[h],f=this.selectionContainer(),m=this.display(p,f),v=d+o.generateChars(4)+"-";p.id?v+=p.id:v+=o.generateChars(4),f.find(".select2-selection__choice__display").append(m).attr("id",v);var g=p.title||p.text;g&&f.attr("title",g);var _=this.options.get("translations").get("removeItem"),b=f.find(".select2-selection__choice__remove");b.attr("title",_()),b.attr("aria-label",_()),b.attr("aria-describedby",v),o.StoreData(f[0],"data",p),u.push(f)}var y=this.$selection.find(".select2-selection__rendered");y.append(u)}},l}),s.define("select2/selection/placeholder",[],function(){function r(a,o,l){this.placeholder=this.normalizePlaceholder(l.get("placeholder")),a.call(this,o,l)}return r.prototype.normalizePlaceholder=function(a,o){return typeof o=="string"&&(o={id:"",text:o}),o},r.prototype.createPlaceholder=function(a,o){var l=this.selectionContainer();l.html(this.display(o)),l[0].classList.add("select2-selection__placeholder"),l[0].classList.remove("select2-selection__choice");var c=o.title||o.text||l.text();return this.$selection.find(".select2-selection__rendered").attr("title",c),l},r.prototype.update=function(a,o){var l=o.length==1&&o[0].id!=this.placeholder.id,c=o.length>1;if(c||l)return a.call(this,o);this.clear();var u=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(u)},r}),s.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(r,a,o){function l(){}return l.prototype.bind=function(c,u,d){var h=this;c.call(this,u,d),this.placeholder==null&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(p){h._handleClear(p)}),u.on("keypress",function(p){h._handleKeyboardClear(p,u)})},l.prototype._handleClear=function(c,u){if(!this.isDisabled()){var d=this.$selection.find(".select2-selection__clear");if(d.length!==0){u.stopPropagation();var h=o.GetData(d[0],"data"),p=this.$element.val();this.$element.val(this.placeholder.id);var f={data:h};if(this.trigger("clear",f),f.prevented){this.$element.val(p);return}for(var m=0;m<h.length;m++)if(f={data:h[m]},this.trigger("unselect",f),f.prevented){this.$element.val(p);return}this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}},l.prototype._handleKeyboardClear=function(c,u,d){d.isOpen()||(u.which==a.DELETE||u.which==a.BACKSPACE)&&this._handleClear(u)},l.prototype.update=function(c,u){if(c.call(this,u),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||u.length===0)){var d=this.$selection.find(".select2-selection__rendered").attr("id"),h=this.options.get("translations").get("removeAllItems"),p=r('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');p.attr("title",h()),p.attr("aria-label",h()),p.attr("aria-describedby",d),o.StoreData(p[0],"data",u),this.$selection.prepend(p),this.$selection[0].classList.add("select2-selection--clearable")}},l}),s.define("select2/selection/search",["jquery","../utils","../keys"],function(r,a,o){function l(c,u,d){c.call(this,u,d)}return l.prototype.render=function(c){var u=this.options.get("translations").get("search"),d=r('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=d,this.$search=d.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",u());var h=c.call(this);return this._transferTabIndex(),h.append(this.$searchContainer),h},l.prototype.bind=function(c,u,d){var h=this,p=u.id+"-results",f=u.id+"-container";c.call(this,u,d),h.$search.attr("aria-describedby",f),u.on("open",function(){h.$search.attr("aria-controls",p),h.$search.trigger("focus")}),u.on("close",function(){h.$search.val(""),h.resizeSearch(),h.$search.removeAttr("aria-controls"),h.$search.removeAttr("aria-activedescendant"),h.$search.trigger("focus")}),u.on("enable",function(){h.$search.prop("disabled",!1),h._transferTabIndex()}),u.on("disable",function(){h.$search.prop("disabled",!0)}),u.on("focus",function(g){h.$search.trigger("focus")}),u.on("results:focus",function(g){g.data._resultId?h.$search.attr("aria-activedescendant",g.data._resultId):h.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(g){h.trigger("focus",g)}),this.$selection.on("focusout",".select2-search--inline",function(g){h._handleBlur(g)}),this.$selection.on("keydown",".select2-search--inline",function(g){g.stopPropagation(),h.trigger("keypress",g),h._keyUpPrevented=g.isDefaultPrevented();var _=g.which;if(_===o.BACKSPACE&&h.$search.val()===""){var b=h.$selection.find(".select2-selection__choice").last();if(b.length>0){var y=a.GetData(b[0],"data");h.searchRemoveChoice(y),g.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(g){h.$search.val()&&g.stopPropagation()});var m=document.documentMode,v=m&&m<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(g){if(v){h.$selection.off("input.search input.searchcheck");return}h.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(g){if(v&&g.type==="input"){h.$selection.off("input.search input.searchcheck");return}var _=g.which;_==o.SHIFT||_==o.CTRL||_==o.ALT||_!=o.TAB&&h.handleSearch(g)})},l.prototype._transferTabIndex=function(c){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},l.prototype.createPlaceholder=function(c,u){this.$search.attr("placeholder",u.text)},l.prototype.update=function(c,u){var d=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),c.call(this,u),this.resizeSearch(),d&&this.$search.trigger("focus")},l.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var c=this.$search.val();this.trigger("query",{term:c})}this._keyUpPrevented=!1},l.prototype.searchRemoveChoice=function(c,u){this.trigger("unselect",{data:u}),this.$search.val(u.text),this.handleSearch()},l.prototype.resizeSearch=function(){this.$search.css("width","25px");var c="100%";if(this.$search.attr("placeholder")===""){var u=this.$search.val().length+1;c=u*.75+"em"}this.$search.css("width",c)},l}),s.define("select2/selection/selectionCss",["../utils"],function(r){function a(){}return a.prototype.render=function(o){var l=o.call(this),c=this.options.get("selectionCssClass")||"";return c.indexOf(":all:")!==-1&&(c=c.replace(":all:",""),r.copyNonInternalCssClasses(l[0],this.$element[0])),l.addClass(c),l},a}),s.define("select2/selection/eventRelay",["jquery"],function(r){function a(){}return a.prototype.bind=function(o,l,c){var u=this,d=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],h=["opening","closing","selecting","unselecting","clearing"];o.call(this,l,c),l.on("*",function(p,f){if(d.indexOf(p)!==-1){f=f||{};var m=r.Event("select2:"+p,{params:f});u.$element.trigger(m),h.indexOf(p)!==-1&&(f.prevented=m.isDefaultPrevented())}})},a}),s.define("select2/translation",["jquery","require"],function(r,a){function o(l){this.dict=l||{}}return o.prototype.all=function(){return this.dict},o.prototype.get=function(l){return this.dict[l]},o.prototype.extend=function(l){this.dict=r.extend({},l.all(),this.dict)},o._cache={},o.loadPath=function(l){if(!(l in o._cache)){var c=a(l);o._cache[l]=c}return new o(o._cache[l])},o}),s.define("select2/diacritics",[],function(){var r={"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A","":"A","":"A","":"AA",:"AE",:"AE",:"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B",:"B",:"B",:"B",:"B","":"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"C","":"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D","":"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F","":"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"G","":"G","":"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"H","":"H","":"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J","":"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"K","":"K","":"K","":"K","":"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L","":"L","":"L","":"L","":"L","":"L","":"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M","":"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N","":"N",:"N","":"N","":"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O","":"O","":"O",:"OE",:"OI","":"OO",:"OU","":"P",:"P",:"P",:"P",:"P","":"P","":"P","":"P","":"P","":"Q",:"Q","":"Q","":"Q","":"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"R","":"R","":"R","":"R","":"R","":"S",:"S","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"S","":"S","":"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T","":"T","":"T","":"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"U","":"V",:"V",:"V",:"V",:"V","":"V","":"V","":"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Y","":"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"Z","":"Z","":"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a","":"a",:"a","":"aa",:"ae",:"ae",:"ae","":"ao","":"au","":"av","":"av","":"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"c","":"c","":"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d","":"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"e",:"e",:"e","":"f",:"f",:"f",:"f","":"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"g","":"g","":"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h","":"h","":"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j","":"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"k","":"k","":"k","":"k","":"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l","":"l","":"l","":"l","":"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n","":"n","":"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o","":"o","":"o",:"o",:"oe",:"oi",:"ou","":"oo","":"p",:"p",:"p",:"p",:"p","":"p","":"p","":"p","":"p","":"q",:"q","":"q","":"q","":"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"r",:"r","":"r","":"r","":"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"s","":"s","":"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t","":"t","":"t","":"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v","":"v",:"v","":"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"y","":"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z","":"z","":"z","":"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"'"};return r}),s.define("select2/data/base",["../utils"],function(r){function a(o,l){a.__super__.constructor.call(this)}return r.Extend(a,r.Observable),a.prototype.current=function(o){throw new Error("The `current` method must be defined in child classes.")},a.prototype.query=function(o,l){throw new Error("The `query` method must be defined in child classes.")},a.prototype.bind=function(o,l){},a.prototype.destroy=function(){},a.prototype.generateResultId=function(o,l){var c=o.id+"-result-";return c+=r.generateChars(4),l.id!=null?c+="-"+l.id.toString():c+="-"+r.generateChars(4),c},a}),s.define("select2/data/select",["./base","../utils","jquery"],function(r,a,o){function l(c,u){this.$element=c,this.options=u,l.__super__.constructor.call(this)}return a.Extend(l,r),l.prototype.current=function(c){var u=this,d=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(h){return u.item(o(h))});c(d)},l.prototype.select=function(c){var u=this;if(c.selected=!0,c.element!=null&&c.element.tagName.toLowerCase()==="option"){c.element.selected=!0,this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple"))this.current(function(h){var p=[];c=[c],c.push.apply(c,h);for(var f=0;f<c.length;f++){var m=c[f].id;p.indexOf(m)===-1&&p.push(m)}u.$element.val(p),u.$element.trigger("input").trigger("change")});else{var d=c.id;this.$element.val(d),this.$element.trigger("input").trigger("change")}},l.prototype.unselect=function(c){var u=this;if(this.$element.prop("multiple")){if(c.selected=!1,c.element!=null&&c.element.tagName.toLowerCase()==="option"){c.element.selected=!1,this.$element.trigger("input").trigger("change");return}this.current(function(d){for(var h=[],p=0;p<d.length;p++){var f=d[p].id;f!==c.id&&h.indexOf(f)===-1&&h.push(f)}u.$element.val(h),u.$element.trigger("input").trigger("change")})}},l.prototype.bind=function(c,u){var d=this;this.container=c,c.on("select",function(h){d.select(h.data)}),c.on("unselect",function(h){d.unselect(h.data)})},l.prototype.destroy=function(){this.$element.find("*").each(function(){a.RemoveData(this)})},l.prototype.query=function(c,u){var d=[],h=this,p=this.$element.children();p.each(function(){if(!(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup")){var f=o(this),m=h.item(f),v=h.matches(c,m);v!==null&&d.push(v)}}),u({results:d})},l.prototype.addOptions=function(c){this.$element.append(c)},l.prototype.option=function(c){var u;c.children?(u=document.createElement("optgroup"),u.label=c.text):(u=document.createElement("option"),u.textContent!==void 0?u.textContent=c.text:u.innerText=c.text),c.id!==void 0&&(u.value=c.id),c.disabled&&(u.disabled=!0),c.selected&&(u.selected=!0),c.title&&(u.title=c.title);var d=this._normalizeItem(c);return d.element=u,a.StoreData(u,"data",d),o(u)},l.prototype.item=function(c){var u={};if(u=a.GetData(c[0],"data"),u!=null)return u;var d=c[0];if(d.tagName.toLowerCase()==="option")u={id:c.val(),text:c.text(),disabled:c.prop("disabled"),selected:c.prop("selected"),title:c.prop("title")};else if(d.tagName.toLowerCase()==="optgroup"){u={text:c.prop("label"),children:[],title:c.prop("title")};for(var h=c.children("option"),p=[],f=0;f<h.length;f++){var m=o(h[f]),v=this.item(m);p.push(v)}u.children=p}return u=this._normalizeItem(u),u.element=c[0],a.StoreData(c[0],"data",u),u},l.prototype._normalizeItem=function(c){c!==Object(c)&&(c={id:c,text:c}),c=o.extend({},{text:""},c);var u={selected:!1,disabled:!1};return c.id!=null&&(c.id=c.id.toString()),c.text!=null&&(c.text=c.text.toString()),c._resultId==null&&c.id&&this.container!=null&&(c._resultId=this.generateResultId(this.container,c)),o.extend({},u,c)},l.prototype.matches=function(c,u){var d=this.options.get("matcher");return d(c,u)},l}),s.define("select2/data/array",["./select","../utils","jquery"],function(r,a,o){function l(c,u){this._dataToConvert=u.get("data")||[],l.__super__.constructor.call(this,c,u)}return a.Extend(l,r),l.prototype.bind=function(c,u){l.__super__.bind.call(this,c,u),this.addOptions(this.convertToOptions(this._dataToConvert))},l.prototype.select=function(c){var u=this.$element.find("option").filter(function(d,h){return h.value==c.id.toString()});u.length===0&&(u=this.option(c),this.addOptions(u)),l.__super__.select.call(this,c)},l.prototype.convertToOptions=function(c){var u=this,d=this.$element.find("option"),h=d.map(function(){return u.item(o(this)).id}).get(),p=[];function f(S){return function(){return o(this).val()==S.id}}for(var m=0;m<c.length;m++){var v=this._normalizeItem(c[m]);if(h.indexOf(v.id)>=0){var g=d.filter(f(v)),_=this.item(g),b=o.extend(!0,{},v,_),y=this.option(b);g.replaceWith(y);continue}var T=this.option(v);if(v.children){var x=this.convertToOptions(v.children);T.append(x)}p.push(T)}return p},l}),s.define("select2/data/ajax",["./array","../utils","jquery"],function(r,a,o){function l(c,u){this.ajaxOptions=this._applyDefaults(u.get("ajax")),this.ajaxOptions.processResults!=null&&(this.processResults=this.ajaxOptions.processResults),l.__super__.constructor.call(this,c,u)}return a.Extend(l,r),l.prototype._applyDefaults=function(c){var u={data:function(d){return o.extend({},d,{q:d.term})},transport:function(d,h,p){var f=o.ajax(d);return f.then(h),f.fail(p),f}};return o.extend({},u,c,!0)},l.prototype.processResults=function(c){return c},l.prototype.query=function(c,u){var d=this;this._request!=null&&(typeof this._request.abort=="function"&&this._request.abort(),this._request=null);var h=o.extend({type:"GET"},this.ajaxOptions);typeof h.url=="function"&&(h.url=h.url.call(this.$element,c)),typeof h.data=="function"&&(h.data=h.data.call(this.$element,c));function p(){var f=h.transport(h,function(m){var v=d.processResults(m,c);d.options.get("debug")&&window.console&&console.error&&(!v||!v.results||!Array.isArray(v.results))&&console.error("Select2: The AJAX results did not return an array in the `results` key of the response."),u(v)},function(){"status"in f&&(f.status===0||f.status==="0")||d.trigger("results:message",{message:"errorLoading"})});d._request=f}this.ajaxOptions.delay&&c.term!=null?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(p,this.ajaxOptions.delay)):p()},l}),s.define("select2/data/tags",["jquery"],function(r){function a(o,l,c){var u=c.get("tags"),d=c.get("createTag");d!==void 0&&(this.createTag=d);var h=c.get("insertTag");if(h!==void 0&&(this.insertTag=h),o.call(this,l,c),Array.isArray(u))for(var p=0;p<u.length;p++){var f=u[p],m=this._normalizeItem(f),v=this.option(m);this.$element.append(v)}}return a.prototype.query=function(o,l,c){var u=this;if(this._removeOldTags(),l.term==null||l.page!=null){o.call(this,l,c);return}function d(h,p){for(var f=h.results,m=0;m<f.length;m++){var v=f[m],g=v.children!=null&&!d({results:v.children},!0),_=(v.text||"").toUpperCase(),b=(l.term||"").toUpperCase(),y=_===b;if(y||g){if(p)return!1;h.data=f,c(h);return}}if(p)return!0;var T=u.createTag(l);if(T!=null){var x=u.option(T);x.attr("data-select2-tag","true"),u.addOptions([x]),u.insertTag(f,T)}h.results=f,c(h)}o.call(this,l,d)},a.prototype.createTag=function(o,l){if(l.term==null)return null;var c=l.term.trim();return c===""?null:{id:c,text:c}},a.prototype.insertTag=function(o,l,c){l.unshift(c)},a.prototype._removeOldTags=function(o){var l=this.$element.find("option[data-select2-tag]");l.each(function(){this.selected||r(this).remove()})},a}),s.define("select2/data/tokenizer",["jquery"],function(r){function a(o,l,c){var u=c.get("tokenizer");u!==void 0&&(this.tokenizer=u),o.call(this,l,c)}return a.prototype.bind=function(o,l,c){o.call(this,l,c),this.$search=l.dropdown.$search||l.selection.$search||c.find(".select2-search__field")},a.prototype.query=function(o,l,c){var u=this;function d(f){var m=u._normalizeItem(f),v=u.$element.find("option").filter(function(){return r(this).val()===m.id});if(!v.length){var g=u.option(m);g.attr("data-select2-tag",!0),u._removeOldTags(),u.addOptions([g])}h(m)}function h(f){u.trigger("select",{data:f})}l.term=l.term||"";var p=this.tokenizer(l,this.options,d);p.term!==l.term&&(this.$search.length&&(this.$search.val(p.term),this.$search.trigger("focus")),l.term=p.term),o.call(this,l,c)},a.prototype.tokenizer=function(o,l,c,u){for(var d=c.get("tokenSeparators")||[],h=l.term,p=0,f=this.createTag||function(b){return{id:b.term,text:b.term}};p<h.length;){var m=h[p];if(d.indexOf(m)===-1){p++;continue}var v=h.substr(0,p),g=r.extend({},l,{term:v}),_=f(g);if(_==null){p++;continue}u(_),h=h.substr(p+1)||"",p=0}return{term:h}},a}),s.define("select2/data/minimumInputLength",[],function(){function r(a,o,l){this.minimumInputLength=l.get("minimumInputLength"),a.call(this,o,l)}return r.prototype.query=function(a,o,l){if(o.term=o.term||"",o.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:o.term,params:o}});return}a.call(this,o,l)},r}),s.define("select2/data/maximumInputLength",[],function(){function r(a,o,l){this.maximumInputLength=l.get("maximumInputLength"),a.call(this,o,l)}return r.prototype.query=function(a,o,l){if(o.term=o.term||"",this.maximumInputLength>0&&o.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:o.term,params:o}});return}a.call(this,o,l)},r}),s.define("select2/data/maximumSelectionLength",[],function(){function r(a,o,l){this.maximumSelectionLength=l.get("maximumSelectionLength"),a.call(this,o,l)}return r.prototype.bind=function(a,o,l){var c=this;a.call(this,o,l),o.on("select",function(){c._checkIfMaximumSelected()})},r.prototype.query=function(a,o,l){var c=this;this._checkIfMaximumSelected(function(){a.call(c,o,l)})},r.prototype._checkIfMaximumSelected=function(a,o){var l=this;this.current(function(c){var u=c!=null?c.length:0;if(l.maximumSelectionLength>0&&u>=l.maximumSelectionLength){l.trigger("results:message",{message:"maximumSelected",args:{maximum:l.maximumSelectionLength}});return}o&&o()})},r}),s.define("select2/dropdown",["jquery","./utils"],function(r,a){function o(l,c){this.$element=l,this.options=c,o.__super__.constructor.call(this)}return a.Extend(o,a.Observable),o.prototype.render=function(){var l=r('<span class="select2-dropdown"><span class="select2-results"></span></span>');return l.attr("dir",this.options.get("dir")),this.$dropdown=l,l},o.prototype.bind=function(){},o.prototype.position=function(l,c){},o.prototype.destroy=function(){this.$dropdown.remove()},o}),s.define("select2/dropdown/search",["jquery"],function(r){function a(){}return a.prototype.render=function(o){var l=o.call(this),c=this.options.get("translations").get("search"),u=r('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=u,this.$search=u.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",c()),l.prepend(u),l},a.prototype.bind=function(o,l,c){var u=this,d=l.id+"-results";o.call(this,l,c),this.$search.on("keydown",function(h){u.trigger("keypress",h),u._keyUpPrevented=h.isDefaultPrevented()}),this.$search.on("input",function(h){r(this).off("keyup")}),this.$search.on("keyup input",function(h){u.handleSearch(h)}),l.on("open",function(){u.$search.attr("tabindex",0),u.$search.attr("aria-controls",d),u.$search.trigger("focus"),window.setTimeout(function(){u.$search.trigger("focus")},0)}),l.on("close",function(){u.$search.attr("tabindex",-1),u.$search.removeAttr("aria-controls"),u.$search.removeAttr("aria-activedescendant"),u.$search.val(""),u.$search.trigger("blur")}),l.on("focus",function(){l.isOpen()||u.$search.trigger("focus")}),l.on("results:all",function(h){if(h.query.term==null||h.query.term===""){var p=u.showSearch(h);p?u.$searchContainer[0].classList.remove("select2-search--hide"):u.$searchContainer[0].classList.add("select2-search--hide")}}),l.on("results:focus",function(h){h.data._resultId?u.$search.attr("aria-activedescendant",h.data._resultId):u.$search.removeAttr("aria-activedescendant")})},a.prototype.handleSearch=function(o){if(!this._keyUpPrevented){var l=this.$search.val();this.trigger("query",{term:l})}this._keyUpPrevented=!1},a.prototype.showSearch=function(o,l){return!0},a}),s.define("select2/dropdown/hidePlaceholder",[],function(){function r(a,o,l,c){this.placeholder=this.normalizePlaceholder(l.get("placeholder")),a.call(this,o,l,c)}return r.prototype.append=function(a,o){o.results=this.removePlaceholder(o.results),a.call(this,o)},r.prototype.normalizePlaceholder=function(a,o){return typeof o=="string"&&(o={id:"",text:o}),o},r.prototype.removePlaceholder=function(a,o){for(var l=o.slice(0),c=o.length-1;c>=0;c--){var u=o[c];this.placeholder.id===u.id&&l.splice(c,1)}return l},r}),s.define("select2/dropdown/infiniteScroll",["jquery"],function(r){function a(o,l,c,u){this.lastParams={},o.call(this,l,c,u),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return a.prototype.append=function(o,l){this.$loadingMore.remove(),this.loading=!1,o.call(this,l),this.showLoadingMore(l)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},a.prototype.bind=function(o,l,c){var u=this;o.call(this,l,c),l.on("query",function(d){u.lastParams=d,u.loading=!0}),l.on("query:append",function(d){u.lastParams=d,u.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},a.prototype.loadMoreIfNeeded=function(){var o=r.contains(document.documentElement,this.$loadingMore[0]);if(!(this.loading||!o)){var l=this.$results.offset().top+this.$results.outerHeight(!1),c=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1);l+50>=c&&this.loadMore()}},a.prototype.loadMore=function(){this.loading=!0;var o=r.extend({},{page:1},this.lastParams);o.page++,this.trigger("query:append",o)},a.prototype.showLoadingMore=function(o,l){return l.pagination&&l.pagination.more},a.prototype.createLoadingMore=function(){var o=r('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),l=this.options.get("translations").get("loadingMore");return o.html(l(this.lastParams)),o},a}),s.define("select2/dropdown/attachBody",["jquery","../utils"],function(r,a){function o(l,c,u){this.$dropdownParent=r(u.get("dropdownParent")||document.body),l.call(this,c,u)}return o.prototype.bind=function(l,c,u){var d=this;l.call(this,c,u),c.on("open",function(){d._showDropdown(),d._attachPositioningHandler(c),d._bindContainerResultHandlers(c)}),c.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(c)}),this.$dropdownContainer.on("mousedown",function(h){h.stopPropagation()})},o.prototype.destroy=function(l){l.call(this),this.$dropdownContainer.remove()},o.prototype.position=function(l,c,u){c.attr("class",u.attr("class")),c[0].classList.remove("select2"),c[0].classList.add("select2-container--open"),c.css({position:"absolute",top:-999999}),this.$container=u},o.prototype.render=function(l){var c=r("<span></span>"),u=l.call(this);return c.append(u),this.$dropdownContainer=c,c},o.prototype._hideDropdown=function(l){this.$dropdownContainer.detach()},o.prototype._bindContainerResultHandlers=function(l,c){if(!this._containerResultsHandlersBound){var u=this;c.on("results:all",function(){u._positionDropdown(),u._resizeDropdown()}),c.on("results:append",function(){u._positionDropdown(),u._resizeDropdown()}),c.on("results:message",function(){u._positionDropdown(),u._resizeDropdown()}),c.on("select",function(){u._positionDropdown(),u._resizeDropdown()}),c.on("unselect",function(){u._positionDropdown(),u._resizeDropdown()}),this._containerResultsHandlersBound=!0}},o.prototype._attachPositioningHandler=function(l,c){var u=this,d="scroll.select2."+c.id,h="resize.select2."+c.id,p="orientationchange.select2."+c.id,f=this.$container.parents().filter(a.hasScroll);f.each(function(){a.StoreData(this,"select2-scroll-position",{x:r(this).scrollLeft(),y:r(this).scrollTop()})}),f.on(d,function(m){var v=a.GetData(this,"select2-scroll-position");r(this).scrollTop(v.y)}),r(window).on(d+" "+h+" "+p,function(m){u._positionDropdown(),u._resizeDropdown()})},o.prototype._detachPositioningHandler=function(l,c){var u="scroll.select2."+c.id,d="resize.select2."+c.id,h="orientationchange.select2."+c.id,p=this.$container.parents().filter(a.hasScroll);p.off(u),r(window).off(u+" "+d+" "+h)},o.prototype._positionDropdown=function(){var l=r(window),c=this.$dropdown[0].classList.contains("select2-dropdown--above"),u=this.$dropdown[0].classList.contains("select2-dropdown--below"),d=null,h=this.$container.offset();h.bottom=h.top+this.$container.outerHeight(!1);var p={height:this.$container.outerHeight(!1)};p.top=h.top,p.bottom=h.top+p.height;var f={height:this.$dropdown.outerHeight(!1)},m={top:l.scrollTop(),bottom:l.scrollTop()+l.height()},v=m.top<h.top-f.height,g=m.bottom>h.bottom+f.height,_={left:h.left,top:p.bottom},b=this.$dropdownParent;b.css("position")==="static"&&(b=b.offsetParent());var y={top:0,left:0};(r.contains(document.body,b[0])||b[0].isConnected)&&(y=b.offset()),_.top-=y.top,_.left-=y.left,!c&&!u&&(d="below"),!g&&v&&!c?d="above":!v&&g&&c&&(d="below"),(d=="above"||c&&d!=="below")&&(_.top=p.top-y.top-f.height),d!=null&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+d),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+d)),this.$dropdownContainer.css(_)},o.prototype._resizeDropdown=function(){var l={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(l.minWidth=l.width,l.position="relative",l.width="auto"),this.$dropdown.css(l)},o.prototype._showDropdown=function(l){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},o}),s.define("select2/dropdown/minimumResultsForSearch",[],function(){function r(o){for(var l=0,c=0;c<o.length;c++){var u=o[c];u.children?l+=r(u.children):l++}return l}function a(o,l,c,u){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),o.call(this,l,c,u)}return a.prototype.showSearch=function(o,l){return r(l.data.results)<this.minimumResultsForSearch?!1:o.call(this,l)},a}),s.define("select2/dropdown/selectOnClose",["../utils"],function(r){function a(){}return a.prototype.bind=function(o,l,c){var u=this;o.call(this,l,c),l.on("close",function(d){u._handleSelectOnClose(d)})},a.prototype._handleSelectOnClose=function(o,l){if(l&&l.originalSelect2Event!=null){var c=l.originalSelect2Event;if(c._type==="select"||c._type==="unselect")return}var u=this.getHighlightedResults();if(!(u.length<1)){var d=r.GetData(u[0],"data");d.element!=null&&d.element.selected||d.element==null&&d.selected||this.trigger("select",{data:d})}},a}),s.define("select2/dropdown/closeOnSelect",[],function(){function r(){}return r.prototype.bind=function(a,o,l){var c=this;a.call(this,o,l),o.on("select",function(u){c._selectTriggered(u)}),o.on("unselect",function(u){c._selectTriggered(u)})},r.prototype._selectTriggered=function(a,o){var l=o.originalEvent;l&&(l.ctrlKey||l.metaKey)||this.trigger("close",{originalEvent:l,originalSelect2Event:o})},r}),s.define("select2/dropdown/dropdownCss",["../utils"],function(r){function a(){}return a.prototype.render=function(o){var l=o.call(this),c=this.options.get("dropdownCssClass")||"";return c.indexOf(":all:")!==-1&&(c=c.replace(":all:",""),r.copyNonInternalCssClasses(l[0],this.$element[0])),l.addClass(c),l},a}),s.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(r){function a(){}return a.prototype.highlightFirstItem=function(o){var l=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(l.length>0){var c=l.first(),u=r.GetData(c[0],"data"),d=u.element;if(d&&d.getAttribute&&d.getAttribute("data-select2-tag")==="true"){c.trigger("mouseenter");return}}o.call(this)},a}),s.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(r){var a=r.input.length-r.maximum,o="Please delete "+a+" character";return a!=1&&(o+="s"),o},inputTooShort:function(r){var a=r.minimum-r.input.length,o="Please enter "+a+" or more characters";return o},loadingMore:function(){return"Loading more results"},maximumSelected:function(r){var a="You can only select "+r.maximum+" item";return r.maximum!=1&&(a+="s"),a},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),s.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(r,a,o,l,c,u,d,h,p,f,m,v,g,_,b,y,T,x,S,M,w,E,C,P,A,R,N,U,k,D,W){function O(){this.reset()}O.prototype.apply=function(V){if(V=r.extend(!0,{},this.defaults,V),V.dataAdapter==null&&(V.ajax!=null?V.dataAdapter=b:V.data!=null?V.dataAdapter=_:V.dataAdapter=g,V.minimumInputLength>0&&(V.dataAdapter=f.Decorate(V.dataAdapter,x)),V.maximumInputLength>0&&(V.dataAdapter=f.Decorate(V.dataAdapter,S)),V.maximumSelectionLength>0&&(V.dataAdapter=f.Decorate(V.dataAdapter,M)),V.tags&&(V.dataAdapter=f.Decorate(V.dataAdapter,y)),(V.tokenSeparators!=null||V.tokenizer!=null)&&(V.dataAdapter=f.Decorate(V.dataAdapter,T))),V.resultsAdapter==null&&(V.resultsAdapter=a,V.ajax!=null&&(V.resultsAdapter=f.Decorate(V.resultsAdapter,P)),V.placeholder!=null&&(V.resultsAdapter=f.Decorate(V.resultsAdapter,C)),V.selectOnClose&&(V.resultsAdapter=f.Decorate(V.resultsAdapter,N)),V.tags&&(V.resultsAdapter=f.Decorate(V.resultsAdapter,D))),V.dropdownAdapter==null){if(V.multiple)V.dropdownAdapter=w;else{var j=f.Decorate(w,E);V.dropdownAdapter=j}V.minimumResultsForSearch!==0&&(V.dropdownAdapter=f.Decorate(V.dropdownAdapter,R)),V.closeOnSelect&&(V.dropdownAdapter=f.Decorate(V.dropdownAdapter,U)),V.dropdownCssClass!=null&&(V.dropdownAdapter=f.Decorate(V.dropdownAdapter,k)),V.dropdownAdapter=f.Decorate(V.dropdownAdapter,A)}V.selectionAdapter==null&&(V.multiple?V.selectionAdapter=l:V.selectionAdapter=o,V.placeholder!=null&&(V.selectionAdapter=f.Decorate(V.selectionAdapter,c)),V.allowClear&&(V.selectionAdapter=f.Decorate(V.selectionAdapter,u)),V.multiple&&(V.selectionAdapter=f.Decorate(V.selectionAdapter,d)),V.selectionCssClass!=null&&(V.selectionAdapter=f.Decorate(V.selectionAdapter,h)),V.selectionAdapter=f.Decorate(V.selectionAdapter,p)),V.language=this._resolveLanguage(V.language),V.language.push("en");for(var Y=[],H=0;H<V.language.length;H++){var q=V.language[H];Y.indexOf(q)===-1&&Y.push(q)}return V.language=Y,V.translations=this._processTranslations(V.language,V.debug),V},O.prototype.reset=function(){function V(Y){function H(q){return v[q]||q}return Y.replace(/[^\u0000-\u007E]/g,H)}function j(Y,H){if(Y.term==null||Y.term.trim()==="")return H;if(H.children&&H.children.length>0){for(var q=r.extend(!0,{},H),K=H.children.length-1;K>=0;K--){var G=H.children[K],te=j(Y,G);te==null&&q.children.splice(K,1)}return q.children.length>0?q:j(Y,q)}var ue=V(H.text).toUpperCase(),se=V(Y.term).toUpperCase();return ue.indexOf(se)>-1?H:null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:f.escapeMarkup,language:{},matcher:j,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(Y){return Y},templateResult:function(Y){return Y.text},templateSelection:function(Y){return Y.text},theme:"default",width:"resolve"}},O.prototype.applyFromElement=function(V,j){var Y=V.language,H=this.defaults.language,q=j.prop("lang"),K=j.closest("[lang]").prop("lang"),G=Array.prototype.concat.call(this._resolveLanguage(q),this._resolveLanguage(Y),this._resolveLanguage(H),this._resolveLanguage(K));return V.language=G,V},O.prototype._resolveLanguage=function(V){if(!V)return[];if(r.isEmptyObject(V))return[];if(r.isPlainObject(V))return[V];var j;Array.isArray(V)?j=V:j=[V];for(var Y=[],H=0;H<j.length;H++)if(Y.push(j[H]),typeof j[H]=="string"&&j[H].indexOf("-")>0){var q=j[H].split("-"),K=q[0];Y.push(K)}return Y},O.prototype._processTranslations=function(V,j){for(var Y=new m,H=0;H<V.length;H++){var q=new m,K=V[H];if(typeof K=="string")try{q=m.loadPath(K)}catch{try{K=this.defaults.amdLanguageBase+K,q=m.loadPath(K)}catch{j&&window.console&&console.warn&&console.warn('Select2: The language file for "'+K+'" could not be automatically loaded. A fallback will be used instead.')}}else r.isPlainObject(K)?q=new m(K):q=K;Y.extend(q)}return Y},O.prototype.set=function(V,j){var Y=r.camelCase(V),H={};H[Y]=j;var q=f._convertData(H);r.extend(!0,this.defaults,q)};var B=new O;return B}),s.define("select2/options",["jquery","./defaults","./utils"],function(r,a,o){function l(c,u){this.options=c,u!=null&&this.fromElement(u),u!=null&&(this.options=a.applyFromElement(this.options,u)),this.options=a.apply(this.options)}return l.prototype.fromElement=function(c){var u=["select2"];this.options.multiple==null&&(this.options.multiple=c.prop("multiple")),this.options.disabled==null&&(this.options.disabled=c.prop("disabled")),this.options.autocomplete==null&&c.prop("autocomplete")&&(this.options.autocomplete=c.prop("autocomplete")),this.options.dir==null&&(c.prop("dir")?this.options.dir=c.prop("dir"):c.closest("[dir]").prop("dir")?this.options.dir=c.closest("[dir]").prop("dir"):this.options.dir="ltr"),c.prop("disabled",this.options.disabled),c.prop("multiple",this.options.multiple),o.GetData(c[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),o.StoreData(c[0],"data",o.GetData(c[0],"select2Tags")),o.StoreData(c[0],"tags",!0)),o.GetData(c[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),c.attr("ajax--url",o.GetData(c[0],"ajaxUrl")),o.StoreData(c[0],"ajax-Url",o.GetData(c[0],"ajaxUrl")));var d={};function h(T,x){return x.toUpperCase()}for(var p=0;p<c[0].attributes.length;p++){var f=c[0].attributes[p].name,m="data-";if(f.substr(0,m.length)==m){var v=f.substring(m.length),g=o.GetData(c[0],v),_=v.replace(/-([a-z])/g,h);d[_]=g}}r.fn.jquery&&r.fn.jquery.substr(0,2)=="1."&&c[0].dataset&&(d=r.extend(!0,{},c[0].dataset,d));var b=r.extend(!0,{},o.GetData(c[0]),d);b=o._convertData(b);for(var y in b)u.indexOf(y)>-1||(r.isPlainObject(this.options[y])?r.extend(this.options[y],b[y]):this.options[y]=b[y]);return this},l.prototype.get=function(c){return this.options[c]},l.prototype.set=function(c,u){this.options[c]=u},l}),s.define("select2/core",["jquery","./options","./utils","./keys"],function(r,a,o,l){var c=function(u,d){o.GetData(u[0],"select2")!=null&&o.GetData(u[0],"select2").destroy(),this.$element=u,this.id=this._generateId(u),d=d||{},this.options=new a(d,u),c.__super__.constructor.call(this);var h=u.attr("tabindex")||0;o.StoreData(u[0],"old-tabindex",h),u.attr("tabindex","-1");var p=this.options.get("dataAdapter");this.dataAdapter=new p(u,this.options);var f=this.render();this._placeContainer(f);var m=this.options.get("selectionAdapter");this.selection=new m(u,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,f);var v=this.options.get("dropdownAdapter");this.dropdown=new v(u,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,f);var g=this.options.get("resultsAdapter");this.results=new g(u,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var _=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(b){_.trigger("selection:update",{data:b})}),u[0].classList.add("select2-hidden-accessible"),u.attr("aria-hidden","true"),this._syncAttributes(),o.StoreData(u[0],"select2",this),u.data("select2",this)};return o.Extend(c,o.Observable),c.prototype._generateId=function(u){var d="";return u.attr("id")!=null?d=u.attr("id"):u.attr("name")!=null?d=u.attr("name")+"-"+o.generateChars(2):d=o.generateChars(4),d=d.replace(/(:|\.|\[|\]|,)/g,""),d="select2-"+d,d},c.prototype._placeContainer=function(u){u.insertAfter(this.$element);var d=this._resolveWidth(this.$element,this.options.get("width"));d!=null&&u.css("width",d)},c.prototype._resolveWidth=function(u,d){var h=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(d=="resolve"){var p=this._resolveWidth(u,"style");return p??this._resolveWidth(u,"element")}if(d=="element"){var f=u.outerWidth(!1);return f<=0?"auto":f+"px"}if(d=="style"){var m=u.attr("style");if(typeof m!="string")return null;for(var v=m.split(";"),g=0,_=v.length;g<_;g=g+1){var b=v[g].replace(/\s/g,""),y=b.match(h);if(y!==null&&y.length>=1)return y[1]}return null}if(d=="computedstyle"){var T=window.getComputedStyle(u[0]);return T.width}return d},c.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},c.prototype._registerDomEvents=function(){var u=this;this.$element.on("change.select2",function(){u.dataAdapter.current(function(d){u.trigger("selection:update",{data:d})})}),this.$element.on("focus.select2",function(d){u.trigger("focus",d)}),this._syncA=o.bind(this._syncAttributes,this),this._syncS=o.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(d){u._syncA(),u._syncS(d)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},c.prototype._registerDataEvents=function(){var u=this;this.dataAdapter.on("*",function(d,h){u.trigger(d,h)})},c.prototype._registerSelectionEvents=function(){var u=this,d=["toggle","focus"];this.selection.on("toggle",function(){u.toggleDropdown()}),this.selection.on("focus",function(h){u.focus(h)}),this.selection.on("*",function(h,p){d.indexOf(h)===-1&&u.trigger(h,p)})},c.prototype._registerDropdownEvents=function(){var u=this;this.dropdown.on("*",function(d,h){u.trigger(d,h)})},c.prototype._registerResultsEvents=function(){var u=this;this.results.on("*",function(d,h){u.trigger(d,h)})},c.prototype._registerEvents=function(){var u=this;this.on("open",function(){u.$container[0].classList.add("select2-container--open")}),this.on("close",function(){u.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){u.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){u.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){u.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(d){u.isOpen()||u.trigger("open",{}),this.dataAdapter.query(d,function(h){u.trigger("results:all",{data:h,query:d})})}),this.on("query:append",function(d){this.dataAdapter.query(d,function(h){u.trigger("results:append",{data:h,query:d})})}),this.on("keypress",function(d){var h=d.which;u.isOpen()?h===l.ESC||h===l.UP&&d.altKey?(u.close(d),d.preventDefault()):h===l.ENTER||h===l.TAB?(u.trigger("results:select",{}),d.preventDefault()):h===l.SPACE&&d.ctrlKey?(u.trigger("results:toggle",{}),d.preventDefault()):h===l.UP?(u.trigger("results:previous",{}),d.preventDefault()):h===l.DOWN&&(u.trigger("results:next",{}),d.preventDefault()):(h===l.ENTER||h===l.SPACE||h===l.DOWN&&d.altKey)&&(u.open(),d.preventDefault())})},c.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},c.prototype._isChangeMutation=function(u){var d=this;if(u.addedNodes&&u.addedNodes.length>0)for(var h=0;h<u.addedNodes.length;h++){var p=u.addedNodes[h];if(p.selected)return!0}else{if(u.removedNodes&&u.removedNodes.length>0)return!0;if(Array.isArray(u))return u.some(function(f){return d._isChangeMutation(f)})}return!1},c.prototype._syncSubtree=function(u){var d=this._isChangeMutation(u),h=this;d&&this.dataAdapter.current(function(p){h.trigger("selection:update",{data:p})})},c.prototype.trigger=function(u,d){var h=c.__super__.trigger,p={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(d===void 0&&(d={}),u in p){var f=p[u],m={prevented:!1,name:u,args:d};if(h.call(this,f,m),m.prevented){d.prevented=!0;return}}h.call(this,u,d)},c.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},c.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},c.prototype.close=function(u){this.isOpen()&&this.trigger("close",{originalEvent:u})},c.prototype.isEnabled=function(){return!this.isDisabled()},c.prototype.isDisabled=function(){return this.options.get("disabled")},c.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},c.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},c.prototype.focus=function(u){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},c.prototype.enable=function(u){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(u==null||u.length===0)&&(u=[!0]);var d=!u[0];this.$element.prop("disabled",d)},c.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var u=[];return this.dataAdapter.current(function(d){u=d}),u},c.prototype.val=function(u){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),u==null||u.length===0)return this.$element.val();var d=u[0];Array.isArray(d)&&(d=d.map(function(h){return h.toString()})),this.$element.val(d).trigger("input").trigger("change")},c.prototype.destroy=function(){o.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",o.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),o.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},c.prototype.render=function(){var u=r('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return u.attr("dir",this.options.get("dir")),this.$container=u,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),o.StoreData(u[0],"element",this.$element),u},c}),s.define("jquery-mousewheel",["jquery"],function(r){return r}),s.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(r,a,o,l,c){if(r.fn.select2==null){var u=["open","close","destroy"];r.fn.select2=function(d){if(d=d||{},typeof d=="object")return this.each(function(){var f=r.extend(!0,{},d);new o(r(this),f)}),this;if(typeof d=="string"){var h,p=Array.prototype.slice.call(arguments,1);return this.each(function(){var f=c.GetData(this,"select2");f==null&&window.console&&console.error&&console.error("The select2('"+d+"') method was called on an element that is not using Select2."),h=f[d].apply(f,p)}),u.indexOf(d)>-1?this:h}else throw new Error("Invalid arguments for Select2: "+d)}}return r.fn.select2.defaults==null&&(r.fn.select2.defaults=l),o}),{define:s.define,require:s.require}}(),i=n.require("jquery.select2");return e.fn.select2.amd=n,i})})(r0);var uT=r0.exports;const dT=Nv(uT),a0=()=>{const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries())},hT=(t,e)=>{const n=new URLSearchParams(a0());e?n.set(t,e):n.delete(t),n.delete("page");const i=`${window.location.pathname}?${n.toString()}`;window.history.replaceState({},"",i),pT(i)},fT=(t,e)=>{const n=new URLSearchParams(a0());e?n.set(t,e):n.delete(t),n.delete("page");const i=`${window.location.pathname}?${n.toString()}`;window.history.replaceState({},"",i),mT(i)},pT=t=>{fetch(t).then(e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.text()}).then(e=>{const i=new DOMParser().parseFromString(e,"text/html"),s=i.querySelector(".doctors-list"),r=i.querySelector("nav");document.querySelector(".doctors-list").innerHTML=s.innerHTML,document.querySelector("nav").innerHTML=r?r.innerHTML:""}).catch(e=>console.error("Error fetching doctors:",e)),gT()},mT=t=>{fetch(t).then(e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.text()}).then(e=>{const s=new DOMParser().parseFromString(e,"text/html").querySelector(".news-list");document.querySelector(".news-list").innerHTML=s.innerHTML}).catch(e=>console.error("Error fetching articles:",e)),vT()};function pa(t){if($(t).length>0){var e=$("header").outerHeight(),n=$(t).offset().top-e-20;$("html, body").animate({scrollTop:n},"slow")}}function o0(t,e,n){function i(o,l){return Array.from(Array(l-o+1),(c,u)=>u+o)}var s=1,r=n-s*2-3>>1,a=n-s*2-2>>1;return t<=n?i(1,t):e<=n-s-1-a?i(1,n-s-1).concat([0]).concat(i(t-s+1,t)):e>=t-s-1-a?i(1,s).concat([0]).concat(i(t-s-1-a-r,t)):i(1,s).concat([0]).concat(i(e-r,e+a)).concat([0]).concat(i(t-s+1,t))}function gT(){setTimeout(function(){$(".pagination").empty();var t="#doctors",e=$("#doctors .doctors--item").length,n=screen.width;if(n<768)var i=5;else if(n<1024)var i=8;else var i=16;var s=Math.ceil(e/i),r=7,a;function o(l){return l<1||l>s?!1:(a=l,$(t+" .content-item").hide().slice((a-1)*i,a*i).show(),$(t+" .pagination li").slice(1,-1).remove(),o0(s,a,r).forEach(c=>{$("<li>").addClass("page-item "+(c?"current-page ":"")+(c===a?"active ":"")).append($("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(c||"...")).insertBefore(t+" #next-page")}),a===1?$("#previous-page").addClass("active"):$("#previous-page").removeClass("active"),a===s?$("#next-page").addClass("active"):$("#next-page").removeClass("active"),!0)}$("#doctors .pagination").append($("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append($('<a><svg><use xlink:href"'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),$("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append($('<a><svg><use xlink:href",'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?($("#doctors").show(),o(1),$("#doctors .pagination").show()):$("#doctors .pagination").hide(),$(document).on("click",t+" .pagination li.current-page:not(.active)",function(){var l=+$(this).text();o(l),pa(t)}),$(t+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),pa(t)}}),$(t+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),pa(t)}})},1e3)}function vT(){setTimeout(function(){$(".pagination").empty();var t="#news",e=$("#news .news--item").length,n=screen.width;if(n<768)var i=9;else if(n<1024)var i=9;else var i=9;console.log(i);var s=Math.ceil(e/i);console.log(e);var r=7,a;function o(l){return l<1||l>s?!1:(a=l,$(t+" .content-item").hide().slice((a-1)*i,a*i).show(),$(t+" .pagination li").slice(1,-1).remove(),o0(s,a,r).forEach(c=>{$("<li>").addClass("page-item "+(c?"current-page ":"")+(c===a?"active ":"")).append($("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(c||"...")).insertBefore(t+" #next-page")}),a===1?$("#previous-page").addClass("active"):$("#previous-page").removeClass("active"),a===s?$("#next-page").addClass("active"):$("#next-page").removeClass("active"),!0)}$("#news .pagination").append($("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append($('<a><svg><use xlink:href"'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),$("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append($('<a><svg><use xlink:href",'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?($("#news").show(),o(1),$("#news .pagination").show()):$("#news .pagination").hide(),$(document).on("click",t+" .pagination li.current-page:not(.active)",function(){var l=+$(this).text();o(l),pa(t)}),$(t+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),pa(t)}}),$(t+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),pa(t)}})},1e3)}dT();we(document).ready(()=>{we(".select-doctors-category").select2({minimumResultsForSearch:-1,dropdownParent:we(".doctors")}),we(".select-doctors-category").on("select2:select",function(t){console.log(123);const e=t.params.data.id;_T("category",e),yT()})});we(function(){we(".select-choose-specialist").select2({minimumResultsForSearch:-1}),we(".select-choose-clinic").select2({minimumResultsForSearch:-1}),we(".select-choose-specialists").select2({minimumResultsForSearch:-1,dropdownParent:we("#popup--sign-up-appointment")}),we(".select-choose-clinics").select2({minimumResultsForSearch:-1,dropdownParent:we("#popup--sign-up-appointment")}),we(".select-choose-specialist--popup").select2({minimumResultsForSearch:-1,dropdownCssClass:"select-up-index",dropdownParent:we("main")}),we(".select-choose-clinic--popup").select2({minimumResultsForSearch:-1,dropdownCssClass:"select-up-index",dropdownParent:we("main")}),we(".select-doctors-category").select2({minimumResultsForSearch:-1,dropdownParent:we(".doctors")}),we(".select-news-category").select2({minimumResultsForSearch:-1,placeholder:articleTranslations.articleCategories,dropdownCssClass:"news-category-results",dropdownParent:we(".news-head")}),we(".select-doctors-category").on("select2:select",function(t){const e=we(this).val();hT("category",e)}),we(".select-news-category").on("select2:select",function(t){const e=we(this).val();fT("category",e)})});function yT(){setTimeout(function(){we(".pagination").empty();var t="#doctors",e=we("#doctors .doctors--item").length,n=screen.width;if(n<768)var i=5;else if(n<1024)var i=8;else var i=16;var s=Math.ceil(e/i);console.log(e);var r=7,a;function o(l){return l<1||l>s?!1:(a=l,we(t+" .content-item").hide().slice((a-1)*i,a*i).show(),we(t+" .pagination li").slice(1,-1).remove(),wT(s,a,r).forEach(c=>{we("<li>").addClass("page-item "+(c?"current-page ":"")+(c===a?"active ":"")).append(we("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(c||"...")).insertBefore(t+" #next-page")}),a===1?we("#previous-page").addClass("active"):we("#previous-page").removeClass("active"),a===s?we("#next-page").addClass("active"):we("#next-page").removeClass("active"),!0)}we("#doctors .pagination").append(we("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(we('<a><svg><use xlink:href=",'+iconsPath+'"#i-arrow-small-down>').addClass("page-link").attr({href:"javascript:void(0)"})),we("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(we('<a><svg><use xlink:href=",'+iconsPath+'"#i-arrow-small-down>').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(we("#doctors").show(),o(1),we("#doctors .pagination").show()):we("#doctors .pagination").hide(),we(document).on("click",t+" .pagination li.current-page:not(.active)",function(){var l=+we(this).text();o(l),scrollToElement(t)}),we(t+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),scrollToElement(t)}}),we(t+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),scrollToElement(t)}})},1e3)}function _T(t,e){const n=new URLSearchParams(bT());e?n.set(t,e):n.delete(t),n.delete("page");const i=`${window.location.pathname}?${n.toString()}`;window.history.replaceState({},"",i),ET(i)}const bT=()=>{const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries())},ET=t=>{fetch(t).then(e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.text()}).then(e=>{const i=new DOMParser().parseFromString(e,"text/html"),s=i.querySelector(".doctors-list"),r=i.querySelector("nav");document.querySelector(".doctors-list").innerHTML=s.innerHTML,document.querySelector("nav").innerHTML=r?r.innerHTML:""}).catch(e=>console.error("Error fetching doctors:",e))};function wT(t,e,n){function i(o,l){return Array.from(Array(l-o+1),(c,u)=>u+o)}var s=1,r=n-s*2-3>>1,a=n-s*2-2>>1;return t<=n?i(1,t):e<=n-s-1-a?i(1,n-s-1).concat([0]).concat(i(t-s+1,t)):e>=t-s-1-a?i(1,s).concat([0]).concat(i(t-s-1-a-r,t)):i(1,s).concat([0]).concat(i(e-r,e+a)).concat([0]).concat(i(t-s+1,t))}function Ke(t,e,n){return(e=ST(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xT(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ST(t){var e=xT(t,"string");return typeof e=="symbol"?e:String(e)}function TT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Em(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function MT(t,e,n){return e&&Em(t.prototype,e),n&&Em(t,n),t}function AT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function xm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wm(Object(n),!0).forEach(function(i){AT(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var Sm={addCSS:!0,thumbWidth:15,watch:!0};function CT(t,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function PT(t,e){if(t&&e){var n=new Event(e,{bubbles:!0});t.dispatchEvent(n)}}var sl=function(t){return t!=null?t.constructor:null},If=function(t,e){return!!(t&&e&&t instanceof e)},l0=function(t){return t==null},c0=function(t){return sl(t)===Object},LT=function(t){return sl(t)===Number&&!Number.isNaN(t)},u0=function(t){return sl(t)===String},RT=function(t){return sl(t)===Boolean},IT=function(t){return sl(t)===Function},d0=function(t){return Array.isArray(t)},h0=function(t){return If(t,NodeList)},DT=function(t){return If(t,Element)},OT=function(t){return If(t,Event)},kT=function(t){return l0(t)||(u0(t)||d0(t)||h0(t))&&!t.length||c0(t)&&!Object.keys(t).length},xn={nullOrUndefined:l0,object:c0,number:LT,string:u0,boolean:RT,function:IT,array:d0,nodeList:h0,element:DT,event:OT,empty:kT};function NT(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function FT(t,e){if(1>e){var n=NT(e);return parseFloat(t.toFixed(n))}return Math.round(t/e)*e}var UT=function(){function t(e,n){TT(this,t),xn.element(e)?this.element=e:xn.string(e)&&(this.element=document.querySelector(e)),xn.element(this.element)&&xn.empty(this.element.rangeTouch)&&(this.config=xm({},Sm,{},n),this.init())}return MT(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var n=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(s){n.element[i](s,function(r){return n.set(r)},!1)})}},{key:"get",value:function(e){if(!t.enabled||!xn.event(e))return null;var n,i=e.target,s=e.changedTouches[0],r=parseFloat(i.getAttribute("min"))||0,a=parseFloat(i.getAttribute("max"))||100,o=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(s.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),r+FT(n/100*(a-r),o)}},{key:"set",value:function(e){t.enabled&&xn.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),PT(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;if(xn.empty(e)||xn.string(e)?i=Array.from(document.querySelectorAll(xn.string(e)?e:'input[type="range"]')):xn.element(e)?i=[e]:xn.nodeList(e)?i=Array.from(e):xn.array(e)&&(i=e.filter(xn.element)),xn.empty(i))return null;var s=xm({},Sm,{},n);if(xn.string(e)&&s.watch){var r=new MutationObserver(function(a){Array.from(a).forEach(function(o){Array.from(o.addedNodes).forEach(function(l){xn.element(l)&&CT(l,e)&&new t(l,s)})})});r.observe(document.body,{childList:!0,subtree:!0})}return i.map(function(a){return new t(a,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}();const rl=t=>t!=null?t.constructor:null,ps=(t,e)=>!!(t&&e&&t instanceof e),Df=t=>t==null,f0=t=>rl(t)===Object,zT=t=>rl(t)===Number&&!Number.isNaN(t),cu=t=>rl(t)===String,BT=t=>rl(t)===Boolean,p0=t=>typeof t=="function",m0=t=>Array.isArray(t),HT=t=>ps(t,WeakMap),g0=t=>ps(t,NodeList),VT=t=>rl(t)===Text,$T=t=>ps(t,Event),GT=t=>ps(t,KeyboardEvent),WT=t=>ps(t,window.TextTrackCue)||ps(t,window.VTTCue),jT=t=>ps(t,TextTrack)||!Df(t)&&cu(t.kind),XT=t=>ps(t,Promise)&&p0(t.then),qT=t=>t!==null&&typeof t=="object"&&t.nodeType===1&&typeof t.style=="object"&&typeof t.ownerDocument=="object",v0=t=>Df(t)||(cu(t)||m0(t)||g0(t))&&!t.length||f0(t)&&!Object.keys(t).length,YT=t=>{if(ps(t,window.URL))return!0;if(!cu(t))return!1;let e=t;t.startsWith("http://")&&t.startsWith("https://")||(e=`http://${t}`);try{return!v0(new URL(e).hostname)}catch{return!1}};var re={nullOrUndefined:Df,object:f0,number:zT,string:cu,boolean:BT,function:p0,array:m0,weakMap:HT,nodeList:g0,element:qT,textNode:VT,event:$T,keyboardEvent:GT,cue:WT,track:jT,promise:XT,url:YT,empty:v0};const Zd=(()=>{const t=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(e).find(i=>t.style[i]!==void 0);return!!re.string(n)&&e[n]})();function y0(t,e){setTimeout(()=>{try{t.hidden=!0,t.offsetHeight,t.hidden=!1}catch{}},e)}const KT=!!window.document.documentMode,ZT=/Edge/g.test(navigator.userAgent),QT="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),JT=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,eM=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,tM=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var fn={isIE:KT,isEdge:ZT,isWebKit:QT,isIPhone:JT,isIPadOS:eM,isIos:tM};function nM(t){return JSON.parse(JSON.stringify(t))}function _0(t,e){return e.split(".").reduce((n,i)=>n&&n[i],t)}function Wt(t={},...e){if(!e.length)return t;const n=e.shift();return re.object(n)?(Object.keys(n).forEach(i=>{re.object(n[i])?(Object.keys(t).includes(i)||Object.assign(t,{[i]:{}}),Wt(t[i],n[i])):Object.assign(t,{[i]:n[i]})}),Wt(t,...e)):t}function b0(t,e){const n=t.length?t:[t];Array.from(n).reverse().forEach((i,s)=>{const r=s>0?e.cloneNode(!0):e,a=i.parentNode,o=i.nextSibling;r.appendChild(i),o?a.insertBefore(r,o):a.appendChild(r)})}function Qd(t,e){re.element(t)&&!re.empty(e)&&Object.entries(e).filter(([,n])=>!re.nullOrUndefined(n)).forEach(([n,i])=>t.setAttribute(n,i))}function st(t,e,n){const i=document.createElement(t);return re.object(e)&&Qd(i,e),re.string(n)&&(i.innerText=n),i}function iM(t,e){re.element(t)&&re.element(e)&&e.parentNode.insertBefore(t,e.nextSibling)}function Tm(t,e,n,i){re.element(e)&&e.appendChild(st(t,n,i))}function as(t){re.nodeList(t)||re.array(t)?Array.from(t).forEach(as):re.element(t)&&re.element(t.parentNode)&&t.parentNode.removeChild(t)}function gc(t){if(!re.element(t))return;let{length:e}=t.childNodes;for(;e>0;)t.removeChild(t.lastChild),e-=1}function Nc(t,e){return re.element(e)&&re.element(e.parentNode)&&re.element(t)?(e.parentNode.replaceChild(t,e),t):null}function Oi(t,e){if(!re.string(t)||re.empty(t))return{};const n={},i=Wt({},e);return t.split(",").forEach(s=>{const r=s.trim(),a=r.replace(".",""),o=r.replace(/[[\]]/g,"").split("="),[l]=o,c=o.length>1?o[1].replace(/["']/g,""):"";switch(r.charAt(0)){case".":re.string(i.class)?n.class=`${i.class} ${a}`:n.class=a;break;case"#":n.id=r.replace("#","");break;case"[":n[l]=c}}),Wt(i,n)}function ur(t,e){if(!re.element(t))return;let n=e;re.boolean(n)||(n=!t.hidden),t.hidden=n}function Ct(t,e,n){if(re.nodeList(t))return Array.from(t).map(i=>Ct(i,e,n));if(re.element(t)){let i="toggle";return n!==void 0&&(i=n?"add":"remove"),t.classList[i](e),t.classList.contains(e)}return!1}function Fc(t,e){return re.element(t)&&t.classList.contains(e)}function wr(t,e){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function sM(t,e){const{prototype:n}=Element;return(n.closest||function(){let i=this;do{if(wr.matches(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}).call(t,e)}function Fo(t){return this.elements.container.querySelectorAll(t)}function Jt(t){return this.elements.container.querySelector(t)}function Qu(t=null,e=!1){re.element(t)&&t.focus({preventScroll:!0,focusVisible:e})}const Mm={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},jt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(t,e){const n=jt[t]||e!=="html5";return{api:n,ui:n&&jt.rangeInput}},pip:!(fn.isIPhone||!re.function(st("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||st("video").disablePictureInPicture)),airplay:re.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(t){if(re.empty(t))return!1;const[e]=t.split("/");let n=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys(Mm).includes(n)&&(n+=`; codecs="${Mm[t]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const t=document.createElement("input");return t.type="range",t.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Zd!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},rM=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t})();function Uo(t,e,n,i=!1,s=!0,r=!1){if(!t||!("addEventListener"in t)||re.empty(e)||!re.function(n))return;const a=e.split(" ");let o=r;rM&&(o={passive:s,capture:r}),a.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:t,type:l,callback:n,options:o}),t[i?"addEventListener":"removeEventListener"](l,n,o)})}function bt(t,e="",n,i=!0,s=!1){Uo.call(this,t,e,n,!0,i,s)}function uu(t,e="",n,i=!0,s=!1){Uo.call(this,t,e,n,!1,i,s)}function Of(t,e="",n,i=!0,s=!1){const r=(...a)=>{uu(t,e,r,i,s),n.apply(this,a)};Uo.call(this,t,e,r,!0,i,s)}function at(t,e="",n=!1,i={}){if(!re.element(t)||re.empty(e))return;const s=new CustomEvent(e,{bubbles:n,detail:{...i,plyr:this}});t.dispatchEvent(s)}function aM(){this&&this.eventListeners&&(this.eventListeners.forEach(t=>{const{element:e,type:n,callback:i,options:s}=t;e.removeEventListener(n,i,s)}),this.eventListeners=[])}function oM(){return new Promise(t=>this.ready?setTimeout(t,0):bt.call(this,this.elements.container,"ready",t)).then(()=>{})}function Fi(t){re.promise(t)&&t.then(null,()=>{})}function Jd(t){return re.array(t)?t.filter((e,n)=>t.indexOf(e)===n):t}function E0(t,e){return re.array(t)&&t.length?t.reduce((n,i)=>Math.abs(i-e)<Math.abs(n-e)?i:n):null}function w0(t){return!(!window||!window.CSS)&&window.CSS.supports(t)}const Am=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((t,[e,n])=>({...t,[e/n]:[e,n]}),{});function x0(t){return re.array(t)||re.string(t)&&t.includes(":")?(re.array(t)?t:t.split(":")).map(Number).every(re.number):!1}function Uc(t){if(!re.array(t)||!t.every(re.number))return null;const[e,n]=t,i=(r,a)=>a===0?r:i(a,r%a),s=i(e,n);return[e/s,n/s]}function kf(t){const e=i=>x0(i)?i.split(":").map(Number):null;let n=e(t);if(n===null&&(n=e(this.config.ratio)),n===null&&!re.empty(this.embed)&&re.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:i,videoHeight:s}=this.media;n=[i,s]}return Uc(n)}function Aa(t){if(!this.isVideo)return{};const{wrapper:e}=this.elements,n=kf.call(this,t);if(!re.array(n))return{};const[i,s]=Uc(n),r=100/i*s;if(w0(`aspect-ratio: ${i}/${s}`)?e.style.aspectRatio=`${i}/${s}`:e.style.paddingBottom=`${r}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),o=(a-r)/(a/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${o}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:r,ratio:n}}function S0(t,e,n=.05){const i=t/e,s=E0(Object.keys(Am),i);return Math.abs(s-i)<=n?Am[s]:[t,e]}function lM(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Us={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(t=>{const e=t.getAttribute("type");return!!re.empty(e)||jt.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Us.getSources.call(this).map(t=>Number(t.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const t=this;t.options.speed=t.config.speed.options,re.empty(this.config.ratio)||Aa.call(t),Object.defineProperty(t.media,"quality",{get(){const e=Us.getSources.call(t).find(n=>n.getAttribute("src")===t.source);return e&&Number(e.getAttribute("size"))},set(e){if(t.quality!==e){if(t.config.quality.forced&&re.function(t.config.quality.onChange))t.config.quality.onChange(e);else{const n=Us.getSources.call(t).find(l=>Number(l.getAttribute("size"))===e);if(!n)return;const{currentTime:i,paused:s,preload:r,readyState:a,playbackRate:o}=t.media;t.media.src=n.getAttribute("src"),(r!=="none"||a)&&(t.once("loadedmetadata",()=>{t.speed=o,t.currentTime=i,s||Fi(t.play())}),t.media.load())}at.call(t,t.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(as(Us.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function cM(t){return`${t}-${Math.floor(1e4*Math.random())}`}function eh(t,...e){return re.empty(t)?t:t.toString().replace(/{(\d+)}/g,(n,i)=>e[i].toString())}function uM(t,e){return t===0||e===0||Number.isNaN(t)||Number.isNaN(e)?0:(t/e*100).toFixed(2)}const bo=(t="",e="",n="")=>t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),T0=(t="")=>t.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function dM(t=""){let e=t.toString();return e=bo(e,"-"," "),e=bo(e,"_"," "),e=T0(e),bo(e," ","")}function hM(t=""){let e=t.toString();return e=dM(e),e.charAt(0).toLowerCase()+e.slice(1)}function fM(t){const e=document.createDocumentFragment(),n=document.createElement("div");return e.appendChild(n),n.innerHTML=t,e.firstChild.innerText}function pM(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}const Cm={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},un={get(t="",e={}){if(re.empty(t)||re.empty(e))return"";let n=_0(e.i18n,t);if(re.empty(n))return Object.keys(Cm).includes(t)?Cm[t]:"";const i={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(i).forEach(([s,r])=>{n=bo(n,s,r)}),n}};class zo{constructor(e){Ke(this,"get",n=>{if(!zo.supported||!this.enabled)return null;const i=window.localStorage.getItem(this.key);if(re.empty(i))return null;const s=JSON.parse(i);return re.string(n)&&n.length?s[n]:s}),Ke(this,"set",n=>{if(!zo.supported||!this.enabled||!re.object(n))return;let i=this.get();re.empty(i)&&(i={}),Wt(i,n);try{window.localStorage.setItem(this.key,JSON.stringify(i))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function al(t,e="text"){return new Promise((n,i)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",()=>{if(e==="text")try{n(JSON.parse(s.responseText))}catch{n(s.responseText)}else n(s.response)}),s.addEventListener("error",()=>{throw new Error(s.status)}),s.open("GET",t,!0),s.responseType=e,s.send()}catch(s){i(s)}})}function M0(t,e){if(!re.string(t))return;const n="cache",i=re.string(e);let s=!1;const r=()=>document.getElementById(e)!==null,a=(o,l)=>{o.innerHTML=l,i&&r()||document.body.insertAdjacentElement("afterbegin",o)};if(!i||!r()){const o=zo.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),i&&l.setAttribute("id",e),o){const c=window.localStorage.getItem(`${n}-${e}`);if(s=c!==null,s){const u=JSON.parse(c);a(l,u.content)}}al(t).then(c=>{if(!re.empty(c)){if(o)try{window.localStorage.setItem(`${n}-${e}`,JSON.stringify({content:c}))}catch{}a(l,c)}}).catch(()=>{})}}const A0=t=>Math.trunc(t/60/60%60,10),mM=t=>Math.trunc(t/60%60,10),gM=t=>Math.trunc(t%60,10);function du(t=0,e=!1,n=!1){if(!re.number(t))return du(void 0,e,n);const i=o=>`0${o}`.slice(-2);let s=A0(t);const r=mM(t),a=gM(t);return s=e||s>0?`${s}:`:"",`${n&&t>0?"-":""}${s}${i(r)}:${i(a)}`}const Xe={getIconUrl(){const t=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,n=t.host!==e||fn.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=Jt.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Fo.call(this,this.config.selectors.buttons.play),pause:Jt.call(this,this.config.selectors.buttons.pause),restart:Jt.call(this,this.config.selectors.buttons.restart),rewind:Jt.call(this,this.config.selectors.buttons.rewind),fastForward:Jt.call(this,this.config.selectors.buttons.fastForward),mute:Jt.call(this,this.config.selectors.buttons.mute),pip:Jt.call(this,this.config.selectors.buttons.pip),airplay:Jt.call(this,this.config.selectors.buttons.airplay),settings:Jt.call(this,this.config.selectors.buttons.settings),captions:Jt.call(this,this.config.selectors.buttons.captions),fullscreen:Jt.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Jt.call(this,this.config.selectors.progress),this.elements.inputs={seek:Jt.call(this,this.config.selectors.inputs.seek),volume:Jt.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Jt.call(this,this.config.selectors.display.buffer),currentTime:Jt.call(this,this.config.selectors.display.currentTime),duration:Jt.call(this,this.config.selectors.display.duration)},re.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon(t,e){const n="http://www.w3.org/2000/svg",i=Xe.getIconUrl.call(this),s=`${i.cors?"":i.url}#${this.config.iconPrefix}`,r=document.createElementNS(n,"svg");Qd(r,Wt(e,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(n,"use"),o=`${s}-${t}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel(t,e={}){const n=un.get(t,this.config);return st("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(t){if(re.empty(t))return null;const e=st("span",{class:this.config.classNames.menu.value});return e.appendChild(st("span",{class:this.config.classNames.menu.badge},t)),e},createButton(t,e){const n=Wt({},e);let i=hM(t);const s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(n).includes(a)&&(s[a]=n[a],delete n[a])}),s.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some(a=>a===this.config.classNames.control)||Wt(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,t){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,i="play",s.label="play",s.icon="play";break;default:re.empty(s.label)&&(s.label=i),re.empty(s.icon)&&(s.icon=t)}const r=st(s.element);return s.toggle?(r.appendChild(Xe.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),r.appendChild(Xe.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),r.appendChild(Xe.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),r.appendChild(Xe.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(r.appendChild(Xe.createIcon.call(this,s.icon)),r.appendChild(Xe.createLabel.call(this,s.label))),Wt(n,Oi(this.config.selectors.buttons[i],n)),Qd(r,n),i==="play"?(re.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(r)):this.elements.buttons[i]=r,r},createRange(t,e){const n=st("input",Wt(Oi(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":un.get(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=n,Xe.updateRangeFill.call(this,n),UT.setup(n),n},createProgress(t,e){const n=st("progress",Wt(Oi(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(t!=="volume"){n.appendChild(st("span",null,"0"));const i={played:"played",buffer:"buffered"}[t],s=i?un.get(i,this.config):"";n.innerText=`% ${s.toLowerCase()}`}return this.elements.display[t]=n,n},createTime(t,e){const n=Oi(this.config.selectors.display[t],e),i=st("div",Wt(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":un.get(t,this.config),role:"timer"}),"00:00");return this.elements.display[t]=i,i},bindMenuItemShortcuts(t,e){bt.call(this,t,"keydown keyup",n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const i=wr(t,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(n.key))Xe.showMenuPanel.call(this,e,!0);else{let s;n.key!==" "&&(n.key==="ArrowDown"||i&&n.key==="ArrowRight"?(s=t.nextElementSibling,re.element(s)||(s=t.parentNode.firstElementChild)):(s=t.previousElementSibling,re.element(s)||(s=t.parentNode.lastElementChild)),Qu.call(this,s,!0))}},!1),bt.call(this,t,"keyup",n=>{n.key==="Return"&&Xe.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:t,list:e,type:n,title:i,badge:s=null,checked:r=!1}){const a=Oi(this.config.selectors.inputs[n]),o=st("button",Wt(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":r,value:t})),l=st("span");l.innerHTML=i,re.element(s)&&l.appendChild(s),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>o.getAttribute("aria-checked")==="true",set(c){c&&Array.from(o.parentNode.children).filter(u=>wr(u,'[role="menuitemradio"]')).forEach(u=>u.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",c?"true":"false")}}),this.listeners.bind(o,"click keyup",c=>{if(!re.keyboardEvent(c)||c.key===" "){switch(c.preventDefault(),c.stopPropagation(),o.checked=!0,n){case"language":this.currentTrack=Number(t);break;case"quality":this.quality=t;break;case"speed":this.speed=parseFloat(t)}Xe.showMenuPanel.call(this,"home",re.keyboardEvent(c))}},n,!1),Xe.bindMenuItemShortcuts.call(this,o,n),e.appendChild(o)},formatTime(t=0,e=!1){return re.number(t)?du(t,A0(this.duration)>0,e):t},updateTimeDisplay(t=null,e=0,n=!1){re.element(t)&&re.number(e)&&(t.innerText=Xe.formatTime(e,n))},updateVolume(){this.supported.ui&&(re.element(this.elements.inputs.volume)&&Xe.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),re.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(t,e=0){re.element(t)&&(t.value=e,Xe.updateRangeFill.call(this,t))},updateProgress(t){if(!this.supported.ui||!re.event(t))return;let e=0;const n=(i,s)=>{const r=re.number(s)?s:0,a=re.element(i)?i:this.elements.display.buffer;if(re.element(a)){a.value=r;const o=a.getElementsByTagName("span")[0];re.element(o)&&(o.childNodes[0].nodeValue=r)}};if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":e=uM(this.currentTime,this.duration),t.type==="timeupdate"&&Xe.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(t){const e=re.event(t)?t.target:t;if(re.element(e)&&e.getAttribute("type")==="range"){if(wr(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const n=Xe.formatTime(this.currentTime),i=Xe.formatTime(this.duration),s=un.get("seekLabel",this.config);e.setAttribute("aria-valuetext",s.replace("{currentTime}",n).replace("{duration}",i))}else if(wr(e,this.config.selectors.inputs.volume)){const n=100*e.value;e.setAttribute("aria-valuenow",n),e.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(fn.isWebKit||fn.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(t){var e,n;if(!this.config.tooltips.seek||!re.element(this.elements.inputs.seek)||!re.element(this.elements.display.seekTooltip)||this.duration===0)return;const i=this.elements.display.seekTooltip,s=`${this.config.classNames.tooltip}--visible`,r=u=>Ct(i,s,u);if(this.touch)return void r(!1);let a=0;const o=this.elements.progress.getBoundingClientRect();if(re.event(t))a=100/o.width*(t.pageX-o.left);else{if(!Fc(i,s))return;a=parseFloat(i.style.left,10)}a<0?a=0:a>100&&(a=100);const l=this.duration/100*a;i.innerText=Xe.formatTime(l);const c=(e=this.config.markers)===null||e===void 0||(n=e.points)===null||n===void 0?void 0:n.find(({time:u})=>u===Math.round(l));c&&i.insertAdjacentHTML("afterbegin",`${c.label}<br>`),i.style.left=`${a}%`,re.event(t)&&["mouseenter","mouseleave"].includes(t.type)&&r(t.type==="mouseenter")},timeUpdate(t){const e=!re.element(this.elements.display.duration)&&this.config.invertTime;Xe.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&t.type==="timeupdate"&&this.media.seeking||Xe.updateProgress.call(this,t)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return ur(this.elements.display.currentTime,!0),void ur(this.elements.progress,!0);re.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const t=re.element(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&Xe.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&Xe.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Xe.setMarkers.call(this),Xe.updateSeekTooltip.call(this)},toggleMenuButton(t,e){ur(this.elements.settings.buttons[t],!e)},updateSetting(t,e,n){const i=this.elements.settings.panels[t];let s=null,r=e;if(t==="captions")s=this.currentTrack;else{if(s=re.empty(n)?this[t]:n,re.empty(s)&&(s=this.config[t].default),!re.empty(this.options[t])&&!this.options[t].includes(s))return void this.debug.warn(`Unsupported value of '${s}' for ${t}`);if(!this.config[t].options.includes(s))return void this.debug.warn(`Disabled value of '${s}' for ${t}`)}if(re.element(r)||(r=i&&i.querySelector('[role="menu"]')),!re.element(r))return;this.elements.settings.buttons[t].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Xe.getLabel.call(this,t,s);const a=r&&r.querySelector(`[value="${s}"]`);re.element(a)&&(a.checked=!0)},getLabel(t,e){switch(t){case"speed":return e===1?un.get("normal",this.config):`${e}&times;`;case"quality":if(re.number(e)){const n=un.get(`qualityLabel.${e}`,this.config);return n.length?n:`${e}p`}return T0(e);case"captions":return St.getLabel.call(this);default:return null}},setQualityMenu(t){if(!re.element(this.elements.settings.panels.quality))return;const e="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');re.array(t)&&(this.options.quality=Jd(t).filter(r=>this.config.quality.options.includes(r)));const i=!re.empty(this.options.quality)&&this.options.quality.length>1;if(Xe.toggleMenuButton.call(this,e,i),gc(n),Xe.checkMenu.call(this),!i)return;const s=r=>{const a=un.get(`qualityBadge.${r}`,this.config);return a.length?Xe.createBadge.call(this,a):null};this.options.quality.sort((r,a)=>{const o=this.config.quality.options;return o.indexOf(r)>o.indexOf(a)?1:-1}).forEach(r=>{Xe.createMenuItem.call(this,{value:r,list:n,type:e,title:Xe.getLabel.call(this,"quality",r),badge:s(r)})}),Xe.updateSetting.call(this,e,n)},setCaptionsMenu(){if(!re.element(this.elements.settings.panels.captions))return;const t="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=St.getTracks.call(this),i=!!n.length;if(Xe.toggleMenuButton.call(this,t,i),gc(e),Xe.checkMenu.call(this),!i)return;const s=n.map((r,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:St.getLabel.call(this,r),badge:r.language&&Xe.createBadge.call(this,r.language.toUpperCase()),list:e,type:"language"}));s.unshift({value:-1,checked:!this.captions.toggled,title:un.get("disabled",this.config),list:e,type:"language"}),s.forEach(Xe.createMenuItem.bind(this)),Xe.updateSetting.call(this,t,e)},setSpeedMenu(){if(!re.element(this.elements.settings.panels.speed))return;const t="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(i=>i>=this.minimumSpeed&&i<=this.maximumSpeed);const n=!re.empty(this.options.speed)&&this.options.speed.length>1;Xe.toggleMenuButton.call(this,t,n),gc(e),Xe.checkMenu.call(this),n&&(this.options.speed.forEach(i=>{Xe.createMenuItem.call(this,{value:i,list:e,type:t,title:Xe.getLabel.call(this,"speed",i)})}),Xe.updateSetting.call(this,t,e))},checkMenu(){const{buttons:t}=this.elements.settings,e=!re.empty(t)&&Object.values(t).some(n=>!n.hidden);ur(this.elements.settings.menu,!e)},focusFirstMenuItem(t,e=!1){if(this.elements.settings.popup.hidden)return;let n=t;re.element(n)||(n=Object.values(this.elements.settings.panels).find(s=>!s.hidden));const i=n.querySelector('[role^="menuitem"]');Qu.call(this,i,e)},toggleMenu(t){const{popup:e}=this.elements.settings,n=this.elements.buttons.settings;if(!re.element(e)||!re.element(n))return;const{hidden:i}=e;let s=i;if(re.boolean(t))s=t;else if(re.keyboardEvent(t)&&t.key==="Escape")s=!1;else if(re.event(t)){const r=re.function(t.composedPath)?t.composedPath()[0]:t.target,a=e.contains(r);if(a||!a&&t.target!==n&&s)return}n.setAttribute("aria-expanded",s),ur(e,!s),Ct(this.elements.container,this.config.classNames.menu.open,s),s&&re.keyboardEvent(t)?Xe.focusFirstMenuItem.call(this,null,!0):s||i||Qu.call(this,n,re.keyboardEvent(t))},getMenuSize(t){const e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);const n=e.scrollWidth,i=e.scrollHeight;return as(e),{width:n,height:i}},showMenuPanel(t="",e=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${t}`);if(!re.element(n))return;const i=n.parentNode,s=Array.from(i.children).find(r=>!r.hidden);if(jt.transitions&&!jt.reducedMotion){i.style.width=`${s.scrollWidth}px`,i.style.height=`${s.scrollHeight}px`;const r=Xe.getMenuSize.call(this,n),a=o=>{o.target===i&&["width","height"].includes(o.propertyName)&&(i.style.width="",i.style.height="",uu.call(this,i,Zd,a))};bt.call(this,i,Zd,a),i.style.width=`${r.width}px`,i.style.height=`${r.height}px`}ur(s,!0),ur(n,!1),Xe.focusFirstMenuItem.call(this,n,e)},setDownloadUrl(){const t=this.elements.buttons.download;re.element(t)&&t.setAttribute("href",this.download)},create(t){const{bindMenuItemShortcuts:e,createButton:n,createProgress:i,createRange:s,createTime:r,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=Xe;this.elements.controls=null,re.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const c=st("div",Oi(this.config.selectors.controls.wrapper));this.elements.controls=c;const u={class:"plyr__controls__item"};return Jd(re.array(this.config.controls)?this.config.controls:[]).forEach(d=>{if(d==="restart"&&c.appendChild(n.call(this,"restart",u)),d==="rewind"&&c.appendChild(n.call(this,"rewind",u)),d==="play"&&c.appendChild(n.call(this,"play",u)),d==="fast-forward"&&c.appendChild(n.call(this,"fast-forward",u)),d==="progress"){const h=st("div",{class:`${u.class} plyr__progress__container`}),p=st("div",Oi(this.config.selectors.progress));if(p.appendChild(s.call(this,"seek",{id:`plyr-seek-${t.id}`})),p.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const f=st("span",{class:this.config.classNames.tooltip},"00:00");p.appendChild(f),this.elements.display.seekTooltip=f}this.elements.progress=p,h.appendChild(this.elements.progress),c.appendChild(h)}if(d==="current-time"&&c.appendChild(r.call(this,"currentTime",u)),d==="duration"&&c.appendChild(r.call(this,"duration",u)),d==="mute"||d==="volume"){let{volume:h}=this.elements;if(re.element(h)&&c.contains(h)||(h=st("div",Wt({},u,{class:`${u.class} plyr__volume`.trim()})),this.elements.volume=h,c.appendChild(h)),d==="mute"&&h.appendChild(n.call(this,"mute")),d==="volume"&&!fn.isIos&&!fn.isIPadOS){const p={max:1,step:.05,value:this.config.volume};h.appendChild(s.call(this,"volume",Wt(p,{id:`plyr-volume-${t.id}`})))}}if(d==="captions"&&c.appendChild(n.call(this,"captions",u)),d==="settings"&&!re.empty(this.config.settings)){const h=st("div",Wt({},u,{class:`${u.class} plyr__menu`.trim(),hidden:""}));h.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${t.id}`,"aria-expanded":!1}));const p=st("div",{class:"plyr__menu__container",id:`plyr-settings-${t.id}`,hidden:""}),f=st("div"),m=st("div",{id:`plyr-settings-${t.id}-home`}),v=st("div",{role:"menu"});m.appendChild(v),f.appendChild(m),this.elements.settings.panels.home=m,this.config.settings.forEach(g=>{const _=st("button",Wt(Oi(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,_,g),bt.call(this,_,"click",()=>{l.call(this,g,!1)});const b=st("span",null,un.get(g,this.config)),y=st("span",{class:this.config.classNames.menu.value});y.innerHTML=t[g],b.appendChild(y),_.appendChild(b),v.appendChild(_);const T=st("div",{id:`plyr-settings-${t.id}-${g}`,hidden:""}),x=st("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});x.appendChild(st("span",{"aria-hidden":!0},un.get(g,this.config))),x.appendChild(st("span",{class:this.config.classNames.hidden},un.get("menuBack",this.config))),bt.call(this,T,"keydown",S=>{S.key==="ArrowLeft"&&(S.preventDefault(),S.stopPropagation(),l.call(this,"home",!0))},!1),bt.call(this,x,"click",()=>{l.call(this,"home",!1)}),T.appendChild(x),T.appendChild(st("div",{role:"menu"})),f.appendChild(T),this.elements.settings.buttons[g]=_,this.elements.settings.panels[g]=T}),p.appendChild(f),h.appendChild(p),c.appendChild(h),this.elements.settings.popup=p,this.elements.settings.menu=h}if(d==="pip"&&jt.pip&&c.appendChild(n.call(this,"pip",u)),d==="airplay"&&jt.airplay&&c.appendChild(n.call(this,"airplay",u)),d==="download"){const h=Wt({},u,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(h.download="");const{download:p}=this.config.urls;!re.url(p)&&this.isEmbed&&Wt(h,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(n.call(this,"download",h))}d==="fullscreen"&&c.appendChild(n.call(this,"fullscreen",u))}),this.isHTML5&&a.call(this,Us.getQualityOptions.call(this)),o.call(this),c},inject(){if(this.config.loadSprite){const s=Xe.getIconUrl.call(this);s.cors&&M0(s.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let t=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;re.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),re.element(this.config.controls)||re.string(this.config.controls)?t=this.config.controls:(t=Xe.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:St.getLabel.call(this)}),n=!1);let i;if(n&&re.string(this.config.controls)&&(t=(s=>{let r=s;return Object.entries(e).forEach(([a,o])=>{r=bo(r,`{${a}}`,o)}),r})(t)),re.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),re.element(i)||(i=this.elements.container),i[re.element(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),re.element(this.elements.controls)||Xe.findElements.call(this),!re.empty(this.elements.buttons)){const s=r=>{const a=this.config.classNames.controlPressed;r.setAttribute("aria-pressed","false"),Object.defineProperty(r,"pressed",{configurable:!0,enumerable:!0,get:()=>Fc(r,a),set(o=!1){Ct(r,a,o),r.setAttribute("aria-pressed",o?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(r=>{re.array(r)||re.nodeList(r)?Array.from(r).filter(Boolean).forEach(s):s(r)})}if(fn.isEdge&&y0(i),this.config.tooltips.controls){const{classNames:s,selectors:r}=this.config,a=`${r.controls.wrapper} ${r.labels} .${s.hidden}`,o=Fo.call(this,a);Array.from(o).forEach(l=>{Ct(l,this.config.classNames.hidden,!1),Ct(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var t,e;if(!this.duration||this.elements.markers)return;const n=(t=this.config.markers)===null||t===void 0||(e=t.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(n==null||!n.length)return;const i=document.createDocumentFragment(),s=document.createDocumentFragment();let r=null;const a=`${this.config.classNames.tooltip}--visible`,o=l=>Ct(r,a,l);n.forEach(l=>{const c=st("span",{class:this.config.classNames.marker},""),u=l.time/this.duration*100+"%";r&&(c.addEventListener("mouseenter",()=>{l.label||(r.style.left=u,r.innerHTML=l.label,o(!0))}),c.addEventListener("mouseleave",()=>{o(!1)})),c.addEventListener("click",()=>{this.currentTime=l.time}),c.style.left=u,s.appendChild(c)}),i.appendChild(s),this.config.tooltips.seek||(r=st("span",{class:this.config.classNames.tooltip},""),i.appendChild(r)),this.elements.markers={points:s,tip:r},this.elements.progress.appendChild(i)}};function C0(t,e=!0){let n=t;if(e){const i=document.createElement("a");i.href=n,n=i.href}try{return new URL(n)}catch{return null}}function P0(t){const e=new URLSearchParams;return re.object(t)&&Object.entries(t).forEach(([n,i])=>{e.set(n,i)}),e}const St={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!jt.textTracks)return void(re.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Xe.setCaptionsMenu.call(this));if(re.element(this.elements.captions)||(this.elements.captions=st("div",Oi(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),iM(this.elements.captions,this.elements.wrapper)),fn.isIE&&window.URL){const i=this.media.querySelectorAll("track");Array.from(i).forEach(s=>{const r=s.getAttribute("src"),a=C0(r);a!==null&&a.hostname!==window.location.href.hostname&&["http:","https:"].includes(a.protocol)&&al(r,"blob").then(o=>{s.setAttribute("src",window.URL.createObjectURL(o))}).catch(()=>{as(s)})})}const t=Jd((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(i=>i.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=t);let n=this.storage.get("captions");if(re.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:e,languages:t}),this.isHTML5){const i=this.config.captions.update?"addtrack removetrack":"removetrack";bt.call(this,this.media.textTracks,i,St.update.bind(this))}setTimeout(St.update.bind(this),0)},update(){const t=St.getTracks.call(this,!0),{active:e,language:n,meta:i,currentTrackNode:s}=this.captions,r=!!t.find(a=>a.language===n);this.isHTML5&&this.isVideo&&t.filter(a=>!i.get(a)).forEach(a=>{this.debug.log("Track added",a),i.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),bt.call(this,a,"cuechange",()=>St.updateCues.call(this))}),(r&&this.language!==n||!t.includes(s))&&(St.setLanguage.call(this,n),St.toggle.call(this,e&&r)),this.elements&&Ct(this.elements.container,this.config.classNames.captions.enabled,!re.empty(t)),re.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Xe.setCaptionsMenu.call(this)},toggle(t,e=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,i=this.config.classNames.captions.active,s=re.nullOrUndefined(t)?!n:t;if(s!==n){if(e||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!e){const r=St.getTracks.call(this),a=St.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void St.set.call(this,r.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),Ct(this.elements.container,i,s),this.captions.toggled=s,Xe.updateSetting.call(this,"captions"),at.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout(()=>{s&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(t,e=!0){const n=St.getTracks.call(this);if(t!==-1)if(re.number(t))if(t in n){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;const i=n[t],{language:s}=i||{};this.captions.currentTrackNode=i,Xe.updateSetting.call(this,"captions"),e||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),at.call(this,this.media,"languagechange")}St.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&St.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else St.toggle.call(this,!1,e)},setLanguage(t,e=!0){if(!re.string(t))return void this.debug.warn("Invalid language argument",t);const n=t.toLowerCase();this.captions.language=n;const i=St.getTracks.call(this),s=St.findTrack.call(this,[n]);St.set.call(this,i.indexOf(s),e)},getTracks(t=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||t||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(t,e=!1){const n=St.getTracks.call(this),i=a=>Number((this.captions.meta.get(a)||{}).default),s=Array.from(n).sort((a,o)=>i(o)-i(a));let r;return t.every(a=>(r=s.find(o=>o.language===a),!r)),r||(e?s[0]:void 0)},getCurrentTrack(){return St.getTracks.call(this)[this.currentTrack]},getLabel(t){let e=t;return!re.track(e)&&jt.textTracks&&this.captions.toggled&&(e=St.getCurrentTrack.call(this)),re.track(e)?re.empty(e.label)?re.empty(e.language)?un.get("enabled",this.config):t.language.toUpperCase():e.label:un.get("disabled",this.config)},updateCues(t){if(!this.supported.ui)return;if(!re.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!re.nullOrUndefined(t)&&!Array.isArray(t))return void this.debug.warn("updateCues: Invalid input",t);let e=t;if(!e){const i=St.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map(s=>s.getCueAsHTML()).map(pM)}const n=e.map(i=>i.trim()).join(`
`);if(n!==this.elements.captions.innerHTML){gc(this.elements.captions);const i=st("span",Oi(this.config.selectors.caption));i.innerHTML=n,this.elements.captions.appendChild(i),at.call(this,this.media,"cuechange")}}},L0={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Ju={active:"picture-in-picture",inactive:"inline"},ks={html5:"html5",youtube:"youtube",vimeo:"vimeo"},ed={audio:"audio",video:"video"};function vM(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?ks.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?ks.vimeo:null}const td=()=>{};class yM{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):td}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):td}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):td}}class Ei{constructor(e){Ke(this,"onChange",()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;re.element(n)&&(n.pressed=this.active);const i=this.target===this.player.media?this.target:this.player.elements.container;at.call(this.player,i,this.active?"enterfullscreen":"exitfullscreen",!0)}),Ke(this,"toggleFallback",(n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",Ct(this.target,this.player.config.classNames.fullscreen.fallback,n),fn.isIos){let i=document.head.querySelector('meta[name="viewport"]');const s="viewport-fit=cover";i||(i=document.createElement("meta"),i.setAttribute("name","viewport"));const r=re.string(i.content)&&i.content.includes(s);n?(this.cleanupViewport=!r,r||(i.content+=`,${s}`)):this.cleanupViewport&&(i.content=i.content.split(",").filter(a=>a.trim()!==s).join(","))}this.onChange()}),Ke(this,"trapFocus",n=>{if(fn.isIos||fn.isIPadOS||!this.active||n.key!=="Tab")return;const i=document.activeElement,s=Fo.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[r]=s,a=s[s.length-1];i!==a||n.shiftKey?i===r&&n.shiftKey&&(a.focus(),n.preventDefault()):(r.focus(),n.preventDefault())}),Ke(this,"update",()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":Ei.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");Ct(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Ke(this,"enter",()=>{this.supported&&(fn.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Ei.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?re.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Ke(this,"exit",()=>{if(this.supported)if(fn.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Fi(this.player.play());else if(!Ei.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!re.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Ke(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=Ei.prefix,this.property=Ei.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&sM(this.player.elements.container,e.config.fullscreen.container),bt.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),bt.call(this.player,this.player.elements.container,"dblclick",n=>{re.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")}),bt.call(this,this.player.elements.container,"keydown",n=>this.trapFocus(n)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Ei.nativeSupported&&!this.forceFallback}static get prefix(){if(re.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(n=>!(!re.function(document[`${n}ExitFullscreen`])&&!re.function(document[`${n}CancelFullScreen`]))&&(e=n,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Ei.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Ei.nativeSupported||!fn.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Ei.nativeSupported||this.forceFallback)return Fc(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return fn.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function vc(t,e=1){return new Promise((n,i)=>{const s=new Image,r=()=>{delete s.onload,delete s.onerror,(s.naturalWidth>=e?n:i)(s)};Object.assign(s,{onload:r,onerror:r,src:t})})}const Dt={addStyleHook(){Ct(this.elements.container,this.config.selectors.container.replace(".",""),!0),Ct(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(t=!1){t&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Dt.toggleNativeControls.call(this,!0);re.element(this.elements.controls)||(Xe.inject.call(this),this.listeners.controls()),Dt.toggleNativeControls.call(this),this.isHTML5&&St.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Xe.updateVolume.call(this),Xe.timeUpdate.call(this),Xe.durationUpdate.call(this),Dt.checkPlaying.call(this),Ct(this.elements.container,this.config.classNames.pip.supported,jt.pip&&this.isHTML5&&this.isVideo),Ct(this.elements.container,this.config.classNames.airplay.supported,jt.airplay&&this.isHTML5),Ct(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{at.call(this,this.media,"ready")},0),Dt.setTitle.call(this),this.poster&&Dt.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&Xe.durationUpdate.call(this),this.config.mediaMetadata&&Xe.setMediaMetadata.call(this)},setTitle(){let t=un.get("play",this.config);if(re.string(this.config.title)&&!re.empty(this.config.title)&&(t+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",t)}),this.isEmbed){const e=Jt.call(this,"iframe");if(!re.element(e))return;const n=re.empty(this.config.title)?"video":this.config.title,i=un.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",n))}},togglePoster(t){Ct(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster(t,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),oM.call(this).then(()=>vc(t)).catch(n=>{throw t===this.poster&&Dt.togglePoster.call(this,!1),n}).then(()=>{if(t!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${t}')`,backgroundSize:""}),Dt.togglePoster.call(this,!0),t)))},checkPlaying(t){Ct(this.elements.container,this.config.classNames.playing,this.playing),Ct(this.elements.container,this.config.classNames.paused,this.paused),Ct(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",un.get(this.playing?"pause":"play",this.config))}),re.event(t)&&t.type==="timeupdate"||Dt.toggleControls.call(this)},checkLoading(t){this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Ct(this.elements.container,this.config.classNames.loading,this.loading),Dt.toggleControls.call(this)},this.loading?250:0)},toggleControls(t){const{controls:e}=this.elements;if(e&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(t||this.loading||this.paused||e.pressed||e.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter(t=>!re.empty(t)&&re.string(t)&&t.startsWith("--plyr")).forEach(t=>{this.elements.container.style.setProperty(t,this.media.style.getPropertyValue(t)),this.media.style.removeProperty(t)}),re.empty(this.media.style)&&this.media.removeAttribute("style")}};class _M{constructor(e){Ke(this,"firstTouch",()=>{const{player:n}=this,{elements:i}=n;n.touch=!0,Ct(i.container,n.config.classNames.isTouch,!0)}),Ke(this,"global",(n=!0)=>{const{player:i}=this;i.config.keyboard.global&&Uo.call(i,window,"keydown keyup",this.handleKey,n,!1),Uo.call(i,document.body,"click",this.toggleMenu,n),Of.call(i,document.body,"touchstart",this.firstTouch)}),Ke(this,"container",()=>{const{player:n}=this,{config:i,elements:s,timers:r}=n;!i.keyboard.global&&i.keyboard.focused&&bt.call(n,s.container,"keydown keyup",this.handleKey,!1),bt.call(n,s.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:c}=s;c&&l.type==="enterfullscreen"&&(c.pressed=!1,c.hover=!1);let u=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Dt.toggleControls.call(n,!0),u=n.touch?3e3:2e3),clearTimeout(r.controls),r.controls=setTimeout(()=>Dt.toggleControls.call(n,!1),u)});const a=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const l=s.wrapper,{active:c}=n.fullscreen,[u,d]=kf.call(n),h=w0(`aspect-ratio: ${u} / ${d}`);if(!c)return void(h?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[p,f]=lM(),m=p/f>u/d;h?(l.style.width=m?"auto":"100%",l.style.height=m?"100%":"auto"):(l.style.maxWidth=m?f/d*u+"px":null,l.style.margin=m?"0 auto":null)},o=()=>{clearTimeout(r.resized),r.resized=setTimeout(a,50)};bt.call(n,s.container,"enterfullscreen exitfullscreen",l=>{const{target:c}=n.fullscreen;c===s.container&&(!n.isEmbed&&re.empty(n.config.ratio)||(a(),(l.type==="enterfullscreen"?bt:uu).call(n,window,"resize",o)))})}),Ke(this,"media",()=>{const{player:n}=this,{elements:i}=n;if(bt.call(n,n.media,"timeupdate seeking seeked",r=>Xe.timeUpdate.call(n,r)),bt.call(n,n.media,"durationchange loadeddata loadedmetadata",r=>Xe.durationUpdate.call(n,r)),bt.call(n,n.media,"ended",()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())}),bt.call(n,n.media,"progress playing seeking seeked",r=>Xe.updateProgress.call(n,r)),bt.call(n,n.media,"volumechange",r=>Xe.updateVolume.call(n,r)),bt.call(n,n.media,"playing play pause ended emptied timeupdate",r=>Dt.checkPlaying.call(n,r)),bt.call(n,n.media,"waiting canplay seeked playing",r=>Dt.checkLoading.call(n,r)),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const r=Jt.call(n,`.${n.config.classNames.video}`);if(!re.element(r))return;bt.call(n,i.container,"click",a=>{([i.container,r].includes(a.target)||r.contains(a.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(a,n.restart,"restart"),this.proxy(a,()=>{Fi(n.play())},"play")):this.proxy(a,()=>{Fi(n.togglePlay())},"play")))})}n.supported.ui&&n.config.disableContextMenu&&bt.call(n,i.wrapper,"contextmenu",r=>{r.preventDefault()},!1),bt.call(n,n.media,"volumechange",()=>{n.storage.set({volume:n.volume,muted:n.muted})}),bt.call(n,n.media,"ratechange",()=>{Xe.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),bt.call(n,n.media,"qualitychange",r=>{Xe.updateSetting.call(n,"quality",null,r.detail.quality)}),bt.call(n,n.media,"ready qualitychange",()=>{Xe.setDownloadUrl.call(n)});const s=n.config.events.concat(["keyup","keydown"]).join(" ");bt.call(n,n.media,s,r=>{let{detail:a={}}=r;r.type==="error"&&(a=n.media.error),at.call(n,i.container,r.type,!0,a)})}),Ke(this,"proxy",(n,i,s)=>{const{player:r}=this,a=r.config.listeners[s];let o=!0;re.function(a)&&(o=a.call(r,n)),o!==!1&&re.function(i)&&i.call(r,n)}),Ke(this,"bind",(n,i,s,r,a=!0)=>{const{player:o}=this,l=o.config.listeners[r],c=re.function(l);bt.call(o,n,i,u=>this.proxy(u,s,r),a&&!c)}),Ke(this,"controls",()=>{const{player:n}=this,{elements:i}=n,s=fn.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(r=>{this.bind(r,"click",()=>{Fi(n.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",n.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{n.lastSeekTime=Date.now(),n.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{n.lastSeekTime=Date.now(),n.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{n.muted=!n.muted},"mute"),this.bind(i.buttons.captions,"click",()=>n.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{at.call(n,n.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{n.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{n.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",n.airplay,"airplay"),this.bind(i.buttons.settings,"click",r=>{r.stopPropagation(),r.preventDefault(),Xe.toggleMenu.call(n,r)},null,!1),this.bind(i.buttons.settings,"keyup",r=>{[" ","Enter"].includes(r.key)&&(r.key!=="Enter"?(r.preventDefault(),r.stopPropagation(),Xe.toggleMenu.call(n,r)):Xe.focusFirstMenuItem.call(n,null,!0))},null,!1),this.bind(i.settings.menu,"keydown",r=>{r.key==="Escape"&&Xe.toggleMenu.call(n,r)}),this.bind(i.inputs.seek,"mousedown mousemove",r=>{const a=i.progress.getBoundingClientRect(),o=100/a.width*(r.pageX-a.left);r.currentTarget.setAttribute("seek-value",o)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",r=>{const a=r.currentTarget,o="play-on-seeked";if(re.keyboardEvent(r)&&!["ArrowLeft","ArrowRight"].includes(r.key))return;n.lastSeekTime=Date.now();const l=a.hasAttribute(o),c=["mouseup","touchend","keyup"].includes(r.type);l&&c?(a.removeAttribute(o),Fi(n.play())):!c&&n.playing&&(a.setAttribute(o,""),n.pause())}),fn.isIos){const r=Fo.call(n,'input[type="range"]');Array.from(r).forEach(a=>this.bind(a,s,o=>y0(o.target)))}this.bind(i.inputs.seek,s,r=>{const a=r.currentTarget;let o=a.getAttribute("seek-value");re.empty(o)&&(o=a.value),a.removeAttribute("seek-value"),n.currentTime=o/a.max*n.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",r=>Xe.updateSeekTooltip.call(n,r)),this.bind(i.progress,"mousemove touchmove",r=>{const{previewThumbnails:a}=n;a&&a.loaded&&a.startMove(r)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:r}=n;r&&r.loaded&&r.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",r=>{const{previewThumbnails:a}=n;a&&a.loaded&&a.startScrubbing(r)}),this.bind(i.progress,"mouseup touchend",r=>{const{previewThumbnails:a}=n;a&&a.loaded&&a.endScrubbing(r)}),fn.isWebKit&&Array.from(Fo.call(n,'input[type="range"]')).forEach(r=>{this.bind(r,"input",a=>Xe.updateRangeFill.call(n,a.target))}),n.config.toggleInvert&&!re.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,Xe.timeUpdate.call(n))}),this.bind(i.inputs.volume,s,r=>{n.volume=r.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",r=>{i.controls.hover=!n.touch&&r.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(r=>!r.contains(i.container)).forEach(r=>{this.bind(r,"mouseenter mouseleave",a=>{i.controls&&(i.controls.hover=!n.touch&&a.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",r=>{i.controls.pressed=["mousedown","touchstart"].includes(r.type)}),this.bind(i.controls,"focusin",()=>{const{config:r,timers:a}=n;Ct(i.controls,r.classNames.noTransition,!0),Dt.toggleControls.call(n,!0),setTimeout(()=>{Ct(i.controls,r.classNames.noTransition,!1)},0);const o=this.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(()=>Dt.toggleControls.call(n,!1),o)}),this.bind(i.inputs.volume,"wheel",r=>{const a=r.webkitDirectionInvertedFromDevice,[o,l]=[r.deltaX,-r.deltaY].map(d=>a?-d:d),c=Math.sign(Math.abs(o)>Math.abs(l)?o:l);n.increaseVolume(c/50);const{volume:u}=n.media;(c===1&&u<1||c===-1&&u>0)&&r.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:n}=this,{elements:i}=n,{key:s,type:r,altKey:a,ctrlKey:o,metaKey:l,shiftKey:c}=e,u=r==="keydown",d=u&&s===this.lastKey;if(!(a||o||l||c)&&s){if(u){const p=document.activeElement;if(re.element(p)){const{editable:f}=n.config.selectors,{seek:m}=i.inputs;if(p!==m&&wr(p,f)||e.key===" "&&wr(p,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(h=parseInt(s,10),n.currentTime=n.duration/10*h);break;case" ":case"k":d||Fi(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":d||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":d||n.toggleCaptions();break;case"l":n.loop=!n.loop}s==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null;var h}}toggleMenu(e){Xe.toggleMenu.call(this.player,e)}}function bM(t,e){return t(e={exports:{}},e.exports),e.exports}var EM=bM(function(t,e){t.exports=function(){var n=function(){},i={},s={},r={};function a(h,p){h=h.push?h:[h];var f,m,v,g=[],_=h.length,b=_;for(f=function(y,T){T.length&&g.push(y),--b||p(g)};_--;)m=h[_],(v=s[m])?f(m,v):(r[m]=r[m]||[]).push(f)}function o(h,p){if(h){var f=r[h];if(s[h]=p,f)for(;f.length;)f[0](h,p),f.splice(0,1)}}function l(h,p){h.call&&(h={success:h}),p.length?(h.error||n)(p):(h.success||n)(h)}function c(h,p,f,m){var v,g,_=document,b=f.async,y=(f.numRetries||0)+1,T=f.before||n,x=h.replace(/[\?|#].*$/,""),S=h.replace(/^(css|img)!/,"");m=m||0,/(^css!|\.css$)/.test(x)?((g=_.createElement("link")).rel="stylesheet",g.href=S,(v="hideFocus"in g)&&g.relList&&(v=0,g.rel="preload",g.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(x)?(g=_.createElement("img")).src=S:((g=_.createElement("script")).src=h,g.async=b===void 0||b),g.onload=g.onerror=g.onbeforeload=function(M){var w=M.type[0];if(v)try{g.sheet.cssText.length||(w="e")}catch(E){E.code!=18&&(w="e")}if(w=="e"){if((m+=1)<y)return c(h,p,f,m)}else if(g.rel=="preload"&&g.as=="style")return g.rel="stylesheet";p(h,w,M.defaultPrevented)},T(h,g)!==!1&&_.head.appendChild(g)}function u(h,p,f){var m,v,g=(h=h.push?h:[h]).length,_=g,b=[];for(m=function(y,T,x){if(T=="e"&&b.push(y),T=="b"){if(!x)return;b.push(y)}--g||p(b)},v=0;v<_;v++)c(h[v],m,f)}function d(h,p,f){var m,v;if(p&&p.trim&&(m=p),v=(m?f:p)||{},m){if(m in i)throw"LoadJS";i[m]=!0}function g(_,b){u(h,function(y){l(v,y),_&&l({success:_,error:b},y),o(m,y)},v)}if(v.returnPromise)return new Promise(g);g()}return d.ready=function(h,p){return a(h,function(f){l(p,f)}),d},d.done=function(h){o(h,[])},d.reset=function(){i={},s={},r={}},d.isDefined=function(h){return h in i},d}()});function Nf(t){return new Promise((e,n)=>{EM(t,{success:e,error:n})})}function wM(t){return re.empty(t)?null:re.number(Number(t))?t:t.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:t}function xM(t){const e=t.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function io(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,at.call(this,this.media,t?"play":"pause"))}const th={setup(){const t=this;Ct(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,Aa.call(t),re.object(window.Vimeo)?th.ready.call(t):Nf(t.config.urls.vimeo.sdk).then(()=>{th.ready.call(t)}).catch(e=>{t.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const t=this,e=t.config.vimeo,{premium:n,referrerPolicy:i,...s}=e;let r=t.media.getAttribute("src"),a="";re.empty(r)?(r=t.media.getAttribute(t.config.attributes.embed.id),a=t.media.getAttribute(t.config.attributes.embed.hash)):a=xM(r);const o=a?{h:a}:{};n&&Object.assign(s,{controls:!1,sidedock:!1});const l=P0({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:t.config.playsinline,...o,...s}),c=wM(r),u=st("iframe"),d=eh(t.config.urls.vimeo.iframe,c,l);if(u.setAttribute("src",d),u.setAttribute("allowfullscreen",""),u.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),re.empty(i)||u.setAttribute("referrerPolicy",i),n||!e.customControls)u.setAttribute("data-poster",t.poster),t.media=Nc(u,t.media);else{const _=st("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});_.appendChild(u),t.media=Nc(_,t.media)}e.customControls||al(eh(t.config.urls.vimeo.api,d)).then(_=>{!re.empty(_)&&_.thumbnail_url&&Dt.setPoster.call(t,_.thumbnail_url).catch(()=>{})}),t.embed=new window.Vimeo.Player(u,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=()=>(io.call(t,!0),t.embed.play()),t.media.pause=()=>(io.call(t,!1),t.embed.pause()),t.media.stop=()=>{t.pause(),t.currentTime=0};let{currentTime:h}=t.media;Object.defineProperty(t.media,"currentTime",{get:()=>h,set(_){const{embed:b,media:y,paused:T,volume:x}=t,S=T&&!b.hasPlayed;y.seeking=!0,at.call(t,y,"seeking"),Promise.resolve(S&&b.setVolume(0)).then(()=>b.setCurrentTime(_)).then(()=>S&&b.pause()).then(()=>S&&b.setVolume(x)).catch(()=>{})}});let p=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:()=>p,set(_){t.embed.setPlaybackRate(_).then(()=>{p=_,at.call(t,t.media,"ratechange")}).catch(()=>{t.options.speed=[1]})}});let{volume:f}=t.config;Object.defineProperty(t.media,"volume",{get:()=>f,set(_){t.embed.setVolume(_).then(()=>{f=_,at.call(t,t.media,"volumechange")})}});let{muted:m}=t.config;Object.defineProperty(t.media,"muted",{get:()=>m,set(_){const b=!!re.boolean(_)&&_;t.embed.setMuted(!!b||t.config.muted).then(()=>{m=b,at.call(t,t.media,"volumechange")})}});let v,{loop:g}=t.config;Object.defineProperty(t.media,"loop",{get:()=>g,set(_){const b=re.boolean(_)?_:t.config.loop.active;t.embed.setLoop(b).then(()=>{g=b})}}),t.embed.getVideoUrl().then(_=>{v=_,Xe.setDownloadUrl.call(t)}).catch(_=>{this.debug.warn(_)}),Object.defineProperty(t.media,"currentSrc",{get:()=>v}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then(_=>{const[b,y]=_;t.embed.ratio=S0(b,y),Aa.call(this)}),t.embed.setAutopause(t.config.autopause).then(_=>{t.config.autopause=_}),t.embed.getVideoTitle().then(_=>{t.config.title=_,Dt.setTitle.call(this)}),t.embed.getCurrentTime().then(_=>{h=_,at.call(t,t.media,"timeupdate")}),t.embed.getDuration().then(_=>{t.media.duration=_,at.call(t,t.media,"durationchange")}),t.embed.getTextTracks().then(_=>{t.media.textTracks=_,St.setup.call(t)}),t.embed.on("cuechange",({cues:_=[]})=>{const b=_.map(y=>fM(y.text));St.updateCues.call(t,b)}),t.embed.on("loaded",()=>{t.embed.getPaused().then(_=>{io.call(t,!_),_||at.call(t,t.media,"playing")}),re.element(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)}),t.embed.on("bufferstart",()=>{at.call(t,t.media,"waiting")}),t.embed.on("bufferend",()=>{at.call(t,t.media,"playing")}),t.embed.on("play",()=>{io.call(t,!0),at.call(t,t.media,"playing")}),t.embed.on("pause",()=>{io.call(t,!1)}),t.embed.on("timeupdate",_=>{t.media.seeking=!1,h=_.seconds,at.call(t,t.media,"timeupdate")}),t.embed.on("progress",_=>{t.media.buffered=_.percent,at.call(t,t.media,"progress"),parseInt(_.percent,10)===1&&at.call(t,t.media,"canplaythrough"),t.embed.getDuration().then(b=>{b!==t.media.duration&&(t.media.duration=b,at.call(t,t.media,"durationchange"))})}),t.embed.on("seeked",()=>{t.media.seeking=!1,at.call(t,t.media,"seeked")}),t.embed.on("ended",()=>{t.media.paused=!0,at.call(t,t.media,"ended")}),t.embed.on("error",_=>{t.media.error=_,at.call(t,t.media,"error")}),e.customControls&&setTimeout(()=>Dt.build.call(t),0)}};function SM(t){return re.empty(t)?null:t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:t}function so(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,at.call(this,this.media,t?"play":"pause"))}function TM(t){return t.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const yc={setup(){if(Ct(this.elements.wrapper,this.config.classNames.embed,!0),re.object(window.YT)&&re.function(window.YT.Player))yc.ready.call(this);else{const t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{re.function(t)&&t(),yc.ready.call(this)},Nf(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(t){al(eh(this.config.urls.youtube.api,t)).then(e=>{if(re.object(e)){const{title:n,height:i,width:s}=e;this.config.title=n,Dt.setTitle.call(this),this.embed.ratio=S0(s,i)}Aa.call(this)}).catch(()=>{Aa.call(this)})},ready(){const t=this,e=t.config.youtube,n=t.media&&t.media.getAttribute("id");if(!re.empty(n)&&n.startsWith("youtube-"))return;let i=t.media.getAttribute("src");re.empty(i)&&(i=t.media.getAttribute(this.config.attributes.embed.id));const s=SM(i),r=st("div",{id:cM(t.provider),"data-poster":e.customControls?t.poster:void 0});if(t.media=Nc(r,t.media),e.customControls){const a=o=>`https://i.ytimg.com/vi/${s}/${o}default.jpg`;vc(a("maxres"),121).catch(()=>vc(a("sd"),121)).catch(()=>vc(a("hq"))).then(o=>Dt.setPoster.call(t,o.src)).then(o=>{o.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}t.embed=new window.YT.Player(t.media,{videoId:s,host:TM(e),playerVars:Wt({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.playsinline&&!t.config.fullscreen.iosNative?1:0,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(a){if(!t.media.error){const o=a.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[o]||"An unknown error occurred";t.media.error={code:o,message:l},at.call(t,t.media,"error")}},onPlaybackRateChange(a){const o=a.target;t.media.playbackRate=o.getPlaybackRate(),at.call(t,t.media,"ratechange")},onReady(a){if(re.function(t.media.play))return;const o=a.target;yc.getTitle.call(t,s),t.media.play=()=>{so.call(t,!0),o.playVideo()},t.media.pause=()=>{so.call(t,!1),o.pauseVideo()},t.media.stop=()=>{o.stopVideo()},t.media.duration=o.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:()=>Number(o.getCurrentTime()),set(d){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,at.call(t,t.media,"seeking"),o.seekTo(d)}}),Object.defineProperty(t.media,"playbackRate",{get:()=>o.getPlaybackRate(),set(d){o.setPlaybackRate(d)}});let{volume:l}=t.config;Object.defineProperty(t.media,"volume",{get:()=>l,set(d){l=d,o.setVolume(100*l),at.call(t,t.media,"volumechange")}});let{muted:c}=t.config;Object.defineProperty(t.media,"muted",{get:()=>c,set(d){const h=re.boolean(d)?d:c;c=h,o[h?"mute":"unMute"](),o.setVolume(100*l),at.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:()=>o.getVideoUrl()}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration});const u=o.getAvailablePlaybackRates();t.options.speed=u.filter(d=>t.config.speed.options.includes(d)),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),at.call(t,t.media,"timeupdate"),at.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval(()=>{t.media.buffered=o.getVideoLoadedFraction(),(t.media.lastBuffered===null||t.media.lastBuffered<t.media.buffered)&&at.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,t.media.buffered===1&&(clearInterval(t.timers.buffering),at.call(t,t.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>Dt.build.call(t),50)},onStateChange(a){const o=a.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(a.data)&&(t.media.seeking=!1,at.call(t,t.media,"seeked")),a.data){case-1:at.call(t,t.media,"timeupdate"),t.media.buffered=o.getVideoLoadedFraction(),at.call(t,t.media,"progress");break;case 0:so.call(t,!1),t.media.loop?(o.stopVideo(),o.playVideo()):at.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(so.call(t,!0),at.call(t,t.media,"playing"),t.timers.playing=setInterval(()=>{at.call(t,t.media,"timeupdate")},50),t.media.duration!==o.getDuration()&&(t.media.duration=o.getDuration(),at.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),so.call(t,!1);break;case 3:at.call(t,t.media,"waiting")}at.call(t,t.elements.container,"statechange",!1,{code:a.data})}}})}},R0={setup(){this.media?(Ct(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Ct(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Ct(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=st("div",{class:this.config.classNames.video}),b0(this.media,this.elements.wrapper),this.elements.poster=st("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Us.setup.call(this):this.isYouTube?yc.setup.call(this):this.isVimeo&&th.setup.call(this)):this.debug.warn("No media element found!")}};class MM{constructor(e){Ke(this,"load",()=>{this.enabled&&(re.object(window.google)&&re.object(window.google.ima)?this.ready():Nf(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Ke(this,"ready",()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Ke(this,"setupIMA",()=>{this.elements.container=st("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n=>this.onAdsManagerLoaded(n),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n=>this.onAdError(n),!1),this.requestAds()}),Ke(this,"requestAds",()=>{const{container:n}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=n.offsetWidth,i.linearAdSlotHeight=n.offsetHeight,i.nonLinearAdSlotWidth=n.offsetWidth,i.nonLinearAdSlotHeight=n.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),Ke(this,"pollCountdown",(n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const i=du(Math.max(this.manager.getRemainingTime(),0)),s=`${un.get("advertisement",this.player.config)} - ${i}`;this.elements.container.setAttribute("data-badge-text",s)},100)}),Ke(this,"onAdsManagerLoaded",n=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=n.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s)),Object.keys(google.ima.AdEvent.Type).forEach(s=>{this.manager.addEventListener(google.ima.AdEvent.Type[s],r=>this.onAdEvent(r))}),this.trigger("loaded")}),Ke(this,"addCuePoints",()=>{re.empty(this.cuePoints)||this.cuePoints.forEach(n=>{if(n!==0&&n!==-1&&n<this.player.duration){const i=this.player.elements.progress;if(re.element(i)){const s=100/this.player.duration*n,r=st("span",{class:this.player.config.classNames.cues});r.style.left=`${s.toString()}%`,i.appendChild(r)}}})}),Ke(this,"onAdEvent",n=>{const{container:i}=this.player.elements,s=n.getAd(),r=n.getAdData();switch((a=>{at.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),s.isLinear()||(s.width=i.offsetWidth,s.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn(`Non-fatal ad error: ${r.adError.getMessage()}`)}}),Ke(this,"onAdError",n=>{this.cancel(),this.player.debug.warn("Ads error",n)}),Ke(this,"listeners",()=>{const{container:n}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const s=this.player.currentTime;re.empty(this.cuePoints)||this.cuePoints.forEach((r,a)=>{i<r&&r<s&&(this.manager.discardAdBreak(),this.cuePoints.splice(a,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)})}),Ke(this,"play",()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),Ke(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Fi(this.player.media.play())}),Ke(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Ke(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Ke(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(n=>{this.on("loaded",n),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Ke(this,"trigger",(n,...i)=>{const s=this.events[n];re.array(s)&&s.forEach(r=>{re.function(r)&&r.apply(this,i)})}),Ke(this,"on",(n,i)=>(re.array(this.events[n])||(this.events[n]=[]),this.events[n].push(i),this)),Ke(this,"startSafetyTimer",(n,i)=>{this.player.debug.log(`Safety timer invoked from: ${i}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},n)}),Ke(this,"clearSafetyTimer",n=>{re.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((n,i)=>{this.on("loaded",n),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!re.empty(e.publisherId)||re.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return re.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${P0({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function I0(t=0,e=0,n=255){return Math.min(Math.max(t,e),n)}const AM=t=>{const e=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach(n=>{const i={};n.split(/\r\n|\n|\r/).forEach(s=>{if(re.number(i.startTime)){if(!re.empty(s.trim())&&re.empty(i.text)){const r=s.trim().split("#xywh=");[i.text]=r,r[1]&&([i.x,i.y,i.w,i.h]=r[1].split(","))}}else{const r=s.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);r&&(i.startTime=60*Number(r[1]||0)*60+60*Number(r[2])+Number(r[3])+ +`0.${r[4]}`,i.endTime=60*Number(r[6]||0)*60+60*Number(r[7])+Number(r[8])+ +`0.${r[9]}`)}}),i.text&&e.push(i)}),e},Pm=(t,e)=>{const n={};return t>e.width/e.height?(n.width=e.width,n.height=1/t*e.width):(n.height=e.height,n.width=t*e.height),n};class nh{constructor(e){Ke(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Ke(this,"getThumbnails",()=>new Promise(n=>{const{src:i}=this.player.config.previewThumbnails;if(re.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const s=()=>{this.thumbnails.sort((r,a)=>r.height-a.height),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(re.function(i))i(r=>{this.thumbnails=r,s()});else{const r=(re.string(i)?[i]:i).map(a=>this.getThumbnail(a));Promise.all(r).then(s)}})),Ke(this,"getThumbnail",n=>new Promise(i=>{al(n).then(s=>{const r={frames:AM(s),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const a=new Image;a.onload=()=>{r.height=a.naturalHeight,r.width=a.naturalWidth,this.thumbnails.push(r),i()},a.src=r.urlPrefix+r.frames[0].text})})),Ke(this,"startMove",n=>{if(this.loaded&&re.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,s;const r=this.player.elements.progress.getBoundingClientRect(),a=100/r.width*(n.pageX-r.left);this.seekTime=this.player.media.duration*(a/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=du(this.seekTime);const o=(i=this.player.config.markers)===null||i===void 0||(s=i.points)===null||s===void 0?void 0:s.find(({time:l})=>l===Math.round(this.seekTime));o&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${o.label}<br>`)}this.showImageAtCurrentTime()}}),Ke(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Ke(this,"startScrubbing",n=>{(re.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Ke(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Of.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Ke(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Ke(this,"render",()=>{this.elements.thumb.container=st("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=st("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=st("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=st("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),re.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=st("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Ke(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Ke(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex(r=>this.seekTime>=r.startTime&&this.seekTime<=r.endTime),i=n>=0;let s=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((r,a)=>{this.loadedImages.includes(r.frames[n].text)&&(s=a)}),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(s)))}),Ke(this,"loadImage",(n=0)=>{const i=this.showingThumb,s=this.thumbnails[n],{urlPrefix:r}=s,a=s.frames[i],o=s.frames[i].text,l=r+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,a,n,i,o,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const c=new Image;c.src=l,c.dataset.index=i,c.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log(`Loading image: ${l}`),c.onload=()=>this.showImage(c,a,n,i,o,!0),this.loadingImage=c,this.removeOldImages(c)}}),Ke(this,"showImage",(n,i,s,r,a,o=!0)=>{this.player.debug.log(`Showing thumb: ${a}. num: ${r}. qual: ${s}. newimg: ${o}`),this.setImageSizeAndOffset(n,i),o&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(r,!0).then(this.preloadNearby(r,!1)).then(this.getHigherQuality(s,n,i,a))}),Ke(this,"removeOldImages",n=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const s=this.usingSprites?500:1e3;if(i.dataset.index!==n.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:r}=this;setTimeout(()=>{r.removeChild(i),this.player.debug.log(`Removing thumb: ${i.dataset.filename}`)},s)}})}),Ke(this,"preloadNearby",(n,i=!0)=>new Promise(s=>{setTimeout(()=>{const r=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===r){let a;a=i?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let o=!1;a.forEach(l=>{const c=l.text;if(c!==r&&!this.loadedImages.includes(c)){o=!0,this.player.debug.log(`Preloading thumb filename: ${c}`);const{urlPrefix:u}=this.thumbnails[0],d=u+c,h=new Image;h.src=d,h.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${c}`),this.loadedImages.includes(c)||this.loadedImages.push(c),s()}}}),o||s()}},300)})),Ke(this,"getHigherQuality",(n,i,s,r)=>{if(n<this.thumbnails.length-1){let a=i.naturalHeight;this.usingSprites&&(a=s.h),a<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===r&&(this.player.debug.log(`Showing higher quality thumb for: ${r}`),this.loadImage(n+1))},300)}}),Ke(this,"toggleThumbContainer",(n=!1,i=!1)=>{const s=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(s,n),!n&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),Ke(this,"toggleScrubbingContainer",(n=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,n),n||(this.showingThumb=null,this.showingThumbFilename=null)}),Ke(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Ke(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const i=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${i}px`}else if(n.clientHeight<20&&n.clientWidth>20){const i=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${i}px`}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${i}px`}this.setThumbContainerPos()}),Ke(this,"setThumbContainerPos",()=>{const n=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:s}=this.elements.thumb,r=i.left-n.left+10,a=i.right-n.left-s.clientWidth-10,o=this.mousePosX-n.left-s.clientWidth/2,l=I0(o,r,a);s.style.left=`${l}px`,s.style.setProperty("--preview-arrow-offset",o-l+"px")}),Ke(this,"setScrubbingContainerSize",()=>{const{width:n,height:i}=Pm(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${i}px`}),Ke(this,"setImageSizeAndOffset",(n,i)=>{if(!this.usingSprites)return;const s=this.thumbContainerHeight/i.h;n.style.height=n.naturalHeight*s+"px",n.style.width=n.naturalWidth*s+"px",n.style.left=`-${i.x*s}px`,n.style.top=`-${i.y*s}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=Pm(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const ih={insertElements(t,e){re.string(e)?Tm(t,this.media,{src:e}):re.array(e)&&e.forEach(n=>{Tm(t,this.media,n)})},change(t){_0(t,"sources.length")?(Us.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],as(this.media),this.media=null,re.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:n}=t,[{provider:i=ks.html5,src:s}]=e,r=i==="html5"?n:"div",a=i==="html5"?{}:{src:s};Object.assign(this,{provider:i,type:n,supported:jt.check(n,i,this.config.playsinline),media:st(r,a)}),this.elements.container.appendChild(this.media),re.boolean(t.autoplay)&&(this.config.autoplay=t.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),re.empty(t.poster)||(this.poster=t.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Dt.addStyleHook.call(this),this.isHTML5&&ih.insertElements.call(this,"source",e),this.config.title=t.title,R0.setup.call(this),this.isHTML5&&Object.keys(t).includes("tracks")&&ih.insertElements.call(this,"track",t.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Dt.build.call(this),this.isHTML5&&this.media.load(),re.empty(t.previewThumbnails)||(Object.assign(this.config.previewThumbnails,t.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new nh(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Bo{constructor(e,n){if(Ke(this,"play",()=>re.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Fi(this.media.play())),this.media.play()):null),Ke(this,"pause",()=>this.playing&&re.function(this.media.pause)?this.media.pause():null),Ke(this,"togglePlay",o=>(re.boolean(o)?o:!this.playing)?this.play():this.pause()),Ke(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):re.function(this.media.stop)&&this.media.stop()}),Ke(this,"restart",()=>{this.currentTime=0}),Ke(this,"rewind",o=>{this.currentTime-=re.number(o)?o:this.config.seekTime}),Ke(this,"forward",o=>{this.currentTime+=re.number(o)?o:this.config.seekTime}),Ke(this,"increaseVolume",o=>{const l=this.media.muted?0:this.volume;this.volume=l+(re.number(o)?o:0)}),Ke(this,"decreaseVolume",o=>{this.increaseVolume(-o)}),Ke(this,"airplay",()=>{jt.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Ke(this,"toggleControls",o=>{if(this.supported.ui&&!this.isAudio){const l=Fc(this.elements.container,this.config.classNames.hideControls),c=o===void 0?void 0:!o,u=Ct(this.elements.container,this.config.classNames.hideControls,c);if(u&&re.array(this.config.controls)&&this.config.controls.includes("settings")&&!re.empty(this.config.settings)&&Xe.toggleMenu.call(this,!1),u!==l){const d=u?"controlshidden":"controlsshown";at.call(this,this.media,d)}return!u}return!1}),Ke(this,"on",(o,l)=>{bt.call(this,this.elements.container,o,l)}),Ke(this,"once",(o,l)=>{Of.call(this,this.elements.container,o,l)}),Ke(this,"off",(o,l)=>{uu(this.elements.container,o,l)}),Ke(this,"destroy",(o,l=!1)=>{if(!this.ready)return;const c=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(as(this.elements.buttons.play),as(this.elements.captions),as(this.elements.controls),as(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),re.function(o)&&o()):(aM.call(this),Us.cancelRequests.call(this),Nc(this.elements.original,this.elements.container),at.call(this,this.elements.original,"destroyed",!0),re.function(o)&&o.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Dt.toggleNativeControls.call(this,!0),c()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&re.function(this.embed.destroy)&&this.embed.destroy(),c()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(c),setTimeout(c,200))}),Ke(this,"supports",o=>jt.mime.call(this,o)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=jt.touch,this.media=e,re.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||re.nodeList(this.media)||re.array(this.media))&&(this.media=this.media[0]),this.config=Wt({},L0,Bo.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new yM(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",jt),re.nullOrUndefined(this.media)||!re.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!jt.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const s=this.media.tagName.toLowerCase();let r=null,a=null;switch(s){case"div":if(r=this.media.querySelector("iframe"),re.element(r)){if(a=C0(r.getAttribute("src")),this.provider=vM(a.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",a.search.length){const o=["1","true"];o.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),o.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=o.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(re.empty(this.provider)||!Object.values(ks).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=ed.video;break;case"video":case"audio":this.type=s,this.provider=ks.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=jt.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new _M(this),this.storage=new zo(this),this.media.plyr=this,re.element(this.elements.container)||(this.elements.container=st("div"),b0(this.media,this.elements.container)),Dt.migrateStyles.call(this),Dt.addStyleHook.call(this),R0.setup.call(this),this.config.debug&&bt.call(this,this.elements.container,this.config.events.join(" "),o=>{this.debug.log(`event: ${o.type}`)}),this.fullscreen=new Ei(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Dt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new MM(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Fi(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new nh(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===ks.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===ks.youtube}get isVimeo(){return this.provider===ks.vimeo}get isVideo(){return this.type===ed.video}get isAudio(){return this.type===ed.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const n=re.number(e)&&e>0;this.media.currentTime=n?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return re.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),n=(this.media||{}).duration,i=re.number(n)&&n!==1/0?n:0;return e||i}set volume(e){let n=e;re.string(n)&&(n=Number(n)),re.number(n)||(n=this.storage.get("volume")),re.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!re.empty(e)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let n=e;re.boolean(n)||(n=this.storage.get("muted")),re.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let n=null;re.number(e)&&(n=e),re.number(n)||(n=this.storage.get("speed")),re.number(n)||(n=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:s}=this;n=I0(n,i,s),this.config.speed.selected=n,setTimeout(()=>{this.media&&(this.media.playbackRate=n)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const n=this.config.quality,i=this.options.quality;if(!i.length)return;let s=[!re.empty(e)&&Number(e),this.storage.get("quality"),n.selected,n.default].find(re.number),r=!0;if(!i.includes(s)){const a=E0(i,s);this.debug.warn(`Unsupported quality option: ${s}, using ${a} instead`),s=a,r=!1}n.selected=s,this.media.quality=s,r&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(e){const n=re.boolean(e)?e:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(e){ih.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return re.url(e)?e:this.source}set download(e){re.url(e)&&(this.config.urls.download=e,Xe.setDownloadUrl.call(this))}set poster(e){this.isVideo?Dt.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Uc(kf.call(this));return re.array(e)?e.join(":"):e}set ratio(e){this.isVideo?re.string(e)&&x0(e)?(this.config.ratio=Uc(e),Aa.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=re.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){St.toggle.call(this,e,!1)}set currentTrack(e){St.set.call(this,e,!1),St.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:n}=this.captions;return e?n:-1}set language(e){St.setLanguage.call(this,e,!1)}get language(){return(St.getCurrentTrack.call(this)||{}).language}set pip(e){if(!jt.pip)return;const n=re.boolean(e)?e:!this.pip;re.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?Ju.active:Ju.inactive),re.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return jt.pip?re.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ju.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new nh(this))}static supported(e,n){return jt.check(e,n)}static loadSprite(e,n){return M0(e,n)}static setup(e,n={}){let i=null;return re.string(e)?i=Array.from(document.querySelectorAll(e)):re.nodeList(e)?i=Array.from(e):re.array(e)&&(i=e.filter(re.element)),re.empty(i)?null:i.map(s=>new Bo(s,n))}}Bo.defaults=nM(L0);const CM=document.querySelectorAll(".js-player");let nd;CM.length>0&&(nd=Bo.setup(".js-player",{}),nd.forEach((t,e)=>{t.on("play",()=>{nd.forEach((n,i)=>{i!==e&&n.pause()})})}));/*! License details at fancyapps.com/license */const mn=t=>typeof t=="string";/*! License details at fancyapps.com/license */const sa=t=>t&&t!==null&&t instanceof Element&&"nodeType"in t;/*! License details at fancyapps.com/license */const PM=function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,n=window.getComputedStyle(t).overflowY,i=n.indexOf("hidden")!==-1,s=n.indexOf("visible")!==-1;return e&&!i&&!s},Ho=function(t,e=void 0){return!t||t===document.body||e&&t===e?null:PM(t)?t:Ho(t.parentElement,e)};/*! License details at fancyapps.com/license */const qs=function(t){var e=new DOMParser().parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var n=document.createElement("div");e.firstChild;)n.appendChild(e.firstChild);return n}let i=e.firstChild;return!i||i instanceof HTMLElement?i:((n=document.createElement("div")).appendChild(i),n)};/*! License details at fancyapps.com/license */const yt=function(t=0,e=0,n=0){return Math.max(Math.min(e,n),t)};/*! License details at fancyapps.com/license */const Nn=t=>typeof t=="object"&&t!==null&&t.constructor===Object&&Object.prototype.toString.call(t)==="[object Object]";/*! License details at fancyapps.com/license */function Lm(t){return Nn(t)||Array.isArray(t)}function sh(t,e){const n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(s=>{const r=t[s],a=e[s];return typeof r=="function"?`${r}`==`${a}`:Lm(r)&&Lm(a)?sh(r,a):r===a})}/*! License details at fancyapps.com/license */const D0=function(t){for(const e of zc)e.getState()===Rn.Running&&e.tick(id?t-id:0);id=t,ma=window.requestAnimationFrame(D0)};var Rn,Os,ra;(function(t){t[t.Initializing=0]="Initializing",t[t.Running=1]="Running",t[t.Paused=2]="Paused",t[t.Completed=3]="Completed",t[t.Destroyed=4]="Destroyed"})(Rn||(Rn={})),function(t){t[t.Spring=0]="Spring",t[t.Ease=1]="Ease"}(Os||(Os={})),function(t){t[t.Loop=0]="Loop",t[t.Reverse=1]="Reverse"}(ra||(ra={}));const zc=new Set;let ma=null,id=0;function Ys(){let t=Rn.Initializing,e=Os.Ease,n=0,i=0,s=Ys.Easings.Linear,r=500,a=0,o=0,l=0,c=0,u=1/0,d=.01,h=.01,p=!1,f={},m=null,v={},g={},_={},b=0,y=0,T=ra.Loop,x=Ys.Easings.Linear;const S=new Map;function M(A,...R){for(const N of S.get(A)||[])N(...R)}function w(A){return i=0,A?m=setTimeout(()=>{E()},A):E(),P}function E(){t=Rn.Running,M("start",v,g)}function C(){if(t=Rn.Completed,_={},M("end",v),t===Rn.Completed)if(n<b){if(n++,T===ra.Reverse){const A=Object.assign({},f);f=Object.assign({},g),g=A}w(y)}else n=0;return P}const P={getState:function(){return t},easing:function(A){return s=A,e=Os.Ease,_={},P},duration:function(A){return r=A,P},spring:function(A={}){e=Os.Spring;const R={velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0},{velocity:N,mass:U,tension:k,friction:D,restDelta:W,restSpeed:O,maxSpeed:B,clamp:V}=Object.assign(Object.assign({},R),A);return a=N,o=U,l=k,c=D,h=W,d=O,u=B,p=V,_={},P},isRunning:function(){return t===Rn.Running},isSpring:function(){return e===Os.Spring},from:function(A){return v=Object.assign({},A),P},to:function(A){return g=A,P},repeat:function(A,R=0,N=ra.Loop,U){return b=A,y=R,T=N,x=U||s,P},on:function(A,R){var N,U;return N=A,U=R,S.set(N,[...S.get(N)||[],U]),P},off:function(A,R){var N,U;return N=A,U=R,S.has(N)&&S.set(N,S.get(N).filter(k=>k!==U)),P},start:function(A){return t=Rn.Initializing,f=Object.assign({},v),sh(f,g)||(zc.add(this),ma||(ma=window.requestAnimationFrame(D0)),w(A)),P},pause:function(){return m&&(clearTimeout(m),m=null),t===Rn.Running&&(t=Rn.Paused,M("pause",v)),P},end:C,tick:function(A){A>50&&(A=50),i+=A;let R=0,N=!1;if(t!==Rn.Running)return P;if(e===Os.Ease){R=yt(0,i/r,1),N=R===1;const k=T===ra.Reverse?x:s;for(const D in v)v[D]=f[D]+(g[D]-f[D])*k(R)}if(e===Os.Spring){const k=.001*A;let D=0;for(const W in v){const O=g[W];let B=v[W];if(typeof O!="number"||isNaN(O)||typeof B!="number"||isNaN(B))continue;if(Math.abs(O-B)<=h){v[W]=O,_[W]=0;continue}_[W]||(typeof a=="object"&&typeof a[W]=="number"?_[W]=a[W]:_[W]=typeof a=="number"?a:0);let V=_[W];V=yt(-1*Math.abs(u),V,Math.abs(u));const j=V*o*c;V+=((B>O?-1:1)*(Math.abs(O-B)*l)-j)/o*k,B+=V*k;const Y=v[W]>O?B<O:B>O;let H=Math.abs(V)<d&&Math.abs(O-B)<=h;p&&Y&&(H=!0),H?(B=O,V=0):D++,v[W]=B,_[W]=V}N=!D}const U=Object.assign({},g);return M("step",v,f,g,R),N&&t===Rn.Running&&sh(g,U)&&(t=Rn.Completed,C()),P},getStartValues:function(){return f},getCurrentValues:function(){return v},getCurrentVelocities:function(){return _},getEndValues:function(){return g},destroy:function(){t=Rn.Destroyed,m&&(clearTimeout(m),m=null),f=v=g={},zc.delete(this)}};return P}Ys.destroy=()=>{for(const t of zc)t.destroy();ma&&(cancelAnimationFrame(ma),ma=null)},Ys.Easings={Linear:function(t){return t},EaseIn:function(t){return t===0?0:Math.pow(2,10*t-10)},EaseOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},EaseInOut:function(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}};/*! License details at fancyapps.com/license */function sd(t){const e=[],n=typeof TouchEvent<"u"&&t instanceof TouchEvent?t.touches:t instanceof MouseEvent&&t.type!=="mouseup"?[t]:[];for(const i of n)e.push({x:i.clientX,y:i.clientY,ts:Date.now()});return e}function O0(t){const e=[],n=typeof TouchEvent<"u"&&t instanceof TouchEvent?t.changedTouches:t instanceof MouseEvent?[t]:[];for(const i of n)e.push({x:i.clientX,y:i.clientY,ts:Date.now()});return e}function Rs(t){const e=t[0],n=t[1]||e;return{x:(e.x+n.x)/2,y:(e.y+n.y)/2,ts:n.ts}}function Nl(t){const e=t[0],n=t[1]||t[0];return e&&n?-1*Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)):0}const Rm=t=>{t.cancelable&&t.preventDefault()},Es={passive:!1},LM={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]};let rd=!1,po=!0;const Vo=(t,e)=>{let n,i,s,r=Object.assign(Object.assign({},LM),e),a=[],o=[],l=[],c=!1,u=!1,d=!1,h=0,p=0,f=0,m=0,v=0,g=0,_=0,b=0,y=0,T=[],x=0,S=0;const M=new Map;function w(W){const O=Nl(o),B=Nl(l),V=O&&B?O/B:0,j=Math.abs(_)>Math.abs(b)?_:b,Y={srcEvent:n,isPanRecognized:c,isSwipeRecognized:u,firstTouch:a,previousTouch:l,currentTouch:o,deltaX:f,deltaY:m,offsetX:v,offsetY:g,velocityX:_,velocityY:b,velocity:j,angle:y,axis:s,scale:V,center:i};for(const H of M.get(W)||[])H(Y)}function E(W){const O=Date.now();T=T.filter(B=>!B.ts||B.ts>O-100),W&&T.push(W)}function C(){if(_=0,b=0,T.length>3){const W=T[0],O=T[T.length-1];if(W&&O){const B=O.x-W.x,V=O.y-W.y,j=W.ts&&O.ts?O.ts-W.ts:0;j>0&&(_=Math.abs(B)>3?B/(j/30):0,b=Math.abs(V)>3?V/(j/30):0)}}}function P(W){if(W instanceof MouseEvent){if(rd)return}else rd=!0;const O=W.composedPath()[0],B=r.ignore.join(",");if(O.matches(B)||O.closest(B)||typeof MouseEvent<"u"&&W instanceof MouseEvent&&(!W.buttons||W.button!==0))return;W instanceof MouseEvent&&Rm(W);const V=Date.now(),j=V-(h||V);d=j>0&&j<=250,h=V,clearTimeout(x),n=W,W instanceof MouseEvent&&(window.addEventListener("mousemove",A),window.addEventListener("mouseup",R)),window.addEventListener("blur",N),o=sd(W),a=[...o],l=[],p=o.length,i=Rs(o),p===1&&(c=!1,u=!1),p&&E(Rs(o)),w("start")}function A(W){var O;if(!a.length||W.defaultPrevented)return;n=W,l=[...o],o=sd(W),p=o.length,i=Rs(o);const B=i,V=Rs(l);if(f=B.x-V.x,m=B.y-V.y,E(B),C(),w("move"),o.length>1){const j=Nl(o),Y=Nl(l);Math.abs(j-Y)>=.1&&w("pinch")}if(!c&&a.length){const j=Rs(a);v=B.x-j.x,g=B.y-j.y,c=Math.abs(v)>r.panThreshold||Math.abs(g)>r.panThreshold,c&&(po=!1,clearTimeout(S),S=0,y=Math.abs(180*Math.atan2(g,v)/Math.PI),s=y>45&&y<135?"y":"x",a=[...o],l=[...o],(O=window.getSelection())===null||O===void 0||O.removeAllRanges(),w("panstart"))}c&&(f||m)&&w("pan")}function R(W){if(n=W,!a.length)return;const O=sd(W),B=O0(W);if(p=O.length,i=Rs(B),B.length&&E(Rs(B)),C(),l=[...o],o=[...O],a=[...O],O.length>0)w("end"),c=!1,u=!1,T=[];else{const V=r.swipeThreshold;(Math.abs(_)>V||Math.abs(b)>V)&&(u=!0),c&&w("panend"),u&&w("swipe"),c||u||(w("tap"),d?w("doubleTap"):x=setTimeout(function(){w("singleTap")},250)),w("end"),U()}}function N(){clearTimeout(x),U(),c&&w("panend"),w("end")}function U(){c=!1,u=!1,d=!1,p=0,T=[],o=[],l=[],a=[],f=0,m=0,v=0,g=0,_=0,b=0,y=0,s=void 0,window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",R),window.removeEventListener("blur",N),po||S||(S=setTimeout(()=>{po=!0,S=0},100))}function k(W){const O=W.target;rd=!1,O&&!W.defaultPrevented&&(po||(Rm(W),W.stopPropagation()))}const D={init:function(){if(t)return t.addEventListener("click",k,Es),t.addEventListener("mousedown",P,Es),t.addEventListener("touchstart",P,Es),t.addEventListener("touchmove",A,Es),t.addEventListener("touchend",R),t.addEventListener("touchcancel",R),D},on:function(W,O){return function(B,V){M.set(B,[...M.get(B)||[],V])}(W,O),D},off:function(W,O){return M.has(W)&&M.set(W,M.get(W).filter(B=>B!==O)),D},isPointerDown:()=>p>0,destroy:function(){clearTimeout(x),clearTimeout(S),S=0,t&&(t.removeEventListener("click",k,Es),t.removeEventListener("mousedown",P,Es),t.removeEventListener("touchstart",P,Es),t.removeEventListener("touchmove",A,Es),t.removeEventListener("touchend",R),t.removeEventListener("touchcancel",R)),t=null,U()}};return D};Vo.isClickAllowed=()=>po;/*! License details at fancyapps.com/license */const Ff={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset"};/*! License details at fancyapps.com/license */const At=(t,e="")=>{t&&t.classList&&e.split(" ").forEach(n=>{n&&t.classList.add(n)})};/*! License details at fancyapps.com/license */const Fl=t=>{t.cancelable&&t.preventDefault()},Cn=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e);var Qe,Im;(function(t){t.Reset="reset",t.Zoom="zoom",t.ZoomIn="zoomIn",t.ZoomOut="zoomOut",t.ZoomTo="zoomTo",t.ToggleCover="toggleCover",t.ToggleFull="toggleFull",t.ToggleMax="toggleMax",t.IterateZoom="iterateZoom",t.Pan="pan",t.Swipe="swipe",t.Move="move",t.MoveLeft="moveLeft",t.MoveRight="moveRight",t.MoveUp="moveUp",t.MoveDown="moveDown",t.RotateCCW="rotateCCW",t.RotateCW="rotateCW",t.FlipX="flipX",t.FlipY="flipY"})(Qe||(Qe={})),function(t){t.Cover="cover",t.Full="full",t.Max="max"}(Im||(Im={}));const si={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},rh={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:Qe.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:Ff,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:Qe.Zoom,width:"auto"};let Ul,Dm=0,Om=0,zl=0;const ah=(t,e={},n={})=>{let i,s,r,a,o,l,c,u=0,d=Object.assign(Object.assign({},rh),e),h={},p=Object.assign({},si),f=Object.assign({},si);const m=[];function v(X){let ne=d[X];return ne&&typeof ne=="function"?ne(se):ne}const g=new Map;function _(X,...ne){const F=g.get(X)||[];d.on&&F.push(d.on[X]);for(const fe of F)fe&&fe instanceof Function&&fe(se,...ne);X!=="*"&&_("*",X,...ne)}function b(X){if(u!==3)return;const ne=X.target;if(Ho(ne))return;const F=Date.now(),fe=[-X.deltaX||0,-X.deltaY||0,-X.detail||0].reduce(function(Ce,z){return Math.abs(z)>Math.abs(Ce)?z:Ce}),ve=yt(-1,fe,1);_("wheel",X,ve);const pe=v("wheelAction");if(!pe||X.defaultPrevented)return;const Me=f.scale;let Pe=Me*(ve>0?1.5:.5);if(pe===Qe.Zoom){const Ce=Math.abs(X.deltaY)<100&&Math.abs(X.deltaX)<100;if(F-Om<(Ce?200:45))return void Fl(X);Om=F;const z=P(),L=U();if(Cn(Pe)<Cn(z)&&Cn(Me)<=Cn(z)?(zl+=Math.abs(ve),Pe=z):Cn(Pe)>Cn(L)&&Cn(Me)>=Cn(L)?(zl+=Math.abs(ve),Pe=L):(zl=0,Pe=yt(z,Pe,L)),zl>7)return}switch(Fl(X),pe){case Qe.Pan:O(pe,{srcEvent:X,deltaX:2*-X.deltaX,deltaY:2*-X.deltaY});break;case Qe.Zoom:O(Qe.ZoomTo,{srcEvent:X,scale:Pe,center:{x:X.clientX,y:X.clientY}});break;default:O(pe,{srcEvent:X})}}function y(X){var ne,F;const fe=X.composedPath()[0];if(!Vo.isClickAllowed()||!sa(fe)||X.defaultPrevented||!(t!=null&&t.contains(fe))||fe.hasAttribute("disabled")||fe.hasAttribute("aria-disabled"))return;const ve=fe.closest("[data-panzoom-action]"),pe=(ne=ve==null?void 0:ve.dataset)===null||ne===void 0?void 0:ne.panzoomAction,Me=((F=ve==null?void 0:ve.dataset)===null||F===void 0?void 0:F.panzoomValue)||"";if(pe){switch(pe){case Qe.ZoomTo:case Qe.ZoomIn:case Qe.ZoomOut:O(pe,{scale:parseFloat(Me||"")||void 0});break;case Qe.MoveLeft:case Qe.MoveRight:O(pe,{deltaX:parseFloat(Me||"")||void 0});break;case Qe.MoveUp:case Qe.MoveDown:O(pe,{deltaY:parseFloat(Me||"")||void 0});break;default:O(pe)}return}if(!(i!=null&&i.contains(fe)))return;const Pe={srcEvent:X};if(O(v("clickAction"),Pe),v("dblClickAction")){const Ce=Date.now(),z=Ce-(Dm||Ce);Dm=Ce,z>0&&z<=250?(Ul&&(clearTimeout(Ul),Ul=void 0),O(v("dblClickAction"),Pe)):Ul=setTimeout(()=>{O(v("singleClickAction"),Pe)},250)}}function T(X){if(c=X,!w()||u!==3||p.scale<=1||f.scale<=1||((i==null?void 0:i.dataset.animationName)||"").indexOf("zoom")>-1)return;const ne=E(f.scale);if(!ne)return;const{x:F,y:fe}=ne;O(Qe.Pan,{deltaX:F-f.x,deltaY:fe-f.y})}function x(){var X;if(t&&((X=t.querySelector(".f-spinner"))===null||X===void 0||X.remove(),t.classList.remove("is-loading")),!t||!i)return;if(s instanceof HTMLImageElement&&(!s.complete||!s.naturalWidth))return u=2,i==null||i.classList.add("has-error"),void _("error");_("loaded");const{width:ne,height:F}=M();s&&(s.setAttribute("width",ne+""),s.setAttribute("height",F+"")),i&&(i.classList.remove("has-error"),i.setAttribute("width",ne+""),i.setAttribute("height",F+""),i.style.aspectRatio=`${ne/F||""}`),o=Ys().on("start",(ve,pe)=>{f=Object.assign(Object.assign({},si),pe),pe.angle!==void 0&&(pe.angle=90*Math.round(pe.angle/90)),pe.flipX!==void 0&&(pe.flipX=pe.flipX>0?1:-1),pe.flipY!==void 0&&(pe.flipY=pe.flipY>0?1:-1),W(),_("animationStart")}).on("pause",ve=>{f=Object.assign(Object.assign({},si),ve)}).on("step",ve=>{if(u!==3||!o)return;if(!t||!t.parentElement)return void o.end();if(p=Object.assign(Object.assign({},si),ve),w()||!v("bounds")||(a==null?void 0:a.isPointerDown())||f.scale>p.scale||f.scale<A())return void B();const pe=k(f.scale);let Me=!1,Pe=!1,Ce=!1,z=!1;p.x<pe.x[0]&&(Me=!0),p.x>pe.x[1]&&(Pe=!0),p.y<pe.y[0]&&(z=!0),p.y>pe.y[1]&&(Ce=!0);let L=!1,Q=!1,oe=!1,he=!1;f.x<pe.x[0]&&(L=!0),f.x>pe.x[1]&&(Q=!0),f.y<pe.y[0]&&(he=!0),f.y>pe.y[1]&&(oe=!0);let de=!1;(Pe&&Q||Me&&L)&&(f.x=yt(pe.x[0],f.x,pe.x[1]),de=!0),(Ce&&oe||z&&he)&&(f.y=yt(pe.y[0],f.y,pe.y[1]),de=!0),de&&o.spring({tension:94,friction:17,maxSpeed:555*f.scale,restDelta:.1,restSpeed:.1,velocity:o.getCurrentVelocities()}).from(p).to(f).start(),B()}).on("end",()=>{D(),o!=null&&o.isRunning()||(W(),_("animationEnd"))}),function(){const ve=v("gestures");ve&&r&&s&&(a=Vo(r,ve).on("start",pe=>{if(!o)return;const Me=pe.srcEvent;w()||((p.scale>1||pe.currentTouch.length>1)&&(Me==null||Me.stopPropagation(),o.pause()),pe.currentTouch.length===1&&_("touchStart"))}).on("move",pe=>{w()||(f.scale!==1||pe.currentTouch.length>1)&&(pe.srcEvent.preventDefault(),pe.srcEvent.stopPropagation())}).on("pan",pe=>{if(w())return;const Me=pe.srcEvent;(f.scale!==1||pe.currentTouch.length>1)&&(Fl(Me),O(Qe.Pan,pe))}).on("swipe",pe=>{w()||f.scale>1&&O(Qe.Swipe,pe)}).on("tap",pe=>{_("click",pe)}).on("singleTap",pe=>{_("singleClick",pe)}).on("doubleTap",pe=>{_("dblClick",pe)}).on("pinch",pe=>{w()||(pe.scale>A()?O(Qe.ZoomIn,pe):pe.scale<A()?O(Qe.ZoomOut,pe):O(Qe.Pan,pe))}).on("end",pe=>{w()||(pe.currentTouch.length?(pe.srcEvent.stopPropagation(),Fl(pe.srcEvent),o==null||o.end()):(W(),D(),_("touchEnd")))}).init())}(),r&&(r.addEventListener("wheel",b,{passive:!1}),m.push(()=>{r==null||r.removeEventListener("wheel",b,{passive:!1})})),t==null||t.addEventListener("click",y),document==null||document.addEventListener("mousemove",T),m.push(()=>{t==null||t.removeEventListener("click",y),document==null||document.removeEventListener("mousemove",T)});const fe=Object.assign(Object.assign({},v("startPos")||{}),{scale:A()});if(p=Object.assign(Object.assign({},si),fe),f=Object.assign(Object.assign({},si),fe),w()){const ve=E(f.scale);if(ve){const{x:pe,y:Me}=ve;p.x=pe,p.y=Me,f.x=pe,f.y=Me}}u=3,B(),W(),_("ready"),requestAnimationFrame(()=>{r&&(r.style.visibility="")})}function S(){const X={top:0,left:0,width:0,height:0};if(i){const ne=i.getBoundingClientRect();f.angle%180==90?(X.top=ne.top+.5*ne.height-.5*ne.width,X.left=ne.left+.5*ne.width-.5*ne.height,X.width=ne.height,X.height=ne.width):(X.top=ne.top,X.left=ne.left,X.width=ne.width,X.height=ne.height)}return X}function M(){let X=v("width"),ne=v("height");if(s&&X==="auto"){const F=s.getAttribute("width");X=F?parseFloat(F+""):s.dataset.width!==void 0?parseFloat(s.dataset.width+""):r instanceof HTMLImageElement?r.naturalWidth:s instanceof HTMLImageElement?s.naturalWidth:s.getBoundingClientRect().width}else X=mn(X)?parseFloat(X):X;if(s&&ne==="auto"){const F=s.getAttribute("height");ne=F?parseFloat(F+""):s.dataset.height!==void 0?parseFloat(s.dataset.height+""):r instanceof HTMLImageElement?r.naturalHeight:s instanceof HTMLImageElement?s.naturalHeight:s.getBoundingClientRect().height}else ne=mn(ne)?parseFloat(ne):ne;return{width:X,height:ne}}function w(){return v("panMode")==="mousemove"&&matchMedia("(hover: hover)").matches}function E(X){const ne=c||v("event"),F=i==null?void 0:i.getBoundingClientRect();if(!ne||!F||X<=1)return{x:0,y:0};const fe=(ne.clientX||0)-F.left,ve=(ne.clientY||0)-F.top,pe=F.width,Me=F.height,Pe=k(X);if(X>1){const oe=v("mouseMoveFactor");oe>1&&(X*=oe)}let Ce=pe*X,z=Me*X,L=.5*(Ce-pe)-fe/pe*100/100*(Ce-pe),Q=.5*(z-Me)-ve/Me*100/100*(z-Me);return L=yt(Pe.x[0],L,Pe.x[1]),Q=yt(Pe.y[0],Q,Pe.y[1]),{x:L,y:Q}}function C(X="base"){if(!t)return 1;const ne=t.getBoundingClientRect(),F=S(),{width:fe,height:ve}=M(),pe=L=>{if(typeof L=="number")return L;switch(L){case"min":case"base":return 1;case"cover":return Math.max(ne.height/F.height,ne.width/F.width)||1;case"full":case"max":{const Q=f.angle%180==90?ve:fe;return Q&&F.width?Q/F.width:1}}},Me=v("minScale"),Pe=v("maxScale"),Ce=Math.min(pe("full"),pe(Me)),z=typeof Pe=="number"?pe("full")*Pe:Math.min(pe("full"),pe(Pe));switch(X){case"min":return Ce;case"base":return yt(Ce,1,z);case"cover":return pe("cover");case"full":return Math.min(z,pe("full"));case"max":return z}}function P(){return C("min")}function A(){return C("base")}function R(){return C("cover")}function N(){return C("full")}function U(){return C("max")}function k(X){const ne={x:[0,0],y:[0,0]},F=t==null?void 0:t.getBoundingClientRect();if(!F)return ne;const fe=S(),ve=F.width,pe=F.height;let Me=fe.width,Pe=fe.height,Ce=X=X===void 0?f.scale:X,z=X;if(w()&&X>1){const L=v("mouseMoveFactor");L>1&&(Me*X>ve+.01&&(Ce*=L),Pe*X>pe+.01&&(z*=L))}return Me*=Ce,Pe*=z,X>1&&(Me>ve&&(ne.x[0]=.5*(ve-Me),ne.x[1]=.5*(Me-ve)),ne.x[0]-=.5*(fe.left-F.left),ne.x[1]-=.5*(fe.left-F.left),ne.x[0]-=.5*(fe.left+fe.width-F.right),ne.x[1]-=.5*(fe.left+fe.width-F.right),Pe>pe&&(ne.y[0]=.5*(pe-Pe),ne.y[1]=.5*(Pe-pe)),ne.y[0]-=.5*(fe.top-F.top),ne.y[1]-=.5*(fe.top-F.top),ne.y[0]-=.5*(fe.top+fe.height-F.bottom),ne.y[1]-=.5*(fe.top+fe.height-F.bottom)),ne}function D(){if(!v("bounds")||u!==3||!(t!=null&&t.parentElement)||!o||!a)return;const X=P(),ne=U(),F=yt(X,f.scale,ne);if(f.scale<X-.01||f.scale>ne+.01)return void O(Qe.ZoomTo,{scale:F});if(o.isRunning()||a.isPointerDown())return;const fe=k(F);f.x<fe.x[0]||f.x>fe.x[1]||f.y<fe.y[0]||f.y>fe.y[1]?(f.x=yt(fe.x[0],f.x,fe.x[1]),f.y=yt(fe.y[0],f.y,fe.y[1]),o.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:o.getCurrentVelocities()}),o.from(p).to(f).start()):B()}function W(){if(!t||!t.parentElement||!i)return;const X=K(),ne=G(),F=te(),fe=ue(),ve=j(),pe=Y();i.classList.toggle("is-fullsize",fe),i.classList.toggle("is-expanded",F),i.classList.toggle("is-dragging",ne),i.classList.toggle("can-drag",X),i.classList.toggle("will-zoom-in",ve),i.classList.toggle("will-zoom-out",pe);const Me=H(),Pe=q(),Ce=u!==3;for(const z of(t==null?void 0:t.querySelectorAll("[data-panzoom-action]"))||[]){const L=z.dataset.panzoomAction;let Q=!1;if(Ce)Q=!0;else switch(L){case Qe.ZoomIn:Me||(Q=!0);break;case Qe.ZoomOut:Pe||(Q=!0);break;case Qe.ToggleFull:Me||Pe||(Q=!0);const oe=z.querySelector("g");oe&&(oe.style.display=fe?"none":"");break;case Qe.ToggleCover:case Qe.ToggleMax:Me||Pe||(Q=!0)}Q?(z.setAttribute("aria-disabled",""),z.setAttribute("tabindex","-1")):(z.removeAttribute("aria-disabled"),z.removeAttribute("tabindex"))}}function O(X,ne){var F;if(!t||!s||!o||X===Qe.Swipe&&Math.abs(o.getCurrentVelocities().scale)>.01)return;let fe=Object.assign({},f),ve=k(w()?f.scale:p.scale);const pe=o.getCurrentVelocities(),Me=S(),Pe=(((F=(ne=ne||{}).currentTouch)===null||F===void 0?void 0:F.length)||0)>1,Ce=ne.velocityX||0,z=ne.velocityY||0;let L=ne.center;!L&&ne.srcEvent&&(L=Rs(O0(ne.srcEvent)));let Q=ne.deltaX||0,oe=ne.deltaY||0;switch(X){case Qe.MoveRight:Q=ne.deltaX||100;break;case Qe.MoveLeft:Q=ne.deltaX||-100;break;case Qe.MoveUp:oe=ne.deltaY||-100;break;case Qe.MoveDown:oe=ne.deltaY||100}let he=[];switch(X){case Qe.Reset:f=Object.assign({},si),f.scale=A();break;case Qe.Pan:case Qe.Move:case Qe.MoveLeft:case Qe.MoveRight:case Qe.MoveUp:case Qe.MoveDown:if(a!=null&&a.isPointerDown()){let ie=1,le=1;f.x<=ve.x[0]&&Ce<=0&&(ie=Math.max(.01,1-Math.abs(1/Me.width*Math.abs(f.x-ve.x[0]))),ie*=.2),f.x>=ve.x[1]&&Ce>=0&&(ie=Math.max(.01,1-Math.abs(1/Me.width*Math.abs(f.x-ve.x[1]))),ie*=.2),f.y<=ve.y[0]&&z<=0&&(le=Math.max(.01,1-Math.abs(1/Me.height*Math.abs(f.y-ve.y[0]))),le*=.2),f.y>=ve.y[1]&&z>=0&&(le=Math.max(.01,1-Math.abs(1/Me.height*Math.abs(f.y-ve.y[1]))),le*=.2),f.x+=Q*ie,f.y+=oe*le}else f.x=yt(ve.x[0],f.x+Q,ve.x[1]),f.y=yt(ve.y[0],f.y+oe,ve.y[1]);break;case Qe.Swipe:const de=(ie=0)=>Math.sign(ie)*Math.pow(Math.abs(ie),1.5);f.x+=yt(-1e3,de(Ce),1e3),f.y+=yt(-1e3,de(z),1e3),z&&!Ce&&(f.x=yt(ve.x[0],f.x,ve.x[1])),!z&&Ce&&(f.y=yt(ve.y[0],f.y,ve.y[1])),pe.x=Ce,pe.y=z;break;case Qe.ZoomTo:f.scale=ne.scale||1;break;case Qe.ZoomIn:f.scale=f.scale*(ne.scale||2),Pe||(f.scale=Math.min(f.scale,U()));break;case Qe.ZoomOut:f.scale=f.scale*(ne.scale||.5),Pe||(f.scale=Math.max(f.scale,P()));break;case Qe.ToggleCover:he=[A(),R()];break;case Qe.ToggleFull:he=[A(),N()];break;case Qe.ToggleMax:he=[A(),U()];break;case Qe.IterateZoom:he=[A(),N(),U()];break;case Qe.Zoom:const ee=N();f.scale>=ee-.05?f.scale=A():f.scale=Math.min(ee,f.scale*(ne.scale||2));break;case Qe.RotateCW:f.angle+=90;break;case Qe.RotateCCW:f.angle-=90;break;case Qe.FlipX:f.flipX*=-1;break;case Qe.FlipY:f.flipY*=-1}if(p.angle!==void 0&&Math.abs(p.angle)>=360&&(f.angle-=360*Math.floor(p.angle/360),p.angle-=360*Math.floor(p.angle/360)),he.length){const de=he.findIndex(ee=>ee>f.scale+1e-4);f.scale=he[de]||he[0]}if(Pe&&(f.scale=yt(P()*(Pe?.8:1),f.scale,U()*(Pe?1.6:1))),w()){const de=E(f.scale);if(de){const{x:ee,y:ie}=de;f.x=ee,f.y=ie}}else if(f.scale!==fe.scale){let de=0,ee=0;if(L)de=L.x,ee=L.y;else{const _e=t.getBoundingClientRect();de=_e.x+.5*_e.width,ee=_e.y+.5*_e.height}let ie=de-Me.left,le=ee-Me.top;ie-=.5*Me.width,le-=.5*Me.height;const ye=(ie-fe.x)/fe.scale,Se=(le-fe.y)/fe.scale;f.x=ie-ye*f.scale,f.y=le-Se*f.scale,!Pe&&v("bounds")&&(ve=k(f.scale),f.x=yt(ve.x[0],f.x,ve.x[1]),f.y=yt(ve.y[0],f.y,ve.y[1]))}if(X===Qe.Swipe){let de=94,ee=17,ie=500*f.scale,le=pe;o.spring({tension:de,friction:ee,maxSpeed:ie,restDelta:.1,restSpeed:.1,velocity:le})}else X===Qe.Pan||Pe?o.spring({tension:750,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):o.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:pe});X===Qe.Reset&&ne.velocity===0?p=Object.assign({},f):o.from(p).to(f).start(),_("action",X)}function B(){if(!i||!s)return;if(s instanceof HTMLImageElement){const{width:Pe,height:Ce}=M();i.style.maxWidth=`min(${Pe}px, 100%)`,i.style.maxHeight=`min(${Ce}px, 100%)`}let{x:X,y:ne,scale:F,angle:fe,flipX:ve,flipY:pe}=p;const Me=function(){const Pe=S(),Ce=Pe.width,z=Pe.height,{width:L,height:Q}=M();if(!t)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:Ce,fitHeight:z,fullWidth:L,fullHeight:Q};let{x:oe,y:he,scale:de,angle:ee,flipX:ie,flipY:le}=p,ye=1/N(),Se=L,_e=Q,Te=p.scale*ye,ke=f.scale*ye;const Ne=Math.max(Ce,z),Ge=Math.min(Ce,z);L>Q?(Se=Ne,_e=Ge):(Se=Ge,_e=Ne),Te=L>Q?Ne*de/L||1:Ne*de/Q||1;let Be=Se?L*ke:0,qe=_e?Q*ke:0;return oe=oe+.5*Se-.5*Be,he=he+.5*_e-.5*qe,{x:oe,y:he,width:Be,height:qe,scale:Se&&_e?L*Te/Be:0,flipX:ie,flipY:le,angle:ee,fitWidth:Ce,fitHeight:z,fullWidth:L,fullHeight:Q}}();if(i&&Me){const{x:Pe,y:Ce,width:z,height:L,scale:Q,flipX:oe,flipY:he}=Me;let de=`translate(${Cn(Pe)}px, ${Cn(Ce)}px)`;de+=oe!==1||he!==1?` scaleX(${Cn(Q*oe)}) scaleY(${Cn(Q*he)})`:` scale(${Cn(Q)})`,fe!==0&&(de+=` rotate(${fe}deg)`),r&&(r.style.width=`${Cn(z)}px`,r.style.height=`${Cn(L)}px`,r.style.transform=`${de}`)}_("render")}function V(){let X=f.scale;const ne=v("clickAction");let F=A();if(ne){let fe=[];switch(ne){case Qe.ZoomIn:F=2*X;break;case Qe.ZoomOut:F=.5*X;break;case Qe.ToggleCover:fe=[A(),R()];break;case Qe.ToggleFull:fe=[A(),N()];break;case Qe.ToggleMax:fe=[A(),U()];break;case Qe.IterateZoom:fe=[A(),N(),U()];break;case Qe.Zoom:const ve=N();F=X>=ve-.05?A():Math.min(ve,2*X)}if(fe.length){const ve=fe.findIndex(pe=>pe>X+1e-4);F=fe[ve]||A()}}return F=yt(P(),F,U()),F}function j(){return u===3&&V()>f.scale}function Y(){return u===3&&V()<f.scale}function H(){return u===3&&f.scale<U()}function q(){return u===3&&f.scale>P()}function K(){return u===3&&te()&&!!a&&!w()}function G(){return u===3&&(a==null?void 0:a.isPointerDown())&&!w()}function te(){return u===3&&f.scale>A()}function ue(){return u===3&&f.scale>=N()}const se={canDrag:K,canZoomIn:H,canZoomOut:q,destroy:function(){_("destroy");for(const X of Object.values(h))X==null||X.destroy(se);for(const X of m)X();return i&&(i.style.aspectRatio="",i.style.maxWidth="",i.style.maxHeight=""),r&&(r.style.width="",r.style.height="",r.style.transform=""),i=void 0,s=void 0,r=void 0,p=Object.assign({},si),f=Object.assign({},si),o==null||o.destroy(),o=void 0,a==null||a.destroy(),a=void 0,u=4,se},emit:_,execute:O,getBoundaries:k,getContainer:function(){return t},getFullDim:M,getGestures:function(){return a},getMousemovePos:E,getOptions:function(){return d},getScale:C,getState:function(){return u},getTransform:function(X){return X===!0?f:p},getTween:function(){return o},getViewport:function(){return r},getWrapper:function(){return i},init:function(){return u=0,_("init"),function(){for(const[X,ne]of Object.entries(Object.assign(Object.assign({},n),d.plugins||{})))if(X&&!h[X]&&ne instanceof Function){const F=ne();F.init(se),h[X]=F}_("initPlugins")}(),function(){if(!t)return;const X=Object.assign(Object.assign({},rh.classes),v("classes"));if(At(t,X.container),s=t.querySelector("."+X.content),!!s&&(s.setAttribute("draggable","false"),i=t.querySelector("."+X.wrapper),i||(i=document.createElement("div"),At(i,X.wrapper),s.insertAdjacentElement("beforebegin",i),i.insertAdjacentElement("afterbegin",s)),s instanceof HTMLImageElement||s instanceof HTMLPictureElement)){if(r=t.querySelector("."+X.viewport),!r){r=document.createElement("div"),At(r,X.viewport);const ne=s.cloneNode(!0);ne.classList.remove("is-lazyloading"),ne.classList.remove("is-lazyloaded"),r.insertAdjacentElement("afterbegin",ne),i.insertAdjacentElement("beforeend",r)}s instanceof HTMLPictureElement&&(s=s.querySelector("img")),r instanceof HTMLPictureElement&&(r=r.querySelector("img")),r.style.visibility="hidden",_("initLayout")}}(),function(){if(!(s&&s instanceof HTMLImageElement))return;const X=()=>{s&&s instanceof HTMLImageElement&&s.decode().then(()=>{requestAnimationFrame(()=>{x()})}).catch(()=>{x()})};if(s.src&&s.complete)return void X();u=1,function(){const ne=t==null?void 0:t.querySelector(".f-spinner");if(!t||ne)return;const F=v("spinnerTpl"),fe=qs(F);fe&&(fe.classList.add("f-spinner"),t.classList.add("is-loading"),i==null||i.insertAdjacentElement("afterbegin",fe))}(),_("loading"),s.addEventListener("load",X,!1),s.addEventListener("error",X,!1),m.push(()=>{s==null||s.removeEventListener("load",X,!1),s==null||s.removeEventListener("error",X,!1)})}(),function(){if(t&&!l){let X=null;l=new ResizeObserver(()=>{X||(X=requestAnimationFrame(()=>{t&&t.parentElement&&u===3&&(W(),D(),_("refresh")),X=null}))}),l.observe(t),m.push(()=>{l==null||l.disconnect(),l=void 0,X&&(cancelAnimationFrame(X),X=null)})}}(),se},isDragging:G,isExpanded:te,isFullsize:ue,localize:function(X,ne=[]){const F=v("l10n")||{};X=String(X).replace(/\{\{(\w+)\}\}/g,(fe,ve)=>F[ve]||fe);for(let fe=0;fe<ne.length;fe++)X=X.split(ne[fe][0]).join(ne[fe][1]);return X=X.replace(/\{\{(.*?)\}\}/g,(fe,ve)=>ve)},off:function(X,ne){for(const F of X instanceof Array?X:[X])g.has(F)&&g.set(F,g.get(F).filter(fe=>fe!==ne));return se},on:function(X,ne){for(const F of X instanceof Array?X:[X])g.set(F,[...g.get(F)||[],ne]);return se},version:"6.0.7",willZoomIn:j,willZoomOut:Y};return se};ah.l10n={en_EN:Ff},ah.getDefaults=()=>rh;/*! License details at fancyapps.com/license */const ad=(t,e)=>{let n=[];return t.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||n.push(i)}),n};/*! License details at fancyapps.com/license */const ui=(t,...e)=>{const n=e.length;for(let i=0;i<n;i++){const s=e[i]||{};Object.entries(s).forEach(([r,a])=>{const o=Array.isArray(a)?[]:{};t[r]||Object.assign(t,{[r]:o}),Nn(a)?Object.assign(t[r],ui(o,a)):Array.isArray(a)?Object.assign(t,{[r]:[...a]}):Object.assign(t,{[r]:a})})}return t};/*! License details at fancyapps.com/license */const oh=function(t=0,e=0,n=0,i=0,s=0,r=!1){const a=(t-e)/(n-e)*(s-i)+i;return r?i<s?yt(i,a,s):yt(s,a,i):a};/*! License details at fancyapps.com/license */const ws=(t,e="")=>{t&&t.classList&&e.split(" ").forEach(n=>{n&&t.classList.remove(n)})};/*! License details at fancyapps.com/license */const Is=(t,e="",n)=>{t&&t.classList&&e.split(" ").forEach(i=>{i&&t.classList.toggle(i,n||!1)})};/*! License details at fancyapps.com/license */const Uf=Object.assign(Object.assign({},Ff),{ERROR:"Something went wrong. <br /> Please try again later.",NEXT:"Next page",PREV:"Previous page",GOTO:"Go to page #%d",DOWNLOAD:"Download",TOGGLE_FULLSCREEN:"Toggle full-screen mode",TOGGLE_EXPAND:"Toggle full-size mode",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_AUTOPLAY:"Toggle slideshow"});/*! License details at fancyapps.com/license */const zr=t=>{t.cancelable&&t.preventDefault()},ta={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:Uf,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:200,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let km,Nm=0;const Bc=(t,e={},n={})=>{Nm++;let i,s,r,a,o,l=0,c=Object.assign({},ta),u=Object.assign({},ta),d={},h=null,p=null,f=!1,m=!1,v=!1,g="height",_=0,b=!0,y=0,T=0,x=0,S=0,M="*",w=[],E=[];const C=new Set;let P=[],A=0,R=0;function N(ee,...ie){let le=u[ee];return le&&le instanceof Function?le(de,...ie):le}function U(ee,ie=[]){const le=N("l10n")||{};ee=String(ee).replace(/\{\{(\w+)\}\}/g,(ye,Se)=>le[Se]||ye);for(let ye=0;ye<ie.length;ye++)ee=ee.split(ie[ye][0]).join(ie[ye][1]);return ee=ee.replace(/\{\{(.*?)\}\}/g,(ye,Se)=>Se)}const k=new Map;function D(ee,...ie){const le=k.get(ee)||[];u.on&&le.push(u.on[ee]);for(const ye of le)ye&&ye instanceof Function&&ye(de,...ie);ee!=="*"&&D("*",ee,...ie)}function W(){var ee,ie;const le=ui({},ta,c);ui(le,ta,c);let ye="";const Se=c.breakpoints||{};if(Se)for(const[_e,Te]of Object.entries(Se))window.matchMedia(_e).matches&&(ye+=_e,ui(le,Te));if(o===void 0||ye!==o){if(o=ye,l!==0){let _e=(ie=(ee=P[y])===null||ee===void 0?void 0:ee.slides[0])===null||ie===void 0?void 0:ie.index;_e===void 0&&(_e=u.initialSlide),le.initialSlide=_e,le.slides=[];for(const Te of w)Te.isVirtual&&le.slides.push(Te)}he(),u=le,u.enabled!==!1&&(l=0,D("init"),function(){for(const[_e,Te]of Object.entries(Object.assign(Object.assign({},n),u.plugins||{})))if(_e&&!d[_e]&&Te instanceof Function){const ke=Te();ke.init(de,Bc),d[_e]=ke}D("initPlugins")}(),function(){if(!h)return;const _e=N("classes")||{};At(h,_e.container),At(h,_e.isEnabled);const Te=N("style");if(Te&&Nn(Te))for(const[ke,Ne]of Object.entries(Te))h.style.setProperty(ke,Ne);p=h.querySelector(`.${_e.viewport}`),p||(p=document.createElement("div"),At(p,_e.viewport),p.append(...ad(h,`.${_e.slide}`)),h.insertAdjacentElement("afterbegin",p)),h.carousel=de,D("initLayout")}(),function(){if(!p)return;const _e=N("classes")||{};w=[],[...ad(p,`.${_e.slide}`)].forEach(Te=>{Te.parentElement&&(w.push(ue(Object.assign({el:Te,isVirtual:!1},Te.dataset||{}))),Te.parentElement.removeChild(Te))}),te(N("slides"));for(const Te of w)D("addSlide",Te);D("initSlides")}(),s=Ys().on("start",()=>{b=!1,i&&i.isPointerDown()||(V(),oe())}).on("step",_e=>{_=_e.pos,oe()}).on("end",_e=>{i!=null&&i.isPointerDown()||(_=_e.pos,s&&!f&&(_<x||_>S)?s.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:_}).to({pos:yt(x,_,S)}).start():b||(b=!0,D("settle")))}),function(){const _e=N("gestures");p&&_e!==!1&&(i=Vo(p,_e).on("start",Te=>{var ke,Ne;if(!s)return;const{srcEvent:Ge}=Te;function Be(ge){const Ue=window.getComputedStyle(ge),xe=new DOMMatrixReadOnly(Ue.transform);return{width:xe.m41||0,height:xe.m42||0}}v&&zr(Ge),s.pause(),s.getCurrentVelocities().pos=0;const qe=(ke=P[y])===null||ke===void 0?void 0:ke.slides[0];qe&&C.has(qe.index)&&qe.el&&(_=qe.offset||0,_+=(Be(qe.el)[g]||0)*(m&&!v?1:-1)),pe(),f||(_<x||_>S)&&s.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:((Ne=s.getCurrentVelocities())===null||Ne===void 0?void 0:Ne.pos)||0,restDelta:1,restSpeed:1}).from({pos:_}).to({pos:yt(x,_,S)}).start()}).on("move",Te=>{const{srcEvent:ke,axis:Ne}=Te,Ge=Te.srcEvent.target;Ge&&Ho(Ge)||(Ne||(ke.stopPropagation(),ke.stopImmediatePropagation()),(Ne==="y"&&v||Ne==="x"&&!v)&&(zr(ke),ke.stopPropagation()))}).on("panstart",Te=>{(Te==null?void 0:Te.axis)===(v?"y":"x")&&At(p,"is-dragging")}).on("panend",()=>{ws(p,"is-dragging")}).on("pan",Te=>{var ke;const{deltaX:Ne,deltaY:Ge,currentTouch:Be,axis:qe}=Te;if(!s||Be.length>1||qe==="y"&&!v||qe==="x"&&v)return;const ge=m&&!v?1:-1;let Ue=v?Ge:Ne,xe=s!=null&&s.isRunning()?s.getEndValues().pos:_,Le=1;f||(xe<=x&&Ue*ge<0?(Le=Math.max(.01,1-Math.abs(1/K()*Math.abs(xe-x))),Le*=.2):xe>=S&&Ue*ge>0&&(Le=Math.max(.01,1-Math.abs(1/K()*Math.abs(xe-S))),Le*=.2)),xe+=Ue*Le*ge,s.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:((ke=s.getCurrentVelocities())===null||ke===void 0?void 0:ke.pos)||0,restDelta:1,restSpeed:1}).from({pos:_}).to({pos:xe}).start()}).on("end",Te=>{var ke,Ne;const{axis:Ge,velocityX:Be,velocityY:qe,currentTouch:ge}=Te,Ue=P.length,xe=N("dragFree");if(ge.length>0||!s||!Ue)return;const Le=N("vertical")?qe:Be;let ze=s!=null&&s.isRunning()?s.getEndValues().pos:_;const He=m&&!v?1:-1;if(ze+=Le*(xe?5:1)*He,!f&&(Le*He<=0&&ze<x||Le*He>=0&&ze>S)){let tt=0;return Math.abs(Le)>0&&(tt=2*Math.abs(Le),tt=Math.min(.3*K(),tt)),ze=yt(x+-1*tt,ze,S+tt),void s.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*Le,restDelta:1,restSpeed:1}).from({pos:_}).to({pos:ze}).start()}if(xe||!((ke=d.Autoscroll)===null||ke===void 0)&&ke.isEnabled())return void(Math.abs(Le)>10?s.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*Le,restDelta:1,restSpeed:1}).from({pos:_}).to({pos:ze}).start():s.isRunning()||b||(b=!0,D("settle")));if(!xe&&!(!((Ne=d.Autoscroll)===null||Ne===void 0)&&Ne.isEnabled())&&(!Te.offsetX&&!Te.offsetY||Ge==="y"&&!v||Ge==="x"&&v))return void Q(y,{transition:"tween"});let We=H(ze);Math.abs(Le)>10&&We===y&&(We+=Le>0?m&&!v?1:-1:m&&!v?-1:1),Q(We,{transition:"tween",tween:{tension:160,friction:25,velocity:-1*Le}})}).init())}(),fe(),function(){if(h&&(h.addEventListener("click",Pe,{passive:!1}),document.addEventListener("mousemove",O),!r)){let _e=null;r=new ResizeObserver(Te=>{_e||(_e=requestAnimationFrame(()=>{(function(ke){if(!h)return;let Ne=ke[0].contentBoxSize[0].blockSize,Ge=ke[0].contentBoxSize[0].inlineSize;if(l===0)return A=Ne,R=Ge,l=1,oe(),j(),void D("ready");if(l!==1)return;const Be=P.length;fe();const qe=h.getBoundingClientRect();Ne=qe.height,Ge=qe.width,Be>1&&(v&&Math.abs(Ne-A)<.5||!v&&Math.abs(Ge-R)<.5)||(A=Ne,R=Ge,v&&!Ne||!v&&!Ge||h&&p&&(Be===P.length&&(i!=null&&i.isPointerDown()||N("dragFree")&&(s!=null&&s.isRunning()))||Q(y,{transition:!1})))})(Te),_e=null}))}),r.observe(h)}}())}}function O(ee){km=ee}function B(ee="*"){var ie;const le=[];for(const ye of w)(ee==="*"||ye.class&&ye.class.includes(ee)||ye.el&&(!((ie=ye.el)===null||ie===void 0)&&ie.classList.contains(ee)))&&le.push(ye);a=void 0,M=ee,E=[...le]}function V(){if(!s)return;const ee=H(s!=null&&s.isRunning()?s.getEndValues().pos:_);ee!==y&&(a=y,y=ee,L(),j(),Y(),D("change",y,a))}function j(){var ee;if(!h)return;Is(p,"is-draggable",!!i&&P.length>0);for(const ye of h.querySelectorAll("[data-carousel-index]"))ye.innerHTML=y+"";for(const ye of h.querySelectorAll("[data-carousel-page]"))ye.innerHTML=y+1+"";for(const ye of h.querySelectorAll("[data-carousel-pages]"))ye.innerHTML=P.length+"";let ie=!1;const le=(ee=P[y])===null||ee===void 0?void 0:ee.slides[0];le&&(le.downloadSrc||le.type==="image"&&le.src)&&(ie=!0);for(const ye of h.querySelectorAll("[data-carousel-download]"))ye.toggleAttribute("aria-disabled",!ie)}function Y(ee){var ie;if(!h)return;ee||(ee=(ie=P[y])===null||ie===void 0?void 0:ie.slides[0]);const le=ee.el;if(le)for(const ye of le.querySelectorAll("[data-slide-index]"))ye.innerHTML=ee.index+1+""}function H(ee){if(!P.length||!s)return 0;const ie=G();let le=ee;f?le-=Math.floor((ee-P[0].pos)/ie)*ie:le=yt(P[0].pos,ee,P[P.length-1].pos);const ye=new Map;let Se=0;for(const Te of P){const ke=Math.abs(Te.pos-le),Ne=Math.abs(Te.pos-le-ie),Ge=Math.abs(Te.pos-le+ie),Be=Math.min(ke,Ne,Ge);ye.set(Se,Be),Se++}const _e=ye.size>0?[...ye.entries()].reduce((Te,ke)=>ke[1]<Te[1]?ke:Te):[y,0];return parseInt(_e[0])}function q(){return p&&parseFloat(getComputedStyle(p).getPropertyValue("--f-carousel-gap"))||0}function K(){return p&&p.getBoundingClientRect()[g]||0}function G(ee=!0){const ie=q();return E.reduce((le,ye)=>le+ye.dim,0)+(E.length-(f&&ee?0:1))*ie}function te(ee,ie){const le=[];for(const ye of Array.isArray(ee)?ee:[ee]){const Se=ue(Object.assign(Object.assign({},ye),{isVirtual:!0}));le.push(Se)}w.splice(ie===void 0?w.length:ie,0,...le),F();for(const ye of le)se(ye);return B(M),le}function ue(ee){return(mn(ee)||ee instanceof HTMLElement)&&(ee={html:ee}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},ee)}function se(ee){if(!ee)return;let ie=ee.el;ie||(ie=document.createElement("div"),ee.el=ie);const le=ee.html?ee.html instanceof HTMLElement?ee.html:qs(ee.html):void 0;le&&(At(le,"f-html"),ee.htmlEl=le,At(ie,"has-html"),ie.append(le),D("contentReady",ee))}function X(ee){if(!p||!ee)return;let ie=ee.el;if(ie){if(ie.setAttribute("index",ee.index+""),ie.parentElement!==p){let le;At(ie,u.classes.slide),At(ie,ee.class),L(ee);for(const ye of w)if(ye.index>ee.index){le=ye.el;break}p.insertBefore(ie,le&&p.contains(le)?le:null),j(),Y(ee),D("attachSlideEl",ee)}return ie}}function ne(ee){const ie=ee==null?void 0:ee.el;ie&&(ie.remove(),ve(ie),D("detachSlideEl",ee))}function F(){for(let ee=0;ee<w.length;ee++){const ie=w[ee],le=ie.el;le&&(ie.index!==ee&&ve(le),le.setAttribute("index",`${ee}`)),ie.index=ee}}function fe(){var ee,ie,le,ye;if(!h||!p)return;m=N("rtl"),v=N("vertical"),g=v?"height":"width";const Se=N("classes");Is(h,Se.isLTR,!m),Is(h,Se.isRTL,m),Is(h,Se.isHorizontal,!v),Is(h,Se.isVertical,v),Is(h,Se.hasAdaptiveHeight,N("adaptiveHeight"));const _e=function(){let Te=0;if(p){let ke=document.createElement("div");At(ke,u.classes.slide),p.appendChild(ke),Te=ke.getBoundingClientRect()[g],ke.remove(),ke=void 0}return Te}();for(const Te of E){const ke=Te.el;let Ne=0;if(!Te.isVirtual&&ke&&sa(ke)){let Ge=!1;ke.parentElement&&ke.parentElement===p||(p.appendChild(ke),Ge=!0),Ne=ke.getBoundingClientRect()[g],Ge&&((ee=ke.parentElement)===null||ee===void 0||ee.removeChild(ke))}else Ne=_e;Te.dim=Ne}if(function(){if(!h)return;F();const Te=K(),ke=q(),Ne=G(!1);let Ge=N("slidesPerPage");Ge=Ge==="auto"?1/0:parseFloat(Ge+""),P=[];let Be=0,qe=0;for(const We of E)(!P.length||Be+We.dim-Te>.05||qe>=Ge)&&(P.push({index:P.length,slides:[],dim:0,offset:0,pos:0}),Be=0,qe=0),P[P.length-1].slides.push(We),Be+=We.dim+ke,qe++;const ge=N("center"),Ue=N("fill"),xe=N("infinite");let Le=0;for(const We of P){We.dim=(We.slides.length-1)*ke;for(const tt of We.slides)We.dim+=tt.dim;We.offset=Le,We.pos=Le,ge!==!1&&(We.pos-=.5*(Te-We.dim)),Ue&&!xe&&Ne>Te&&(We.pos=yt(0,We.pos,Ne-Te)),Le+=We.dim+ke}const ze=[];let He;for(const We of P){const tt=Object.assign({},We);He&&tt.pos===He.pos?(He.dim+=tt.dim,He.slides=[...He.slides,...tt.slides]):(He=tt,tt.index=ze.length,ze.push(tt))}P=ze}(),f=N("infinite")&&P.length>1&&G()-(K()+(((ie=E[0])===null||ie===void 0?void 0:ie.dim)||0))>-.5,x=((le=P[0])===null||le===void 0?void 0:le.pos)||0,S=((ye=P[P.length-1])===null||ye===void 0?void 0:ye.pos)||0,l===0)(function(){var Te;a=void 0,y=N("initialPage");const ke=N("initialSlide")||void 0;ke!==void 0&&(y=de.getPageIndex(ke)||0),y=yt(0,y,P.length-1),_=((Te=P[y])===null||Te===void 0?void 0:Te.pos)||0,T=_})();else{const Te=s!=null&&s.isRunning()?s.getEndValues().pos:_;(Te<x||Te>S)&&(y=yt(0,y,P.length-1))}D("refresh")}function ve(ee){if(!ee||!sa(ee))return;const ie=parseInt(ee.getAttribute("index")||"-1");let le="";for(const Se of Array.from(ee.classList)){const _e=Se.match(/^f-(\w+)(Out|In)$/);_e&&_e[1]&&(le=_e[1]+"")}if(!ee||!le)return;const ye=[`f-${le}Out`,`f-${le}In`,"to-prev","to-next","from-prev","from-next"];ee.removeEventListener("animationend",Me),ws(ee,ye.join(" ")),C.delete(ie)}function pe(){if(!p)return;const ee=C.size;for(const ie of E)ve(ie.el);C.clear(),ee&&oe()}function Me(ee){ee.animationName.substring(0,2)==="f-"&&(ve(ee.target),C.size||(ws(h,"in-transition"),!b&&Math.abs(de.getPosition(!0)-T)<.5&&(b=!0,D("settle"))),oe())}function Pe(ee){if(ee.defaultPrevented)return;const ie=ee.composedPath()[0];if(ie.closest("[data-carousel-go-prev]"))return zr(ee),void de.prev();if(ie.closest("[data-carousel-go-next]"))return zr(ee),void de.next();const le=ie.closest("[data-carousel-go-to]");if(le)return zr(ee),void de.goTo(parseFloat(le.dataset.carouselGoTo||"")||0);if(ie.closest("[data-carousel-download]")){zr(ee);const ye=P[y].slides[0];if(ye.downloadSrc||ye.type==="image"&&ye.src){const Se=ye.downloadFilename,_e=document.createElement("a");_e.href=ye.downloadSrc||ye.src||"",_e.target="_blank",Se&&(_e.download=Se),_e.click()}}else D("click",ee)}function Ce(ee){var ie;const le=ee.el;le&&((ie=le.querySelector(".f-spinner"))===null||ie===void 0||ie.remove(),ws(le,"is-loading"))}function z(ee){var ie;const le=ee.el;le&&((ie=le.querySelector(".f-html.is-error"))===null||ie===void 0||ie.remove(),ws(le,"has-error"))}function L(ee){var ie;ee||(ee=(ie=P[y])===null||ie===void 0?void 0:ie.slides[0]);const le=ee==null?void 0:ee.el;if(!le)return;let ye=N("formatCaption",ee);ye===void 0&&(ye=ee.caption),ye=ye||"";const Se=N("captionEl");if(Se&&Se instanceof HTMLElement){if(ee.index!==y)return;if(mn(ye)&&(Se.innerHTML=U(ye+"")),ye instanceof HTMLElement){if(ye.parentElement===Se)return;Se.innerHTML="",ye.parentElement&&(ye=ye.cloneNode(!0)),Se.append(ye)}return}if(!ye)return;let _e=ee.captionEl||le.querySelector(".f-caption");!_e&&ye instanceof HTMLElement&&ye.classList.contains("f-caption")&&(_e=ye),_e||(_e=document.createElement("div"),At(_e,"f-caption"),mn(ye)?_e.innerHTML=U(ye+""):ye instanceof HTMLElement&&(ye.parentElement&&(ye=ye.cloneNode(!0)),_e.append(ye)));const Te=`f-caption-${Nm}_${ee.index}`;_e.setAttribute("id",Te),_e.dataset.selectable="true",At(le,"has-caption"),le.setAttribute("aria-labelledby",Te),ee.captionEl=_e,le.insertAdjacentElement("beforeend",_e)}function Q(ee,ie){let{transition:le,tween:ye}=Object.assign({transition:u.transition,tween:u.tween},ie||{});if(!h||!s)return;const Se=P.length;if(!Se||function(Te,ke){var Ne,Ge,Be;if(!(h&&s&&ke&&mn(ke)&&ke!=="tween"))return!1;const qe=P.length;let ge=Te>y?1:-1;Te=f?(Te%qe+qe)%qe:yt(0,Te,qe-1),m&&(ge*=-1);const Ue=(Ne=P[y])===null||Ne===void 0?void 0:Ne.slides[0],xe=Ue==null?void 0:Ue.index,Le=(Ge=P[Te])===null||Ge===void 0?void 0:Ge.slides[0],ze=Le==null?void 0:Le.index,He=(Be=P[Te])===null||Be===void 0?void 0:Be.pos;if(ze===void 0||xe===void 0||xe===ze||_===He||Math.abs(K()-((Le==null?void 0:Le.dim)||0))>1)return!1;b=!1,s.pause(),pe(),At(h,"in-transition"),_=T=He,V();const We=X(Ue),tt=X(Le);return We&&(C.add(xe),We.style.transform="",We.addEventListener("animationend",Me),ws(We,u.classes.isSelected),At(We,`f-${ke}Out to-${ge>0?"next":"prev"}`)),tt&&(C.add(ze),tt.style.transform="",tt.addEventListener("animationend",Me),At(tt,u.classes.isSelected),At(tt,`f-${ke}In from-${ge>0?"prev":"next"}`)),oe(),!0}(ee,le))return;ee=f?(ee%Se+Se)%Se:yt(0,ee,Se-1),T=P[ee||0].pos||0;const _e=s.isRunning()?s.getEndValues().pos:_;if(Math.abs(T-_e)<1)return _=T,y!==ee&&(L(),j(),Y(),a=y,y=ee,D("change",y,a)),oe(),void(b||(b=!0,D("settle")));if(s.pause(),pe(),f){const Te=G(),ke=Math.floor((_e-P[0].pos)/Te),Ne=T+ke*Te;T=[Ne+Te,Ne,Ne-Te].reduce(function(Ge,Be){return Math.abs(Be-_e)<Math.abs(Ge-_e)?Be:Ge})}le!==!1&&Nn(ye)?s.spring(ye).from({pos:_}).to({pos:T}).start():(_=T,V(),oe(),b||(b=!0,D("settle")))}function oe(){var ee;if(!h||!p)return;const ie=P[y],le=function(Te){const ke=q(),Ne=G(),Ge=K(),Be=[];if(!Ne||!Ge)return Be;Te=Te===void 0?_:Te,f&&(Te-=Math.floor(Te/Ne)*Ne);let qe=0,ge=0,Ue=0;do{for(let xe of E)Be.indexOf(xe)>-1||(xe.offset=ge,xe.pos=ge-Te,xe.offset+xe.dim>Te+.51&&xe.offset<Te+Ge-.51&&Be.push(xe),ge+=xe.dim+ke,qe=Te+Ge-((xe.pos||0)+xe.dim+ke));if(Ue++,Ue>100||!f)break}while(qe>0&&Ne>0);return Be}(),ye=new Set,Se=new Set;let _e;for(const Te of le){let ke=X(Te);if(!ke)continue;ye.add(ke);const Ne=((ee=ie==null?void 0:ie.slides)===null||ee===void 0?void 0:ee.indexOf(Te))>-1;Ne&&Se.add(ke);const Ge=Te.pos?Math.round(1e4*Te.pos)/1e4:0,Be=v?0:m?-1*Ge:Ge,qe=v?Ge:0,ge=oh(Be,0,Te.dim,0,100),Ue=oh(qe,0,Te.dim,0,100),xe=u.setTransform||void 0;if(xe instanceof Function?xe(de,Te,{x:Be,y:qe,xPercent:ge,yPercent:Ue}):ke.style.transform=Be||qe?`translate3d(${ge}%, ${Ue}%,0)`:"",N("adaptiveHeight")&&Ne){const Le=(ke.firstElementChild||ke).getBoundingClientRect().height;_e=_e==null?Le:Math.max(_e,Le)}}[...ad(p,`.${u.classes.slide}`)].forEach(Te=>{const ke=parseInt(Te.getAttribute("index")||"-1"),Ne=w[ke];Ne||Te.remove(),Is(Te,u.classes.isSelected,Se.has(Te)),C.has(ke)||ye.has(Te)||ne(Ne)}),p&&_e&&(p.style.height=`${_e}px`),D("render",le)}function he(){var ee;h==null||h.removeEventListener("click",Pe),pe(),document.removeEventListener("mousemove",O),r==null||r.disconnect(),r=void 0;for(const ie of Object.values(d))ie==null||ie.destroy();d={};for(const ie of w)ie.el&&sa(ie.el)&&(ie.state=void 0,Ce(ie),z(ie),ne(ie),ie.isVirtual?((ee=ie.el)===null||ee===void 0||ee.remove(),ie.el=void 0):(ie.el.style.transform="",p==null||p.appendChild(ie.el)));i==null||i.destroy(),i=void 0,s==null||s.destroy(),s=void 0;for(const ie of Object.values(u.classes||{}))ws(h,ie);ws(p,"is-draggable")}const de={add:function(ee,ie){const le=te(ee,ie);for(const ye of le)D("addSlide",ye);return B(M),fe(),oe(),de},canGoPrev:function(){return f||y>0},canGoNext:function(){return f||y<P.length-1},destroy:function(){return D("destroy"),window.removeEventListener("resize",W),he(),k.clear(),h=null,P=[],w=[],u=Object.assign({},ta),d={},E=[],o="",M="*",l=2,de},emit:D,filter:function(ee="*"){return B(ee),fe(),oe(),D("filter",ee),de},getContainer:function(){return h},getGapDim:q,getGestures:function(){return i},getLastMouseMove:function(){return km},getOptions:function(){return u},getPage:function(){return P[y]},getPageIndex:function(ee){if(ee!==void 0){for(const ie of P||[])for(const le of ie.slides)if(le.index===ee)return ie.index;return-1}return y},getPageProgress:function(ee,ie){ee===void 0&&(ee=y);const le=P[ee];if(!le)return ee>y?-1:1;let ye=le.pos;const Se=q(),_e=de.getPosition(),Te=G();if(f&&ie!==!0){const ke=ye+Te*Math.floor((_e-P[0].pos)/Te);ye=[ke+Te,ke,ke-Te].reduce(function(Ne,Ge){return Math.abs(Ge-_e)<Math.abs(Ne-_e)?Ge:Ne})}return(_e-ye)/(le.dim+Se)},getPageVisibility:function(ee){ee===void 0&&(ee=y);const ie=P[ee];if(!ie)return ee>y?-1:1;const le=de.getPosition(),ye=K();let Se=ie.pos;if(f){const _e=de.getPosition(),Te=G(),ke=Se+Math.floor((_e-P[0].pos)/Te)*Te;Se=[ke+Te,ke,ke-Te].reduce(function(Ne,Ge){return Math.abs(Ge-_e)<Math.abs(Ne-_e)?Ge:Ne})}return Se>le&&Se+ie.dim<le+ye?1:Se<le?(Se+ie.dim-le)/ie.dim:Se+ie.dim>le+ye?(le+ye-Se)/ie.dim:0},getPages:function(){return P},getPlugins:function(){return d},getPosition:function(ee){var ie;let le=_;if(f&&ee!==!0){const ye=G();le-=Math.floor((_-((ie=P[0])===null||ie===void 0?void 0:ie.pos)||0)/ye)*ye}return le},getSlides:function(){return w},getState:function(){return l},getTotalSlideDim:G,getTween:function(){return s},getViewport:function(){return p},getViewportDim:K,goTo:Q,hasNavigated:function(){return a!==void 0},hideError:z,hideLoading:Ce,init:function(){if(!t||!sa(t))throw new Error("No Element found");return l!==0&&(he(),l=0),h=t,c=e,window.removeEventListener("resize",W),c.breakpoints&&window.addEventListener("resize",W),W(),de},isInfinite:function(){return f},isInTransition:function(){return C.size>0},isRTL:function(){return m},isSettled:function(){return b},localize:function(ee,ie=[]){return U(ee,ie)},next:function(ee={}){return Q(y+1,ee),de},off:function(ee,ie){for(const le of ee instanceof Array?ee:[ee])k.has(le)&&k.set(le,k.get(le).filter(ye=>ye!==ie));return de},on:function(ee,ie){for(const le of ee instanceof Array?ee:[ee])k.set(le,[...k.get(le)||[],ie]);return de},prev:function(ee={}){return Q(y-1,ee),de},remove:function(ee){ee===void 0&&(ee=w.length-1);const ie=w[ee];return ie&&(D("removeSlide",ie),ie.el&&(ve(ie.el),ie.el.remove(),ie.el=void 0),w.splice(ee,1),B(M),fe(),oe()),de},setPosition:function(ee){_=ee,V(),oe()},showError:function(ee,ie){Ce(ee),z(ee);const le=ee.el;if(le){const ye=document.createElement("div");At(ye,"f-html"),At(ye,"is-error"),ye.innerHTML=U(ie||"<p>{{ERROR}}</p>"),ee.htmlEl=ye,At(le,"has-html"),At(le,"has-error"),le.insertAdjacentElement("afterbegin",ye),D("contentReady",ee)}return de},showLoading:function(ee){const ie=ee.el,le=ie==null?void 0:ie.querySelector(".f-spinner");if(!ie||le)return de;const ye=N("spinnerTpl"),Se=qs(ye);return Se&&(At(Se,"f-spinner"),At(ie,"is-loading"),ie.insertAdjacentElement("beforeend",Se)),de},version:"6.0.7"};return de};Bc.l10n={en_EN:Uf},Bc.getDefaults=()=>ta;/*! License details at fancyapps.com/license */const Fm=(t=!0,e="--f-scrollbar-compensate",n="--f-body-margin",i="hide-scrollbar")=>{const s=document,r=s.body,a=s.documentElement;if(t){if(r.classList.contains(i))return;let o=window.innerWidth-a.getBoundingClientRect().width;o<0&&(o=0),a.style.setProperty(e,`${o}px`);const l=parseFloat(window.getComputedStyle(r).marginRight);l&&r.style.setProperty(n,`${l}px`),r.classList.add(i)}else r.classList.remove(i),r.style.setProperty(n,""),s.documentElement.style.setProperty(e,"")};/*! License details at fancyapps.com/license */function k0(){return!(typeof window>"u"||!window.document||!window.document.createElement)}/*! License details at fancyapps.com/license */const zs=function(t="",e="",n=""){return t.split(e).join(n)};/*! License details at fancyapps.com/license */const Um={tpl:t=>`<img class="f-panzoom__content" 
    ${t.srcset?'data-lazy-srcset="{{srcset}}"':""} 
    ${t.sizes?'data-lazy-sizes="{{sizes}}"':""} 
    data-lazy-src="{{src}}" alt="{{alt}}" />`},RM=()=>{let t;function e(u,d){const h=t==null?void 0:t.getOptions().Zoomable;let p=(Nn(h)?Object.assign(Object.assign({},Um),h):Um)[u];return p&&typeof p=="function"&&d?p(d):p}function n(){t&&(t.on("addSlide",r),t.on("removeSlide",a),t.on("attachSlideEl",o),t.on("click",s),t.on("change",i))}function i(){l()}function s(u,d){const h=d.target;h&&!d.defaultPrevented&&h.dataset.panzoomAction&&c(h.dataset.panzoomAction)}function r(u,d){if(!t)return;const h=d.el;if(!h)return;const p=d.src||d.lazySrc||"",f=d.srcset||d.lazySrcset||"",m=d.sizes||d.lazySizes||"";if(p&&mn(p)&&!d.html&&(!d.type||d.type==="image")){let b=e("tpl",d);b=zs(b,"{{src}}",p+""),b=zs(b,"{{srcset}}",f+""),b=zs(b,"{{sizes}}",m+""),b=zs(b,"{{alt}}",`${d.alt||d.caption||`Image #${d.index}`}`),h.insertAdjacentHTML("afterbegin",b)}if(!h.querySelector(".f-panzoom__content"))return;const v=d.width&&d.width!=="auto"?parseFloat(d.width+""):"auto",g=d.height&&d.height!=="auto"?parseFloat(d.height+""):"auto",_=ah(h,Object.assign({width:v,height:g,event:()=>t==null?void 0:t.getLastMouseMove(),classes:{container:"f-zoomable"}},e("Panzoom")));_.on("*",(b,y,...T)=>{t&&(y==="loading"&&(d.state=0),y==="loaded"&&(d.state=1),y==="error"&&(d.state=2,t==null||t.showError(d,"{{IMAGE_ERROR}}")),t.emit(`panzoom:${y}`,d,...T),y==="ready"&&t.emit("contentReady",d),d.index===t.getPageIndex()&&l())}),d.panzoomRef=_}function a(u,d){d.panzoomRef&&(d.panzoomRef.destroy(),d.panzoomRef=void 0)}function o(u,d){const h=d.panzoomRef;if(h)switch(h.getState()){case 0:h.init();break;case 3:h.execute(Qe.Reset,{velocity:0})}}function l(){var u;const d=t==null?void 0:t.getContainer();if(!d)return;const h=(u=t==null?void 0:t.getPage())===null||u===void 0?void 0:u.slides[0].panzoomRef,p=(h==null?void 0:h.canZoomIn())||!1,f=(h==null?void 0:h.canZoomOut())||!1,m=(h==null?void 0:h.isFullsize())||!1,v=!h||(h==null?void 0:h.getState())!==3;for(const g of(d==null?void 0:d.querySelectorAll("[data-panzoom-action]"))||[]){const _=g.dataset.panzoomAction;let b=!1;if(v)b=!0;else switch(_){case Qe.ZoomIn:p||(b=!0);break;case Qe.ZoomOut:f||(b=!0);break;case Qe.ToggleFull:p||f||(b=!0);const y=g.querySelector("g");y&&(y.style.display=m?"none":"");break;case Qe.ToggleCover:case Qe.ToggleMax:p||f||(b=!0)}b?(g.setAttribute("aria-disabled",""),g.setAttribute("tabindex","-1")):(g.removeAttribute("aria-disabled"),g.removeAttribute("tabindex"))}}function c(u,...d){var h;(h=t==null?void 0:t.getPage().slides[0].panzoomRef)===null||h===void 0||h.execute(u,...d)}return{init:function(u){t=u,t.getOptions().Zoomable!==!1&&t.on("initPlugins",n)},destroy:function(){if(t){t.off("addSlide",r),t.off("removeSlide",a),t.off("attachSlideEl",o),t.off("change",i);for(const u of t.getSlides())a(0,u)}t=void 0},execute:c}};/*! License details at fancyapps.com/license */const zm={syncOnChange:!1,syncOnClick:!0,syncOnHover:!1},N0=()=>{let t,e;function n(){const p=t==null?void 0:t.getOptions().Sync;return Nn(p)?Object.assign(Object.assign({},zm),p):zm}function i(p){var f,m,v;t&&p&&(e=p,t.getOptions().classes=Object.assign(Object.assign({},t.getOptions().classes),{isSelected:""}),t.getOptions().initialSlide=((m=(f=e.getPage())===null||f===void 0?void 0:f.slides[0])===null||m===void 0?void 0:m.index)||0,n().syncOnChange&&t.on("change",a),n().syncOnClick&&t.on("click",l),n().syncOnHover&&((v=t.getViewport())===null||v===void 0||v.addEventListener("mouseover",c)),function(){!t||!e||(t.on("ready",r),t.on("refresh",u),e.on("change",o),e.on("filter",d))}())}function s(){const p=n().target;t&&p&&i(p)}function r(){h()}function a(){var p;if(t&&e){const f=((p=t.getPage())===null||p===void 0?void 0:p.slides)||[],m=e.getPageIndex(f[0].index||0);m>-1&&e.goTo(m,t.hasNavigated()?void 0:{tween:!1,transition:!1}),h()}}function o(){var p;if(t&&e){const f=t.getPageIndex(((p=e.getPage())===null||p===void 0?void 0:p.slides[0].index)||0);f>-1&&t.goTo(f,e.hasNavigated()?void 0:{tween:!1,transition:!1}),h()}}function l(p,f){var m;if(!t||!e||!((m=t.getTween())===null||m===void 0)&&m.isRunning())return;const v=t==null?void 0:t.getOptions().classes.slide;if(!v)return;const g=v?f.target.closest(`.${v}`):null;if(g){const _=parseInt(g.getAttribute("index")||"")||0,b=e.getPageIndex(_);e.goTo(b)}}function c(p){t&&l(0,p)}function u(){var p;if(t&&e){const f=t.getPageIndex(((p=e.getPage())===null||p===void 0?void 0:p.slides[0].index)||0);f>-1&&t.goTo(f,{tween:!1,transition:!1}),h()}}function d(p,f){t&&e&&(t.filter(f),o())}function h(){var p,f,m;if(!e)return;const v=((f=(p=e.getPage())===null||p===void 0?void 0:p.slides[0])===null||f===void 0?void 0:f.index)||0;for(const g of(t==null?void 0:t.getSlides())||[])(m=g.el)===null||m===void 0||m.classList.toggle("is-selected",g.index===v)}return{init:function(p){t=p,t.on("initSlides",s)},destroy:function(){var p;t==null||t.off("ready",r),t==null||t.off("refresh",u),t==null||t.off("change",a),t==null||t.off("click",l),(p=t==null?void 0:t.getViewport())===null||p===void 0||p.removeEventListener("mouseover",c),e==null||e.off("change",o),e==null||e.off("filter",d),e=void 0,t==null||t.off("initSlides",s),t=void 0},getTarget:function(){return e}}};/*! License details at fancyapps.com/license */const Bm={showLoading:!0,preload:1},Bl="is-lazyloading",Hm="is-lazyloaded",F0=()=>{let t;function e(){const r=t==null?void 0:t.getOptions().Lazyload;return Nn(r)?Object.assign(Object.assign({},Bm),r):Bm}function n(r){const a=r.el;if(!a)return;const o="[data-lazy-src],[data-lazy-srcset],[data-lazy-bg]",l=Array.from(a.querySelectorAll(o));a.matches(o)&&l.push(a);for(const c of l){const u=c.dataset.lazySrc,d=c.dataset.lazySrcset,h=c.dataset.lazySizes,p=c.dataset.lazyBg,f=(c instanceof HTMLImageElement||c instanceof HTMLSourceElement)&&(u||d),m=c instanceof HTMLElement&&p;if(!f&&!m)continue;const v=u||d||p;v&&(f&&v?(e().showLoading&&(t==null||t.showLoading(r)),c.addEventListener("load",()=>{t==null||t.hideLoading(r),c instanceof HTMLImageElement?c.decode().then(()=>{c.classList.remove(Bl),c.classList.add(Hm)}):(c.classList.remove(Bl),c.classList.add(Hm)),t==null||t.emit("lazyLoad:loaded",r,c,v)}),c.addEventListener("error",()=>{t==null||t.hideLoading(r),c.classList.remove(Bl),c.classList.add("has-lazyerror"),t==null||t.emit("lazyLoad:error",r,c,v)}),c.classList.add("f-lazyload"),c.classList.add(Bl),t==null||t.emit("lazyLoad:load",r,c,v),u&&(c.src=u),d&&(c.srcset=d),h&&(c.sizes=h)):m&&(document.body.contains(c)||(document.createElement("img").src=p),c.style.backgroundImage=`url('${p}')`),delete c.dataset.lazySrc,delete c.dataset.lazySrcset,delete c.dataset.lazySizes)}}function i(){var r;if(!t)return;const a=e().preload,o=t.getPages(),l=o.length,c=t.getPageIndex();for(let u=c-a;u<=c+a;u++){const d=(u%l+l)%l;for(const h of((r=o[d])===null||r===void 0?void 0:r.slides)||[])n(h)}}function s(r,a){n(a)}return{init:function(r){t=r,t.on(["ready","change"],i),t.on("attachSlideEl",s)},destroy:function(){t==null||t.off(["ready","change"],i),t==null||t.off("attachSlideEl",s),t=void 0}}};/*! License details at fancyapps.com/license */const Vm={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"></path></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"></path></svg>'},IM=()=>{let t,e,n;function i(a){if(!t)return;const o=`<button data-carousel-go-${a} tabindex="0" class="f-button is-arrow is-${a}" title="{{${a.toUpperCase()}}}">`+function(){const l=t==null?void 0:t.getOptions().Arrows;return Nn(l)?Object.assign(Object.assign({},Vm),l):Vm}()[`${a}Tpl`]+"</button";return qs(t.localize(o))||void 0}function s(){var a;e==null||e.remove(),e=void 0,n==null||n.remove(),n=void 0,(a=t==null?void 0:t.getContainer())===null||a===void 0||a.classList.remove("has-arrows")}function r(){t&&t.getOptions().Arrows!==!1&&t.getPages().length>1?(function(){if(!t)return;const a=t.getViewport();a&&(e||(e=i("prev"),e&&a.insertAdjacentElement("beforebegin",e)),n||(n=i("next"),n&&a.insertAdjacentElement("afterend",n)),Is(t.getContainer(),"has-arrows",!(!e&&!n)))}(),t&&(e==null||e.toggleAttribute("aria-disabled",!t.canGoPrev()),n==null||n.toggleAttribute("aria-disabled",!t.canGoNext()))):s()}return{init:function(a){t=a.on(["change","refresh"],r)},destroy:function(){s(),t==null||t.off(["change","refresh"],r),t=void 0}}};/*! License details at fancyapps.com/license */const U0={moveLeft:{tpl:'<button data-panzoom-action="moveLeft" class="f-button" title="{{MOVE_LEFT}}"><svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg></button>'},moveRight:{tpl:'<button data-panzoom-action="moveRight" class="f-button" title="{{MOVE_RIGHT}}"><svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg></button>'},moveUp:{tpl:'<button data-panzoom-action="moveUp" class="f-button" title="{{MOVE_UP}}"><svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg></button>'},moveDown:{tpl:'<button data-panzoom-action="moveDown" class="f-button" title="{{MOVE_DOWN}}"><svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg></button>'},zoomIn:{tpl:'<button data-panzoom-action="zoomIn" class="f-button" title="{{ZOOM_IN}}"><svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg></button>'},zoomOut:{tpl:'<button data-panzoom-action="zoomOut" class="f-button" title="{{ZOOM_OUT}}"><svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg></button>'},toggle1to1:{tpl:'<button data-panzoom-action="toggleFull" class="f-button" title="{{TOGGLE_FULL}}"><svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg></button>'},toggleFull:{tpl:'<button data-panzoom-action="toggleFull" class="f-button" title="{{TOGGLE_FULL}}"><svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg></button>'},rotateCCW:{tpl:'<button data-panzoom-action="rotateCCW" class="f-button" title="{{ROTATE_CCW}}"><svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg></button>'},rotateCW:{tpl:'<button data-panzoom-action="rotateCW" class="f-button" title="{{ROTATE_CW}}"><svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg></button>'},flipX:{tpl:'<button data-panzoom-action="flipX" class="f-button" title="{{FLIP_X}}"><svg><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg></button>'},flipY:{tpl:'<button data-panzoom-action="flipY" class="f-button" title="{{FLIP_Y}}"><svg><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg></button>'},reset:{tpl:'<button data-panzoom-action="reset" class="f-button" title="{{RESET}}"><svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg></button>'}};/*! License details at fancyapps.com/license */var $m;(function(t){t.Left="left",t.middle="middle",t.right="right"})($m||($m={}));const Gm=Object.assign({counter:{tpl:'<div class="f-carousel__counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'}},U0),Wm={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto",items:{}},z0=()=>{let t,e;function n(){const s=t==null?void 0:t.getOptions().Toolbar;return Nn(s)?Object.assign(Object.assign({},Wm),s):Wm}function i(){var s,r,a;if(!(t!=null&&t.getOptions().Toolbar)||!t||e)return;let o=n().enabled;if(!o)return;let l=n().absolute;const c=t.getSlides().length>1;let u=!1,d=!1;for(const g of t.getSlides())g.panzoomRef&&(u=!0),(g.downloadSrc||g.type==="image"&&g.src)&&(d=!0);let h=((s=t.getPlugins().Thumbs)===null||s===void 0?void 0:s.isEnabled())||!1,p=c&&t.getPlugins().Autoplay||!1,f=t.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if(o==="auto"&&(o=u),!o)return;e=document.createElement("div"),e.classList.add("f-carousel__toolbar");const m=n().display,v=ui({},Gm,n().items);for(const g of["left","middle","right"]){const _=m[g]||[],b=document.createElement("div");b.classList.add("f-carousel__toolbar__column"),b.classList.add(`is-${g}`);for(const y of _){let T;if(mn(y)){if(y==="counter"&&!c||y==="autoplay"&&!p||U0[y]&&!u||y==="fullscreen"&&!f||y==="thumbs"&&!h||y==="download"&&!d)continue;T=v[y]}if(typeof y=="object"&&(T=y),T&&T.tpl){let x=t.localize(T.tpl);x=x.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">');const S=qs(x);S&&(typeof T.click=="function"&&t&&S.addEventListener("click",M=>{M.preventDefault(),M.stopPropagation(),typeof T.click=="function"&&t&&T.click(t,M)}),b.append(S))}}e.append(b)}e.childElementCount&&(l===!0&&e.classList.add("is-absolute"),(r=t.getContainer())===null||r===void 0||r.classList.add("has-toolbar"),(a=t.getViewport())===null||a===void 0||a.insertAdjacentElement("beforebegin",e))}return{init:function(s){t=s,t.on("initSlides",i)},destroy:function(){var s;t==null||t.off("initSlides",i),(s=t==null?void 0:t.getContainer())===null||s===void 0||s.classList.remove("has-toolbar"),e==null||e.remove(),e=void 0},add:function(s,r){Gm[s]=r},isEnabled:function(){return!!e}}};/*! License details at fancyapps.com/license */const jm={autoStart:!0,pauseOnHover:!0,showProgressbar:!0,timeout:2e3},DM=()=>{let t,e,n=!1,i=!1,s=!1,r=null;function a(x){const S=t==null?void 0:t.getOptions().Autoplay;let M=(Nn(S)?Object.assign(Object.assign({},jm),S):jm)[x];return M&&typeof M=="function"&&t?M(t):M}function o(){var x;const S=((x=t==null?void 0:t.getPage())===null||x===void 0?void 0:x.slides)||[];for(const M of S)if(M.state===0)return!0;return!1}function l(){clearTimeout(e),e=void 0}function c(){if(e||s||o()||!(t!=null&&t.isSettled()))return;(function(){var S,M,w,E;if(!t||(h(),!a("showProgressbar")))return;let C=a("progressbarParentEl");if(!C&&(!((S=t.getPlugins().Toolbar)===null||S===void 0)&&S.isEnabled())&&(C=t.getContainer()),!C&&((M=t.getPlugins().Toolbar)===null||M===void 0?void 0:M.isEnabled())!==!0){const A=((w=t.getPages()[0])===null||w===void 0?void 0:w.slides)||[],R=((E=t.getPage())===null||E===void 0?void 0:E.slides)||[];A.length===1&&R.length===1&&(C=R[0].el)}if(C||(C=t.getViewport()),!C)return;r=document.createElement("div"),r.classList.add("f-progressbar"),C.prepend(r);const P=a("timeout")||1e3;r.style.animationDuration=`${P}ms`})();const x=a("timeout");e=setTimeout(()=>{t&&n&&!i&&(t.isInfinite()||t.getPageIndex()!==t.getPages().length-1?t.next():t.goTo(0))},x)}function u(){var x,S;if(!t||t.getPages().length<2||t.getOptions().Autoplay===!1||n)return;n=!0,t.emit("autoplay:start",a("timeout")),(x=t.getContainer())===null||x===void 0||x.classList.add("has-autoplay"),(S=t.getTween())===null||S===void 0||S.on("start",_);const M=t==null?void 0:t.getContainer();M&&a("pauseOnHover")&&matchMedia("(hover: hover)").matches&&(M.addEventListener("mouseenter",b,!1),M.addEventListener("mouseleave",y,!1)),t.on("change",v),t.on("settle",g),t.on("contentReady",f),t.on("panzoom:animationStart",d),t.isSettled()&&c()}function d(){var x,S;if(l(),h(),n&&t){t.emit("autoplay:end"),(x=t.getContainer())===null||x===void 0||x.classList.remove("has-autoplay"),(S=t.getTween())===null||S===void 0||S.off("start",_);const M=t==null?void 0:t.getContainer();M&&(M.removeEventListener("mouseenter",b,!1),M.removeEventListener("mouseleave",y,!1))}t&&(t.off("change",v),t.off("settle",g),t.off("contentReady",f),t.off("panzoom:animationStart",d)),n=!1,i=!1}function h(){r&&(r.remove(),r=null)}function p(){t&&t.getPages().length>1&&a("autoStart")&&u()}function f(x){t&&t.getPageIndex(x.index)===t.getPageIndex()&&(!n||s||o()||c())}function m(x,S){const M=S.target;M&&!S.defaultPrevented&&M.dataset.autoplayAction==="toggle"&&T.toggle()}function v(){!t||!(t!=null&&t.isInfinite())&&t.getPageIndex()===t.getPages().length-1?d():(h(),l())}function g(){!n||s||i||c()}function _(){l(),h()}function b(){s=!0,n&&(h(),l())}function y(){s=!1,n&&!i&&(t!=null&&t.isSettled())&&c()}const T={init:function(x){t=x,t.on("ready",p),t.on("click",m)},destroy:function(){d(),t==null||t.off("ready",p),t==null||t.off("click",m),t=void 0},isEnabled:()=>n,pause:function(){i=!0,l()},resume:function(){i=!1,n&&!s&&c()},start(){u()},stop(){d()},toggle(){n?d():u()}};return T};/*! License details at fancyapps.com/license */const od={Carousel:{Lazyload:{showLoading:!1}},minCount:2,showOnStart:!0,thumbTpl:'<button aria-label="Slide to #{{page}}"><img draggable="false" alt="{{alt}}" data-lazy-src="{{src}}" /></button>',type:"modern"};let ld;const OM=()=>{let t,e,n,i=0,s=0,r=!0;function a(g){const _=t==null?void 0:t.getOptions().Thumbs;let b=(Nn(_)?Object.assign(Object.assign({},od),_):od)[g];return b&&typeof b=="function"?b():b}function o(){if(!t||(t==null?void 0:t.getOptions().Thumbs)===!1)return!1;let g=0;for(const _ of t.getSlides())_.thumbSrc&&g++;return g>=a("minCount")}function l(){return a("type")==="modern"}function c(g=!1){const _=t==null?void 0:t.getContainer();if(t&&_&&!n&&o()){if(!n){const b=_.nextElementSibling;b!=null&&b.classList.contains("f-thumbs")&&(n=b)}if(!n){n=document.createElement("div"),n.classList.add("f-thumbs");const b=a("parentEl");b?b.insertAdjacentElement("beforeend",n):_.insertAdjacentElement("afterend",n)}n.classList.add(`is-${a("type")}`),n.classList.add("is-syncing"),g&&(n.style.maxHeight="0px")}}function u(){var g,_;if(!ld||!t||!n||e)return;const b=[];for(const y of t.getSlides()){let T=y.thumb?y.thumb instanceof HTMLImageElement?y.thumb.src:y.thumb:y.thumbSrc||void 0,x=a("thumbTpl");x=zs(x,"{{alt}}",`Thumbnail #${y.index}`),x=zs(x,"{{src}}",T+""),x=zs(x,"{{index}}",`${y.index}`),x=zs(x,"{{page}}",`${y.index||1}`),b.push({html:x})}b.length&&(e=ld(n,ui({},{Sync:{target:t},Lazyload:{preload:1},slides:b,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",slide:"f-thumbs__slide"},initialSlide:t.getOptions().initialPage,center:!0,fill:!l(),infinite:!1,dragFree:!0,rtl:t.getOptions().rtl||!1,slidesPerPage:y=>{let T=0;return l()&&(function(){if(!l()||!n)return;const x=S=>n&&parseFloat(getComputedStyle(n).getPropertyValue("--f-thumb-"+S))||0;i=x("width"),s=x("clip-width")}(),T=4*(i-s)),y&&y.getTotalSlideDim()<=y.getViewportDim()-T?1/0:1}},od.Carousel||{},a("Carousel")||{}),{Sync:N0,Lazyload:F0}).init(),(g=e.getGestures())===null||g===void 0||g.on("start",()=>{r=!1}),e.on("click",(y,T)=>{const x=T.target;if(x){const S=x.matches("button")?x:x.firstElementChild;S&&S.matches("button")&&S.focus({})}}),(_=t.getContainer())===null||_===void 0||_.classList.add("has-thumbs"),v())}function d(){var g;o()&&((g=t==null?void 0:t.getGestures())===null||g===void 0||g.on("start",h),a("showOnStart")&&(c(),u()))}function h(){var g,_;r=!0,!((g=document.activeElement)===null||g===void 0)&&g.closest(".f-thumbs")&&((_=document.activeElement)===null||_===void 0||_.blur())}function p(){var g,_;n==null||n.classList.toggle("is-syncing",(t==null?void 0:t.hasNavigated())===!1||((g=t==null?void 0:t.getTween())===null||g===void 0?void 0:g.isRunning())),v(),!((_=t==null?void 0:t.getGestures())===null||_===void 0)&&_.isPointerDown()&&function(){if(!l()||!t||!e||!r)return;const b=e.getTween(),y=e.getPages(),T=t.getPageIndex()||0,x=t.getPageProgress()||0;if(!(t&&y&&y[T]&&b))return;const S=b.isRunning()?b.getCurrentValues().pos:e.getPosition();if(S===void 0)return;let M=y[T].pos+x*(i-s);M=yt(y[0].pos,M,y[y.length-1].pos),b.from({pos:S}).to({pos:M}).start()}()}function f(){r=!0}function m(g,_){const b=_.target;b&&!_.defaultPrevented&&b.dataset.thumbsAction==="toggle"&&function(){if(n||(c(!0),u()),!n)return;const y=n.style.maxHeight;n.style.maxHeight=y?"":"0px"}()}function v(){if(!l()||!t||!e)return;const g=(e==null?void 0:e.getSlides())||[];let _=-.5*i;for(const b of g){const y=b.el;if(!y)continue;let T=t.getPageProgress(b.index)||0;T=Math.max(-1,Math.min(1,T)),T>-1&&T<1&&(_+=.5*i*(1-Math.abs(T))),T=Math.round(1e4*T)/1e4,_=Math.round(1e4*_)/1e4,y.style.setProperty("--progress",`${Math.abs(T)}`),y.style.setProperty("--shift",`${t!=null&&t.isRTL()?-1*_:_}px`),T>-1&&T<1&&(_+=.5*i*(1-Math.abs(T)))}}return{init:function(g,_){ld=_,t=g,t.on("ready",d),t.on("render",p),t.on("change",f),t.on("click",m)},destroy:function(){var g,_;t==null||t.off("ready",d),t==null||t.off("render",p),t==null||t.off("change",f),t==null||t.off("click",m),(g=t==null?void 0:t.getGestures())===null||g===void 0||g.off("start",h),(_=t==null?void 0:t.getContainer())===null||_===void 0||_.classList.remove("has-thumbs"),t=void 0,e==null||e.destroy(),e=void 0,n==null||n.remove(),n=void 0},getContainer:function(){return n},isEnabled:function(){return o()}}};/*! License details at fancyapps.com/license */const Xm={iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""}},kM=()=>{let t;function e(s,r){let a=r.src;if(!mn(a))return;let o=r.type;if(!o){if(o||(a.charAt(0)==="#"?o="inline":a.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.((a)?png|avif|gif|jp(g|eg)|pjp(eg)?|jfif|svg|webp|bmp|ico|tif(f)?)((\?|#).*)?$)/i)?o="image":a.match(/\.(pdf)((\?|#).*)?$/i)?o="pdf":a.match(/\.(html|php)((\?|#).*)?$/i)&&(o="iframe")),!o){const l=a.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i);l&&(a=`https://maps.google.${l[1]}/?ll=${(l[2]?l[2]+"&z="+Math.floor(parseFloat(l[3]))+(l[4]?l[4].replace(/^\//,"&"):""):l[4]+"").replace(/\?/,"&")}&output=${l[4]&&l[4].indexOf("layer=c")>0?"svembed":"embed"}`,o="gmap")}if(!o){const l=a.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i);l&&(a=`https://maps.google.${l[1]}/maps?q=${l[2].replace("query=","q=").replace("api=1","")}&output=embed`,o="gmap")}r.src=a,r.type=o}}function n(s,r){r.type!=="iframe"&&r.type!=="pdf"&&r.type!=="gmap"||function(a){if(!t||!a.el||!a.src)return;const o=document.createElement("iframe");o.classList.add("f-iframe");for(const[c,u]of Object.entries(function(){const d=t==null?void 0:t.getOptions().Html;return Nn(d)?Object.assign(Object.assign({},Xm),d):Xm}().iframeAttr||{}))o.setAttribute(c,u);o.onerror=()=>{t&&t.getState()===1&&t.showError(a,"{{IFRAME_ERROR}}")},o.src=a.src;const l=document.createElement("div");if(l.classList.add("f-html"),l.append(o),a.width){let c=`${a.width}`;c.match(/^\d+$/)&&(c+="px"),l.style.maxWidth=`${c}`}if(a.height){let c=`${a.height}`;c.match(/^\d+$/)&&(c+="px"),l.style.maxHeight=`${c}`}if(a.aspectRatio){const c=a.el.getBoundingClientRect();l.style.aspectRatio=`${a.aspectRatio}`,l.style[c.width>c.height?"width":"height"]="auto",l.style[c.width>c.height?"maxWidth":"maxHeight"]="none"}a.contentEl=o,a.htmlEl=l,a.el.classList.add("has-html"),a.el.classList.add("has-iframe"),a.el.classList.add(`has-${a.type}`),a.el.prepend(l),t.emit("contentReady",a)}(r)}function i(s,r){var a,o;r.type!=="iframe"&&r.type!=="pdf"&&r.type!=="gmap"||(t==null||t.hideError(r),(a=r.contentEl)===null||a===void 0||a.remove(),r.contentEl=void 0,(o=r.htmlEl)===null||o===void 0||o.remove(),r.htmlEl=void 0)}return{init:function(s){t=s,t.on("addSlide",e),t.on("attachSlideEl",n),t.on("detachSlideEl",i)},destroy:function(){t==null||t.off("addSlide",e),t==null||t.off("attachSlideEl",n),t==null||t.off("detachSlideEl",i),t=void 0}}};/*! License details at fancyapps.com/license */const qm=(t,e={})=>{const n=new URL(t),i=new URLSearchParams(n.search),s=new URLSearchParams;for(const[o,l]of[...i,...Object.entries(e)]){let c=l+"";if(o==="t"){let u=c.match(/((\d*)m)?(\d*)s?/);u&&s.set("start",60*parseInt(u[2]||"0")+parseInt(u[3]||"0")+"")}else s.set(o,c)}let r=s+"",a=t.match(/#t=((.*)?\d+s)/);return a&&(r+=`#t=${a[1]}`),r},Ym={autoplay:!1,html5videoTpl:`<video class="f-html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
    <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""},vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},NM=()=>{let t,e=!1;function n(){const h=t==null?void 0:t.getOptions().Video;return Nn(h)?Object.assign(Object.assign({},Ym),h):Ym}function i(){var h;return(h=t==null?void 0:t.getPage())===null||h===void 0?void 0:h.slides[0]}const s=h=>{var p;try{let f=JSON.parse(h.data);if(h.origin==="https://player.vimeo.com"){if(f.event==="ready")for(let m of Array.from(((p=t==null?void 0:t.getContainer())===null||p===void 0?void 0:p.getElementsByClassName("f-iframe"))||[]))m instanceof HTMLIFrameElement&&m.contentWindow===h.source&&(m.dataset.ready="true")}else if(h.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&f.event==="onReady"){const m=document.getElementById(f.id);m&&(m.dataset.ready="true")}}catch{}};function r(h,p){const f=p.src;if(!mn(f))return;let m=p.type;if(!m||m==="html5video"){const v=f.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i);v&&(m="html5video",p.html5videoFormat=p.html5videoFormat||"video/"+(v[1]==="ogv"?"ogg":v[1]))}if(!m||m==="youtube"){const v=f.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i);if(v){const g=Object.assign(Object.assign({},n().youtube),p.youtube||{}),_=`www.youtube${g.nocookie?"-nocookie":""}.com`,b=qm(f,g),y=encodeURIComponent(v[2]);p.videoId=y,p.src=`https://${_}/embed/${y}?${b}`,p.thumb=p.thumb||`https://i.ytimg.com/vi/${y}/mqdefault.jpg`,m="youtube"}}if(!m||m==="vimeo"){const v=f.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/);if(v){const g=Object.assign(Object.assign({},n().vimeo),p.vimeo||{}),_=qm(f,g),b=encodeURIComponent(v[1]),y=v[4]||"";p.videoId=b,p.src=`https://player.vimeo.com/video/${b}?${y?`h=${y}${_?"&":""}`:""}${_}`,m="vimeo"}}p.type=m}function a(h,p){p.type==="html5video"&&function(f){if(!t||!f.el||!f.src)return;const{el:m,src:v}=f;if(!m||!v)return;const g=f.html5videoTpl||n().html5videoTpl,_=f.html5videoFormat||n().html5videoFormat;if(!g)return;const b=f.poster||(f.thumb&&mn(f.thumb)?f.thumb:""),y=qs(g.replace(/\{\{src\}\}/gi,v+"").replace(/\{\{format\}\}/gi,_||"").replace(/\{\{poster\}\}/gi,b+""));if(!y)return;const T=document.createElement("div");T.classList.add("f-html"),T.append(y),f.contentEl=y,f.htmlEl=T,m.classList.add(`has-${f.type}`),m.prepend(T),u(f),t.emit("contentReady",f)}(p),p.type!=="youtube"&&p.type!=="vimeo"||function(f){if(!t||!f.el||!f.src)return;const m=document.createElement("iframe");m.classList.add("f-iframe"),m.setAttribute("id",`f-iframe_${f.videoId}`);for(const[g,_]of Object.entries(n().iframeAttr||{}))m.setAttribute(g,_);m.onload=()=>{var g;t&&t.getState()===1&&f.type==="youtube"&&((g=m.contentWindow)===null||g===void 0||g.postMessage(JSON.stringify({event:"listening",id:m.getAttribute("id")}),"*"))},m.onerror=()=>{t&&t.getState()===1&&(t==null||t.showError(f,"{{IFRAME_ERROR}}"))},m.src=f.src;const v=document.createElement("div");v.classList.add("f-html"),v.append(m),f.contentEl=m,f.htmlEl=v,f.el.classList.add("has-html"),f.el.classList.add("has-iframe"),f.el.classList.add(`has-${f.type}`),f.el.prepend(v),u(f),t.emit("contentReady",f)}(p)}function o(h,p){var f,m;p.type!=="html5video"&&p.type!=="youtube"&&p.type!=="vimeo"||((f=p.contentEl)===null||f===void 0||f.remove(),p.contentEl=void 0,(m=p.htmlEl)===null||m===void 0||m.remove(),p.htmlEl=void 0),p.poller&&clearTimeout(p.poller)}function l(){e=!1}function c(){if(e)return;e=!0;const h=i();(h&&h.autoplay!==void 0?h.autoplay:n().autoplay)&&(function(){var p;const f=i(),m=f==null?void 0:f.el;if(m&&(f==null?void 0:f.type)==="html5video")try{const g=m.querySelector("video");if(g){const _=g.play();_!==void 0&&_.then(()=>{}).catch(b=>{g.muted=!0,g.play()})}}catch{}const v=f==null?void 0:f.htmlEl;v instanceof HTMLIFrameElement&&((p=v.contentWindow)===null||p===void 0||p.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"))}(),function(){const p=i(),f=p==null?void 0:p.type;if(!(p!=null&&p.el)||f!=="youtube"&&f!=="vimeo")return;const m=()=>{if(p.contentEl&&p.contentEl instanceof HTMLIFrameElement&&p.contentEl.contentWindow){let v;if(p.contentEl.dataset.ready==="true")return v=p.type==="youtube"?{event:"command",func:"playVideo"}:{method:"play",value:"true"},v&&p.contentEl.contentWindow.postMessage(JSON.stringify(v),"*"),void(p.poller=void 0);p.type==="youtube"&&(v={event:"listening",id:p.contentEl.getAttribute("id")},p.contentEl.contentWindow.postMessage(JSON.stringify(v),"*"))}p.poller=setTimeout(m,250)};m()}())}function u(h){const p=h==null?void 0:h.el,f=h==null?void 0:h.htmlEl;if(!h||!f)return;f.style.aspectRatio="",f.style.width="",f.style.height="",f.style.maxWidth="",f.style.maxHeight="",f.offsetHeight;const m=f.getBoundingClientRect(),v=m.width||1,g=m.height||1;if(h.width){let x=`${h.width}`;x.match(/^\d+$/)&&(x+="px"),f.style.maxWidth=`${x}`}if(h.height){let x=`${h.height}`;x.match(/^\d+$/)&&(x+="px"),f.style.maxHeight=`${x}`}if(!p||!h.aspectRatio)return;const _=h.aspectRatio.split("/"),b=parseFloat(_[0].trim()),y=_[1]?parseFloat(_[1].trim()):0,T=(b&&y?b/y:b)<v/g;f.style.aspectRatio=`${h.aspectRatio}`,f.style.width=T?"auto":"",f.style.height=T?"":"auto"}function d(){u(i())}return{init:function(h){t=h,t.on("addSlide",r),t.on("attachSlideEl",a),t.on("detachSlideEl",o),t.on("ready",c),t.on("change",l),t.on("settle",c),t.on("refresh",d),window.addEventListener("message",s)},destroy:function(){t==null||t.off("addSlide",r),t==null||t.off("attachSlideEl",a),t==null||t.off("detachSlideEl",o),t==null||t.off("ready",c),t==null||t.off("change",l),t==null||t.off("settle",c),t==null||t.off("refresh",d),window.removeEventListener("message",s),t=void 0}}};/*! License details at fancyapps.com/license */const Km={autoStart:!1,btnTpl:'<button data-fullscreen-action="toggle" class="f-button" title="{{TOGGLE_FULLSCREEN}}"><svg><g><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},Zm="in-fullscreen-mode",FM=()=>{let t;function e(d){const h=t==null?void 0:t.getOptions().Fullscreen;let p=(Nn(h)?Object.assign(Object.assign({},Km),h):Km)[d];return p&&typeof p=="function"&&t?p(t):p}function n(){var d;(d=t==null?void 0:t.getPlugins().Toolbar)===null||d===void 0||d.add("fullscreen",{tpl:e("btnTpl")})}function i(){if(e("autoStart")){const d=a();d&&l(d)}}function s(d,h){const p=h.target;p&&!h.defaultPrevented&&p.dataset.fullscreenAction==="toggle"&&u()}function r(d){a()&&d.key==="Escape"&&!d.defaultPrevented&&u()}function a(){return e("el")||(t==null?void 0:t.getContainer())||void 0}function o(){const d=document;return d.fullscreenEnabled?!!d.fullscreenElement:!!d.webkitFullscreenEnabled&&!!d.webkitFullscreenElement}function l(d){const h=document;let p;return d||(d=h.documentElement),h.fullscreenEnabled?p=d.requestFullscreen():h.webkitFullscreenEnabled&&(p=d.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),p&&p.then(()=>{d.classList.add(Zm)}),p}function c(){const d=document;let h;return d.fullscreenEnabled?h=d.fullscreenElement&&d.exitFullscreen():d.webkitFullscreenEnabled&&(h=d.webkitFullscreenElement&&d.webkitExitFullscreen()),h&&h.then(()=>{var p;(p=a())===null||p===void 0||p.classList.remove(Zm)}),h}function u(){const d=a();d&&(o()?c():l(d))}return{init:function(d){t=d,t.on("initPlugins",n),t.on("ready",i),t.on("click",s)},destroy:function(){t==null||t.off("initPlugins",n),t==null||t.off("ready",i),t==null||t.off("click",s),document.removeEventListener("keydown",r,!0)},exit:c,inFullscreen:o,request:l,toggle:u}};/*! License details at fancyapps.com/license */let Ui,Hc=!1,Qm=!1,mo=!1,lh=!1;const Vc=()=>{const t=new URL(document.URL).hash,e=t.slice(1).split("-"),n=e[e.length-1],i=n&&/^\+?\d+$/.test(n)&&parseInt(e.pop()||"1",10)||1;return{hash:t,slug:e.join("-"),index:i}},zf=()=>{if(!Ui||Ui.getInstance())return;const{slug:t,index:e}=Vc();if(!t)return;let n=document.querySelector(`[data-slug="${t}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),!Ui||Ui.getInstance())return;const i=document.querySelectorAll(`[data-fancybox="${t}"]`);i.length&&(n=i[e-1],n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},UM=()=>{var t,e,n;if(!Ui||mo)return;const i=Ui==null?void 0:Ui.getInstance();if((i==null?void 0:i.getOptions().Hash)===!1)return;const{slug:s,index:r}=Vc(),a=((t=i==null?void 0:i.getSlide())===null||t===void 0?void 0:t.fancybox)||((e=i==null?void 0:i.getSlide())===null||e===void 0?void 0:e.slug)||void 0;i&&a&&(s===a?(n=i.getCarousel())===null||n===void 0||n.goTo(r-1):(lh=!0,i.close(),lh=!1)),zf()},Jm=()=>{Ui&&setTimeout(()=>{Hc=!0,zf(),Hc=!1,window.addEventListener("hashchange",UM,!1)},300)},ch=()=>{let t,e="auto",n="";function i(){if(!t||!t.isTopMost()||t.getOptions().Hash===!1)return;const a=t.getCarousel();if(!a)return;const{hash:o,slug:l}=Vc(),c=t.getSlide();if(!c)return;let u=c.fancybox||"",d=parseInt(c.index+"",10)+1;if(!u)return;let h=`#${u}-${d}`;if(o!==h&&(n=o),history.scrollRestoration&&(e=history.scrollRestoration,history.scrollRestoration="manual"),a.on("change",s),!Hc)if(u===l)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+h)}catch{}else try{window.history.pushState({},document.title,window.location.pathname+window.location.search+h),Qm=!0}catch{}}function s(){if(!t||!t.isTopMost()||t.getOptions().Hash===!1)return;const{slug:a}=Vc(),o=t.getSlide();if(!o)return;let l=o.fancybox||"",c=`#${l}-${o.index+1}`;if(l===a){mo=!0;try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+c)}catch{}mo=!1}}function r(){if(lh||!t||!t.isTopMost()||t.getOptions().Hash===!1)return;const a=t.getSlide();if(a&&a.fancybox){mo=!0;try{!Qm||Hc||function(){if(window.parent===window)return!1;try{var o=window.frameElement}catch{o=null}return o===null?location.protocol==="data:":o.hasAttribute("sandbox")}()?window.history.replaceState({},document.title,window.location.pathname+window.location.search+n):window.history.back()}catch{}mo=!1}}return{init:function(a){t=a,t.on("ready",i),t.on("close",r)},destroy:function(){t==null||t.off("ready",i),t==null||t.off("close",r);const a=t==null?void 0:t.getCarousel();a&&a.off("change",s),t=void 0,history.scrollRestoration&&e&&(history.scrollRestoration=e)}}};ch.startFromUrl=zf,ch.setup=function(t){Ui||(Ui=t,k0()&&(/complete|interactive|loaded/.test(document.readyState)?Jm():document.addEventListener("DOMContentLoaded",Jm)))};/*! License details at fancyapps.com/license */const zM=Object.assign(Object.assign({},Uf),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ELEMENT_NOT_FOUND:"HTML Element Not Found",IFRAME_ERROR:"Error Loading Page"});/*! License details at fancyapps.com/license */const B0='<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="M19.286 4.714 4.714 19.286M4.714 4.714l14.572 14.572" /></svg></button>';z0().add("close",{tpl:B0});const H0=t=>{t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:t}))},eg=(t=null,e="",n)=>{if(!t||!t.parentElement||!e)return void(n&&n());H0(t);const i=s=>{s.target===t&&t.dataset.animationName&&(t.removeEventListener("animationend",i),delete t.dataset.animationName,n&&n(),t.classList.remove(e))};t.dataset.animationName=e,t.addEventListener("animationend",i),At(t,e)};var cn;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Closing=2]="Closing",t[t.Destroyed=3]="Destroyed"})(cn||(cn={}));const Eo={backdropClick:"close",Carousel:{},closeButton:"auto",closeExisting:!1,delegateEl:void 0,dragToClose:!0,fadeEffect:!0,groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,id:void 0,idle:!1,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:zM,mainClass:"",mainStyle:{},mainTpl:`<dialog class="fancybox__dialog">
    <div class="fancybox__container" tabindex="0" aria-label="{{MODAL}}">
      <div class="fancybox__backdrop"></div>
      <div class="fancybox__carousel"></div>
    </div>
  </dialog>`,on:{},parentEl:void 0,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,sync:void 0,theme:"dark",triggerEl:void 0,triggerEvent:void 0,zoomEffect:!0},ns=new Map;let BM=0;const tg="with-fancybox",HM=()=>{let t,e,n,i,s,r=cn.Init,a=Object.assign({},Eo),o=-1,l={},c=[],u=!1,d=!0;function h(G,...te){let ue=a[G];return ue&&typeof ue=="function"?ue(K,...te):ue}function p(G,te=[]){const ue=h("l10n")||{};G=String(G).replace(/\{\{(\w+)\}\}/g,(se,X)=>ue[X]||se);for(let se=0;se<te.length;se++)G=G.split(te[se][0]).join(te[se][1]);return G=G.replace(/\{\{(.*?)\}\}/g,(se,X)=>X)}const f=new Map;function m(G,...te){const ue=f.get(G)||[];for(const[se,X]of Object.entries(a.on||{}))(se===G||se.split(" ").indexOf(G)>-1)&&ue.push(X);for(const se of ue)se&&typeof se=="function"&&se(K,...te);G!=="*"&&m("*",G,...te)}function v(G=[],te={}){r!==cn.Init&&(K.destroy(),r=cn.Init),a=ui({},Eo,te),o=h("id")||"fancybox-"+ ++BM;const ue=ns.get(o);if(ue&&ue.destroy(),ns.set(o,K),m("init"),function(){for(const[se,X]of Object.entries(Object.assign(Object.assign({},dt.Plugins),a.plugins||{})))if(se&&!l[se]&&X instanceof Function){const ne=X();ne.init(K),l[se]=ne}m("initPlugins")}(),function(se=[]){m("initSlides",se),c=[...se]}(G),function(){const se=h("parentEl")||document.body;if(!(se&&se instanceof HTMLElement))return;const X=p(h("mainTpl")||"");if(t=qs(X)||void 0,!(t&&t instanceof HTMLDialogElement)||(e=t.querySelector(".fancybox__container"),!(e&&e instanceof HTMLElement)))return;const ne=h("mainClass");ne&&At(e,ne);const F=h("mainStyle");if(F&&Nn(F))for(const[pe,Me]of Object.entries(F))e.style.setProperty(pe,Me);const fe=h("theme"),ve=fe==="auto"?window.matchMedia("(prefers-color-scheme:light)").matches:fe==="light";e.setAttribute("theme",ve?"light":"dark"),t.setAttribute("id",`${o}`),t.addEventListener("keydown",pe=>{pe.key==="Escape"&&pe.preventDefault()}),t.addEventListener("cancel",pe=>{Y(pe)}),se.append(t),ns.size===1&&(h("hideScrollbar")&&Fm(!0),document.documentElement.classList.add(tg)),t.showModal(),m("initLayout")}(),function(){if(n=(t==null?void 0:t.querySelector(".fancybox__carousel"))||void 0,!n)return;const se=ui({Autoplay:{autoStart:!1,pauseOnHover:!1,progressbarParentEl:X=>{const ne=X.getContainer();return(ne==null?void 0:ne.querySelector(".f-carousel__toolbar [data-autoplay-action]"))||ne}},Fullscreen:{el:e},Toolbar:{absolute:!0,display:{left:["counter"],right:["toggleFull","autoplay","fullscreen","thumbs","close"]}},Video:{autoplay:!0},Zoomable:{Panzoom:{event:h("triggerEvent")}},classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",slide:"fancybox__slide"},spinnerTpl:'<div class="f-spinner" data-fancybox-close></div>',dragFree:!1,slidesPerPage:1,plugins:{Sync:N0,Arrows:IM,Lazyload:F0,Zoomable:RM,Html:kM,Video:NM,Autoplay:DM,Fullscreen:FM,Thumbs:OM,Toolbar:z0}},h("Carousel")||{},{slides:c,enabled:!0,initialPage:h("startIndex")||0,l10n:h("l10n")});i=Bc(n,se),m("initCarousel",i),i.on("*",(X,ne,...F)=>{m(`Carousel.${ne}`,X,...F)}),i==null||i.on("addSlide",y),i.on("attachSlideEl",T),i.on("detachSlideEl",x),i.on("contentReady",P),i.on("ready",w),i.on("change",M),i.on("settle",E),i.init()}(),h("closeExisting"))for(const[se,X]of ns.entries())se!==o&&X.close();h("fadeEffect")&&e&&(setTimeout(()=>{e==null||e.classList.remove("is-revealing")},500),At(e,"is-revealing")),e==null||e.classList.add("is-ready"),r=cn.Ready,m("ready")}function g(G){if(!N())return;if(r!==cn.Ready)return G.preventDefault(),void G.stopPropagation();if(G.defaultPrevented||!Vo.isClickAllowed())return;const te=G.composedPath()[0];te.closest(".fancybox__carousel")&&te.classList.contains("fancybox__slide")&&_(G)}function _(G){if(G.composedPath()[0].closest("[data-fancybox-close]"))return void Y(G);m("backdropClick",G),!G.defaultPrevented&&h("backdropClick")&&Y(G)}function b(G){if(!N()||r!==cn.Ready||(V(),G.defaultPrevented))return;const te=G.composedPath()[0],ue=!!te.closest("[data-fancybox-close]"),se=te.classList.contains("fancybox__backdrop");(ue||se)&&_(G)}function y(G,te){var ue;(ue=te.el)===null||ue===void 0||ue.addEventListener("click",g)}function T(G,te){S(te),function(ue){if(!i||!ue||!ue.el||ue.type!=="inline"&&ue.type!=="clone")return;let se=null;if(mn(ue.src)){const X=ue.src.split("#",2).pop();se=X?document.getElementById(X):null}if(se){if(At(se,"f-html"),ue.type==="clone"||se.closest(".fancybox__carousel")){se=se.cloneNode(!0);const X=se.dataset.animationName;X&&(se.classList.remove(X),delete se.dataset.animationName);let ne=se.getAttribute("id");ne=ne?`${ne}--clone`:`clone-${o}-${ue.index}`,se.setAttribute("id",ne)}else if(se.parentNode){const X=document.createElement("div");X.inert=!0,se.parentNode.insertBefore(X,se),ue.placeholderEl=X}ue.htmlEl=se,At(ue.el,"has-html"),ue.el.prepend(se),se.classList.remove("hidden"),se.style.display==="none"&&(se.style.display=""),getComputedStyle(se).getPropertyValue("display")==="none"&&(se.style.display=se.dataset.display||"flex"),i==null||i.emit("contentReady",ue)}else i==null||i.showError(ue,"{{ELEMENT_NOT_FOUND}}")}(te)}function x(G,te){(function(ue){ue.closeButtonEl&&(ue.closeButtonEl.remove(),ue.closeButtonEl=void 0)})(te),function(ue){if(ue.type!=="inline")return;const se=ue.htmlEl,X=ue.placeholderEl;se&&(getComputedStyle(se).getPropertyValue("display")!=="none"&&(se.style.display="none"),se.offsetHeight),X&&(se&&X.parentNode&&X.parentNode.insertBefore(se,X),X.remove()),ue.htmlEl=void 0,ue.placeholderEl=void 0}(te)}function S(G){var te;const{el:ue,htmlEl:se,closeButtonEl:X}=G;if(!ue||!se||X)return;let ne=h("closeButton");if(ne==="auto"&&(ne=((te=i==null?void 0:i.getPlugins().Toolbar)===null||te===void 0?void 0:te.isEnabled())!==!0),ne){const F=qs(p(B0));F&&(G.closeButtonEl=se.insertAdjacentElement("afterbegin",F),ue.classList.add("has-close-btn"))}}function M(){d=!1,e&&i&&e.classList.remove("is-revealing");const G=h("sync");if(i&&G){const te=G.getPageIndex(i.getPageIndex())||0;G.goTo(te,{transition:!1})}}function w(){var G;if(r!==cn.Ready)return;C(U()),function(){if(!h("dragToClose")||!i||!i.getViewport())return;const ue=i.getGestures();if(!ue)return;let se=0,X=0,ne=Ys().on("step",F=>{se=F.y;const fe=i==null?void 0:i.getViewport();if(e&&fe){const ve=oh(Math.abs(se),0,.5*fe.getBoundingClientRect().height,1,.5);e.style.setProperty("--f-drag-opacity",ve+""),e.style.setProperty("--f-drag-offset",se+"px")}}).on("end",()=>{if(!se){e&&e.style.removeProperty("--f-opacity");const F=i==null?void 0:i.getViewport();F&&(F.style.transform="")}});ue.on("start",function(){ne.pause()}).on("panstart",F=>{var fe;const ve=F.srcEvent.target;ve&&!Ho(ve)&&((fe=i==null?void 0:i.getViewport())===null||fe===void 0||fe.classList.add("is-dragging"))}).on("pan",function(F){const fe=F.srcEvent.target;fe&&Ho(fe)||i!=null&&i.getViewport()&&F.axis==="y"&&(X+=F.deltaY,ne.spring({clamp:!0,mass:1,tension:860,friction:17,restDelta:.01,restSpeed:.01}).from({y:se}).to({y:X}).start())}).on("end",function(F){ne.pause(),F.axis==="y"&&Math.abs(F.velocityY)>5&&Math.abs(X)>0?Y(F.srcEvent,"f-throwOut"+(F.velocityY>0?"Down":"Up")):X!==0&&(X=0,ne.spring({clamp:!0,mass:1,tension:140,friction:25,restDelta:.1,restSpeed:.1,maxSpeed:1/0}).from({y:se}).to({y:X}).start())})}(),document.body.addEventListener("click",b),document.body.addEventListener("keydown",R,{passive:!1,capture:!0}),O();const te=h("sync");te&&((G=te.getTween())===null||G===void 0||G.start())}function E(){i!=null&&i.canGoNext()?O():j()}function C(G){if(!(d&&i&&i.getState()===1&&G&&G.index===i.getOptions().initialPage&&G.el&&G.el.parentElement))return;const te=G.panzoomRef,ue=te==null?void 0:te.getTween();if(te&&G.state!==1)return;d=!1;const se=h("zoomEffect")?D(G):void 0;if(te&&ue&&se){const ne=te.getScale("base")||1,{x:F,y:fe}=te.getMousemovePos(ne)||{x:0,y:0};return void ue.spring({tension:225,friction:25,restDelta:.001,restSpeed:.001,maxSpeed:1/0}).from(se).to({x:F,y:fe,scale:ne}).start()}const X=(te==null?void 0:te.getWrapper())||G.htmlEl;X&&eg(X,h("showClass",G))}function P(G,te){S(te),C(te)}function A(){V()}function R(G){if(!N()||r!==cn.Ready)return;const te=G.key,ue=h("keyboard");if(!ue||G.ctrlKey||G.altKey||G.shiftKey)return;const se=G.composedPath()[0];if(!sa(se)||te!=="Escape"&&(ne=>{const F=["input","textarea","select","option","video","iframe","[contenteditable]","[data-selectable]","[data-draggable]"].join(",");return ne.matches(F)||ne.closest(F)})(se)||(m("keydown",G),G.defaultPrevented))return;const X=ue[te];if(X)switch(X){case"close":Y(G);break;case"next":G.preventDefault(),i==null||i.next();break;case"prev":G.preventDefault(),i==null||i.prev()}}function N(){var G;return((G=dt.getInstance())===null||G===void 0?void 0:G.getId())===o}function U(){var G;return(G=i==null?void 0:i.getPage())===null||G===void 0?void 0:G.slides[0]}function k(){const G=U();return G?G.triggerEl||h("triggerEl"):void 0}function D(G){var te,ue;const se=(ue=(te=G.panzoomRef)===null||te===void 0?void 0:te.getWrapper())===null||ue===void 0?void 0:ue.getBoundingClientRect(),X=se==null?void 0:se.width,ne=se==null?void 0:se.height;if(!X||!ne)return;const F=G.thumbEl;if(!F)return;const fe=F.getBoundingClientRect();let ve=fe.width,pe=fe.height,Me=fe.left,Pe=fe.top;if(!(!fe||!ve||!pe)&&(Ce=>{const z=Ce.getBoundingClientRect(),L=Ce.closest("[style]"),Q=L==null?void 0:L.parentElement;if(L&&L.style.transform&&Q){const de=Q.getBoundingClientRect();if(z.left<de.left||z.left>de.left+de.width-z.width||z.top<de.top||z.top>de.top+de.height-z.height)return!1}const oe=Math.max(document.documentElement.clientHeight,window.innerHeight),he=Math.max(document.documentElement.clientWidth,window.innerWidth);return!(z.bottom<0||z.top-oe>=0||z.right<0||z.left-he>=0)})(F)){if(F instanceof HTMLImageElement&&window.getComputedStyle(F).getPropertyValue("object-fit")==="contain"){const{width:Ce,height:z}=((L,Q,oe,he)=>{const de=oe/L,ee=he/Q,ie=Math.min(de,ee);return{width:L*=ie,height:Q*=ie}})(F.naturalWidth,F.naturalHeight,ve,pe);Me+=.5*(ve-Ce),Pe+=.5*(pe-z),ve=Ce,pe=z}if(!(Math.abs(X/ne-ve/pe)>.1))return{x:Me+.5*ve-(se.left+.5*X),y:Pe+.5*pe-(se.top+.5*ne),scale:ve/X}}}function W(){s&&clearTimeout(s),s=void 0,document.removeEventListener("mousemove",A)}function O(){if(u||s)return;const G=h("idle");G&&(s=setTimeout(B,G))}function B(){e&&(W(),At(e,"is-idle"),document.addEventListener("mousemove",A),u=!0)}function V(){u&&(j(),O())}function j(){W(),e==null||e.classList.remove("is-idle"),u=!1}function Y(G,te){var ue,se,X,ne,F,fe;if(r===cn.Closing||r===cn.Destroyed)return;if(r=cn.Closing,W(),G){if(G.defaultPrevented)return;G.cancelable&&G.preventDefault(),G.stopPropagation(),G.stopImmediatePropagation()}if(i){(ue=i.getGestures())===null||ue===void 0||ue.destroy(),(se=i.getTween())===null||se===void 0||se.pause();const pe=U(),Me=pe==null?void 0:pe.panzoomRef;pe&&Me&&ui(Me.getOptions(),{clickAction:!1,wheelAction:!1,bounds:!1,minScale:0,maxScale:1/0});for(const Pe of i.getSlides())(ne=(X=Pe.panzoomRef)===null||X===void 0?void 0:X.getGestures())===null||ne===void 0||ne.destroy(),(fe=(F=Pe.panzoomRef)===null||F===void 0?void 0:F.getTween())===null||fe===void 0||fe.pause()}const ve=i==null?void 0:i.getPlugins().fullscreen;ve&&ve.inFullscreen()?Promise.resolve(ve.exit()).then(()=>{setTimeout(()=>{H(G,te)},150)}):H(G,te)}function H(G,te){var ue,se,X,ne,F;if(r!==cn.Closing)return;if(m("close",G),h("placeFocusBack")){const L=k();!L||(F=L.getBoundingClientRect()).bottom>0&&F.right>0&&F.left<(window.innerWidth||document.documentElement.clientWidth)&&F.top<(window.innerHeight||document.documentElement.clientHeight)||L.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}h("fadeEffect")&&(e==null||e.classList.remove("is-ready"),e==null||e.classList.add("is-hiding")),e==null||e.classList.add("is-closing");const fe=U(),ve=fe==null?void 0:fe.panzoomRef,pe=(ue=fe==null?void 0:fe.panzoomRef)===null||ue===void 0?void 0:ue.getTween(),Me=te||h("hideClass");let Pe=!1,Ce=!1;if(i&&fe&&ve&&pe){let L;h("zoomEffect")&&(((X=(se=i.getTween())===null||se===void 0?void 0:se.getCurrentVelocities())===null||X===void 0?void 0:X.pos)||0)<700&&fe.state===1&&(L=D(fe)),L&&(Pe=!0,i.on("refresh",()=>{const Q=D(fe);Q&&pe.to(Object.assign(Object.assign({},si),Q))}),pe.easing(Ys.Easings.EaseOut).duration(350).from(Object.assign({},ve.getTransform())).to(Object.assign(Object.assign({},si),L)).start())}const z=(fe==null?void 0:fe.htmlEl)||((ne=fe==null?void 0:fe.panzoomRef)===null||ne===void 0?void 0:ne.getWrapper());z&&H0(z),!Pe&&Me&&z&&(Ce=!0,eg(z,Me,()=>{q()})),Pe||Ce?setTimeout(()=>{q()},350):q()}function q(){var G,te,ue,se,X;if(r===cn.Destroyed)return;r=cn.Destroyed,document.body.removeEventListener("click",b),document.body.removeEventListener("keydown",R,{passive:!1,capture:!0});for(const F of Object.values(l))F==null||F.destroy();l={};const ne=k();if(m("destroy"),(te=(G=h("sync"))===null||G===void 0?void 0:G.getPlugins().Autoplay)===null||te===void 0||te.resume(),(se=(ue=h("sync"))===null||ue===void 0?void 0:ue.getPlugins().Autoscroll)===null||se===void 0||se.resume(),t instanceof HTMLDialogElement&&t.close(),(X=i==null?void 0:i.getContainer())===null||X===void 0||X.classList.remove("is-idle"),i==null||i.destroy(),t==null||t.remove(),t=void 0,e=void 0,i=void 0,ns.delete(o),!ns.size&&(Fm(!1),document.documentElement.classList.remove(tg),h("placeFocusBack")))try{ne==null||ne.focus({preventScroll:!0})}catch{}}const K={close:Y,destroy:q,getCarousel:function(){return i},getContainer:function(){return e},getId:function(){return o},getOptions:function(){return a},getPlugins:function(){return l},getSlide:function(){return U()},getState:function(){return r},init:function(G=[],te={}){return v(G,te),K},isCurrentSlide:function(G){const te=U();return!(!G||!te)&&te.index===G.index},isTopMost:function(){return N()},off:function(G,te){return f.has(G)&&f.set(G,f.get(G).filter(ue=>ue!==te)),K},on:function(G,te){return f.set(G,[...f.get(G)||[],te]),K},toggleIdle(G){console.log(`[F] toggleIdle(); force: ${G}`),(u||G===!0)&&B(),u&&G!==!1||j()}};return K},dt={Plugins:{Hash:ch},version:"6.0.7",openers:new Map,bind:function(t,e,n){if(!k0())return;let i=document.body,s="[data-fancybox]",r={};if(mn(t)?(i=document.body,s=t,typeof e=="object"&&(r=e||{})):t instanceof Element&&(i=t,mn(e)&&(s=e),typeof n=="object"&&(r=n||{})),!(i&&i instanceof Element&&s))return!1;const a=dt.openers.get(i)||new Map;if(a.set(s,r),dt.openers.set(i,a),a.size===1){i.addEventListener("click",dt.fromEvent);for(const o of Object.values(dt.Plugins)){const l=o.setup;typeof l=="function"&&l(dt)}}return!0},close:function(t=!0,...e){if(t)for(const n of ns.values())n.close(...e);else{const n=dt.getInstance();n&&n.close(...e)}},destroy:function(){let t;for(;t=dt.getInstance();)t.destroy();for(const e of dt.openers.keys())e.removeEventListener("click",dt.fromEvent);dt.openers.clear()},fromEvent:function(t){var e,n,i;if(t.defaultPrevented||t.button&&t.button!==0||t.ctrlKey||t.metaKey||t.shiftKey)return;let s=t.composedPath()[0];if(s.closest(".fancybox__container.is-hiding"))return t.preventDefault(),void t.stopPropagation();const r=s.closest("[data-fancybox-delegate]")||void 0;if(r){const v=r.dataset.fancyboxDelegate||"",g=document.querySelectorAll(`[data-fancybox="${v}"]`);s=g[parseInt(r.dataset.fancyboxIndex||"",10)||0]||g[0]}if(!(s&&s instanceof Element))return;let a,o,l;for(const v of Array.from(dt.openers.keys()).reverse()){const g=dt.openers.get(v);if(g&&v.contains(s))for(const _ of Array.from(g.keys()).reverse()){let b=null;try{b=s.closest(_)}catch{}if(b){s=b,a=v,o=_,l=g.get(_);break}}}if(!(a&&o&&l))return;t.preventDefault();const c=ui({},Eo,{triggerEvent:t,triggerEl:s,delegateEl:r},l),u=c.groupAll,d=c.groupAttr,h=d&&s?s.getAttribute(`${d}`):"";let p=[];const f=(e=s.closest(".f-carousel"))===null||e===void 0?void 0:e.carousel;if(f){const v=[];for(const g of f==null?void 0:f.getSlides()){const _=g.el;_&&(_.matches(o)?v.push(_):v.push(...[].slice.call(_.querySelectorAll(o))))}v.length&&(p=[...v],(n=f.getPlugins().Autoplay)===null||n===void 0||n.pause(),(i=f.getPlugins().Autoscroll)===null||i===void 0||i.pause(),c.sync=f)}else(!s||h||u)&&(p=[].slice.call(a.querySelectorAll(o)));if(s&&!u&&(p=h?p.filter(v=>v.getAttribute(`${d}`)===h):[s]),!p.length)return;const m=dt.getInstance();if(m){const v=m.getOptions().triggerEl;if(v&&p.indexOf(v)>-1)return}return Object.assign({},c.Carousel||{}).rtl&&(p=p.reverse()),s&&(c.startIndex=p.indexOf(s)),dt.fromNodes(p,c)},fromNodes:function(t,e){e=ui({},Eo,e||{});const n=[],i=s=>s instanceof HTMLImageElement?s:s instanceof HTMLElement?s.querySelector("img:not([aria-hidden])"):void 0;for(const s of t){const r=s.dataset||{},a=e.delegateEl&&t.indexOf(s)===e.startIndex?e.delegateEl:void 0,o=i(a)||i(s)||void 0,l=r.src||s.getAttribute("href")||s.getAttribute("currentSrc")||s.getAttribute("src")||void 0,c=r.thumb||r.thumbSrc||(o==null?void 0:o.getAttribute("currentSrc"))||(o==null?void 0:o.getAttribute("src"))||(o==null?void 0:o.dataset.lazySrc)||void 0,u={src:l,alt:r.alt||(o==null?void 0:o.getAttribute("alt"))||void 0,thumbSrc:c,thumbEl:o,triggerEl:s,delegateEl:a};for(const d in r){let h=r[d]+"";h=h!=="false"&&(h==="true"||h),u[d]=h}n.push(u)}return dt.show(n,e)},fromSelector:function(t,e,n){let i=document.body,s="",r={};if(mn(t)?s=t:t instanceof Element&&(i=t,mn(e)&&(s=e),typeof n=="object"&&(r=n||{})),!(i&&i instanceof Element&&s))return;const a=dt.openers.get(i);return a?(r=ui({},a.get(s)||{},r),r?dt.fromNodes(Array.from(i.querySelectorAll(s)),r):void 0):void 0},getCarousel:function(){var t;return((t=dt.getInstance())===null||t===void 0?void 0:t.getCarousel())||void 0},getDefaults:function(){return Eo},getInstance:function(t){if(t){const e=ns.get(t);return e&&e.getState()!==cn.Destroyed?e:void 0}return Array.from(ns.values()).reverse().find(e=>{if(e.getState()!==cn.Destroyed)return e})||void 0},getSlide:function(){var t;return((t=dt.getInstance())===null||t===void 0?void 0:t.getSlide())||void 0},show:function(t=[],e={}){return HM().init(t,e)},unbind:function(t,e){let n=document.body,i="";if(mn(t)?i=t:t instanceof Element&&(n=t,mn(e)&&(i=e)),n){const s=dt.openers.get(n);s&&i&&s.delete(i),s!=null&&s.size&&i||dt.openers.delete(n),n.removeEventListener("click",dt.fromEvent)}}},Fn={Toolbar:{display:{left:[],right:["close"]}},Carousel:{Navigation:{nextTpl:'<svg><use xlink:href="img/icons/icons.svg#i-arrow-right"></use></svg>',prevTpl:'<svg><use xlink:href="img/icons/icons.svg#i-arrow-right"></use></svg>'}},contentClick:"iterateZoom",Images:{Panzoom:{maxScale:3}},Thumbs:!1,caption:(t,e)=>{var i;const n=e.caption||"";return`${e.index+1} / ${(i=t.carousel)==null?void 0:i.slides.length} <br /> ${n}`}};dt.bind('[data-fancybox="clinic--gallery"]',Fn);dt.bind('[data-fancybox="stay-conditions--gallery"]',Fn);dt.bind('[data-fancybox="stay-conditions--gallery-mob"]',Fn);dt.bind('[data-fancybox="hospital--gallery"]',Fn);dt.bind('[data-fancybox="hospital--gallery-mob"]',Fn);dt.bind('[data-fancybox="certificates--gallery"]',Fn);dt.bind('[data-fancybox="media--gallery-1"]',Fn);dt.bind('[data-fancybox="media--gallery-2"]',Fn);dt.bind('[data-fancybox="media--gallery-3"]',Fn);dt.bind('[data-fancybox="offices-direction--gallery-1"]',Fn);dt.bind('[data-fancybox="offices-direction--gallery-2"]',Fn);dt.bind('[data-fancybox="offices-direction--gallery-3"]',Fn);dt.bind('[data-fancybox="offices-direction--gallery-4"]',Fn);dt.bind('[data-fancybox="offices-direction--gallery-5"]',Fn);dt.bind('[data-fancybox="offices-direction--gallery-6"]',Fn);var VM={exports:{}};/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */(function(t,e){(function(n){t.exports=n(Rc)})(function(n){function i(p,f,m){var v;return function(){var g=this,_=arguments,b=function(){v=null,p.apply(g,_)};clearTimeout(v),v=setTimeout(b,f)}}function s(p){var f=++d;return"rmjs-"+f}function r(p){var f=p.clone().css({height:"auto",width:p.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(p),m=f.outerHeight(),v=parseInt(f.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),g=p.data("defaultHeight");f.remove();var _=v||p.data("collapsedHeight")||g;p.data({expandedHeight:m,maxHeight:v,collapsedHeight:_}).css({maxHeight:"none"})}function a(p){if(!u[p.selector]){var f=" ";p.embedCSS&&p.blockCSS!==""&&(f+=p.selector+" + [data-readmore-toggle], "+p.selector+"[data-readmore]{"+p.blockCSS+"}"),f+=p.selector+"[data-readmore]{transition: height "+p.speed+"ms;overflow: hidden;}",function(m,v){var g=m.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=v:g.appendChild(m.createTextNode(v)),m.getElementsByTagName("head")[0].appendChild(g)}(document,f),u[p.selector]=!0}}function o(p,f){this.element=p,this.options=n.extend({},c,f),a(this.options),this._defaults=c,this._name=l,this.init(),window.addEventListener?(window.addEventListener("load",h),window.addEventListener("resize",h)):(window.attachEvent("load",h),window.attachEvent("resize",h))}var l="readmore",c={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},u={},d=0,h=i(function(){n("[data-readmore]").each(function(){var p=n(this),f=p.attr("aria-expanded")==="true";r(p),p.css({height:p.data(f?"expandedHeight":"collapsedHeight")})})},100);o.prototype={init:function(){var p=n(this.element);p.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),r(p);var f=p.data("collapsedHeight"),m=p.data("heightMargin");if(p.outerHeight(!0)<=f+m)return this.options.blockProcessed&&typeof this.options.blockProcessed=="function"&&this.options.blockProcessed(p,!1),!0;var v=p.attr("id")||s(),g=this.options.startOpen?this.options.lessLink:this.options.moreLink;p.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:v}),p.after(n(g).on("click",function(_){return function(b){_.toggle(this,p[0],b)}}(this)).attr({"data-readmore-toggle":v,"aria-controls":v})),this.options.startOpen||p.css({height:f}),this.options.blockProcessed&&typeof this.options.blockProcessed=="function"&&this.options.blockProcessed(p,!0)},toggle:function(p,f,m){m&&m.preventDefault(),p||(p=n('[aria-controls="'+this.element.id+'"]')[0]),f||(f=this.element);var v=n(f),g="",_="",b=!1,y=v.data("collapsedHeight");v.height()<=y?(g=v.data("expandedHeight")+"px",_="lessLink",b=!0):(g=y,_="moreLink"),this.options.beforeToggle&&typeof this.options.beforeToggle=="function"&&this.options.beforeToggle(p,v,!b),v.css({height:g}),v.on("transitionend",function(T){return function(){T.options.afterToggle&&typeof T.options.afterToggle=="function"&&T.options.afterToggle(p,v,b),n(this).attr({"aria-expanded":b}).off("transitionend")}}(this)),n(p).replaceWith(n(this.options[_]).on("click",function(T){return function(x){T.toggle(this,f,x)}}(this)).attr({"data-readmore-toggle":v.attr("id"),"aria-controls":v.attr("id")}))},destroy:function(){n(this.element).each(function(){var p=n(this);p.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),p.removeData()})}},n.fn.readmore=function(p){var f=arguments,m=this.selector;return p=p||{},typeof p=="object"?this.each(function(){if(n.data(this,"plugin_"+l)){var v=n.data(this,"plugin_"+l);v.destroy.apply(v)}p.selector=m,n.data(this,"plugin_"+l,new o(this,p))}):typeof p=="string"&&p[0]!=="_"&&p!=="init"?this.each(function(){var v=n.data(this,"plugin_"+l);v instanceof o&&typeof v[p]=="function"&&v[p].apply(v,Array.prototype.slice.call(f,1))}):void 0}})})(VM);we(document).ready(function(){function t(){window.innerWidth<1200?we(".spoiler--contacts").readmore({speed:75,collapsedHeight:!1,moreLink:'<button class="btn-read-more btn rounded-0 mt-8 p-0 h5 text-blue"> </button>',lessLink:'<button class="btn-read-more btn rounded-0 mt-8 p-0 h5 text-blue"> </button>'}):we(".spoiler--contacts").readmore("destroy").css("height","auto")}t(),we(window).resize(function(){t()}),we(".modal").on("shown.bs.modal",function(){t()})});we(document).ready(function(){function t(){we(".spoiler-list").readmore({speed:75,collapsedHeight:!1,moreLink:'<button class="btn-read-more btn rounded-0 mt-3 p-0 text-blue">'+transShowMore+"</button>",lessLink:'<button class="btn-read-more btn rounded-0 mt-3 p-0 text-blue">'+transShowLess+"</button>"})}t(),we(window).resize(function(){t()})});/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Bf="175",$M=0,ng=1,GM=2,V0=1,WM=2,Ji=3,Ks=0,Vn=1,ss=2,Hs=0,ga=1,ig=2,sg=3,rg=4,jM=5,br=100,XM=101,qM=102,YM=103,KM=104,ZM=200,QM=201,JM=202,eA=203,uh=204,dh=205,tA=206,nA=207,iA=208,sA=209,rA=210,aA=211,oA=212,lA=213,cA=214,hh=0,fh=1,ph=2,Ca=3,mh=4,gh=5,vh=6,yh=7,$0=0,uA=1,dA=2,Vs=0,G0=1,hA=2,fA=3,pA=4,mA=5,gA=6,vA=7,W0=300,Pa=301,La=302,_h=303,bh=304,hu=306,Eh=1e3,xr=1001,wh=1002,Mi=1003,yA=1004,Hl=1005,Si=1006,cd=1007,Bs=1008,ms=1009,j0=1010,X0=1011,$o=1012,Hf=1013,Mr=1014,os=1015,ol=1016,Vf=1017,$f=1018,Go=1020,q0=35902,Y0=1021,K0=1022,Ti=1023,Z0=1024,Q0=1025,Wo=1026,jo=1027,J0=1028,Gf=1029,ey=1030,Wf=1031,jf=1033,_c=33776,bc=33777,Ec=33778,wc=33779,xh=35840,Sh=35841,Th=35842,Mh=35843,Ah=36196,Ch=37492,Ph=37496,Lh=37808,Rh=37809,Ih=37810,Dh=37811,Oh=37812,kh=37813,Nh=37814,Fh=37815,Uh=37816,zh=37817,Bh=37818,Hh=37819,Vh=37820,$h=37821,xc=36492,Gh=36494,Wh=36495,ty=36283,jh=36284,Xh=36285,qh=36286,_A=3200,bA=3201,EA=0,wA=1,Ns="",ri="srgb",Ar="srgb-linear",$c="linear",It="srgb",Br=7680,ag=519,xA=512,SA=513,TA=514,ny=515,MA=516,AA=517,CA=518,PA=519,og=35044,lg="300 es",ls=2e3,Gc=2001;class Fa{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}}const Sn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let cg=1234567;const wo=Math.PI/180,Xo=180/Math.PI;function Ua(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Sn[t&255]+Sn[t>>8&255]+Sn[t>>16&255]+Sn[t>>24&255]+"-"+Sn[e&255]+Sn[e>>8&255]+"-"+Sn[e>>16&15|64]+Sn[e>>24&255]+"-"+Sn[n&63|128]+Sn[n>>8&255]+"-"+Sn[n>>16&255]+Sn[n>>24&255]+Sn[i&255]+Sn[i>>8&255]+Sn[i>>16&255]+Sn[i>>24&255]).toLowerCase()}function pt(t,e,n){return Math.max(e,Math.min(n,t))}function Xf(t,e){return(t%e+e)%e}function LA(t,e,n,i,s){return i+(t-e)*(s-i)/(n-e)}function RA(t,e,n){return t!==e?(n-t)/(e-t):0}function xo(t,e,n){return(1-n)*t+n*e}function IA(t,e,n,i){return xo(t,e,1-Math.exp(-n*i))}function DA(t,e=1){return e-Math.abs(Xf(t,e*2)-e)}function OA(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function kA(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function NA(t,e){return t+Math.floor(Math.random()*(e-t+1))}function FA(t,e){return t+Math.random()*(e-t)}function UA(t){return t*(.5-Math.random())}function zA(t){t!==void 0&&(cg=t);let e=cg+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function BA(t){return t*wo}function HA(t){return t*Xo}function VA(t){return(t&t-1)===0&&t!==0}function $A(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function GA(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function WA(t,e,n,i,s){const r=Math.cos,a=Math.sin,o=r(n/2),l=a(n/2),c=r((e+i)/2),u=a((e+i)/2),d=r((e-i)/2),h=a((e-i)/2),p=r((i-e)/2),f=a((i-e)/2);switch(s){case"XYX":t.set(o*u,l*d,l*h,o*c);break;case"YZY":t.set(l*h,o*u,l*d,o*c);break;case"ZXZ":t.set(l*d,l*h,o*u,o*c);break;case"XZX":t.set(o*u,l*f,l*p,o*c);break;case"YXY":t.set(l*p,o*u,l*f,o*c);break;case"ZYZ":t.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function na(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Pn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Lt={DEG2RAD:wo,RAD2DEG:Xo,generateUUID:Ua,clamp:pt,euclideanModulo:Xf,mapLinear:LA,inverseLerp:RA,lerp:xo,damp:IA,pingpong:DA,smoothstep:OA,smootherstep:kA,randInt:NA,randFloat:FA,randFloatSpread:UA,seededRandom:zA,degToRad:BA,radToDeg:HA,isPowerOfTwo:VA,ceilPowerOfTwo:$A,floorPowerOfTwo:GA,setQuaternionFromProperEuler:WA,normalize:Pn,denormalize:na};let Ut=class iy{constructor(e=0,n=0){iy.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=pt(this.x,e.x,n.x),this.y=pt(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=pt(this.x,e,n),this.y=pt(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(pt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*s+e.x,this.y=r*s+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};class ct{constructor(e,n,i,s,r,a,o,l,c){ct.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,s,r,a,o,l,c)}set(e,n,i,s,r,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=o,u[3]=n,u[4]=r,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],p=i[5],f=i[8],m=s[0],v=s[3],g=s[6],_=s[1],b=s[4],y=s[7],T=s[2],x=s[5],S=s[8];return r[0]=a*m+o*_+l*T,r[3]=a*v+o*b+l*x,r[6]=a*g+o*y+l*S,r[1]=c*m+u*_+d*T,r[4]=c*v+u*b+d*x,r[7]=c*g+u*y+d*S,r[2]=h*m+p*_+f*T,r[5]=h*v+p*b+f*x,r[8]=h*g+p*y+f*S,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*o*c-i*r*u+i*o*l+s*r*c-s*a*l}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,h=o*l-u*r,p=c*r-a*l,f=n*d+i*h+s*p;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=d*m,e[1]=(s*c-u*i)*m,e[2]=(o*i-s*a)*m,e[3]=h*m,e[4]=(u*n-s*l)*m,e[5]=(s*r-o*n)*m,e[6]=p*m,e[7]=(i*l-c*n)*m,e[8]=(a*n-i*r)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,r,a,o){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-s*c,s*l,-s*(-c*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(ud.makeScale(e,n)),this}rotate(e){return this.premultiply(ud.makeRotation(-e)),this}translate(e,n){return this.premultiply(ud.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ud=new ct;function sy(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Wc(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function jA(){const t=Wc("canvas");return t.style.display="block",t}const ug={};function Sc(t){t in ug||(ug[t]=!0,console.warn(t))}function XA(t,e,n){return new Promise(function(i,s){function r(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:s();break;case t.TIMEOUT_EXPIRED:setTimeout(r,n);break;default:i()}}setTimeout(r,n)})}function qA(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function YA(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const dg=new ct().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),hg=new ct().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function KA(){const t={enabled:!0,workingColorSpace:Ar,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===It&&(s.r=cs(s.r),s.g=cs(s.g),s.b=cs(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===It&&(s.r=va(s.r),s.g=va(s.g),s.b=va(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ns?$c:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[Ar]:{primaries:e,whitePoint:i,transfer:$c,toXYZ:dg,fromXYZ:hg,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ri},outputColorSpaceConfig:{drawingBufferColorSpace:ri}},[ri]:{primaries:e,whitePoint:i,transfer:It,toXYZ:dg,fromXYZ:hg,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ri}}}),t}const Et=KA();function cs(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function va(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Hr;class ZA{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Hr===void 0&&(Hr=Wc("canvas")),Hr.width=e.width,Hr.height=e.height;const s=Hr.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),i=Hr}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Wc("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=cs(r[a]/255)*255;return i.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(cs(n[i]/255)*255):n[i]=cs(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let QA=0;class qf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:QA++}),this.uuid=Ua(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(dd(s[a].image)):r.push(dd(s[a]))}else r=dd(s);i.url=r}return n||(e.images[this.uuid]=i),i}}function dd(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?ZA.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let JA=0;class kn extends Fa{constructor(e=kn.DEFAULT_IMAGE,n=kn.DEFAULT_MAPPING,i=xr,s=xr,r=Si,a=Bs,o=Ti,l=ms,c=kn.DEFAULT_ANISOTROPY,u=Ns){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:JA++}),this.uuid=Ua(),this.name="",this.source=new qf(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ut(0,0),this.repeat=new Ut(1,1),this.center=new Ut(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ct,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==W0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Eh:e.x=e.x-Math.floor(e.x);break;case xr:e.x=e.x<0?0:1;break;case wh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Eh:e.y=e.y-Math.floor(e.y);break;case xr:e.y=e.y<0?0:1;break;case wh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}kn.DEFAULT_IMAGE=null;kn.DEFAULT_MAPPING=W0;kn.DEFAULT_ANISOTROPY=1;class Xt{constructor(e=0,n=0,i=0,s=1){Xt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*s+a[12]*r,this.y=a[1]*n+a[5]*i+a[9]*s+a[13]*r,this.z=a[2]*n+a[6]*i+a[10]*s+a[14]*r,this.w=a[3]*n+a[7]*i+a[11]*s+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,r;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],p=l[5],f=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(f-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(f+v)<.1&&Math.abs(c+p+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(c+1)/2,y=(p+1)/2,T=(g+1)/2,x=(u+h)/4,S=(d+m)/4,M=(f+v)/4;return b>y&&b>T?b<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(b),s=x/i,r=S/i):y>T?y<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(y),i=x/s,r=M/s):T<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(T),i=S/r,s=M/r),this.set(i,s,r,n),this}let _=Math.sqrt((v-f)*(v-f)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(v-f)/_,this.y=(d-m)/_,this.z=(h-u)/_,this.w=Math.acos((c+p+g-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=pt(this.x,e.x,n.x),this.y=pt(this.y,e.y,n.y),this.z=pt(this.z,e.z,n.z),this.w=pt(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=pt(this.x,e,n),this.y=pt(this.y,e,n),this.z=pt(this.z,e,n),this.w=pt(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eC extends Fa{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Xt(0,0,e,n),this.scissorTest=!1,this.viewport=new Xt(0,0,e,n);const s={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Si,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new kn(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const s=Object.assign({},e.textures[n].image);this.textures[n].source=new qf(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zs extends eC{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class ry extends kn{constructor(e=null,n=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=Mi,this.minFilter=Mi,this.wrapR=xr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class tC extends kn{constructor(e=null,n=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=Mi,this.minFilter=Mi,this.wrapR=xr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let za=class{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerpFlat(e,n,i,s,r,a,o){let l=i[s+0],c=i[s+1],u=i[s+2],d=i[s+3];const h=r[a+0],p=r[a+1],f=r[a+2],m=r[a+3];if(o===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(o===1){e[n+0]=h,e[n+1]=p,e[n+2]=f,e[n+3]=m;return}if(d!==m||l!==h||c!==p||u!==f){let v=1-o;const g=l*h+c*p+u*f+d*m,_=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const T=Math.sqrt(b),x=Math.atan2(T,g*_);v=Math.sin(v*x)/T,o=Math.sin(o*x)/T}const y=o*_;if(l=l*v+h*y,c=c*v+p*y,u=u*v+f*y,d=d*v+m*y,v===1-o){const T=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=T,c*=T,u*=T,d*=T}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,s,r,a){const o=i[s],l=i[s+1],c=i[s+2],u=i[s+3],d=r[a],h=r[a+1],p=r[a+2],f=r[a+3];return e[n]=o*f+u*d+l*p-c*h,e[n+1]=l*f+u*h+c*d-o*p,e[n+2]=c*f+u*p+o*h-l*d,e[n+3]=u*f-o*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(s/2),d=o(r/2),h=l(i/2),p=l(s/2),f=l(r/2);switch(a){case"XYZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"YXZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"ZXY":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"ZYX":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"YZX":this._x=h*u*d+c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d-h*p*f;break;case"XZY":this._x=h*u*d-c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],r=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=i+o+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(r-c)*p,this._z=(a-s)*p}else if(i>o&&i>d){const p=2*Math.sqrt(1+i-o-d);this._w=(u-l)/p,this._x=.25*p,this._y=(s+a)/p,this._z=(r+c)/p}else if(o>d){const p=2*Math.sqrt(1+o-i-d);this._w=(r-c)/p,this._x=(s+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-o);this._w=(a-s)/p,this._x=(r+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pt(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,r=e._z,a=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+a*o+s*c-r*l,this._y=s*u+a*l+r*o-i*c,this._z=r*u+a*c+i*l-s*o,this._w=a*u-i*o-s*l-r*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+i*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-n;return this._w=p*a+n*this._w,this._x=p*i+n*this._x,this._y=p*s+n*this._y,this._z=p*r+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*d+this._w*h,this._x=i*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(n),r*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Ie=class ay{constructor(e=0,n=0,i=0){ay.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(fg.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(fg.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6]*s,this.y=r[1]*n+r[4]*i+r[7]*s,this.z=r[2]*n+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=e.elements,a=1/(r[3]*n+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*s+r[12])*a,this.y=(r[1]*n+r[5]*i+r[9]*s+r[13])*a,this.z=(r[2]*n+r[6]*i+r[10]*s+r[14])*a,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*s-o*i),u=2*(o*n-r*s),d=2*(r*i-a*n);return this.x=n+l*c+a*d-o*u,this.y=i+l*u+o*c-r*d,this.z=s+l*d+r*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[4]*i+r[8]*s,this.y=r[1]*n+r[5]*i+r[9]*s,this.z=r[2]*n+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=pt(this.x,e.x,n.x),this.y=pt(this.y,e.y,n.y),this.z=pt(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=pt(this.x,e,n),this.y=pt(this.y,e,n),this.z=pt(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pt(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,r=e.z,a=n.x,o=n.y,l=n.z;return this.x=s*l-r*o,this.y=r*a-i*l,this.z=i*o-s*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return hd.copy(this).projectOnVector(e),this.sub(hd)}reflect(e){return this.sub(hd.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(pt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const hd=new Ie,fg=new za;class Ba{constructor(e=new Ie(1/0,1/0,1/0),n=new Ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(gi.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(gi.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=gi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(n===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,gi):gi.fromBufferAttribute(r,a),gi.applyMatrix4(e.matrixWorld),this.expandByPoint(gi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Vl.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Vl.copy(i.boundingBox)),Vl.applyMatrix4(e.matrixWorld),this.union(Vl)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,gi),gi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ro),$l.subVectors(this.max,ro),Vr.subVectors(e.a,ro),$r.subVectors(e.b,ro),Gr.subVectors(e.c,ro),xs.subVectors($r,Vr),Ss.subVectors(Gr,$r),dr.subVectors(Vr,Gr);let n=[0,-xs.z,xs.y,0,-Ss.z,Ss.y,0,-dr.z,dr.y,xs.z,0,-xs.x,Ss.z,0,-Ss.x,dr.z,0,-dr.x,-xs.y,xs.x,0,-Ss.y,Ss.x,0,-dr.y,dr.x,0];return!fd(n,Vr,$r,Gr,$l)||(n=[1,0,0,0,1,0,0,0,1],!fd(n,Vr,$r,Gr,$l))?!1:(Gl.crossVectors(xs,Ss),n=[Gl.x,Gl.y,Gl.z],fd(n,Vr,$r,Gr,$l))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(gi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qi=[new Ie,new Ie,new Ie,new Ie,new Ie,new Ie,new Ie,new Ie],gi=new Ie,Vl=new Ba,Vr=new Ie,$r=new Ie,Gr=new Ie,xs=new Ie,Ss=new Ie,dr=new Ie,ro=new Ie,$l=new Ie,Gl=new Ie,hr=new Ie;function fd(t,e,n,i,s){for(let r=0,a=t.length-3;r<=a;r+=3){hr.fromArray(t,r);const o=s.x*Math.abs(hr.x)+s.y*Math.abs(hr.y)+s.z*Math.abs(hr.z),l=e.dot(hr),c=n.dot(hr),u=i.dot(hr);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const nC=new Ba,ao=new Ie,pd=new Ie;class Yf{constructor(e=new Ie,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):nC.setFromPoints(e).getCenter(i);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ao.subVectors(e,this.center);const n=ao.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=(i-this.radius)*.5;this.center.addScaledVector(ao,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pd.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ao.copy(e.center).add(pd)),this.expandByPoint(ao.copy(e.center).sub(pd))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Yi=new Ie,md=new Ie,Wl=new Ie,Ts=new Ie,gd=new Ie,jl=new Ie,vd=new Ie;class oy{constructor(e=new Ie,n=new Ie(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Yi)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Yi.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Yi.copy(this.origin).addScaledVector(this.direction,n),Yi.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){md.copy(e).add(n).multiplyScalar(.5),Wl.copy(n).sub(e).normalize(),Ts.copy(this.origin).sub(md);const r=e.distanceTo(n)*.5,a=-this.direction.dot(Wl),o=Ts.dot(this.direction),l=-Ts.dot(Wl),c=Ts.lengthSq(),u=Math.abs(1-a*a);let d,h,p,f;if(u>0)if(d=a*l-o,h=a*o-l,f=r*u,d>=0)if(h>=-f)if(h<=f){const m=1/u;d*=m,h*=m,p=d*(d+a*h+2*o)+h*(a*d+h+2*l)+c}else h=r,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;else h=-r,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;else h<=-f?(d=Math.max(0,-(-a*r+o)),h=d>0?-r:Math.min(Math.max(-r,-l),r),p=-d*d+h*(h+2*l)+c):h<=f?(d=0,h=Math.min(Math.max(-r,-l),r),p=h*(h+2*l)+c):(d=Math.max(0,-(a*r+o)),h=d>0?r:Math.min(Math.max(-r,-l),r),p=-d*d+h*(h+2*l)+c);else h=a>0?-r:r,d=Math.max(0,-(a*h+o)),p=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(md).addScaledVector(Wl,h),p}intersectSphere(e,n){Yi.subVectors(e.center,this.origin);const i=Yi.dot(this.direction),s=Yi.dot(Yi)-i*i,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,r,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,s=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,s=(e.min.x-h.x)*c),u>=0?(r=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),i>a||r>s||((r>i||isNaN(i))&&(i=r),(a<s||isNaN(s))&&(s=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||o>s)||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,Yi)!==null}intersectTriangle(e,n,i,s,r){gd.subVectors(n,e),jl.subVectors(i,e),vd.crossVectors(gd,jl);let a=this.direction.dot(vd),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Ts.subVectors(this.origin,e);const l=o*this.direction.dot(jl.crossVectors(Ts,jl));if(l<0)return null;const c=o*this.direction.dot(gd.cross(Ts));if(c<0||l+c>a)return null;const u=-o*Ts.dot(vd);return u<0?null:this.at(u/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let en=class Yh{constructor(e,n,i,s,r,a,o,l,c,u,d,h,p,f,m,v){Yh.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,s,r,a,o,l,c,u,d,h,p,f,m,v)}set(e,n,i,s,r,a,o,l,c,u,d,h,p,f,m,v){const g=this.elements;return g[0]=e,g[4]=n,g[8]=i,g[12]=s,g[1]=r,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=p,g[7]=f,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yh().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/Wr.setFromMatrixColumn(e,0).length(),r=1/Wr.setFromMatrixColumn(e,1).length(),a=1/Wr.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,s=e.y,r=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=a*u,p=a*d,f=o*u,m=o*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=p+f*c,n[5]=h-m*c,n[9]=-o*l,n[2]=m-h*c,n[6]=f+p*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,f=c*u,m=c*d;n[0]=h+m*o,n[4]=f*o-p,n[8]=a*c,n[1]=a*d,n[5]=a*u,n[9]=-o,n[2]=p*o-f,n[6]=m+h*o,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,f=c*u,m=c*d;n[0]=h-m*o,n[4]=-a*d,n[8]=f+p*o,n[1]=p+f*o,n[5]=a*u,n[9]=m-h*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,p=a*d,f=o*u,m=o*d;n[0]=l*u,n[4]=f*c-p,n[8]=h*c+m,n[1]=l*d,n[5]=m*c+h,n[9]=p*c-f,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,p=a*c,f=o*l,m=o*c;n[0]=l*u,n[4]=m-h*d,n[8]=f*d+p,n[1]=d,n[5]=a*u,n[9]=-o*u,n[2]=-c*u,n[6]=p*d+f,n[10]=h-m*d}else if(e.order==="XZY"){const h=a*l,p=a*c,f=o*l,m=o*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=h*d+m,n[5]=a*u,n[9]=p*d-f,n[2]=f*d-p,n[6]=o*u,n[10]=m*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(iC,e,sC)}lookAt(e,n,i){const s=this.elements;return Wn.subVectors(e,n),Wn.lengthSq()===0&&(Wn.z=1),Wn.normalize(),Ms.crossVectors(i,Wn),Ms.lengthSq()===0&&(Math.abs(i.z)===1?Wn.x+=1e-4:Wn.z+=1e-4,Wn.normalize(),Ms.crossVectors(i,Wn)),Ms.normalize(),Xl.crossVectors(Wn,Ms),s[0]=Ms.x,s[4]=Xl.x,s[8]=Wn.x,s[1]=Ms.y,s[5]=Xl.y,s[9]=Wn.y,s[2]=Ms.z,s[6]=Xl.z,s[10]=Wn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],f=i[2],m=i[6],v=i[10],g=i[14],_=i[3],b=i[7],y=i[11],T=i[15],x=s[0],S=s[4],M=s[8],w=s[12],E=s[1],C=s[5],P=s[9],A=s[13],R=s[2],N=s[6],U=s[10],k=s[14],D=s[3],W=s[7],O=s[11],B=s[15];return r[0]=a*x+o*E+l*R+c*D,r[4]=a*S+o*C+l*N+c*W,r[8]=a*M+o*P+l*U+c*O,r[12]=a*w+o*A+l*k+c*B,r[1]=u*x+d*E+h*R+p*D,r[5]=u*S+d*C+h*N+p*W,r[9]=u*M+d*P+h*U+p*O,r[13]=u*w+d*A+h*k+p*B,r[2]=f*x+m*E+v*R+g*D,r[6]=f*S+m*C+v*N+g*W,r[10]=f*M+m*P+v*U+g*O,r[14]=f*w+m*A+v*k+g*B,r[3]=_*x+b*E+y*R+T*D,r[7]=_*S+b*C+y*N+T*W,r[11]=_*M+b*P+y*U+T*O,r[15]=_*w+b*A+y*k+T*B,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],f=e[3],m=e[7],v=e[11],g=e[15];return f*(+r*l*d-s*c*d-r*o*h+i*c*h+s*o*p-i*l*p)+m*(+n*l*p-n*c*h+r*a*h-s*a*p+s*c*u-r*l*u)+v*(+n*c*d-n*o*p-r*a*d+i*a*p+r*o*u-i*c*u)+g*(-s*o*u-n*l*d+n*o*h+s*a*d-i*a*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],v=e[14],g=e[15],_=d*v*c-m*h*c+m*l*p-o*v*p-d*l*g+o*h*g,b=f*h*c-u*v*c-f*l*p+a*v*p+u*l*g-a*h*g,y=u*m*c-f*d*c+f*o*p-a*m*p-u*o*g+a*d*g,T=f*d*l-u*m*l-f*o*h+a*m*h+u*o*v-a*d*v,x=n*_+i*b+s*y+r*T;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=_*S,e[1]=(m*h*r-d*v*r-m*s*p+i*v*p+d*s*g-i*h*g)*S,e[2]=(o*v*r-m*l*r+m*s*c-i*v*c-o*s*g+i*l*g)*S,e[3]=(d*l*r-o*h*r-d*s*c+i*h*c+o*s*p-i*l*p)*S,e[4]=b*S,e[5]=(u*v*r-f*h*r+f*s*p-n*v*p-u*s*g+n*h*g)*S,e[6]=(f*l*r-a*v*r-f*s*c+n*v*c+a*s*g-n*l*g)*S,e[7]=(a*h*r-u*l*r+u*s*c-n*h*c-a*s*p+n*l*p)*S,e[8]=y*S,e[9]=(f*d*r-u*m*r-f*i*p+n*m*p+u*i*g-n*d*g)*S,e[10]=(a*m*r-f*o*r+f*i*c-n*m*c-a*i*g+n*o*g)*S,e[11]=(u*o*r-a*d*r-u*i*c+n*d*c+a*i*p-n*o*p)*S,e[12]=T*S,e[13]=(u*m*s-f*d*s+f*i*h-n*m*h-u*i*v+n*d*v)*S,e[14]=(f*o*s-a*m*s-f*i*l+n*m*l+a*i*v-n*o*v)*S,e[15]=(a*d*s-u*o*s+u*i*l-n*d*l-a*i*h+n*o*h)*S,this}scale(e){const n=this.elements,i=e.x,s=e.y,r=e.z;return n[0]*=i,n[4]*=s,n[8]*=r,n[1]*=i,n[5]*=s,n[9]*=r,n[2]*=i,n[6]*=s,n[10]*=r,n[3]*=i,n[7]*=s,n[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),r=1-i,a=e.x,o=e.y,l=e.z,c=r*a,u=r*o;return this.set(c*a+i,c*o-s*l,c*l+s*o,0,c*o+s*l,u*o+i,u*l-s*a,0,c*l-s*o,u*l+s*a,r*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,r,a){return this.set(1,i,r,0,e,1,a,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,r=n._x,a=n._y,o=n._z,l=n._w,c=r+r,u=a+a,d=o+o,h=r*c,p=r*u,f=r*d,m=a*u,v=a*d,g=o*d,_=l*c,b=l*u,y=l*d,T=i.x,x=i.y,S=i.z;return s[0]=(1-(m+g))*T,s[1]=(p+y)*T,s[2]=(f-b)*T,s[3]=0,s[4]=(p-y)*x,s[5]=(1-(h+g))*x,s[6]=(v+_)*x,s[7]=0,s[8]=(f+b)*S,s[9]=(v-_)*S,s[10]=(1-(h+m))*S,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let r=Wr.set(s[0],s[1],s[2]).length();const a=Wr.set(s[4],s[5],s[6]).length(),o=Wr.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],vi.copy(this);const c=1/r,u=1/a,d=1/o;return vi.elements[0]*=c,vi.elements[1]*=c,vi.elements[2]*=c,vi.elements[4]*=u,vi.elements[5]*=u,vi.elements[6]*=u,vi.elements[8]*=d,vi.elements[9]*=d,vi.elements[10]*=d,n.setFromRotationMatrix(vi),i.x=r,i.y=a,i.z=o,this}makePerspective(e,n,i,s,r,a,o=ls){const l=this.elements,c=2*r/(n-e),u=2*r/(i-s),d=(n+e)/(n-e),h=(i+s)/(i-s);let p,f;if(o===ls)p=-(a+r)/(a-r),f=-2*a*r/(a-r);else if(o===Gc)p=-a/(a-r),f=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,s,r,a,o=ls){const l=this.elements,c=1/(n-e),u=1/(i-s),d=1/(a-r),h=(n+e)*c,p=(i+s)*u;let f,m;if(o===ls)f=(a+r)*d,m=-2*d;else if(o===Gc)f=r*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=m,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}};const Wr=new Ie,vi=new en,iC=new Ie(0,0,0),sC=new Ie(1,1,1),Ms=new Ie,Xl=new Ie,Wn=new Ie,pg=new en,mg=new za;class $i{constructor(e=0,n=0,i=0,s=$i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s=this._order){return this._x=e,this._y=n,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const s=e.elements,r=s[0],a=s[4],o=s[8],l=s[1],c=s[5],u=s[9],d=s[2],h=s[6],p=s[10];switch(n){case"XYZ":this._y=Math.asin(pt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-pt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(pt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-pt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(pt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-pt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return pg.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pg,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return mg.setFromEuler(this),this.setFromQuaternion(mg,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$i.DEFAULT_ORDER="XYZ";class Kf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let rC=0;const gg=new Ie,jr=new za,Ki=new en,ql=new Ie,oo=new Ie,aC=new Ie,oC=new za,vg=new Ie(1,0,0),yg=new Ie(0,1,0),_g=new Ie(0,0,1),bg={type:"added"},lC={type:"removed"},Xr={type:"childadded",child:null},yd={type:"childremoved",child:null};class Jn extends Fa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rC++}),this.uuid=Ua(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jn.DEFAULT_UP.clone();const e=new Ie,n=new $i,i=new za,s=new Ie(1,1,1);function r(){i.setFromEuler(n,!1)}function a(){n.setFromQuaternion(i,void 0,!1)}n._onChange(r),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new en},normalMatrix:{value:new ct}}),this.matrix=new en,this.matrixWorld=new en,this.matrixAutoUpdate=Jn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Kf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return jr.setFromAxisAngle(e,n),this.quaternion.multiply(jr),this}rotateOnWorldAxis(e,n){return jr.setFromAxisAngle(e,n),this.quaternion.premultiply(jr),this}rotateX(e){return this.rotateOnAxis(vg,e)}rotateY(e){return this.rotateOnAxis(yg,e)}rotateZ(e){return this.rotateOnAxis(_g,e)}translateOnAxis(e,n){return gg.copy(e).applyQuaternion(this.quaternion),this.position.add(gg.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(vg,e)}translateY(e){return this.translateOnAxis(yg,e)}translateZ(e){return this.translateOnAxis(_g,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ki.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?ql.copy(e):ql.set(e,n,i);const s=this.parent;this.updateWorldMatrix(!0,!1),oo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ki.lookAt(oo,ql,this.up):Ki.lookAt(ql,oo,this.up),this.quaternion.setFromRotationMatrix(Ki),s&&(Ki.extractRotation(s.matrixWorld),jr.setFromRotationMatrix(Ki),this.quaternion.premultiply(jr.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bg),Xr.child=e,this.dispatchEvent(Xr),Xr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(lC),yd.child=e,this.dispatchEvent(yd),yd.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ki.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ki.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ki),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bg),Xr.child=e,this.dispatchEvent(Xr),Xr.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oo,e,aC),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oo,oC,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(r(e.materials,this.material[l]));s.material=o}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];s.animations.push(r(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),h=a(e.skeletons),p=a(e.animations),f=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),f.length>0&&(i.nodes=f)}return i.object=s,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Jn.DEFAULT_UP=new Ie(0,1,0);Jn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const yi=new Ie,Zi=new Ie,_d=new Ie,Qi=new Ie,qr=new Ie,Yr=new Ie,Eg=new Ie,bd=new Ie,Ed=new Ie,wd=new Ie,xd=new Xt,Sd=new Xt,Td=new Xt;class wi{constructor(e=new Ie,n=new Ie,i=new Ie){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,s){s.subVectors(i,n),yi.subVectors(e,n),s.cross(yi);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,n,i,s,r){yi.subVectors(s,n),Zi.subVectors(i,n),_d.subVectors(e,n);const a=yi.dot(yi),o=yi.dot(Zi),l=yi.dot(_d),c=Zi.dot(Zi),u=Zi.dot(_d),d=a*c-o*o;if(d===0)return r.set(0,0,0),null;const h=1/d,p=(c*l-o*u)*h,f=(a*u-o*l)*h;return r.set(1-p-f,f,p)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,Qi)===null?!1:Qi.x>=0&&Qi.y>=0&&Qi.x+Qi.y<=1}static getInterpolation(e,n,i,s,r,a,o,l){return this.getBarycoord(e,n,i,s,Qi)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,Qi.x),l.addScaledVector(a,Qi.y),l.addScaledVector(o,Qi.z),l)}static getInterpolatedAttribute(e,n,i,s,r,a){return xd.setScalar(0),Sd.setScalar(0),Td.setScalar(0),xd.fromBufferAttribute(e,n),Sd.fromBufferAttribute(e,i),Td.fromBufferAttribute(e,s),a.setScalar(0),a.addScaledVector(xd,r.x),a.addScaledVector(Sd,r.y),a.addScaledVector(Td,r.z),a}static isFrontFacing(e,n,i,s){return yi.subVectors(i,n),Zi.subVectors(e,n),yi.cross(Zi).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,i,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return yi.subVectors(this.c,this.b),Zi.subVectors(this.a,this.b),yi.cross(Zi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return wi.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,s,r){return wi.getInterpolation(e,this.a,this.b,this.c,n,i,s,r)}containsPoint(e){return wi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,s=this.b,r=this.c;let a,o;qr.subVectors(s,i),Yr.subVectors(r,i),bd.subVectors(e,i);const l=qr.dot(bd),c=Yr.dot(bd);if(l<=0&&c<=0)return n.copy(i);Ed.subVectors(e,s);const u=qr.dot(Ed),d=Yr.dot(Ed);if(u>=0&&d<=u)return n.copy(s);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(i).addScaledVector(qr,a);wd.subVectors(e,r);const p=qr.dot(wd),f=Yr.dot(wd);if(f>=0&&p<=f)return n.copy(r);const m=p*c-l*f;if(m<=0&&c>=0&&f<=0)return o=c/(c-f),n.copy(i).addScaledVector(Yr,o);const v=u*f-p*d;if(v<=0&&d-u>=0&&p-f>=0)return Eg.subVectors(r,s),o=(d-u)/(d-u+(p-f)),n.copy(s).addScaledVector(Eg,o);const g=1/(v+m+h);return a=m*g,o=h*g,n.copy(i).addScaledVector(qr,a).addScaledVector(Yr,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ly={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},As={h:0,s:0,l:0},Yl={h:0,s:0,l:0};function Md(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class kt{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ri){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Et.toWorkingColorSpace(this,n),this}setRGB(e,n,i,s=Et.workingColorSpace){return this.r=e,this.g=n,this.b=i,Et.toWorkingColorSpace(this,s),this}setHSL(e,n,i,s=Et.workingColorSpace){if(e=Xf(e,1),n=pt(n,0,1),i=pt(i,0,1),n===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+n):i+n-i*n,a=2*i-r;this.r=Md(a,r,e+1/3),this.g=Md(a,r,e),this.b=Md(a,r,e-1/3)}return Et.toWorkingColorSpace(this,s),this}setStyle(e,n=ri){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ri){const i=ly[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=cs(e.r),this.g=cs(e.g),this.b=cs(e.b),this}copyLinearToSRGB(e){return this.r=va(e.r),this.g=va(e.g),this.b=va(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ri){return Et.fromWorkingColorSpace(Tn.copy(this),e),Math.round(pt(Tn.r*255,0,255))*65536+Math.round(pt(Tn.g*255,0,255))*256+Math.round(pt(Tn.b*255,0,255))}getHexString(e=ri){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Et.workingColorSpace){Et.fromWorkingColorSpace(Tn.copy(this),n);const i=Tn.r,s=Tn.g,r=Tn.b,a=Math.max(i,s,r),o=Math.min(i,s,r);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-i)/d+2;break;case r:l=(i-s)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Et.workingColorSpace){return Et.fromWorkingColorSpace(Tn.copy(this),n),e.r=Tn.r,e.g=Tn.g,e.b=Tn.b,e}getStyle(e=ri){Et.fromWorkingColorSpace(Tn.copy(this),e);const n=Tn.r,i=Tn.g,s=Tn.b;return e!==ri?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,n,i){return this.getHSL(As),this.setHSL(As.h+e,As.s+n,As.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(As),e.getHSL(Yl);const i=xo(As.h,Yl.h,n),s=xo(As.s,Yl.s,n),r=xo(As.l,Yl.l,n);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*n+r[3]*i+r[6]*s,this.g=r[1]*n+r[4]*i+r[7]*s,this.b=r[2]*n+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Tn=new kt;kt.NAMES=ly;let cC=0;class fu extends Fa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cC++}),this.uuid=Ua(),this.name="",this.type="Material",this.blending=ga,this.side=Ks,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=uh,this.blendDst=dh,this.blendEquation=br,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new kt(0,0,0),this.blendAlpha=0,this.depthFunc=Ca,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ag,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Br,this.stencilZFail=Br,this.stencilZPass=Br,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ga&&(i.blending=this.blending),this.side!==Ks&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==uh&&(i.blendSrc=this.blendSrc),this.blendDst!==dh&&(i.blendDst=this.blendDst),this.blendEquation!==br&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ca&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ag&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Br&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Br&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Br&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const a=[];for(const o in r){const l=r[o];delete l.metadata,a.push(l)}return a}if(n){const r=s(e.textures),a=s(e.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const s=n.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=n[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ll extends fu{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $i,this.combine=$0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qt=new Ie,Kl=new Ut;let uC=0;class Hi{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:uC++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=og,this.updateRanges=[],this.gpuType=os,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=n.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)Kl.fromBufferAttribute(this,n),Kl.applyMatrix3(e),this.setXY(n,Kl.x,Kl.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.applyMatrix3(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.applyMatrix4(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.applyNormalMatrix(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)qt.fromBufferAttribute(this,n),qt.transformDirection(e),this.setXYZ(n,qt.x,qt.y,qt.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=na(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Pn(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=na(n,this.array)),n}setX(e,n){return this.normalized&&(n=Pn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=na(n,this.array)),n}setY(e,n){return this.normalized&&(n=Pn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=na(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Pn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=na(n,this.array)),n}setW(e,n){return this.normalized&&(n=Pn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Pn(n,this.array),i=Pn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,s){return e*=this.itemSize,this.normalized&&(n=Pn(n,this.array),i=Pn(i,this.array),s=Pn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,n,i,s,r){return e*=this.itemSize,this.normalized&&(n=Pn(n,this.array),i=Pn(i,this.array),s=Pn(s,this.array),r=Pn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==og&&(e.usage=this.usage),e}}class cy extends Hi{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class uy extends Hi{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class Vi extends Hi{constructor(e,n,i){super(new Float32Array(e),n,i)}}let dC=0;const ni=new en,Ad=new Jn,Kr=new Ie,jn=new Ba,lo=new Ba,ln=new Ie;class tr extends Fa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dC++}),this.uuid=Ua(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sy(e)?uy:cy)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new ct().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ni.makeRotationFromQuaternion(e),this.applyMatrix4(ni),this}rotateX(e){return ni.makeRotationX(e),this.applyMatrix4(ni),this}rotateY(e){return ni.makeRotationY(e),this.applyMatrix4(ni),this}rotateZ(e){return ni.makeRotationZ(e),this.applyMatrix4(ni),this}translate(e,n,i){return ni.makeTranslation(e,n,i),this.applyMatrix4(ni),this}scale(e,n,i){return ni.makeScale(e,n,i),this.applyMatrix4(ni),this}lookAt(e){return Ad.lookAt(e),Ad.updateMatrix(),this.applyMatrix4(Ad.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kr).negate(),this.translate(Kr.x,Kr.y,Kr.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Vi(i,3))}else{const i=Math.min(e.length,n.count);for(let s=0;s<i;s++){const r=e[s];n.setXYZ(s,r.x,r.y,r.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ba);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ie(-1/0,-1/0,-1/0),new Ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,s=n.length;i<s;i++){const r=n[i];jn.setFromBufferAttribute(r),this.morphTargetsRelative?(ln.addVectors(this.boundingBox.min,jn.min),this.boundingBox.expandByPoint(ln),ln.addVectors(this.boundingBox.max,jn.max),this.boundingBox.expandByPoint(ln)):(this.boundingBox.expandByPoint(jn.min),this.boundingBox.expandByPoint(jn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yf);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ie,1/0);return}if(e){const i=this.boundingSphere.center;if(jn.setFromBufferAttribute(e),n)for(let r=0,a=n.length;r<a;r++){const o=n[r];lo.setFromBufferAttribute(o),this.morphTargetsRelative?(ln.addVectors(jn.min,lo.min),jn.expandByPoint(ln),ln.addVectors(jn.max,lo.max),jn.expandByPoint(ln)):(jn.expandByPoint(lo.min),jn.expandByPoint(lo.max))}jn.getCenter(i);let s=0;for(let r=0,a=e.count;r<a;r++)ln.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(ln));if(n)for(let r=0,a=n.length;r<a;r++){const o=n[r],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)ln.fromBufferAttribute(o,c),l&&(Kr.fromBufferAttribute(e,c),ln.add(Kr)),s=Math.max(s,i.distanceToSquared(ln))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,s=n.normal,r=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Hi(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let M=0;M<i.count;M++)o[M]=new Ie,l[M]=new Ie;const c=new Ie,u=new Ie,d=new Ie,h=new Ut,p=new Ut,f=new Ut,m=new Ie,v=new Ie;function g(M,w,E){c.fromBufferAttribute(i,M),u.fromBufferAttribute(i,w),d.fromBufferAttribute(i,E),h.fromBufferAttribute(r,M),p.fromBufferAttribute(r,w),f.fromBufferAttribute(r,E),u.sub(c),d.sub(c),p.sub(h),f.sub(h);const C=1/(p.x*f.y-f.x*p.y);isFinite(C)&&(m.copy(u).multiplyScalar(f.y).addScaledVector(d,-p.y).multiplyScalar(C),v.copy(d).multiplyScalar(p.x).addScaledVector(u,-f.x).multiplyScalar(C),o[M].add(m),o[w].add(m),o[E].add(m),l[M].add(v),l[w].add(v),l[E].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let M=0,w=_.length;M<w;++M){const E=_[M],C=E.start,P=E.count;for(let A=C,R=C+P;A<R;A+=3)g(e.getX(A+0),e.getX(A+1),e.getX(A+2))}const b=new Ie,y=new Ie,T=new Ie,x=new Ie;function S(M){T.fromBufferAttribute(s,M),x.copy(T);const w=o[M];b.copy(w),b.sub(T.multiplyScalar(T.dot(w))).normalize(),y.crossVectors(x,w);const C=y.dot(l[M])<0?-1:1;a.setXYZW(M,b.x,b.y,b.z,C)}for(let M=0,w=_.length;M<w;++M){const E=_[M],C=E.start,P=E.count;for(let A=C,R=C+P;A<R;A+=3)S(e.getX(A+0)),S(e.getX(A+1)),S(e.getX(A+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Hi(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const s=new Ie,r=new Ie,a=new Ie,o=new Ie,l=new Ie,c=new Ie,u=new Ie,d=new Ie;if(e)for(let h=0,p=e.count;h<p;h+=3){const f=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);s.fromBufferAttribute(n,f),r.fromBufferAttribute(n,m),a.fromBufferAttribute(n,v),u.subVectors(a,r),d.subVectors(s,r),u.cross(d),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,v),o.add(u),l.add(u),c.add(u),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,p=n.count;h<p;h+=3)s.fromBufferAttribute(n,h+0),r.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),u.subVectors(a,r),d.subVectors(s,r),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)ln.fromBufferAttribute(e,n),ln.normalize(),e.setXYZ(n,ln.x,ln.y,ln.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,h=new c.constructor(l.length*u);let p=0,f=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?p=l[m]*o.data.stride+o.offset:p=l[m]*u;for(let g=0;g<u;g++)h[f++]=c[p++]}return new Hi(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new tr,i=this.index.array,s=this.attributes;for(const o in s){const l=s[o],c=e(l,i);n.setAttribute(o,c)}const r=this.morphAttributes;for(const o in r){const l=[],c=r[o];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,i);l.push(p)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(n))}const r=e.morphAttributes;for(const c in r){const u=[],d=r[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wg=new en,fr=new oy,Zl=new Yf,xg=new Ie,Ql=new Ie,Jl=new Ie,ec=new Ie,Cd=new Ie,tc=new Ie,Sg=new Ie,nc=new Ie;class ci extends Jn{constructor(e=new tr,n=new ll){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,n){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,a=i.morphTargetsRelative;n.fromBufferAttribute(s,e);const o=this.morphTargetInfluences;if(r&&o){tc.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=o[l],d=r[l];u!==0&&(Cd.fromBufferAttribute(d,e),a?tc.addScaledVector(Cd,u):tc.addScaledVector(Cd.sub(n),u))}n.add(tc)}return n}raycast(e,n){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Zl.copy(i.boundingSphere),Zl.applyMatrix4(r),fr.copy(e.ray).recast(e.near),!(Zl.containsPoint(fr.origin)===!1&&(fr.intersectSphere(Zl,xg)===null||fr.origin.distanceToSquared(xg)>(e.far-e.near)**2))&&(wg.copy(r).invert(),fr.copy(e.ray).applyMatrix4(wg),!(i.boundingBox!==null&&fr.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,fr)))}_computeIntersections(e,n,i){let s;const r=this.geometry,a=this.material,o=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,d=r.attributes.normal,h=r.groups,p=r.drawRange;if(o!==null)if(Array.isArray(a))for(let f=0,m=h.length;f<m;f++){const v=h[f],g=a[v.materialIndex],_=Math.max(v.start,p.start),b=Math.min(o.count,Math.min(v.start+v.count,p.start+p.count));for(let y=_,T=b;y<T;y+=3){const x=o.getX(y),S=o.getX(y+1),M=o.getX(y+2);s=ic(this,g,e,i,c,u,d,x,S,M),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=v.materialIndex,n.push(s))}}else{const f=Math.max(0,p.start),m=Math.min(o.count,p.start+p.count);for(let v=f,g=m;v<g;v+=3){const _=o.getX(v),b=o.getX(v+1),y=o.getX(v+2);s=ic(this,a,e,i,c,u,d,_,b,y),s&&(s.faceIndex=Math.floor(v/3),n.push(s))}}else if(l!==void 0)if(Array.isArray(a))for(let f=0,m=h.length;f<m;f++){const v=h[f],g=a[v.materialIndex],_=Math.max(v.start,p.start),b=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let y=_,T=b;y<T;y+=3){const x=y,S=y+1,M=y+2;s=ic(this,g,e,i,c,u,d,x,S,M),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=v.materialIndex,n.push(s))}}else{const f=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);for(let v=f,g=m;v<g;v+=3){const _=v,b=v+1,y=v+2;s=ic(this,a,e,i,c,u,d,_,b,y),s&&(s.faceIndex=Math.floor(v/3),n.push(s))}}}}function hC(t,e,n,i,s,r,a,o){let l;if(e.side===Vn?l=i.intersectTriangle(a,r,s,!0,o):l=i.intersectTriangle(s,r,a,e.side===Ks,o),l===null)return null;nc.copy(o),nc.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(nc);return c<n.near||c>n.far?null:{distance:c,point:nc.clone(),object:t}}function ic(t,e,n,i,s,r,a,o,l,c){t.getVertexPosition(o,Ql),t.getVertexPosition(l,Jl),t.getVertexPosition(c,ec);const u=hC(t,e,n,i,Ql,Jl,ec,Sg);if(u){const d=new Ie;wi.getBarycoord(Sg,Ql,Jl,ec,d),s&&(u.uv=wi.getInterpolatedAttribute(s,o,l,c,d,new Ut)),r&&(u.uv1=wi.getInterpolatedAttribute(r,o,l,c,d,new Ut)),a&&(u.normal=wi.getInterpolatedAttribute(a,o,l,c,d,new Ie),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new Ie,materialIndex:0};wi.getNormal(Ql,Jl,ec,h.normal),u.face=h,u.barycoord=d}return u}class cl extends tr{constructor(e=1,n=1,i=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const l=[],c=[],u=[],d=[];let h=0,p=0;f("z","y","x",-1,-1,i,n,e,a,r,0),f("z","y","x",1,-1,i,n,-e,a,r,1),f("x","z","y",1,1,e,i,n,s,a,2),f("x","z","y",1,-1,e,i,-n,s,a,3),f("x","y","z",1,-1,e,n,i,s,r,4),f("x","y","z",-1,-1,e,n,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new Vi(c,3)),this.setAttribute("normal",new Vi(u,3)),this.setAttribute("uv",new Vi(d,2));function f(m,v,g,_,b,y,T,x,S,M,w){const E=y/S,C=T/M,P=y/2,A=T/2,R=x/2,N=S+1,U=M+1;let k=0,D=0;const W=new Ie;for(let O=0;O<U;O++){const B=O*C-A;for(let V=0;V<N;V++){const j=V*E-P;W[m]=j*_,W[v]=B*b,W[g]=R,c.push(W.x,W.y,W.z),W[m]=0,W[v]=0,W[g]=x>0?1:-1,u.push(W.x,W.y,W.z),d.push(V/S),d.push(1-O/M),k+=1}}for(let O=0;O<M;O++)for(let B=0;B<S;B++){const V=h+B+N*O,j=h+B+N*(O+1),Y=h+(B+1)+N*(O+1),H=h+(B+1)+N*O;l.push(V,j,H),l.push(j,Y,H),D+=6}o.addGroup(p,D,w),p+=D,h+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ra(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const s=t[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=s.clone():Array.isArray(s)?e[n][i]=s.slice():e[n][i]=s}}return e}function Ln(t){const e={};for(let n=0;n<t.length;n++){const i=Ra(t[n]);for(const s in i)e[s]=i[s]}return e}function fC(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function dy(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Et.workingColorSpace}const pC={clone:Ra,merge:Ln};var mC=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gC=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qs extends fu{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mC,this.fragmentShader=gC,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ra(e.uniforms),this.uniformsGroups=fC(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?n.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[s]={type:"m4",value:a.toArray()}:n.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class hy extends Jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new en,this.projectionMatrix=new en,this.projectionMatrixInverse=new en,this.coordinateSystem=ls}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Cs=new Ie,Tg=new Ut,Mg=new Ut;class ai extends hy{constructor(e=50,n=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Xo*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(wo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xo*2*Math.atan(Math.tan(wo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){Cs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Cs.x,Cs.y).multiplyScalar(-e/Cs.z),Cs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Cs.x,Cs.y).multiplyScalar(-e/Cs.z)}getViewSize(e,n){return this.getViewBounds(e,Tg,Mg),n.subVectors(Mg,Tg)}setViewOffset(e,n,i,s,r,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(wo*.5*this.fov)/this.zoom,i=2*n,s=this.aspect*i,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;r+=a.offsetX*s/l,n-=a.offsetY*i/c,s*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Zr=-90,Qr=1;class vC extends Jn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new ai(Zr,Qr,e,n);s.layers=this.layers,this.add(s);const r=new ai(Zr,Qr,e,n);r.layers=this.layers,this.add(r);const a=new ai(Zr,Qr,e,n);a.layers=this.layers,this.add(a);const o=new ai(Zr,Qr,e,n);o.layers=this.layers,this.add(o);const l=new ai(Zr,Qr,e,n);l.layers=this.layers,this.add(l);const c=new ai(Zr,Qr,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,s,r,a,o,l]=n;for(const c of n)this.remove(c);if(e===ls)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Gc)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(n,r),e.setRenderTarget(i,1,s),e.render(n,a),e.setRenderTarget(i,2,s),e.render(n,o),e.setRenderTarget(i,3,s),e.render(n,l),e.setRenderTarget(i,4,s),e.render(n,c),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,s),e.render(n,u),e.setRenderTarget(d,h,p),e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class fy extends kn{constructor(e=[],n=Pa,i,s,r,a,o,l,c,u){super(e,n,i,s,r,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class yC extends Zs{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new fy(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Si}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new cl(5,5,5),r=new Qs({name:"CubemapFromEquirect",uniforms:Ra(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Vn,blending:Hs});r.uniforms.tEquirect.value=n;const a=new ci(s,r),o=n.minFilter;return n.minFilter===Bs&&(n.minFilter=Si),new vC(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n=!0,i=!0,s=!0){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,i,s);e.setRenderTarget(r)}}class aa extends Jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _C={type:"move"};class Pd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new aa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new aa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new aa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let s=null,r=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=n.getJointPose(m,i),g=this._getHandJoint(c,m);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,f=.005;c.inputState.pinching&&h>p+f?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-f&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=n.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(s=n.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(_C)))}return o!==null&&(o.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new aa;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class Ag extends Jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $i,this.environmentIntensity=1,this.environmentRotation=new $i,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}const Ld=new Ie,bC=new Ie,EC=new ct;class yr{constructor(e=new Ie(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=Ld.subVectors(i,n).cross(bC.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(Ld),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:n.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||EC.getNormalMatrix(e),s=this.coplanarPoint(Ld).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const pr=new Yf,sc=new Ie;class Zf{constructor(e=new yr,n=new yr,i=new yr,s=new yr,r=new yr,a=new yr){this.planes=[e,n,i,s,r,a]}set(e,n,i,s,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(i),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=ls){const i=this.planes,s=e.elements,r=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],h=s[7],p=s[8],f=s[9],m=s[10],v=s[11],g=s[12],_=s[13],b=s[14],y=s[15];if(i[0].setComponents(l-r,h-c,v-p,y-g).normalize(),i[1].setComponents(l+r,h+c,v+p,y+g).normalize(),i[2].setComponents(l+a,h+u,v+f,y+_).normalize(),i[3].setComponents(l-a,h-u,v-f,y-_).normalize(),i[4].setComponents(l-o,h-d,v-m,y-b).normalize(),n===ls)i[5].setComponents(l+o,h+d,v+m,y+b).normalize();else if(n===Gc)i[5].setComponents(o,d,m,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),pr.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),pr.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(pr)}intersectsSprite(e){return pr.center.set(0,0,0),pr.radius=.7071067811865476,pr.applyMatrix4(e.matrixWorld),this.intersectsSphere(pr)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(n[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(sc.x=s.normal.x>0?e.max.x:e.min.x,sc.y=s.normal.y>0?e.max.y:e.min.y,sc.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(sc)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class py extends kn{constructor(e,n,i=Mr,s,r,a,o=Mi,l=Mi,c,u=Wo){if(u!==Wo&&u!==jo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new qf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class pu extends tr{constructor(e=1,n=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s};const r=e/2,a=n/2,o=Math.floor(i),l=Math.floor(s),c=o+1,u=l+1,d=e/o,h=n/l,p=[],f=[],m=[],v=[];for(let g=0;g<u;g++){const _=g*h-a;for(let b=0;b<c;b++){const y=b*d-r;f.push(y,-_,0),m.push(0,0,1),v.push(b/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<o;_++){const b=_+c*g,y=_+c*(g+1),T=_+1+c*(g+1),x=_+1+c*g;p.push(b,y,x),p.push(y,T,x)}this.setIndex(p),this.setAttribute("position",new Vi(f,3)),this.setAttribute("normal",new Vi(m,3)),this.setAttribute("uv",new Vi(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pu(e.width,e.height,e.widthSegments,e.heightSegments)}}class ul extends tr{constructor(e=1,n=32,i=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new Ie,h=new Ie,p=[],f=[],m=[],v=[];for(let g=0;g<=i;g++){const _=[],b=g/i;let y=0;g===0&&a===0?y=.5/n:g===i&&l===Math.PI&&(y=-.5/n);for(let T=0;T<=n;T++){const x=T/n;d.x=-e*Math.cos(s+x*r)*Math.sin(a+b*o),d.y=e*Math.cos(a+b*o),d.z=e*Math.sin(s+x*r)*Math.sin(a+b*o),f.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),v.push(x+y,1-b),_.push(c++)}u.push(_)}for(let g=0;g<i;g++)for(let _=0;_<n;_++){const b=u[g][_+1],y=u[g][_],T=u[g+1][_],x=u[g+1][_+1];(g!==0||a>0)&&p.push(b,y,x),(g!==i-1||l<Math.PI)&&p.push(y,T,x)}this.setIndex(p),this.setAttribute("position",new Vi(f,3)),this.setAttribute("normal",new Vi(m,3)),this.setAttribute("uv",new Vi(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ul(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wC extends fu{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_A,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xC extends fu{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Kh={enabled:!1};class SC{constructor(e,n,i){const s=this;let r=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(u){o++,r===!1&&s.onStart!==void 0&&s.onStart(u,a,o),r=!0},this.itemEnd=function(u){a++,s.onProgress!==void 0&&s.onProgress(u,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],f=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return f}return null}}}const TC=new SC;let Qf=class{constructor(e){this.manager=e!==void 0?e:TC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(s,r){i.load(e,s,n,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Qf.DEFAULT_MATERIAL_NAME="__DEFAULT";class MC extends hy{constructor(e=-1,n=1,i=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,a=i+e,o=s+n,l=s-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,a=r+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class AC extends ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const Cg=new en;class CC{constructor(e,n,i=0,s=1/0){this.ray=new oy(e,n),this.near=i,this.far=s,this.camera=null,this.layers=new Kf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return Cg.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Cg),this}intersectObject(e,n=!0,i=[]){return Zh(e,this,i,n),i.sort(Pg),i}intersectObjects(e,n=!0,i=[]){for(let s=0,r=e.length;s<r;s++)Zh(e[s],this,i,n);return i.sort(Pg),i}}function Pg(t,e){return t.distance-e.distance}function Zh(t,e,n,i){let s=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(s=!1),s===!0&&i===!0){const r=t.children;for(let a=0,o=r.length;a<o;a++)Zh(r[a],e,n,!0)}}function Lg(t,e,n,i){const s=PC(i);switch(n){case Y0:return t*e;case Z0:return t*e;case Q0:return t*e*2;case J0:return t*e/s.components*s.byteLength;case Gf:return t*e/s.components*s.byteLength;case ey:return t*e*2/s.components*s.byteLength;case Wf:return t*e*2/s.components*s.byteLength;case K0:return t*e*3/s.components*s.byteLength;case Ti:return t*e*4/s.components*s.byteLength;case jf:return t*e*4/s.components*s.byteLength;case _c:case bc:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Ec:case wc:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Sh:case Mh:return Math.max(t,16)*Math.max(e,8)/4;case xh:case Th:return Math.max(t,8)*Math.max(e,8)/2;case Ah:case Ch:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Ph:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Lh:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Rh:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Ih:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Dh:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Oh:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case kh:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Nh:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Fh:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Uh:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case zh:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Bh:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Hh:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Vh:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case $h:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case xc:case Gh:case Wh:return Math.ceil(t/4)*Math.ceil(e/4)*16;case ty:case jh:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Xh:case qh:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function PC(t){switch(t){case ms:case j0:return{byteLength:1,components:1};case $o:case X0:case ol:return{byteLength:2,components:1};case Vf:case $f:return{byteLength:2,components:4};case Mr:case Hf:case os:return{byteLength:4,components:1};case q0:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bf);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function my(){let t=null,e=!1,n=null,i=null;function s(r,a){n(r,a),i=t.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(s),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){n=r},setContext:function(r){t=r}}}function LC(t){const e=new WeakMap;function n(o,l){const c=o.array,u=o.usage,d=c.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=t.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=t.HALF_FLOAT:p=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=t.SHORT;else if(c instanceof Uint32Array)p=t.UNSIGNED_INT;else if(c instanceof Int32Array)p=t.INT;else if(c instanceof Int8Array)p=t.BYTE;else if(c instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,o),d.length===0)t.bufferSubData(c,0,u);else{d.sort((p,f)=>p.start-f.start);let h=0;for(let p=1;p<d.length;p++){const f=d[h],m=d[p];m.start<=f.start+f.count+1?f.count=Math.max(f.count,m.start+m.count-f.start):(++h,d[h]=m)}d.length=h+1;for(let p=0,f=d.length;p<f;p++){const m=d[p];t.bufferSubData(c,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,n(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:s,remove:r,update:a}}var RC=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,IC=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,DC=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OC=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kC=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,NC=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,FC=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,UC=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zC=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,BC=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,HC=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,VC=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,$C=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,GC=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,WC=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jC=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,XC=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qC=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,YC=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,KC=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ZC=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,QC=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,JC=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,e2=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,t2=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,n2=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,i2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,s2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,r2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,a2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,o2="gl_FragColor = linearToOutputTexel( gl_FragColor );",l2=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,c2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,u2=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,d2=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,h2=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,f2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,p2=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,m2=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,g2=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,v2=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,y2=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_2=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,b2=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,E2=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,w2=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,x2=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,S2=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,T2=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,M2=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,A2=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,C2=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,P2=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,L2=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,R2=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,I2=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,D2=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,O2=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,k2=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,N2=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,F2=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,U2=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,z2=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,B2=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H2=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,V2=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,$2=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,G2=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,W2=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,j2=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,X2=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,q2=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Y2=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,K2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Z2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Q2=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,J2=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,eP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,tP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,nP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,rP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,aP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,lP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,cP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,hP=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,fP=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,mP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,gP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,yP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_P=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,EP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,wP=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,xP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,SP=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,TP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,MP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,AP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,PP=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const LP=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,RP=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DP=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kP=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FP=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,UP=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zP=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,HP=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VP=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$P=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,WP=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jP=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XP=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qP=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,YP=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KP=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ZP=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,QP=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JP=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eL=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,tL=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nL=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iL=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sL=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,rL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aL=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oL=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,lL=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ut={alphahash_fragment:RC,alphahash_pars_fragment:IC,alphamap_fragment:DC,alphamap_pars_fragment:OC,alphatest_fragment:kC,alphatest_pars_fragment:NC,aomap_fragment:FC,aomap_pars_fragment:UC,batching_pars_vertex:zC,batching_vertex:BC,begin_vertex:HC,beginnormal_vertex:VC,bsdfs:$C,iridescence_fragment:GC,bumpmap_pars_fragment:WC,clipping_planes_fragment:jC,clipping_planes_pars_fragment:XC,clipping_planes_pars_vertex:qC,clipping_planes_vertex:YC,color_fragment:KC,color_pars_fragment:ZC,color_pars_vertex:QC,color_vertex:JC,common:e2,cube_uv_reflection_fragment:t2,defaultnormal_vertex:n2,displacementmap_pars_vertex:i2,displacementmap_vertex:s2,emissivemap_fragment:r2,emissivemap_pars_fragment:a2,colorspace_fragment:o2,colorspace_pars_fragment:l2,envmap_fragment:c2,envmap_common_pars_fragment:u2,envmap_pars_fragment:d2,envmap_pars_vertex:h2,envmap_physical_pars_fragment:x2,envmap_vertex:f2,fog_vertex:p2,fog_pars_vertex:m2,fog_fragment:g2,fog_pars_fragment:v2,gradientmap_pars_fragment:y2,lightmap_pars_fragment:_2,lights_lambert_fragment:b2,lights_lambert_pars_fragment:E2,lights_pars_begin:w2,lights_toon_fragment:S2,lights_toon_pars_fragment:T2,lights_phong_fragment:M2,lights_phong_pars_fragment:A2,lights_physical_fragment:C2,lights_physical_pars_fragment:P2,lights_fragment_begin:L2,lights_fragment_maps:R2,lights_fragment_end:I2,logdepthbuf_fragment:D2,logdepthbuf_pars_fragment:O2,logdepthbuf_pars_vertex:k2,logdepthbuf_vertex:N2,map_fragment:F2,map_pars_fragment:U2,map_particle_fragment:z2,map_particle_pars_fragment:B2,metalnessmap_fragment:H2,metalnessmap_pars_fragment:V2,morphinstance_vertex:$2,morphcolor_vertex:G2,morphnormal_vertex:W2,morphtarget_pars_vertex:j2,morphtarget_vertex:X2,normal_fragment_begin:q2,normal_fragment_maps:Y2,normal_pars_fragment:K2,normal_pars_vertex:Z2,normal_vertex:Q2,normalmap_pars_fragment:J2,clearcoat_normal_fragment_begin:eP,clearcoat_normal_fragment_maps:tP,clearcoat_pars_fragment:nP,iridescence_pars_fragment:iP,opaque_fragment:sP,packing:rP,premultiplied_alpha_fragment:aP,project_vertex:oP,dithering_fragment:lP,dithering_pars_fragment:cP,roughnessmap_fragment:uP,roughnessmap_pars_fragment:dP,shadowmap_pars_fragment:hP,shadowmap_pars_vertex:fP,shadowmap_vertex:pP,shadowmask_pars_fragment:mP,skinbase_vertex:gP,skinning_pars_vertex:vP,skinning_vertex:yP,skinnormal_vertex:_P,specularmap_fragment:bP,specularmap_pars_fragment:EP,tonemapping_fragment:wP,tonemapping_pars_fragment:xP,transmission_fragment:SP,transmission_pars_fragment:TP,uv_pars_fragment:MP,uv_pars_vertex:AP,uv_vertex:CP,worldpos_vertex:PP,background_vert:LP,background_frag:RP,backgroundCube_vert:IP,backgroundCube_frag:DP,cube_vert:OP,cube_frag:kP,depth_vert:NP,depth_frag:FP,distanceRGBA_vert:UP,distanceRGBA_frag:zP,equirect_vert:BP,equirect_frag:HP,linedashed_vert:VP,linedashed_frag:$P,meshbasic_vert:GP,meshbasic_frag:WP,meshlambert_vert:jP,meshlambert_frag:XP,meshmatcap_vert:qP,meshmatcap_frag:YP,meshnormal_vert:KP,meshnormal_frag:ZP,meshphong_vert:QP,meshphong_frag:JP,meshphysical_vert:eL,meshphysical_frag:tL,meshtoon_vert:nL,meshtoon_frag:iL,points_vert:sL,points_frag:rL,shadow_vert:aL,shadow_frag:oL,sprite_vert:lL,sprite_frag:cL},Ye={common:{diffuse:{value:new kt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ct},alphaMap:{value:null},alphaMapTransform:{value:new ct},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ct}},envmap:{envMap:{value:null},envMapRotation:{value:new ct},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ct}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ct}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ct},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ct},normalScale:{value:new Ut(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ct},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ct}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ct}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ct}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ct},alphaTest:{value:0},uvTransform:{value:new ct}},sprite:{diffuse:{value:new kt(16777215)},opacity:{value:1},center:{value:new Ut(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ct},alphaMap:{value:null},alphaMapTransform:{value:new ct},alphaTest:{value:0}}},Ni={basic:{uniforms:Ln([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:ut.meshbasic_vert,fragmentShader:ut.meshbasic_frag},lambert:{uniforms:Ln([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new kt(0)}}]),vertexShader:ut.meshlambert_vert,fragmentShader:ut.meshlambert_frag},phong:{uniforms:Ln([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:ut.meshphong_vert,fragmentShader:ut.meshphong_frag},standard:{uniforms:Ln([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag},toon:{uniforms:Ln([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new kt(0)}}]),vertexShader:ut.meshtoon_vert,fragmentShader:ut.meshtoon_frag},matcap:{uniforms:Ln([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:ut.meshmatcap_vert,fragmentShader:ut.meshmatcap_frag},points:{uniforms:Ln([Ye.points,Ye.fog]),vertexShader:ut.points_vert,fragmentShader:ut.points_frag},dashed:{uniforms:Ln([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ut.linedashed_vert,fragmentShader:ut.linedashed_frag},depth:{uniforms:Ln([Ye.common,Ye.displacementmap]),vertexShader:ut.depth_vert,fragmentShader:ut.depth_frag},normal:{uniforms:Ln([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:ut.meshnormal_vert,fragmentShader:ut.meshnormal_frag},sprite:{uniforms:Ln([Ye.sprite,Ye.fog]),vertexShader:ut.sprite_vert,fragmentShader:ut.sprite_frag},background:{uniforms:{uvTransform:{value:new ct},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ut.background_vert,fragmentShader:ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ct}},vertexShader:ut.backgroundCube_vert,fragmentShader:ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ut.cube_vert,fragmentShader:ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ut.equirect_vert,fragmentShader:ut.equirect_frag},distanceRGBA:{uniforms:Ln([Ye.common,Ye.displacementmap,{referencePosition:{value:new Ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ut.distanceRGBA_vert,fragmentShader:ut.distanceRGBA_frag},shadow:{uniforms:Ln([Ye.lights,Ye.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:ut.shadow_vert,fragmentShader:ut.shadow_frag}};Ni.physical={uniforms:Ln([Ni.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ct},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ct},clearcoatNormalScale:{value:new Ut(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ct},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ct},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ct},sheen:{value:0},sheenColor:{value:new kt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ct},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ct},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ct},transmissionSamplerSize:{value:new Ut},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ct},attenuationDistance:{value:0},attenuationColor:{value:new kt(0)},specularColor:{value:new kt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ct},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ct},anisotropyVector:{value:new Ut},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ct}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag};const rc={r:0,b:0,g:0},mr=new $i,uL=new en;function dL(t,e,n,i,s,r,a){const o=new kt(0);let l=r===!0?0:1,c,u,d=null,h=0,p=null;function f(b){let y=b.isScene===!0?b.background:null;return y&&y.isTexture&&(y=(b.backgroundBlurriness>0?n:e).get(y)),y}function m(b){let y=!1;const T=f(b);T===null?g(o,l):T&&T.isColor&&(g(T,1),y=!0);const x=t.xr.getEnvironmentBlendMode();x==="additive"?i.buffers.color.setClear(0,0,0,1,a):x==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(t.autoClear||y)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function v(b,y){const T=f(y);T&&(T.isCubeTexture||T.mapping===hu)?(u===void 0&&(u=new ci(new cl(1,1,1),new Qs({name:"BackgroundCubeMaterial",uniforms:Ra(Ni.backgroundCube.uniforms),vertexShader:Ni.backgroundCube.vertexShader,fragmentShader:Ni.backgroundCube.fragmentShader,side:Vn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,S,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),mr.copy(y.backgroundRotation),mr.x*=-1,mr.y*=-1,mr.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(mr.y*=-1,mr.z*=-1),u.material.uniforms.envMap.value=T,u.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(uL.makeRotationFromEuler(mr)),u.material.toneMapped=Et.getTransfer(T.colorSpace)!==It,(d!==T||h!==T.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,d=T,h=T.version,p=t.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null)):T&&T.isTexture&&(c===void 0&&(c=new ci(new pu(2,2),new Qs({name:"BackgroundMaterial",uniforms:Ra(Ni.background.uniforms),vertexShader:Ni.background.vertexShader,fragmentShader:Ni.background.fragmentShader,side:Ks,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=T,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=Et.getTransfer(T.colorSpace)!==It,T.matrixAutoUpdate===!0&&T.updateMatrix(),c.material.uniforms.uvTransform.value.copy(T.matrix),(d!==T||h!==T.version||p!==t.toneMapping)&&(c.material.needsUpdate=!0,d=T,h=T.version,p=t.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}function g(b,y){b.getRGB(rc,dy(t)),i.buffers.color.setClear(rc.r,rc.g,rc.b,y,a)}function _(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(b,y=1){o.set(b),l=y,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,g(o,l)},render:m,addToRenderList:v,dispose:_}}function hL(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},s=h(null);let r=s,a=!1;function o(E,C,P,A,R){let N=!1;const U=d(A,P,C);r!==U&&(r=U,c(r.object)),N=p(E,A,P,R),N&&f(E,A,P,R),R!==null&&e.update(R,t.ELEMENT_ARRAY_BUFFER),(N||a)&&(a=!1,y(E,C,P,A),R!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(R).buffer))}function l(){return t.createVertexArray()}function c(E){return t.bindVertexArray(E)}function u(E){return t.deleteVertexArray(E)}function d(E,C,P){const A=P.wireframe===!0;let R=i[E.id];R===void 0&&(R={},i[E.id]=R);let N=R[C.id];N===void 0&&(N={},R[C.id]=N);let U=N[A];return U===void 0&&(U=h(l()),N[A]=U),U}function h(E){const C=[],P=[],A=[];for(let R=0;R<n;R++)C[R]=0,P[R]=0,A[R]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:C,enabledAttributes:P,attributeDivisors:A,object:E,attributes:{},index:null}}function p(E,C,P,A){const R=r.attributes,N=C.attributes;let U=0;const k=P.getAttributes();for(const D in k)if(k[D].location>=0){const O=R[D];let B=N[D];if(B===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(B=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(B=E.instanceColor)),O===void 0||O.attribute!==B||B&&O.data!==B.data)return!0;U++}return r.attributesNum!==U||r.index!==A}function f(E,C,P,A){const R={},N=C.attributes;let U=0;const k=P.getAttributes();for(const D in k)if(k[D].location>=0){let O=N[D];O===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(O=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(O=E.instanceColor));const B={};B.attribute=O,O&&O.data&&(B.data=O.data),R[D]=B,U++}r.attributes=R,r.attributesNum=U,r.index=A}function m(){const E=r.newAttributes;for(let C=0,P=E.length;C<P;C++)E[C]=0}function v(E){g(E,0)}function g(E,C){const P=r.newAttributes,A=r.enabledAttributes,R=r.attributeDivisors;P[E]=1,A[E]===0&&(t.enableVertexAttribArray(E),A[E]=1),R[E]!==C&&(t.vertexAttribDivisor(E,C),R[E]=C)}function _(){const E=r.newAttributes,C=r.enabledAttributes;for(let P=0,A=C.length;P<A;P++)C[P]!==E[P]&&(t.disableVertexAttribArray(P),C[P]=0)}function b(E,C,P,A,R,N,U){U===!0?t.vertexAttribIPointer(E,C,P,R,N):t.vertexAttribPointer(E,C,P,A,R,N)}function y(E,C,P,A){m();const R=A.attributes,N=P.getAttributes(),U=C.defaultAttributeValues;for(const k in N){const D=N[k];if(D.location>=0){let W=R[k];if(W===void 0&&(k==="instanceMatrix"&&E.instanceMatrix&&(W=E.instanceMatrix),k==="instanceColor"&&E.instanceColor&&(W=E.instanceColor)),W!==void 0){const O=W.normalized,B=W.itemSize,V=e.get(W);if(V===void 0)continue;const j=V.buffer,Y=V.type,H=V.bytesPerElement,q=Y===t.INT||Y===t.UNSIGNED_INT||W.gpuType===Hf;if(W.isInterleavedBufferAttribute){const K=W.data,G=K.stride,te=W.offset;if(K.isInstancedInterleavedBuffer){for(let ue=0;ue<D.locationSize;ue++)g(D.location+ue,K.meshPerAttribute);E.isInstancedMesh!==!0&&A._maxInstanceCount===void 0&&(A._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let ue=0;ue<D.locationSize;ue++)v(D.location+ue);t.bindBuffer(t.ARRAY_BUFFER,j);for(let ue=0;ue<D.locationSize;ue++)b(D.location+ue,B/D.locationSize,Y,O,G*H,(te+B/D.locationSize*ue)*H,q)}else{if(W.isInstancedBufferAttribute){for(let K=0;K<D.locationSize;K++)g(D.location+K,W.meshPerAttribute);E.isInstancedMesh!==!0&&A._maxInstanceCount===void 0&&(A._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let K=0;K<D.locationSize;K++)v(D.location+K);t.bindBuffer(t.ARRAY_BUFFER,j);for(let K=0;K<D.locationSize;K++)b(D.location+K,B/D.locationSize,Y,O,B*H,B/D.locationSize*K*H,q)}}else if(U!==void 0){const O=U[k];if(O!==void 0)switch(O.length){case 2:t.vertexAttrib2fv(D.location,O);break;case 3:t.vertexAttrib3fv(D.location,O);break;case 4:t.vertexAttrib4fv(D.location,O);break;default:t.vertexAttrib1fv(D.location,O)}}}}_()}function T(){M();for(const E in i){const C=i[E];for(const P in C){const A=C[P];for(const R in A)u(A[R].object),delete A[R];delete C[P]}delete i[E]}}function x(E){if(i[E.id]===void 0)return;const C=i[E.id];for(const P in C){const A=C[P];for(const R in A)u(A[R].object),delete A[R];delete C[P]}delete i[E.id]}function S(E){for(const C in i){const P=i[C];if(P[E.id]===void 0)continue;const A=P[E.id];for(const R in A)u(A[R].object),delete A[R];delete P[E.id]}}function M(){w(),a=!0,r!==s&&(r=s,c(r.object))}function w(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:M,resetDefaultState:w,dispose:T,releaseStatesOfGeometry:x,releaseStatesOfProgram:S,initAttributes:m,enableAttribute:v,disableUnusedAttributes:_}}function fL(t,e,n){let i;function s(c){i=c}function r(c,u){t.drawArrays(i,c,u),n.update(u,i,1)}function a(c,u,d){d!==0&&(t.drawArraysInstanced(i,c,u,d),n.update(u,i,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let p=0;for(let f=0;f<d;f++)p+=u[f];n.update(p,i,1)}function l(c,u,d,h){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let f=0;f<c.length;f++)a(c[f],u[f],h[f]);else{p.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,d);let f=0;for(let m=0;m<d;m++)f+=u[m]*h[m];n.update(f,i,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function pL(t,e,n,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");s=t.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(S){return!(S!==Ti&&i.convert(S)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(S){const M=S===ol&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==ms&&i.convert(S)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==os&&!M)}function l(S){if(S==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),_=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),b=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=f>0,x=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:_,maxVaryings:b,maxFragmentUniforms:y,vertexTextures:T,maxSamples:x}}function mL(t){const e=this;let n=null,i=0,s=!1,r=!1;const a=new yr,o=new ct,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||i!==0||s;return s=h,i=d.length,p},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,h){n=u(d,h,0)},this.setState=function(d,h,p){const f=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=t.get(d);if(!s||f===null||f.length===0||r&&!v)r?u(null):c();else{const _=r?0:i,b=_*4;let y=g.clippingState||null;l.value=y,y=u(f,h,b,p);for(let T=0;T!==b;++T)y[T]=n[T];g.clippingState=y,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,f){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,f!==!0||v===null){const g=p+m*4,_=h.matrixWorldInverse;o.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let b=0,y=p;b!==m;++b,y+=4)a.copy(d[b]).applyMatrix4(_,o),a.normal.toArray(v,y),v[y+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function gL(t){let e=new WeakMap;function n(a,o){return o===_h?a.mapping=Pa:o===bh&&(a.mapping=La),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===_h||o===bh)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new yC(l.height);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",s),n(c.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const oa=4,Rg=[.125,.215,.35,.446,.526,.582],Er=20,Rd=new MC,Ig=new kt;let Id=null,Dd=0,Od=0,kd=!1;const _r=(1+Math.sqrt(5))/2,Jr=1/_r,Dg=[new Ie(-_r,Jr,0),new Ie(_r,Jr,0),new Ie(-Jr,0,_r),new Ie(Jr,0,_r),new Ie(0,_r,-Jr),new Ie(0,_r,Jr),new Ie(-1,1,-1),new Ie(1,1,-1),new Ie(-1,1,1),new Ie(1,1,1)],vL=new Ie;class Og{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,s=100,r={}){const{size:a=256,position:o=vL}=r;Id=this._renderer.getRenderTarget(),Dd=this._renderer.getActiveCubeFace(),Od=this._renderer.getActiveMipmapLevel(),kd=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,s,l,o),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Fg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ng(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Id,Dd,Od),this._renderer.xr.enabled=kd,e.scissorTest=!1,ac(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Pa||e.mapping===La?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Id=this._renderer.getRenderTarget(),Dd=this._renderer.getActiveCubeFace(),Od=this._renderer.getActiveMipmapLevel(),kd=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Si,minFilter:Si,generateMipmaps:!1,type:ol,format:Ti,colorSpace:Ar,depthBuffer:!1},s=kg(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=kg(e,n,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=yL(r)),this._blurMaterial=_L(r,e,n)}return s}_compileMaterial(e){const n=new ci(this._lodPlanes[0],e);this._renderer.compile(n,Rd)}_sceneToCubeUV(e,n,i,s,r){const l=new ai(90,1,n,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(Ig),d.toneMapping=Vs,d.autoClear=!1;const f=new ll({name:"PMREM.Background",side:Vn,depthWrite:!1,depthTest:!1}),m=new ci(new cl,f);let v=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,v=!0):(f.color.copy(Ig),v=!0);for(let _=0;_<6;_++){const b=_%3;b===0?(l.up.set(0,c[_],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x+u[_],r.y,r.z)):b===1?(l.up.set(0,0,c[_]),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y+u[_],r.z)):(l.up.set(0,c[_],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y,r.z+u[_]));const y=this._cubeSize;ac(s,b*y,_>2?y:0,y,y),d.setRenderTarget(s),v&&d.render(m,l),d.render(e,l)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=g}_textureToCubeUV(e,n){const i=this._renderer,s=e.mapping===Pa||e.mapping===La;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=Fg()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ng());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new ci(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;ac(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(a,Rd)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=Dg[(s-r-1)%Dg.length];this._blur(e,r-1,r,a,o)}n.autoClear=i}_blur(e,n,i,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,i,s,"latitudinal",r),this._halfBlur(a,e,i,i,s,"longitudinal",r)}_halfBlur(e,n,i,s,r,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new ci(this._lodPlanes[s],c),h=c.uniforms,p=this._sizeLods[i]-1,f=isFinite(r)?Math.PI/(2*p):2*Math.PI/(2*Er-1),m=r/f,v=isFinite(r)?1+Math.floor(u*m):Er;v>Er&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Er}`);const g=[];let _=0;for(let S=0;S<Er;++S){const M=S/m,w=Math.exp(-M*M/2);g.push(w),S===0?_+=w:S<v&&(_+=2*w)}for(let S=0;S<g.length;S++)g[S]=g[S]/_;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:b}=this;h.dTheta.value=f,h.mipInt.value=b-i;const y=this._sizeLods[s],T=3*y*(s>b-oa?s-b+oa:0),x=4*(this._cubeSize-y);ac(n,T,x,3*y,2*y),l.setRenderTarget(n),l.render(d,Rd)}}function yL(t){const e=[],n=[],i=[];let s=t;const r=t-oa+1+Rg.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);n.push(o);let l=1/o;a>t-oa?l=Rg[a-t+oa-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,f=6,m=3,v=2,g=1,_=new Float32Array(m*f*p),b=new Float32Array(v*f*p),y=new Float32Array(g*f*p);for(let x=0;x<p;x++){const S=x%3*2/3-1,M=x>2?0:-1,w=[S,M,0,S+2/3,M,0,S+2/3,M+1,0,S,M,0,S+2/3,M+1,0,S,M+1,0];_.set(w,m*f*x),b.set(h,v*f*x);const E=[x,x,x,x,x,x];y.set(E,g*f*x)}const T=new tr;T.setAttribute("position",new Hi(_,m)),T.setAttribute("uv",new Hi(b,v)),T.setAttribute("faceIndex",new Hi(y,g)),e.push(T),s>oa&&s--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function kg(t,e,n){const i=new Zs(t,e,n);return i.texture.mapping=hu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ac(t,e,n,i,s){t.viewport.set(e,n,i,s),t.scissor.set(e,n,i,s)}function _L(t,e,n){const i=new Float32Array(Er),s=new Ie(0,1,0);return new Qs({name:"SphericalGaussianBlur",defines:{n:Er,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Jf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hs,depthTest:!1,depthWrite:!1})}function Ng(){return new Qs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Jf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hs,depthTest:!1,depthWrite:!1})}function Fg(){return new Qs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Jf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hs,depthTest:!1,depthWrite:!1})}function Jf(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bL(t){let e=new WeakMap,n=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===_h||l===bh,u=l===Pa||l===La;if(c||u){let d=e.get(o);const h=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return n===null&&(n=new Og(t)),d=c?n.fromEquirectangular(o,d):n.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&s(p)?(n===null&&(n=new Og(t)),d=c?n.fromEquirectangular(o):n.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",r),d.texture):null}}}return o}function s(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:a}}function EL(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=t.getExtension(i)}return e[i]=s,s}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const s=n(i);return s===null&&Sc("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function wL(t,e,n,i){const s={},r=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const f in h.attributes)e.remove(h.attributes[f]);h.removeEventListener("dispose",a),delete s[h.id];const p=r.get(h);p&&(e.remove(p),r.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function o(d,h){return s[h.id]===!0||(h.addEventListener("dispose",a),s[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],t.ARRAY_BUFFER)}function c(d){const h=[],p=d.index,f=d.attributes.position;let m=0;if(p!==null){const _=p.array;m=p.version;for(let b=0,y=_.length;b<y;b+=3){const T=_[b+0],x=_[b+1],S=_[b+2];h.push(T,x,x,S,S,T)}}else if(f!==void 0){const _=f.array;m=f.version;for(let b=0,y=_.length/3-1;b<y;b+=3){const T=b+0,x=b+1,S=b+2;h.push(T,x,x,S,S,T)}}else return;const v=new(sy(h)?uy:cy)(h,1);v.version=m;const g=r.get(d);g&&e.remove(g),r.set(d,v)}function u(d){const h=r.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return r.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function xL(t,e,n){let i;function s(h){i=h}let r,a;function o(h){r=h.type,a=h.bytesPerElement}function l(h,p){t.drawElements(i,p,r,h*a),n.update(p,i,1)}function c(h,p,f){f!==0&&(t.drawElementsInstanced(i,p,r,h*a,f),n.update(p,i,f))}function u(h,p,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,r,h,0,f);let v=0;for(let g=0;g<f;g++)v+=p[g];n.update(v,i,1)}function d(h,p,f,m){if(f===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<h.length;g++)c(h[g]/a,p[g],m[g]);else{v.multiDrawElementsInstancedWEBGL(i,p,0,r,h,0,m,0,f);let g=0;for(let _=0;_<f;_++)g+=p[_]*m[_];n.update(g,i,1)}}this.setMode=s,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function SL(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(r/3);break;case t.LINES:n.lines+=o*(r/2);break;case t.LINE_STRIP:n.lines+=o*(r-1);break;case t.LINE_LOOP:n.lines+=o*r;break;case t.POINTS:n.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:i}}function TL(t,e,n){const i=new WeakMap,s=new Xt;function r(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let h=i.get(o);if(h===void 0||h.count!==d){let w=function(){S.dispose(),i.delete(o),o.removeEventListener("dispose",w)};h!==void 0&&h.texture.dispose();const p=o.morphAttributes.position!==void 0,f=o.morphAttributes.normal!==void 0,m=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],_=o.morphAttributes.color||[];let b=0;p===!0&&(b=1),f===!0&&(b=2),m===!0&&(b=3);let y=o.attributes.position.count*b,T=1;y>e.maxTextureSize&&(T=Math.ceil(y/e.maxTextureSize),y=e.maxTextureSize);const x=new Float32Array(y*T*4*d),S=new ry(x,y,T,d);S.type=os,S.needsUpdate=!0;const M=b*4;for(let E=0;E<d;E++){const C=v[E],P=g[E],A=_[E],R=y*T*4*E;for(let N=0;N<C.count;N++){const U=N*M;p===!0&&(s.fromBufferAttribute(C,N),x[R+U+0]=s.x,x[R+U+1]=s.y,x[R+U+2]=s.z,x[R+U+3]=0),f===!0&&(s.fromBufferAttribute(P,N),x[R+U+4]=s.x,x[R+U+5]=s.y,x[R+U+6]=s.z,x[R+U+7]=0),m===!0&&(s.fromBufferAttribute(A,N),x[R+U+8]=s.x,x[R+U+9]=s.y,x[R+U+10]=s.z,x[R+U+11]=A.itemSize===4?s.w:1)}}h={count:d,texture:S,size:new Ut(y,T)},i.set(o,h),o.addEventListener("dispose",w)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",a.morphTexture,n);else{let p=0;for(let m=0;m<c.length;m++)p+=c[m];const f=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",f),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:r}}function ML(t,e,n,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(s.get(d)!==c&&(e.update(d),s.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),s.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;s.get(h)!==c&&(h.update(),s.set(h,c))}return d}function a(){s=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:r,dispose:a}}const gy=new kn,Ug=new py(1,1),vy=new ry,yy=new tC,_y=new fy,zg=[],Bg=[],Hg=new Float32Array(16),Vg=new Float32Array(9),$g=new Float32Array(4);function Ha(t,e,n){const i=t[0];if(i<=0||i>0)return t;const s=e*n;let r=zg[s];if(r===void 0&&(r=new Float32Array(s),zg[s]=r),e!==0){i.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(r,o)}return r}function tn(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function nn(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function mu(t,e){let n=Bg[e];n===void 0&&(n=new Int32Array(e),Bg[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function AL(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function CL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(tn(n,e))return;t.uniform2fv(this.addr,e),nn(n,e)}}function PL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(tn(n,e))return;t.uniform3fv(this.addr,e),nn(n,e)}}function LL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(tn(n,e))return;t.uniform4fv(this.addr,e),nn(n,e)}}function RL(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(tn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),nn(n,e)}else{if(tn(n,i))return;$g.set(i),t.uniformMatrix2fv(this.addr,!1,$g),nn(n,i)}}function IL(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(tn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),nn(n,e)}else{if(tn(n,i))return;Vg.set(i),t.uniformMatrix3fv(this.addr,!1,Vg),nn(n,i)}}function DL(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(tn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),nn(n,e)}else{if(tn(n,i))return;Hg.set(i),t.uniformMatrix4fv(this.addr,!1,Hg),nn(n,i)}}function OL(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function kL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(tn(n,e))return;t.uniform2iv(this.addr,e),nn(n,e)}}function NL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(tn(n,e))return;t.uniform3iv(this.addr,e),nn(n,e)}}function FL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(tn(n,e))return;t.uniform4iv(this.addr,e),nn(n,e)}}function UL(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function zL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(tn(n,e))return;t.uniform2uiv(this.addr,e),nn(n,e)}}function BL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(tn(n,e))return;t.uniform3uiv(this.addr,e),nn(n,e)}}function HL(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(tn(n,e))return;t.uniform4uiv(this.addr,e),nn(n,e)}}function VL(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s);let r;this.type===t.SAMPLER_2D_SHADOW?(Ug.compareFunction=ny,r=Ug):r=gy,n.setTexture2D(e||r,s)}function $L(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(e||yy,s)}function GL(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTextureCube(e||_y,s)}function WL(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(e||vy,s)}function jL(t){switch(t){case 5126:return AL;case 35664:return CL;case 35665:return PL;case 35666:return LL;case 35674:return RL;case 35675:return IL;case 35676:return DL;case 5124:case 35670:return OL;case 35667:case 35671:return kL;case 35668:case 35672:return NL;case 35669:case 35673:return FL;case 5125:return UL;case 36294:return zL;case 36295:return BL;case 36296:return HL;case 35678:case 36198:case 36298:case 36306:case 35682:return VL;case 35679:case 36299:case 36307:return $L;case 35680:case 36300:case 36308:case 36293:return GL;case 36289:case 36303:case 36311:case 36292:return WL}}function XL(t,e){t.uniform1fv(this.addr,e)}function qL(t,e){const n=Ha(e,this.size,2);t.uniform2fv(this.addr,n)}function YL(t,e){const n=Ha(e,this.size,3);t.uniform3fv(this.addr,n)}function KL(t,e){const n=Ha(e,this.size,4);t.uniform4fv(this.addr,n)}function ZL(t,e){const n=Ha(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function QL(t,e){const n=Ha(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function JL(t,e){const n=Ha(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function eR(t,e){t.uniform1iv(this.addr,e)}function tR(t,e){t.uniform2iv(this.addr,e)}function nR(t,e){t.uniform3iv(this.addr,e)}function iR(t,e){t.uniform4iv(this.addr,e)}function sR(t,e){t.uniform1uiv(this.addr,e)}function rR(t,e){t.uniform2uiv(this.addr,e)}function aR(t,e){t.uniform3uiv(this.addr,e)}function oR(t,e){t.uniform4uiv(this.addr,e)}function lR(t,e,n){const i=this.cache,s=e.length,r=mu(n,s);tn(i,r)||(t.uniform1iv(this.addr,r),nn(i,r));for(let a=0;a!==s;++a)n.setTexture2D(e[a]||gy,r[a])}function cR(t,e,n){const i=this.cache,s=e.length,r=mu(n,s);tn(i,r)||(t.uniform1iv(this.addr,r),nn(i,r));for(let a=0;a!==s;++a)n.setTexture3D(e[a]||yy,r[a])}function uR(t,e,n){const i=this.cache,s=e.length,r=mu(n,s);tn(i,r)||(t.uniform1iv(this.addr,r),nn(i,r));for(let a=0;a!==s;++a)n.setTextureCube(e[a]||_y,r[a])}function dR(t,e,n){const i=this.cache,s=e.length,r=mu(n,s);tn(i,r)||(t.uniform1iv(this.addr,r),nn(i,r));for(let a=0;a!==s;++a)n.setTexture2DArray(e[a]||vy,r[a])}function hR(t){switch(t){case 5126:return XL;case 35664:return qL;case 35665:return YL;case 35666:return KL;case 35674:return ZL;case 35675:return QL;case 35676:return JL;case 5124:case 35670:return eR;case 35667:case 35671:return tR;case 35668:case 35672:return nR;case 35669:case 35673:return iR;case 5125:return sR;case 36294:return rR;case 36295:return aR;case 36296:return oR;case 35678:case 36198:case 36298:case 36306:case 35682:return lR;case 35679:case 36299:case 36307:return cR;case 35680:case 36300:case 36308:case 36293:return uR;case 36289:case 36303:case 36311:case 36292:return dR}}class fR{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=jL(n.type)}}class pR{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=hR(n.type)}}class mR{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(e,n[o.id],i)}}}const Nd=/(\w+)(\])?(\[|\.)?/g;function Gg(t,e){t.seq.push(e),t.map[e.id]=e}function gR(t,e,n){const i=t.name,s=i.length;for(Nd.lastIndex=0;;){const r=Nd.exec(i),a=Nd.lastIndex;let o=r[1];const l=r[2]==="]",c=r[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===s){Gg(n,c===void 0?new fR(o,t,e):new pR(o,t,e));break}else{let d=n.map[o];d===void 0&&(d=new mR(o),Gg(n,d)),n=d}}}class Tc{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(n,s),a=e.getUniformLocation(n,r.name);gR(r,a,this)}}setValue(e,n,i,s){const r=this.map[n];r!==void 0&&r.setValue(e,i,s)}setOptional(e,n,i){const s=n[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,n,i,s){for(let r=0,a=n.length;r!==a;++r){const o=n[r],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,s)}}static seqWithValue(e,n){const i=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in n&&i.push(a)}return i}}function Wg(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const vR=37297;let yR=0;function _R(t,e){const n=t.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,n.length);for(let a=s;a<r;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return i.join(`
`)}const jg=new ct;function bR(t){Et._getMatrix(jg,Et.workingColorSpace,t);const e=`mat3( ${jg.elements.map(n=>n.toFixed(4))} )`;switch(Et.getTransfer(t)){case $c:return[e,"LinearTransferOETF"];case It:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function Xg(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),s=t.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return n.toUpperCase()+`

`+s+`

`+_R(t.getShaderSource(e),a)}else return s}function ER(t,e){const n=bR(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function wR(t,e){let n;switch(e){case G0:n="Linear";break;case hA:n="Reinhard";break;case fA:n="Cineon";break;case pA:n="ACESFilmic";break;case gA:n="AgX";break;case vA:n="Neutral";break;case mA:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const oc=new Ie;function xR(){Et.getLuminanceCoefficients(oc);const t=oc.x.toFixed(4),e=oc.y.toFixed(4),n=oc.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function SR(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(go).join(`
`)}function TR(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function MR(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=t.getActiveAttrib(e,s),a=r.name;let o=1;r.type===t.FLOAT_MAT2&&(o=2),r.type===t.FLOAT_MAT3&&(o=3),r.type===t.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function go(t){return t!==""}function qg(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Yg(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const AR=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qh(t){return t.replace(AR,PR)}const CR=new Map;function PR(t,e){let n=ut[e];if(n===void 0){const i=CR.get(e);if(i!==void 0)n=ut[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Qh(n)}const LR=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Kg(t){return t.replace(LR,RR)}function RR(t,e,n,i){let s="";for(let r=parseInt(e);r<parseInt(n);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function Zg(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function IR(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===V0?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===WM?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ji&&(e="SHADOWMAP_TYPE_VSM"),e}function DR(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Pa:case La:e="ENVMAP_TYPE_CUBE";break;case hu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function OR(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case La:e="ENVMAP_MODE_REFRACTION";break}return e}function kR(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case $0:e="ENVMAP_BLENDING_MULTIPLY";break;case uA:e="ENVMAP_BLENDING_MIX";break;case dA:e="ENVMAP_BLENDING_ADD";break}return e}function NR(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function FR(t,e,n,i){const s=t.getContext(),r=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=IR(n),c=DR(n),u=OR(n),d=kR(n),h=NR(n),p=SR(n),f=TR(r),m=s.createProgram();let v,g,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(go).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(go).join(`
`),g.length>0&&(g+=`
`)):(v=[Zg(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(go).join(`
`),g=[Zg(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Vs?"#define TONE_MAPPING":"",n.toneMapping!==Vs?ut.tonemapping_pars_fragment:"",n.toneMapping!==Vs?wR("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ut.colorspace_pars_fragment,ER("linearToOutputTexel",n.outputColorSpace),xR(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(go).join(`
`)),a=Qh(a),a=qg(a,n),a=Yg(a,n),o=Qh(o),o=qg(o,n),o=Yg(o,n),a=Kg(a),o=Kg(o),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",n.glslVersion===lg?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===lg?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const b=_+v+a,y=_+g+o,T=Wg(s,s.VERTEX_SHADER,b),x=Wg(s,s.FRAGMENT_SHADER,y);s.attachShader(m,T),s.attachShader(m,x),n.index0AttributeName!==void 0?s.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m);function S(C){if(t.debug.checkShaderErrors){const P=s.getProgramInfoLog(m).trim(),A=s.getShaderInfoLog(T).trim(),R=s.getShaderInfoLog(x).trim();let N=!0,U=!0;if(s.getProgramParameter(m,s.LINK_STATUS)===!1)if(N=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(s,m,T,x);else{const k=Xg(s,T,"vertex"),D=Xg(s,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,s.VALIDATE_STATUS)+`

Material Name: `+C.name+`
Material Type: `+C.type+`

Program Info Log: `+P+`
`+k+`
`+D)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(A===""||R==="")&&(U=!1);U&&(C.diagnostics={runnable:N,programLog:P,vertexShader:{log:A,prefix:v},fragmentShader:{log:R,prefix:g}})}s.deleteShader(T),s.deleteShader(x),M=new Tc(s,m),w=MR(s,m)}let M;this.getUniforms=function(){return M===void 0&&S(this),M};let w;this.getAttributes=function(){return w===void 0&&S(this),w};let E=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=s.getProgramParameter(m,vR)),E},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=yR++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=T,this.fragmentShader=x,this}let UR=0;class zR{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(n),r=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new BR(e),n.set(e,i)),i}}class BR{constructor(e){this.id=UR++,this.code=e,this.usedTimes=0}}function HR(t,e,n,i,s,r,a){const o=new Kf,l=new zR,c=new Set,u=[],d=s.logarithmicDepthBuffer,h=s.vertexTextures;let p=s.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(w){return c.add(w),w===0?"uv":`uv${w}`}function v(w,E,C,P,A){const R=P.fog,N=A.geometry,U=w.isMeshStandardMaterial?P.environment:null,k=(w.isMeshStandardMaterial?n:e).get(w.envMap||U),D=k&&k.mapping===hu?k.image.height:null,W=f[w.type];w.precision!==null&&(p=s.getMaxPrecision(w.precision),p!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",p,"instead."));const O=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,B=O!==void 0?O.length:0;let V=0;N.morphAttributes.position!==void 0&&(V=1),N.morphAttributes.normal!==void 0&&(V=2),N.morphAttributes.color!==void 0&&(V=3);let j,Y,H,q;if(W){const _t=Ni[W];j=_t.vertexShader,Y=_t.fragmentShader}else j=w.vertexShader,Y=w.fragmentShader,l.update(w),H=l.getVertexShaderID(w),q=l.getFragmentShaderID(w);const K=t.getRenderTarget(),G=t.state.buffers.depth.getReversed(),te=A.isInstancedMesh===!0,ue=A.isBatchedMesh===!0,se=!!w.map,X=!!w.matcap,ne=!!k,F=!!w.aoMap,fe=!!w.lightMap,ve=!!w.bumpMap,pe=!!w.normalMap,Me=!!w.displacementMap,Pe=!!w.emissiveMap,Ce=!!w.metalnessMap,z=!!w.roughnessMap,L=w.anisotropy>0,Q=w.clearcoat>0,oe=w.dispersion>0,he=w.iridescence>0,de=w.sheen>0,ee=w.transmission>0,ie=L&&!!w.anisotropyMap,le=Q&&!!w.clearcoatMap,ye=Q&&!!w.clearcoatNormalMap,Se=Q&&!!w.clearcoatRoughnessMap,_e=he&&!!w.iridescenceMap,Te=he&&!!w.iridescenceThicknessMap,ke=de&&!!w.sheenColorMap,Ne=de&&!!w.sheenRoughnessMap,Ge=!!w.specularMap,Be=!!w.specularColorMap,qe=!!w.specularIntensityMap,ge=ee&&!!w.transmissionMap,Ue=ee&&!!w.thicknessMap,xe=!!w.gradientMap,Le=!!w.alphaMap,ze=w.alphaTest>0,He=!!w.alphaHash,We=!!w.extensions;let tt=Vs;w.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(tt=t.toneMapping);const zt={shaderID:W,shaderType:w.type,shaderName:w.name,vertexShader:j,fragmentShader:Y,defines:w.defines,customVertexShaderID:H,customFragmentShaderID:q,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:p,batching:ue,batchingColor:ue&&A._colorsTexture!==null,instancing:te,instancingColor:te&&A.instanceColor!==null,instancingMorph:te&&A.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:K===null?t.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:Ar,alphaToCoverage:!!w.alphaToCoverage,map:se,matcap:X,envMap:ne,envMapMode:ne&&k.mapping,envMapCubeUVHeight:D,aoMap:F,lightMap:fe,bumpMap:ve,normalMap:pe,displacementMap:h&&Me,emissiveMap:Pe,normalMapObjectSpace:pe&&w.normalMapType===wA,normalMapTangentSpace:pe&&w.normalMapType===EA,metalnessMap:Ce,roughnessMap:z,anisotropy:L,anisotropyMap:ie,clearcoat:Q,clearcoatMap:le,clearcoatNormalMap:ye,clearcoatRoughnessMap:Se,dispersion:oe,iridescence:he,iridescenceMap:_e,iridescenceThicknessMap:Te,sheen:de,sheenColorMap:ke,sheenRoughnessMap:Ne,specularMap:Ge,specularColorMap:Be,specularIntensityMap:qe,transmission:ee,transmissionMap:ge,thicknessMap:Ue,gradientMap:xe,opaque:w.transparent===!1&&w.blending===ga&&w.alphaToCoverage===!1,alphaMap:Le,alphaTest:ze,alphaHash:He,combine:w.combine,mapUv:se&&m(w.map.channel),aoMapUv:F&&m(w.aoMap.channel),lightMapUv:fe&&m(w.lightMap.channel),bumpMapUv:ve&&m(w.bumpMap.channel),normalMapUv:pe&&m(w.normalMap.channel),displacementMapUv:Me&&m(w.displacementMap.channel),emissiveMapUv:Pe&&m(w.emissiveMap.channel),metalnessMapUv:Ce&&m(w.metalnessMap.channel),roughnessMapUv:z&&m(w.roughnessMap.channel),anisotropyMapUv:ie&&m(w.anisotropyMap.channel),clearcoatMapUv:le&&m(w.clearcoatMap.channel),clearcoatNormalMapUv:ye&&m(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Se&&m(w.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&m(w.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&m(w.iridescenceThicknessMap.channel),sheenColorMapUv:ke&&m(w.sheenColorMap.channel),sheenRoughnessMapUv:Ne&&m(w.sheenRoughnessMap.channel),specularMapUv:Ge&&m(w.specularMap.channel),specularColorMapUv:Be&&m(w.specularColorMap.channel),specularIntensityMapUv:qe&&m(w.specularIntensityMap.channel),transmissionMapUv:ge&&m(w.transmissionMap.channel),thicknessMapUv:Ue&&m(w.thicknessMap.channel),alphaMapUv:Le&&m(w.alphaMap.channel),vertexTangents:!!N.attributes.tangent&&(pe||L),vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,pointsUvs:A.isPoints===!0&&!!N.attributes.uv&&(se||Le),fog:!!R,useFog:w.fog===!0,fogExp2:!!R&&R.isFogExp2,flatShading:w.flatShading===!0,sizeAttenuation:w.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:G,skinning:A.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:B,morphTextureStride:V,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:w.dithering,shadowMapEnabled:t.shadowMap.enabled&&C.length>0,shadowMapType:t.shadowMap.type,toneMapping:tt,decodeVideoTexture:se&&w.map.isVideoTexture===!0&&Et.getTransfer(w.map.colorSpace)===It,decodeVideoTextureEmissive:Pe&&w.emissiveMap.isVideoTexture===!0&&Et.getTransfer(w.emissiveMap.colorSpace)===It,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===ss,flipSided:w.side===Vn,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionClipCullDistance:We&&w.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(We&&w.extensions.multiDraw===!0||ue)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return zt.vertexUv1s=c.has(1),zt.vertexUv2s=c.has(2),zt.vertexUv3s=c.has(3),c.clear(),zt}function g(w){const E=[];if(w.shaderID?E.push(w.shaderID):(E.push(w.customVertexShaderID),E.push(w.customFragmentShaderID)),w.defines!==void 0)for(const C in w.defines)E.push(C),E.push(w.defines[C]);return w.isRawShaderMaterial===!1&&(_(E,w),b(E,w),E.push(t.outputColorSpace)),E.push(w.customProgramCacheKey),E.join()}function _(w,E){w.push(E.precision),w.push(E.outputColorSpace),w.push(E.envMapMode),w.push(E.envMapCubeUVHeight),w.push(E.mapUv),w.push(E.alphaMapUv),w.push(E.lightMapUv),w.push(E.aoMapUv),w.push(E.bumpMapUv),w.push(E.normalMapUv),w.push(E.displacementMapUv),w.push(E.emissiveMapUv),w.push(E.metalnessMapUv),w.push(E.roughnessMapUv),w.push(E.anisotropyMapUv),w.push(E.clearcoatMapUv),w.push(E.clearcoatNormalMapUv),w.push(E.clearcoatRoughnessMapUv),w.push(E.iridescenceMapUv),w.push(E.iridescenceThicknessMapUv),w.push(E.sheenColorMapUv),w.push(E.sheenRoughnessMapUv),w.push(E.specularMapUv),w.push(E.specularColorMapUv),w.push(E.specularIntensityMapUv),w.push(E.transmissionMapUv),w.push(E.thicknessMapUv),w.push(E.combine),w.push(E.fogExp2),w.push(E.sizeAttenuation),w.push(E.morphTargetsCount),w.push(E.morphAttributeCount),w.push(E.numDirLights),w.push(E.numPointLights),w.push(E.numSpotLights),w.push(E.numSpotLightMaps),w.push(E.numHemiLights),w.push(E.numRectAreaLights),w.push(E.numDirLightShadows),w.push(E.numPointLightShadows),w.push(E.numSpotLightShadows),w.push(E.numSpotLightShadowsWithMaps),w.push(E.numLightProbes),w.push(E.shadowMapType),w.push(E.toneMapping),w.push(E.numClippingPlanes),w.push(E.numClipIntersection),w.push(E.depthPacking)}function b(w,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),w.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),w.push(o.mask)}function y(w){const E=f[w.type];let C;if(E){const P=Ni[E];C=pC.clone(P.uniforms)}else C=w.uniforms;return C}function T(w,E){let C;for(let P=0,A=u.length;P<A;P++){const R=u[P];if(R.cacheKey===E){C=R,++C.usedTimes;break}}return C===void 0&&(C=new FR(t,E,w,r),u.push(C)),C}function x(w){if(--w.usedTimes===0){const E=u.indexOf(w);u[E]=u[u.length-1],u.pop(),w.destroy()}}function S(w){l.remove(w)}function M(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:y,acquireProgram:T,releaseProgram:x,releaseShaderCache:S,programs:u,dispose:M}}function VR(){let t=new WeakMap;function e(a){return t.has(a)}function n(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function i(a){t.delete(a)}function s(a,o,l){t.get(a)[o]=l}function r(){t=new WeakMap}return{has:e,get:n,remove:i,update:s,dispose:r}}function $R(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Qg(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Jg(){const t=[];let e=0;const n=[],i=[],s=[];function r(){e=0,n.length=0,i.length=0,s.length=0}function a(d,h,p,f,m,v){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:h,material:p,groupOrder:f,renderOrder:d.renderOrder,z:m,group:v},t[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=p,g.groupOrder=f,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,h,p,f,m,v){const g=a(d,h,p,f,m,v);p.transmission>0?i.push(g):p.transparent===!0?s.push(g):n.push(g)}function l(d,h,p,f,m,v){const g=a(d,h,p,f,m,v);p.transmission>0?i.unshift(g):p.transparent===!0?s.unshift(g):n.unshift(g)}function c(d,h){n.length>1&&n.sort(d||$R),i.length>1&&i.sort(h||Qg),s.length>1&&s.sort(h||Qg)}function u(){for(let d=e,h=t.length;d<h;d++){const p=t[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:i,transparent:s,init:r,push:o,unshift:l,finish:u,sort:c}}function GR(){let t=new WeakMap;function e(i,s){const r=t.get(i);let a;return r===void 0?(a=new Jg,t.set(i,[a])):s>=r.length?(a=new Jg,r.push(a)):a=r[s],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function WR(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ie,color:new kt};break;case"SpotLight":n={position:new Ie,direction:new Ie,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ie,color:new kt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ie,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":n={color:new kt,position:new Ie,halfWidth:new Ie,halfHeight:new Ie};break}return t[e.id]=n,n}}}function jR(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let XR=0;function qR(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function YR(t){const e=new WR,n=jR(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new Ie);const s=new Ie,r=new en,a=new en;function o(c){let u=0,d=0,h=0;for(let w=0;w<9;w++)i.probe[w].set(0,0,0);let p=0,f=0,m=0,v=0,g=0,_=0,b=0,y=0,T=0,x=0,S=0;c.sort(qR);for(let w=0,E=c.length;w<E;w++){const C=c[w],P=C.color,A=C.intensity,R=C.distance,N=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)u+=P.r*A,d+=P.g*A,h+=P.b*A;else if(C.isLightProbe){for(let U=0;U<9;U++)i.probe[U].addScaledVector(C.sh.coefficients[U],A);S++}else if(C.isDirectionalLight){const U=e.get(C);if(U.color.copy(C.color).multiplyScalar(C.intensity),C.castShadow){const k=C.shadow,D=n.get(C);D.shadowIntensity=k.intensity,D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,i.directionalShadow[p]=D,i.directionalShadowMap[p]=N,i.directionalShadowMatrix[p]=C.shadow.matrix,_++}i.directional[p]=U,p++}else if(C.isSpotLight){const U=e.get(C);U.position.setFromMatrixPosition(C.matrixWorld),U.color.copy(P).multiplyScalar(A),U.distance=R,U.coneCos=Math.cos(C.angle),U.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),U.decay=C.decay,i.spot[m]=U;const k=C.shadow;if(C.map&&(i.spotLightMap[T]=C.map,T++,k.updateMatrices(C),C.castShadow&&x++),i.spotLightMatrix[m]=k.matrix,C.castShadow){const D=n.get(C);D.shadowIntensity=k.intensity,D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,i.spotShadow[m]=D,i.spotShadowMap[m]=N,y++}m++}else if(C.isRectAreaLight){const U=e.get(C);U.color.copy(P).multiplyScalar(A),U.halfWidth.set(C.width*.5,0,0),U.halfHeight.set(0,C.height*.5,0),i.rectArea[v]=U,v++}else if(C.isPointLight){const U=e.get(C);if(U.color.copy(C.color).multiplyScalar(C.intensity),U.distance=C.distance,U.decay=C.decay,C.castShadow){const k=C.shadow,D=n.get(C);D.shadowIntensity=k.intensity,D.shadowBias=k.bias,D.shadowNormalBias=k.normalBias,D.shadowRadius=k.radius,D.shadowMapSize=k.mapSize,D.shadowCameraNear=k.camera.near,D.shadowCameraFar=k.camera.far,i.pointShadow[f]=D,i.pointShadowMap[f]=N,i.pointShadowMatrix[f]=C.shadow.matrix,b++}i.point[f]=U,f++}else if(C.isHemisphereLight){const U=e.get(C);U.skyColor.copy(C.color).multiplyScalar(A),U.groundColor.copy(C.groundColor).multiplyScalar(A),i.hemi[g]=U,g++}}v>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_FLOAT_1,i.rectAreaLTC2=Ye.LTC_FLOAT_2):(i.rectAreaLTC1=Ye.LTC_HALF_1,i.rectAreaLTC2=Ye.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;const M=i.hash;(M.directionalLength!==p||M.pointLength!==f||M.spotLength!==m||M.rectAreaLength!==v||M.hemiLength!==g||M.numDirectionalShadows!==_||M.numPointShadows!==b||M.numSpotShadows!==y||M.numSpotMaps!==T||M.numLightProbes!==S)&&(i.directional.length=p,i.spot.length=m,i.rectArea.length=v,i.point.length=f,i.hemi.length=g,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=y+T-x,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=x,i.numLightProbes=S,M.directionalLength=p,M.pointLength=f,M.spotLength=m,M.rectAreaLength=v,M.hemiLength=g,M.numDirectionalShadows=_,M.numPointShadows=b,M.numSpotShadows=y,M.numSpotMaps=T,M.numLightProbes=S,i.version=XR++)}function l(c,u){let d=0,h=0,p=0,f=0,m=0;const v=u.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const b=c[g];if(b.isDirectionalLight){const y=i.directional[d];y.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),y.direction.sub(s),y.direction.transformDirection(v),d++}else if(b.isSpotLight){const y=i.spot[p];y.position.setFromMatrixPosition(b.matrixWorld),y.position.applyMatrix4(v),y.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),y.direction.sub(s),y.direction.transformDirection(v),p++}else if(b.isRectAreaLight){const y=i.rectArea[f];y.position.setFromMatrixPosition(b.matrixWorld),y.position.applyMatrix4(v),a.identity(),r.copy(b.matrixWorld),r.premultiply(v),a.extractRotation(r),y.halfWidth.set(b.width*.5,0,0),y.halfHeight.set(0,b.height*.5,0),y.halfWidth.applyMatrix4(a),y.halfHeight.applyMatrix4(a),f++}else if(b.isPointLight){const y=i.point[h];y.position.setFromMatrixPosition(b.matrixWorld),y.position.applyMatrix4(v),h++}else if(b.isHemisphereLight){const y=i.hemi[m];y.direction.setFromMatrixPosition(b.matrixWorld),y.direction.transformDirection(v),m++}}}return{setup:o,setupView:l,state:i}}function ev(t){const e=new YR(t),n=[],i=[];function s(u){c.camera=u,n.length=0,i.length=0}function r(u){n.push(u)}function a(u){i.push(u)}function o(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:o,setupLightsView:l,pushLight:r,pushShadow:a}}function KR(t){let e=new WeakMap;function n(s,r=0){const a=e.get(s);let o;return a===void 0?(o=new ev(t),e.set(s,[o])):r>=a.length?(o=new ev(t),a.push(o)):o=a[r],o}function i(){e=new WeakMap}return{get:n,dispose:i}}const ZR=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,QR=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function JR(t,e,n){let i=new Zf;const s=new Ut,r=new Ut,a=new Xt,o=new wC({depthPacking:bA}),l=new xC,c={},u=n.maxTextureSize,d={[Ks]:Vn,[Vn]:Ks,[ss]:ss},h=new Qs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ut},radius:{value:4}},vertexShader:ZR,fragmentShader:QR}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new tr;f.setAttribute("position",new Hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ci(f,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=V0;let g=this.type;this.render=function(x,S,M){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||x.length===0)return;const w=t.getRenderTarget(),E=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),P=t.state;P.setBlending(Hs),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const A=g!==Ji&&this.type===Ji,R=g===Ji&&this.type!==Ji;for(let N=0,U=x.length;N<U;N++){const k=x[N],D=k.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;s.copy(D.mapSize);const W=D.getFrameExtents();if(s.multiply(W),r.copy(D.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/W.x),s.x=r.x*W.x,D.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/W.y),s.y=r.y*W.y,D.mapSize.y=r.y)),D.map===null||A===!0||R===!0){const B=this.type!==Ji?{minFilter:Mi,magFilter:Mi}:{};D.map!==null&&D.map.dispose(),D.map=new Zs(s.x,s.y,B),D.map.texture.name=k.name+".shadowMap",D.camera.updateProjectionMatrix()}t.setRenderTarget(D.map),t.clear();const O=D.getViewportCount();for(let B=0;B<O;B++){const V=D.getViewport(B);a.set(r.x*V.x,r.y*V.y,r.x*V.z,r.y*V.w),P.viewport(a),D.updateMatrices(k,B),i=D.getFrustum(),y(S,M,D.camera,k,this.type)}D.isPointLightShadow!==!0&&this.type===Ji&&_(D,M),D.needsUpdate=!1}g=this.type,v.needsUpdate=!1,t.setRenderTarget(w,E,C)};function _(x,S){const M=e.update(m);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,p.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Zs(s.x,s.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,t.setRenderTarget(x.mapPass),t.clear(),t.renderBufferDirect(S,null,M,h,m,null),p.uniforms.shadow_pass.value=x.mapPass.texture,p.uniforms.resolution.value=x.mapSize,p.uniforms.radius.value=x.radius,t.setRenderTarget(x.map),t.clear(),t.renderBufferDirect(S,null,M,p,m,null)}function b(x,S,M,w){let E=null;const C=M.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(C!==void 0)E=C;else if(E=M.isPointLight===!0?l:o,t.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const P=E.uuid,A=S.uuid;let R=c[P];R===void 0&&(R={},c[P]=R);let N=R[A];N===void 0&&(N=E.clone(),R[A]=N,S.addEventListener("dispose",T)),E=N}if(E.visible=S.visible,E.wireframe=S.wireframe,w===Ji?E.side=S.shadowSide!==null?S.shadowSide:S.side:E.side=S.shadowSide!==null?S.shadowSide:d[S.side],E.alphaMap=S.alphaMap,E.alphaTest=S.alphaTest,E.map=S.map,E.clipShadows=S.clipShadows,E.clippingPlanes=S.clippingPlanes,E.clipIntersection=S.clipIntersection,E.displacementMap=S.displacementMap,E.displacementScale=S.displacementScale,E.displacementBias=S.displacementBias,E.wireframeLinewidth=S.wireframeLinewidth,E.linewidth=S.linewidth,M.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const P=t.properties.get(E);P.light=M}return E}function y(x,S,M,w,E){if(x.visible===!1)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&E===Ji)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,x.matrixWorld);const A=e.update(x),R=x.material;if(Array.isArray(R)){const N=A.groups;for(let U=0,k=N.length;U<k;U++){const D=N[U],W=R[D.materialIndex];if(W&&W.visible){const O=b(x,W,w,E);x.onBeforeShadow(t,x,S,M,A,O,D),t.renderBufferDirect(M,null,A,O,x,D),x.onAfterShadow(t,x,S,M,A,O,D)}}}else if(R.visible){const N=b(x,R,w,E);x.onBeforeShadow(t,x,S,M,A,N,null),t.renderBufferDirect(M,null,A,N,x,null),x.onAfterShadow(t,x,S,M,A,N,null)}}const P=x.children;for(let A=0,R=P.length;A<R;A++)y(P[A],S,M,w,E)}function T(x){x.target.removeEventListener("dispose",T);for(const M in c){const w=c[M],E=x.target.uuid;E in w&&(w[E].dispose(),delete w[E])}}}const eI={[hh]:fh,[ph]:vh,[mh]:yh,[Ca]:gh,[fh]:hh,[vh]:ph,[yh]:mh,[gh]:Ca};function tI(t,e){function n(){let ge=!1;const Ue=new Xt;let xe=null;const Le=new Xt(0,0,0,0);return{setMask:function(ze){xe!==ze&&!ge&&(t.colorMask(ze,ze,ze,ze),xe=ze)},setLocked:function(ze){ge=ze},setClear:function(ze,He,We,tt,zt){zt===!0&&(ze*=tt,He*=tt,We*=tt),Ue.set(ze,He,We,tt),Le.equals(Ue)===!1&&(t.clearColor(ze,He,We,tt),Le.copy(Ue))},reset:function(){ge=!1,xe=null,Le.set(-1,0,0,0)}}}function i(){let ge=!1,Ue=!1,xe=null,Le=null,ze=null;return{setReversed:function(He){if(Ue!==He){const We=e.get("EXT_clip_control");He?We.clipControlEXT(We.LOWER_LEFT_EXT,We.ZERO_TO_ONE_EXT):We.clipControlEXT(We.LOWER_LEFT_EXT,We.NEGATIVE_ONE_TO_ONE_EXT),Ue=He;const tt=ze;ze=null,this.setClear(tt)}},getReversed:function(){return Ue},setTest:function(He){He?K(t.DEPTH_TEST):G(t.DEPTH_TEST)},setMask:function(He){xe!==He&&!ge&&(t.depthMask(He),xe=He)},setFunc:function(He){if(Ue&&(He=eI[He]),Le!==He){switch(He){case hh:t.depthFunc(t.NEVER);break;case fh:t.depthFunc(t.ALWAYS);break;case ph:t.depthFunc(t.LESS);break;case Ca:t.depthFunc(t.LEQUAL);break;case mh:t.depthFunc(t.EQUAL);break;case gh:t.depthFunc(t.GEQUAL);break;case vh:t.depthFunc(t.GREATER);break;case yh:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Le=He}},setLocked:function(He){ge=He},setClear:function(He){ze!==He&&(Ue&&(He=1-He),t.clearDepth(He),ze=He)},reset:function(){ge=!1,xe=null,Le=null,ze=null,Ue=!1}}}function s(){let ge=!1,Ue=null,xe=null,Le=null,ze=null,He=null,We=null,tt=null,zt=null;return{setTest:function(_t){ge||(_t?K(t.STENCIL_TEST):G(t.STENCIL_TEST))},setMask:function(_t){Ue!==_t&&!ge&&(t.stencilMask(_t),Ue=_t)},setFunc:function(_t,En,wn){(xe!==_t||Le!==En||ze!==wn)&&(t.stencilFunc(_t,En,wn),xe=_t,Le=En,ze=wn)},setOp:function(_t,En,wn){(He!==_t||We!==En||tt!==wn)&&(t.stencilOp(_t,En,wn),He=_t,We=En,tt=wn)},setLocked:function(_t){ge=_t},setClear:function(_t){zt!==_t&&(t.clearStencil(_t),zt=_t)},reset:function(){ge=!1,Ue=null,xe=null,Le=null,ze=null,He=null,We=null,tt=null,zt=null}}}const r=new n,a=new i,o=new s,l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,p=[],f=null,m=!1,v=null,g=null,_=null,b=null,y=null,T=null,x=null,S=new kt(0,0,0),M=0,w=!1,E=null,C=null,P=null,A=null,R=null;const N=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,k=0;const D=t.getParameter(t.VERSION);D.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(D)[1]),U=k>=1):D.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),U=k>=2);let W=null,O={};const B=t.getParameter(t.SCISSOR_BOX),V=t.getParameter(t.VIEWPORT),j=new Xt().fromArray(B),Y=new Xt().fromArray(V);function H(ge,Ue,xe,Le){const ze=new Uint8Array(4),He=t.createTexture();t.bindTexture(ge,He),t.texParameteri(ge,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ge,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let We=0;We<xe;We++)ge===t.TEXTURE_3D||ge===t.TEXTURE_2D_ARRAY?t.texImage3D(Ue,0,t.RGBA,1,1,Le,0,t.RGBA,t.UNSIGNED_BYTE,ze):t.texImage2D(Ue+We,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ze);return He}const q={};q[t.TEXTURE_2D]=H(t.TEXTURE_2D,t.TEXTURE_2D,1),q[t.TEXTURE_CUBE_MAP]=H(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),q[t.TEXTURE_2D_ARRAY]=H(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),q[t.TEXTURE_3D]=H(t.TEXTURE_3D,t.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),K(t.DEPTH_TEST),a.setFunc(Ca),ve(!1),pe(ng),K(t.CULL_FACE),F(Hs);function K(ge){u[ge]!==!0&&(t.enable(ge),u[ge]=!0)}function G(ge){u[ge]!==!1&&(t.disable(ge),u[ge]=!1)}function te(ge,Ue){return d[ge]!==Ue?(t.bindFramebuffer(ge,Ue),d[ge]=Ue,ge===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Ue),ge===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Ue),!0):!1}function ue(ge,Ue){let xe=p,Le=!1;if(ge){xe=h.get(Ue),xe===void 0&&(xe=[],h.set(Ue,xe));const ze=ge.textures;if(xe.length!==ze.length||xe[0]!==t.COLOR_ATTACHMENT0){for(let He=0,We=ze.length;He<We;He++)xe[He]=t.COLOR_ATTACHMENT0+He;xe.length=ze.length,Le=!0}}else xe[0]!==t.BACK&&(xe[0]=t.BACK,Le=!0);Le&&t.drawBuffers(xe)}function se(ge){return f!==ge?(t.useProgram(ge),f=ge,!0):!1}const X={[br]:t.FUNC_ADD,[XM]:t.FUNC_SUBTRACT,[qM]:t.FUNC_REVERSE_SUBTRACT};X[YM]=t.MIN,X[KM]=t.MAX;const ne={[ZM]:t.ZERO,[QM]:t.ONE,[JM]:t.SRC_COLOR,[uh]:t.SRC_ALPHA,[rA]:t.SRC_ALPHA_SATURATE,[iA]:t.DST_COLOR,[tA]:t.DST_ALPHA,[eA]:t.ONE_MINUS_SRC_COLOR,[dh]:t.ONE_MINUS_SRC_ALPHA,[sA]:t.ONE_MINUS_DST_COLOR,[nA]:t.ONE_MINUS_DST_ALPHA,[aA]:t.CONSTANT_COLOR,[oA]:t.ONE_MINUS_CONSTANT_COLOR,[lA]:t.CONSTANT_ALPHA,[cA]:t.ONE_MINUS_CONSTANT_ALPHA};function F(ge,Ue,xe,Le,ze,He,We,tt,zt,_t){if(ge===Hs){m===!0&&(G(t.BLEND),m=!1);return}if(m===!1&&(K(t.BLEND),m=!0),ge!==jM){if(ge!==v||_t!==w){if((g!==br||y!==br)&&(t.blendEquation(t.FUNC_ADD),g=br,y=br),_t)switch(ge){case ga:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case ig:t.blendFunc(t.ONE,t.ONE);break;case sg:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case rg:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case ga:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case ig:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case sg:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case rg:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}_=null,b=null,T=null,x=null,S.set(0,0,0),M=0,v=ge,w=_t}return}ze=ze||Ue,He=He||xe,We=We||Le,(Ue!==g||ze!==y)&&(t.blendEquationSeparate(X[Ue],X[ze]),g=Ue,y=ze),(xe!==_||Le!==b||He!==T||We!==x)&&(t.blendFuncSeparate(ne[xe],ne[Le],ne[He],ne[We]),_=xe,b=Le,T=He,x=We),(tt.equals(S)===!1||zt!==M)&&(t.blendColor(tt.r,tt.g,tt.b,zt),S.copy(tt),M=zt),v=ge,w=!1}function fe(ge,Ue){ge.side===ss?G(t.CULL_FACE):K(t.CULL_FACE);let xe=ge.side===Vn;Ue&&(xe=!xe),ve(xe),ge.blending===ga&&ge.transparent===!1?F(Hs):F(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),a.setFunc(ge.depthFunc),a.setTest(ge.depthTest),a.setMask(ge.depthWrite),r.setMask(ge.colorWrite);const Le=ge.stencilWrite;o.setTest(Le),Le&&(o.setMask(ge.stencilWriteMask),o.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),o.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),Pe(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?K(t.SAMPLE_ALPHA_TO_COVERAGE):G(t.SAMPLE_ALPHA_TO_COVERAGE)}function ve(ge){E!==ge&&(ge?t.frontFace(t.CW):t.frontFace(t.CCW),E=ge)}function pe(ge){ge!==$M?(K(t.CULL_FACE),ge!==C&&(ge===ng?t.cullFace(t.BACK):ge===GM?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):G(t.CULL_FACE),C=ge}function Me(ge){ge!==P&&(U&&t.lineWidth(ge),P=ge)}function Pe(ge,Ue,xe){ge?(K(t.POLYGON_OFFSET_FILL),(A!==Ue||R!==xe)&&(t.polygonOffset(Ue,xe),A=Ue,R=xe)):G(t.POLYGON_OFFSET_FILL)}function Ce(ge){ge?K(t.SCISSOR_TEST):G(t.SCISSOR_TEST)}function z(ge){ge===void 0&&(ge=t.TEXTURE0+N-1),W!==ge&&(t.activeTexture(ge),W=ge)}function L(ge,Ue,xe){xe===void 0&&(W===null?xe=t.TEXTURE0+N-1:xe=W);let Le=O[xe];Le===void 0&&(Le={type:void 0,texture:void 0},O[xe]=Le),(Le.type!==ge||Le.texture!==Ue)&&(W!==xe&&(t.activeTexture(xe),W=xe),t.bindTexture(ge,Ue||q[ge]),Le.type=ge,Le.texture=Ue)}function Q(){const ge=O[W];ge!==void 0&&ge.type!==void 0&&(t.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function oe(){try{t.compressedTexImage2D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function he(){try{t.compressedTexImage3D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function de(){try{t.texSubImage2D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ee(){try{t.texSubImage3D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ie(){try{t.compressedTexSubImage2D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function le(){try{t.compressedTexSubImage3D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ye(){try{t.texStorage2D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Se(){try{t.texStorage3D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function _e(){try{t.texImage2D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Te(){try{t.texImage3D(...arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ke(ge){j.equals(ge)===!1&&(t.scissor(ge.x,ge.y,ge.z,ge.w),j.copy(ge))}function Ne(ge){Y.equals(ge)===!1&&(t.viewport(ge.x,ge.y,ge.z,ge.w),Y.copy(ge))}function Ge(ge,Ue){let xe=c.get(Ue);xe===void 0&&(xe=new WeakMap,c.set(Ue,xe));let Le=xe.get(ge);Le===void 0&&(Le=t.getUniformBlockIndex(Ue,ge.name),xe.set(ge,Le))}function Be(ge,Ue){const Le=c.get(Ue).get(ge);l.get(Ue)!==Le&&(t.uniformBlockBinding(Ue,Le,ge.__bindingPointIndex),l.set(Ue,Le))}function qe(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),a.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},W=null,O={},d={},h=new WeakMap,p=[],f=null,m=!1,v=null,g=null,_=null,b=null,y=null,T=null,x=null,S=new kt(0,0,0),M=0,w=!1,E=null,C=null,P=null,A=null,R=null,j.set(0,0,t.canvas.width,t.canvas.height),Y.set(0,0,t.canvas.width,t.canvas.height),r.reset(),a.reset(),o.reset()}return{buffers:{color:r,depth:a,stencil:o},enable:K,disable:G,bindFramebuffer:te,drawBuffers:ue,useProgram:se,setBlending:F,setMaterial:fe,setFlipSided:ve,setCullFace:pe,setLineWidth:Me,setPolygonOffset:Pe,setScissorTest:Ce,activeTexture:z,bindTexture:L,unbindTexture:Q,compressedTexImage2D:oe,compressedTexImage3D:he,texImage2D:_e,texImage3D:Te,updateUBOMapping:Ge,uniformBlockBinding:Be,texStorage2D:ye,texStorage3D:Se,texSubImage2D:de,texSubImage3D:ee,compressedTexSubImage2D:ie,compressedTexSubImage3D:le,scissor:ke,viewport:Ne,reset:qe}}function nI(t,e,n,i,s,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ut,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function f(z,L){return p?new OffscreenCanvas(z,L):Wc("canvas")}function m(z,L,Q){let oe=1;const he=Ce(z);if((he.width>Q||he.height>Q)&&(oe=Q/Math.max(he.width,he.height)),oe<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){const de=Math.floor(oe*he.width),ee=Math.floor(oe*he.height);d===void 0&&(d=f(de,ee));const ie=L?f(de,ee):d;return ie.width=de,ie.height=ee,ie.getContext("2d").drawImage(z,0,0,de,ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+de+"x"+ee+")."),ie}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),z;return z}function v(z){return z.generateMipmaps}function g(z){t.generateMipmap(z)}function _(z){return z.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?t.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function b(z,L,Q,oe,he=!1){if(z!==null){if(t[z]!==void 0)return t[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let de=L;if(L===t.RED&&(Q===t.FLOAT&&(de=t.R32F),Q===t.HALF_FLOAT&&(de=t.R16F),Q===t.UNSIGNED_BYTE&&(de=t.R8)),L===t.RED_INTEGER&&(Q===t.UNSIGNED_BYTE&&(de=t.R8UI),Q===t.UNSIGNED_SHORT&&(de=t.R16UI),Q===t.UNSIGNED_INT&&(de=t.R32UI),Q===t.BYTE&&(de=t.R8I),Q===t.SHORT&&(de=t.R16I),Q===t.INT&&(de=t.R32I)),L===t.RG&&(Q===t.FLOAT&&(de=t.RG32F),Q===t.HALF_FLOAT&&(de=t.RG16F),Q===t.UNSIGNED_BYTE&&(de=t.RG8)),L===t.RG_INTEGER&&(Q===t.UNSIGNED_BYTE&&(de=t.RG8UI),Q===t.UNSIGNED_SHORT&&(de=t.RG16UI),Q===t.UNSIGNED_INT&&(de=t.RG32UI),Q===t.BYTE&&(de=t.RG8I),Q===t.SHORT&&(de=t.RG16I),Q===t.INT&&(de=t.RG32I)),L===t.RGB_INTEGER&&(Q===t.UNSIGNED_BYTE&&(de=t.RGB8UI),Q===t.UNSIGNED_SHORT&&(de=t.RGB16UI),Q===t.UNSIGNED_INT&&(de=t.RGB32UI),Q===t.BYTE&&(de=t.RGB8I),Q===t.SHORT&&(de=t.RGB16I),Q===t.INT&&(de=t.RGB32I)),L===t.RGBA_INTEGER&&(Q===t.UNSIGNED_BYTE&&(de=t.RGBA8UI),Q===t.UNSIGNED_SHORT&&(de=t.RGBA16UI),Q===t.UNSIGNED_INT&&(de=t.RGBA32UI),Q===t.BYTE&&(de=t.RGBA8I),Q===t.SHORT&&(de=t.RGBA16I),Q===t.INT&&(de=t.RGBA32I)),L===t.RGB&&Q===t.UNSIGNED_INT_5_9_9_9_REV&&(de=t.RGB9_E5),L===t.RGBA){const ee=he?$c:Et.getTransfer(oe);Q===t.FLOAT&&(de=t.RGBA32F),Q===t.HALF_FLOAT&&(de=t.RGBA16F),Q===t.UNSIGNED_BYTE&&(de=ee===It?t.SRGB8_ALPHA8:t.RGBA8),Q===t.UNSIGNED_SHORT_4_4_4_4&&(de=t.RGBA4),Q===t.UNSIGNED_SHORT_5_5_5_1&&(de=t.RGB5_A1)}return(de===t.R16F||de===t.R32F||de===t.RG16F||de===t.RG32F||de===t.RGBA16F||de===t.RGBA32F)&&e.get("EXT_color_buffer_float"),de}function y(z,L){let Q;return z?L===null||L===Mr||L===Go?Q=t.DEPTH24_STENCIL8:L===os?Q=t.DEPTH32F_STENCIL8:L===$o&&(Q=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):L===null||L===Mr||L===Go?Q=t.DEPTH_COMPONENT24:L===os?Q=t.DEPTH_COMPONENT32F:L===$o&&(Q=t.DEPTH_COMPONENT16),Q}function T(z,L){return v(z)===!0||z.isFramebufferTexture&&z.minFilter!==Mi&&z.minFilter!==Si?Math.log2(Math.max(L.width,L.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?L.mipmaps.length:1}function x(z){const L=z.target;L.removeEventListener("dispose",x),M(L),L.isVideoTexture&&u.delete(L)}function S(z){const L=z.target;L.removeEventListener("dispose",S),E(L)}function M(z){const L=i.get(z);if(L.__webglInit===void 0)return;const Q=z.source,oe=h.get(Q);if(oe){const he=oe[L.__cacheKey];he.usedTimes--,he.usedTimes===0&&w(z),Object.keys(oe).length===0&&h.delete(Q)}i.remove(z)}function w(z){const L=i.get(z);t.deleteTexture(L.__webglTexture);const Q=z.source,oe=h.get(Q);delete oe[L.__cacheKey],a.memory.textures--}function E(z){const L=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(L.__webglFramebuffer[oe]))for(let he=0;he<L.__webglFramebuffer[oe].length;he++)t.deleteFramebuffer(L.__webglFramebuffer[oe][he]);else t.deleteFramebuffer(L.__webglFramebuffer[oe]);L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer[oe])}else{if(Array.isArray(L.__webglFramebuffer))for(let oe=0;oe<L.__webglFramebuffer.length;oe++)t.deleteFramebuffer(L.__webglFramebuffer[oe]);else t.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&t.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let oe=0;oe<L.__webglColorRenderbuffer.length;oe++)L.__webglColorRenderbuffer[oe]&&t.deleteRenderbuffer(L.__webglColorRenderbuffer[oe]);L.__webglDepthRenderbuffer&&t.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const Q=z.textures;for(let oe=0,he=Q.length;oe<he;oe++){const de=i.get(Q[oe]);de.__webglTexture&&(t.deleteTexture(de.__webglTexture),a.memory.textures--),i.remove(Q[oe])}i.remove(z)}let C=0;function P(){C=0}function A(){const z=C;return z>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+s.maxTextures),C+=1,z}function R(z){const L=[];return L.push(z.wrapS),L.push(z.wrapT),L.push(z.wrapR||0),L.push(z.magFilter),L.push(z.minFilter),L.push(z.anisotropy),L.push(z.internalFormat),L.push(z.format),L.push(z.type),L.push(z.generateMipmaps),L.push(z.premultiplyAlpha),L.push(z.flipY),L.push(z.unpackAlignment),L.push(z.colorSpace),L.join()}function N(z,L){const Q=i.get(z);if(z.isVideoTexture&&Me(z),z.isRenderTargetTexture===!1&&z.version>0&&Q.__version!==z.version){const oe=z.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Y(Q,z,L);return}}n.bindTexture(t.TEXTURE_2D,Q.__webglTexture,t.TEXTURE0+L)}function U(z,L){const Q=i.get(z);if(z.version>0&&Q.__version!==z.version){Y(Q,z,L);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Q.__webglTexture,t.TEXTURE0+L)}function k(z,L){const Q=i.get(z);if(z.version>0&&Q.__version!==z.version){Y(Q,z,L);return}n.bindTexture(t.TEXTURE_3D,Q.__webglTexture,t.TEXTURE0+L)}function D(z,L){const Q=i.get(z);if(z.version>0&&Q.__version!==z.version){H(Q,z,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture,t.TEXTURE0+L)}const W={[Eh]:t.REPEAT,[xr]:t.CLAMP_TO_EDGE,[wh]:t.MIRRORED_REPEAT},O={[Mi]:t.NEAREST,[yA]:t.NEAREST_MIPMAP_NEAREST,[Hl]:t.NEAREST_MIPMAP_LINEAR,[Si]:t.LINEAR,[cd]:t.LINEAR_MIPMAP_NEAREST,[Bs]:t.LINEAR_MIPMAP_LINEAR},B={[xA]:t.NEVER,[PA]:t.ALWAYS,[SA]:t.LESS,[ny]:t.LEQUAL,[TA]:t.EQUAL,[CA]:t.GEQUAL,[MA]:t.GREATER,[AA]:t.NOTEQUAL};function V(z,L){if(L.type===os&&e.has("OES_texture_float_linear")===!1&&(L.magFilter===Si||L.magFilter===cd||L.magFilter===Hl||L.magFilter===Bs||L.minFilter===Si||L.minFilter===cd||L.minFilter===Hl||L.minFilter===Bs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(z,t.TEXTURE_WRAP_S,W[L.wrapS]),t.texParameteri(z,t.TEXTURE_WRAP_T,W[L.wrapT]),(z===t.TEXTURE_3D||z===t.TEXTURE_2D_ARRAY)&&t.texParameteri(z,t.TEXTURE_WRAP_R,W[L.wrapR]),t.texParameteri(z,t.TEXTURE_MAG_FILTER,O[L.magFilter]),t.texParameteri(z,t.TEXTURE_MIN_FILTER,O[L.minFilter]),L.compareFunction&&(t.texParameteri(z,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(z,t.TEXTURE_COMPARE_FUNC,B[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===Mi||L.minFilter!==Hl&&L.minFilter!==Bs||L.type===os&&e.has("OES_texture_float_linear")===!1)return;if(L.anisotropy>1||i.get(L).__currentAnisotropy){const Q=e.get("EXT_texture_filter_anisotropic");t.texParameterf(z,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,s.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy}}}function j(z,L){let Q=!1;z.__webglInit===void 0&&(z.__webglInit=!0,L.addEventListener("dispose",x));const oe=L.source;let he=h.get(oe);he===void 0&&(he={},h.set(oe,he));const de=R(L);if(de!==z.__cacheKey){he[de]===void 0&&(he[de]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,Q=!0),he[de].usedTimes++;const ee=he[z.__cacheKey];ee!==void 0&&(he[z.__cacheKey].usedTimes--,ee.usedTimes===0&&w(L)),z.__cacheKey=de,z.__webglTexture=he[de].texture}return Q}function Y(z,L,Q){let oe=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(oe=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(oe=t.TEXTURE_3D);const he=j(z,L),de=L.source;n.bindTexture(oe,z.__webglTexture,t.TEXTURE0+Q);const ee=i.get(de);if(de.version!==ee.__version||he===!0){n.activeTexture(t.TEXTURE0+Q);const ie=Et.getPrimaries(Et.workingColorSpace),le=L.colorSpace===Ns?null:Et.getPrimaries(L.colorSpace),ye=L.colorSpace===Ns||ie===le?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ye);let Se=m(L.image,!1,s.maxTextureSize);Se=Pe(L,Se);const _e=r.convert(L.format,L.colorSpace),Te=r.convert(L.type);let ke=b(L.internalFormat,_e,Te,L.colorSpace,L.isVideoTexture);V(oe,L);let Ne;const Ge=L.mipmaps,Be=L.isVideoTexture!==!0,qe=ee.__version===void 0||he===!0,ge=de.dataReady,Ue=T(L,Se);if(L.isDepthTexture)ke=y(L.format===jo,L.type),qe&&(Be?n.texStorage2D(t.TEXTURE_2D,1,ke,Se.width,Se.height):n.texImage2D(t.TEXTURE_2D,0,ke,Se.width,Se.height,0,_e,Te,null));else if(L.isDataTexture)if(Ge.length>0){Be&&qe&&n.texStorage2D(t.TEXTURE_2D,Ue,ke,Ge[0].width,Ge[0].height);for(let xe=0,Le=Ge.length;xe<Le;xe++)Ne=Ge[xe],Be?ge&&n.texSubImage2D(t.TEXTURE_2D,xe,0,0,Ne.width,Ne.height,_e,Te,Ne.data):n.texImage2D(t.TEXTURE_2D,xe,ke,Ne.width,Ne.height,0,_e,Te,Ne.data);L.generateMipmaps=!1}else Be?(qe&&n.texStorage2D(t.TEXTURE_2D,Ue,ke,Se.width,Se.height),ge&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Se.width,Se.height,_e,Te,Se.data)):n.texImage2D(t.TEXTURE_2D,0,ke,Se.width,Se.height,0,_e,Te,Se.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){Be&&qe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ue,ke,Ge[0].width,Ge[0].height,Se.depth);for(let xe=0,Le=Ge.length;xe<Le;xe++)if(Ne=Ge[xe],L.format!==Ti)if(_e!==null)if(Be){if(ge)if(L.layerUpdates.size>0){const ze=Lg(Ne.width,Ne.height,L.format,L.type);for(const He of L.layerUpdates){const We=Ne.data.subarray(He*ze/Ne.data.BYTES_PER_ELEMENT,(He+1)*ze/Ne.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,He,Ne.width,Ne.height,1,_e,We)}L.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,Ne.width,Ne.height,Se.depth,_e,Ne.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,xe,ke,Ne.width,Ne.height,Se.depth,0,Ne.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Be?ge&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,Ne.width,Ne.height,Se.depth,_e,Te,Ne.data):n.texImage3D(t.TEXTURE_2D_ARRAY,xe,ke,Ne.width,Ne.height,Se.depth,0,_e,Te,Ne.data)}else{Be&&qe&&n.texStorage2D(t.TEXTURE_2D,Ue,ke,Ge[0].width,Ge[0].height);for(let xe=0,Le=Ge.length;xe<Le;xe++)Ne=Ge[xe],L.format!==Ti?_e!==null?Be?ge&&n.compressedTexSubImage2D(t.TEXTURE_2D,xe,0,0,Ne.width,Ne.height,_e,Ne.data):n.compressedTexImage2D(t.TEXTURE_2D,xe,ke,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Be?ge&&n.texSubImage2D(t.TEXTURE_2D,xe,0,0,Ne.width,Ne.height,_e,Te,Ne.data):n.texImage2D(t.TEXTURE_2D,xe,ke,Ne.width,Ne.height,0,_e,Te,Ne.data)}else if(L.isDataArrayTexture)if(Be){if(qe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ue,ke,Se.width,Se.height,Se.depth),ge)if(L.layerUpdates.size>0){const xe=Lg(Se.width,Se.height,L.format,L.type);for(const Le of L.layerUpdates){const ze=Se.data.subarray(Le*xe/Se.data.BYTES_PER_ELEMENT,(Le+1)*xe/Se.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Le,Se.width,Se.height,1,_e,Te,ze)}L.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Se.width,Se.height,Se.depth,_e,Te,Se.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ke,Se.width,Se.height,Se.depth,0,_e,Te,Se.data);else if(L.isData3DTexture)Be?(qe&&n.texStorage3D(t.TEXTURE_3D,Ue,ke,Se.width,Se.height,Se.depth),ge&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Se.width,Se.height,Se.depth,_e,Te,Se.data)):n.texImage3D(t.TEXTURE_3D,0,ke,Se.width,Se.height,Se.depth,0,_e,Te,Se.data);else if(L.isFramebufferTexture){if(qe)if(Be)n.texStorage2D(t.TEXTURE_2D,Ue,ke,Se.width,Se.height);else{let xe=Se.width,Le=Se.height;for(let ze=0;ze<Ue;ze++)n.texImage2D(t.TEXTURE_2D,ze,ke,xe,Le,0,_e,Te,null),xe>>=1,Le>>=1}}else if(Ge.length>0){if(Be&&qe){const xe=Ce(Ge[0]);n.texStorage2D(t.TEXTURE_2D,Ue,ke,xe.width,xe.height)}for(let xe=0,Le=Ge.length;xe<Le;xe++)Ne=Ge[xe],Be?ge&&n.texSubImage2D(t.TEXTURE_2D,xe,0,0,_e,Te,Ne):n.texImage2D(t.TEXTURE_2D,xe,ke,_e,Te,Ne);L.generateMipmaps=!1}else if(Be){if(qe){const xe=Ce(Se);n.texStorage2D(t.TEXTURE_2D,Ue,ke,xe.width,xe.height)}ge&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,_e,Te,Se)}else n.texImage2D(t.TEXTURE_2D,0,ke,_e,Te,Se);v(L)&&g(oe),ee.__version=de.version,L.onUpdate&&L.onUpdate(L)}z.__version=L.version}function H(z,L,Q){if(L.image.length!==6)return;const oe=j(z,L),he=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,z.__webglTexture,t.TEXTURE0+Q);const de=i.get(he);if(he.version!==de.__version||oe===!0){n.activeTexture(t.TEXTURE0+Q);const ee=Et.getPrimaries(Et.workingColorSpace),ie=L.colorSpace===Ns?null:Et.getPrimaries(L.colorSpace),le=L.colorSpace===Ns||ee===ie?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,le);const ye=L.isCompressedTexture||L.image[0].isCompressedTexture,Se=L.image[0]&&L.image[0].isDataTexture,_e=[];for(let Le=0;Le<6;Le++)!ye&&!Se?_e[Le]=m(L.image[Le],!0,s.maxCubemapSize):_e[Le]=Se?L.image[Le].image:L.image[Le],_e[Le]=Pe(L,_e[Le]);const Te=_e[0],ke=r.convert(L.format,L.colorSpace),Ne=r.convert(L.type),Ge=b(L.internalFormat,ke,Ne,L.colorSpace),Be=L.isVideoTexture!==!0,qe=de.__version===void 0||oe===!0,ge=he.dataReady;let Ue=T(L,Te);V(t.TEXTURE_CUBE_MAP,L);let xe;if(ye){Be&&qe&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ue,Ge,Te.width,Te.height);for(let Le=0;Le<6;Le++){xe=_e[Le].mipmaps;for(let ze=0;ze<xe.length;ze++){const He=xe[ze];L.format!==Ti?ke!==null?Be?ge&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,0,0,He.width,He.height,ke,He.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,Ge,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Be?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,0,0,He.width,He.height,ke,Ne,He.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,Ge,He.width,He.height,0,ke,Ne,He.data)}}}else{if(xe=L.mipmaps,Be&&qe){xe.length>0&&Ue++;const Le=Ce(_e[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Ue,Ge,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Se){Be?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,_e[Le].width,_e[Le].height,ke,Ne,_e[Le].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Ge,_e[Le].width,_e[Le].height,0,ke,Ne,_e[Le].data);for(let ze=0;ze<xe.length;ze++){const We=xe[ze].image[Le].image;Be?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,0,0,We.width,We.height,ke,Ne,We.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,Ge,We.width,We.height,0,ke,Ne,We.data)}}else{Be?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,ke,Ne,_e[Le]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Ge,ke,Ne,_e[Le]);for(let ze=0;ze<xe.length;ze++){const He=xe[ze];Be?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,0,0,ke,Ne,He.image[Le]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,Ge,ke,Ne,He.image[Le])}}}v(L)&&g(t.TEXTURE_CUBE_MAP),de.__version=he.version,L.onUpdate&&L.onUpdate(L)}z.__version=L.version}function q(z,L,Q,oe,he,de){const ee=r.convert(Q.format,Q.colorSpace),ie=r.convert(Q.type),le=b(Q.internalFormat,ee,ie,Q.colorSpace),ye=i.get(L),Se=i.get(Q);if(Se.__renderTarget=L,!ye.__hasExternalTextures){const _e=Math.max(1,L.width>>de),Te=Math.max(1,L.height>>de);he===t.TEXTURE_3D||he===t.TEXTURE_2D_ARRAY?n.texImage3D(he,de,le,_e,Te,L.depth,0,ee,ie,null):n.texImage2D(he,de,le,_e,Te,0,ee,ie,null)}n.bindFramebuffer(t.FRAMEBUFFER,z),pe(L)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,oe,he,Se.__webglTexture,0,ve(L)):(he===t.TEXTURE_2D||he>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,oe,he,Se.__webglTexture,de),n.bindFramebuffer(t.FRAMEBUFFER,null)}function K(z,L,Q){if(t.bindRenderbuffer(t.RENDERBUFFER,z),L.depthBuffer){const oe=L.depthTexture,he=oe&&oe.isDepthTexture?oe.type:null,de=y(L.stencilBuffer,he),ee=L.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ie=ve(L);pe(L)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ie,de,L.width,L.height):Q?t.renderbufferStorageMultisample(t.RENDERBUFFER,ie,de,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,de,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,ee,t.RENDERBUFFER,z)}else{const oe=L.textures;for(let he=0;he<oe.length;he++){const de=oe[he],ee=r.convert(de.format,de.colorSpace),ie=r.convert(de.type),le=b(de.internalFormat,ee,ie,de.colorSpace),ye=ve(L);Q&&pe(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ye,le,L.width,L.height):pe(L)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ye,le,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,le,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function G(z,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,z),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const oe=i.get(L.depthTexture);oe.__renderTarget=L,(!oe.__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),N(L.depthTexture,0);const he=oe.__webglTexture,de=ve(L);if(L.depthTexture.format===Wo)pe(L)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,he,0,de):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,he,0);else if(L.depthTexture.format===jo)pe(L)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,he,0,de):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,he,0);else throw new Error("Unknown depthTexture format")}function te(z){const L=i.get(z),Q=z.isWebGLCubeRenderTarget===!0;if(L.__boundDepthTexture!==z.depthTexture){const oe=z.depthTexture;if(L.__depthDisposeCallback&&L.__depthDisposeCallback(),oe){const he=()=>{delete L.__boundDepthTexture,delete L.__depthDisposeCallback,oe.removeEventListener("dispose",he)};oe.addEventListener("dispose",he),L.__depthDisposeCallback=he}L.__boundDepthTexture=oe}if(z.depthTexture&&!L.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");G(L.__webglFramebuffer,z)}else if(Q){L.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[oe]),L.__webglDepthbuffer[oe]===void 0)L.__webglDepthbuffer[oe]=t.createRenderbuffer(),K(L.__webglDepthbuffer[oe],z,!1);else{const he=z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,de=L.__webglDepthbuffer[oe];t.bindRenderbuffer(t.RENDERBUFFER,de),t.framebufferRenderbuffer(t.FRAMEBUFFER,he,t.RENDERBUFFER,de)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer===void 0)L.__webglDepthbuffer=t.createRenderbuffer(),K(L.__webglDepthbuffer,z,!1);else{const oe=z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,he=L.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,he),t.framebufferRenderbuffer(t.FRAMEBUFFER,oe,t.RENDERBUFFER,he)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ue(z,L,Q){const oe=i.get(z);L!==void 0&&q(oe.__webglFramebuffer,z,z.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Q!==void 0&&te(z)}function se(z){const L=z.texture,Q=i.get(z),oe=i.get(L);z.addEventListener("dispose",S);const he=z.textures,de=z.isWebGLCubeRenderTarget===!0,ee=he.length>1;if(ee||(oe.__webglTexture===void 0&&(oe.__webglTexture=t.createTexture()),oe.__version=L.version,a.memory.textures++),de){Q.__webglFramebuffer=[];for(let ie=0;ie<6;ie++)if(L.mipmaps&&L.mipmaps.length>0){Q.__webglFramebuffer[ie]=[];for(let le=0;le<L.mipmaps.length;le++)Q.__webglFramebuffer[ie][le]=t.createFramebuffer()}else Q.__webglFramebuffer[ie]=t.createFramebuffer()}else{if(L.mipmaps&&L.mipmaps.length>0){Q.__webglFramebuffer=[];for(let ie=0;ie<L.mipmaps.length;ie++)Q.__webglFramebuffer[ie]=t.createFramebuffer()}else Q.__webglFramebuffer=t.createFramebuffer();if(ee)for(let ie=0,le=he.length;ie<le;ie++){const ye=i.get(he[ie]);ye.__webglTexture===void 0&&(ye.__webglTexture=t.createTexture(),a.memory.textures++)}if(z.samples>0&&pe(z)===!1){Q.__webglMultisampledFramebuffer=t.createFramebuffer(),Q.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let ie=0;ie<he.length;ie++){const le=he[ie];Q.__webglColorRenderbuffer[ie]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Q.__webglColorRenderbuffer[ie]);const ye=r.convert(le.format,le.colorSpace),Se=r.convert(le.type),_e=b(le.internalFormat,ye,Se,le.colorSpace,z.isXRRenderTarget===!0),Te=ve(z);t.renderbufferStorageMultisample(t.RENDERBUFFER,Te,_e,z.width,z.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ie,t.RENDERBUFFER,Q.__webglColorRenderbuffer[ie])}t.bindRenderbuffer(t.RENDERBUFFER,null),z.depthBuffer&&(Q.__webglDepthRenderbuffer=t.createRenderbuffer(),K(Q.__webglDepthRenderbuffer,z,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(de){n.bindTexture(t.TEXTURE_CUBE_MAP,oe.__webglTexture),V(t.TEXTURE_CUBE_MAP,L);for(let ie=0;ie<6;ie++)if(L.mipmaps&&L.mipmaps.length>0)for(let le=0;le<L.mipmaps.length;le++)q(Q.__webglFramebuffer[ie][le],z,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,le);else q(Q.__webglFramebuffer[ie],z,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0);v(L)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ee){for(let ie=0,le=he.length;ie<le;ie++){const ye=he[ie],Se=i.get(ye);n.bindTexture(t.TEXTURE_2D,Se.__webglTexture),V(t.TEXTURE_2D,ye),q(Q.__webglFramebuffer,z,ye,t.COLOR_ATTACHMENT0+ie,t.TEXTURE_2D,0),v(ye)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let ie=t.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(ie=z.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(ie,oe.__webglTexture),V(ie,L),L.mipmaps&&L.mipmaps.length>0)for(let le=0;le<L.mipmaps.length;le++)q(Q.__webglFramebuffer[le],z,L,t.COLOR_ATTACHMENT0,ie,le);else q(Q.__webglFramebuffer,z,L,t.COLOR_ATTACHMENT0,ie,0);v(L)&&g(ie),n.unbindTexture()}z.depthBuffer&&te(z)}function X(z){const L=z.textures;for(let Q=0,oe=L.length;Q<oe;Q++){const he=L[Q];if(v(he)){const de=_(z),ee=i.get(he).__webglTexture;n.bindTexture(de,ee),g(de),n.unbindTexture()}}}const ne=[],F=[];function fe(z){if(z.samples>0){if(pe(z)===!1){const L=z.textures,Q=z.width,oe=z.height;let he=t.COLOR_BUFFER_BIT;const de=z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ee=i.get(z),ie=L.length>1;if(ie)for(let le=0;le<L.length;le++)n.bindFramebuffer(t.FRAMEBUFFER,ee.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+le,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ee.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+le,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ee.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ee.__webglFramebuffer);for(let le=0;le<L.length;le++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(he|=t.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(he|=t.STENCIL_BUFFER_BIT)),ie){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ee.__webglColorRenderbuffer[le]);const ye=i.get(L[le]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ye,0)}t.blitFramebuffer(0,0,Q,oe,0,0,Q,oe,he,t.NEAREST),l===!0&&(ne.length=0,F.length=0,ne.push(t.COLOR_ATTACHMENT0+le),z.depthBuffer&&z.resolveDepthBuffer===!1&&(ne.push(de),F.push(de),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,F)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ne))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ie)for(let le=0;le<L.length;le++){n.bindFramebuffer(t.FRAMEBUFFER,ee.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+le,t.RENDERBUFFER,ee.__webglColorRenderbuffer[le]);const ye=i.get(L[le]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ee.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+le,t.TEXTURE_2D,ye,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ee.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&l){const L=z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[L])}}}function ve(z){return Math.min(s.maxSamples,z.samples)}function pe(z){const L=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Me(z){const L=a.render.frame;u.get(z)!==L&&(u.set(z,L),z.update())}function Pe(z,L){const Q=z.colorSpace,oe=z.format,he=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||Q!==Ar&&Q!==Ns&&(Et.getTransfer(Q)===It?(oe!==Ti||he!==ms)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),L}function Ce(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(c.width=z.naturalWidth||z.width,c.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(c.width=z.displayWidth,c.height=z.displayHeight):(c.width=z.width,c.height=z.height),c}this.allocateTextureUnit=A,this.resetTextureUnits=P,this.setTexture2D=N,this.setTexture2DArray=U,this.setTexture3D=k,this.setTextureCube=D,this.rebindTextures=ue,this.setupRenderTarget=se,this.updateRenderTargetMipmap=X,this.updateMultisampleRenderTarget=fe,this.setupDepthRenderbuffer=te,this.setupFrameBufferTexture=q,this.useMultisampledRTT=pe}function iI(t,e){function n(i,s=Ns){let r;const a=Et.getTransfer(s);if(i===ms)return t.UNSIGNED_BYTE;if(i===Vf)return t.UNSIGNED_SHORT_4_4_4_4;if(i===$f)return t.UNSIGNED_SHORT_5_5_5_1;if(i===q0)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===j0)return t.BYTE;if(i===X0)return t.SHORT;if(i===$o)return t.UNSIGNED_SHORT;if(i===Hf)return t.INT;if(i===Mr)return t.UNSIGNED_INT;if(i===os)return t.FLOAT;if(i===ol)return t.HALF_FLOAT;if(i===Y0)return t.ALPHA;if(i===K0)return t.RGB;if(i===Ti)return t.RGBA;if(i===Z0)return t.LUMINANCE;if(i===Q0)return t.LUMINANCE_ALPHA;if(i===Wo)return t.DEPTH_COMPONENT;if(i===jo)return t.DEPTH_STENCIL;if(i===J0)return t.RED;if(i===Gf)return t.RED_INTEGER;if(i===ey)return t.RG;if(i===Wf)return t.RG_INTEGER;if(i===jf)return t.RGBA_INTEGER;if(i===_c||i===bc||i===Ec||i===wc)if(a===It)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===_c)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===bc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ec)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===wc)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===_c)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===bc)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ec)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===wc)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===xh||i===Sh||i===Th||i===Mh)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===xh)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Sh)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Th)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Mh)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Ah||i===Ch||i===Ph)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Ah||i===Ch)return a===It?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Ph)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Lh||i===Rh||i===Ih||i===Dh||i===Oh||i===kh||i===Nh||i===Fh||i===Uh||i===zh||i===Bh||i===Hh||i===Vh||i===$h)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===Lh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Rh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Ih)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Dh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Oh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===kh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Nh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Fh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Uh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===zh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Bh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Hh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Vh)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===$h)return a===It?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===xc||i===Gh||i===Wh)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===xc)return a===It?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Gh)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Wh)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===ty||i===jh||i===Xh||i===qh)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===xc)return r.COMPRESSED_RED_RGTC1_EXT;if(i===jh)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Xh)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===qh)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Go?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}const sI=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rI=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class aI{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const s=new kn,r=e.properties.get(s);r.__webglTexture=n.texture,(n.depthNear!==i.depthNear||n.depthFar!==i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new Qs({vertexShader:sI,fragmentShader:rI,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new ci(new pu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class oI extends Fa{constructor(e,n){super();const i=this;let s=null,r=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,h=null,p=null,f=null;const m=new aI,v=n.getContextAttributes();let g=null,_=null;const b=[],y=[],T=new Ut;let x=null;const S=new ai;S.viewport=new Xt;const M=new ai;M.viewport=new Xt;const w=[S,M],E=new AC;let C=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let H=b[Y];return H===void 0&&(H=new Pd,b[Y]=H),H.getTargetRaySpace()},this.getControllerGrip=function(Y){let H=b[Y];return H===void 0&&(H=new Pd,b[Y]=H),H.getGripSpace()},this.getHand=function(Y){let H=b[Y];return H===void 0&&(H=new Pd,b[Y]=H),H.getHandSpace()};function A(Y){const H=y.indexOf(Y.inputSource);if(H===-1)return;const q=b[H];q!==void 0&&(q.update(Y.inputSource,Y.frame,c||a),q.dispatchEvent({type:Y.type,data:Y.inputSource}))}function R(){s.removeEventListener("select",A),s.removeEventListener("selectstart",A),s.removeEventListener("selectend",A),s.removeEventListener("squeeze",A),s.removeEventListener("squeezestart",A),s.removeEventListener("squeezeend",A),s.removeEventListener("end",R),s.removeEventListener("inputsourceschange",N);for(let Y=0;Y<b.length;Y++){const H=y[Y];H!==null&&(y[Y]=null,b[Y].disconnect(H))}C=null,P=null,m.reset(),e.setRenderTarget(g),p=null,h=null,d=null,s=null,_=null,j.stop(),i.isPresenting=!1,e.setPixelRatio(x),e.setSize(T.width,T.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){r=Y,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){o=Y,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return s},this.setSession=async function(Y){if(s=Y,s!==null){if(g=e.getRenderTarget(),s.addEventListener("select",A),s.addEventListener("selectstart",A),s.addEventListener("selectend",A),s.addEventListener("squeeze",A),s.addEventListener("squeezestart",A),s.addEventListener("squeezeend",A),s.addEventListener("end",R),s.addEventListener("inputsourceschange",N),v.xrCompatible!==!0&&await n.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(T),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let q=null,K=null,G=null;v.depth&&(G=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,q=v.stencil?jo:Wo,K=v.stencil?Go:Mr);const te={colorFormat:n.RGBA8,depthFormat:G,scaleFactor:r};d=new XRWebGLBinding(s,n),h=d.createProjectionLayer(te),s.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Zs(h.textureWidth,h.textureHeight,{format:Ti,type:ms,depthTexture:new py(h.textureWidth,h.textureHeight,K,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const q={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};p=new XRWebGLLayer(s,n,q),s.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),_=new Zs(p.framebufferWidth,p.framebufferHeight,{format:Ti,type:ms,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await s.requestReferenceSpace(o),j.setContext(s),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function N(Y){for(let H=0;H<Y.removed.length;H++){const q=Y.removed[H],K=y.indexOf(q);K>=0&&(y[K]=null,b[K].disconnect(q))}for(let H=0;H<Y.added.length;H++){const q=Y.added[H];let K=y.indexOf(q);if(K===-1){for(let te=0;te<b.length;te++)if(te>=y.length){y.push(q),K=te;break}else if(y[te]===null){y[te]=q,K=te;break}if(K===-1)break}const G=b[K];G&&G.connect(q)}}const U=new Ie,k=new Ie;function D(Y,H,q){U.setFromMatrixPosition(H.matrixWorld),k.setFromMatrixPosition(q.matrixWorld);const K=U.distanceTo(k),G=H.projectionMatrix.elements,te=q.projectionMatrix.elements,ue=G[14]/(G[10]-1),se=G[14]/(G[10]+1),X=(G[9]+1)/G[5],ne=(G[9]-1)/G[5],F=(G[8]-1)/G[0],fe=(te[8]+1)/te[0],ve=ue*F,pe=ue*fe,Me=K/(-F+fe),Pe=Me*-F;if(H.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Pe),Y.translateZ(Me),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),G[10]===-1)Y.projectionMatrix.copy(H.projectionMatrix),Y.projectionMatrixInverse.copy(H.projectionMatrixInverse);else{const Ce=ue+Me,z=se+Me,L=ve-Pe,Q=pe+(K-Pe),oe=X*se/z*Ce,he=ne*se/z*Ce;Y.projectionMatrix.makePerspective(L,Q,oe,he,Ce,z),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function W(Y,H){H===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(H.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(s===null)return;let H=Y.near,q=Y.far;m.texture!==null&&(m.depthNear>0&&(H=m.depthNear),m.depthFar>0&&(q=m.depthFar)),E.near=M.near=S.near=H,E.far=M.far=S.far=q,(C!==E.near||P!==E.far)&&(s.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,P=E.far),S.layers.mask=Y.layers.mask|2,M.layers.mask=Y.layers.mask|4,E.layers.mask=S.layers.mask|M.layers.mask;const K=Y.parent,G=E.cameras;W(E,K);for(let te=0;te<G.length;te++)W(G[te],K);G.length===2?D(E,S,M):E.projectionMatrix.copy(S.projectionMatrix),O(Y,E,K)};function O(Y,H,q){q===null?Y.matrix.copy(H.matrixWorld):(Y.matrix.copy(q.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(H.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(H.projectionMatrix),Y.projectionMatrixInverse.copy(H.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=Xo*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(Y){l=Y,h!==null&&(h.fixedFoveation=Y),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Y)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(E)};let B=null;function V(Y,H){if(u=H.getViewerPose(c||a),f=H,u!==null){const q=u.views;p!==null&&(e.setRenderTargetFramebuffer(_,p.framebuffer),e.setRenderTarget(_));let K=!1;q.length!==E.cameras.length&&(E.cameras.length=0,K=!0);for(let ue=0;ue<q.length;ue++){const se=q[ue];let X=null;if(p!==null)X=p.getViewport(se);else{const F=d.getViewSubImage(h,se);X=F.viewport,ue===0&&(e.setRenderTargetTextures(_,F.colorTexture,F.depthStencilTexture),e.setRenderTarget(_))}let ne=w[ue];ne===void 0&&(ne=new ai,ne.layers.enable(ue),ne.viewport=new Xt,w[ue]=ne),ne.matrix.fromArray(se.transform.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.projectionMatrix.fromArray(se.projectionMatrix),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert(),ne.viewport.set(X.x,X.y,X.width,X.height),ue===0&&(E.matrix.copy(ne.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),K===!0&&E.cameras.push(ne)}const G=s.enabledFeatures;if(G&&G.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&d){const ue=d.getDepthInformation(q[0]);ue&&ue.isValid&&ue.texture&&m.init(e,ue,s.renderState)}}for(let q=0;q<b.length;q++){const K=y[q],G=b[q];K!==null&&G!==void 0&&G.update(K,H,c||a)}B&&B(Y,H),H.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:H}),f=null}const j=new my;j.setAnimationLoop(V),this.setAnimationLoop=function(Y){B=Y},this.dispose=function(){}}}const gr=new $i,lI=new en;function cI(t,e){function n(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function i(v,g){g.color.getRGB(v.fogColor.value,dy(t)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function s(v,g,_,b,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(v,g):g.isMeshToonMaterial?(r(v,g),d(v,g)):g.isMeshPhongMaterial?(r(v,g),u(v,g)):g.isMeshStandardMaterial?(r(v,g),h(v,g),g.isMeshPhysicalMaterial&&p(v,g,y)):g.isMeshMatcapMaterial?(r(v,g),f(v,g)):g.isMeshDepthMaterial?r(v,g):g.isMeshDistanceMaterial?(r(v,g),m(v,g)):g.isMeshNormalMaterial?r(v,g):g.isLineBasicMaterial?(a(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,_,b):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,n(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===Vn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,n(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===Vn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,n(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,n(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const _=e.get(g),b=_.envMap,y=_.envMapRotation;b&&(v.envMap.value=b,gr.copy(y),gr.x*=-1,gr.y*=-1,gr.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(gr.y*=-1,gr.z*=-1),v.envMapRotation.value.setFromMatrix4(lI.makeRotationFromEuler(gr)),v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,v.aoMapTransform))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,_,b){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*_,v.scale.value=b*.5,g.map&&(v.map.value=g.map,n(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function h(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function p(v,g,_){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Vn&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,v.specularIntensityMapTransform))}function f(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){const _=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(_.matrixWorld),v.nearDistance.value=_.shadow.camera.near,v.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function uI(t,e,n,i){let s={},r={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,b){const y=b.program;i.uniformBlockBinding(_,y)}function c(_,b){let y=s[_.id];y===void 0&&(f(_),y=u(_),s[_.id]=y,_.addEventListener("dispose",v));const T=b.program;i.updateUBOMapping(_,T);const x=e.render.frame;r[_.id]!==x&&(h(_),r[_.id]=x)}function u(_){const b=d();_.__bindingPointIndex=b;const y=t.createBuffer(),T=_.__size,x=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,y),t.bufferData(t.UNIFORM_BUFFER,T,x),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,b,y),y}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const b=s[_.id],y=_.uniforms,T=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,b);for(let x=0,S=y.length;x<S;x++){const M=Array.isArray(y[x])?y[x]:[y[x]];for(let w=0,E=M.length;w<E;w++){const C=M[w];if(p(C,x,w,T)===!0){const P=C.__offset,A=Array.isArray(C.value)?C.value:[C.value];let R=0;for(let N=0;N<A.length;N++){const U=A[N],k=m(U);typeof U=="number"||typeof U=="boolean"?(C.__data[0]=U,t.bufferSubData(t.UNIFORM_BUFFER,P+R,C.__data)):U.isMatrix3?(C.__data[0]=U.elements[0],C.__data[1]=U.elements[1],C.__data[2]=U.elements[2],C.__data[3]=0,C.__data[4]=U.elements[3],C.__data[5]=U.elements[4],C.__data[6]=U.elements[5],C.__data[7]=0,C.__data[8]=U.elements[6],C.__data[9]=U.elements[7],C.__data[10]=U.elements[8],C.__data[11]=0):(U.toArray(C.__data,R),R+=k.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,P,C.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function p(_,b,y,T){const x=_.value,S=b+"_"+y;if(T[S]===void 0)return typeof x=="number"||typeof x=="boolean"?T[S]=x:T[S]=x.clone(),!0;{const M=T[S];if(typeof x=="number"||typeof x=="boolean"){if(M!==x)return T[S]=x,!0}else if(M.equals(x)===!1)return M.copy(x),!0}return!1}function f(_){const b=_.uniforms;let y=0;const T=16;for(let S=0,M=b.length;S<M;S++){const w=Array.isArray(b[S])?b[S]:[b[S]];for(let E=0,C=w.length;E<C;E++){const P=w[E],A=Array.isArray(P.value)?P.value:[P.value];for(let R=0,N=A.length;R<N;R++){const U=A[R],k=m(U),D=y%T,W=D%k.boundary,O=D+W;y+=W,O!==0&&T-O<k.storage&&(y+=T-O),P.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=y,y+=k.storage}}}const x=y%T;return x>0&&(y+=T-x),_.__size=y,_.__cache={},this}function m(_){const b={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(b.boundary=4,b.storage=4):_.isVector2?(b.boundary=8,b.storage=8):_.isVector3||_.isColor?(b.boundary=16,b.storage=12):_.isVector4?(b.boundary=16,b.storage=16):_.isMatrix3?(b.boundary=48,b.storage=48):_.isMatrix4?(b.boundary=64,b.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),b}function v(_){const b=_.target;b.removeEventListener("dispose",v);const y=a.indexOf(b.__bindingPointIndex);a.splice(y,1),t.deleteBuffer(s[b.id]),delete s[b.id],delete r[b.id]}function g(){for(const _ in s)t.deleteBuffer(s[_]);a=[],s={},r={}}return{bind:l,update:c,dispose:g}}class dI{constructor(e={}){const{canvas:n=jA(),context:i=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=a;const f=new Uint32Array(4),m=new Int32Array(4);let v=null,g=null;const _=[],b=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Vs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const y=this;let T=!1;this._outputColorSpace=ri;let x=0,S=0,M=null,w=-1,E=null;const C=new Xt,P=new Xt;let A=null;const R=new kt(0);let N=0,U=n.width,k=n.height,D=1,W=null,O=null;const B=new Xt(0,0,U,k),V=new Xt(0,0,U,k);let j=!1;const Y=new Zf;let H=!1,q=!1;const K=new en,G=new en,te=new Ie,ue=new Xt,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function ne(){return M===null?D:1}let F=i;function fe(J,be){return n.getContext(J,be)}try{const J={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Bf}`),n.addEventListener("webglcontextlost",Le,!1),n.addEventListener("webglcontextrestored",ze,!1),n.addEventListener("webglcontextcreationerror",He,!1),F===null){const be="webgl2";if(F=fe(be,J),F===null)throw fe(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let ve,pe,Me,Pe,Ce,z,L,Q,oe,he,de,ee,ie,le,ye,Se,_e,Te,ke,Ne,Ge,Be,qe,ge;function Ue(){ve=new EL(F),ve.init(),Be=new iI(F,ve),pe=new pL(F,ve,e,Be),Me=new tI(F,ve),pe.reverseDepthBuffer&&h&&Me.buffers.depth.setReversed(!0),Pe=new SL(F),Ce=new VR,z=new nI(F,ve,Me,Ce,pe,Be,Pe),L=new gL(y),Q=new bL(y),oe=new LC(F),qe=new hL(F,oe),he=new wL(F,oe,Pe,qe),de=new ML(F,he,oe,Pe),ke=new TL(F,pe,z),Se=new mL(Ce),ee=new HR(y,L,Q,ve,pe,qe,Se),ie=new cI(y,Ce),le=new GR,ye=new KR(ve),Te=new dL(y,L,Q,Me,de,p,l),_e=new JR(y,de,pe),ge=new uI(F,Pe,pe,Me),Ne=new fL(F,ve,Pe),Ge=new xL(F,ve,Pe),Pe.programs=ee.programs,y.capabilities=pe,y.extensions=ve,y.properties=Ce,y.renderLists=le,y.shadowMap=_e,y.state=Me,y.info=Pe}Ue();const xe=new oI(y,F);this.xr=xe,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){const J=ve.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=ve.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(J){J!==void 0&&(D=J,this.setSize(U,k,!1))},this.getSize=function(J){return J.set(U,k)},this.setSize=function(J,be,De=!0){if(xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=J,k=be,n.width=Math.floor(J*D),n.height=Math.floor(be*D),De===!0&&(n.style.width=J+"px",n.style.height=be+"px"),this.setViewport(0,0,J,be)},this.getDrawingBufferSize=function(J){return J.set(U*D,k*D).floor()},this.setDrawingBufferSize=function(J,be,De){U=J,k=be,D=De,n.width=Math.floor(J*De),n.height=Math.floor(be*De),this.setViewport(0,0,J,be)},this.getCurrentViewport=function(J){return J.copy(C)},this.getViewport=function(J){return J.copy(B)},this.setViewport=function(J,be,De,Oe){J.isVector4?B.set(J.x,J.y,J.z,J.w):B.set(J,be,De,Oe),Me.viewport(C.copy(B).multiplyScalar(D).round())},this.getScissor=function(J){return J.copy(V)},this.setScissor=function(J,be,De,Oe){J.isVector4?V.set(J.x,J.y,J.z,J.w):V.set(J,be,De,Oe),Me.scissor(P.copy(V).multiplyScalar(D).round())},this.getScissorTest=function(){return j},this.setScissorTest=function(J){Me.setScissorTest(j=J)},this.setOpaqueSort=function(J){W=J},this.setTransparentSort=function(J){O=J},this.getClearColor=function(J){return J.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor(...arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha(...arguments)},this.clear=function(J=!0,be=!0,De=!0){let Oe=0;if(J){let Ee=!1;if(M!==null){const Ve=M.texture.format;Ee=Ve===jf||Ve===Wf||Ve===Gf}if(Ee){const Ve=M.texture.type,je=Ve===ms||Ve===Mr||Ve===$o||Ve===Go||Ve===Vf||Ve===$f,Ze=Te.getClearColor(),Je=Te.getClearAlpha(),ot=Ze.r,rt=Ze.g,nt=Ze.b;je?(f[0]=ot,f[1]=rt,f[2]=nt,f[3]=Je,F.clearBufferuiv(F.COLOR,0,f)):(m[0]=ot,m[1]=rt,m[2]=nt,m[3]=Je,F.clearBufferiv(F.COLOR,0,m))}else Oe|=F.COLOR_BUFFER_BIT}be&&(Oe|=F.DEPTH_BUFFER_BIT),De&&(Oe|=F.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),F.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Le,!1),n.removeEventListener("webglcontextrestored",ze,!1),n.removeEventListener("webglcontextcreationerror",He,!1),Te.dispose(),le.dispose(),ye.dispose(),Ce.dispose(),L.dispose(),Q.dispose(),de.dispose(),qe.dispose(),ge.dispose(),ee.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",ji),xe.removeEventListener("sessionend",Xi),Un.stop()};function Le(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const J=Pe.autoReset,be=_e.enabled,De=_e.autoUpdate,Oe=_e.needsUpdate,Ee=_e.type;Ue(),Pe.autoReset=J,_e.enabled=be,_e.autoUpdate=De,_e.needsUpdate=Oe,_e.type=Ee}function He(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function We(J){const be=J.target;be.removeEventListener("dispose",We),tt(be)}function tt(J){zt(J),Ce.remove(J)}function zt(J){const be=Ce.get(J).programs;be!==void 0&&(be.forEach(function(De){ee.releaseProgram(De)}),J.isShaderMaterial&&ee.releaseShaderCache(J))}this.renderBufferDirect=function(J,be,De,Oe,Ee,Ve){be===null&&(be=se);const je=Ee.isMesh&&Ee.matrixWorld.determinant()<0,Ze=$a(J,be,De,Oe,Ee);Me.setMaterial(Oe,je);let Je=De.index,ot=1;if(Oe.wireframe===!0){if(Je=he.getWireframeAttribute(De),Je===void 0)return;ot=2}const rt=De.drawRange,nt=De.attributes.position;let gt=rt.start*ot,wt=(rt.start+rt.count)*ot;Ve!==null&&(gt=Math.max(gt,Ve.start*ot),wt=Math.min(wt,(Ve.start+Ve.count)*ot)),Je!==null?(gt=Math.max(gt,0),wt=Math.min(wt,Je.count)):nt!=null&&(gt=Math.max(gt,0),wt=Math.min(wt,nt.count));const Gt=wt-gt;if(Gt<0||Gt===1/0)return;qe.setup(Ee,Oe,Ze,De,Je);let Ht,vt=Ne;if(Je!==null&&(Ht=oe.get(Je),vt=Ge,vt.setIndex(Ht)),Ee.isMesh)Oe.wireframe===!0?(Me.setLineWidth(Oe.wireframeLinewidth*ne()),vt.setMode(F.LINES)):vt.setMode(F.TRIANGLES);else if(Ee.isLine){let et=Oe.linewidth;et===void 0&&(et=1),Me.setLineWidth(et*ne()),Ee.isLineSegments?vt.setMode(F.LINES):Ee.isLineLoop?vt.setMode(F.LINE_LOOP):vt.setMode(F.LINE_STRIP)}else Ee.isPoints?vt.setMode(F.POINTS):Ee.isSprite&&vt.setMode(F.TRIANGLES);if(Ee.isBatchedMesh)if(Ee._multiDrawInstances!==null)Sc("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),vt.renderMultiDrawInstances(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount,Ee._multiDrawInstances);else if(ve.get("WEBGL_multi_draw"))vt.renderMultiDraw(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount);else{const et=Ee._multiDrawStarts,Zt=Ee._multiDrawCounts,ft=Ee._multiDrawCount,sn=Je?oe.get(Je).bytesPerElement:1,_s=Ce.get(Oe).currentProgram.getUniforms();for(let Qt=0;Qt<ft;Qt++)_s.setValue(F,"_gl_DrawID",Qt),vt.render(et[Qt]/sn,Zt[Qt])}else if(Ee.isInstancedMesh)vt.renderInstances(gt,Gt,Ee.count);else if(De.isInstancedBufferGeometry){const et=De._maxInstanceCount!==void 0?De._maxInstanceCount:1/0,Zt=Math.min(De.instanceCount,et);vt.renderInstances(gt,Gt,Zt)}else vt.render(gt,Gt)};function _t(J,be,De){J.transparent===!0&&J.side===ss&&J.forceSinglePass===!1?(J.side=Vn,J.needsUpdate=!0,Dr(J,be,De),J.side=Ks,J.needsUpdate=!0,Dr(J,be,De),J.side=ss):Dr(J,be,De)}this.compile=function(J,be,De=null){De===null&&(De=J),g=ye.get(De),g.init(be),b.push(g),De.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(be.layers)&&(g.pushLight(Ee),Ee.castShadow&&g.pushShadow(Ee))}),J!==De&&J.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(be.layers)&&(g.pushLight(Ee),Ee.castShadow&&g.pushShadow(Ee))}),g.setupLights();const Oe=new Set;return J.traverse(function(Ee){if(!(Ee.isMesh||Ee.isPoints||Ee.isLine||Ee.isSprite))return;const Ve=Ee.material;if(Ve)if(Array.isArray(Ve))for(let je=0;je<Ve.length;je++){const Ze=Ve[je];_t(Ze,De,Ee),Oe.add(Ze)}else _t(Ve,De,Ee),Oe.add(Ve)}),g=b.pop(),Oe},this.compileAsync=function(J,be,De=null){const Oe=this.compile(J,be,De);return new Promise(Ee=>{function Ve(){if(Oe.forEach(function(je){Ce.get(je).currentProgram.isReady()&&Oe.delete(je)}),Oe.size===0){Ee(J);return}setTimeout(Ve,10)}ve.get("KHR_parallel_shader_compile")!==null?Ve():setTimeout(Ve,10)})};let En=null;function wn(J){En&&En(J)}function ji(){Un.stop()}function Xi(){Un.start()}const Un=new my;Un.setAnimationLoop(wn),typeof self<"u"&&Un.setContext(self),this.setAnimationLoop=function(J){En=J,xe.setAnimationLoop(J),J===null?Un.stop():Un.start()},xe.addEventListener("sessionstart",ji),xe.addEventListener("sessionend",Xi),this.render=function(J,be){if(be!==void 0&&be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),be.parent===null&&be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),xe.enabled===!0&&xe.isPresenting===!0&&(xe.cameraAutoUpdate===!0&&xe.updateCamera(be),be=xe.getCamera()),J.isScene===!0&&J.onBeforeRender(y,J,be,M),g=ye.get(J,b.length),g.init(be),b.push(g),G.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),Y.setFromProjectionMatrix(G),q=this.localClippingEnabled,H=Se.init(this.clippingPlanes,q),v=le.get(J,_.length),v.init(),_.push(v),xe.enabled===!0&&xe.isPresenting===!0){const Ve=y.xr.getDepthSensingMesh();Ve!==null&&sr(Ve,be,-1/0,y.sortObjects)}sr(J,be,0,y.sortObjects),v.finish(),y.sortObjects===!0&&v.sort(W,O),X=xe.enabled===!1||xe.isPresenting===!1||xe.hasDepthSensing()===!1,X&&Te.addToRenderList(v,J),this.info.render.frame++,H===!0&&Se.beginShadows();const De=g.state.shadowsArray;_e.render(De,J,be),H===!0&&Se.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=v.opaque,Ee=v.transmissive;if(g.setupLights(),be.isArrayCamera){const Ve=be.cameras;if(Ee.length>0)for(let je=0,Ze=Ve.length;je<Ze;je++){const Je=Ve[je];_l(Oe,Ee,J,Je)}X&&Te.render(J);for(let je=0,Ze=Ve.length;je<Ze;je++){const Je=Ve[je];Ri(v,J,Je,Je.viewport)}}else Ee.length>0&&_l(Oe,Ee,J,be),X&&Te.render(J),Ri(v,J,be);M!==null&&S===0&&(z.updateMultisampleRenderTarget(M),z.updateRenderTargetMipmap(M)),J.isScene===!0&&J.onAfterRender(y,J,be),qe.resetDefaultState(),w=-1,E=null,b.pop(),b.length>0?(g=b[b.length-1],H===!0&&Se.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,_.pop(),_.length>0?v=_[_.length-1]:v=null};function sr(J,be,De,Oe){if(J.visible===!1)return;if(J.layers.test(be.layers)){if(J.isGroup)De=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(be);else if(J.isLight)g.pushLight(J),J.castShadow&&g.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||Y.intersectsSprite(J)){Oe&&ue.setFromMatrixPosition(J.matrixWorld).applyMatrix4(G);const je=de.update(J),Ze=J.material;Ze.visible&&v.push(J,je,Ze,De,ue.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||Y.intersectsObject(J))){const je=de.update(J),Ze=J.material;if(Oe&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),ue.copy(J.boundingSphere.center)):(je.boundingSphere===null&&je.computeBoundingSphere(),ue.copy(je.boundingSphere.center)),ue.applyMatrix4(J.matrixWorld).applyMatrix4(G)),Array.isArray(Ze)){const Je=je.groups;for(let ot=0,rt=Je.length;ot<rt;ot++){const nt=Je[ot],gt=Ze[nt.materialIndex];gt&&gt.visible&&v.push(J,je,gt,De,ue.z,nt)}}else Ze.visible&&v.push(J,je,Ze,De,ue.z,null)}}const Ve=J.children;for(let je=0,Ze=Ve.length;je<Ze;je++)sr(Ve[je],be,De,Oe)}function Ri(J,be,De,Oe){const Ee=J.opaque,Ve=J.transmissive,je=J.transparent;g.setupLightsView(De),H===!0&&Se.setGlobalState(y.clippingPlanes,De),Oe&&Me.viewport(C.copy(Oe)),Ee.length>0&&Ir(Ee,be,De),Ve.length>0&&Ir(Ve,be,De),je.length>0&&Ir(je,be,De),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function _l(J,be,De,Oe){if((De.isScene===!0?De.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Oe.id]===void 0&&(g.state.transmissionRenderTarget[Oe.id]=new Zs(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")||ve.has("EXT_color_buffer_float")?ol:ms,minFilter:Bs,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Et.workingColorSpace}));const Ve=g.state.transmissionRenderTarget[Oe.id],je=Oe.viewport||C;Ve.setSize(je.z*y.transmissionResolutionScale,je.w*y.transmissionResolutionScale);const Ze=y.getRenderTarget();y.setRenderTarget(Ve),y.getClearColor(R),N=y.getClearAlpha(),N<1&&y.setClearColor(16777215,.5),y.clear(),X&&Te.render(De);const Je=y.toneMapping;y.toneMapping=Vs;const ot=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),g.setupLightsView(Oe),H===!0&&Se.setGlobalState(y.clippingPlanes,Oe),Ir(J,De,Oe),z.updateMultisampleRenderTarget(Ve),z.updateRenderTargetMipmap(Ve),ve.has("WEBGL_multisampled_render_to_texture")===!1){let rt=!1;for(let nt=0,gt=be.length;nt<gt;nt++){const wt=be[nt],Gt=wt.object,Ht=wt.geometry,vt=wt.material,et=wt.group;if(vt.side===ss&&Gt.layers.test(Oe.layers)){const Zt=vt.side;vt.side=Vn,vt.needsUpdate=!0,bl(Gt,De,Oe,Ht,vt,et),vt.side=Zt,vt.needsUpdate=!0,rt=!0}}rt===!0&&(z.updateMultisampleRenderTarget(Ve),z.updateRenderTargetMipmap(Ve))}y.setRenderTarget(Ze),y.setClearColor(R,N),ot!==void 0&&(Oe.viewport=ot),y.toneMapping=Je}function Ir(J,be,De){const Oe=be.isScene===!0?be.overrideMaterial:null;for(let Ee=0,Ve=J.length;Ee<Ve;Ee++){const je=J[Ee],Ze=je.object,Je=je.geometry,ot=je.group;let rt=je.material;rt.allowOverride===!0&&Oe!==null&&(rt=Oe),Ze.layers.test(De.layers)&&bl(Ze,be,De,Je,rt,ot)}}function bl(J,be,De,Oe,Ee,Ve){J.onBeforeRender(y,be,De,Oe,Ee,Ve),J.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),Ee.onBeforeRender(y,be,De,Oe,J,Ve),Ee.transparent===!0&&Ee.side===ss&&Ee.forceSinglePass===!1?(Ee.side=Vn,Ee.needsUpdate=!0,y.renderBufferDirect(De,be,Oe,Ee,J,Ve),Ee.side=Ks,Ee.needsUpdate=!0,y.renderBufferDirect(De,be,Oe,Ee,J,Ve),Ee.side=ss):y.renderBufferDirect(De,be,Oe,Ee,J,Ve),J.onAfterRender(y,be,De,Oe,Ee,Ve)}function Dr(J,be,De){be.isScene!==!0&&(be=se);const Oe=Ce.get(J),Ee=g.state.lights,Ve=g.state.shadowsArray,je=Ee.state.version,Ze=ee.getParameters(J,Ee.state,Ve,be,De),Je=ee.getProgramCacheKey(Ze);let ot=Oe.programs;Oe.environment=J.isMeshStandardMaterial?be.environment:null,Oe.fog=be.fog,Oe.envMap=(J.isMeshStandardMaterial?Q:L).get(J.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&J.envMap===null?be.environmentRotation:J.envMapRotation,ot===void 0&&(J.addEventListener("dispose",We),ot=new Map,Oe.programs=ot);let rt=ot.get(Je);if(rt!==void 0){if(Oe.currentProgram===rt&&Oe.lightsStateVersion===je)return wl(J,Ze),rt}else Ze.uniforms=ee.getUniforms(J),J.onBeforeCompile(Ze,y),rt=ee.acquireProgram(Ze,Je),ot.set(Je,rt),Oe.uniforms=Ze.uniforms;const nt=Oe.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(nt.clippingPlanes=Se.uniform),wl(J,Ze),Oe.needsLights=xl(J),Oe.lightsStateVersion=je,Oe.needsLights&&(nt.ambientLightColor.value=Ee.state.ambient,nt.lightProbe.value=Ee.state.probe,nt.directionalLights.value=Ee.state.directional,nt.directionalLightShadows.value=Ee.state.directionalShadow,nt.spotLights.value=Ee.state.spot,nt.spotLightShadows.value=Ee.state.spotShadow,nt.rectAreaLights.value=Ee.state.rectArea,nt.ltc_1.value=Ee.state.rectAreaLTC1,nt.ltc_2.value=Ee.state.rectAreaLTC2,nt.pointLights.value=Ee.state.point,nt.pointLightShadows.value=Ee.state.pointShadow,nt.hemisphereLights.value=Ee.state.hemi,nt.directionalShadowMap.value=Ee.state.directionalShadowMap,nt.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,nt.spotShadowMap.value=Ee.state.spotShadowMap,nt.spotLightMatrix.value=Ee.state.spotLightMatrix,nt.spotLightMap.value=Ee.state.spotLightMap,nt.pointShadowMap.value=Ee.state.pointShadowMap,nt.pointShadowMatrix.value=Ee.state.pointShadowMatrix),Oe.currentProgram=rt,Oe.uniformsList=null,rt}function El(J){if(J.uniformsList===null){const be=J.currentProgram.getUniforms();J.uniformsList=Tc.seqWithValue(be.seq,J.uniforms)}return J.uniformsList}function wl(J,be){const De=Ce.get(J);De.outputColorSpace=be.outputColorSpace,De.batching=be.batching,De.batchingColor=be.batchingColor,De.instancing=be.instancing,De.instancingColor=be.instancingColor,De.instancingMorph=be.instancingMorph,De.skinning=be.skinning,De.morphTargets=be.morphTargets,De.morphNormals=be.morphNormals,De.morphColors=be.morphColors,De.morphTargetsCount=be.morphTargetsCount,De.numClippingPlanes=be.numClippingPlanes,De.numIntersection=be.numClipIntersection,De.vertexAlphas=be.vertexAlphas,De.vertexTangents=be.vertexTangents,De.toneMapping=be.toneMapping}function $a(J,be,De,Oe,Ee){be.isScene!==!0&&(be=se),z.resetTextureUnits();const Ve=be.fog,je=Oe.isMeshStandardMaterial?be.environment:null,Ze=M===null?y.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Ar,Je=(Oe.isMeshStandardMaterial?Q:L).get(Oe.envMap||je),ot=Oe.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,rt=!!De.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),nt=!!De.morphAttributes.position,gt=!!De.morphAttributes.normal,wt=!!De.morphAttributes.color;let Gt=Vs;Oe.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Gt=y.toneMapping);const Ht=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,vt=Ht!==void 0?Ht.length:0,et=Ce.get(Oe),Zt=g.state.lights;if(H===!0&&(q===!0||J!==E)){const an=J===E&&Oe.id===w;Se.setState(Oe,J,an)}let ft=!1;Oe.version===et.__version?(et.needsLights&&et.lightsStateVersion!==Zt.state.version||et.outputColorSpace!==Ze||Ee.isBatchedMesh&&et.batching===!1||!Ee.isBatchedMesh&&et.batching===!0||Ee.isBatchedMesh&&et.batchingColor===!0&&Ee.colorTexture===null||Ee.isBatchedMesh&&et.batchingColor===!1&&Ee.colorTexture!==null||Ee.isInstancedMesh&&et.instancing===!1||!Ee.isInstancedMesh&&et.instancing===!0||Ee.isSkinnedMesh&&et.skinning===!1||!Ee.isSkinnedMesh&&et.skinning===!0||Ee.isInstancedMesh&&et.instancingColor===!0&&Ee.instanceColor===null||Ee.isInstancedMesh&&et.instancingColor===!1&&Ee.instanceColor!==null||Ee.isInstancedMesh&&et.instancingMorph===!0&&Ee.morphTexture===null||Ee.isInstancedMesh&&et.instancingMorph===!1&&Ee.morphTexture!==null||et.envMap!==Je||Oe.fog===!0&&et.fog!==Ve||et.numClippingPlanes!==void 0&&(et.numClippingPlanes!==Se.numPlanes||et.numIntersection!==Se.numIntersection)||et.vertexAlphas!==ot||et.vertexTangents!==rt||et.morphTargets!==nt||et.morphNormals!==gt||et.morphColors!==wt||et.toneMapping!==Gt||et.morphTargetsCount!==vt)&&(ft=!0):(ft=!0,et.__version=Oe.version);let sn=et.currentProgram;ft===!0&&(sn=Dr(Oe,be,Ee));let _s=!1,Qt=!1,An=!1;const Rt=sn.getUniforms(),zn=et.uniforms;if(Me.useProgram(sn.program)&&(_s=!0,Qt=!0,An=!0),Oe.id!==w&&(w=Oe.id,Qt=!0),_s||E!==J){Me.buffers.depth.getReversed()?(K.copy(J.projectionMatrix),qA(K),YA(K),Rt.setValue(F,"projectionMatrix",K)):Rt.setValue(F,"projectionMatrix",J.projectionMatrix),Rt.setValue(F,"viewMatrix",J.matrixWorldInverse);const vn=Rt.map.cameraPosition;vn!==void 0&&vn.setValue(F,te.setFromMatrixPosition(J.matrixWorld)),pe.logarithmicDepthBuffer&&Rt.setValue(F,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&Rt.setValue(F,"isOrthographic",J.isOrthographicCamera===!0),E!==J&&(E=J,Qt=!0,An=!0)}if(Ee.isSkinnedMesh){Rt.setOptional(F,Ee,"bindMatrix"),Rt.setOptional(F,Ee,"bindMatrixInverse");const an=Ee.skeleton;an&&(an.boneTexture===null&&an.computeBoneTexture(),Rt.setValue(F,"boneTexture",an.boneTexture,z))}Ee.isBatchedMesh&&(Rt.setOptional(F,Ee,"batchingTexture"),Rt.setValue(F,"batchingTexture",Ee._matricesTexture,z),Rt.setOptional(F,Ee,"batchingIdTexture"),Rt.setValue(F,"batchingIdTexture",Ee._indirectTexture,z),Rt.setOptional(F,Ee,"batchingColorTexture"),Ee._colorsTexture!==null&&Rt.setValue(F,"batchingColorTexture",Ee._colorsTexture,z));const rn=De.morphAttributes;if((rn.position!==void 0||rn.normal!==void 0||rn.color!==void 0)&&ke.update(Ee,De,sn),(Qt||et.receiveShadow!==Ee.receiveShadow)&&(et.receiveShadow=Ee.receiveShadow,Rt.setValue(F,"receiveShadow",Ee.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(zn.envMap.value=Je,zn.flipEnvMap.value=Je.isCubeTexture&&Je.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&be.environment!==null&&(zn.envMapIntensity.value=be.environmentIntensity),Qt&&(Rt.setValue(F,"toneMappingExposure",y.toneMappingExposure),et.needsLights&&Du(zn,An),Ve&&Oe.fog===!0&&ie.refreshFogUniforms(zn,Ve),ie.refreshMaterialUniforms(zn,Oe,D,k,g.state.transmissionRenderTarget[J.id]),Tc.upload(F,El(et),zn,z)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(Tc.upload(F,El(et),zn,z),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&Rt.setValue(F,"center",Ee.center),Rt.setValue(F,"modelViewMatrix",Ee.modelViewMatrix),Rt.setValue(F,"normalMatrix",Ee.normalMatrix),Rt.setValue(F,"modelMatrix",Ee.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const an=Oe.uniformsGroups;for(let vn=0,rr=an.length;vn<rr;vn++){const di=an[vn];ge.update(di,sn),ge.bind(di,sn)}}return sn}function Du(J,be){J.ambientLightColor.needsUpdate=be,J.lightProbe.needsUpdate=be,J.directionalLights.needsUpdate=be,J.directionalLightShadows.needsUpdate=be,J.pointLights.needsUpdate=be,J.pointLightShadows.needsUpdate=be,J.spotLights.needsUpdate=be,J.spotLightShadows.needsUpdate=be,J.rectAreaLights.needsUpdate=be,J.hemisphereLights.needsUpdate=be}function xl(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(J,be,De){const Oe=Ce.get(J);Oe.__autoAllocateDepthBuffer=J.resolveDepthBuffer===!1,Oe.__autoAllocateDepthBuffer===!1&&(Oe.__useRenderToTexture=!1),Ce.get(J.texture).__webglTexture=be,Ce.get(J.depthTexture).__webglTexture=Oe.__autoAllocateDepthBuffer?void 0:De,Oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(J,be){const De=Ce.get(J);De.__webglFramebuffer=be,De.__useDefaultFramebuffer=be===void 0};const vs=F.createFramebuffer();this.setRenderTarget=function(J,be=0,De=0){M=J,x=be,S=De;let Oe=!0,Ee=null,Ve=!1,je=!1;if(J){const Je=Ce.get(J);if(Je.__useDefaultFramebuffer!==void 0)Me.bindFramebuffer(F.FRAMEBUFFER,null),Oe=!1;else if(Je.__webglFramebuffer===void 0)z.setupRenderTarget(J);else if(Je.__hasExternalTextures)z.rebindTextures(J,Ce.get(J.texture).__webglTexture,Ce.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const nt=J.depthTexture;if(Je.__boundDepthTexture!==nt){if(nt!==null&&Ce.has(nt)&&(J.width!==nt.image.width||J.height!==nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");z.setupDepthRenderbuffer(J)}}const ot=J.texture;(ot.isData3DTexture||ot.isDataArrayTexture||ot.isCompressedArrayTexture)&&(je=!0);const rt=Ce.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(rt[be])?Ee=rt[be][De]:Ee=rt[be],Ve=!0):J.samples>0&&z.useMultisampledRTT(J)===!1?Ee=Ce.get(J).__webglMultisampledFramebuffer:Array.isArray(rt)?Ee=rt[De]:Ee=rt,C.copy(J.viewport),P.copy(J.scissor),A=J.scissorTest}else C.copy(B).multiplyScalar(D).floor(),P.copy(V).multiplyScalar(D).floor(),A=j;if(De!==0&&(Ee=vs),Me.bindFramebuffer(F.FRAMEBUFFER,Ee)&&Oe&&Me.drawBuffers(J,Ee),Me.viewport(C),Me.scissor(P),Me.setScissorTest(A),Ve){const Je=Ce.get(J.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+be,Je.__webglTexture,De)}else if(je){const Je=Ce.get(J.texture),ot=be;F.framebufferTextureLayer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,Je.__webglTexture,De,ot)}else if(J!==null&&De!==0){const Je=Ce.get(J.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Je.__webglTexture,De)}w=-1},this.readRenderTargetPixels=function(J,be,De,Oe,Ee,Ve,je){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ze=Ce.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&je!==void 0&&(Ze=Ze[je]),Ze){Me.bindFramebuffer(F.FRAMEBUFFER,Ze);try{const Je=J.texture,ot=Je.format,rt=Je.type;if(!pe.textureFormatReadable(ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!pe.textureTypeReadable(rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}be>=0&&be<=J.width-Oe&&De>=0&&De<=J.height-Ee&&F.readPixels(be,De,Oe,Ee,Be.convert(ot),Be.convert(rt),Ve)}finally{const Je=M!==null?Ce.get(M).__webglFramebuffer:null;Me.bindFramebuffer(F.FRAMEBUFFER,Je)}}},this.readRenderTargetPixelsAsync=async function(J,be,De,Oe,Ee,Ve,je){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ze=Ce.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&je!==void 0&&(Ze=Ze[je]),Ze)if(be>=0&&be<=J.width-Oe&&De>=0&&De<=J.height-Ee){Me.bindFramebuffer(F.FRAMEBUFFER,Ze);const Je=J.texture,ot=Je.format,rt=Je.type;if(!pe.textureFormatReadable(ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!pe.textureTypeReadable(rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const nt=F.createBuffer();F.bindBuffer(F.PIXEL_PACK_BUFFER,nt),F.bufferData(F.PIXEL_PACK_BUFFER,Ve.byteLength,F.STREAM_READ),F.readPixels(be,De,Oe,Ee,Be.convert(ot),Be.convert(rt),0);const gt=M!==null?Ce.get(M).__webglFramebuffer:null;Me.bindFramebuffer(F.FRAMEBUFFER,gt);const wt=F.fenceSync(F.SYNC_GPU_COMMANDS_COMPLETE,0);return F.flush(),await XA(F,wt,4),F.bindBuffer(F.PIXEL_PACK_BUFFER,nt),F.getBufferSubData(F.PIXEL_PACK_BUFFER,0,Ve),F.deleteBuffer(nt),F.deleteSync(wt),Ve}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(J,be=null,De=0){const Oe=Math.pow(2,-De),Ee=Math.floor(J.image.width*Oe),Ve=Math.floor(J.image.height*Oe),je=be!==null?be.x:0,Ze=be!==null?be.y:0;z.setTexture2D(J,0),F.copyTexSubImage2D(F.TEXTURE_2D,De,0,0,je,Ze,Ee,Ve),Me.unbindTexture()};const ys=F.createFramebuffer(),Ou=F.createFramebuffer();this.copyTextureToTexture=function(J,be,De=null,Oe=null,Ee=0,Ve=null){Ve===null&&(Ee!==0?(Sc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ve=Ee,Ee=0):Ve=0);let je,Ze,Je,ot,rt,nt,gt,wt,Gt;const Ht=J.isCompressedTexture?J.mipmaps[Ve]:J.image;if(De!==null)je=De.max.x-De.min.x,Ze=De.max.y-De.min.y,Je=De.isBox3?De.max.z-De.min.z:1,ot=De.min.x,rt=De.min.y,nt=De.isBox3?De.min.z:0;else{const rn=Math.pow(2,-Ee);je=Math.floor(Ht.width*rn),Ze=Math.floor(Ht.height*rn),J.isDataArrayTexture?Je=Ht.depth:J.isData3DTexture?Je=Math.floor(Ht.depth*rn):Je=1,ot=0,rt=0,nt=0}Oe!==null?(gt=Oe.x,wt=Oe.y,Gt=Oe.z):(gt=0,wt=0,Gt=0);const vt=Be.convert(be.format),et=Be.convert(be.type);let Zt;be.isData3DTexture?(z.setTexture3D(be,0),Zt=F.TEXTURE_3D):be.isDataArrayTexture||be.isCompressedArrayTexture?(z.setTexture2DArray(be,0),Zt=F.TEXTURE_2D_ARRAY):(z.setTexture2D(be,0),Zt=F.TEXTURE_2D),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,be.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,be.unpackAlignment);const ft=F.getParameter(F.UNPACK_ROW_LENGTH),sn=F.getParameter(F.UNPACK_IMAGE_HEIGHT),_s=F.getParameter(F.UNPACK_SKIP_PIXELS),Qt=F.getParameter(F.UNPACK_SKIP_ROWS),An=F.getParameter(F.UNPACK_SKIP_IMAGES);F.pixelStorei(F.UNPACK_ROW_LENGTH,Ht.width),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Ht.height),F.pixelStorei(F.UNPACK_SKIP_PIXELS,ot),F.pixelStorei(F.UNPACK_SKIP_ROWS,rt),F.pixelStorei(F.UNPACK_SKIP_IMAGES,nt);const Rt=J.isDataArrayTexture||J.isData3DTexture,zn=be.isDataArrayTexture||be.isData3DTexture;if(J.isDepthTexture){const rn=Ce.get(J),an=Ce.get(be),vn=Ce.get(rn.__renderTarget),rr=Ce.get(an.__renderTarget);Me.bindFramebuffer(F.READ_FRAMEBUFFER,vn.__webglFramebuffer),Me.bindFramebuffer(F.DRAW_FRAMEBUFFER,rr.__webglFramebuffer);for(let di=0;di<Je;di++)Rt&&(F.framebufferTextureLayer(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,Ce.get(J).__webglTexture,Ee,nt+di),F.framebufferTextureLayer(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,Ce.get(be).__webglTexture,Ve,Gt+di)),F.blitFramebuffer(ot,rt,je,Ze,gt,wt,je,Ze,F.DEPTH_BUFFER_BIT,F.NEAREST);Me.bindFramebuffer(F.READ_FRAMEBUFFER,null),Me.bindFramebuffer(F.DRAW_FRAMEBUFFER,null)}else if(Ee!==0||J.isRenderTargetTexture||Ce.has(J)){const rn=Ce.get(J),an=Ce.get(be);Me.bindFramebuffer(F.READ_FRAMEBUFFER,ys),Me.bindFramebuffer(F.DRAW_FRAMEBUFFER,Ou);for(let vn=0;vn<Je;vn++)Rt?F.framebufferTextureLayer(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,rn.__webglTexture,Ee,nt+vn):F.framebufferTexture2D(F.READ_FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,rn.__webglTexture,Ee),zn?F.framebufferTextureLayer(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,an.__webglTexture,Ve,Gt+vn):F.framebufferTexture2D(F.DRAW_FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,an.__webglTexture,Ve),Ee!==0?F.blitFramebuffer(ot,rt,je,Ze,gt,wt,je,Ze,F.COLOR_BUFFER_BIT,F.NEAREST):zn?F.copyTexSubImage3D(Zt,Ve,gt,wt,Gt+vn,ot,rt,je,Ze):F.copyTexSubImage2D(Zt,Ve,gt,wt,ot,rt,je,Ze);Me.bindFramebuffer(F.READ_FRAMEBUFFER,null),Me.bindFramebuffer(F.DRAW_FRAMEBUFFER,null)}else zn?J.isDataTexture||J.isData3DTexture?F.texSubImage3D(Zt,Ve,gt,wt,Gt,je,Ze,Je,vt,et,Ht.data):be.isCompressedArrayTexture?F.compressedTexSubImage3D(Zt,Ve,gt,wt,Gt,je,Ze,Je,vt,Ht.data):F.texSubImage3D(Zt,Ve,gt,wt,Gt,je,Ze,Je,vt,et,Ht):J.isDataTexture?F.texSubImage2D(F.TEXTURE_2D,Ve,gt,wt,je,Ze,vt,et,Ht.data):J.isCompressedTexture?F.compressedTexSubImage2D(F.TEXTURE_2D,Ve,gt,wt,Ht.width,Ht.height,vt,Ht.data):F.texSubImage2D(F.TEXTURE_2D,Ve,gt,wt,je,Ze,vt,et,Ht);F.pixelStorei(F.UNPACK_ROW_LENGTH,ft),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,sn),F.pixelStorei(F.UNPACK_SKIP_PIXELS,_s),F.pixelStorei(F.UNPACK_SKIP_ROWS,Qt),F.pixelStorei(F.UNPACK_SKIP_IMAGES,An),Ve===0&&be.generateMipmaps&&F.generateMipmap(Zt),Me.unbindTexture()},this.copyTextureToTexture3D=function(J,be,De=null,Oe=null,Ee=0){return Sc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(J,be,De,Oe,Ee)},this.initRenderTarget=function(J){Ce.get(J).__webglFramebuffer===void 0&&z.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?z.setTextureCube(J,0):J.isData3DTexture?z.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?z.setTexture2DArray(J,0):z.setTexture2D(J,0),Me.unbindTexture()},this.resetState=function(){x=0,S=0,M=null,Me.reset(),qe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ls}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Et._getDrawingBufferColorSpace(e),n.unpackColorSpace=Et._getUnpackColorSpace()}}/*!
 * Photo Sphere Viewer 5.13.3
 * @copyright 2014-2015 Jrmy Heleine
 * @copyright 2015-2025 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var hI=Object.defineProperty,ep=(t,e)=>{for(var n in e)hI(t,n,{get:e[n],enumerable:!0})},la={};ep(la,{ACTIONS:()=>Ty,ANIMATION_MIN_DURATION:()=>Jh,CAPTURE_EVENTS_CLASS:()=>dl,CTRLZOOM_TIMEOUT:()=>Sy,DBLCLICK_DELAY:()=>Ey,EASINGS:()=>Mc,ICONS:()=>Ai,IDS:()=>yn,KEY_CODES:()=>dn,LONGTOUCH_DELAY:()=>wy,MOVE_THRESHOLD:()=>by,SPHERE_RADIUS:()=>Cr,TWOFINGERSOVERLAY_DELAY:()=>xy,VIEWER_DATA:()=>Js});var fI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g><!-- Created by Flatart from the Noun Project --></svg>
`,pI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',mI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/><!--Created by Michael Zenaty from the Noun Project--></svg>
`,gI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,vI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,yI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/><!--Created by Arafat Uddin from the Noun Project--></svg>
`,_I=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g><!-- Created by Richard Kunk from the Noun Project--></svg>
`,bI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,EI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,Jh=500,by=4,Ey=300,wy=500,xy=100,Sy=2e3,Cr=10,Js="photoSphereViewer",dl="psv--capture-event",Ty=(t=>(t.ROTATE_UP="ROTATE_UP",t.ROTATE_DOWN="ROTATE_DOWN",t.ROTATE_RIGHT="ROTATE_RIGHT",t.ROTATE_LEFT="ROTATE_LEFT",t.ZOOM_IN="ZOOM_IN",t.ZOOM_OUT="ZOOM_OUT",t))(Ty||{}),yn={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},dn={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},Ai={arrow:fI,close:pI,download:mI,fullscreenIn:gI,fullscreenOut:vI,info:yI,menu:_I,zoomIn:bI,zoomOut:EI},Mc={linear:t=>t,inQuad:t=>t*t,outQuad:t=>t*(2-t),inOutQuad:t=>t<.5?2*t*t:-1+(4-2*t)*t,inCubic:t=>t*t*t,outCubic:t=>--t*t*t+1,inOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,inQuart:t=>t*t*t*t,outQuart:t=>1- --t*t*t*t,inOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,inQuint:t=>t*t*t*t*t,outQuint:t=>1+--t*t*t*t*t,inOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,inSine:t=>1-Math.cos(t*(Math.PI/2)),outSine:t=>Math.sin(t*(Math.PI/2)),inOutSine:t=>.5-.5*Math.cos(Math.PI*t),inExpo:t=>Math.pow(2,10*(t-1)),outExpo:t=>1-Math.pow(2,-10*t),inOutExpo:t=>(t=t*2-1)<0?.5*Math.pow(2,10*t):1-.5*Math.pow(2,-10*t),inCirc:t=>1-Math.sqrt(1-t*t),outCirc:t=>Math.sqrt(1-(t-1)*(t-1)),inOutCirc:t=>(t*=2)<1?.5-.5*Math.sqrt(1-t*t):.5+.5*Math.sqrt(1-(t-=2)*t)},Ot={};ep(Ot,{Animation:()=>Kc,Dynamic:()=>vo,MultiDynamic:()=>qy,PressHandler:()=>bu,Slider:()=>Ky,SliderDirection:()=>Yy,addClasses:()=>tp,angle:()=>Ay,applyEulerInverse:()=>rf,checkClosedShadowDom:()=>jy,checkStylesheet:()=>Wy,checkVersion:()=>ap,cleanCssPosition:()=>$y,clone:()=>vu,createTexture:()=>sf,cssPositionIsOrdered:()=>rp,dasherize:()=>MI,deepEqual:()=>By,deepmerge:()=>Uy,distance:()=>My,exitFullscreen:()=>Ny,firstNonNull:()=>Ds,getAbortError:()=>tf,getAngle:()=>Py,getClosest:()=>Ry,getConfigParser:()=>_u,getElement:()=>Ly,getEventTarget:()=>jc,getMatchingTarget:()=>Iy,getPosition:()=>Dy,getShortestArc:()=>Cy,getStyleProperty:()=>zi,getTouchData:()=>ef,getXMPValue:()=>qn,greatArcDistance:()=>xI,hasParent:()=>TI,invertResolvableBoolean:()=>yu,isAbortError:()=>Vy,isEmpty:()=>zy,isExtendedPosition:()=>sp,isFullscreenEnabled:()=>Oy,isNil:()=>pn,isPlainObject:()=>np,logWarn:()=>_n,mergePanoData:()=>Xy,parseAngle:()=>ki,parsePoint:()=>AI,parseSpeed:()=>Gy,removeClasses:()=>SI,requestFullscreen:()=>ky,resolveBoolean:()=>ip,speedToDuration:()=>nf,sum:()=>wI,throttle:()=>Fy,toggleClass:()=>gu,wrap:()=>So});function So(t,e){let n=t%e;return n<0&&(n+=e),n}function wI(t){return t.reduce((e,n)=>e+n,0)}function My(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ay(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function Cy(t,e){return[0,Math.PI*2,-Math.PI*2].reduce((i,s)=>{const r=e-t+s;return Math.abs(r)<Math.abs(i)?r:i},1/0)}function Py(t,e){return Math.acos(Math.cos(t.pitch)*Math.cos(e.pitch)*Math.cos(t.yaw-e.yaw)+Math.sin(t.pitch)*Math.sin(e.pitch))}function xI([t,e],[n,i]){t-n>Math.PI?t-=2*Math.PI:t-n<-Math.PI&&(t+=2*Math.PI);const s=(n-t)*Math.cos((e+i)/2),r=i-e;return Math.sqrt(s*s+r*r)}function Ly(t){return typeof t=="string"?t.match(/^[a-z]/i)?document.getElementById(t):document.querySelector(t):t}function gu(t,e,n){n===void 0?t.classList.toggle(e):n?t.classList.add(e):n||t.classList.remove(e)}function tp(t,e){t.classList.add(...e.split(" ").filter(n=>!!n))}function SI(t,e){t.classList.remove(...e.split(" ").filter(n=>!!n))}function TI(t,e){let n=t;do{if(n===e)return!0;n=n.parentElement}while(n);return!1}function Ry(t,e){if(!(t!=null&&t.matches))return null;let n=t;do{if(n.matches(e))return n;n=n.parentElement}while(n);return null}function jc(t){return(t==null?void 0:t.composedPath()[0])||null}function Iy(t,e){return t?t.composedPath().find(n=>!(n instanceof HTMLElement)&&!(n instanceof SVGElement)?!1:n.matches(e)):null}function Dy(t){let e=0,n=0,i=t;for(;i;)e+=i.offsetLeft-i.scrollLeft+i.clientLeft,n+=i.offsetTop-i.scrollTop+i.clientTop,i=i.offsetParent;return e-=window.scrollX,n-=window.scrollY,{x:e,y:n}}function zi(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function ef(t){if(t.touches.length<2)return null;const e={x:t.touches[0].clientX,y:t.touches[0].clientY},n={x:t.touches[1].clientX,y:t.touches[1].clientY};return{distance:My(e,n),angle:Ay(e,n),center:{x:(e.x+n.x)/2,y:(e.y+n.y)/2}}}var Xc;function Oy(t,e=!1){return e?t===Xc:document.fullscreenElement===t}function ky(t,e=!1){e?(Xc=t,t.classList.add("psv-fullscreen-emulation"),document.dispatchEvent(new Event("fullscreenchange"))):t.requestFullscreen()}function Ny(t=!1){t?(Xc.classList.remove("psv-fullscreen-emulation"),Xc=null,document.dispatchEvent(new Event("fullscreenchange"))):document.exitFullscreen()}function MI(t){return t.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,(e,n)=>(n>0?"-":"")+e.toLowerCase())}function Fy(t,e){let n=!1;return function(...i){n||(n=!0,setTimeout(()=>{t.apply(this,i),n=!1},e))}}function np(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Uy(t,e){const n=e;return function i(s,r){return Array.isArray(r)?(!s||!Array.isArray(s)?s=[]:s.length=0,r.forEach((a,o)=>{s[o]=i(null,a)})):typeof r=="object"?((!s||Array.isArray(s))&&(s={}),Object.keys(r).forEach(a=>{a!=="__proto__"&&(typeof r[a]!="object"||!r[a]||!np(r[a])?s[a]=r[a]:r[a]!==n&&(s[a]?i(s[a],r[a]):s[a]=i(null,r[a])))})):s=r,s}(t,e)}function vu(t){return Uy(null,t)}function zy(t){return!t||Object.keys(t).length===0&&t.constructor===Object}function pn(t){return t==null}function Ds(...t){for(const e of t)if(!pn(e))return e;return null}function By(t,e){if(t===e)return!0;if(tv(t)&&tv(e)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n of Object.keys(t))if(!By(t[n],e[n]))return!1;return!0}else return!1}function tv(t){return typeof t=="object"&&t!==null}var mt=class Hy extends Error{constructor(e,n){var i;super(n&&n instanceof Error?`${e}: ${n.message}`:e),this.name="PSVError",(i=Error.captureStackTrace)==null||i.call(Error,this,Hy)}};function ip(t,e){np(t)?(e(t.initial,!0),t.promise.then(n=>e(n,!1))):e(t,!0)}function yu(t){return{initial:!t.initial,promise:t.promise.then(e=>!e)}}function tf(){const t=new Error("Loading was aborted.");return t.name="AbortError",t}function Vy(t){return(t==null?void 0:t.name)==="AbortError"}function _n(t){console.warn(`PhotoSphereViewer: ${t}`)}function sp(t){return!t||Array.isArray(t)?!1:[["textureX","textureY"],["yaw","pitch"]].some(([e,n])=>t[e]!==void 0&&t[n]!==void 0)}function qn(t,e,n=!0){let i=t.match("<GPano:"+e+">(.*)</GPano:"+e+">");if(i!==null){const s=n?parseInt(i[1],10):parseFloat(i[1]);return isNaN(s)?null:s}if(i=t.match("GPano:"+e+'="(.*?)"'),i!==null){const s=n?parseInt(i[1],10):parseFloat(i[1]);return isNaN(s)?null:s}return null}var nv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},qc=["left","center","right"],Yc=["top","center","bottom"],iv=[...qc,...Yc],ii="center";function AI(t){if(!t)return{x:.5,y:.5};if(typeof t=="object")return t;let e=t.toLocaleLowerCase().split(" ").slice(0,2);e.length===1&&(nv[e[0]]?e=[e[0],ii]:e=[e[0],e[0]]);const n=e[1]!=="left"&&e[1]!=="right"&&e[0]!=="top"&&e[0]!=="bottom";e=e.map(s=>nv[s]||s),n||e.reverse();const i=e.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return i?{x:parseFloat(i[1])/100,y:parseFloat(i[2])/100}:{x:.5,y:.5}}function $y(t,{allowCenter:e,cssOrder:n}={allowCenter:!0,cssOrder:!0}){return t?(typeof t=="string"&&(t=t.split(" ")),t.length===1&&(t[0]===ii?t=[ii,ii]:qc.indexOf(t[0])!==-1?t=[ii,t[0]]:Yc.indexOf(t[0])!==-1&&(t=[t[0],ii])),t.length!==2||iv.indexOf(t[0])===-1||iv.indexOf(t[1])===-1?(_n(`Unparsable position ${t}`),null):!e&&t[0]===ii&&t[1]===ii?(_n("Invalid position center center"),null):(n&&!rp(t)&&(t=[t[1],t[0]]),t[1]===ii&&qc.indexOf(t[0])!==-1&&(t=[ii,t[0]]),t[0]===ii&&Yc.indexOf(t[1])!==-1&&(t=[t[1],ii]),t)):null}function rp(t){return Yc.indexOf(t[0])!==-1&&qc.indexOf(t[1])!==-1}function Gy(t){let e;if(typeof t=="string"){const n=t.toString().trim();let i=parseFloat(n.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1"));const s=n.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(s.match(/(pm|per minute)$/)&&(i/=60),s){case"dpm":case"degrees per minute":case"dps":case"degrees per second":e=Lt.degToRad(i);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":e=i;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":e=i*Math.PI*2;break;default:throw new mt(`Unknown speed unit "${s}"`)}}else e=t;return e}function nf(t,e){if(typeof t!="number"){const n=Gy(t);return e/Math.abs(n)*1e3}else return Math.abs(t)}function ki(t,e=!1,n=e){let i;if(typeof t=="string"){const s=t.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!s)throw new mt(`Unknown angle "${t}"`);const r=parseFloat(s[1]),a=s[2];if(a)switch(a){case"deg":case"degs":i=Lt.degToRad(r);break;case"rad":case"rads":i=r;break;default:throw new mt(`Unknown angle unit "${a}"`)}else i=r}else if(typeof t=="number"&&!isNaN(t))i=t;else throw new mt(`Unknown angle "${t}"`);return i=So(e?i+Math.PI:i,Math.PI*2),e?Lt.clamp(i-Math.PI,-Math.PI/(n?2:1),Math.PI/(n?2:1)):i}function sf(t,e=!1){const n=new kn(t);return n.needsUpdate=!0,n.minFilter=e?Bs:Si,n.generateMipmaps=e,n.anisotropy=e?2:1,n}var sv=new za;function rf(t,e){sv.setFromEuler(e).invert(),t.applyQuaternion(sv)}function _u(t,e){const n=function(i){const s=vu({...t,...i}),r={};for(let[a,o]of Object.entries(s)){if(e&&a in e)o=e[a](o,{rawConfig:s,defValue:t[a]});else if(!(a in t)){_n(`Unknown option ${a}`);continue}r[a]=o}return r};return n.defaults=t,n.parsers=e||{},n}function Wy(t,e){zi(t,`--psv-${e}-loaded`)!=="true"&&console.error(`PhotoSphereViewer: stylesheet "@photo-sphere-viewer/${e}/index.css" is not loaded`)}function ap(t,e,n){e&&e!==n&&console.error(`PhotoSphereViewer: @photo-sphere-viewer/${t} is in version ${e} but @photo-sphere-viewer/core is in version ${n}`)}function jy(t){do{if(t instanceof ShadowRoot&&t.mode==="closed"){console.error("PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected");return}t=t.parentNode}while(t)}function Xy(t,e,n,i){const s={isEquirectangular:!0,fullWidth:Ds(n==null?void 0:n.fullWidth,i==null?void 0:i.fullWidth),fullHeight:Ds(n==null?void 0:n.fullHeight,i==null?void 0:i.fullHeight),croppedWidth:t,croppedHeight:e,croppedX:Ds(n==null?void 0:n.croppedX,i==null?void 0:i.croppedX),croppedY:Ds(n==null?void 0:n.croppedY,i==null?void 0:i.croppedY),poseHeading:Ds(n==null?void 0:n.poseHeading,i==null?void 0:i.poseHeading,0),posePitch:Ds(n==null?void 0:n.posePitch,i==null?void 0:i.posePitch,0),poseRoll:Ds(n==null?void 0:n.poseRoll,i==null?void 0:i.poseRoll,0),initialHeading:i==null?void 0:i.initialHeading,initialPitch:i==null?void 0:i.initialPitch,initialFov:i==null?void 0:i.initialFov};return!s.fullWidth&&!s.fullHeight&&(s.fullWidth=Math.max(t,e*2),s.fullHeight=Math.round(s.fullWidth/2)),s.fullWidth||(s.fullWidth=s.fullHeight*2),s.fullHeight||(s.fullHeight=Math.round(s.fullWidth/2)),s.croppedX===null&&(s.croppedX=Math.round((s.fullWidth-t)/2)),s.croppedY===null&&(s.croppedY=Math.round((s.fullHeight-e)/2)),Math.abs(s.fullWidth-s.fullHeight*2)>1&&(_n("Invalid panoData, fullWidth should be twice fullHeight"),s.fullHeight=Math.round(s.fullWidth/2)),s.croppedX+s.croppedWidth>s.fullWidth&&(_n("Invalid panoData, croppedX + croppedWidth > fullWidth"),s.croppedX=s.fullWidth-s.croppedWidth),s.croppedY+s.croppedHeight>s.fullHeight&&(_n("Invalid panoData, croppedY + croppedHeight > fullHeight"),s.croppedY=s.fullHeight-s.croppedHeight),s.croppedX<0&&(_n("Invalid panoData, croppedX < 0"),s.croppedX=0),s.croppedY<0&&(_n("Invalid panoData, croppedY < 0"),s.croppedY=0),s}var Kc=class{constructor(t){this.easing=Mc.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=t,t?(t.easing&&(this.easing=typeof t.easing=="function"?t.easing:Mc[t.easing]||Mc.linear),this.delayTimeout=setTimeout(()=>{this.delayTimeout=void 0,this.animationFrame=window.requestAnimationFrame(e=>this.__run(e))},t.delay||0)):this.resolved=!0}__run(t){if(this.cancelled)return;this.start||(this.start=t);const e=(t-this.start)/this.options.duration,n={};if(e<1){for(const[i,s]of Object.entries(this.options.properties))if(s){const r=s.start+(s.end-s.start)*this.easing(e);n[i]=r}this.options.onTick(n,e),this.animationFrame=window.requestAnimationFrame(i=>this.__run(i))}else{for(const[i,s]of Object.entries(this.options.properties))s&&(n[i]=s.end);this.options.onTick(n,1),this.__resolve(!0),this.animationFrame=void 0}}__resolve(t){t?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach(e=>e(t)),this.callbacks.length=0}then(t){return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(t):new Promise(e=>{this.callbacks.push(e)}).then(t)}cancel(){!this.cancelled&&!this.resolved&&(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}},vo=class{constructor(t,e){if(this.fn=t,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=e.min,this.max=e.max,this.wrap=e.wrap,this.current=e.defaultValue,this.wrap&&this.min!==0)throw new mt("invalid config");this.fn&&this.fn(this.current)}get current(){return this.__current}set current(t){this.__current=t}setSpeed(t){this.speed=t}goto(t,e=1){this.mode=2,this.target=this.wrap?So(t,this.max):Lt.clamp(t,this.min,this.max),this.speedMult=e}step(t,e=1){e===0?this.setValue(this.current+t):(this.mode!==2&&(this.target=this.current),this.goto(this.target+t,e))}roll(t=!1,e=1){this.mode=1,this.target=t?-1/0:1/0,this.speedMult=e}stop(){this.mode=0}setValue(t){return this.target=this.wrap?So(t,this.max):Lt.clamp(t,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current?(this.current=this.target,this.fn&&this.fn(this.current),!0):!1}update(t){if(this.mode===2){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);const i=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=i&&(this.mode=0)}let e=this.mode===0?0:this.speed*this.speedMult;this.target<this.current&&(e=-e),this.currentSpeed<e?this.currentSpeed=Math.min(e,this.currentSpeed+t/1e3*this.speed*this.speedMult*2):this.currentSpeed>e&&(this.currentSpeed=Math.max(e,this.currentSpeed-t/1e3*this.speed*this.speedMult*2));let n=null;return this.current>this.target&&this.currentSpeed?n=Math.max(this.target,this.current+this.currentSpeed*t/1e3):this.current<this.target&&this.currentSpeed&&(n=Math.min(this.target,this.current+this.currentSpeed*t/1e3)),n!==null&&(n=this.wrap?So(n,this.max):Lt.clamp(n,this.min,this.max),n!==this.current)?(this.current=n,this.fn&&this.fn(this.current),!0):!1}},qy=class{constructor(t,e){this.fn=t,this.dynamics=e,this.fn&&this.fn(this.current)}get current(){return Object.entries(this.dynamics).reduce((t,[e,n])=>(t[e]=n.current,t),{})}setSpeed(t){for(const e of Object.values(this.dynamics))e.setSpeed(t)}goto(t,e=1){for(const[n,i]of Object.entries(t))this.dynamics[n].goto(i,e)}step(t,e=1){if(e===0)this.setValue(Object.keys(t).reduce((n,i)=>(n[i]=t[i]+this.dynamics[i].current,n),{}));else for(const[n,i]of Object.entries(t))this.dynamics[n].step(i,e)}roll(t,e=1){for(const[n,i]of Object.entries(t))this.dynamics[n].roll(i,e)}stop(){for(const t of Object.values(this.dynamics))t.stop()}setValue(t){let e=!1;for(const[n,i]of Object.entries(t))e=this.dynamics[n].setValue(i)||e;return e&&this.fn&&this.fn(this.current),e}update(t){let e=!1;for(const n of Object.values(this.dynamics))e=n.update(t)||e;return e&&this.fn&&this.fn(this.current),e}},bu=class{constructor(t=200){this.delay=t,this.time=0,this.delay=t}get pending(){return this.time!==0}down(t){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=new Date().getTime(),this.data=t}up(t){if(!this.time)return;Date.now()-this.time<this.delay?this.timeout=setTimeout(()=>{t(this.data),this.timeout=void 0,this.time=0,this.data=void 0},this.delay):(t(this.data),this.time=0,this.data=void 0)}},Yy=(t=>(t.VERTICAL="VERTICAL",t.HORIZONTAL="HORIZONTAL",t))(Yy||{}),Ky=class{constructor(t,e,n){this.container=t,this.direction=e,this.listener=n,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}get isVertical(){return this.direction==="VERTICAL"}get isHorizontal(){return this.direction==="HORIZONTAL"}destroy(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}handleEvent(t){switch(t.type){case"click":t.stopPropagation();break;case"mousedown":this.__onMouseDown(t);break;case"mouseenter":this.__onMouseEnter(t);break;case"mouseleave":this.__onMouseLeave(t);break;case"touchstart":this.__onTouchStart(t);break;case"mousemove":this.__onMouseMove(t);break;case"touchmove":this.__onTouchMove(t);break;case"mouseup":this.__onMouseUp(t);break;case"touchend":this.__onTouchEnd(t);break}}__onMouseDown(t){this.mousedown=!0,this.__update(t.clientX,t.clientY,!0)}__onMouseEnter(t){this.mouseover=!0,this.__update(t.clientX,t.clientY,!0)}__onTouchStart(t){this.mouseover=!0,this.mousedown=!0;const e=t.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}__onMouseMove(t){(this.mousedown||this.mouseover)&&(t.stopPropagation(),this.__update(t.clientX,t.clientY,!0))}__onTouchMove(t){if(this.mousedown||this.mouseover){t.stopPropagation();const e=t.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}}__onMouseUp(t){this.mousedown&&(this.mousedown=!1,this.__update(t.clientX,t.clientY,!1))}__onMouseLeave(t){this.mouseover&&(this.mouseover=!1,this.__update(t.clientX,t.clientY,!0))}__onTouchEnd(t){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;const e=t.changedTouches[0];this.__update(e.clientX,e.clientY,!1)}}__update(t,e,n){const i=this.container.getBoundingClientRect();let s;this.isVertical?s=Lt.clamp((i.bottom-e)/i.height,0,1):s=Lt.clamp((t-i.left)/i.width,0,1),this.listener({value:s,click:!n,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:t,clientY:e}})}},Kt={};ep(Kt,{BeforeAnimateEvent:()=>op,BeforeRenderEvent:()=>To,BeforeRotateEvent:()=>s_,ClickEvent:()=>o_,ConfigChangedEvent:()=>$n,DoubleClickEvent:()=>h_,FullscreenEvent:()=>Mo,HideNotificationEvent:()=>Ao,HideOverlayEvent:()=>__,HidePanelEvent:()=>$s,HideTooltipEvent:()=>S_,KeypressEvent:()=>Gs,LoadProgressEvent:()=>P_,ObjectEnterEvent:()=>pb,ObjectEvent:()=>wu,ObjectHoverEvent:()=>_b,ObjectLeaveEvent:()=>af,PanoramaErrorEvent:()=>F_,PanoramaLoadEvent:()=>I_,PanoramaLoadedEvent:()=>ya,PositionUpdatedEvent:()=>Co,ReadyEvent:()=>Lo,RenderEvent:()=>Y_,RollUpdatedEvent:()=>Po,ShowNotificationEvent:()=>Ro,ShowOverlayEvent:()=>eb,ShowPanelEvent:()=>Ws,ShowTooltipEvent:()=>rb,SizeUpdatedEvent:()=>Io,StopAllEvent:()=>Do,TransitionDoneEvent:()=>B_,ViewerEvent:()=>Pt,ZoomUpdatedEvent:()=>us});var Eu=class extends Event{constructor(t,e=!1){super(t,{cancelable:e})}},Zy=class extends EventTarget{dispatchEvent(t){return super.dispatchEvent(t)}addEventListener(t,e,n){super.addEventListener(t,e,n)}removeEventListener(t,e,n){super.removeEventListener(t,e,n)}},Pt=class extends Eu{},Qy=class Jy extends Pt{constructor(e,n){super(Jy.type,!0),this.position=e,this.zoomLevel=n}};Qy.type="before-animate";var op=Qy,e_=class t_ extends Pt{constructor(e,n){super(t_.type),this.timestamp=e,this.elapsed=n}};e_.type="before-render";var To=e_,n_=class i_ extends Pt{constructor(e){super(i_.type,!0),this.position=e}};n_.type="before-rotate";var s_=n_,r_=class a_ extends Pt{constructor(e){super(a_.type),this.data=e}};r_.type="click";var o_=r_,l_=class c_ extends Pt{constructor(e){super(c_.type),this.options=e}containsOptions(...e){return e.some(n=>this.options.includes(n))}};l_.type="config-changed";var $n=l_,u_=class d_ extends Pt{constructor(e){super(d_.type),this.data=e}};u_.type="dblclick";var h_=u_,f_=class p_ extends Pt{constructor(e){super(p_.type),this.fullscreenEnabled=e}};f_.type="fullscreen";var Mo=f_,m_=class g_ extends Pt{constructor(e){super(g_.type),this.notificationId=e}};m_.type="hide-notification";var Ao=m_,v_=class y_ extends Pt{constructor(e){super(y_.type),this.overlayId=e}};v_.type="hide-overlay";var __=v_,b_=class E_ extends Pt{constructor(e){super(E_.type),this.panelId=e}};b_.type="hide-panel";var $s=b_,w_=class x_ extends Pt{constructor(e){super(x_.type),this.tooltipData=e}};w_.type="hide-tooltip";var S_=w_,T_=class M_ extends Pt{constructor(e,n){super(M_.type,!0),this.key=e,this.originalEvent=n}};T_.type="key-press";var Gs=T_,A_=class C_ extends Pt{constructor(e){super(C_.type),this.progress=e}};A_.type="load-progress";var P_=A_,L_=class R_ extends Pt{constructor(e){super(R_.type),this.panorama=e}};L_.type="panorama-load";var I_=L_,D_=class O_ extends Pt{constructor(e){super(O_.type),this.data=e}};D_.type="panorama-loaded";var ya=D_,k_=class N_ extends Pt{constructor(e,n){super(N_.type),this.panorama=e,this.error=n}};k_.type="panorama-error";var F_=k_,U_=class z_ extends Pt{constructor(e){super(z_.type),this.completed=e}};U_.type="transition-done";var B_=U_,H_=class V_ extends Pt{constructor(e){super(V_.type),this.position=e}};H_.type="position-updated";var Co=H_,$_=class G_ extends Pt{constructor(e){super(G_.type),this.roll=e}};$_.type="roll-updated";var Po=$_,W_=class j_ extends Pt{constructor(){super(j_.type)}};W_.type="ready";var Lo=W_,X_=class q_ extends Pt{constructor(){super(q_.type)}};X_.type="render";var Y_=X_,K_=class Z_ extends Pt{constructor(e){super(Z_.type),this.notificationId=e}};K_.type="show-notification";var Ro=K_,Q_=class J_ extends Pt{constructor(e){super(J_.type),this.overlayId=e}};Q_.type="show-overlay";var eb=Q_,tb=class nb extends Pt{constructor(e){super(nb.type),this.panelId=e}};tb.type="show-panel";var Ws=tb,ib=class sb extends Pt{constructor(e,n){super(sb.type),this.tooltip=e,this.tooltipData=n}};ib.type="show-tooltip";var rb=ib,ab=class ob extends Pt{constructor(e){super(ob.type),this.size=e}};ab.type="size-updated";var Io=ab,lb=class cb extends Pt{constructor(){super(cb.type)}};lb.type="stop-all";var Do=lb,ub=class db extends Pt{constructor(e){super(db.type),this.zoomLevel=e}};ub.type="zoom-updated";var us=ub,wu=class extends Pt{constructor(t,e,n,i,s){super(t),this.originalEvent=e,this.object=n,this.viewerPoint=i,this.userDataKey=s}},hb=class fb extends wu{constructor(e,n,i,s){super(fb.type,e,n,i,s)}};hb.type="enter-object";var pb=hb,mb=class gb extends wu{constructor(e,n,i,s){super(gb.type,e,n,i,s)}};mb.type="leave-object";var af=mb,vb=class yb extends wu{constructor(e,n,i,s){super(yb.type,e,n,i,s)}};vb.type="hover-object";var _b=vb,lp=class{constructor(t){this.viewer=t}init(){}destroy(){}supportsTransition(t){return!1}supportsPreload(t){return!1}textureCoordsToSphericalCoords(t,e){throw new mt("Current adapter does not support texture coordinates.")}sphericalCoordsToTextureCoords(t,e){throw new mt("Current adapter does not support texture coordinates.")}};lp.supportsDownload=!1;function rv(t){if(t){for(const[,e]of[["_",t],...Object.entries(t)])if(e.prototype instanceof lp)return ap(e.id,e.VERSION,"5.13.3"),e}return null}var co=`${Js}_touchSupport`,Dn={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,__maxCanvasWidth:null,isIphone:!1,get maxCanvasWidth(){return this.__maxCanvasWidth===null&&(this.__maxCanvasWidth=LI(this.maxTextureWidth)),this.__maxCanvasWidth},load(){if(!this.loaded){const t=CI();this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=!!t,this.maxTextureWidth=t?t.getParameter(t.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=PI(),this.isIphone=/iPhone/i.test(navigator.userAgent),this.loaded=!0}if(!Dn.isWebGLSupported)throw new mt("WebGL 2 is not supported.");if(Dn.maxTextureWidth===0)throw new mt("Unable to detect system capabilities")}};function CI(){try{return document.createElement("canvas").getContext("webgl2")}catch{return null}}function PI(){let t="ontouchstart"in window||navigator.maxTouchPoints>0;co in localStorage&&(t=localStorage[co]==="true");const e=new Promise(n=>{const i=()=>{window.removeEventListener("mousedown",s),window.removeEventListener("touchstart",r),clearTimeout(o)},s=()=>{i(),localStorage[co]=!1,n(!1)},r=()=>{i(),localStorage[co]=!0,n(!0)},a=()=>{i(),localStorage[co]=t,n(t)};window.addEventListener("mousedown",s,!1),window.addEventListener("touchstart",r,!1);const o=setTimeout(a,1e4)});return{initial:t,promise:e}}function LI(t){let e=t,n=!1;const i=document.createElement("canvas"),s=i.getContext("2d");for(i.width=1,i.height=1;e>1024&&!n;){const r=document.createElement("canvas"),a=r.getContext("2d");r.width=e,r.height=e/2;try{a.fillStyle="white",a.fillRect(e-1,e/2-1,1,1),s.drawImage(r,e-1,e/2-1,1,1,0,0,1,1),s.getImageData(0,0,1,1).data[0]>0&&(n=!0)}catch{}r.width=0,r.height=0,n||(e/=2)}if(n)return e;throw new mt("Unable to detect system capabilities")}var RI=_u({resolution:64,useXmpData:!0,blur:!1},{resolution:t=>{if(!t||!Lt.isPowerOfTwo(t))throw new mt("EquirectangularAdapter resolution must be power of two.");return t}}),hl=class extends lp{constructor(t,e){super(t),this.config=RI(e),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2}supportsTransition(){return!0}supportsPreload(){return!0}textureCoordsToSphericalCoords(t,e){if(pn(t.textureX)||pn(t.textureY))throw new mt("Texture position is missing 'textureX' or 'textureY'");const n=(t.textureX+e.croppedX)/e.fullWidth*Math.PI*2,i=(t.textureY+e.croppedY)/e.fullHeight*Math.PI;return{yaw:n>=Math.PI?n-Math.PI:n+Math.PI,pitch:Math.PI/2-i}}sphericalCoordsToTextureCoords(t,e){const n=t.yaw/Math.PI/2*e.fullWidth,i=t.pitch/Math.PI*e.fullHeight;let s=Math.round(t.yaw<Math.PI?n+e.fullWidth/2:n-e.fullWidth/2)-e.croppedX,r=Math.round(e.fullHeight/2-i)-e.croppedY;return(s<0||s>e.croppedWidth||r<0||r>e.croppedHeight)&&(s=r=void 0),{textureX:s,textureY:r}}async loadTexture(t,e=!0,n,i=this.config.useXmpData){if(typeof t!="string"&&(typeof t!="object"||!t.path))return Promise.reject(new mt("Invalid panorama url, are you using the right adapter?"));let s;typeof t=="string"?s={path:t,data:n}:s={data:n,...t};const r=await this.viewer.textureLoader.loadFile(s.path,e?u=>this.viewer.textureLoader.dispatchProgress(u):null,s.path),a=i?await this.loadXMP(r):null,o=await this.viewer.textureLoader.blobToImage(r);typeof s.data=="function"&&(s.data=s.data(o,a));const l=Xy(o.width,o.height,s.data,a),c=this.createEquirectangularTexture(o);return{panorama:t,texture:c,panoData:l,cacheKey:s.path}}async loadXMP(t){const e=await this.loadBlobAsString(t),n=e.indexOf("<x:xmpmeta");if(n===-1)return null;const i=e.indexOf("</x:xmpmeta>",n);if(i===-1)return null;const s=e.substring(n,i);return s.includes("GPano:")?{fullWidth:qn(s,"FullPanoWidthPixels"),fullHeight:qn(s,"FullPanoHeightPixels"),croppedWidth:qn(s,"CroppedAreaImageWidthPixels"),croppedHeight:qn(s,"CroppedAreaImageHeightPixels"),croppedX:qn(s,"CroppedAreaLeftPixels"),croppedY:qn(s,"CroppedAreaTopPixels"),poseHeading:qn(s,"PoseHeadingDegrees",!1),posePitch:qn(s,"PosePitchDegrees",!1),poseRoll:qn(s,"PoseRollDegrees",!1),initialHeading:qn(s,"InitialViewHeadingDegrees",!1),initialPitch:qn(s,"InitialViewPitchDegrees",!1),initialFov:qn(s,"InitialHorizontalFOVDegrees",!1)}:null}loadBlobAsString(t){return new Promise((e,n)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=n,i.readAsText(t)})}createEquirectangularTexture(t){if(this.config.blur||t.width>Dn.maxTextureWidth){const e=Math.min(1,Dn.maxCanvasWidth/t.width),n=new OffscreenCanvas(Math.floor(t.width*e),Math.floor(t.height*e)),i=n.getContext("2d");return this.config.blur&&(i.filter=`blur(${n.width/2048}px)`),i.drawImage(t,0,0,n.width,n.height),sf(n)}return sf(t)}createMesh(t){const e=t.croppedX/t.fullWidth*2*Math.PI,n=t.croppedWidth/t.fullWidth*2*Math.PI,i=t.croppedY/t.fullHeight*Math.PI,s=t.croppedHeight/t.fullHeight*Math.PI,r=new ul(Cr,Math.round(this.SPHERE_SEGMENTS/(2*Math.PI)*n),Math.round(this.SPHERE_HORIZONTAL_SEGMENTS/Math.PI*s),-Math.PI/2+e,n,i,s).scale(-1,1,1),a=new ll({depthTest:!1,depthWrite:!1});return new ci(r,a)}setTexture(t,e){t.material.map=e.texture}setTextureOpacity(t,e){t.material.opacity=e,t.material.transparent=e<1}disposeTexture({texture:t}){t.dispose()}disposeMesh(t){t.geometry.dispose(),t.material.dispose()}};hl.id="equirectangular";hl.VERSION="5.13.3";hl.supportsDownload=!0;var bb=class extends hl{constructor(t,e){super(t,{resolution:(e==null?void 0:e.resolution)??64,useXmpData:!1})}async loadTexture(t,e){const n=await super.loadTexture(t,e,null,!1);return n.panoData=null,n}createMesh(){const t=new ul(Cr,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS).scale(-1,1,1).toNonIndexed(),e=t.getAttribute("uv"),n=t.getAttribute("normal");for(let s=0;s<e.count;s++)for(let r=0;r<3;r++){const a=s*3+r,o=n.getX(a),l=n.getY(a),c=n.getZ(a),u=.947;if(s<e.count/6){const d=o===0&&c===0?1:Math.acos(l)/Math.sqrt(o*o+c*c)*(2/Math.PI);e.setXY(a,o*(u/4)*d+1/4,c*(u/2)*d+1/2)}else{const d=o===0&&c===0?1:Math.acos(-l)/Math.sqrt(o*o+c*c)*(2/Math.PI);e.setXY(a,-o*(u/4)*d+3/4,c*(u/2)*d+1/2)}}t.rotateX(-Math.PI/2),t.rotateY(Math.PI);const i=new ll({depthTest:!1,depthWrite:!1});return new ci(t,i)}};bb.id="dual-fisheye";bb.VERSION="5.13.3";var nr=class Eb{constructor(e,n){this.parent=e,this.children=[],this.state={visible:!0},this.viewer=e instanceof Eb?e.viewer:e,this.container=document.createElement(n.tagName??"div"),this.container.className=n.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}destroy(){this.parent.container.removeChild(this.container);const e=this.parent.children.indexOf(this);e!==-1&&this.parent.children.splice(e,1),this.children.slice().forEach(n=>n.destroy()),this.children.length=0}toggle(e=!this.isVisible()){e?this.show():this.hide()}hide(e){this.container.style.display="none",this.state.visible=!1}show(e){this.container.style.display="",this.state.visible=!0}isVisible(){return this.state.visible}},II=_u({id:null,tagName:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),On=class extends nr{constructor(t,e){super(t,{tagName:e.tagName,className:`psv-button ${e.hoverScale?"psv-button--hover-scale":""} ${e.className||""}`}),this.state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},this.config=II(e),e.id||(this.config.id=this.constructor.id),e.icon&&this.__setIcon(e.icon),this.state.width=this.container.offsetWidth,this.config.title?this.container.title=this.viewer.config.lang[this.config.title]??this.config.title:this.id&&this.id in this.viewer.config.lang&&(this.container.title=this.viewer.config.lang[this.id]),e.tabbable&&(this.container.tabIndex=0),this.container.addEventListener("click",n=>{this.state.enabled&&this.onClick(),n.stopPropagation()}),this.container.addEventListener("keydown",n=>{n.key===dn.Enter&&this.state.enabled&&(this.onClick(),n.stopPropagation())})}get id(){return this.config.id}get title(){return this.container.title}get content(){return this.container.innerHTML}get width(){return this.state.width}get collapsable(){return this.config.collapsable}show(t=!0){this.isVisible()||(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),t&&this.viewer.navbar.autoSize())}hide(t=!0){this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",t&&this.viewer.navbar.autoSize())}checkSupported(){ip(this.isSupported(),(t,e)=>{this.state&&(this.state.supported=t,e?t||this.hide():this.toggle(t))})}autoSize(){}isSupported(){return!0}toggleActive(t=!this.state.active){t!==this.state.active&&(this.state.active=t,gu(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}disable(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}enable(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}collapse(){this.state.collapsed=!0,this.container.style.display="none"}uncollapse(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}__setIcon(t){this.container.innerHTML=t,tp(this.container.querySelector("svg"),"psv-button-svg")}},DI=class extends On{constructor(t,e){var n,i;super(t,{id:e.id??`psvButton-${Math.random().toString(36).substring(2)}`,className:`psv-custom-button ${e.className||""}`,hoverScale:!1,collapsable:e.collapsable!==!1,tabbable:e.tabbable!==!1,title:e.title}),this.customOnClick=e.onClick,e.content&&(typeof e.content=="string"?this.container.innerHTML=e.content:(this.container.classList.add("psv-custom-button--no-padding"),e.content.style.height="100%",(i=(n=e.content).attachViewer)==null||i.call(n,this.viewer),this.container.appendChild(e.content))),this.state.width=this.container.offsetWidth,e.disabled&&this.disable(),e.visible===!1&&this.hide()}onClick(){var t;(t=this.customOnClick)==null||t.call(this,this.viewer)}},qo=class extends On{constructor(t){super(t,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Ai.info}),this.mode=0,this.viewer.addEventListener(Ao.type,this),this.viewer.addEventListener(Ro.type,this),this.viewer.addEventListener($s.type,this),this.viewer.addEventListener(Ws.type,this),this.viewer.addEventListener($n.type,this)}destroy(){this.viewer.removeEventListener(Ao.type,this),this.viewer.removeEventListener(Ro.type,this),this.viewer.removeEventListener($s.type,this),this.viewer.removeEventListener(Ws.type,this),this.viewer.removeEventListener($n.type,this),super.destroy()}handleEvent(t){if(t instanceof $n){t.containsOptions("description")&&this.autoSize(!0);return}if(!this.mode)return;let e=!1;t instanceof Ao?e=this.mode===1:t instanceof Ro?e=this.mode===1&&t.notificationId!==yn.DESCRIPTION:t instanceof $s?e=this.mode===2:t instanceof Ws&&(e=this.mode===2&&t.panelId!==yn.DESCRIPTION),e&&(this.toggleActive(!1),this.mode=0)}onClick(){this.mode?this.__close():this.__open()}hide(t){super.hide(t),this.mode&&this.__close()}autoSize(t=!1){if(t){const e=this.viewer.navbar.getButton("caption",!1),n=e&&!e.isVisible(),i=!!this.viewer.config.description;n||i?this.show(!1):this.hide(!1)}}__close(){switch(this.mode){case 1:this.viewer.notification.hide(yn.DESCRIPTION);break;case 2:this.viewer.panel.hide(yn.DESCRIPTION);break}}__open(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:yn.DESCRIPTION,content:`${this.viewer.config.caption?`<p>${this.viewer.config.caption}</p>`:""}${this.viewer.config.description}`})):(this.mode=1,this.viewer.notification.show({id:yn.DESCRIPTION,content:this.viewer.config.caption}))}};qo.id="description";var wb=class extends On{constructor(t){super(t,{tagName:"a",className:"psv-download-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:Ai.download}),this.viewer.addEventListener($n.type,this),this.viewer.addEventListener(ya.type,this)}destroy(){this.viewer.removeEventListener($n.type,this),this.viewer.removeEventListener(ya.type,this),super.destroy()}handleEvent(t){t instanceof $n?(t.containsOptions("downloadUrl")&&this.checkSupported(),t.containsOptions("downloadUrl","downloadName")&&this.__update()):t instanceof ya&&this.__update()}onClick(){}checkSupported(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}__update(){const t=this.container;t.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,t.target="_blank",t.href.startsWith("data:")&&!this.viewer.config.downloadName?t.download="panorama."+t.href.substring(0,t.href.indexOf(";")).split("/").pop():t.download=this.viewer.config.downloadName||t.href.split("/").pop()}};wb.id="download";var xb=class extends On{constructor(t){super(t,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Ai.fullscreenIn,iconActive:Ai.fullscreenOut}),this.viewer.addEventListener(Mo.type,this)}destroy(){this.viewer.removeEventListener(Mo.type,this),super.destroy()}handleEvent(t){t instanceof Mo&&this.toggleActive(t.fullscreenEnabled)}onClick(){this.viewer.toggleFullscreen()}};xb.id="fullscreen";var OI="psvButton",kI=(t,e)=>`
<div class="psv-panel-menu psv-panel-menu--stripped">
  <h1 class="psv-panel-menu-title">${Ai.menu} ${e}</h1>
  <ul class="psv-panel-menu-list">
    ${t.map(n=>`
    <li data-psv-button="${n.id}" class="psv-panel-menu-item" tabindex="0">
      <span class="psv-panel-menu-item-icon">${n.content}</span>
      <span class="psv-panel-menu-item-label">${n.title}</span>
    </li>
    `).join("")}
  </ul>
</div>
`,Ac=class extends On{constructor(t){super(t,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Ai.menu}),this.viewer.addEventListener(Ws.type,this),this.viewer.addEventListener($s.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Ws.type,this),this.viewer.removeEventListener($s.type,this),super.destroy()}handleEvent(t){t instanceof Ws?this.toggleActive(t.panelId===yn.MENU):t instanceof $s&&this.toggleActive(!1)}onClick(){this.state.active?this.__hideMenu():this.__showMenu()}hide(t){super.hide(t),this.__hideMenu()}show(t){super.show(t),this.state.active&&this.__showMenu()}__showMenu(){this.viewer.panel.show({id:yn.MENU,content:kI(this.viewer.navbar.collapsed,this.viewer.config.lang.menu),noMargin:!0,clickHandler:t=>{const e=t?Ry(t,".psv-panel-menu-item"):void 0,n=e?e.dataset[OI]:void 0;n&&(this.viewer.navbar.getButton(n).onClick(),this.__hideMenu())}})}__hideMenu(){this.viewer.panel.hide(yn.MENU)}};Ac.id="menu";function NI(t){let e=0;switch(t){case 0:e=90;break;case 1:e=-90;break;case 3:e=180;break;default:e=0;break}return Ai.arrow.replace("rotate(0",`rotate(${e}`)}var fl=class extends On{constructor(t,e){super(t,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:NI(e)}),this.direction=e,this.handler=new bu,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(t){switch(t.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":t.key===dn.Enter&&this.__onMouseDown();break;case"keyup":t.key===dn.Enter&&this.__onMouseUp();break}}onClick(){}isSupported(){return yu(Dn.isTouchEnabled)}__onMouseDown(){if(!this.state.enabled)return;const t={};switch(this.direction){case 0:t.pitch=!1;break;case 1:t.pitch=!0;break;case 3:t.yaw=!1;break;default:t.yaw=!0;break}this.viewer.stopAll(),this.viewer.dynamics.position.roll(t),this.handler.down()}__onMouseUp(){this.state.enabled&&this.handler.up(()=>{this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer()})}};fl.groupId="move";var Sb=class extends fl{constructor(t){super(t,1)}};Sb.id="moveDown";var Tb=class extends fl{constructor(t){super(t,2)}};Tb.id="moveLeft";var Mb=class extends fl{constructor(t){super(t,3)}};Mb.id="moveRight";var Ab=class extends fl{constructor(t){super(t,0)}};Ab.id="moveUp";var cp=class extends On{constructor(t,e,n){super(t,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:e}),this.direction=n,this.handler=new bu,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(t){switch(t.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":t.key===dn.Enter&&this.__onMouseDown();break;case"keyup":t.key===dn.Enter&&this.__onMouseUp();break}}onClick(){}isSupported(){return yu(Dn.isTouchEnabled)}__onMouseDown(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(this.direction===1),this.handler.down())}__onMouseUp(){this.state.enabled&&this.handler.up(()=>this.viewer.dynamics.zoom.stop())}};cp.groupId="zoom";var Cb=class extends cp{constructor(t){super(t,Ai.zoomIn,0)}};Cb.id="zoomIn";var Pb=class extends cp{constructor(t){super(t,Ai.zoomOut,1)}};Pb.id="zoomOut";var up=class extends On{constructor(t){super(t,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1}),this.zoomRange=document.createElement("div"),this.zoomRange.className="psv-zoom-range-line",this.container.appendChild(this.zoomRange),this.zoomValue=document.createElement("div"),this.zoomValue.className="psv-zoom-range-handle",this.zoomRange.appendChild(this.zoomValue),this.slider=new Ky(this.container,"HORIZONTAL",e=>this.__onSliderUpdate(e)),this.mediaMinWidth=parseInt(zi(this.container,"max-width"),10),this.viewer.addEventListener(us.type,this),this.viewer.state.ready?this.__moveZoomValue(this.viewer.getZoomLevel()):this.viewer.addEventListener(Lo.type,this)}destroy(){this.slider.destroy(),this.viewer.removeEventListener(us.type,this),this.viewer.removeEventListener(Lo.type,this),super.destroy()}handleEvent(t){t instanceof us?this.__moveZoomValue(t.zoomLevel):t instanceof Lo&&this.__moveZoomValue(this.viewer.getZoomLevel())}onClick(){}isSupported(){return yu(Dn.isTouchEnabled)}autoSize(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}__moveZoomValue(t){this.zoomValue.style.left=t/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}__onSliderUpdate(t){t.mousedown&&this.viewer.zoom(t.value*100)}};up.id="zoomRange";up.groupId="zoom";var Lb=class extends Zy{constructor(t){super(),this.viewer=t}init(){}destroy(){}},dp=class extends Lb{constructor(t,e){super(t),this.config=this.constructor.configParser(e)}setOption(t,e){this.setOptions({[t]:e})}setOptions(t){const e={...this.config,...t},n=this.constructor,i=n.configParser,s=n.readonlyOptions,r=n.id;for(let[a,o]of Object.entries(t)){if(!(a in i.defaults)){_n(`${r}: Unknown option "${a}"`);continue}if(s.includes(a)){_n(`${r}: Option "${a}" cannot be updated`);continue}a in i.parsers&&(o=i.parsers[a](o,{rawConfig:e,defValue:i.defaults[a]})),this.config[a]=o}}};dp.readonlyOptions=[];function of(t){if(t){for(const[,e]of[["_",t],...Object.entries(t)])if(e.prototype instanceof Lb)return ap(e.id,e.VERSION,"5.13.3"),e}return null}var gs={panorama:null,container:null,adapter:[hl,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:.8,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,panoData:null,requestHeaders:null,canvasBackground:"#000",defaultTransition:{speed:1500,rotation:!0,effect:"fade"},rendererParameters:{alpha:!0,antialias:!0},withCredentials:()=>!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",description:"Description",download:"Download",fullscreen:"Fullscreen",loading:"Loading...",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama cannot be loaded",webglError:"Your browser does not seem to support WebGL"},keyboard:"fullscreen",keyboardActions:{[dn.ArrowUp]:"ROTATE_UP",[dn.ArrowDown]:"ROTATE_DOWN",[dn.ArrowRight]:"ROTATE_RIGHT",[dn.ArrowLeft]:"ROTATE_LEFT",[dn.PageUp]:"ZOOM_IN",[dn.PageDown]:"ZOOM_OUT",[dn.Plus]:"ZOOM_IN",[dn.Minus]:"ZOOM_OUT"}},av={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},lf={container:t=>{if(!t)throw new mt("No value given for container.");return t},adapter:(t,{defValue:e})=>{if(t?Array.isArray(t)?t=[rv(t[0]),t[1]]:t=[rv(t),null]:t=e,!t[0])throw new mt("An undefined value was given for adapter.");if(!t[0].id)throw new mt("Adapter has no id.");return t},defaultYaw:t=>ki(t),defaultPitch:t=>ki(t,!0),defaultZoomLvl:t=>Lt.clamp(t,0,100),minFov:(t,{rawConfig:e})=>(e.maxFov<t&&(_n("maxFov cannot be lower than minFov"),t=e.maxFov),Lt.clamp(t,1,179)),maxFov:(t,{rawConfig:e})=>(t<e.minFov&&(t=e.minFov),Lt.clamp(t,1,179)),moveInertia:(t,{defValue:e})=>t===!0?e:t===!1?0:t,lang:t=>({...gs.lang,...t}),keyboardActions:(t,{rawConfig:e})=>e.keyboard&&typeof e.keyboard=="object"?e.keyboard:t,fisheye:t=>t===!0?1:t===!1?0:t,requestHeaders:t=>t&&typeof t=="object"?()=>t:typeof t=="function"?t:null,withCredentials:t=>typeof t=="boolean"?()=>t:typeof t=="function"?t:()=>!1,defaultTransition:(t,{defValue:e})=>t===null||t.speed===0?null:{...e,...t},rendererParameters:(t,{defValue:e})=>({...t,...e}),plugins:t=>t.map((e,n)=>{if(Array.isArray(e)?e=[of(e[0]),e[1]]:e=[of(e),null],!e[0])throw new mt(`An undefined value was given for plugin ${n}.`);if(!e[0].id)throw new mt(`Plugin ${n} has no id.`);return e}),navbar:t=>t===!1?null:t===!0?vu(gs.navbar):typeof t=="string"?t.split(/[ ,]/):t},FI=_u(gs,lf),ca=class extends On{constructor(t){super(t,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0}),this.contentWidth=0,this.state.width=0,this.contentElt=document.createElement("div"),this.contentElt.className="psv-caption-content",this.container.appendChild(this.contentElt),this.setCaption(this.viewer.config.caption)}hide(){this.contentElt.style.display="none",this.state.visible=!1}show(){this.contentElt.style.display="",this.state.visible=!0}onClick(){}setCaption(t){this.show(),this.contentElt.innerHTML=t??"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}autoSize(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}__refreshButton(){var t;(t=this.viewer.navbar.getButton(qo.id,!1))==null||t.autoSize(!0)}};ca.id="caption";var cf={},Zc={};function hp(t,e){if(!t.id)throw new mt("Button id is required");if(cf[t.id]=t,t.groupId&&(Zc[t.groupId]=Zc[t.groupId]||[]).push(t),e){const n=gs.navbar;switch(e){case"start":n.unshift(t.id);break;case"end":n.push(t.id);break;default:{const[i,s]=e.split(":"),r=n.indexOf(i);if(!i||!s||r===-1)throw new mt(`Invalid defaultPosition ${e}`);n.splice(r+(s==="right"?1:0),0,t.id)}}}}[Pb,up,Cb,qo,ca,wb,xb,Tb,Mb,Ab,Sb].forEach(t=>hp(t));var UI=class extends nr{constructor(t){super(t,{className:`psv-navbar ${dl}`}),this.collapsed=[],this.state.visible=!1}show(){this.viewer.container.classList.add("psv--has-navbar"),this.container.classList.add("psv-navbar--open"),this.state.visible=!0}hide(){this.viewer.container.classList.remove("psv--has-navbar"),this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}setButtons(t){this.children.slice().forEach(e=>e.destroy()),this.children.length=0,t.indexOf(ca.id)!==-1&&t.indexOf(qo.id)===-1&&t.splice(t.indexOf(ca.id),0,qo.id),t.forEach(e=>{typeof e=="object"?new DI(this,e):cf[e]?new cf[e](this):Zc[e]?Zc[e].forEach(n=>{new n(this)}):_n(`Unknown button ${e}`)}),new Ac(this),this.children.forEach(e=>{e instanceof On&&e.checkSupported()}),this.autoSize()}setCaption(t){this.children.some(e=>e instanceof ca?(e.setCaption(t),!0):!1)}getButton(t,e=!0){const n=this.children.find(i=>i instanceof On&&i.id===t);return!n&&e&&_n(`button "${t}" not found in the navbar`),n}focusButton(t){var e,n;this.isVisible()&&((n=((e=this.getButton(t,!1))==null?void 0:e.container)||this.container.firstElementChild)==null||n.focus())}autoSize(){var i;this.children.forEach(s=>{s instanceof On&&s.autoSize()});const t=this.container.offsetWidth;let e=0;const n=[];this.children.forEach(s=>{s.isVisible()&&s instanceof On&&(e+=s.width,s.collapsable&&n.push(s))}),e!==0&&(t<e&&n.length>0?(n.forEach(s=>s.collapse()),this.collapsed=n,this.getButton(Ac.id).show(!1)):t>=e&&this.collapsed.length>0&&(this.collapsed.forEach(s=>s.uncollapse()),this.collapsed=[],this.getButton(Ac.id).hide(!1)),(i=this.getButton(ca.id,!1))==null||i.autoSize())}};Kh.enabled=!1;var ia={enabled:!0,maxItems:10,ttl:10*60,items:{},purgeInterval:null,init(){Kh.enabled&&(_n("ThreeJS cache should be disabled"),Kh.enabled=!1),!this.purgeInterval&&this.enabled&&(this.purgeInterval=setInterval(()=>this.purge(),60*1e3))},add(t,e,n){this.enabled&&e&&(this.items[e]=this.items[e]??{files:{},lastAccess:null},this.items[e].files[t]=n,this.items[e].lastAccess=Date.now())},get(t,e){if(this.enabled&&e&&this.items[e])return this.items[e].lastAccess=Date.now(),this.items[e].files[t]},remove(t,e){this.enabled&&e&&this.items[e]&&(delete this.items[e].files[t],Object.keys(this.items[e].files).length===0&&delete this.items[e])},purge(){Object.entries(this.items).sort(([,t],[,e])=>e.lastAccess-t.lastAccess).forEach(([t,{lastAccess:e}],n)=>{n>0&&(Date.now()-e>=this.ttl*1e3||n>=this.maxItems)&&delete this.items[t]})}},zI=class extends nr{constructor(t){super(t,{className:"psv-loader-container"}),this.loader=document.createElement("div"),this.loader.className="psv-loader",this.container.appendChild(this.loader),this.size=this.loader.offsetWidth,this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("class","psv-loader-canvas"),this.canvas.setAttribute("viewBox",`0 0 ${this.size} ${this.size}`),this.loader.appendChild(this.canvas),this.textColor=zi(this.loader,"color"),this.color=zi(this.canvas,"color"),this.border=parseInt(zi(this.loader,"--psv-loader-border"),10),this.thickness=parseInt(zi(this.loader,"--psv-loader-tickness"),10);const e=this.size/2;this.canvas.innerHTML=`
            <circle cx="${e}" cy="${e}" r="${e}" fill="${this.color}"/>
            <path d="" fill="none" stroke="${this.textColor}" stroke-width="${this.thickness}" stroke-linecap="round"/>
        `,this.viewer.addEventListener($n.type,this),this.__updateContent(),this.hide()}destroy(){this.viewer.removeEventListener($n.type,this),super.destroy()}handleEvent(t){t instanceof $n&&t.containsOptions("loadingImg","loadingTxt","lang")&&this.__updateContent()}setProgress(t){this.container.classList.remove("psv-loader--undefined");const e=Lt.clamp(t,0,99.999)/100*Math.PI*2,n=this.size/2,i=n,s=this.thickness/2+this.border,r=(this.size-this.thickness)/2-this.border,a=Math.sin(e)*r+n,o=-Math.cos(e)*r+n,l=t>50?"1":"0";this.canvas.querySelector("path").setAttributeNS(null,"d",`M ${i} ${s} A ${r} ${r} 0 ${l} 1 ${a} ${o}`)}showUndefined(){this.show(),this.setProgress(25),this.container.classList.add("psv-loader--undefined")}__updateContent(){const t=this.loader.querySelector(".psv-loader-image, .psv-loader-text");t&&this.loader.removeChild(t);let e;if(this.viewer.config.loadingImg?(e=document.createElement("img"),e.className="psv-loader-image",e.src=this.viewer.config.loadingImg):this.viewer.config.loadingTxt!==null&&(e=document.createElement("div"),e.className="psv-loader-text",e.innerHTML=this.viewer.config.loadingTxt||this.viewer.config.lang.loading),e){const n=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));e.style.maxWidth=n+"px",e.style.maxHeight=n+"px",this.loader.appendChild(e)}}},BI=class extends nr{constructor(t){super(t,{className:"psv-notification"}),this.state={visible:!1,contentId:null,timeout:null},this.content=document.createElement("div"),this.content.className="psv-notification-content",this.container.appendChild(this.content),this.content.addEventListener("click",()=>this.hide())}isVisible(t){return this.state.visible&&(!t||!this.state.contentId||this.state.contentId===t)}toggle(){throw new mt("Notification cannot be toggled")}show(t){this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),typeof t=="string"&&(t={content:t}),this.state.contentId=t.id||null,this.content.innerHTML=t.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new Ro(this.state.contentId)),t.timeout&&(this.state.timeout=setTimeout(()=>this.hide(this.state.contentId),t.timeout))}hide(t){if(this.isVisible(t)){const e=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new Ao(e))}}},HI=class extends nr{constructor(t){super(t,{className:`psv-overlay ${dl}`}),this.state={visible:!1,contentId:null,dismissible:!0},this.image=document.createElement("div"),this.image.className="psv-overlay-image",this.container.appendChild(this.image),this.title=document.createElement("div"),this.title.className="psv-overlay-title",this.container.appendChild(this.title),this.text=document.createElement("div"),this.text.className="psv-overlay-text",this.container.appendChild(this.text),this.container.addEventListener("click",this),this.viewer.addEventListener(Gs.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Gs.type,this),super.destroy()}handleEvent(t){t.type==="click"?this.isVisible()&&this.state.dismissible&&(this.hide(),t.stopPropagation()):t instanceof Gs&&this.isVisible()&&this.state.dismissible&&t.key===dn.Escape&&(this.hide(),t.preventDefault())}isVisible(t){return this.state.visible&&(!t||!this.state.contentId||this.state.contentId===t)}toggle(){throw new mt("Overlay cannot be toggled")}show(t){typeof t=="string"&&(t={title:t}),this.state.contentId=t.id||null,this.state.dismissible=t.dismissible!==!1,this.image.innerHTML=t.image||"",this.title.innerHTML=t.title||"",this.text.innerHTML=t.text||"",super.show(),this.viewer.dispatchEvent(new eb(this.state.contentId))}hide(t){if(this.isVisible(t)){const e=this.state.contentId;super.hide(),this.state.contentId=null,this.viewer.dispatchEvent(new __(e))}}},VI=200,Fd="psv-panel-content--no-interaction",$I=class extends nr{constructor(t){super(t,{className:`psv-panel ${dl}`}),this.state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};const e=document.createElement("div");e.className="psv-panel-resizer",this.container.appendChild(e);const n=document.createElement("div");n.className="psv-panel-close-button",n.innerHTML=Ai.close,n.title=t.config.lang.close,this.container.appendChild(n),this.content=document.createElement("div"),this.content.className="psv-panel-content",this.container.appendChild(this.content),n.addEventListener("click",()=>this.hide()),e.addEventListener("mousedown",this),e.addEventListener("touchstart",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this),this.viewer.container.addEventListener("mousemove",this),this.viewer.container.addEventListener("touchmove",this),this.viewer.addEventListener(Gs.type,this)}destroy(){this.viewer.removeEventListener(Gs.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(t){switch(t.type){case"mousedown":this.__onMouseDown(t);break;case"touchstart":this.__onTouchStart(t);break;case"mousemove":this.__onMouseMove(t);break;case"touchmove":this.__onTouchMove(t);break;case"mouseup":this.__onMouseUp(t);break;case"touchend":this.__onTouchEnd(t);break;case Gs.type:this.__onKeyPress(t);break}}isVisible(t){return this.state.visible&&(!t||!this.state.contentId||this.state.contentId===t)}toggle(){throw new mt("Panel cannot be toggled")}show(t){typeof t=="string"&&(t={content:t});const e=this.isVisible(t.id);this.state.contentId=t.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),t.id&&this.state.width[t.id]?this.container.style.width=this.state.width[t.id]:t.width?this.container.style.width=t.width:this.container.style.width=null,this.content.innerHTML=t.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),gu(this.content,"psv-panel-content--no-margin",t.noMargin===!0),t.clickHandler&&(this.state.clickHandler=n=>{t.clickHandler(jc(n))},this.state.keyHandler=n=>{n.key===dn.Enter&&t.clickHandler(jc(n))},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),e||setTimeout(()=>{var n;(n=this.content.querySelector("a,button,[tabindex]"))==null||n.focus()},300)),this.viewer.dispatchEvent(new Ws(this.state.contentId))}hide(t){if(this.isVisible(t)){const e=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),this.viewer.dispatchEvent(new $s(e))}}__onMouseDown(t){t.stopPropagation(),this.__startResize(t.clientX,t.clientY)}__onTouchStart(t){if(t.stopPropagation(),t.touches.length===1){const e=t.touches[0];this.__startResize(e.clientX,e.clientY)}}__onMouseUp(t){this.state.mousedown&&(t.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(Fd))}__onTouchEnd(t){this.state.mousedown&&(t.stopPropagation(),t.touches.length===0&&(this.state.mousedown=!1,this.content.classList.remove(Fd)))}__onMouseMove(t){this.state.mousedown&&(t.stopPropagation(),this.__resize(t.clientX,t.clientY))}__onTouchMove(t){if(this.state.mousedown){const e=t.touches[0];this.__resize(e.clientX,e.clientY)}}__onKeyPress(t){this.isVisible()&&t.key===dn.Escape&&(this.hide(),t.preventDefault())}__startResize(t,e){this.state.mouseX=t,this.state.mouseY=e,this.state.mousedown=!0,this.content.classList.add(Fd)}__resize(t,e){const n=t,i=e,s=Math.max(VI,this.container.offsetWidth-(n-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=s),this.container.style.width=s,this.state.mouseX=n,this.state.mouseY=i}},GI=class extends nr{constructor(t,e){super(t,{className:"psv-tooltip"}),this.state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null,hideTimeout:null},this.content=document.createElement("div"),this.content.className="psv-tooltip-content",this.container.appendChild(this.content),this.arrow=document.createElement("div"),this.arrow.className="psv-tooltip-arrow",this.container.appendChild(this.arrow),this.container.addEventListener("transitionend",this),this.container.addEventListener("touchdown",n=>n.stopPropagation()),this.container.addEventListener("mousedown",n=>n.stopPropagation()),this.container.style.top="-1000px",this.container.style.left="-1000px",this.show(e)}handleEvent(t){t.type==="transitionend"&&this.__onTransitionEnd(t)}destroy(){clearTimeout(this.state.hideTimeout),delete this.state.data,super.destroy()}toggle(){throw new mt("Tooltip cannot be toggled")}show(t){if(this.state.state!==0)throw new mt("Initialized tooltip cannot be re-initialized");t.className&&tp(this.container,t.className),t.style&&Object.assign(this.container.style,t.style),this.state.state=3,this.update(t.content,t),this.state.data=t.data,this.state.state=1,this.viewer.dispatchEvent(new rb(this,this.state.data)),this.__waitImages()}update(t,e){this.content.innerHTML=t;const n=this.container.getBoundingClientRect();this.state.width=n.right-n.left,this.state.height=n.bottom-n.top,this.state.arrow=parseInt(zi(this.arrow,"border-top-width"),10),this.state.border=parseInt(zi(this.container,"border-top-left-radius"),10),this.move(e??this.state.config),this.__waitImages()}move(t){var o;if(this.state.state!==1&&this.state.state!==3)throw new mt("Uninitialized tooltip cannot be moved");t.box=t.box??((o=this.state.config)==null?void 0:o.box)??{width:0,height:0},this.state.config=t;const e=this.container,n=this.arrow,i={posClass:$y(t.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(i,t);let s=null,r=null;if(i.top<0?s="bottom":i.top+i.height>this.viewer.state.size.height&&(s="top"),i.left<0?r="right":i.left+i.width>this.viewer.state.size.width&&(r="left"),r||s){const l=rp(i.posClass);s&&(i.posClass[l?0:1]=s),r&&(i.posClass[l?1:0]=r),this.__computeTooltipPosition(i,t)}e.style.top=i.top+"px",e.style.left=i.left+"px",n.style.top=i.arrowTop+"px",n.style.left=i.arrowLeft+"px";const a=i.posClass.join("-");a!==this.state.pos&&(e.classList.remove(`psv-tooltip--${this.state.pos}`),this.state.pos=a,e.classList.add(`psv-tooltip--${this.state.pos}`))}hide(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new S_(this.state.data));const t=parseFloat(zi(this.container,"transition-duration"));this.state.hideTimeout=setTimeout(()=>{this.destroy()},t*2)}__onTransitionEnd(t){if(t.propertyName==="transform")switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy();break}}__computeTooltipPosition(t,e){const n=this.state.arrow,i=e.top,s=t.height,r=e.left,a=t.width,o=n+this.state.border,l=e.box.width/2+n*2,c=e.box.height/2+n*2;switch(t.posClass.join("-")){case"top-left":t.top=i-c-s,t.left=r+o-a,t.arrowTop=s,t.arrowLeft=a-o-n;break;case"top-center":t.top=i-c-s,t.left=r-a/2,t.arrowTop=s,t.arrowLeft=a/2-n;break;case"top-right":t.top=i-c-s,t.left=r-o,t.arrowTop=s,t.arrowLeft=n;break;case"bottom-left":t.top=i+c,t.left=r+o-a,t.arrowTop=-n*2,t.arrowLeft=a-o-n;break;case"bottom-center":t.top=i+c,t.left=r-a/2,t.arrowTop=-n*2,t.arrowLeft=a/2-n;break;case"bottom-right":t.top=i+c,t.left=r-o,t.arrowTop=-n*2,t.arrowLeft=n;break;case"left-top":t.top=i+o-s,t.left=r-l-a,t.arrowTop=s-o-n,t.arrowLeft=a;break;case"center-left":t.top=i-s/2,t.left=r-l-a,t.arrowTop=s/2-n,t.arrowLeft=a;break;case"left-bottom":t.top=i-o,t.left=r-l-a,t.arrowTop=n,t.arrowLeft=a;break;case"right-top":t.top=i+o-s,t.left=r+l,t.arrowTop=s-o-n,t.arrowLeft=-n*2;break;case"center-right":t.top=i-s/2,t.left=r+l,t.arrowTop=s/2-n,t.arrowLeft=-n*2;break;case"right-bottom":t.top=i-o,t.left=r+l,t.arrowTop=n,t.arrowLeft=-n*2;break}}__waitImages(){const t=this.content.querySelectorAll("img");if(t.length>0){const e=[];t.forEach(n=>{n.complete||e.push(new Promise(i=>{n.onload=i,n.onerror=i}))}),e.length&&Promise.all(e).then(()=>{if(this.state.state===1||this.state.state===3){const n=this.container.getBoundingClientRect();this.state.width=n.right-n.left,this.state.height=n.bottom-n.top,this.move(this.state.config)}})}}},WI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/><!--Created by Shastry from the Noun Project--></svg>
`,pl=class{constructor(t){this.viewer=t,this.config=t.config,this.state=t.state}destroy(){}},_i=new Ie,lc=new $i(0,0,0,"ZXY"),jI=class extends pl{constructor(t){super(t)}fovToZoomLevel(t){const e=Math.round((t-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return Lt.clamp(e-2*(e-50),0,100)}zoomLevelToFov(t){return this.config.maxFov+t/100*(this.config.minFov-this.config.maxFov)}vFovToHFov(t){return Lt.radToDeg(2*Math.atan(Math.tan(Lt.degToRad(t)/2)*this.state.aspect))}hFovToVFov(t){return Lt.radToDeg(2*Math.atan(Math.tan(Lt.degToRad(t)/2)/this.state.aspect))}getAnimationProperties(t,e,n){const i=!pn(e),s=!pn(n),r={};let a=null;if(i){const o=this.viewer.getPosition(),l=Cy(o.yaw,e.yaw);r.yaw={start:o.yaw,end:o.yaw+l},r.pitch={start:o.pitch,end:e.pitch},a=nf(t,Py(o,e))}if(s){const o=this.viewer.getZoomLevel(),l=Math.abs(n-o);r.zoom={start:o,end:n},a===null&&(a=nf(t,Math.PI/4*l/100))}return a===null?typeof t=="number"?a=t:a=Jh:a=Math.max(Jh,a),{duration:a,properties:r}}getTransitionOptions(t){let e;const n=this.config.defaultTransition??gs.defaultTransition;return t.transition===!1||t.transition===null?e=null:t.transition===!0?e={...n}:typeof t.transition=="object"?e={...n,...t.transition}:e=this.config.defaultTransition,e}textureCoordsToSphericalCoords(t){var n;if(!((n=this.state.textureData)!=null&&n.panoData))throw new mt("Current adapter does not support texture coordinates or no texture has been loaded");const e=this.viewer.adapter.textureCoordsToSphericalCoords(t,this.state.textureData.panoData);return!lc.equals(this.viewer.renderer.panoramaPose)||!lc.equals(this.viewer.renderer.sphereCorrection)?(this.sphericalCoordsToVector3(e,_i),_i.applyEuler(this.viewer.renderer.panoramaPose),_i.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(_i)):e}sphericalCoordsToTextureCoords(t){var e;if(!((e=this.state.textureData)!=null&&e.panoData))throw new mt("Current adapter does not support texture coordinates or no texture has been loaded");return(!lc.equals(this.viewer.renderer.panoramaPose)||!lc.equals(this.viewer.renderer.sphereCorrection))&&(this.sphericalCoordsToVector3(t,_i),rf(_i,this.viewer.renderer.sphereCorrection),rf(_i,this.viewer.renderer.panoramaPose),t=this.vector3ToSphericalCoords(_i)),this.viewer.adapter.sphericalCoordsToTextureCoords(t,this.state.textureData.panoData)}sphericalCoordsToVector3(t,e,n=Cr){return e||(e=new Ie),e.x=n*-Math.cos(t.pitch)*Math.sin(t.yaw),e.y=n*Math.sin(t.pitch),e.z=n*Math.cos(t.pitch)*Math.cos(t.yaw),e}vector3ToSphericalCoords(t){const e=Math.acos(t.y/Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)),n=Math.atan2(t.x,t.z);return{yaw:n<0?-n:Math.PI*2-n,pitch:Math.PI/2-e}}viewerCoordsToVector3(t){const e=this.viewer.renderer.getIntersections(t).filter(n=>n.object.userData[Js]);return e.length?e[0].point:null}viewerCoordsToSphericalCoords(t){const e=this.viewerCoordsToVector3(t);return e?this.vector3ToSphericalCoords(e):null}vector3ToViewerCoords(t){const e=t.clone();return e.project(this.viewer.renderer.camera),{x:Math.round((e.x+1)/2*this.state.size.width),y:Math.round((1-e.y)/2*this.state.size.height)}}sphericalCoordsToViewerCoords(t){return this.sphericalCoordsToVector3(t,_i),this.vector3ToViewerCoords(_i)}isPointVisible(t){let e,n;if(t instanceof Ie)e=t,n=this.vector3ToViewerCoords(t);else if(sp(t))e=this.sphericalCoordsToVector3(t,_i),n=this.vector3ToViewerCoords(e);else return!1;return e.dot(this.viewer.state.direction)>0&&n.x>=0&&n.x<=this.viewer.state.size.width&&n.y>=0&&n.y<=this.viewer.state.size.height}cleanPosition(t){if("yaw"in t||"pitch"in t){if(!("yaw"in t)||!("pitch"in t))throw new mt("Position is missing 'yaw' or 'pitch'");return{yaw:ki(t.yaw),pitch:ki(t.pitch,!0)}}else return this.textureCoordsToSphericalCoords(t)}cleanSphereCorrection(t){return{pan:ki((t==null?void 0:t.pan)||0),tilt:ki((t==null?void 0:t.tilt)||0,!0),roll:ki((t==null?void 0:t.roll)||0,!0,!1)}}cleanPanoramaPose(t){return{pan:Lt.degToRad((t==null?void 0:t.poseHeading)||0),tilt:Lt.degToRad((t==null?void 0:t.posePitch)||0),roll:Lt.degToRad((t==null?void 0:t.poseRoll)||0)}}cleanPanoramaOptions(t,e){return e!=null&&e.isEquirectangular&&(pn(t.zoom)&&!pn(e.initialFov)&&(t={...t,zoom:this.fovToZoomLevel(this.hFovToVFov(e.initialFov))}),pn(t.position)&&!pn(e.initialHeading)&&!pn(e.initialPitch)&&(t={...t,position:{yaw:ki(e.initialHeading),pitch:ki(e.initialPitch,!0)}})),t}},XI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/><!--Created by AomAm from the Noun Project--></svg>
`,qI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/><!-- Created by Icon Island from the Noun Project --></svg>
`,xu=class Rb{constructor(){this.$=Rb.IDLE}is(...e){return e.some(n=>this.$&n)}set(e){this.$=e}add(e){this.$|=e}remove(e){this.$&=~e}};xu.IDLE=0;xu.CLICK=1;xu.MOVING=2;var Yt=xu,YI=class extends pl{constructor(t){super(t),this.data={startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,pinchDist:0,moveDelta:{yaw:0,pitch:0,zoom:0},accumulatorFactor:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},this.step=new Yt,this.keyHandler=new bu,this.resizeObserver=new ResizeObserver(Fy(()=>this.viewer.autoSize(),50)),this.moveThreshold=by*Dn.pixelRatio}init(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener("fullscreenchange",this),this.resizeObserver.observe(this.viewer.container),this.viewer.addEventListener(To.type,this),this.viewer.addEventListener(Do.type,this)}destroy(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener("fullscreenchange",this),this.resizeObserver.disconnect(),this.viewer.removeEventListener(To.type,this),this.viewer.removeEventListener(Do.type,this),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),super.destroy()}handleEvent(t){switch(t.type){case"keydown":this.__onKeyDown(t);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(t);break;case"mouseup":this.__onMouseUp(t);break;case"touchmove":this.__onTouchMove(t);break;case"touchend":this.__onTouchEnd(t);break;case"fullscreenchange":this.__onFullscreenChange();break;case To.type:this.__applyMoveDelta();break;case Do.type:this.__clearMoveDelta();break}if(!Iy(t,"."+dl))switch(t.type){case"mousedown":this.__onMouseDown(t);break;case"touchstart":this.__onTouchStart(t);break;case"wheel":this.__onMouseWheel(t);break}}__onKeyDown(t){var n;if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=t.key===dn.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(yn.CTRL_ZOOM))),!this.viewer.dispatchEvent(new Gs(t.key,t))||!this.state.keyboardEnabled)return;const e=(n=this.config.keyboardActions)==null?void 0:n[t.key];if(typeof e=="function"){e(this.viewer,t),t.preventDefault();return}if(!(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&e&&!this.keyHandler.pending){switch(e!=="ZOOM_IN"&&e!=="ZOOM_OUT"&&this.viewer.stopAll(),e){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0);break}this.keyHandler.down(e),t.preventDefault()}}__onKeyUp(){this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up(t=>{t==="ZOOM_IN"||t==="ZOOM_OUT"?this.viewer.dynamics.zoom.stop():(this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer())})}__onMouseDown(t){this.step.add(Yt.CLICK),this.data.startMouseX=t.clientX,this.data.startMouseY=t.clientY,this.config.mousemove&&t.preventDefault()}__onMouseUp(t){this.step.is(Yt.CLICK,Yt.MOVING)&&this.__stopMove(t.clientX,t.clientY,t,t.button===2)}__onMouseMove(t){this.config.mousemove&&this.step.is(Yt.CLICK,Yt.MOVING)&&(t.preventDefault(),this.__doMove(t.clientX,t.clientY)),this.__handleObjectsEvents(t)}__onTouchStart(t){t.touches.length===1?(this.step.add(Yt.CLICK),this.data.startMouseX=t.touches[0].clientX,this.data.startMouseY=t.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout(()=>{const e=t.touches[0];this.__stopMove(e.clientX,e.clientY,t,!0),this.data.longtouchTimeout=null},wy))):t.touches.length===2&&(this.step.set(Yt.IDLE),this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(t),t.preventDefault()))}__onTouchEnd(t){if(this.__cancelLongTouch(),this.step.is(Yt.CLICK,Yt.MOVING)){if(t.preventDefault(),this.__cancelTwoFingersOverlay(),t.touches.length===1)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(t.touches.length===0){const e=t.changedTouches[0];this.__stopMove(e.clientX,e.clientY,t)}}}__onTouchMove(t){if(this.__cancelLongTouch(),!!this.config.mousemove)if(t.touches.length===1){if(this.config.touchmoveTwoFingers)this.step.is(Yt.CLICK)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout(()=>{this.viewer.overlay.show({id:yn.TWO_FINGERS,image:XI,title:this.config.lang.twoFingers})},xy));else if(this.step.is(Yt.CLICK,Yt.MOVING)){t.preventDefault();const e=t.touches[0];this.__doMove(e.clientX,e.clientY)}}else this.__doMoveZoom(t),this.__cancelTwoFingersOverlay()}__cancelLongTouch(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}__cancelTwoFingersOverlay(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(yn.TWO_FINGERS))}__onMouseWheel(t){if(!this.config.mousewheel||!t.deltaY)return;if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown){this.viewer.overlay.show({id:yn.CTRL_ZOOM,image:qI,title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),this.data.ctrlZoomTimeout=setTimeout(()=>this.viewer.overlay.hide(yn.CTRL_ZOOM),Sy);return}t.preventDefault(),t.stopPropagation();const e=t.deltaY/Math.abs(t.deltaY)*5*this.config.zoomSpeed;e!==0&&this.viewer.dynamics.zoom.step(-e,5)}__onFullscreenChange(){const t=this.viewer.isFullscreenEnabled();this.config.keyboard==="fullscreen"&&(t?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new Mo(t))}__resetMove(){this.step.set(Yt.IDLE),this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0}__startMoveZoom(t){this.viewer.stopAll(),this.__resetMove();const e=ef(t);this.step.set(Yt.MOVING),this.data.accumulatorFactor=this.config.moveInertia,{distance:this.data.pinchDist,center:{x:this.data.mouseX,y:this.data.mouseY}}=e}__stopMove(t,e,n,i=!1){this.step.is(Yt.CLICK)&&!this.__moveThresholdReached(t,e)&&this.__doClick(t,e,n,i),this.config.moveInertia&&(this.data.accumulatorFactor=Math.pow(this.config.moveInertia,.5)),this.__resetMove(),this.viewer.resetIdleTimer()}__doClick(t,e,n,i=!1){const s=this.viewer.container.getBoundingClientRect(),r=t-s.left,a=e-s.top,o=this.viewer.renderer.getIntersections({x:r,y:a}),l=o.find(c=>c.object.userData[Js]);if(l){const c=this.viewer.dataHelper.vector3ToSphericalCoords(l.point),u={rightclick:i,originalEvent:n,target:jc(n),clientX:t,clientY:e,viewerX:r,viewerY:a,yaw:c.yaw,pitch:c.pitch,objects:o.map(d=>d.object).filter(d=>!d.userData[Js])};try{const d=this.viewer.dataHelper.sphericalCoordsToTextureCoords(u);Object.assign(u,d)}catch{}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-u.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-u.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new h_(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new o_(u)),this.data.dblclickData=vu(u),this.data.dblclickTimeout=setTimeout(()=>{this.data.dblclickTimeout=null,this.data.dblclickData=null},Ey))}}__handleObjectsEvents(t){if(!zy(this.state.objectsObservers)&&t.composedPath().includes(this.viewer.container)){const e=Dy(this.viewer.container),n={x:t.clientX-e.x,y:t.clientY-e.y},i=this.viewer.renderer.getIntersections(n),s=(r,a,o)=>{this.viewer.dispatchEvent(new o(t,r,n,a))};for(const[r,a]of Object.entries(this.state.objectsObservers)){const o=i.find(l=>l.object.userData[r]);o?(a&&o.object!==a&&(s(a,r,af),this.state.objectsObservers[r]=null),a?s(o.object,r,_b):(this.state.objectsObservers[r]=o.object,s(o.object,r,pb))):a&&(s(a,r,af),this.state.objectsObservers[r]=null)}}}__doMove(t,e){if(this.step.is(Yt.CLICK)&&this.__moveThresholdReached(t,e))this.viewer.stopAll(),this.__resetMove(),this.step.set(Yt.MOVING),this.data.mouseX=t,this.data.mouseY=e,this.data.accumulatorFactor=this.config.moveInertia;else if(this.step.is(Yt.MOVING)){const n=(t-this.data.mouseX)*Math.cos(this.state.roll)-(e-this.data.mouseY)*Math.sin(this.state.roll),i=(e-this.data.mouseY)*Math.cos(this.state.roll)+(t-this.data.mouseX)*Math.sin(this.state.roll),s={yaw:this.config.moveSpeed*(n/this.state.size.width)*Lt.degToRad(this.state.hFov),pitch:this.config.moveSpeed*(i/this.state.size.height)*Lt.degToRad(this.state.vFov)};this.data.moveDelta.yaw+=s.yaw,this.data.moveDelta.pitch+=s.pitch,this.data.mouseX=t,this.data.mouseY=e}}__moveThresholdReached(t,e){return Math.abs(t-this.data.startMouseX)>=this.moveThreshold||Math.abs(e-this.data.startMouseY)>=this.moveThreshold}__doMoveZoom(t){if(this.step.is(Yt.MOVING)){t.preventDefault();const e=ef(t);this.__doMove(e.center.x,e.center.y),this.data.moveDelta.zoom+=this.config.zoomSpeed*((e.distance-this.data.pinchDist)/Dn.pixelRatio),this.data.pinchDist=e.distance}}__applyMoveDelta(){if(Math.abs(this.data.moveDelta.yaw)>0||Math.abs(this.data.moveDelta.pitch)>0){const e=this.viewer.getPosition();this.viewer.rotate({yaw:e.yaw-this.data.moveDelta.yaw*(1-this.config.moveInertia),pitch:e.pitch+this.data.moveDelta.pitch*(1-this.config.moveInertia)}),this.data.moveDelta.yaw*=this.data.accumulatorFactor,this.data.moveDelta.pitch*=this.data.accumulatorFactor,Math.abs(this.data.moveDelta.yaw)<=.001&&(this.data.moveDelta.yaw=0),Math.abs(this.data.moveDelta.pitch)<=.001&&(this.data.moveDelta.pitch=0)}if(Math.abs(this.data.moveDelta.zoom)>0){const e=this.viewer.getZoomLevel();this.viewer.zoom(e+this.data.moveDelta.zoom*(1-this.config.moveInertia)),this.data.moveDelta.zoom*=this.config.moveInertia,Math.abs(this.data.moveDelta.zoom)<=.001&&(this.data.moveDelta.zoom=0)}}__clearMoveDelta(){this.data.moveDelta.yaw=0,this.data.moveDelta.pitch=0,this.data.moveDelta.zoom=0}};Et.enabled=!1;var cc=new Ut,ov=new en,lv=new Ba,KI=class extends pl{constructor(t){super(t),this.frustumNeedsUpdate=!0,this.renderer=new dI(this.config.rendererParameters),this.renderer.setPixelRatio(Dn.pixelRatio),this.renderer.outputColorSpace=Ar,this.renderer.toneMapping=G0,this.renderer.domElement.className="psv-canvas",this.renderer.domElement.style.background=this.config.canvasBackground,this.scene=new Ag,this.camera=new ai(50,16/9,.1,2*Cr),this.camera.matrixAutoUpdate=!1;const e=new ci(new ul(Cr).scale(-1,1,1),new ll({opacity:0,transparent:!0,depthTest:!1,depthWrite:!1}));e.userData={[Js]:!0},this.scene.add(e),this.raycaster=new CC,this.frustum=new Zf,this.container=document.createElement("div"),this.container.className="psv-canvas-container",this.container.appendChild(this.renderer.domElement),this.viewer.container.appendChild(this.container),this.container.addEventListener("contextmenu",n=>n.preventDefault()),this.viewer.addEventListener(Io.type,this),this.viewer.addEventListener(us.type,this),this.viewer.addEventListener(Co.type,this),this.viewer.addEventListener(Po.type,this),this.viewer.addEventListener($n.type,this),this.hide()}get panoramaPose(){return this.mesh.rotation}get sphereCorrection(){return this.meshContainer.rotation}init(){this.show(),this.renderer.setAnimationLoop(t=>this.__renderLoop(t))}destroy(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.renderer.dispose(),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(Io.type,this),this.viewer.removeEventListener(us.type,this),this.viewer.removeEventListener(Co.type,this),this.viewer.removeEventListener(Po.type,this),this.viewer.removeEventListener($n.type,this),super.destroy()}handleEvent(t){switch(t.type){case Io.type:this.__onSizeUpdated();break;case us.type:this.__onZoomUpdated();break;case Co.type:this.__onPositionUpdated();break;case Po.type:this.__onPositionUpdated();break;case $n.type:t.containsOptions("fisheye")&&this.__onPositionUpdated(),t.containsOptions("canvasBackground")&&(this.renderer.domElement.style.background=this.config.canvasBackground);break}}hide(){this.container.style.opacity="0"}show(){this.container.style.opacity="1"}setCustomRenderer(t){t?this.customRenderer=t(this.renderer):this.customRenderer=null,this.viewer.needsUpdate()}__onSizeUpdated(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onZoomUpdated(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onPositionUpdated(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.rotateZ(-this.state.roll),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__renderLoop(t){const e=this.timestamp?t-this.timestamp:0;this.timestamp=t,this.viewer.dispatchEvent(new To(t,e)),this.viewer.dynamics.update(e),(this.state.needsUpdate||this.state.continuousUpdateCount>0)&&(this.state.needsUpdate=!1,(this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new Y_))}setTexture(t){this.meshContainer||(this.meshContainer=new aa,this.scene.add(this.meshContainer)),this.state.textureData&&this.viewer.adapter.disposeTexture(this.state.textureData),this.mesh&&(this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh)),this.mesh=this.viewer.adapter.createMesh(t.panoData),this.viewer.adapter.setTexture(this.mesh,t,!1),this.meshContainer.add(this.mesh),this.state.textureData=t,this.viewer.needsUpdate()}setPanoramaPose(t,e=this.mesh){const n=this.viewer.dataHelper.cleanPanoramaPose(t);e.rotation.set(n.tilt,n.pan,n.roll,"YXZ")}setSphereCorrection(t,e=this.meshContainer){const n=this.viewer.dataHelper.cleanSphereCorrection(t);e.rotation.set(n.tilt,n.pan,n.roll,"YXZ")}transition(t,e,n){const i=n.effect==="fade"||n.rotation,s=!pn(e.position),r=!pn(e.zoom),a=new op(s?this.viewer.dataHelper.cleanPosition(e.position):void 0,e.zoom);this.viewer.dispatchEvent(a);const o=new aa,l=this.viewer.adapter.createMesh(t.panoData);if(this.viewer.adapter.setTexture(l,t,!0),this.viewer.adapter.setTextureOpacity(l,0),this.setPanoramaPose(t.panoData,l),this.setSphereCorrection(e.sphereCorrection,o),s&&!n.rotation){const h=this.viewer.getPosition(),p=new Ie(0,1,0);o.rotateOnWorldAxis(p,a.position.yaw-h.yaw);const f=new Ie(0,1,0).cross(this.camera.getWorldDirection(new Ie)).normalize();o.rotateOnWorldAxis(f,a.position.pitch-h.pitch)}o.add(l),this.scene.add(o),this.renderer.setRenderTarget(new Zs),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);const{duration:c,properties:u}=this.viewer.dataHelper.getAnimationProperties(n.speed,n.rotation?a.position:null,i?a.zoomLevel:null),d=new Kc({properties:{...u,opacity:{start:0,end:1}},duration:c,easing:"inOutCubic",onTick:h=>{switch(n.effect){case"fade":this.viewer.adapter.setTextureOpacity(l,h.opacity);break;case"black":case"white":h.opacity<.5?this.renderer.toneMappingExposure=n.effect==="black"?Lt.mapLinear(h.opacity,0,.5,1,0):Lt.mapLinear(h.opacity,0,.5,1,4):(this.renderer.toneMappingExposure=n.effect==="black"?Lt.mapLinear(h.opacity,.5,1,0,1):Lt.mapLinear(h.opacity,.5,1,4,1),this.mesh.visible=!1,this.viewer.adapter.setTextureOpacity(l,1),r&&!i&&this.viewer.dynamics.zoom.setValue(a.zoomLevel));break}s&&n.rotation&&this.viewer.dynamics.position.setValue({yaw:h.yaw,pitch:h.pitch}),r&&i&&this.viewer.dynamics.zoom.setValue(h.zoom),this.viewer.needsUpdate()}});return d.then(h=>{o.remove(l),this.scene.remove(o),h?(this.viewer.adapter.disposeTexture(this.state.textureData),this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh),this.mesh=l,this.meshContainer.add(l),this.state.textureData=t,this.setPanoramaPose(t.panoData),this.setSphereCorrection(e.sphereCorrection),s&&!n.rotation&&this.viewer.rotate(e.position)):(this.viewer.adapter.disposeTexture(t),this.viewer.adapter.disposeMesh(l))}),d}getIntersections(t){var n;cc.x=2*t.x/this.state.size.width-1,cc.y=-2*t.y/this.state.size.height+1,this.raycaster.setFromCamera(cc,this.camera);const e=this.raycaster.intersectObjects(this.scene.children,!0).filter(i=>i.object.visible).filter(i=>i.object.isMesh&&!!i.object.userData);return(n=this.customRenderer)!=null&&n.getIntersections&&e.push(...this.customRenderer.getIntersections(this.raycaster,cc)),e}isObjectVisible(t){if(!t)return!1;if(this.frustumNeedsUpdate&&(ov.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.frustum.setFromProjectionMatrix(ov),this.frustumNeedsUpdate=!1),t.isVector3)return this.frustum.containsPoint(t);if(t.isMesh&&t.geometry){const e=t;return e.geometry.boundingBox||e.geometry.computeBoundingBox(),lv.copy(e.geometry.boundingBox).applyMatrix4(e.matrixWorld),this.frustum.intersectsBox(lv)}else return t.isObject3D?this.frustum.intersectsObject(t):!1}addObject(t){this.scene.add(t)}removeObject(t){this.scene.remove(t)}cleanScene(t){const e=n=>{var i;(i=n.map)==null||i.dispose(),n.uniforms&&Object.values(n.uniforms).forEach(s=>{var r,a;(a=(r=s.value)==null?void 0:r.dispose)==null||a.call(r)}),n.dispose()};t.traverse(n=>{var i,s;(i=n.geometry)==null||i.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(r=>{e(r)}):e(n.material)),n instanceof Ag||(s=n.dispose)==null||s.call(n),n!==t&&this.cleanScene(n)})}},ZI=class extends Qf{load(t,e,n,i,s){const r=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(r,{signal:s}).then(a=>{if(a.status===200||a.status===0){const o=a.body.getReader(),l=a.headers.get("Content-Length")||a.headers.get("X-File-Size"),c=l?parseInt(l):0,u=c!==0;let d=0;const h=new ReadableStream({start(p){f();function f(){o.read().then(({done:m,value:v})=>{if(m)p.close();else{d+=v.byteLength;const g=new ProgressEvent("progress",{lengthComputable:u,loaded:d,total:c});n(g),p.enqueue(v),f()}}).catch(m=>{i(m)})}}});return new Response(h)}else throw new Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>a.blob()).then(a=>{e(a)}).catch(a=>{i(a)})}},QI=class extends Qf{load(t,e,n,i){const s=document.createElement("img");function r(){l(),e(this)}function a(c){if(l(),i!=null&&i.aborted){const u=new Error;u.name="AbortError",u.message="The operation was aborted.",n(u)}else n(c)}function o(){s.src=""}function l(){s.removeEventListener("load",r,!1),s.removeEventListener("error",a,!1),i==null||i.removeEventListener("abort",o,!1)}return s.addEventListener("load",r,!1),s.addEventListener("error",a,!1),i==null||i.addEventListener("abort",o,!1),t.startsWith("data:")||(s.crossOrigin=this.withCredentials?"use-credentials":"anonymous"),s.src=t,s}},JI=class extends pl{constructor(t){super(t),this.abortCtrl={},this.fileLoader=new ZI,this.imageLoader=new QI}destroy(){this.abortLoading(),super.destroy()}abortLoading(){Object.values(this.abortCtrl).forEach(t=>t.abort()),this.abortCtrl={}}loadFile(t,e,n){const i=ia.get(t,n);if(i){if(i instanceof Blob)return e==null||e(100),Promise.resolve(i);ia.remove(t,n)}return this.config.requestHeaders&&this.fileLoader.setRequestHeader(this.config.requestHeaders(t)),this.fileLoader.setWithCredentials(this.config.withCredentials(t)),new Promise((s,r)=>{let a=0;e==null||e(a),this.fileLoader.load(t,o=>{a=100,e==null||e(a),ia.add(t,n,o),s(o)},o=>{if(o.lengthComputable){const l=o.loaded/o.total*100;l>a&&(a=l,e==null||e(a))}},o=>{r(o)},this.__getAbortSignal(n))})}loadImage(t,e,n){const i=ia.get(t,n);return i?(e==null||e(100),i instanceof Blob?this.blobToImage(i):Promise.resolve(i)):!e&&!this.config.requestHeaders?(this.imageLoader.setWithCredentials(this.config.withCredentials(t)),new Promise((s,r)=>{this.imageLoader.load(t,a=>{ia.add(t,n,a),s(a)},a=>{r(a)},this.__getAbortSignal(n))})):this.loadFile(t,e,n).then(s=>this.blobToImage(s))}blobToImage(t){return new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{URL.revokeObjectURL(i.src),e(i)},i.onerror=n,i.src=URL.createObjectURL(t)})}preloadPanorama(t){return this.viewer.adapter.supportsPreload(t)?this.viewer.adapter.loadTexture(t,!1):Promise.reject(new mt("Current adapter does not support preload"))}dispatchProgress(t){this.viewer.loader.setProgress(t),this.viewer.dispatchEvent(new P_(Math.round(t)))}__getAbortSignal(t){var e;return t?((e=this.abortCtrl[t])!=null&&e.signal.aborted&&delete this.abortCtrl[t],this.abortCtrl[t]||(this.abortCtrl[t]=new AbortController),this.abortCtrl[t].signal):null}},eD=class extends pl{constructor(t){super(t),this.zoom=new vo(e=>{this.viewer.state.vFov=this.viewer.dataHelper.zoomLevelToFov(e),this.viewer.state.hFov=this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov),this.viewer.dispatchEvent(new us(e))},{defaultValue:this.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),this.position=new qy(e=>{this.viewer.dataHelper.sphericalCoordsToVector3(e,this.viewer.state.direction),this.viewer.dispatchEvent(new Co(e))},{yaw:new vo(null,{defaultValue:this.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new vo(null,{defaultValue:this.config.defaultPitch,min:-Math.PI/2,max:Math.PI/2,wrap:!1})}),this.roll=new vo(e=>{this.viewer.state.roll=e,this.viewer.dispatchEvent(new Po(e))},{defaultValue:0,min:-Math.PI,max:Math.PI,wrap:!1}),this.updateSpeeds()}updateSpeeds(){this.zoom.setSpeed(this.config.zoomSpeed*50),this.position.setSpeed(Lt.degToRad(this.config.moveSpeed*50)),this.roll.setSpeed(Lt.degToRad(this.config.moveSpeed*50))}update(t){this.zoom.update(t),this.position.update(t),this.roll.update(t)}},tD=class{constructor(){this.ready=!1,this.needsUpdate=!1,this.continuousUpdateCount=0,this.keyboardEnabled=!1,this.direction=new Ie(0,0,Cr),this.roll=0,this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0}}},nD=class extends Zy{constructor(t){var e,n,i;if(super(),this.plugins={},this.children=[],this.parent=Ly(t.container),!this.parent)throw new mt('"container" element not found.');this.parent[Js]=this,this.container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),jy(this.parent),Wy(this.container,"core"),this.state=new tD,this.config=FI(t),this.__setSize(this.config.size),this.overlay=new HI(this);try{Dn.load()}catch(s){console.error(s),this.showError(this.config.lang.webglError);return}ia.init(),this.adapter=new this.config.adapter[0](this,this.config.adapter[1]),this.renderer=new KI(this),this.textureLoader=new JI(this),this.eventsHandler=new YI(this),this.dataHelper=new jI(this),this.dynamics=new eD(this),(n=(e=this.adapter).init)==null||n.call(e),this.loader=new zI(this),this.navbar=new UI(this),this.panel=new $I(this),this.notification=new BI(this),this.autoSize(),this.setCursor(null),ip(Dn.isTouchEnabled,s=>{gu(this.container,"psv--is-touch",s)}),this.config.plugins.forEach(([s,r])=>{this.plugins[s.id]=new s(this,r)});for(const s of Object.values(this.plugins))(i=s.init)==null||i.call(s);this.config.navbar&&this.navbar.setButtons(this.config.navbar),this.state.loadingPromise||(this.config.panorama?this.setPanorama(this.config.panorama,{sphereCorrection:this.config.sphereCorrection,panoData:this.config.panoData}):this.loader.show())}destroy(){var t,e,n,i,s,r;this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(const[a,o]of Object.entries(this.plugins))o.destroy(),delete this.plugins[a];this.children.slice().forEach(a=>a.destroy()),this.children.length=0,(t=this.eventsHandler)==null||t.destroy(),(e=this.renderer)==null||e.destroy(),(n=this.textureLoader)==null||n.destroy(),(i=this.dataHelper)==null||i.destroy(),(s=this.adapter)==null||s.destroy(),(r=this.dynamics)==null||r.destroy(),this.parent.removeChild(this.container),delete this.parent[Js]}init(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&this.navbar.show(),this.config.keyboard==="always"&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new Lo)}resetIdleTimer(){this.state.idleTime=performance.now()}disableIdleTimer(){this.state.idleTime=-1}getPlugin(t){if(typeof t=="string")return this.plugins[t];{const e=of(t);return e?this.plugins[e.id]:null}}getPosition(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}getZoomLevel(){return this.dynamics.zoom.current}getSize(){return{...this.state.size}}isFullscreenEnabled(){return Oy(this.parent,Dn.isIphone)}needsUpdate(){this.state.needsUpdate=!0}needsContinuousUpdate(t){t?this.state.continuousUpdateCount++:this.state.continuousUpdateCount>0&&this.state.continuousUpdateCount--}autoSize(){(this.container.clientWidth!==this.state.size.width||this.container.clientHeight!==this.state.size.height)&&(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new Io(this.getSize())),this.navbar.autoSize())}setPanorama(t,e={}){var r;this.textureLoader.abortLoading(),(r=this.state.transitionAnimation)==null||r.cancel();const n=this.dataHelper.getTransitionOptions(e);e.showLoader===void 0&&(e.showLoader=!0),e.caption===void 0&&(e.caption=this.config.caption),e.description===void 0&&(e.description=this.config.description),!e.panoData&&typeof this.config.panoData=="function"&&(e.panoData=this.config.panoData),this.hideError(),this.resetIdleTimer(),this.config.panorama=t,this.config.caption=e.caption,this.config.description=e.description,this.config.sphereCorrection=e.sphereCorrection;const i=a=>{if(Vy(a))return!1;if(this.loader.hide(),this.state.loadingPromise=null,a)throw this.navbar.setCaption(null),this.showError(this.config.lang.loadError),console.error(a),this.dispatchEvent(new F_(t,a)),a;return this.navbar.setCaption(this.config.caption),!0};this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`),(e.showLoader||!this.state.ready)&&this.loader.show(),this.dispatchEvent(new I_(t));const s=this.adapter.loadTexture(this.config.panorama,!0,e.panoData).then(a=>{if(a.panorama!==this.config.panorama)throw this.adapter.disposeTexture(a),tf();const o=this.dataHelper.cleanPanoramaOptions(e,a.panoData);return(!pn(o.zoom)||!pn(o.position))&&this.stopAll(),{textureData:a,cleanOptions:o}});return!n||!this.state.ready||!this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=s.then(({textureData:a,cleanOptions:o})=>{this.renderer.show(),this.renderer.setTexture(a),this.renderer.setPanoramaPose(a.panoData),this.renderer.setSphereCorrection(e.sphereCorrection),this.state.ready||this.init(),this.dispatchEvent(new ya(a)),pn(o.zoom)||this.zoom(o.zoom),pn(o.position)||this.rotate(o.position)}).then(()=>i(),a=>i(a)):this.state.loadingPromise=s.then(({textureData:a,cleanOptions:o})=>(this.loader.hide(),this.dispatchEvent(new ya(a)),this.state.transitionAnimation=this.renderer.transition(a,o,n),this.state.transitionAnimation)).then(a=>{if(this.state.transitionAnimation=null,this.dispatchEvent(new B_(a)),!a)throw tf()}).then(()=>i(),a=>i(a)),this.state.loadingPromise}setOptions(t){const e={...this.config,...t};for(let[n,i]of Object.entries(t)){if(!(n in gs)){_n(`Unknown option ${n}`);continue}if(n in av){_n(av[n]);continue}switch(n in lf&&(i=lf[n](i,{rawConfig:e,defValue:gs[n]})),this.config[n]=i,n){case"mousemove":this.state.cursorOverride||this.setCursor(null);break;case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new us(this.getZoomLevel()));break;case"keyboard":this.config.keyboard==="always"?this.startKeyboardControl():this.stopKeyboardControl();break}}this.needsUpdate(),this.dispatchEvent(new $n(Object.keys(t)))}setOption(t,e){this.setOptions({[t]:e})}showError(t){this.overlay.show({id:yn.ERROR,image:WI,title:t,dismissible:!1})}hideError(){this.overlay.hide(yn.ERROR)}rotate(t){const e=new s_(this.dataHelper.cleanPosition(t));this.dispatchEvent(e),!e.defaultPrevented&&this.dynamics.position.setValue(e.position)}zoom(t){this.dynamics.zoom.setValue(t)}zoomIn(t=1){this.dynamics.zoom.step(t)}zoomOut(t=1){this.dynamics.zoom.step(-t)}animate(t){const e=sp(t),n=!pn(t.zoom),i=new op(e?this.dataHelper.cleanPosition(t):void 0,t.zoom);if(this.dispatchEvent(i),i.defaultPrevented)return;this.stopAll();const{duration:s,properties:r}=this.dataHelper.getAnimationProperties(t.speed,i.position,i.zoomLevel);return s?(this.state.animation=new Kc({properties:r,duration:s,easing:t.easing||"inOutSine",onTick:a=>{e&&this.dynamics.position.setValue({yaw:a.yaw,pitch:a.pitch}),n&&this.dynamics.zoom.setValue(a.zoom)}}),this.state.animation.then(()=>{this.state.animation=null,this.resetIdleTimer()}),this.state.animation):(e&&this.rotate(i.position),n&&this.zoom(i.zoomLevel),new Kc(null))}stopAnimation(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}resize(t){this.__setSize(t),this.autoSize()}__setSize(t){["width","height"].forEach(e=>{t!=null&&t[e]&&(/^[0-9.]+$/.test(t[e])&&(t[e]+="px"),this.parent.style[e]=t[e])})}enterFullscreen(){this.isFullscreenEnabled()||ky(this.parent,Dn.isIphone)}exitFullscreen(){this.isFullscreenEnabled()&&Ny(Dn.isIphone)}toggleFullscreen(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}startKeyboardControl(){this.state.keyboardEnabled=!0}stopKeyboardControl(){this.state.keyboardEnabled=!1}createTooltip(t){return new GI(this,t)}setCursor(t){this.state.cursorOverride=t,t?this.container.style.cursor=t:this.container.style.cursor=this.config.mousemove?"move":"default"}observeObjects(t){this.state.objectsObservers[t]||(this.state.objectsObservers[t]=null)}unobserveObjects(t){delete this.state.objectsObservers[t]}stopAll(){return this.dispatchEvent(new Do),this.disableIdleTimer(),this.stopAnimation()}};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ib="178",uc=2e3,cv=2001,Mn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let uv=1234567;const Db=Math.PI/180,Ob=180/Math.PI;function iD(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Mn[t&255]+Mn[t>>8&255]+Mn[t>>16&255]+Mn[t>>24&255]+"-"+Mn[e&255]+Mn[e>>8&255]+"-"+Mn[e>>16&15|64]+Mn[e>>24&255]+"-"+Mn[n&63|128]+Mn[n>>8&255]+"-"+Mn[n>>16&255]+Mn[n>>24&255]+Mn[i&255]+Mn[i>>8&255]+Mn[i>>16&255]+Mn[i>>24&255]).toLowerCase()}function hn(t,e,n){return Math.max(e,Math.min(n,t))}function kb(t,e){return(t%e+e)%e}function sD(t,e,n,i,s){return i+(t-e)*(s-i)/(n-e)}function rD(t,e,n){return t!==e?(n-t)/(e-t):0}function Nb(t,e,n){return(1-n)*t+n*e}function aD(t,e,n,i){return Nb(t,e,1-Math.exp(-n*i))}function oD(t,e=1){return e-Math.abs(kb(t,e*2)-e)}function lD(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function cD(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function uD(t,e){return t+Math.floor(Math.random()*(e-t+1))}function dD(t,e){return t+Math.random()*(e-t)}function hD(t){return t*(.5-Math.random())}function fD(t){t!==void 0&&(uv=t);let e=uv+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function pD(t){return t*Db}function mD(t){return t*Ob}function gD(t){return(t&t-1)===0&&t!==0}function vD(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function yD(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function _D(t,e,n,i,s){const r=Math.cos,a=Math.sin,o=r(n/2),l=a(n/2),c=r((e+i)/2),u=a((e+i)/2),d=r((e-i)/2),h=a((e-i)/2),p=r((i-e)/2),f=a((i-e)/2);switch(s){case"XYX":t.set(o*u,l*d,l*h,o*c);break;case"YZY":t.set(l*h,o*u,l*d,o*c);break;case"ZXZ":t.set(l*d,l*h,o*u,o*c);break;case"XZX":t.set(o*u,l*f,l*p,o*c);break;case"YXY":t.set(l*p,o*u,l*f,o*c);break;case"ZYZ":t.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function bD(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ED(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const uf={DEG2RAD:Db,RAD2DEG:Ob,generateUUID:iD,clamp:hn,euclideanModulo:kb,mapLinear:sD,inverseLerp:rD,lerp:Nb,damp:aD,pingpong:oD,smoothstep:lD,smootherstep:cD,randInt:uD,randFloat:dD,randFloatSpread:hD,seededRandom:fD,degToRad:pD,radToDeg:mD,isPowerOfTwo:gD,ceilPowerOfTwo:vD,floorPowerOfTwo:yD,setQuaternionFromProperEuler:_D,normalize:ED,denormalize:bD};class Pr{constructor(e=0,n=0){Pr.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=hn(this.x,e.x,n.x),this.y=hn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=hn(this.x,e,n),this.y=hn(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(hn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*s+e.x,this.y=r*s+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wD{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerpFlat(e,n,i,s,r,a,o){let l=i[s+0],c=i[s+1],u=i[s+2],d=i[s+3];const h=r[a+0],p=r[a+1],f=r[a+2],m=r[a+3];if(o===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(o===1){e[n+0]=h,e[n+1]=p,e[n+2]=f,e[n+3]=m;return}if(d!==m||l!==h||c!==p||u!==f){let v=1-o;const g=l*h+c*p+u*f+d*m,_=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const T=Math.sqrt(b),x=Math.atan2(T,g*_);v=Math.sin(v*x)/T,o=Math.sin(o*x)/T}const y=o*_;if(l=l*v+h*y,c=c*v+p*y,u=u*v+f*y,d=d*v+m*y,v===1-o){const T=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=T,c*=T,u*=T,d*=T}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,s,r,a){const o=i[s],l=i[s+1],c=i[s+2],u=i[s+3],d=r[a],h=r[a+1],p=r[a+2],f=r[a+3];return e[n]=o*f+u*d+l*p-c*h,e[n+1]=l*f+u*h+c*d-o*p,e[n+2]=c*f+u*p+o*h-l*d,e[n+3]=u*f-o*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(s/2),d=o(r/2),h=l(i/2),p=l(s/2),f=l(r/2);switch(a){case"XYZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"YXZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"ZXY":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"ZYX":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"YZX":this._x=h*u*d+c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d-h*p*f;break;case"XZY":this._x=h*u*d-c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],r=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=i+o+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(r-c)*p,this._z=(a-s)*p}else if(i>o&&i>d){const p=2*Math.sqrt(1+i-o-d);this._w=(u-l)/p,this._x=.25*p,this._y=(s+a)/p,this._z=(r+c)/p}else if(o>d){const p=2*Math.sqrt(1+o-i-d);this._w=(r-c)/p,this._x=(s+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-o);this._w=(a-s)/p,this._x=(r+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,r=e._z,a=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+a*o+s*c-r*l,this._y=s*u+a*l+r*o-i*c,this._z=r*u+a*c+i*l-s*o,this._w=a*u-i*o-s*l-r*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+i*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-n;return this._w=p*a+n*this._w,this._x=p*i+n*this._x,this._y=p*s+n*this._y,this._z=p*r+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*d+this._w*h,this._x=i*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(n),r*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class In{constructor(e=0,n=0,i=0){In.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(dv.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(dv.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6]*s,this.y=r[1]*n+r[4]*i+r[7]*s,this.z=r[2]*n+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=e.elements,a=1/(r[3]*n+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*s+r[12])*a,this.y=(r[1]*n+r[5]*i+r[9]*s+r[13])*a,this.z=(r[2]*n+r[6]*i+r[10]*s+r[14])*a,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*s-o*i),u=2*(o*n-r*s),d=2*(r*i-a*n);return this.x=n+l*c+a*d-o*u,this.y=i+l*u+o*c-r*d,this.z=s+l*d+r*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[4]*i+r[8]*s,this.y=r[1]*n+r[5]*i+r[9]*s,this.z=r[2]*n+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=hn(this.x,e.x,n.x),this.y=hn(this.y,e.y,n.y),this.z=hn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=hn(this.x,e,n),this.y=hn(this.y,e,n),this.z=hn(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(hn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,r=e.z,a=n.x,o=n.y,l=n.z;return this.x=s*l-r*o,this.y=r*a-i*l,this.z=i*o-s*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ud.copy(this).projectOnVector(e),this.sub(Ud)}reflect(e){return this.sub(Ud.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ud=new In,dv=new wD;class Yo{constructor(e,n,i,s,r,a,o,l,c,u,d,h,p,f,m,v){Yo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,s,r,a,o,l,c,u,d,h,p,f,m,v)}set(e,n,i,s,r,a,o,l,c,u,d,h,p,f,m,v){const g=this.elements;return g[0]=e,g[4]=n,g[8]=i,g[12]=s,g[1]=r,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=p,g[7]=f,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yo().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/ea.setFromMatrixColumn(e,0).length(),r=1/ea.setFromMatrixColumn(e,1).length(),a=1/ea.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,s=e.y,r=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=a*u,p=a*d,f=o*u,m=o*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=p+f*c,n[5]=h-m*c,n[9]=-o*l,n[2]=m-h*c,n[6]=f+p*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,f=c*u,m=c*d;n[0]=h+m*o,n[4]=f*o-p,n[8]=a*c,n[1]=a*d,n[5]=a*u,n[9]=-o,n[2]=p*o-f,n[6]=m+h*o,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,f=c*u,m=c*d;n[0]=h-m*o,n[4]=-a*d,n[8]=f+p*o,n[1]=p+f*o,n[5]=a*u,n[9]=m-h*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,p=a*d,f=o*u,m=o*d;n[0]=l*u,n[4]=f*c-p,n[8]=h*c+m,n[1]=l*d,n[5]=m*c+h,n[9]=p*c-f,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,p=a*c,f=o*l,m=o*c;n[0]=l*u,n[4]=m-h*d,n[8]=f*d+p,n[1]=d,n[5]=a*u,n[9]=-o*u,n[2]=-c*u,n[6]=p*d+f,n[10]=h-m*d}else if(e.order==="XZY"){const h=a*l,p=a*c,f=o*l,m=o*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=h*d+m,n[5]=a*u,n[9]=p*d-f,n[2]=f*d-p,n[6]=o*u,n[10]=m*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xD,e,SD)}lookAt(e,n,i){const s=this.elements;return Xn.subVectors(e,n),Xn.lengthSq()===0&&(Xn.z=1),Xn.normalize(),Ps.crossVectors(i,Xn),Ps.lengthSq()===0&&(Math.abs(i.z)===1?Xn.x+=1e-4:Xn.z+=1e-4,Xn.normalize(),Ps.crossVectors(i,Xn)),Ps.normalize(),dc.crossVectors(Xn,Ps),s[0]=Ps.x,s[4]=dc.x,s[8]=Xn.x,s[1]=Ps.y,s[5]=dc.y,s[9]=Xn.y,s[2]=Ps.z,s[6]=dc.z,s[10]=Xn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],f=i[2],m=i[6],v=i[10],g=i[14],_=i[3],b=i[7],y=i[11],T=i[15],x=s[0],S=s[4],M=s[8],w=s[12],E=s[1],C=s[5],P=s[9],A=s[13],R=s[2],N=s[6],U=s[10],k=s[14],D=s[3],W=s[7],O=s[11],B=s[15];return r[0]=a*x+o*E+l*R+c*D,r[4]=a*S+o*C+l*N+c*W,r[8]=a*M+o*P+l*U+c*O,r[12]=a*w+o*A+l*k+c*B,r[1]=u*x+d*E+h*R+p*D,r[5]=u*S+d*C+h*N+p*W,r[9]=u*M+d*P+h*U+p*O,r[13]=u*w+d*A+h*k+p*B,r[2]=f*x+m*E+v*R+g*D,r[6]=f*S+m*C+v*N+g*W,r[10]=f*M+m*P+v*U+g*O,r[14]=f*w+m*A+v*k+g*B,r[3]=_*x+b*E+y*R+T*D,r[7]=_*S+b*C+y*N+T*W,r[11]=_*M+b*P+y*U+T*O,r[15]=_*w+b*A+y*k+T*B,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],f=e[3],m=e[7],v=e[11],g=e[15];return f*(+r*l*d-s*c*d-r*o*h+i*c*h+s*o*p-i*l*p)+m*(+n*l*p-n*c*h+r*a*h-s*a*p+s*c*u-r*l*u)+v*(+n*c*d-n*o*p-r*a*d+i*a*p+r*o*u-i*c*u)+g*(-s*o*u-n*l*d+n*o*h+s*a*d-i*a*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],v=e[14],g=e[15],_=d*v*c-m*h*c+m*l*p-o*v*p-d*l*g+o*h*g,b=f*h*c-u*v*c-f*l*p+a*v*p+u*l*g-a*h*g,y=u*m*c-f*d*c+f*o*p-a*m*p-u*o*g+a*d*g,T=f*d*l-u*m*l-f*o*h+a*m*h+u*o*v-a*d*v,x=n*_+i*b+s*y+r*T;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=_*S,e[1]=(m*h*r-d*v*r-m*s*p+i*v*p+d*s*g-i*h*g)*S,e[2]=(o*v*r-m*l*r+m*s*c-i*v*c-o*s*g+i*l*g)*S,e[3]=(d*l*r-o*h*r-d*s*c+i*h*c+o*s*p-i*l*p)*S,e[4]=b*S,e[5]=(u*v*r-f*h*r+f*s*p-n*v*p-u*s*g+n*h*g)*S,e[6]=(f*l*r-a*v*r-f*s*c+n*v*c+a*s*g-n*l*g)*S,e[7]=(a*h*r-u*l*r+u*s*c-n*h*c-a*s*p+n*l*p)*S,e[8]=y*S,e[9]=(f*d*r-u*m*r-f*i*p+n*m*p+u*i*g-n*d*g)*S,e[10]=(a*m*r-f*o*r+f*i*c-n*m*c-a*i*g+n*o*g)*S,e[11]=(u*o*r-a*d*r-u*i*c+n*d*c+a*i*p-n*o*p)*S,e[12]=T*S,e[13]=(u*m*s-f*d*s+f*i*h-n*m*h-u*i*v+n*d*v)*S,e[14]=(f*o*s-a*m*s-f*i*l+n*m*l+a*i*v-n*o*v)*S,e[15]=(a*d*s-u*o*s+u*i*l-n*d*l-a*i*h+n*o*h)*S,this}scale(e){const n=this.elements,i=e.x,s=e.y,r=e.z;return n[0]*=i,n[4]*=s,n[8]*=r,n[1]*=i,n[5]*=s,n[9]*=r,n[2]*=i,n[6]*=s,n[10]*=r,n[3]*=i,n[7]*=s,n[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),r=1-i,a=e.x,o=e.y,l=e.z,c=r*a,u=r*o;return this.set(c*a+i,c*o-s*l,c*l+s*o,0,c*o+s*l,u*o+i,u*l-s*a,0,c*l-s*o,u*l+s*a,r*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,r,a){return this.set(1,i,r,0,e,1,a,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,r=n._x,a=n._y,o=n._z,l=n._w,c=r+r,u=a+a,d=o+o,h=r*c,p=r*u,f=r*d,m=a*u,v=a*d,g=o*d,_=l*c,b=l*u,y=l*d,T=i.x,x=i.y,S=i.z;return s[0]=(1-(m+g))*T,s[1]=(p+y)*T,s[2]=(f-b)*T,s[3]=0,s[4]=(p-y)*x,s[5]=(1-(h+g))*x,s[6]=(v+_)*x,s[7]=0,s[8]=(f+b)*S,s[9]=(v-_)*S,s[10]=(1-(h+m))*S,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let r=ea.set(s[0],s[1],s[2]).length();const a=ea.set(s[4],s[5],s[6]).length(),o=ea.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],bi.copy(this);const c=1/r,u=1/a,d=1/o;return bi.elements[0]*=c,bi.elements[1]*=c,bi.elements[2]*=c,bi.elements[4]*=u,bi.elements[5]*=u,bi.elements[6]*=u,bi.elements[8]*=d,bi.elements[9]*=d,bi.elements[10]*=d,n.setFromRotationMatrix(bi),i.x=r,i.y=a,i.z=o,this}makePerspective(e,n,i,s,r,a,o=uc){const l=this.elements,c=2*r/(n-e),u=2*r/(i-s),d=(n+e)/(n-e),h=(i+s)/(i-s);let p,f;if(o===uc)p=-(a+r)/(a-r),f=-2*a*r/(a-r);else if(o===cv)p=-a/(a-r),f=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,s,r,a,o=uc){const l=this.elements,c=1/(n-e),u=1/(i-s),d=1/(a-r),h=(n+e)*c,p=(i+s)*u;let f,m;if(o===uc)f=(a+r)*d,m=-2*d;else if(o===cv)f=r*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=m,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const ea=new In,bi=new Yo,xD=new In(0,0,0),SD=new In(1,1,1),Ps=new In,dc=new In,Xn=new In;class TD{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,s=this.getPoint(0),r=0;n.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),r+=i.distanceTo(s),n.push(r),s=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let s=0;const r=i.length;let a;n?a=n:a=e*i[r-1];let o=0,l=r-1,c;for(;o<=l;)if(s=Math.floor(o+(l-o)/2),c=i[s]-a,c<0)o=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,i[s]===a)return s/(r-1);const u=i[s],h=i[s+1]-u,p=(a-u)/h;return(s+p)/(r-1)}getTangent(e,n){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),l=n||(a.isVector2?new Pr:new In);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new In,s=[],r=[],a=[],o=new In,l=new Yo;for(let p=0;p<=e;p++){const f=p/e;s[p]=this.getTangentAt(f,new In)}r[0]=new In,a[0]=new In;let c=Number.MAX_VALUE;const u=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),o.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let p=1;p<=e;p++){if(r[p]=r[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(s[p-1],s[p]),o.length()>Number.EPSILON){o.normalize();const f=Math.acos(hn(s[p-1].dot(s[p]),-1,1));r[p].applyMatrix4(l.makeRotationAxis(o,f))}a[p].crossVectors(s[p],r[p])}if(n===!0){let p=Math.acos(hn(r[0].dot(r[e]),-1,1));p/=e,s[0].dot(o.crossVectors(r[0],r[e]))>0&&(p=-p);for(let f=1;f<=e;f++)r[f].applyMatrix4(l.makeRotationAxis(s[f],p*f)),a[f].crossVectors(s[f],r[f])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function hv(t,e,n,i,s){const r=(i-e)*.5,a=(s-n)*.5,o=t*t,l=t*o;return(2*n-2*i+r+a)*l+(-3*n+3*i-2*r-a)*o+r*t+n}class MD extends TD{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Pr){const i=n,s=this.points,r=(s.length-1)*e,a=Math.floor(r),o=r-a,l=s[a===0?a:a-1],c=s[a],u=s[a>s.length-2?s.length-1:a+1],d=s[a>s.length-3?s.length-1:a+2];return i.set(hv(o,l.x,c.x,u.x,d.x),hv(o,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const s=this.points[n];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const s=e.points[n];this.points.push(new Pr().fromArray(s))}return this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ib}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ib);/*!
 * Photo Sphere Viewer / Autorotate Plugin 5.13.3
 * @copyright 2015-2025 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var AD=Object.defineProperty,CD=(t,e)=>{for(var n in e)AD(t,n,{get:e[n],enumerable:!0})},PD={};CD(PD,{AutorotateEvent:()=>_a});var Fb=class Ub extends Eu{constructor(e){super(Ub.type),this.autorotateEnabled=e}};Fb.type="autorotate";var _a=Fb,LD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>
`,RD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z"/><path d="M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>
`,fp=class extends On{constructor(t){var e;super(t,{className:"psv-autorotate-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:RD,iconActive:LD}),this.plugin=this.viewer.getPlugin("autorotate"),(e=this.plugin)==null||e.addEventListener(_a.type,this)}destroy(){var t;(t=this.plugin)==null||t.removeEventListener(_a.type,this),super.destroy()}isSupported(){return!!this.plugin}handleEvent(t){t instanceof _a&&this.toggleActive(t.autorotateEnabled)}onClick(){this.plugin.isEnabled()&&this.plugin.disableOnIdle(),this.plugin.toggle()}};fp.id="autorotate";var ID=Ot.getConfigParser({autostartDelay:2e3,autostartOnIdle:!0,autorotateSpeed:Ot.parseSpeed("2rpm"),autorotatePitch:null,autorotateZoomLvl:null,keypoints:null,startFromClosest:!0},{autostartOnIdle:(t,{rawConfig:e})=>t&&Ot.isNil(e.autostartDelay)?(Ot.logWarn("autostartOnIdle requires a non null autostartDelay"),!1):t,autorotateSpeed:t=>Ot.parseSpeed(t),autorotatePitch:t=>Ot.isNil(t)?null:Ot.parseAngle(t,!0),autorotateZoomLvl:t=>Ot.isNil(t)?null:uf.clamp(t,0,100)}),zd=16;function uo(t){return[t.yaw,t.pitch]}var ml=class extends dp{constructor(t,e){super(t,e),this.state={initialStart:!0,disableOnIdle:!1,enabled:!1,idx:-1,curve:[],startStep:null,endStep:null,startTime:null,stepDuration:null,remainingPause:null,lastTime:null,tooltip:null},this.state.initialStart=!Ot.isNil(this.config.autostartDelay)}init(){super.init(),this.video=this.viewer.getPlugin("video"),this.markers=this.viewer.getPlugin("markers"),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),this.viewer.addEventListener(Kt.StopAllEvent.type,this),this.viewer.addEventListener(Kt.BeforeRenderEvent.type,this),this.video||this.viewer.addEventListener(Kt.KeypressEvent.type,this)}destroy(){this.viewer.removeEventListener(Kt.StopAllEvent.type,this),this.viewer.removeEventListener(Kt.BeforeRenderEvent.type,this),this.viewer.removeEventListener(Kt.KeypressEvent.type,this),delete this.video,delete this.markers,delete this.keypoints,super.destroy()}handleEvent(t){switch(t.type){case Kt.StopAllEvent.type:this.stop();break;case Kt.BeforeRenderEvent.type:{this.__beforeRender(t.timestamp);break}case Kt.KeypressEvent.type:this.__onKeyPress(t.originalEvent);break}}setKeypoints(t){if(!t)this.keypoints=null;else{if(t.length<2)throw new mt("At least two points are required");this.keypoints=t.map((e,n)=>{const i={position:null,markerId:null,pause:0,tooltip:null};let s;if(typeof e=="string"?i.markerId=e:Ot.isExtendedPosition(e)?s=e:(i.markerId=e.markerId,i.pause=e.pause,s=e.position,e.tooltip&&typeof e.tooltip=="object"?i.tooltip=e.tooltip:typeof e.tooltip=="string"&&(i.tooltip={content:e.tooltip})),i.markerId){if(!this.markers)throw new mt(`Keypoint #${n} references a marker but the markers plugin is not loaded`);const r=this.markers.getMarker(i.markerId);i.position=uo(r.state.position)}else if(s)i.position=uo(this.viewer.dataHelper.cleanPosition(s));else throw new mt(`Keypoint #${n} is missing marker or position`);return i})}this.isEnabled()&&(this.stop(),this.start())}isEnabled(){return this.state.enabled}start(){this.isEnabled()||(this.viewer.stopAll(),this.keypoints?this.config.startFromClosest&&this.__shiftKeypoints():this.__animate(),this.state.initialStart=!1,this.state.disableOnIdle=!1,this.state.enabled=!0,this.dispatchEvent(new _a(!0)))}stop(){this.isEnabled()&&(this.__hideTooltip(),this.__reset(),this.viewer.stopAnimation(),this.viewer.dynamics.position.stop(),this.viewer.dynamics.zoom.stop(),this.state.enabled=!1,this.dispatchEvent(new _a(!1)))}toggle(){this.isEnabled()?this.stop():this.start()}reverse(){this.isEnabled()&&!this.keypoints&&(this.config.autorotateSpeed=-this.config.autorotateSpeed,this.__animate())}disableOnIdle(){this.state.disableOnIdle=!0}__animate(){let t;Ot.isNil(this.config.autorotateZoomLvl)?t=Promise.resolve(!0):t=this.viewer.animate({zoom:this.config.autorotateZoomLvl,speed:`${this.viewer.config.zoomSpeed*2}rpm`}),t.then(e=>{e&&(this.viewer.dynamics.position.roll({yaw:this.config.autorotateSpeed<0},Math.abs(this.config.autorotateSpeed/this.viewer.config.moveSpeed)),Ot.isNil(this.config.autorotatePitch)||this.viewer.dynamics.position.goto({pitch:this.config.autorotatePitch},Math.abs(this.config.autorotateSpeed/this.viewer.config.moveSpeed)))})}__reset(){this.state.idx=-1,this.state.curve=[],this.state.startStep=null,this.state.endStep=null,this.state.startTime=null,this.state.stepDuration=null,this.state.remainingPause=null,this.state.lastTime=null,this.state.tooltip=null}__beforeRender(t){(this.state.initialStart||this.config.autostartOnIdle&&!this.state.disableOnIdle)&&this.viewer.state.idleTime>0&&t-this.viewer.state.idleTime>this.config.autostartDelay&&this.start(),this.isEnabled()&&this.keypoints&&(this.state.startTime||(this.state.endStep=uo(this.viewer.getPosition()),this.__nextStep(),this.state.startTime=t,this.state.lastTime=t),this.__nextFrame(t))}__shiftKeypoints(){const t=uo(this.viewer.getPosition()),e=this.__findMinIndex(this.keypoints,n=>Ot.greatArcDistance(n.position,t));this.keypoints.push(...this.keypoints.splice(0,e))}__incrementIdx(){this.state.idx++,this.state.idx===this.keypoints.length&&(this.state.idx=0)}__showTooltip(){const t=this.keypoints[this.state.idx];if(t.tooltip){const e=this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);this.state.tooltip=this.viewer.createTooltip({content:t.tooltip.content,position:t.tooltip.position,top:e.y,left:e.x})}else if(t.markerId){const e=this.markers.getMarker(t.markerId);e.showTooltip(),this.state.tooltip=e.tooltip}}__hideTooltip(){if(this.state.tooltip){const t=this.keypoints[this.state.idx];t.tooltip?this.state.tooltip.hide():t.markerId&&this.markers.getMarker(t.markerId).hideTooltip(),this.state.tooltip=null}}__nextPoint(){const t=[];if(this.state.idx===-1){const s=uo(this.viewer.getPosition());t.push(s,s,this.keypoints[0].position,this.keypoints[1].position)}else for(let s=-1;s<3;s++){const r=this.state.idx+s<0?this.keypoints[this.keypoints.length-1]:this.keypoints[(this.state.idx+s)%this.keypoints.length];t.push(r.position)}const e=[new Pr(t[0][0],t[0][1])];let n=0;for(let s=1;s<=3;s++){const r=t[s-1][0]-t[s][0];r>Math.PI?n+=1:r<-Math.PI&&(n-=1),n!==0&&s===1&&(e[0].x-=n*2*Math.PI,n=0),e.push(new Pr(t[s][0]+n*2*Math.PI,t[s][1]))}const i=new MD(e).getPoints(zd*3).map(s=>[s.x,s.y]);this.state.curve=i.slice(zd+1,zd*2+1),this.state.idx!==-1?(this.state.remainingPause=this.keypoints[this.state.idx].pause,this.state.remainingPause?this.__showTooltip():this.__incrementIdx()):this.__incrementIdx()}__nextStep(){this.state.curve.length===0&&(this.__nextPoint(),this.state.endStep[0]=Ot.parseAngle(this.state.endStep[0])),this.state.startStep=this.state.endStep,this.state.endStep=this.state.curve.shift();const t=Ot.greatArcDistance(this.state.startStep,this.state.endStep);this.state.stepDuration=t*1e3/Math.abs(this.config.autorotateSpeed),t===0&&this.__nextStep()}__nextFrame(t){const e=t-this.state.lastTime;if(this.state.lastTime=t,this.state.remainingPause){if(this.state.remainingPause=Math.max(0,this.state.remainingPause-e),this.state.remainingPause>0)return;this.__hideTooltip(),this.__incrementIdx(),this.state.startTime=t}let n=(t-this.state.startTime)/this.state.stepDuration;n>=1&&(this.__nextStep(),n=0,this.state.startTime=t),this.viewer.rotate({yaw:this.state.startStep[0]+(this.state.endStep[0]-this.state.startStep[0])*n,pitch:this.state.startStep[1]+(this.state.endStep[1]-this.state.startStep[1])*n})}__findMinIndex(t,e){let n=0,i=Number.MAX_VALUE;return t.forEach((s,r)=>{const a=e(s);a<i&&(i=a,n=r)}),n}__onKeyPress(t){this.viewer.state.keyboardEnabled&&t.key===la.KEY_CODES.Space&&!t.ctrlKey&&!t.altKey&&!t.shiftKey&&!t.metaKey&&(this.toggle(),t.preventDefault())}};ml.id="autorotate";ml.VERSION="5.13.3";ml.configParser=ID;ml.readonlyOptions=["keypoints"];hp(fp,"start");gs.lang[fp.id]="Automatic rotation";/*!
 * Photo Sphere Viewer / Gallery Plugin 5.13.3
 * @copyright 2015-2025 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var DD=Object.defineProperty,OD=(t,e)=>{for(var n in e)DD(t,n,{get:e[n],enumerable:!0})},kD={};OD(kD,{HideGalleryEvent:()=>ko,ShowGalleryEvent:()=>Oo});var zb=class Bb extends Eu{constructor(e){super(Bb.type),this.fullscreen=e}};zb.type="show-gallery";var Oo=zb,Hb=class Vb extends Eu{constructor(){super(Vb.type)}};Hb.type="hide-gallery";var ko=Hb,ND='<svg viewBox="185 115 330 330" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z"/><!--Created by Wolf Bse from the Noun Project--></svg>',gl=class extends On{constructor(t){super(t,{className:"psv-gallery-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:ND}),this.plugin=this.viewer.getPlugin("gallery"),this.plugin&&(this.plugin.addEventListener(Oo.type,this),this.plugin.addEventListener(ko.type,this))}destroy(){this.plugin&&(this.plugin.removeEventListener(Oo.type,this),this.plugin.removeEventListener(ko.type,this)),super.destroy()}handleEvent(t){t instanceof Oo?this.toggleActive(!0):t instanceof ko&&this.toggleActive(!1)}isSupported(){return!!this.plugin}onClick(){this.plugin.toggle()}};gl.id="gallery";var $b="psvGalleryItem",Gb=Ot.dasherize($b),hc="psv-gallery-item--active",FD=(t,e)=>`
${t.map(n=>`
<div class="psv-gallery-item" 
     data-${Gb}="${n.id}"
     style="width:${e.width}px; aspect-ratio:${e.width/e.height};"
     tabindex="0">
    ${n.name?`<div class="psv-gallery-item-title"><span>${n.name}</span></div>`:""}
    <svg class="psv-gallery-item-thumb" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid slice"><use href="#psvGalleryBlankIcon"></use></svg>
    ${n.thumbnail?`<div class="psv-gallery-item-thumb" data-src="${n.thumbnail}"></div>`:""}
</div>
`).join("")}
`,fv=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="25 0 50 100"><polygon fill="currentColor" points="24.66 99.31 25.34 100 75.34 50 25.34 0 24.66 0.69 24.66 22.64 52.01 50 24.66 77.36 24.66 99.31"/><!-- Created by Rainbow Designs from the Noun Project --></svg>
`,UD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
  <defs>
    <symbol id="psvGalleryBlankIcon" viewBox="0 0 200 200">
      <rect x="0" y="0" width="200" height="200" fill="#666"/>
      <g transform="scale(0.25) translate(25 20) " fill="#eee">
        <path d="M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z"/>
        <path d="M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z"/>
        <path d="M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0"/>
      </g>
    </symbol>
  </defs>
</svg>`;function pv(t,e){let n;t.addEventListener("mousedown",()=>{e(),clearInterval(n),n=setInterval(()=>{t.style.pointerEvents==="none"?clearInterval(n):e()},500)}),t.addEventListener("mouseup",()=>{clearInterval(n)})}var zD=class extends nr{constructor(t,e){super(e,{className:`psv-gallery ${la.CAPTURE_EVENTS_CLASS}`}),this.plugin=t,this.state={visible:!0,mousedown:!1,initMouse:null,mouse:null,itemMargin:null,breakpoint:null,scrollLeft:0,scrollTop:0,isAboveBreakpoint:null},this.container.innerHTML=UD,this.container.querySelector("svg").style.display="none";const n=document.createElement("div");n.className="psv-panel-close-button",n.innerHTML=la.ICONS.close,this.container.appendChild(n),n.addEventListener("click",()=>this.plugin.hide()),this.items=document.createElement("div"),this.items.className="psv-gallery-container",this.container.appendChild(this.items),this.config.navigationArrows&&(this.arrowLeft=document.createElement("div"),this.arrowLeft.className="psv-gallery-arrow",this.arrowLeft.innerHTML=fv,this.container.appendChild(this.arrowLeft),this.arrowRight=document.createElement("div"),this.arrowRight.className="psv-gallery-arrow",this.arrowRight.innerHTML=fv,this.container.appendChild(this.arrowRight),pv(this.arrowLeft,()=>this.__scroll(-1)),pv(this.arrowRight,()=>this.__scroll(1))),this.state.itemMargin=parseInt(Ot.getStyleProperty(this.items,"padding-left"),10),this.state.breakpoint=parseInt(Ot.getStyleProperty(this.container,"--psv-gallery-breakpoint"),10),this.observer=new IntersectionObserver(i=>{i.forEach(s=>{if(s.intersectionRatio>0){const r=s.target;r.style.backgroundImage=`url("${r.dataset.src}")`,delete r.dataset.src,this.observer.unobserve(s.target)}})},{root:this.viewer.container}),this.viewer.addEventListener(Kt.SizeUpdatedEvent.type,this),this.container.addEventListener("transitionend",this),this.container.addEventListener("keydown",this),this.items.addEventListener("wheel",this),this.items.addEventListener("scroll",this),this.items.addEventListener("mousedown",this),this.items.addEventListener("mousemove",this),this.items.addEventListener("click",this),window.addEventListener("mouseup",this),this.hide()}get isAboveBreakpoint(){return this.items.offsetWidth>this.state.breakpoint}get config(){return this.plugin.config}destroy(){window.removeEventListener("mouseup",this),this.viewer.removeEventListener(Kt.SizeUpdatedEvent.type,this),this.observer.disconnect(),super.destroy()}handleEvent(t){switch(t.type){case"transitionend":this.isVisible()&&t.target===this.container&&this.__focusActiveOrFirst();break;case"keydown":if(this.isVisible())switch(t.key){case la.KEY_CODES.Escape:this.plugin.hide();break;case la.KEY_CODES.Enter:this.__click(t);break}break;case"wheel":{const e=t;this.__scroll(e.deltaY>0?1:-1),t.preventDefault();break}case"scroll":case Kt.SizeUpdatedEvent.type:this.__updateArrows();break;case"mousedown":this.state.mousedown=!0,this.isAboveBreakpoint?this.state.initMouse=t.clientX:this.state.initMouse=t.clientY,this.state.mouse=this.state.initMouse;break;case"mousemove":if(this.state.mousedown)if(this.isAboveBreakpoint){const e=this.state.mouse-t.clientX;this.items.scrollLeft+=e,this.state.scrollLeft=this.items.scrollLeft,this.state.mouse=t.clientX}else{const e=this.state.mouse-t.clientY;this.items.scrollTop+=e,this.state.scrollTop=this.items.scrollTop,this.state.mouse=t.clientY}break;case"mouseup":this.state.mousedown=!1,this.state.mouse=null,t.preventDefault();break;case"click":{const e=this.isAboveBreakpoint?t.clientX:t.clientY;Math.abs(this.state.initMouse-e)<10&&this.__click(t);break}}}show(){this.container.classList.add("psv-gallery--open"),this.state.visible=!0}hide(){this.container.classList.remove("psv-gallery--open"),this.state.visible=!1,Ot.hasParent(document.activeElement,this.container)&&this.viewer.navbar.focusButton(gl.id)}setItems(t){this.items.innerHTML=FD(t,this.plugin.config.thumbnailSize),this.observer&&(this.observer.disconnect(),this.items.querySelectorAll("[data-src]").forEach(e=>{this.observer.observe(e)})),this.__updateArrows()}setActive(t){const e=this.items.querySelector("."+hc);if(e==null||e.classList.remove(hc),t){const n=this.items.querySelector(`[data-${Gb}="${t}"]`);n&&(n.classList.add(hc),this.items.scrollLeft=n.offsetLeft+n.clientWidth/2-this.items.clientWidth/2)}}__click(t){const e=Ot.getMatchingTarget(t,".psv-gallery-item");if(!e)return;const n=e.dataset[$b];this.plugin.applyItem(n),this.setActive(n),(this.config.hideOnClick||!this.isAboveBreakpoint)&&this.hide()}__focusActiveOrFirst(){const t=this.items.querySelector("."+hc)??this.items.firstElementChild;t==null||t.focus()}__scroll(t){if(this.isAboveBreakpoint){const e=this.items.scrollWidth-this.items.offsetWidth,n=this.plugin.config.thumbnailSize.width+(this.state.itemMargin??0);this.state.scrollLeft=uf.clamp(this.state.scrollLeft+t*n,0,e),t===-1&&this.state.scrollLeft<n*.8&&(this.state.scrollLeft=0),t===1&&this.state.scrollLeft>e-n*.8&&(this.state.scrollLeft=e),this.items.scroll({left:this.state.scrollLeft,behavior:"smooth"})}else{const e=this.items.scrollHeight-this.items.offsetHeight,n=this.items.querySelector(":first-child").offsetHeight*2+(this.state.itemMargin??0);this.state.scrollTop=uf.clamp(this.state.scrollTop+t*n,0,e),t===-1&&this.state.scrollTop<n*.8&&(this.state.scrollTop=0),t===1&&this.state.scrollTop>e-n*.8&&(this.state.scrollTop=e),this.items.scroll({top:this.state.scrollTop,behavior:"smooth"})}}__updateArrows(){if(!this.config.navigationArrows)return;this.state.isAboveBreakpoint!==this.isAboveBreakpoint&&(Ot.toggleClass(this.arrowLeft,"psv-gallery-arrow--left",this.isAboveBreakpoint),Ot.toggleClass(this.arrowLeft,"psv-gallery-arrow--top",!this.isAboveBreakpoint),Ot.toggleClass(this.arrowRight,"psv-gallery-arrow--right",this.isAboveBreakpoint),Ot.toggleClass(this.arrowRight,"psv-gallery-arrow--bottom",!this.isAboveBreakpoint),this.state.isAboveBreakpoint=this.isAboveBreakpoint);const t=(e,n)=>{n?(e.style.opacity="1",e.style.pointerEvents="auto"):(e.style.opacity="0",e.style.pointerEvents="none")};if(this.isAboveBreakpoint){const e=this.items.scrollWidth-this.items.offsetWidth;t(this.arrowLeft,this.items.scrollLeft>50),t(this.arrowRight,this.items.scrollLeft<e-50)}else{const e=this.items.scrollHeight-this.items.offsetHeight;t(this.arrowLeft,this.items.scrollTop>50),t(this.arrowRight,this.items.scrollTop<e-50)}}},BD=Ot.getConfigParser({items:[],navigationArrows:!0,visibleOnLoad:!1,hideOnClick:!0,thumbnailSize:{width:200,height:100}}),Ia=class extends dp{constructor(t,e){super(t,e),this.items=[],this.gallery=new zD(this,this.viewer)}init(){super.init(),Ot.checkStylesheet(this.viewer.container,"gallery-plugin"),this.map=this.viewer.getPlugin("map"),this.plan=this.viewer.getPlugin("plan"),this.viewer.addEventListener(Kt.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(Kt.ShowPanelEvent.type,this),this.config.visibleOnLoad&&this.viewer.addEventListener(Kt.ReadyEvent.type,()=>{this.items.length&&this.show()},{once:!0}),this.setItems(this.config.items),delete this.config.items,setTimeout(()=>this.__updateButton())}destroy(){this.viewer.removeEventListener(Kt.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(Kt.ShowPanelEvent.type,this),this.gallery.destroy(),super.destroy()}setOptions(t){super.setOptions(t),t.thumbnailSize&&this.gallery.setItems(this.items)}handleEvent(t){if(t instanceof Kt.PanoramaLoadedEvent){const e=this.items.find(n=>Ot.deepEqual(n.panorama,t.data.panorama));this.currentId=e==null?void 0:e.id,this.gallery.setActive(this.currentId)}else t instanceof Kt.ShowPanelEvent&&this.gallery.isVisible()&&this.hide()}show(){var t,e;return(t=this.map)==null||t.minimize(),(e=this.plan)==null||e.minimize(),this.dispatchEvent(new Oo(!this.gallery.isAboveBreakpoint)),this.gallery.show()}hide(){return this.dispatchEvent(new ko),this.gallery.hide()}toggle(){this.gallery.isVisible()?this.hide():this.show()}isVisible(){return this.gallery.isVisible()}setItems(t,e){if(t?t.forEach((n,i)=>{if(!n.id)throw new mt(`Item ${i} has no "id".`);if(!n.panorama)throw new mt(`Item "${n.id}" has no "panorama".`)}):t=[],this.handler=e,this.items=t.map(n=>({...n,id:`${n.id}`})),this.gallery.setItems(this.items),this.currentId){const n=this.items.find(i=>i.id===this.currentId);this.currentId=n==null?void 0:n.id,this.gallery.setActive(this.currentId)}this.items.length||this.gallery.hide(),this.__updateButton()}applyItem(t){if(t!==this.currentId){if(this.handler)this.handler(t);else{const e=this.items.find(n=>n.id===t);this.viewer.setPanorama(e.panorama,{caption:e.name,...e.options})}this.currentId=t}}__updateButton(){var t;(t=this.viewer.navbar.getButton(gl.id,!1))==null||t.toggle(this.items.length>0)}};Ia.id="gallery";Ia.VERSION="5.13.3";Ia.configParser=BD;Ia.readonlyOptions=["items","navigationArrows","visibleOnLoad"];gs.lang[gl.id]="Gallery";hp(gl,"caption:left");document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".tour-viewer");t&&new nD({container:t,panorama:"img/3d-1.jpeg",touchmoveTwoFingers:!0,mousewheelCtrlKey:!0,loadingImg:"img/loader.gif",lang:{ctrlZoom:" ctrl +   scroll   zoom",twoFingers:"    ",loading:"..."},plugins:[[ml,{autostartDelay:1e3,autorotatePitch:"5deg"}],[Ia,{}]],navbar:["autorotate","zoom","move","gallery","fullscreen"]}).getPlugin(Ia).setItems([{id:"panoram-img-1",panorama:"img/3d-1.jpeg",thumbnail:"img/3d-1.jpeg",name:" 1"},{id:"panoram-img-2",panorama:"img/3d-2.jpeg",thumbnail:"img/3d-2.jpeg",name:" 2"}])});/*!
 * OverlayScrollbars
 * Version: 2.11.4
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const Yn=(t,e)=>{const{o:n,i,u:s}=t;let r=n,a;const o=(u,d)=>{const h=r,p=u,f=d||(i?!i(h,p):h!==p);return(f||s)&&(r=p,a=h),[r,f,a]};return[e?u=>o(e(r,a),u):o,u=>[r,!!u,a]]},HD=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,Hn=HD?window:{},Wb=Math.max,VD=Math.min,df=Math.round,Qc=Math.abs,mv=Math.sign,jb=Hn.cancelAnimationFrame,pp=Hn.requestAnimationFrame,mp=Hn.setTimeout,Xb=Hn.clearTimeout,Su=t=>typeof Hn[t]<"u"?Hn[t]:void 0,$D=Su("MutationObserver"),gv=Su("IntersectionObserver"),ua=Su("ResizeObserver"),yo=Su("ScrollTimeline"),gp=t=>t===void 0,Tu=t=>t===null,ds=t=>typeof t=="number",vl=t=>typeof t=="string",Mu=t=>typeof t=="boolean",Li=t=>typeof t=="function",Ci=t=>Array.isArray(t),Jc=t=>typeof t=="object"&&!Ci(t)&&!Tu(t),vp=t=>{const e=!!t&&t.length,n=ds(e)&&e>-1&&e%1==0;return Ci(t)||!Li(t)&&n?e>0&&Jc(t)?e-1 in t:!0:!1},eu=t=>!!t&&t.constructor===Object,tu=t=>t instanceof HTMLElement,Au=t=>t instanceof Element;function Nt(t,e){if(vp(t))for(let n=0;n<t.length&&e(t[n],n,t)!==!1;n++);else t&&Nt(Object.keys(t),n=>e(t[n],n,t));return t}const qb=(t,e)=>t.indexOf(e)>=0,Ko=(t,e)=>t.concat(e),$t=(t,e,n)=>(!vl(e)&&vp(e)?Array.prototype.push.apply(t,e):t.push(e),t),ir=t=>Array.from(t||[]),yp=t=>Ci(t)?t:!vl(t)&&vp(t)?ir(t):[t],nu=t=>!!t&&!t.length,hf=t=>ir(new Set(t)),ei=(t,e,n)=>{Nt(t,s=>s?s.apply(void 0,e||[]):!0),n||(t.length=0)},Yb="paddingTop",Kb="paddingRight",Zb="paddingLeft",Qb="paddingBottom",Jb="marginLeft",eE="marginRight",tE="marginBottom",_p="overflowX",bp="overflowY",Cu="width",Pu="height",rs="visible",xi="hidden",Da="scroll",GD=t=>{const e=String(t||"");return e?e[0].toUpperCase()+e.slice(1):""},Lu=(t,e,n,i)=>{if(t&&e){let s=!0;return Nt(n,r=>{const a=t[r],o=e[r];a!==o&&(s=!1)}),s}return!1},nE=(t,e)=>Lu(t,e,["w","h"]),Cc=(t,e)=>Lu(t,e,["x","y"]),WD=(t,e)=>Lu(t,e,["t","r","b","l"]),lt=(t,...e)=>t.bind(0,...e),da=t=>{let e;const n=t?mp:pp,i=t?Xb:jb;return[s=>{i(e),e=n(()=>s(),Li(t)?t():t)},()=>i(e)]},vv=t=>{const e=Li(t)?t():t;if(ds(e)){const n=e?mp:pp,i=e?Xb:jb;return s=>{const r=n(()=>s(),e);return()=>{i(r)}}}return e&&e._},iu=(t,e)=>{const{p:n,v:i,S:s,m:r}=e||{};let a,o,l,c,u;const d=function(v){o&&o(),a&&a(),u=o=a=l=void 0,t.apply(this,v)},h=m=>r&&l?r(l,m):m,p=()=>{o&&d(h(c)||c)},f=function(){const v=ir(arguments),g=vv(n);if(g){const _=vv(i),y=h(v)||v,T=d.bind(0,y);o&&o(),s&&!u?(T(),u=!0,o=g(()=>u=void 0)):(o=g(T),_&&!a&&(a=_(p))),l=c=y}else d(v)};return f.O=p,f},iE=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Pi=t=>t?Object.keys(t):[],Tt=(t,e,n,i,s,r,a)=>{const o=[e,n,i,s,r,a];return(typeof t!="object"||Tu(t))&&!Li(t)&&(t={}),Nt(o,l=>{Nt(l,(c,u)=>{const d=l[u];if(t===d)return!0;const h=Ci(d);if(d&&eu(d)){const p=t[u];let f=p;h&&!Ci(p)?f=[]:!h&&!eu(p)&&(f={}),t[u]=Tt(f,d)}else t[u]=h?d.slice():d})}),t},sE=(t,e)=>Nt(Tt({},t),(n,i,s)=>{n===void 0?delete s[i]:n&&eu(n)&&(s[i]=sE(n))}),Ep=t=>!Pi(t).length,Zo=()=>{},rE=(t,e,n)=>Wb(t,VD(e,n)),Tr=t=>hf((Ci(t)?t:(t||"").split(" ")).filter(e=>e)),wp=(t,e)=>t&&t.getAttribute(e),yv=(t,e)=>t&&t.hasAttribute(e),es=(t,e,n)=>{Nt(Tr(e),i=>{t&&t.setAttribute(i,String(n||""))})},Di=(t,e)=>{Nt(Tr(e),n=>t&&t.removeAttribute(n))},Ru=(t,e)=>{const n=Tr(wp(t,e)),i=lt(es,t,e),s=(r,a)=>{const o=new Set(n);return Nt(Tr(r),l=>{o[a](l)}),ir(o).join(" ")};return{$:r=>i(s(r,"delete")),C:r=>i(s(r,"add")),H:r=>{const a=Tr(r);return a.reduce((o,l)=>o&&n.includes(l),a.length>0)}}},aE=(t,e,n)=>(Ru(t,e).$(n),lt(xp,t,e,n)),xp=(t,e,n)=>(Ru(t,e).C(n),lt(aE,t,e,n)),su=(t,e,n,i)=>(i?xp:aE)(t,e,n),Sp=(t,e,n)=>Ru(t,e).H(n),oE=t=>Ru(t,"class"),lE=(t,e)=>{oE(t).$(e)},Tp=(t,e)=>(oE(t).C(e),lt(lE,t,e)),cE=(t,e)=>{const n=e?Au(e)&&e:document;return n?ir(n.querySelectorAll(t)):[]},jD=(t,e)=>{const n=e?Au(e)&&e:document;return n&&n.querySelector(t)},ff=(t,e)=>Au(t)&&t.matches(e),uE=t=>ff(t,"body"),pf=t=>t?ir(t.childNodes):[],Qo=t=>t&&t.parentElement,ha=(t,e)=>Au(t)&&t.closest(e),mf=t=>document.activeElement,XD=(t,e,n)=>{const i=ha(t,e),s=t&&jD(n,i),r=ha(s,e)===i;return i&&s?i===t||s===t||r&&ha(ha(t,n),e)!==i:!1},Oa=t=>{Nt(yp(t),e=>{const n=Qo(e);e&&n&&n.removeChild(e)})},Bn=(t,e)=>lt(Oa,t&&e&&Nt(yp(e),n=>{n&&t.appendChild(n)}));let dE;const qD=()=>dE,YD=t=>{dE=t},ba=t=>{const e=document.createElement("div");return es(e,"class",t),e},hE=t=>{const e=ba(),n=qD(),i=t.trim();return e.innerHTML=n?n.createHTML(i):i,Nt(pf(e),s=>Oa(s))},_v=(t,e)=>t.getPropertyValue(e)||t[e]||"",fE=t=>{const e=t||0;return isFinite(e)?e:0},fc=t=>fE(parseFloat(t||"")),gf=t=>Math.round(t*1e4)/1e4,pE=t=>`${gf(fE(t))}px`;function Jo(t,e){t&&e&&Nt(e,(n,i)=>{try{const s=t.style,r=Tu(n)||Mu(n)?"":ds(n)?pE(n):n;i.indexOf("--")===0?s.setProperty(i,r):s[i]=r}catch{}})}function Gi(t,e,n){const i=vl(e);let s=i?"":{};if(t){const r=Hn.getComputedStyle(t,n)||t.style;s=i?_v(r,e):ir(e).reduce((a,o)=>(a[o]=_v(r,o),a),s)}return s}const bv=(t,e,n)=>{const i=e?`${e}-`:"",s=n?`-${n}`:"",r=`${i}top${s}`,a=`${i}right${s}`,o=`${i}bottom${s}`,l=`${i}left${s}`,c=Gi(t,[r,a,o,l]);return{t:fc(c[r]),r:fc(c[a]),b:fc(c[o]),l:fc(c[l])}},Bd=(t,e)=>`translate${Jc(t)?`(${t.x},${t.y})`:`${e?"X":"Y"}(${t})`}`,KD=t=>!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),ZD={w:0,h:0},Iu=(t,e)=>e?{w:e[`${t}Width`],h:e[`${t}Height`]}:ZD,QD=t=>Iu("inner",t||Hn),Ea=lt(Iu,"offset"),mE=lt(Iu,"client"),ru=lt(Iu,"scroll"),Mp=t=>{const e=parseFloat(Gi(t,Cu))||0,n=parseFloat(Gi(t,Pu))||0;return{w:e-df(e),h:n-df(n)}},Hd=t=>t.getBoundingClientRect(),JD=t=>!!t&&KD(t),vf=t=>!!(t&&(t[Pu]||t[Cu])),gE=(t,e)=>{const n=vf(t);return!vf(e)&&n},Ev=(t,e,n,i)=>{Nt(Tr(e),s=>{t&&t.removeEventListener(s,n,i)})},Bt=(t,e,n,i)=>{var s;const r=(s=i&&i.T)!=null?s:!0,a=i&&i.I||!1,o=i&&i.A||!1,l={passive:r,capture:a};return lt(ei,Tr(e).map(c=>{const u=o?d=>{Ev(t,c,u,a),n&&n(d)}:n;return t&&t.addEventListener(c,u,l),lt(Ev,t,c,u,a)}))},vE=t=>t.stopPropagation(),yf=t=>t.preventDefault(),yE=t=>vE(t)||yf(t),Bi=(t,e)=>{const{x:n,y:i}=ds(e)?{x:e,y:e}:e||{};ds(n)&&(t.scrollLeft=n),ds(i)&&(t.scrollTop=i)},Zn=t=>({x:t.scrollLeft,y:t.scrollTop}),_E=()=>({D:{x:0,y:0},M:{x:0,y:0}}),eO=(t,e)=>{const{D:n,M:i}=t,{w:s,h:r}=e,a=(d,h,p)=>{let f=mv(d)*p,m=mv(h)*p;if(f===m){const v=Qc(d),g=Qc(h);m=v>g?0:m,f=v<g?0:f}return f=f===m?0:f,[f+0,m+0]},[o,l]=a(n.x,i.x,s),[c,u]=a(n.y,i.y,r);return{D:{x:o,y:c},M:{x:l,y:u}}},Vd=({D:t,M:e})=>{const n=(i,s)=>i===0&&i<=s;return{x:n(t.x,e.x),y:n(t.y,e.y)}},wv=({D:t,M:e},n)=>{const i=(s,r,a)=>rE(0,1,(s-a)/(s-r)||0);return{x:i(t.x,e.x,n.x),y:i(t.y,e.y,n.y)}},_f=t=>{t&&t.focus&&t.focus({preventScroll:!0})},xv=(t,e)=>{Nt(yp(e),t)},bf=t=>{const e=new Map,n=(r,a)=>{if(r){const o=e.get(r);xv(l=>{o&&o[l?"delete":"clear"](l)},a)}else e.forEach(o=>{o.clear()}),e.clear()},i=(r,a)=>{if(vl(r)){const c=e.get(r)||new Set;return e.set(r,c),xv(u=>{Li(u)&&c.add(u)},a),lt(n,r,a)}Mu(a)&&a&&n();const o=Pi(r),l=[];return Nt(o,c=>{const u=r[c];u&&$t(l,i(c,u))}),lt(ei,l)},s=(r,a)=>{Nt(ir(e.get(r)),o=>{a&&!nu(a)?o.apply(0,a):o()})};return i(t||{}),[i,n,s]},bE={},EE={},tO=t=>{Nt(t,e=>Nt(e,(n,i)=>{bE[i]=e[i]}))},wE=(t,e,n)=>Pi(t).map(i=>{const{static:s,instance:r}=t[i],[a,o,l]=n||[],c=n?r:s;if(c){const u=n?c(a,o,e):c(e);return(l||EE)[i]=u}}),yl=t=>EE[t],nO="__osOptionsValidationPlugin",Va="data-overlayscrollbars",Pc="os-environment",pc=`${Pc}-scrollbar-hidden`,$d=`${Va}-initialize`,Lc="noClipping",Sv=`${Va}-body`,js=Va,iO="host",ts=`${Va}-viewport`,sO=_p,rO=bp,aO="arrange",xE="measuring",oO="scrolling",SE="scrollbarHidden",lO="noContent",Ef=`${Va}-padding`,Tv=`${Va}-content`,Ap="os-size-observer",cO=`${Ap}-appear`,uO=`${Ap}-listener`,dO="os-trinsic-observer",hO="os-theme-none",ti="os-scrollbar",fO=`${ti}-rtl`,pO=`${ti}-horizontal`,mO=`${ti}-vertical`,TE=`${ti}-track`,Cp=`${ti}-handle`,gO=`${ti}-visible`,vO=`${ti}-cornerless`,Mv=`${ti}-interaction`,Av=`${ti}-unusable`,wf=`${ti}-auto-hide`,Cv=`${wf}-hidden`,Pv=`${ti}-wheel`,yO=`${TE}-interactive`,_O=`${Cp}-interactive`,bO="__osSizeObserverPlugin",EO=(t,e)=>{const{k:n}=e,[i,s]=t("showNativeOverlaidScrollbars");return[i&&n.x&&n.y,s]},fa=t=>t.indexOf(rs)===0,wO=t=>t.replace(`${rs}-`,""),xf=(t,e)=>{if(t==="auto")return e?Da:xi;const n=t||xi;return[xi,Da,rs].includes(n)?n:xi},xO=(t,e)=>{const{overflowX:n,overflowY:i}=Gi(t,[_p,bp]);return{x:xf(n,e.x),y:xf(i,e.y)}},ME="__osScrollbarsHidingPlugin",SO="__osClickScrollPlugin",Lv=t=>JSON.stringify(t,(e,n)=>{if(Li(n))throw 0;return n}),Rv=(t,e)=>t?`${e}`.split(".").reduce((n,i)=>n&&iE(n,i)?n[i]:void 0,t):void 0,TO={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},AE=(t,e)=>{const n={},i=Ko(Pi(e),Pi(t));return Nt(i,s=>{const r=t[s],a=e[s];if(Jc(r)&&Jc(a))Tt(n[s]={},AE(r,a)),Ep(n[s])&&delete n[s];else if(iE(e,s)&&a!==r){let o=!0;if(Ci(r)||Ci(a))try{Lv(r)===Lv(a)&&(o=!1)}catch{}o&&(n[s]=a)}}),n},Iv=(t,e,n)=>i=>[Rv(t,i),n||Rv(e,i)!==void 0];let CE;const MO=()=>CE,AO=t=>{CE=t};let Gd;const CO=()=>{const t=(y,T,x)=>{Bn(document.body,y),Bn(document.body,y);const S=mE(y),M=Ea(y),w=Mp(T);return x&&Oa(y),{x:M.h-S.h+w.h,y:M.w-S.w+w.w}},e=y=>{let T=!1;const x=Tp(y,pc);try{T=Gi(y,"scrollbar-width")==="none"||Gi(y,"display","::-webkit-scrollbar")==="none"}catch{}return x(),T},n=`.${Pc}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Pc} div{width:200%;height:200%;margin:10px 0}.${pc}{scrollbar-width:none!important}.${pc}::-webkit-scrollbar,.${pc}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,s=hE(`<div class="${Pc}"><div></div><style>${n}</style></div>`)[0],r=s.firstChild,a=s.lastChild,o=MO();o&&(a.nonce=o);const[l,,c]=bf(),[u,d]=Yn({o:t(s,r),i:Cc},lt(t,s,r,!0)),[h]=d(),p=e(s),f={x:h.x===0,y:h.y===0},m={elements:{host:null,padding:!p,viewport:y=>p&&uE(y)&&y,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},v=Tt({},TO),g=lt(Tt,{},v),_=lt(Tt,{},m),b={P:h,k:f,U:p,J:!!yo,G:lt(l,"r"),K:_,Z:y=>Tt(m,y)&&_(),tt:g,nt:y=>Tt(v,y)&&g(),ot:Tt({},m),st:Tt({},v)};if(Di(s,"style"),Oa(s),Bt(Hn,"resize",()=>{c("r",[])}),Li(Hn.matchMedia)&&!p&&(!f.x||!f.y)){const y=T=>{const x=Hn.matchMedia(`(resolution: ${Hn.devicePixelRatio}dppx)`);Bt(x,"change",()=>{T(),y(T)},{A:!0})};y(()=>{const[T,x]=u();Tt(b.P,T),c("r",[x])})}return b},Wi=()=>(Gd||(Gd=CO()),Gd),PO=(t,e,n)=>{let i=!1;const s=n?new WeakMap:!1,r=()=>{i=!0},a=o=>{if(s&&n){const l=n.map(c=>{const[u,d]=c||[];return[d&&u?(o||cE)(u,t):[],d]});Nt(l,c=>Nt(c[0],u=>{const d=c[1],h=s.get(u)||[];if(t.contains(u)&&d){const f=Bt(u,d,m=>{i?(f(),s.delete(u)):e(m)});s.set(u,$t(h,f))}else ei(h),s.delete(u)}))}};return a(),[r,a]},Dv=(t,e,n,i)=>{let s=!1;const{et:r,ct:a,rt:o,it:l,lt:c,ut:u}=i||{},d=iu(()=>s&&n(!0),{p:33,v:99}),[h,p]=PO(t,d,o),f=r||[],m=a||[],v=Ko(f,m),g=(b,y)=>{if(!nu(y)){const T=c||Zo,x=u||Zo,S=[],M=[];let w=!1,E=!1;if(Nt(y,C=>{const{attributeName:P,target:A,type:R,oldValue:N,addedNodes:U,removedNodes:k}=C,D=R==="attributes",W=R==="childList",O=t===A,B=D&&P,V=B&&wp(A,P||""),j=vl(V)?V:null,Y=B&&N!==j,H=qb(m,P)&&Y;if(e&&(W||!O)){const q=D&&Y,K=q&&l&&ff(A,l),te=(K?!T(A,P,N,j):!D||q)&&!x(C,!!K,t,i);Nt(U,ue=>$t(S,ue)),Nt(k,ue=>$t(S,ue)),E=E||te}!e&&O&&Y&&!T(A,P,N,j)&&($t(M,P),w=w||H)}),p(C=>hf(S).reduce((P,A)=>($t(P,cE(C,A)),ff(A,C)?$t(P,A):P),[])),e)return!b&&E&&n(!1),[!1];if(!nu(M)||w){const C=[hf(M),w];return b||n.apply(0,C),C}}},_=new $D(lt(g,!1));return[()=>(_.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:v,subtree:e,childList:e,characterData:e}),s=!0,()=>{s&&(h(),_.disconnect(),s=!1)}),()=>{if(s)return d.O(),g(!0,_.takeRecords())}]};let vr=null;const PE=(t,e,n)=>{const{ft:i}=n||{},s=yl(bO),[r]=Yn({o:!1,u:!0});return()=>{const a=[],l=hE(`<div class="${Ap}"><div class="${uO}"></div></div>`)[0],c=l.firstChild,u=d=>{const h=Ci(d)&&!nu(d);let p=!1,f=!1;if(h){const m=d[0],[v,,g]=r(m.contentRect),_=vf(v);f=gE(v,g),p=!f&&!_}else f=d===!0;p||e({_t:!0,ft:f})};if(ua){if(!Mu(vr)){const f=new ua(Zo);f.observe(t,{get box(){vr=!0}}),vr=vr||!1,f.disconnect()}const d=iu(u,{p:0,v:0}),h=f=>d(f),p=new ua(h);if(p.observe(vr?t:c),$t(a,[()=>{p.disconnect()},!vr&&Bn(t,l)]),vr){const f=new ua(h);f.observe(t,{box:"border-box"}),$t(a,()=>f.disconnect())}}else if(s){const[d,h]=s(c,u,i);$t(a,Ko([Tp(l,cO),Bt(l,"animationstart",d),Bn(t,l)],h))}else return Zo;return lt(ei,a)}},LO=(t,e)=>{let n;const i=l=>l.h===0||l.isIntersecting||l.intersectionRatio>0,s=ba(dO),[r]=Yn({o:!1}),a=(l,c)=>{if(l){const u=r(i(l)),[,d]=u;return d&&!c&&e(u)&&[u]}},o=(l,c)=>a(c.pop(),l);return[()=>{const l=[];if(gv)n=new gv(lt(o,!1),{root:t}),n.observe(s),$t(l,()=>{n.disconnect()});else{const c=()=>{const u=Ea(s);a(u)};$t(l,PE(s,c)()),c()}return lt(ei,$t(l,Bn(t,s)))},()=>n&&o(!0,n.takeRecords())]},RO=(t,e,n,i)=>{let s,r,a,o,l,c;const u=`[${js}]`,d=`[${ts}]`,h=["id","class","style","open","wrap","cols","rows"],{dt:p,vt:f,L:m,gt:v,ht:g,V:_,bt:b,wt:y,yt:T,St:x}=t,S=H=>Gi(H,"direction")==="rtl",M={Ot:!1,B:S(p)},w=Wi(),E=yl(ME),[C]=Yn({i:nE,o:{w:0,h:0}},()=>{const H=E&&E.R(t,e,M,w,n).Y,K=!(b&&_)&&Sp(f,js,Lc),G=!_&&y(aO),te=G&&Zn(v),ue=te&&x(),se=T(xE,K),X=G&&H&&H(),ne=ru(m),F=Mp(m);return X&&X(),Bi(v,te),ue&&ue(),K&&se(),{w:ne.w+F.w,h:ne.h+F.h}}),P=iu(i,{p:()=>s,v:()=>r,m(H,q){const[K]=H,[G]=q;return[Ko(Pi(K),Pi(G)).reduce((te,ue)=>(te[ue]=K[ue]||G[ue],te),{})]}}),A=H=>{const q=S(p);Tt(H,{$t:c!==q}),Tt(M,{B:q}),c=q},R=(H,q)=>{const[K,G]=H,te={Ct:G};return Tt(M,{Ot:K}),q||i(te),te},N=({_t:H,ft:q})=>{const G=!(H&&!q)&&w.U?P:i,te={_t:H||q,ft:q};A(te),G(te)},U=(H,q)=>{const[,K]=C(),G={xt:K};return A(G),K&&!q&&(H?i:P)(G),G},k=(H,q,K)=>{const G={Ht:q};return A(G),q&&!K&&P(G),G},[D,W]=g?LO(f,R):[],O=!_&&PE(f,N,{ft:!0}),[B,V]=Dv(f,!1,k,{ct:h,et:h}),j=_&&ua&&new ua(H=>{const q=H[H.length-1].contentRect;N({_t:!0,ft:gE(q,l)}),l=q}),Y=iu(()=>{const[,H]=C();i({xt:H})},{p:222,S:!0});return[()=>{j&&j.observe(f);const H=O&&O(),q=D&&D(),K=B(),G=w.G(te=>{te?P({Et:te}):Y()});return()=>{j&&j.disconnect(),H&&H(),q&&q(),o&&o(),K(),G()}},({zt:H,Tt:q,It:K})=>{const G={},[te]=H("update.ignoreMutation"),[ue,se]=H("update.attributes"),[X,ne]=H("update.elementEvents"),[F,fe]=H("update.debounce"),ve=ne||se,pe=q||K,Me=Pe=>Li(te)&&te(Pe);if(ve){a&&a(),o&&o();const[Pe,Ce]=Dv(g||m,!0,U,{et:Ko(h,ue||[]),rt:X,it:u,ut:(z,L)=>{const{target:Q,attributeName:oe}=z;return(!L&&oe&&!_?XD(Q,u,d):!1)||!!ha(Q,`.${ti}`)||!!Me(z)}});o=Pe(),a=Ce}if(fe)if(P.O(),Ci(F)){const Pe=F[0],Ce=F[1];s=ds(Pe)&&Pe,r=ds(Ce)&&Ce}else ds(F)?(s=F,r=!1):(s=!1,r=!1);if(pe){const Pe=V(),Ce=W&&W(),z=a&&a();Pe&&Tt(G,k(Pe[0],Pe[1],pe)),Ce&&Tt(G,R(Ce[0],pe)),z&&Tt(G,U(z[0],pe))}return A(G),G},M]},LE=(t,e)=>Li(e)?e.apply(0,t):e,IO=(t,e,n,i)=>{const s=gp(i)?n:i;return LE(t,s)||e.apply(0,t)},RE=(t,e,n,i)=>{const s=gp(i)?n:i,r=LE(t,s);return!!r&&(tu(r)?r:e.apply(0,t))},DO=(t,e)=>{const{nativeScrollbarsOverlaid:n,body:i}=e||{},{k:s,U:r,K:a}=Wi(),{nativeScrollbarsOverlaid:o,body:l}=a().cancel,c=n??o,u=gp(i)?l:i,d=(s.x||s.y)&&c,h=t&&(Tu(u)?!r:u);return!!d||!!h},OO=(t,e,n,i)=>{const s="--os-viewport-percent",r="--os-scroll-percent",a="--os-scroll-direction",{K:o}=Wi(),{scrollbars:l}=o(),{slot:c}=l,{dt:u,vt:d,L:h,At:p,gt:f,bt:m,V:v}=e,{scrollbars:g}=p?{}:t,{slot:_}=g||{},b=[],y=[],T=[],x=RE([u,d,h],()=>v&&m?u:d,c,_),S=B=>{if(yo){let V=null,j=[];const Y=new yo({source:f,axis:B}),H=()=>{V&&V.cancel(),V=null};return{kt:K=>{const{Dt:G}=n,te=Vd(G)[B],ue=B==="x",se=[Bd(0,ue),Bd(`calc(100cq${ue?"w":"h"} + -100%)`,ue)],X=te?se:se.reverse();return j[0]===X[0]&&j[1]===X[1]||(H(),j=X,V=K.Mt.animate({clear:["left"],transform:X},{timeline:Y})),H}}}},M={x:S("x"),y:S("y")},w=()=>{const{Rt:B,Vt:V}=n,j=(Y,H)=>rE(0,1,Y/(Y+H)||0);return{x:j(V.x,B.x),y:j(V.y,B.y)}},E=(B,V,j)=>{const Y=j?Tp:lE;Nt(B,H=>{Y(H.Lt,V)})},C=(B,V)=>{Nt(B,j=>{const[Y,H]=V(j);Jo(Y,H)})},P=(B,V,j)=>{const Y=Mu(j),H=Y?j:!0,q=Y?!j:!0;H&&E(y,B,V),q&&E(T,B,V)},A=()=>{const B=w(),V=j=>Y=>[Y.Lt,{[s]:gf(j)+""}];C(y,V(B.x)),C(T,V(B.y))},R=()=>{if(!yo){const{Dt:B}=n,V=wv(B,Zn(f)),j=Y=>H=>[H.Lt,{[r]:gf(Y)+""}];C(y,j(V.x)),C(T,j(V.y))}},N=()=>{const{Dt:B}=n,V=Vd(B),j=Y=>H=>[H.Lt,{[a]:Y?"0":"1"}];C(y,j(V.x)),C(T,j(V.y)),yo&&(y.forEach(M.x.kt),T.forEach(M.y.kt))},U=()=>{if(v&&!m){const{Rt:B,Dt:V}=n,j=Vd(V),Y=wv(V,Zn(f)),H=q=>{const{Lt:K}=q,G=Qo(K)===h&&K,te=(ue,se,X)=>{const ne=se*ue;return pE(X?ne:-ne)};return[G,G&&{transform:Bd({x:te(Y.x,B.x,j.x),y:te(Y.y,B.y,j.y)})}]};C(y,H),C(T,H)}},k=B=>{const V=B?"x":"y",Y=ba(`${ti} ${B?pO:mO}`),H=ba(TE),q=ba(Cp),K={Lt:Y,Ut:H,Mt:q},G=M[V];return $t(B?y:T,K),$t(b,[Bn(Y,H),Bn(H,q),lt(Oa,Y),G&&G.kt(K),i(K,P,B)]),K},D=lt(k,!0),W=lt(k,!1),O=()=>(Bn(x,y[0].Lt),Bn(x,T[0].Lt),lt(ei,b));return D(),W(),[{Pt:A,Nt:R,qt:N,Bt:U,Ft:P,jt:{Xt:y,Yt:D,Wt:lt(C,y)},Jt:{Xt:T,Yt:W,Wt:lt(C,T)}},O]},kO=(t,e,n,i)=>(s,r,a)=>{const{vt:o,L:l,V:c,gt:u,Gt:d,St:h}=e,{Lt:p,Ut:f,Mt:m}=s,[v,g]=da(333),[_,b]=da(444),y=S=>{Li(u.scrollBy)&&u.scrollBy({behavior:"smooth",left:S.x,top:S.y})},T=()=>{const S="pointerup pointercancel lostpointercapture",M=`client${a?"X":"Y"}`,w=a?Cu:Pu,E=a?"left":"top",C=a?"w":"h",P=a?"x":"y",A=(N,U)=>k=>{const{Rt:D}=n,W=Ea(f)[C]-Ea(m)[C],B=U*k/W*D[P];Bi(u,{[P]:N+B})},R=[];return Bt(f,"pointerdown",N=>{const U=ha(N.target,`.${Cp}`)===m,k=U?m:f,D=t.scrollbars,W=D[U?"dragScroll":"clickScroll"],{button:O,isPrimary:B,pointerType:V}=N,{pointers:j}=D;if(O===0&&B&&W&&(j||[]).includes(V)){ei(R),b();const H=!U&&(N.shiftKey||W==="instant"),q=lt(Hd,m),K=lt(Hd,f),G=(L,Q)=>(L||q())[E]-(Q||K())[E],te=df(Hd(u)[w])/Ea(u)[C]||1,ue=A(Zn(u)[P],1/te),se=N[M],X=q(),ne=K(),F=X[w],fe=G(X,ne)+F/2,ve=se-ne[E],pe=U?0:ve-fe,Me=L=>{ei(z),k.releasePointerCapture(L.pointerId)},Pe=U||H,Ce=h(),z=[Bt(d,S,Me),Bt(d,"selectstart",L=>yf(L),{T:!1}),Bt(f,S,Me),Pe&&Bt(f,"pointermove",L=>ue(pe+(L[M]-se))),Pe&&(()=>{const L=Zn(u);Ce();const Q=Zn(u),oe={x:Q.x-L.x,y:Q.y-L.y};(Qc(oe.x)>3||Qc(oe.y)>3)&&(h(),Bi(u,L),y(oe),_(Ce))})];if(k.setPointerCapture(N.pointerId),H)ue(pe);else if(!U){const L=yl(SO);if(L){const Q=L(ue,pe,F,oe=>{oe?Ce():$t(z,Ce)});$t(z,Q),$t(R,lt(Q,!0))}}}})};let x=!0;return lt(ei,[Bt(m,"pointermove pointerleave",i),Bt(p,"pointerenter",()=>{r(Mv,!0)}),Bt(p,"pointerleave pointercancel",()=>{r(Mv,!1)}),!c&&Bt(p,"mousedown",()=>{const S=mf();(yv(S,ts)||yv(S,js)||S===document.body)&&mp(lt(_f,l),25)}),Bt(p,"wheel",S=>{const{deltaX:M,deltaY:w,deltaMode:E}=S;x&&E===0&&Qo(p)===o&&y({x:M,y:w}),x=!1,r(Pv,!0),v(()=>{x=!0,r(Pv)}),yf(S)},{T:!1,I:!0}),Bt(p,"pointerdown",()=>{const S=Bt(d,"click",w=>{M(),yE(w)},{A:!0,I:!0,T:!1}),M=Bt(d,"pointerup pointercancel",()=>{M(),setTimeout(S,150)},{I:!0,T:!0})},{I:!0,T:!0}),T(),g,b])},NO=(t,e,n,i,s,r)=>{let a,o,l,c,u,d=Zo,h=0;const p=["mouse","pen"],f=V=>p.includes(V.pointerType),[m,v]=da(),[g,_]=da(100),[b,y]=da(100),[T,x]=da(()=>h),[S,M]=OO(t,s,i,kO(e,s,i,V=>f(V)&&D())),{vt:w,Kt:E,bt:C}=s,{Ft:P,Pt:A,Nt:R,qt:N,Bt:U}=S,k=(V,j)=>{if(x(),V)P(Cv);else{const Y=lt(P,Cv,!0);h>0&&!j?T(Y):Y()}},D=()=>{(l?!a:!c)&&(k(!0),g(()=>{k(!1)}))},W=V=>{P(wf,V,!0),P(wf,V,!1)},O=V=>{f(V)&&(a=l,l&&k(!0))},B=[x,_,y,v,()=>d(),Bt(w,"pointerover",O,{A:!0}),Bt(w,"pointerenter",O),Bt(w,"pointerleave",V=>{f(V)&&(a=!1,l&&k(!1))}),Bt(w,"pointermove",V=>{f(V)&&o&&D()}),Bt(E,"scroll",V=>{m(()=>{R(),D()}),r(V),U()})];return[()=>lt(ei,$t(B,M())),({zt:V,It:j,Qt:Y,Zt:H})=>{const{tn:q,nn:K,sn:G,en:te}=H||{},{$t:ue,ft:se}=Y||{},{B:X}=n,{k:ne}=Wi(),{cn:F,j:fe}=i,[ve,pe]=V("showNativeOverlaidScrollbars"),[Me,Pe]=V("scrollbars.theme"),[Ce,z]=V("scrollbars.visibility"),[L,Q]=V("scrollbars.autoHide"),[oe,he]=V("scrollbars.autoHideSuspend"),[de]=V("scrollbars.autoHideDelay"),[ee,ie]=V("scrollbars.dragScroll"),[le,ye]=V("scrollbars.clickScroll"),[Se,_e]=V("overflow"),Te=se&&!j,ke=fe.x||fe.y,Ne=q||K||te||ue||j,Ge=G||z||_e,Be=ve&&ne.x&&ne.y,qe=(ge,Ue,xe)=>{const Le=ge.includes(Da)&&(Ce===rs||Ce==="auto"&&Ue===Da);return P(gO,Le,xe),Le};if(h=de,Te&&(oe&&ke?(W(!1),d(),b(()=>{d=Bt(E,"scroll",lt(W,!0),{A:!0})})):W(!0)),pe&&P(hO,Be),Pe&&(P(u),P(Me,!0),u=Me),he&&!oe&&W(!0),Q&&(o=L==="move",l=L==="leave",c=L==="never",k(c,!0)),ie&&P(_O,ee),ye&&P(yO,!!le),Ge){const ge=qe(Se.x,F.x,!0),Ue=qe(Se.y,F.y,!1);P(vO,!(ge&&Ue))}Ne&&(R(),A(),U(),te&&N(),P(Av,!fe.x,!0),P(Av,!fe.y,!1),P(fO,X&&!C))},{},S]},FO=t=>{const e=Wi(),{K:n,U:i}=e,{elements:s}=n(),{padding:r,viewport:a,content:o}=s,l=tu(t),c=l?{}:t,{elements:u}=c,{padding:d,viewport:h,content:p}=u||{},f=l?t:c.target,m=uE(f),v=f.ownerDocument,g=v.documentElement,_=()=>v.defaultView||Hn,b=lt(IO,[f]),y=lt(RE,[f]),T=lt(ba,""),x=lt(b,T,a),S=lt(y,T,o),M=F=>{const fe=Ea(F),ve=ru(F),pe=Gi(F,_p),Me=Gi(F,bp);return ve.w-fe.w>0&&!fa(pe)||ve.h-fe.h>0&&!fa(Me)},w=x(h),E=w===f,C=E&&m,P=!E&&S(p),A=!E&&w===P,R=C?g:w,N=C?R:f,U=!E&&y(T,r,d),k=!A&&P,D=[k,R,U,N].map(F=>tu(F)&&!Qo(F)&&F),W=F=>F&&qb(D,F),O=!W(R)&&M(R)?R:f,B=C?g:R,j={dt:f,vt:N,L:R,rn:U,ht:k,gt:B,Kt:C?v:R,ln:m?g:O,Gt:v,bt:m,At:l,V:E,an:_,wt:F=>Sp(R,ts,F),yt:(F,fe)=>su(R,ts,F,fe),St:()=>su(B,ts,oO,!0)},{dt:Y,vt:H,rn:q,L:K,ht:G}=j,te=[()=>{Di(H,[js,$d]),Di(Y,$d),m&&Di(g,[$d,js])}];let ue=pf([G,K,q,H,Y].find(F=>F&&!W(F)));const se=C?Y:G||K,X=lt(ei,te);return[j,()=>{const F=_(),fe=mf(),ve=z=>{Bn(Qo(z),pf(z)),Oa(z)},pe=z=>Bt(z,"focusin focusout focus blur",yE,{I:!0,T:!1}),Me="tabindex",Pe=wp(K,Me),Ce=pe(fe);return es(H,js,E?"":iO),es(q,Ef,""),es(K,ts,""),es(G,Tv,""),E||(es(K,Me,Pe||"-1"),m&&es(g,Sv,"")),Bn(se,ue),Bn(H,q),Bn(q||H,!E&&K),Bn(K,G),$t(te,[Ce,()=>{const z=mf(),L=W(K),Q=L&&z===K?Y:z,oe=pe(Q);Di(q,Ef),Di(G,Tv),Di(K,ts),m&&Di(g,Sv),Pe?es(K,Me,Pe):Di(K,Me),W(G)&&ve(G),L&&ve(K),W(q)&&ve(q),_f(Q),oe()}]),i&&!E&&(xp(K,ts,SE),$t(te,lt(Di,K,ts))),_f(!E&&m&&fe===Y&&F.top===F?K:fe),Ce(),ue=0,X},X]},UO=({ht:t})=>({Qt:e,un:n,It:i})=>{const{Ct:s}=e||{},{Ot:r}=n;t&&(s||i)&&Jo(t,{[Pu]:r&&"100%"})},zO=({vt:t,rn:e,L:n,V:i},s)=>{const[r,a]=Yn({i:WD,o:bv()},lt(bv,t,"padding",""));return({zt:o,Qt:l,un:c,It:u})=>{let[d,h]=a(u);const{U:p}=Wi(),{_t:f,xt:m,$t:v}=l||{},{B:g}=c,[_,b]=o("paddingAbsolute");(f||h||(u||m))&&([d,h]=r(u));const T=!i&&(b||v||h);if(T){const x=!_||!e&&!p,S=d.r+d.l,M=d.t+d.b,w={[eE]:x&&!g?-S:0,[tE]:x?-M:0,[Jb]:x&&g?-S:0,top:x?-d.t:0,right:x?g?-d.r:"auto":0,left:x?g?"auto":-d.l:0,[Cu]:x&&`calc(100% + ${S}px)`},E={[Yb]:x?d.t:0,[Kb]:x?d.r:0,[Qb]:x?d.b:0,[Zb]:x?d.l:0};Jo(e||n,w),Jo(n,E),Tt(s,{rn:d,fn:!x,F:e?E:Tt({},w,E)})}return{_n:T}}},BO=(t,e)=>{const n=Wi(),{vt:i,rn:s,L:r,V:a,Kt:o,gt:l,bt:c,yt:u,an:d}=t,{U:h}=n,p=c&&a,f=lt(Wb,0),m={display:()=>!1,direction:j=>j!=="ltr",flexDirection:j=>j.endsWith("-reverse"),writingMode:j=>j!=="horizontal-tb"},v=Pi(m),g={i:nE,o:{w:0,h:0}},_={i:Cc,o:{}},b=j=>{u(xE,!p&&j)},y=j=>{if(!v.some(X=>{const ne=j[X];return ne&&m[X](ne)}))return{D:{x:0,y:0},M:{x:1,y:1}};b(!0);const H=Zn(l),q=u(lO,!0),K=Bt(o,Da,X=>{const ne=Zn(l);X.isTrusted&&ne.x===H.x&&ne.y===H.y&&vE(X)},{I:!0,A:!0});Bi(l,{x:0,y:0}),q();const G=Zn(l),te=ru(l);Bi(l,{x:te.w,y:te.h});const ue=Zn(l);Bi(l,{x:ue.x-G.x<1&&-te.w,y:ue.y-G.y<1&&-te.h});const se=Zn(l);return Bi(l,H),pp(()=>K()),{D:G,M:se}},T=(j,Y)=>{const H=Hn.devicePixelRatio%1!==0?1:0,q={w:f(j.w-Y.w),h:f(j.h-Y.h)};return{w:q.w>H?q.w:0,h:q.h>H?q.h:0}},x=(j,Y)=>{const H=(q,K,G,te)=>{const ue=q===rs?xi:wO(q),se=fa(q),X=fa(G);return!K&&!te?xi:se&&X?rs:se?K&&te?ue:K?rs:xi:K?ue:X&&te?rs:xi};return{x:H(Y.x,j.x,Y.y,j.y),y:H(Y.y,j.y,Y.x,j.x)}},S=j=>{const Y=q=>[rs,xi,Da].map(K=>V(xf(K),q)),H=Y(!0).concat(Y()).join(" ");u(H),u(Pi(j).map(q=>V(j[q],q==="x")).join(" "),!0)},[M,w]=Yn(g,lt(Mp,r)),[E,C]=Yn(g,lt(ru,r)),[P,A]=Yn(g),[R]=Yn(_),[N,U]=Yn(g),[k]=Yn(_),[D]=Yn({i:(j,Y)=>Lu(j,Y,v),o:{}},()=>JD(r)?Gi(r,v):{}),[W,O]=Yn({i:(j,Y)=>Cc(j.D,Y.D)&&Cc(j.M,Y.M),o:_E()}),B=yl(ME),V=(j,Y)=>`${Y?sO:rO}${GD(j)}`;return({zt:j,Qt:Y,un:H,It:q},{_n:K})=>{const{_t:G,Ht:te,xt:ue,$t:se,ft:X,Et:ne}=Y||{},F=B&&B.R(t,e,H,n,j),{X:fe,Y:ve,W:pe}=F||{},[Me,Pe]=EO(j,n),[Ce,z]=j("overflow"),L=fa(Ce.x),Q=fa(Ce.y),oe=G||K||ue||se||ne||Pe;let he=w(q),de=C(q),ee=A(q),ie=U(q);if(Pe&&h&&u(SE,!Me),oe){Sp(i,js,Lc)&&b(!0);const En=ve&&ve(),[wn]=he=M(q),[ji]=de=E(q),Xi=mE(r),Un=p&&QD(d()),sr={w:f(ji.w+wn.w),h:f(ji.h+wn.h)},Ri={w:f((Un?Un.w:Xi.w+f(Xi.w-ji.w))+wn.w),h:f((Un?Un.h:Xi.h+f(Xi.h-ji.h))+wn.h)};En&&En(),ie=N(Ri),ee=P(T(sr,Ri),q)}const[le,ye]=ie,[Se,_e]=ee,[Te,ke]=de,[Ne,Ge]=he,[Be,qe]=R({x:Se.w>0,y:Se.h>0}),ge=L&&Q&&(Be.x||Be.y)||L&&Be.x&&!Be.y||Q&&Be.y&&!Be.x,Ue=K||se||ne||Ge||ke||ye||_e||z||Pe||oe||te&&p,[xe,Le]=D(q),ze=se||X||Le||qe||q,[He,We]=ze?W(y(xe),q):O();let tt=x(Be,Ce);b(!1),Ue&&(S(tt),tt=xO(r,Be),pe&&fe&&(fe(tt,Te,Ne),Jo(r,pe(tt))));const[zt,_t]=k(tt);return su(i,js,Lc,ge),su(s,Ef,Lc,ge),Tt(e,{cn:zt,Vt:{x:le.w,y:le.h},Rt:{x:Se.w,y:Se.h},j:Be,Dt:eO(He,Se)}),{sn:_t,tn:ye,nn:_e,en:We||_e,dn:ze}}},HO=t=>{const[e,n,i]=FO(t),s={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[eE]:0,[tE]:0,[Jb]:0,[Yb]:0,[Kb]:0,[Qb]:0,[Zb]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:xi,y:xi},j:{x:!1,y:!1},Dt:_E()},{dt:r,gt:a,V:o,St:l}=e,{U:c,k:u}=Wi(),d=!c&&(u.x||u.y),h=[UO(e),zO(e,s),BO(e,s)];return[n,p=>{const f={},v=d&&Zn(a),g=v&&l();return Nt(h,_=>{Tt(f,_(p,f)||{})}),Bi(a,v),g&&g(),o||Bi(r,0),f},s,e,i]},VO=(t,e,n,i,s)=>{let r=!1;const a=Iv(e,{}),[o,l,c,u,d]=HO(t),[h,p,f]=RO(u,c,a,y=>{b({},y)}),[m,v,,g]=NO(t,e,f,c,u,s),_=y=>Pi(y).some(T=>!!y[T]),b=(y,T)=>{if(n())return!1;const{pn:x,It:S,Tt:M,vn:w}=y,E=x||{},C=!!S||!r,P={zt:Iv(e,E,C),pn:E,It:C};if(w)return v(P),!1;const A=T||p(Tt({},P,{Tt:M})),R=l(Tt({},P,{un:f,Qt:A}));v(Tt({},P,{Qt:A,Zt:R}));const N=_(A),U=_(R),k=N||U||!Ep(E)||C;return r=!0,k&&i(y,{Qt:A,Zt:R}),k};return[()=>{const{ln:y,gt:T,St:x}=u,S=Zn(y),M=[h(),o(),m()],w=x();return Bi(T,S),w(),lt(ei,M)},b,()=>({gn:f,hn:c}),{bn:u,wn:g},d]},Pp=new WeakMap,$O=(t,e)=>{Pp.set(t,e)},GO=t=>{Pp.delete(t)},IE=t=>Pp.get(t),er=(t,e,n)=>{const{tt:i}=Wi(),s=tu(t),r=s?t:t.target,a=IE(r);if(e&&!a){let o=!1;const l=[],c={},u=E=>{const C=sE(E),P=yl(nO);return P?P(C,!0):C},d=Tt({},i(),u(e)),[h,p,f]=bf(),[m,v,g]=bf(n),_=(E,C)=>{g(E,C),f(E,C)},[b,y,T,x,S]=VO(t,d,()=>o,({pn:E,It:C},{Qt:P,Zt:A})=>{const{_t:R,$t:N,Ct:U,xt:k,Ht:D,ft:W}=P,{tn:O,nn:B,sn:V,en:j}=A;_("updated",[w,{updateHints:{sizeChanged:!!R,directionChanged:!!N,heightIntrinsicChanged:!!U,overflowEdgeChanged:!!O,overflowAmountChanged:!!B,overflowStyleChanged:!!V,scrollCoordinatesChanged:!!j,contentMutation:!!k,hostMutation:!!D,appear:!!W},changedOptions:E||{},force:!!C}])},E=>_("scroll",[w,E])),M=E=>{GO(r),ei(l),o=!0,_("destroyed",[w,E]),p(),v()},w={options(E,C){if(E){const P=C?i():{},A=AE(d,Tt(P,u(E)));Ep(A)||(Tt(d,A),y({pn:A}))}return Tt({},d)},on:m,off:(E,C)=>{E&&C&&v(E,C)},state(){const{gn:E,hn:C}=T(),{B:P}=E,{Vt:A,Rt:R,cn:N,j:U,rn:k,fn:D,Dt:W}=C;return Tt({},{overflowEdge:A,overflowAmount:R,overflowStyle:N,hasOverflow:U,scrollCoordinates:{start:W.D,end:W.M},padding:k,paddingAbsolute:D,directionRTL:P,destroyed:o})},elements(){const{dt:E,vt:C,rn:P,L:A,ht:R,gt:N,Kt:U}=x.bn,{jt:k,Jt:D}=x.wn,W=B=>{const{Mt:V,Ut:j,Lt:Y}=B;return{scrollbar:Y,track:j,handle:V}},O=B=>{const{Xt:V,Yt:j}=B,Y=W(V[0]);return Tt({},Y,{clone:()=>{const H=W(j());return y({vn:!0}),H}})};return Tt({},{target:E,host:C,padding:P||A,viewport:A,content:R||A,scrollOffsetElement:N,scrollEventElement:U,scrollbarHorizontal:O(k),scrollbarVertical:O(D)})},update:E=>y({It:E,Tt:!0}),destroy:lt(M,!1),plugin:E=>c[Pi(E)[0]]};return $t(l,[S]),$O(r,w),wE(bE,er,[w,h,c]),DO(x.bn.bt,!s&&t.cancel)?(M(!0),w):($t(l,b()),_("initialized",[w]),w.update(),w)}return a};er.plugin=t=>{const e=Ci(t),n=e?t:[t],i=n.map(s=>wE(s,er)[0]);return tO(n),e?i:i[0]};er.valid=t=>{const e=t&&t.elements,n=Li(e)&&e();return eu(n)&&!!IE(n.target)};er.env=()=>{const{P:t,k:e,U:n,J:i,ot:s,st:r,K:a,Z:o,tt:l,nt:c}=Wi();return Tt({},{scrollbarsSize:t,scrollbarsOverlaid:e,scrollbarsHiding:n,scrollTimeline:i,staticDefaultInitialization:s,staticDefaultOptions:r,getDefaultInitialization:a,setDefaultInitialization:o,getDefaultOptions:l,setDefaultOptions:c})};er.nonce=AO;er.trustedTypePolicy=YD;document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".os-scrollbar-overflow").forEach(e=>{er(e,{})})});function WO(t){let e=t,n;function i(s){if(window.innerWidth<=s){n||(n=document.querySelector('meta[name="viewport"]'));let a=document.querySelector('meta[name="viewport"]'),o=document.createElement("meta");o.setAttribute("name","viewport"),o.setAttribute("content",`width=${s}`),document.head.replaceChild(o,a)}else if(n&&document.querySelector('meta[name="viewport"]')!=n){let a=document.querySelector('meta[name="viewport"]');document.head.replaceChild(n,a)}}window.addEventListener("resize",function(){i(e)}),i(e)}function jO(){let t=window.navigator.userAgent.toLowerCase(),e;switch(!0){case t.indexOf("edge")>-1:e="msEdge";break;case t.indexOf("edg/")>-1:e="chrEdge";break;case(t.indexOf("opr")>-1&&!!window.opr):e="opera";break;case(t.indexOf("chrome")>-1&&!!window.chrome):e="hrome";break;case t.indexOf("trident")>-1:e="ie";break;case t.indexOf("firefox")>-1:e="firefox";break;case t.indexOf("safari")>-1:e="safari";break;default:e="other"}(e=="safari"||e=="firefox")&&WO(430)}jO();we(document).on("click",'a.anchor[href^="#"]',function(t){var e=we(this);we("html, body").stop().animate({scrollTop:we(e.attr("href")).offset().top-70},800),t.preventDefault()});var Sf=we("#btnTop");we(window).scroll(function(){we(window).scrollTop()>145?Sf.addClass("show"):Sf.removeClass("show")});Sf.on("click",function(t){t.preventDefault(),we("html, body").animate({scrollTop:0},"145")});function hs(t){if(we(t).length>0){var e=we("header").outerHeight(),n=we(t).offset().top-e-20;we("html, body").animate({scrollTop:n},"slow")}}function Lp(t,e,n){if(n<5)throw"maxLength must be at least 5";function i(o,l){return Array.from(Array(l-o+1),(c,u)=>u+o)}var s=n<9?1:2,r=n-s*2-3>>1,a=n-s*2-2>>1;return t<=n?i(1,t):e<=n-s-1-a?i(1,n-s-1).concat([0]).concat(i(t-s+1,t)):e>=t-s-1-a?i(1,s).concat([0]).concat(i(t-s-1-a-r,t)):i(1,s).concat([0]).concat(i(e-r,e+a)).concat([0]).concat(i(t-s+1,t))}we(function(){var t="#doctors",e=we("#doctors .content-item").length,n=screen.width;if(n<768)var i=5;else if(n<1024)var i=8;else var i=16;var s=Math.ceil(e/i),r=7,a;function o(l){return l<1||l>s?!1:(a=l,we(t+" .content-item").hide().slice((a-1)*i,a*i).show(),we(t+" .pagination li").slice(1,-1).remove(),Lp(s,a,r).forEach(c=>{we("<li>").addClass("page-item "+(c?"current-page ":"")+(c===a?"active ":"")).append(we("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(c||"...")).insertBefore(t+" #next-page")}),a===1?we("#previous-page").addClass("active"):we("#previous-page").removeClass("active"),a===s?we("#next-page").addClass("active"):we("#next-page").removeClass("active"),!0)}we("#doctors .pagination").append(we("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(we('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),we("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(we('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(we("#doctors").show(),o(1)):we("#doctors .pagination").hide(),we(document).on("click",t+" .pagination li.current-page:not(.active)",function(){var l=+we(this).text();o(l),hs(t)}),we(t+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),hs(t)}}),we(t+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),hs(t)}})});we(function(){var t="#shares",e=we("#shares .content-item").length,n=screen.width;if(n<768)var i=5;else if(n<1200)var i=8;else var i=9;var s=Math.ceil(e/i),r=7,a;function o(l){return l<1||l>s?!1:(a=l,we(t+" .content-item").hide().slice((a-1)*i,a*i).show(),we(t+" .pagination li").slice(1,-1).remove(),Lp(s,a,r).forEach(c=>{we("<li>").addClass("page-item "+(c?"current-page ":"")+(c===a?"active ":"")).append(we("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(c||"...")).insertBefore(t+" #next-page")}),a===1?we("#previous-page").addClass("active"):we("#previous-page").removeClass("active"),a===s?we("#next-page").addClass("active"):we("#next-page").removeClass("active"),!0)}we("#shares .pagination").append(we("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(we('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),we("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(we('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(we("#shares").show(),o(1)):we("#shares .pagination").hide(),we(document).on("click",t+" .pagination li.current-page:not(.active)",function(){var l=+we(this).text();o(l),hs(t)}),we(t+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),hs(t)}}),we(t+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),hs(t)}})});we(function(){var t="#news",e=we("#news .content-item").length,n=screen.width;if(n<768)var i=5;else if(n<1200)var i=8;else var i=9;var s=Math.ceil(e/i),r=9,a;function o(l){return l<1||l>s?!1:(a=l,we(t+" .content-item").hide().slice((a-1)*i,a*i).show(),we(t+" .pagination li").slice(1,-1).remove(),Lp(s,a,r).forEach(c=>{we("<li>").addClass("page-item "+(c?"current-page ":"")+(c===a?"active ":"")).append(we("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(c||"...")).insertBefore(t+" #next-page")}),a===1?we("#previous-page").addClass("active"):we("#previous-page").removeClass("active"),a===s?we("#next-page").addClass("active"):we("#next-page").removeClass("active"),!0)}we("#news .pagination").append(we("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(we('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),we("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(we('<a><svg><use xlink:href="'+iconsPath+'#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(we("#news").show(),o(1)):we("#news .pagination").hide(),we(document).on("click",t+" .pagination li.current-page:not(.active)",function(){var l=+we(this).text();o(l),hs(t)}),we(t+" #next-page").on("click",function(){if(a<s){var l=a+1;o(l),hs(t)}}),we(t+" #previous-page").on("click",function(){if(a>1){var l=a-1;o(l),hs(t)}})});let Ov=0;we(window).scroll(function(t){let e=we(this).scrollTop(),n=15,i=15;we(window).width()<1024&&(n=5,i=5),e>Ov&&we(window).scrollTop()>=i?(we(".header").removeClass("header--show").addClass("header--hide"),we("main").addClass("show")):(we(".header").removeClass("header--hide"),we(window).scrollTop()<=n?(we(".header").removeClass("header--show"),we("main").removeClass("show")):(we(".header").addClass("header--show"),we("main").addClass("show"))),Ov=e});setInterval(function(){we(".header").hasClass("header--hide")&&(we(".header-top .current-lang").removeClass("active"),we(".header-top .current-lang--inner").removeClass("active"),we(".header-top .current-lang .submenu").removeClass("active"))},300);DE(we(".header .languages .current-lang .current-lang--inner"),we(".header .languages .current-lang .submenu"),we(".header .languages .current-lang"));DE(we(".header-main--desk .nav-link .nav-link--inner"),we(".header-main--desk .nav-link .submenu"),we(".header-main--desk .nav-link"));function DE(t,e,n){t.each(function(i){XO(we(this),e.eq(i),n.eq(i))})}function XO(t,e,n){we(document).mouseup(function(i){n.is(i.target)||n.has(i.target).length!==0?n.hasClass("active")?(t.is(i.target)||t.has(i.target).length!==0)&&t.hasClass("active")&&(e.removeClass("active"),n.removeClass("active"),t.removeClass("active")):(e.addClass("active"),n.addClass("active"),t.addClass("active")):!e.is(i.target)&&e.has(i.target).length===0&&(e.removeClass("active"),n.removeClass("active"),t.removeClass("active"))})}(function(){function t(){var i=document.createElement("div"),s={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var r in s)if(s.hasOwnProperty(r)&&i.style[r]!==void 0)return s[r]}function e(i,s){var r={};for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);for(var a in s)s.hasOwnProperty(a)&&i.hasOwnProperty(a)&&(r[a]=s[a]);return r}var n=function(i){var s=this;this.curItem=null,this.curLevel=0,this.transitionEnd=t(),this.options={};var r={initElem:".push-menu",menuTitle:"Menu"};i&&typeof i=="object"?this.options=e(r,i):this.options=r,this.options.menuTitle=this.options.initElem.find(".nav-title").text().trim()||this.options.menuTitle,this.options.defaultSlug=this.options.initElem.find(".nav-title").closest("a").attr("href")||"#",n.prototype.setMenuTitle=function(u){return s.options.menuTitle=u,l(s),u},function(u){a(u),l(u)}(this);function a(u){u.options.initElem.find(".navbar-toggler").on("click",function(d){d.preventDefault(),u.curItem=we(this).parent(),o(u,"start")}),u.options.initElem.on("click",".has-dropdown > span",function(d){d.preventDefault(),u.curItem=we(this).parent(),o(u,"forward")}),u.options.initElem.on("click",".nav-back",function(){o(u,"back")})}function o(u,d){c(u,d),d==="back"||d==="start"?(u.curItem.removeClass("nav-dropdown-open nav-dropdown-active"),u.curItem=u.curItem.parent().closest(".item"),u.curItem.length&&u.curItem.addClass("nav-dropdown-open nav-dropdown-active"),l(u)):(u.curItem.addClass("nav-dropdown-open nav-dropdown-active"),l(u))}function l(u){var d=u.options.menuTitle,h=u.options.initElem.find(".nav-toggle");if(u.curLevel>0&&u.curItem&&u.curItem.length){const p=u.curItem.children("span");d=p.text().trim();let f=p.data("slug")||"#";h.addClass("back-visible");let m=h.find(".nav-title").closest("a");if(m.length)m.attr("href",f).find(".nav-title").text(d);else{let v='<a href="'+f+'"><span class="nav-title h3">'+d+"</span></a>";h.find(".nav-title").replaceWith(v)}}else{d=u.options.menuTitle;let p=u.options.defaultSlug||"#";h.removeClass("back-visible");let f=h.find(".nav-title").closest("a");if(f.length)f.attr("href",p).find(".nav-title").text(d);else{let m='<a href="'+p+'"><span class="nav-title h3">'+d+"</span></a>";h.find(".nav-title").replaceWith(m)}}}function c(u,d){d==="back"?u.curLevel=u.curLevel>0?u.curLevel-1:0:d==="forward"?u.curLevel+=1:u.curLevel=0,u.options.initElem.children(".push-menu--nav").children(".push-menu--lvl").css({transform:"translateX(-"+u.curLevel*100+"%)"})}};we(document).ready(function(){we(".header-main--desk .push-menu, .header-main--mob .push-menu").each(function(){new n({initElem:we(this)})})})})();we(document).ready(function(){let t=document.querySelector("body"),e=document.querySelector(".navbar-toggler"),n=document.querySelector(".popup-bg-body"),i=!0;e.addEventListener("click",function(s){i?(t.classList.add("lock"),n.classList.add("open"),i=!1,setTimeout(function(){i=!0},1e3)):s.preventDefault()}),setInterval(function(){we(n).hasClass("collapsed")&&(t.classList.remove("lock"),n.classList.remove("open"))},100)});we(document).mouseup(function(t){!we(".header").is(t.target)&&we(".header").has(t.target).length===0&&(we(".popup-bg-body").removeClass("open"),we("body").removeClass("lock"))});setInterval(function(){window.innerWidth>=1024&&we(".navbar-collapse").hasClass("show")&&we(".navbar-toggler").click()},1e3);let qO=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${qO}px`);window.addEventListener("resize",()=>{let t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)});const YO=document.querySelectorAll(".form-textarea");document.querySelectorAll(".textarea-counter .count");function KO(t){const e=t.target,n=e.parentElement.querySelector(".textarea-counter .count");n.textContent=e.value.length}YO.forEach(t=>{t.addEventListener("input",KO)});function Rp(){var t=document.querySelectorAll(".select2-results__options");t.forEach(function(e){e.scrollHeight>e.clientHeight?(e.classList.add("has-scrollbar"),e.classList.remove("no-scrollbar")):(e.classList.add("no-scrollbar"),e.classList.remove("has-scrollbar"))})}function ZO(){const t=new MutationObserver(n=>{for(let i of n)i.type==="attributes"&&i.attributeName==="class"&&i.target.classList.contains("select2-container--open")&&Rp()}),e={attributes:!0,subtree:!0,childList:!0};t.observe(document.body,e)}window.onload=function(){Rp(),ZO()};window.onresize=Rp;window.addEventListener("resize",t=>{});window.addEventListener("load",function(){setTimeout(()=>{},500)},!1);we(document).ready(function(){});(function(){var t=function(e){var n=this;this.curItem=null,this.curLevel=0,this.transitionEnd=r(),this.options={};var i={initElem:".push-menu"};e&&typeof e=="object"?this.options=s(i,e):this.options=i;function s(c,u){var d={};for(var h in c)c.hasOwnProperty(h)&&(d[h]=c[h]);for(var h in u)u.hasOwnProperty(h)&&c.hasOwnProperty(h)&&(d[h]=u[h]);return d}t.prototype.getCurrentItem=function(){return n.curItem},function(c){a(c)}(this);function r(){var c=document.createElement("div"),u={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var d in u)if(u.hasOwnProperty(d)&&c.style[d]!==void 0)return u[d]}function a(c){c.options.initElem.find(".btn-nav-back").on("click",function(u){u.preventDefault(),o(c,"back")}),c.options.initElem.find(".btn-nav-forward").on("click",function(u){u.preventDefault(),c.curItem=we(this).closest(".item.has-dropdown"),o(c,"forward")}),c.options.initElem.on("click",".has-dropdown > a",function(u){})}function o(c,u){l(c,u),u==="back"?c.curItem&&(c.curItem.removeClass("nav-dropdown-open nav-dropdown-active"),c.curItem=c.curItem.parent().closest(".item"),c.curItem.length&&c.curItem.addClass("nav-dropdown-open nav-dropdown-active")):c.curItem.addClass("nav-dropdown-open nav-dropdown-active")}function l(c,u){u==="back"?c.curLevel=c.curLevel>0?c.curLevel-1:0:u==="forward"?c.curLevel+=1:c.curLevel=0,c.options.initElem.children(".push-menu--nav").children(".push-menu--lvl").css({transform:"translateX(-"+c.curLevel*100+"%)"}),c.curLevel>0?c.options.initElem.find(".nav-toggle").addClass("back-visible"):c.options.initElem.find(".nav-toggle").removeClass("back-visible")}};we(document).ready(function(){we(".offices-direction .push-menu").each(function(){new t({initElem:we(this)})})})})();we(document).on("click",'a.anchor[href^="#"]',function(t){var e=we(this);we("html, body").stop().animate({scrollTop:we(e.attr("href")).offset().top-140},800),t.preventDefault()});const QO=document.querySelectorAll(".btn-read-more--check-up");QO.forEach(t=>{t.addEventListener("click",function(){const e=this.closest(".check-up--item");e.classList.contains("active")?(e.classList.remove("active"),this.textContent=transMoreDetails):(document.querySelectorAll(".check-up--item").forEach(n=>{n.classList.remove("active"),n.querySelector(".btn-read-more--check-up").textContent=transMoreDetails}),e.classList.add("active"),this.textContent=transCollapse)})});function OE(){if(window.innerWidth>=768){var t=document.getElementById("doctor-features--inner-1"),e=document.getElementById("doctor-features--inner-2");if(t&&e){var n=e.offsetHeight;t.style.height=n+"px"}}}window.onload=OE;window.onresize=OE;$(".contact-details").on("click",function(){var t=$(this).data("city"),e=$(this).data("affiliates")||[];$("#popup--contacts #modal-city").text(t);let n=$("#popup--contacts #affiliates-container");n.empty(),e.forEach(i=>{let s=$("<div>").addClass("col-12 col-xl-6"),r=$("<ul>").addClass("list-unstyled mb-0");i.address&&r.append(`<li><div class="offices-address">${i.address}</div></li>`),i.first_phone&&r.append(`<li><a href="tel:${i.first_phone}"><div class="link-phone">${i.first_phone}</div></a></li>`),i.second_phone&&r.append(`<li><a href="tel:${i.second_phone}"><div class="link-phone">${i.second_phone}</div></a></li>`),i.hours&&r.append(`<li><div class="offices-time">${i.hours}</div></li>`),i.email&&r.append(`<li><a href="mailto:${i.email}"><div class="offices-email">${i.email}</div></a></li>`),s.append(r),i.latitude&&s.append(`<input type="hidden" id="first-latitude" value="${i.latitude}">`),i.longitude&&s.append(`<input type="hidden" id="first-longitude" value="${i.longitude}">`),n.append(s)}),JO(e)});function JO(t){[{elementId:"map",center:{lat:50.45668411158,lng:30.50518209469263},zoom:7,tourStops:t.filter(n=>n.latitude&&n.longitude&&n.address).map(n=>({position:{lat:parseFloat(n.latitude),lng:parseFloat(n.longitude)},title:n.address}))}].forEach(({elementId:n,zoom:i,tourStops:s})=>{const r=document.getElementById(n);if(r){const a=new google.maps.LatLngBounds,o=new google.maps.Map(r,{zoom:i,disableDefaultUI:!0,scaleControl:!0,zoomControl:!0,scrollwheel:!1,mapId:"cd19383a34cacd50",styles:[{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{visibility:"off"}]}]}),l=new google.maps.InfoWindow;s.forEach(({position:c,title:u})=>{a.extend(c);const d=document.createElement("div");d.className="map-marker-place";const h=new google.maps.marker.AdvancedMarkerView({position:c,map:o,title:`${u}`,content:d});h.addListener("click",({domEvent:p,latLng:f})=>{const{target:m}=p;l.close(),l.setContent(h.title),l.open(h.map,h)})}),o.fitBounds(a),o.data.setStyle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:1.5,fillColor:"#dce2ff",fillOpacity:.25})}})}var kE={exports:{}};/*!
 * dist/inputmask
 * https://github.com/RobinHerbots/Inputmask
 * Copyright (c) 2010 - 2024 Robin Herbots
 * Licensed under the MIT license
 * Version: 5.0.9
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:kv,function(){return function(){var n={3976:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default={_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:function(){},onincomplete:function(){},oncleared:function(){},repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:function(){},onBeforeMask:null,onBeforePaste:function(l,c){return typeof c.onBeforeMask=="function"?c.onBeforeMask.call(this,l,c):l},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:function(){},skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0,usePrototypeDefinitions:!0,validationEventTimeOut:3e3,substitutes:{}}},7392:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default={9:{validator:"[0-9-]",definitionSymbol:"*"},a:{validator:"[A-Za-z--]",definitionSymbol:"*"},"*":{validator:"[0-9-A-Za-z--]"}}},253:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(l,c,u){if(u===void 0)return l.__data?l.__data[c]:null;l.__data=l.__data||{},l.__data[c]=u}},3776:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.Event=void 0,o.off=function(_,b){var y,T;return v(this[0])&&_&&(y=this[0].eventRegistry,T=this[0],_.split(" ").forEach(function(x){var S=h(x.split("."),2);(function(M,w){var E,C,P=[];if(M.length>0)if(b===void 0)for(E=0,C=y[M][w].length;E<C;E++)P.push({ev:M,namespace:w&&w.length>0?w:"global",handler:y[M][w][E]});else P.push({ev:M,namespace:w&&w.length>0?w:"global",handler:b});else if(w.length>0){for(var A in y)for(var R in y[A])if(R===w)if(b===void 0)for(E=0,C=y[A][R].length;E<C;E++)P.push({ev:A,namespace:R,handler:y[A][R][E]});else P.push({ev:A,namespace:R,handler:b})}return P})(S[0],S[1]).forEach(function(M){var w=M.ev,E=M.handler;(function(C,P,A){if(C in y==1)if(T.removeEventListener?T.removeEventListener(C,A,!1):T.detachEvent&&T.detachEvent("on".concat(C),A),P==="global")for(var R in y[C])y[C][R].splice(y[C][R].indexOf(A),1);else y[C][P].splice(y[C][P].indexOf(A),1)})(w,M.namespace,E)})})),this},o.on=function(_,b){if(v(this[0])){var y=this[0].eventRegistry,T=this[0];_.split(" ").forEach(function(x){var S=h(x.split("."),2),M=S[0],w=S[1];(function(E,C){T.addEventListener?T.addEventListener(E,b,!1):T.attachEvent&&T.attachEvent("on".concat(E),b),y[E]=y[E]||{},y[E][C]=y[E][C]||[],y[E][C].push(b)})(M,w===void 0?"global":w)})}return this},o.trigger=function(_){var b=arguments;if(v(this[0]))for(var y=this[0].eventRegistry,T=this[0],x=typeof _=="string"?_.split(" "):[_.type],S=0;S<x.length;S++){var M=x[S].split("."),w=M[0],E=M[1]||"global";if(m!==void 0&&E==="global"){var C,P={bubbles:!0,cancelable:!0,composed:!0,detail:arguments[1]};if(m.createEvent){try{w==="input"?(P.inputType="insertText",C=new InputEvent(w,P)):C=new CustomEvent(w,P)}catch{(C=m.createEvent("CustomEvent")).initCustomEvent(w,P.bubbles,P.cancelable,P.detail)}_.type&&(0,u.default)(C,_),T.dispatchEvent(C)}else(C=m.createEventObject()).eventType=w,C.detail=arguments[1],_.type&&(0,u.default)(C,_),T.fireEvent("on"+C.eventType,C)}else if(y[w]!==void 0){arguments[0]=arguments[0].type?arguments[0]:d.default.Event(arguments[0]),arguments[0].detail=arguments.slice(1);var A=y[w];(E==="global"?Object.values(A).flat():A[E]).forEach(function(R){return R.apply(T,b)})}}return this};var c=f(l(9380)),u=f(l(600)),d=f(l(4963));function h(_,b){return function(y){if(Array.isArray(y))return y}(_)||function(y,T){var x=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(x!=null){var S,M,w,E,C=[],P=!0,A=!1;try{if(w=(x=x.call(y)).next,T!==0)for(;!(P=(S=w.call(x)).done)&&(C.push(S.value),C.length!==T);P=!0);}catch(R){A=!0,M=R}finally{try{if(!P&&x.return!=null&&(E=x.return(),Object(E)!==E))return}finally{if(A)throw M}}return C}}(_,b)||function(y,T){if(y){if(typeof y=="string")return p(y,T);var x=Object.prototype.toString.call(y).slice(8,-1);if(x==="Object"&&y.constructor&&(x=y.constructor.name),x==="Map"||x==="Set")return Array.from(y);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return p(y,T)}}(_,b)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p(_,b){(b==null||b>_.length)&&(b=_.length);for(var y=0,T=new Array(b);y<b;y++)T[y]=_[y];return T}function f(_){return _&&_.__esModule?_:{default:_}}var m=c.default.document;function v(_){return _ instanceof Element}var g=o.Event=void 0;typeof c.default.CustomEvent=="function"?o.Event=g=c.default.CustomEvent:c.default.Event&&m&&m.createEvent?(o.Event=g=function(_,b){b=b||{bubbles:!1,cancelable:!1,composed:!0,detail:void 0};var y=m.createEvent("CustomEvent");return y.initCustomEvent(_,b.bubbles,b.cancelable,b.detail),y},g.prototype=c.default.Event.prototype):typeof Event<"u"&&(o.Event=g=Event)},600:function(a,o){function l(c){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},l(c)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function c(){var u,d,h,p,f,m,v=arguments[0]||{},g=1,_=arguments.length,b=!1;for(typeof v=="boolean"&&(b=v,v=arguments[g]||{},g++),l(v)!=="object"&&typeof v!="function"&&(v={});g<_;g++)if((u=arguments[g])!=null)for(d in u)h=v[d],v!==(p=u[d])&&(b&&p&&(Object.prototype.toString.call(p)==="[object Object]"||(f=Array.isArray(p)))?(f?(f=!1,m=h&&Array.isArray(h)?h:[]):m=h&&Object.prototype.toString.call(h)==="[object Object]"?h:{},v[d]=c(b,m,p)):p!==void 0&&(v[d]=p));return v}},4963:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=p(l(9380)),u=p(l(253)),d=l(3776),h=p(l(600));function p(v){return v&&v.__esModule?v:{default:v}}var f=c.default.document;function m(v){return v instanceof m?v:this instanceof m?void(v!=null&&v!==c.default&&(this[0]=v.nodeName?v:v[0]!==void 0&&v[0].nodeName?v[0]:f.querySelector(v),this[0]!==void 0&&this[0]!==null&&(this[0].eventRegistry=this[0].eventRegistry||{}))):new m(v)}m.prototype={on:d.on,off:d.off,trigger:d.trigger},m.extend=h.default,m.data=u.default,m.Event=d.Event,o.default=m},9845:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.mobile=o.iphone=o.ie=void 0;var c,u=(c=l(9380))&&c.__esModule?c:{default:c},d=u.default.navigator&&u.default.navigator.userAgent||"";o.ie=d.indexOf("MSIE ")>0||d.indexOf("Trident/")>0,o.mobile=u.default.navigator&&u.default.navigator.userAgentData&&u.default.navigator.userAgentData.mobile||u.default.navigator&&u.default.navigator.maxTouchPoints||"ontouchstart"in u.default,o.iphone=/iphone/i.test(d)},7184:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(c){return c.replace(l,"\\$1")};var l=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim")},6030:function(a,o,l){function c(w){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},c(w)}Object.defineProperty(o,"__esModule",{value:!0}),o.EventHandlers=void 0;var u,d=l(9845),h=(u=l(9380))&&u.__esModule?u:{default:u},p=l(7760),f=l(2839),m=l(8711),v=l(7215),g=l(4713);function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function(){return E};var w,E={},C=Object.prototype,P=C.hasOwnProperty,A=Object.defineProperty||function(z,L,Q){z[L]=Q.value},R=typeof Symbol=="function"?Symbol:{},N=R.iterator||"@@iterator",U=R.asyncIterator||"@@asyncIterator",k=R.toStringTag||"@@toStringTag";function D(z,L,Q){return Object.defineProperty(z,L,{value:Q,enumerable:!0,configurable:!0,writable:!0}),z[L]}try{D({},"")}catch{D=function(L,Q,oe){return L[Q]=oe}}function W(z,L,Q,oe){var he=L&&L.prototype instanceof q?L:q,de=Object.create(he.prototype),ee=new Pe(oe||[]);return A(de,"_invoke",{value:fe(z,Q,ee)}),de}function O(z,L,Q){try{return{type:"normal",arg:z.call(L,Q)}}catch(oe){return{type:"throw",arg:oe}}}E.wrap=W;var B="suspendedStart",V="suspendedYield",j="executing",Y="completed",H={};function q(){}function K(){}function G(){}var te={};D(te,N,function(){return this});var ue=Object.getPrototypeOf,se=ue&&ue(ue(Ce([])));se&&se!==C&&P.call(se,N)&&(te=se);var X=G.prototype=q.prototype=Object.create(te);function ne(z){["next","throw","return"].forEach(function(L){D(z,L,function(Q){return this._invoke(L,Q)})})}function F(z,L){function Q(he,de,ee,ie){var le=O(z[he],z,de);if(le.type!=="throw"){var ye=le.arg,Se=ye.value;return Se&&c(Se)=="object"&&P.call(Se,"__await")?L.resolve(Se.__await).then(function(_e){Q("next",_e,ee,ie)},function(_e){Q("throw",_e,ee,ie)}):L.resolve(Se).then(function(_e){ye.value=_e,ee(ye)},function(_e){return Q("throw",_e,ee,ie)})}ie(le.arg)}var oe;A(this,"_invoke",{value:function(he,de){function ee(){return new L(function(ie,le){Q(he,de,ie,le)})}return oe=oe?oe.then(ee,ee):ee()}})}function fe(z,L,Q){var oe=B;return function(he,de){if(oe===j)throw new Error("Generator is already running");if(oe===Y){if(he==="throw")throw de;return{value:w,done:!0}}for(Q.method=he,Q.arg=de;;){var ee=Q.delegate;if(ee){var ie=ve(ee,Q);if(ie){if(ie===H)continue;return ie}}if(Q.method==="next")Q.sent=Q._sent=Q.arg;else if(Q.method==="throw"){if(oe===B)throw oe=Y,Q.arg;Q.dispatchException(Q.arg)}else Q.method==="return"&&Q.abrupt("return",Q.arg);oe=j;var le=O(z,L,Q);if(le.type==="normal"){if(oe=Q.done?Y:V,le.arg===H)continue;return{value:le.arg,done:Q.done}}le.type==="throw"&&(oe=Y,Q.method="throw",Q.arg=le.arg)}}}function ve(z,L){var Q=L.method,oe=z.iterator[Q];if(oe===w)return L.delegate=null,Q==="throw"&&z.iterator.return&&(L.method="return",L.arg=w,ve(z,L),L.method==="throw")||Q!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),H;var he=O(oe,z.iterator,L.arg);if(he.type==="throw")return L.method="throw",L.arg=he.arg,L.delegate=null,H;var de=he.arg;return de?de.done?(L[z.resultName]=de.value,L.next=z.nextLoc,L.method!=="return"&&(L.method="next",L.arg=w),L.delegate=null,H):de:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,H)}function pe(z){var L={tryLoc:z[0]};1 in z&&(L.catchLoc=z[1]),2 in z&&(L.finallyLoc=z[2],L.afterLoc=z[3]),this.tryEntries.push(L)}function Me(z){var L=z.completion||{};L.type="normal",delete L.arg,z.completion=L}function Pe(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(pe,this),this.reset(!0)}function Ce(z){if(z||z===""){var L=z[N];if(L)return L.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var Q=-1,oe=function he(){for(;++Q<z.length;)if(P.call(z,Q))return he.value=z[Q],he.done=!1,he;return he.value=w,he.done=!0,he};return oe.next=oe}}throw new TypeError(c(z)+" is not iterable")}return K.prototype=G,A(X,"constructor",{value:G,configurable:!0}),A(G,"constructor",{value:K,configurable:!0}),K.displayName=D(G,k,"GeneratorFunction"),E.isGeneratorFunction=function(z){var L=typeof z=="function"&&z.constructor;return!!L&&(L===K||(L.displayName||L.name)==="GeneratorFunction")},E.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,G):(z.__proto__=G,D(z,k,"GeneratorFunction")),z.prototype=Object.create(X),z},E.awrap=function(z){return{__await:z}},ne(F.prototype),D(F.prototype,U,function(){return this}),E.AsyncIterator=F,E.async=function(z,L,Q,oe,he){he===void 0&&(he=Promise);var de=new F(W(z,L,Q,oe),he);return E.isGeneratorFunction(L)?de:de.next().then(function(ee){return ee.done?ee.value:de.next()})},ne(X),D(X,k,"Generator"),D(X,N,function(){return this}),D(X,"toString",function(){return"[object Generator]"}),E.keys=function(z){var L=Object(z),Q=[];for(var oe in L)Q.push(oe);return Q.reverse(),function he(){for(;Q.length;){var de=Q.pop();if(de in L)return he.value=de,he.done=!1,he}return he.done=!0,he}},E.values=Ce,Pe.prototype={constructor:Pe,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(Me),!z)for(var L in this)L.charAt(0)==="t"&&P.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=w)},stop:function(){this.done=!0;var z=this.tryEntries[0].completion;if(z.type==="throw")throw z.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var L=this;function Q(le,ye){return de.type="throw",de.arg=z,L.next=le,ye&&(L.method="next",L.arg=w),!!ye}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var he=this.tryEntries[oe],de=he.completion;if(he.tryLoc==="root")return Q("end");if(he.tryLoc<=this.prev){var ee=P.call(he,"catchLoc"),ie=P.call(he,"finallyLoc");if(ee&&ie){if(this.prev<he.catchLoc)return Q(he.catchLoc,!0);if(this.prev<he.finallyLoc)return Q(he.finallyLoc)}else if(ee){if(this.prev<he.catchLoc)return Q(he.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<he.finallyLoc)return Q(he.finallyLoc)}}}},abrupt:function(z,L){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var oe=this.tryEntries[Q];if(oe.tryLoc<=this.prev&&P.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var he=oe;break}}he&&(z==="break"||z==="continue")&&he.tryLoc<=L&&L<=he.finallyLoc&&(he=null);var de=he?he.completion:{};return de.type=z,de.arg=L,he?(this.method="next",this.next=he.finallyLoc,H):this.complete(de)},complete:function(z,L){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&L&&(this.next=L),H},finish:function(z){for(var L=this.tryEntries.length-1;L>=0;--L){var Q=this.tryEntries[L];if(Q.finallyLoc===z)return this.complete(Q.completion,Q.afterLoc),Me(Q),H}},catch:function(z){for(var L=this.tryEntries.length-1;L>=0;--L){var Q=this.tryEntries[L];if(Q.tryLoc===z){var oe=Q.completion;if(oe.type==="throw"){var he=oe.arg;Me(Q)}return he}}throw new Error("illegal catch attempt")},delegateYield:function(z,L,Q){return this.delegate={iterator:Ce(z),resultName:L,nextLoc:Q},this.method==="next"&&(this.arg=w),H}},E}function b(w,E){var C=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!C){if(Array.isArray(w)||(C=function(k,D){if(k){if(typeof k=="string")return y(k,D);var W=Object.prototype.toString.call(k).slice(8,-1);if(W==="Object"&&k.constructor&&(W=k.constructor.name),W==="Map"||W==="Set")return Array.from(k);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return y(k,D)}}(w))||E){C&&(w=C);var P=0,A=function(){};return{s:A,n:function(){return P>=w.length?{done:!0}:{done:!1,value:w[P++]}},e:function(k){throw k},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R,N=!0,U=!1;return{s:function(){C=C.call(w)},n:function(){var k=C.next();return N=k.done,k},e:function(k){U=!0,R=k},f:function(){try{N||C.return==null||C.return()}finally{if(U)throw R}}}}function y(w,E){(E==null||E>w.length)&&(E=w.length);for(var C=0,P=new Array(E);C<E;C++)P[C]=w[C];return P}function T(w,E,C,P,A,R,N){try{var U=w[R](N),k=U.value}catch(D){return void C(D)}U.done?E(k):Promise.resolve(k).then(P,A)}var x,S,M=o.EventHandlers={keyEvent:function(w,E,C,P,A){var R=this.inputmask,N=R.opts,U=R.dependencyLib,k=R.maskset,D=this,W=U(D),O=w.key,B=m.caret.call(R,D),V=N.onKeyDown.call(this,w,m.getBuffer.call(R),B,N);if(V!==void 0)return V;if(O===f.keys.Backspace||O===f.keys.Delete||d.iphone&&O===f.keys.BACKSPACE_SAFARI||w.ctrlKey&&O===f.keys.x&&!("oncut"in D))w.preventDefault(),v.handleRemove.call(R,D,O,B),(0,p.writeBuffer)(D,m.getBuffer.call(R,!0),k.p,w,D.inputmask._valueGet()!==m.getBuffer.call(R).join(""));else if(O===f.keys.End||O===f.keys.PageDown){w.preventDefault();var j=m.seekNext.call(R,m.getLastValidPosition.call(R));m.caret.call(R,D,w.shiftKey?B.begin:j,j,!0)}else O===f.keys.Home&&!w.shiftKey||O===f.keys.PageUp?(w.preventDefault(),m.caret.call(R,D,0,w.shiftKey?B.begin:0,!0)):N.undoOnEscape&&O===f.keys.Escape&&w.altKey!==!0?((0,p.checkVal)(D,!0,!1,R.undoValue.split("")),W.trigger("click")):O!==f.keys.Insert||w.shiftKey||w.ctrlKey||R.userOptions.insertMode!==void 0?N.tabThrough===!0&&O===f.keys.Tab?w.shiftKey===!0?(B.end=m.seekPrevious.call(R,B.end,!0),g.getTest.call(R,B.end-1).match.static===!0&&B.end--,B.begin=m.seekPrevious.call(R,B.end,!0),B.begin>=0&&B.end>0&&(w.preventDefault(),m.caret.call(R,D,B.begin,B.end))):(B.begin=m.seekNext.call(R,B.begin,!0),B.end=m.seekNext.call(R,B.begin,!0),B.end<k.maskLength&&B.end--,B.begin<=k.maskLength&&(w.preventDefault(),m.caret.call(R,D,B.begin,B.end))):w.shiftKey||(N.insertModeVisual&&N.insertMode===!1?O===f.keys.ArrowRight?setTimeout(function(){var Y=m.caret.call(R,D);m.caret.call(R,D,Y.begin)},0):O===f.keys.ArrowLeft&&setTimeout(function(){var Y=m.translatePosition.call(R,D.inputmask.caretPos.begin);m.translatePosition.call(R,D.inputmask.caretPos.end),R.isRTL?m.caret.call(R,D,Y+(Y===k.maskLength?0:1)):m.caret.call(R,D,Y-(Y===0?0:1))},0):R.keyEventHook===void 0||R.keyEventHook(w)):v.isSelection.call(R,B)?N.insertMode=!N.insertMode:(N.insertMode=!N.insertMode,m.caret.call(R,D,B.begin,B.begin));return R.isComposing=O==f.keys.Process||O==f.keys.Unidentified,R.ignorable=O.length>1&&!(D.tagName.toLowerCase()==="textarea"&&O==f.keys.Enter),M.keypressEvent.call(this,w,E,C,P,A)},keypressEvent:function(w,E,C,P,A){var R=this.inputmask||this,N=R.opts,U=R.dependencyLib,k=R.maskset,D=R.el,W=U(D),O=w.key;if(E===!0||w.ctrlKey&&w.altKey&&!R.ignorable||!(w.ctrlKey||w.metaKey||R.ignorable)){if(O){var B,V=E?{begin:A,end:A}:m.caret.call(R,D);E||(O=N.substitutes[O]||O),k.writeOutBuffer=!0;var j=v.isValid.call(R,V,O,P,void 0,void 0,void 0,E);if(j!==!1&&(m.resetMaskSet.call(R,!0),B=j.caret!==void 0?j.caret:m.seekNext.call(R,j.pos.begin?j.pos.begin:j.pos),k.p=B),B=N.numericInput&&j.caret===void 0?m.seekPrevious.call(R,B):B,C!==!1&&(setTimeout(function(){N.onKeyValidation.call(D,O,j)},0),k.writeOutBuffer&&j!==!1)){var Y=m.getBuffer.call(R);(0,p.writeBuffer)(D,Y,B,w,E!==!0)}if(w.preventDefault(),E)return j!==!1&&(j.forwardPosition=B),j}}else O===f.keys.Enter&&R.undoValue!==R._valueGet(!0)&&(R.undoValue=R._valueGet(!0),setTimeout(function(){W.trigger("change")},0))},pasteEvent:(x=_().mark(function w(E){var C,P,A,R,N,U;return _().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:C=function(D,W,O,B,V){var j=m.caret.call(D,W,void 0,void 0,!0),Y=O.substr(0,j.begin),H=O.substr(j.end,O.length);if(Y==(D.isRTL?m.getBufferTemplate.call(D).slice().reverse():m.getBufferTemplate.call(D)).slice(0,j.begin).join("")&&(Y=""),H==(D.isRTL?m.getBufferTemplate.call(D).slice().reverse():m.getBufferTemplate.call(D)).slice(j.end).join("")&&(H=""),B=Y+B+H,D.isRTL&&R.numericInput!==!0){B=B.split("");var q,K=b(m.getBufferTemplate.call(D));try{for(K.s();!(q=K.n()).done;){var G=q.value;B[0]===G&&B.shift()}}catch(ue){K.e(ue)}finally{K.f()}B=B.reverse().join("")}var te=B;if(typeof V=="function"){if((te=V.call(D,te,R))===!1)return!1;te||(te=O)}(0,p.checkVal)(W,!0,!1,te.toString().split(""),E)},P=this,A=this.inputmask,R=A.opts,N=A._valueGet(!0),A.skipInputEvent=!0,E.clipboardData&&E.clipboardData.getData?U=E.clipboardData.getData("text/plain"):h.default.clipboardData&&h.default.clipboardData.getData&&(U=h.default.clipboardData.getData("Text")),C(A,P,N,U,R.onBeforePaste),E.preventDefault();case 7:case"end":return k.stop()}},w,this)}),S=function(){var w=this,E=arguments;return new Promise(function(C,P){var A=x.apply(w,E);function R(U){T(A,C,P,R,N,"next",U)}function N(U){T(A,C,P,R,N,"throw",U)}R(void 0)})},function(w){return S.apply(this,arguments)}),inputFallBackEvent:function(w){var E=this.inputmask,C=E.opts,P=E.dependencyLib,A,R=this,N=R.inputmask._valueGet(!0),U=(E.isRTL?m.getBuffer.call(E).slice().reverse():m.getBuffer.call(E)).join(""),k=m.caret.call(E,R,void 0,void 0,!0);if(U!==N){if(A=function(W,O,B){for(var V,j,Y,H=W.substr(0,B.begin).split(""),q=W.substr(B.begin).split(""),K=O.substr(0,B.begin).split(""),G=O.substr(B.begin).split(""),te=H.length>=K.length?H.length:K.length,ue=q.length>=G.length?q.length:G.length,se="",X=[],ne="~";H.length<te;)H.push(ne);for(;K.length<te;)K.push(ne);for(;q.length<ue;)q.unshift(ne);for(;G.length<ue;)G.unshift(ne);var F=H.concat(q),fe=K.concat(G);for(j=0,V=F.length;j<V;j++)switch(Y=g.getPlaceholder.call(E,m.translatePosition.call(E,j)),se){case"insertText":fe[j-1]===F[j]&&B.begin==F.length-1&&X.push(F[j]),j=V;break;case"insertReplacementText":case"deleteContentBackward":F[j]===ne?B.end++:j=V;break;default:F[j]!==fe[j]&&(F[j+1]!==ne&&F[j+1]!==Y&&F[j+1]!==void 0||(fe[j]!==Y||fe[j+1]!==ne)&&fe[j]!==ne?fe[j+1]===ne&&fe[j]===F[j+1]?(se="insertText",X.push(F[j]),B.begin--,B.end--):F[j]!==Y&&F[j]!==ne&&(F[j+1]===ne||fe[j]!==F[j]&&fe[j+1]===F[j+1])?(se="insertReplacementText",X.push(F[j]),B.begin--):F[j]===ne?(se="deleteContentBackward",(m.isMask.call(E,m.translatePosition.call(E,j),!0)||fe[j]===C.radixPoint)&&B.end++):j=V:(se="insertText",X.push(F[j]),B.begin--,B.end--))}return{action:se,data:X,caret:B}}(N,U,k),(R.inputmask.shadowRoot||R.ownerDocument).activeElement!==R&&R.focus(),(0,p.writeBuffer)(R,m.getBuffer.call(E)),m.caret.call(E,R,k.begin,k.end,!0),!d.mobile&&E.skipNextInsert&&w.inputType==="insertText"&&A.action==="insertText"&&E.isComposing)return!1;switch(w.inputType==="insertCompositionText"&&A.action==="insertText"&&E.isComposing?E.skipNextInsert=!0:E.skipNextInsert=!1,A.action){case"insertText":case"insertReplacementText":A.data.forEach(function(W,O){var B=new P.Event("keypress");B.key=W,E.ignorable=!1,M.keypressEvent.call(R,B)}),setTimeout(function(){E.$el.trigger("keyup")},0);break;case"deleteContentBackward":var D=new P.Event("keydown");D.key=f.keys.Backspace,M.keyEvent.call(R,D);break;default:(0,p.applyInputValue)(R,N),m.caret.call(E,R,k.begin,k.end,!0)}w.preventDefault()}},setValueEvent:function(w){var E=this.inputmask,C=E.dependencyLib,P=this,A=w&&w.detail?w.detail[0]:arguments[1];A===void 0&&(A=P.inputmask._valueGet(!0)),(0,p.applyInputValue)(P,A,new C.Event("input")),(w.detail&&w.detail[1]!==void 0||arguments[2]!==void 0)&&m.caret.call(E,P,w.detail?w.detail[1]:arguments[2])},focusEvent:function(w){var E=this.inputmask,C=E.opts,P=E&&E._valueGet();C.showMaskOnFocus&&P!==m.getBuffer.call(E).join("")&&(0,p.writeBuffer)(this,m.getBuffer.call(E),m.seekNext.call(E,m.getLastValidPosition.call(E))),C.positionCaretOnTab!==!0||E.mouseEnter!==!1||v.isComplete.call(E,m.getBuffer.call(E))&&m.getLastValidPosition.call(E)!==-1||M.clickEvent.apply(this,[w,!0]),E.undoValue=E&&E._valueGet(!0)},invalidEvent:function(w){this.inputmask.validationEvent=!0},mouseleaveEvent:function(){var w=this.inputmask,E=w.opts,C=this;w.mouseEnter=!1,E.clearMaskOnLostFocus&&(C.inputmask.shadowRoot||C.ownerDocument).activeElement!==C&&(0,p.HandleNativePlaceholder)(C,w.originalPlaceholder)},clickEvent:function(w,E){var C=this.inputmask;C.clicked++;var P=this;if((P.inputmask.shadowRoot||P.ownerDocument).activeElement===P){var A=m.determineNewCaretPosition.call(C,m.caret.call(C,P),E);A!==void 0&&m.caret.call(C,P,A)}},cutEvent:function(w){var E=this.inputmask,C=E.maskset,P=this,A=m.caret.call(E,P),R=E.isRTL?m.getBuffer.call(E).slice(A.end,A.begin):m.getBuffer.call(E).slice(A.begin,A.end),N=E.isRTL?R.reverse().join(""):R.join("");h.default.navigator&&h.default.navigator.clipboard?h.default.navigator.clipboard.writeText(N):h.default.clipboardData&&h.default.clipboardData.getData&&h.default.clipboardData.setData("Text",N),v.handleRemove.call(E,P,f.keys.Delete,A),(0,p.writeBuffer)(P,m.getBuffer.call(E),C.p,w,E.undoValue!==E._valueGet(!0))},blurEvent:function(w){var E=this.inputmask,C=E.opts,P=E.dependencyLib;E.clicked=0;var A=P(this),R=this;if(R.inputmask){(0,p.HandleNativePlaceholder)(R,E.originalPlaceholder);var N=R.inputmask._valueGet(),U=m.getBuffer.call(E).slice();N!==""&&(C.clearMaskOnLostFocus&&(m.getLastValidPosition.call(E)===-1&&N===m.getBufferTemplate.call(E).join("")?U=[]:p.clearOptionalTail.call(E,U)),v.isComplete.call(E,U)===!1&&(setTimeout(function(){A.trigger("incomplete")},0),C.clearIncomplete&&(m.resetMaskSet.call(E,!1),U=C.clearMaskOnLostFocus?[]:m.getBufferTemplate.call(E).slice())),(0,p.writeBuffer)(R,U,void 0,w)),N=E._valueGet(!0),E.undoValue!==N&&(N!=""||E.undoValue!=m.getBufferTemplate.call(E).join("")||E.undoValue==m.getBufferTemplate.call(E).join("")&&E.maskset.validPositions.length>0)&&(E.undoValue=N,A.trigger("change"))}},mouseenterEvent:function(){var w=this.inputmask,E=w.opts.showMaskOnHover,C=this;if(w.mouseEnter=!0,(C.inputmask.shadowRoot||C.ownerDocument).activeElement!==C){var P=(w.isRTL?m.getBufferTemplate.call(w).slice().reverse():m.getBufferTemplate.call(w)).join("");E&&(0,p.HandleNativePlaceholder)(C,P)}},submitEvent:function(){var w=this.inputmask,E=w.opts;w.undoValue!==w._valueGet(!0)&&w.$el.trigger("change"),m.getLastValidPosition.call(w)===-1&&w._valueGet&&w._valueGet()===m.getBufferTemplate.call(w).join("")&&w._valueSet(""),E.clearIncomplete&&v.isComplete.call(w,m.getBuffer.call(w))===!1&&w._valueSet(""),E.removeMaskOnSubmit&&(w._valueSet(w.unmaskedvalue(),!0),setTimeout(function(){(0,p.writeBuffer)(w.el,m.getBuffer.call(w))},0))},resetEvent:function(){var w=this.inputmask;w.refreshValue=!0,setTimeout(function(){(0,p.applyInputValue)(w.el,w._valueGet(!0))},0)}}},9716:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.EventRuler=void 0;var c,u=l(7760),d=(c=l(2394))&&c.__esModule?c:{default:c},h=l(2839),p=l(8711);o.EventRuler={on:function(f,m,v){var g=f.inputmask.dependencyLib,_=function(b){b.originalEvent&&(b=b.originalEvent||b,arguments[0]=b);var y,T=this,x=T.inputmask,S=x?x.opts:void 0;if(x===void 0&&this.nodeName!=="FORM"){var M=g.data(T,"_inputmask_opts");g(T).off(),M&&new d.default(M).mask(T)}else{if(["submit","reset","setvalue"].includes(b.type)||this.nodeName==="FORM"||!(T.disabled||T.readOnly&&!(b.type==="keydown"&&b.ctrlKey&&b.key===h.keys.c||S.tabThrough===!1&&b.key===h.keys.Tab))){switch(b.type){case"input":if(x.skipInputEvent===!0)return x.skipInputEvent=!1,b.preventDefault();break;case"click":case"focus":return x.validationEvent?(x.validationEvent=!1,f.blur(),(0,u.HandleNativePlaceholder)(f,(x.isRTL?p.getBufferTemplate.call(x).slice().reverse():p.getBufferTemplate.call(x)).join("")),setTimeout(function(){f.focus()},S.validationEventTimeOut),!1):(y=arguments,void setTimeout(function(){f.inputmask&&v.apply(T,y)},0))}var w=v.apply(T,arguments);return w===!1&&(b.preventDefault(),b.stopPropagation()),w}b.preventDefault()}};["submit","reset"].includes(m)?(_=_.bind(f),f.form!==null&&g(f.form).on(m,_)):g(f).on(m,_),f.inputmask.events[m]=f.inputmask.events[m]||[],f.inputmask.events[m].push(_)},off:function(f,m){if(f.inputmask&&f.inputmask.events){var v=f.inputmask.dependencyLib,g=f.inputmask.events;for(var _ in m&&((g=[])[m]=f.inputmask.events[m]),g){for(var b=g[_];b.length>0;){var y=b.pop();["submit","reset"].includes(_)?f.form!==null&&v(f.form).off(_,y):v(f).off(_,y)}delete f.inputmask.events[_]}}}}},219:function(a,o,l){var c=_(l(7184)),u=_(l(2394)),d=l(2839),h=l(8711),p=l(4713);function f(O,B){return function(V){if(Array.isArray(V))return V}(O)||function(V,j){var Y=V==null?null:typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(Y!=null){var H,q,K,G,te=[],ue=!0,se=!1;try{if(K=(Y=Y.call(V)).next,j!==0)for(;!(ue=(H=K.call(Y)).done)&&(te.push(H.value),te.length!==j);ue=!0);}catch(X){se=!0,q=X}finally{try{if(!ue&&Y.return!=null&&(G=Y.return(),Object(G)!==G))return}finally{if(se)throw q}}return te}}(O,B)||function(V,j){if(V){if(typeof V=="string")return m(V,j);var Y=Object.prototype.toString.call(V).slice(8,-1);if(Y==="Object"&&V.constructor&&(Y=V.constructor.name),Y==="Map"||Y==="Set")return Array.from(V);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return m(V,j)}}(O,B)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m(O,B){(B==null||B>O.length)&&(B=O.length);for(var V=0,j=new Array(B);V<B;V++)j[V]=O[V];return j}function v(O){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},v(O)}function g(O,B){for(var V=0;V<B.length;V++){var j=B[V];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(O,(Y=j.key,H=void 0,H=function(q,K){if(v(q)!=="object"||q===null)return q;var G=q[Symbol.toPrimitive];if(G!==void 0){var te=G.call(q,K);if(v(te)!=="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(q)}(Y,"string"),v(H)==="symbol"?H:String(H)),j)}var Y,H}function _(O){return O&&O.__esModule?O:{default:O}}l(1313);var b=u.default.dependencyLib,y=function(){function O(j,Y,H,q){(function(K,G){if(!(K instanceof G))throw new TypeError("Cannot call a class as a function")})(this,O),this.mask=j,this.format=Y,this.opts=H,this.inputmask=q,this._date=new Date(1,0,1),this.initDateObject(j,this.opts,this.inputmask)}var B,V;return B=O,(V=[{key:"date",get:function(){return this._date===void 0&&(this._date=new Date(1,0,1),this.initDateObject(void 0,this.opts,this.inputmask)),this._date}},{key:"initDateObject",value:function(j,Y,H){var q;for(A(Y).lastIndex=0;q=A(Y).exec(this.format);){var K=/\d+$/.exec(q[0]),G=K?q[0][0]+"x":q[0],te=void 0;if(j!==void 0){if(K){var ue=A(Y).lastIndex,se=W.call(H,q.index,Y,H&&H.maskset);A(Y).lastIndex=ue,te=j.slice(0,j.indexOf(se.nextMatch[0]))}else{for(var X=q[0][0],ne=q.index;H&&(Y.placeholder[p.getTest.call(H,ne).match.placeholder]||p.getTest.call(H,ne).match.placeholder)===X;)ne++;var F=ne-q.index;te=j.slice(0,F||M[G]&&M[G][4]||G.length)}j=j.slice(te.length)}Object.prototype.hasOwnProperty.call(M,G)&&this.setValue(this,te,G,M[G][2],M[G][1])}}},{key:"setValue",value:function(j,Y,H,q,K){if(Y!==void 0)switch(q){case"ampm":j[q]=Y,j["raw"+q]=Y.replace(/\s/g,"_");break;case"month":if(H==="mmm"||H==="mmmm"){j[q]=U(H==="mmm"?x.monthNames.slice(0,12).findIndex(function(te){return Y.toLowerCase()===te.toLowerCase()})+1:x.monthNames.slice(12,24).findIndex(function(te){return Y.toLowerCase()===te.toLowerCase()})+1,2),j[q]=j[q]==="00"?"":j[q].toString(),j["raw"+q]=j[q];break}default:j[q]=Y.replace(/[^0-9]/g,"0"),j["raw"+q]=Y.replace(/\s/g,"_")}if(K!==void 0){var G=j[q];(q==="day"&&parseInt(G)===29||q==="month"&&parseInt(G)===2)&&(parseInt(j.day)!==29||parseInt(j.month)!==2||j.year!==""&&j.year!==void 0||j._date.setFullYear(2012,1,29)),q==="day"&&(S=!0,parseInt(G)===0&&(G=1)),q==="month"&&(S=!0),q==="year"&&(S=!0,G.length<M[H][4]&&(G=U(G,M[H][4],!0))),(G!==""&&!isNaN(G)||q==="ampm")&&K.call(j._date,G)}}},{key:"reset",value:function(){this._date=new Date(1,0,1)}},{key:"reInit",value:function(){this._date=void 0,this.date}}])&&g(B.prototype,V),Object.defineProperty(B,"prototype",{writable:!1}),O}(),T=new Date().getFullYear(),x=u.default.prototype.i18n,S=!1,M={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return U(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",function(O){var B=O?parseInt(O):0;return B>0&&B--,Date.prototype.setMonth.call(this,B)},"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",function(O){var B=O?parseInt(O):0;return B>0&&B--,Date.prototype.setMonth.call(this,B)},"month",function(){return U(Date.prototype.getMonth.call(this)+1,2)}],mmm:[x.monthNames.slice(0,12).join("|"),function(O){var B=x.monthNames.slice(0,12).findIndex(function(V){return O.toLowerCase()===V.toLowerCase()});return B!==-1&&Date.prototype.setMonth.call(this,B)},"month",function(){return x.monthNames.slice(0,12)[Date.prototype.getMonth.call(this)]}],mmmm:[x.monthNames.slice(12,24).join("|"),function(O){var B=x.monthNames.slice(12,24).findIndex(function(V){return O.toLowerCase()===V.toLowerCase()});return B!==-1&&Date.prototype.setMonth.call(this,B)},"month",function(){return x.monthNames.slice(12,24)[Date.prototype.getMonth.call(this)]}],yy:["[0-9]{2}",function(O){var B=new Date().getFullYear().toString().slice(0,2);Date.prototype.setFullYear.call(this,"".concat(B).concat(O))},"year",function(){return U(Date.prototype.getFullYear.call(this),2)},2],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return U(Date.prototype.getFullYear.call(this),4)},4],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return U(Date.prototype.getHours.call(this),2)}],hx:[function(O){return"[0-9]{".concat(O,"}")},Date.prototype.setHours,"hours",function(O){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return U(Date.prototype.getHours.call(this),2)}],Hx:[function(O){return"[0-9]{".concat(O,"}")},Date.prototype.setHours,"hours",function(O){return function(){return U(Date.prototype.getHours.call(this),O)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return U(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return U(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return U(Date.prototype.getMilliseconds.call(this),3)},3],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return U(Date.prototype.getMilliseconds.call(this),2)},2],t:["[ap]",E,"ampm",C,1],tt:["[ap]m",E,"ampm",C,2],T:["[AP]",E,"ampm",C,1],TT:["[AP]M",E,"ampm",C,2],Z:[".*",void 0,"Z",function(){var O=this.toString().match(/\((.+)\)/)[1];return O.includes(" ")&&(O=(O=O.replace("-"," ").toUpperCase()).split(" ").map(function(B){return f(B,1)[0]}).join("")),O}],o:[""],S:[""]},w={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function E(O){var B=this.getHours();O.toLowerCase().includes("p")?this.setHours(B+12):O.toLowerCase().includes("a")&&B>=12&&this.setHours(B-12)}function C(){var O=this.getHours();return(O=O||12)>=12?"PM":"AM"}function P(O){var B=/\d+$/.exec(O[0]);if(B&&B[0]!==void 0){var V=M[O[0][0]+"x"].slice("");return V[0]=V[0](B[0]),V[3]=V[3](B[0]),V}if(M[O[0]])return M[O[0]]}function A(O){if(!O.tokenizer){var B=[],V=[];for(var j in M)if(/\.*x$/.test(j)){var Y=j[0]+"\\d+";V.indexOf(Y)===-1&&V.push(Y)}else B.indexOf(j[0])===-1&&B.push(j[0]);O.tokenizer="("+(V.length>0?V.join("|")+"|":"")+B.join("+|")+")+?|.",O.tokenizer=new RegExp(O.tokenizer,"g")}return O.tokenizer}function R(O,B,V){if(!S)return!0;if(O.rawday===void 0||!isFinite(O.rawday)&&new Date(O.date.getFullYear(),isFinite(O.rawmonth)?O.month:O.date.getMonth()+1,0).getDate()>=O.day||O.day=="29"&&(!isFinite(O.rawyear)||O.rawyear===void 0||O.rawyear==="")||new Date(O.date.getFullYear(),isFinite(O.rawmonth)?O.month:O.date.getMonth()+1,0).getDate()>=O.day)return B;if(O.day=="29"){var j=W.call(this,B.pos,V,this.maskset);if(j.targetMatch&&j.targetMatch[0]==="yyyy"&&B.pos-j.targetMatchIndex==2)return B.remove=B.pos+1,B}else if(O.date.getMonth()==2&&O.day=="30"&&B.c!==void 0)return O.day="03",O.date.setDate(3),O.date.setMonth(1),B.insert=[{pos:B.pos,c:"0"},{pos:B.pos+1,c:B.c}],B.caret=h.seekNext.call(this,B.pos+1),B;return!1}function N(O,B,V,j){var Y,H,q="",K=0,G={};for(A(V).lastIndex=0;Y=A(V).exec(O);){if(B===void 0)if(H=P(Y))q+="("+H[0]+")",V.placeholder&&V.placeholder!==""?(G[K]=V.placeholder[Y.index%V.placeholder.length],G[V.placeholder[Y.index%V.placeholder.length]]=Y[0].charAt(0)):G[K]=Y[0].charAt(0);else switch(Y[0]){case"[":q+="(";break;case"]":q+=")?";break;default:q+=(0,c.default)(Y[0]),G[K]=Y[0].charAt(0)}else(H=P(Y))?j!==!0&&H[3]?q+=H[3].call(B.date):H[2]?q+=B["raw"+H[2]]:q+=Y[0]:q+=Y[0];K++}return B===void 0&&(V.placeholder=G),q}function U(O,B,V){for(O=String(O),B=B||2;O.length<B;)O=V?O+"0":"0"+O;return O}function k(O,B,V){return typeof O=="string"?new y(O,B,V,this):O&&v(O)==="object"&&Object.prototype.hasOwnProperty.call(O,"date")?O:void 0}function D(O,B){return N(B.inputFormat,{date:O},B)}function W(O,B,V){var j,Y,H=this,q=V&&V.tests[O]?B.placeholder[V.tests[O][0].match.placeholder]||V.tests[O][0].match.placeholder:"",K=0,G=0;for(A(B).lastIndex=0;Y=A(B).exec(B.inputFormat);){var te=/\d+$/.exec(Y[0]);if(te)G=parseInt(te[0]);else{for(var ue=Y[0][0],se=K;H&&(B.placeholder[p.getTest.call(H,se).match.placeholder]||p.getTest.call(H,se).match.placeholder)===ue;)se++;(G=se-K)===0&&(G=Y[0].length)}if(K+=G,Y[0].indexOf(q)!=-1||K>=O+1){j=Y,Y=A(B).exec(B.inputFormat);break}}return{targetMatchIndex:K-G,nextMatch:Y,targetMatch:j}}u.default.extendAliases({datetime:{mask:function(O){return O.numericInput=!1,M.S=x.ordinalSuffix.join("|"),O.inputFormat=w[O.inputFormat]||O.inputFormat,O.displayFormat=w[O.displayFormat]||O.displayFormat||O.inputFormat,O.outputFormat=w[O.outputFormat]||O.outputFormat||O.inputFormat,O.regex=N(O.inputFormat,void 0,O),O.min=k(O.min,O.inputFormat,O),O.max=k(O.max,O.inputFormat,O),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:null,outputFormat:null,min:null,max:null,skipOptionalPartCharacter:"",preValidation:function(O,B,V,j,Y,H,q,K){if(K)return!0;if(isNaN(V)&&O[B]!==V){var G=W.call(this,B,Y,H);if(G.nextMatch&&G.nextMatch[0]===V&&G.targetMatch[0].length>1){var te=P(G.targetMatch)[0];if(new RegExp(te).test("0"+O[B-1]))return O[B]=O[B-1],O[B-1]="0",{fuzzy:!0,buffer:O,refreshFromBuffer:{start:B-1,end:B+1},pos:B+1}}}return!0},postValidation:function(O,B,V,j,Y,H,q,K){var G,te,ue=this;if(q)return!0;if(j===!1&&(((G=W.call(ue,B+1,Y,H)).targetMatch&&G.targetMatchIndex===B&&G.targetMatch[0].length>1&&M[G.targetMatch[0]]!==void 0||(G=W.call(ue,B+2,Y,H)).targetMatch&&G.targetMatchIndex===B+1&&G.targetMatch[0].length>1&&M[G.targetMatch[0]]!==void 0)&&(te=P(G.targetMatch)[0]),te!==void 0&&(H.validPositions[B+1]!==void 0&&new RegExp(te).test(V+"0")?(O[B]=V,O[B+1]="0",j={pos:B+2,caret:B}):new RegExp(te).test("0"+V)&&(O[B]="0",O[B+1]=V,j={pos:B+2})),j===!1))return j;if(j.fuzzy&&(O=j.buffer,B=j.pos),(G=W.call(ue,B,Y,H)).targetMatch&&G.targetMatch[0]&&M[G.targetMatch[0]]!==void 0){var se=P(G.targetMatch);te=se[0];var X=O.slice(G.targetMatchIndex,G.targetMatchIndex+G.targetMatch[0].length);if(new RegExp(te).test(X.join(""))===!1&&G.targetMatch[0].length===2&&H.validPositions[G.targetMatchIndex]&&H.validPositions[G.targetMatchIndex+1]&&(H.validPositions[G.targetMatchIndex+1].input="0"),se[2]=="year")for(var ne=p.getMaskTemplate.call(ue,!1,1,void 0,!0),F=B+1;F<O.length;F++)O[F]=ne[F],H.validPositions.splice(B+1,1)}var fe=j,ve=k.call(ue,O.join(""),Y.inputFormat,Y);return fe&&!isNaN(ve.date.getTime())&&(Y.prefillYear&&(fe=function(pe,Me,Pe){if(pe.year!==pe.rawyear){var Ce=T.toString(),z=pe.rawyear.replace(/[^0-9]/g,""),L=Ce.slice(0,z.length),Q=Ce.slice(z.length);if(z.length===2&&z===L){var oe=new Date(T,pe.month-1,pe.day);pe.day==oe.getDate()&&(!Pe.max||Pe.max.date.getTime()>=oe.getTime())&&(pe.date.setFullYear(T),pe.year=Ce,Me.insert=[{pos:Me.pos+1,c:Q[0]},{pos:Me.pos+2,c:Q[1]}])}}return Me}(ve,fe,Y)),fe=function(pe,Me,Pe,Ce,z){if(!Me)return Me;if(Me&&Pe.min&&!isNaN(Pe.min.date.getTime())){var L;for(pe.reset(),A(Pe).lastIndex=0;L=A(Pe).exec(Pe.inputFormat);){var Q;if((Q=P(L))&&Q[3]){for(var oe=Q[1],he=pe[Q[2]],de=Pe.min[Q[2]],ee=Pe.max?Pe.max[Q[2]]:de+1,ie=[],le=!1,ye=0;ye<de.length;ye++)Ce.validPositions[ye+L.index]!==void 0||le?(ie[ye]=he[ye],le=le||he[ye]>de[ye]):(ye+L.index==0&&he[ye]<de[ye]?(ie[ye]=he[ye],le=!0):ie[ye]=de[ye],Q[2]==="year"&&he.length-1==ye&&de!=ee&&(ie=(parseInt(ie.join(""))+1).toString().split("")),Q[2]==="ampm"&&de!=ee&&Pe.min.date.getTime()>pe.date.getTime()&&(ie[ye]=ee[ye]));oe.call(pe._date,ie.join(""))}}Me=Pe.min.date.getTime()<=pe.date.getTime(),pe.reInit()}return Me&&Pe.max&&(isNaN(Pe.max.date.getTime())||(Me=Pe.max.date.getTime()>=pe.date.getTime())),Me}(ve,fe=R.call(ue,ve,fe,Y),Y,H)),B!==void 0&&fe&&j.pos!==B?{buffer:N(Y.inputFormat,ve,Y).split(""),refreshFromBuffer:{start:B,end:j.pos},pos:j.caret||j.pos}:fe},onKeyDown:function(O,B,V,j){O.ctrlKey&&O.key===d.keys.ArrowRight&&(this.inputmask._valueSet(D(new Date,j)),b(this).trigger("setvalue"))},onUnMask:function(O,B,V){return B&&N(V.outputFormat,k.call(this,O,V.inputFormat,V),V,!0)},casing:function(O,B,V,j){if(B.nativeDef.indexOf("[ap]")==0)return O.toLowerCase();if(B.nativeDef.indexOf("[AP]")==0)return O.toUpperCase();var Y=p.getTest.call(this,[V-1]);return Y.match.def.indexOf("[AP]")==0||V===0||Y&&Y.input===String.fromCharCode(d.keyCode.Space)||Y&&Y.match.def===String.fromCharCode(d.keyCode.Space)?O.toUpperCase():O.toLowerCase()},onBeforeMask:function(O,B){return Object.prototype.toString.call(O)==="[object Date]"&&(O=D(O,B)),O},insertMode:!1,insertModeVisual:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric",prefillYear:!0}})},1313:function(a,o,l){var c,u=(c=l(2394))&&c.__esModule?c:{default:c};u.default.dependencyLib.extend(!0,u.default.prototype.i18n,{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]})},3851:function(a,o,l){var c,u=(c=l(2394))&&c.__esModule?c:{default:c},d=l(8711),h=l(4713);function p(g){return function(_){if(Array.isArray(_))return f(_)}(g)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(g)||function(_,b){if(_){if(typeof _=="string")return f(_,b);var y=Object.prototype.toString.call(_).slice(8,-1);if(y==="Object"&&_.constructor&&(y=_.constructor.name),y==="Map"||y==="Set")return Array.from(_);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return f(_,b)}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f(g,_){(_==null||_>g.length)&&(_=g.length);for(var b=0,y=new Array(_);b<_;b++)y[b]=g[b];return y}u.default.extendDefinitions({A:{validator:"[A-Za-z--]",casing:"upper"},"&":{validator:"[0-9A-Za-z--]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});var m=/25[0-5]|2[0-4][0-9]|[01][0-9][0-9]/;function v(g,_,b,y,T){if(b-1>-1&&_.buffer[b-1]!=="."?(g=_.buffer[b-1]+g,g=b-2>-1&&_.buffer[b-2]!=="."?_.buffer[b-2]+g:"0"+g):g="00"+g,T.greedy&&parseInt(g)>255&&m.test("00"+g.charAt(2))){var x=[].concat(p(_.buffer.slice(0,b)),[".",g.charAt(2)]);if(x.join("").match(/\./g).length<4)return{refreshFromBuffer:!0,buffer:x,caret:b+2}}return m.test(g)}u.default.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)://.*",autoUnmask:!1,keepStatic:!1,tabThrough:!0},ip:{mask:"i{1,3}.j{1,3}.k{1,3}.l{1,3}",definitions:{i:{validator:v},j:{validator:v},k:{validator:v},l:{validator:v}},onUnMask:function(g,_,b){return g},inputmode:"decimal",substitutes:{",":"."}},email:{mask:function(g){var _=g.separator,b=g.quantifier,y="*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",T=y;if(_)for(var x=0;x<b;x++)T+="[".concat(_).concat(y,"]");return T},greedy:!1,casing:"lower",separator:null,quantifier:5,skipOptionalPartCharacter:"",onBeforePaste:function(g,_){return(g=g.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9-A-Za-z--!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function(g,_,b){return g},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function(g,_,b,y,T,x,S){var M=h.getMaskTemplate.call(this,!0,d.getLastValidPosition.call(this),!0,!0);return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(M.join(""))}}})},207:function(a,o,l){var c=p(l(7184)),u=p(l(2394)),d=l(2839),h=l(8711);function p(y){return y&&y.__esModule?y:{default:y}}var f=u.default.dependencyLib;function m(y,T){for(var x="",S=0;S<y.length;S++)u.default.prototype.definitions[y.charAt(S)]||T.definitions[y.charAt(S)]||T.optionalmarker[0]===y.charAt(S)||T.optionalmarker[1]===y.charAt(S)||T.quantifiermarker[0]===y.charAt(S)||T.quantifiermarker[1]===y.charAt(S)||T.groupmarker[0]===y.charAt(S)||T.groupmarker[1]===y.charAt(S)||T.alternatormarker===y.charAt(S)?x+="\\"+y.charAt(S):x+=y.charAt(S);return x}function v(y,T,x,S){if(y.length>0&&T>0&&(!x.digitsOptional||S)){var M=y.indexOf(x.radixPoint),w=!1;x.negationSymbol.back===y[y.length-1]&&(w=!0,y.length--),M===-1&&(y.push(x.radixPoint),M=y.length-1);for(var E=1;E<=T;E++)isFinite(y[M+E])||(y[M+E]="0")}return w&&y.push(x.negationSymbol.back),y}function g(y,T){var x=0;for(var S in y==="+"&&(x=h.seekNext.call(this,T.validPositions.length-1)),T.tests)if((S=parseInt(S))>=x){for(var M=0,w=T.tests[S].length;M<w;M++)if((T.validPositions[S]===void 0||y==="-")&&T.tests[S][M].match.def===y)return S+(T.validPositions[S]!==void 0&&y!=="-"?1:0)}return x}function _(y,T){for(var x=-1,S=0,M=T.validPositions.length;S<M;S++){var w=T.validPositions[S];if(w&&w.match.def===y){x=S;break}}return x}function b(y,T,x,S,M){var w=T.buffer?T.buffer.indexOf(M.radixPoint):-1,E=(w!==-1||S&&M.jitMasking)&&new RegExp(M.definitions[9].validator).test(y);return!S&&M._radixDance&&w!==-1&&E&&T.validPositions[w]==null?{insert:{pos:w===x?w+1:w,c:M.radixPoint},pos:x}:E}u.default.extendAliases({numeric:{mask:function(y){y.repeat=0,y.groupSeparator===y.radixPoint&&y.digits&&y.digits!=="0"&&(y.radixPoint==="."?y.groupSeparator=",":y.radixPoint===","?y.groupSeparator=".":y.groupSeparator=""),y.groupSeparator===" "&&(y.skipOptionalPartCharacter=void 0),y.placeholder.length>1&&(y.placeholder=y.placeholder.charAt(0)),y.positionCaretOnClick==="radixFocus"&&y.placeholder===""&&(y.positionCaretOnClick="lvp");var T="0",x=y.radixPoint;y.numericInput===!0&&y.__financeInput===void 0?(T="1",y.positionCaretOnClick=y.positionCaretOnClick==="radixFocus"?"lvp":y.positionCaretOnClick,y.digitsOptional=!1,isNaN(y.digits)&&(y.digits=2),y._radixDance=!1,x=y.radixPoint===","?"?":"!",y.radixPoint!==""&&y.definitions[x]===void 0&&(y.definitions[x]={},y.definitions[x].validator="["+y.radixPoint+"]",y.definitions[x].placeholder=y.radixPoint,y.definitions[x].static=!0,y.definitions[x].generated=!0)):(y.__financeInput=!1,y.numericInput=!0);var S,M="[+]";if(M+=m(y.prefix,y),y.groupSeparator!==""?(y.definitions[y.groupSeparator]===void 0&&(y.definitions[y.groupSeparator]={},y.definitions[y.groupSeparator].validator="["+y.groupSeparator+"]",y.definitions[y.groupSeparator].placeholder=y.groupSeparator,y.definitions[y.groupSeparator].static=!0,y.definitions[y.groupSeparator].generated=!0),M+=y._mask(y)):M+="9{+}",y.digits!==void 0&&y.digits!==0){var w=y.digits.toString().split(",");isFinite(w[0])&&w[1]&&isFinite(w[1])?M+=x+T+"{"+y.digits+"}":(isNaN(y.digits)||parseInt(y.digits)>0)&&(y.digitsOptional||y.jitMasking?(S=M+x+T+"{0,"+y.digits+"}",y.keepStatic=!0):M+=x+T+"{"+y.digits+"}")}else y.inputmode="numeric";return M+=m(y.suffix,y),M+="[-]",S&&(M=[S+m(y.suffix,y)+"[-]",M]),y.greedy=!1,function(E){E.parseMinMaxOptions===void 0&&(E.min!==null&&(E.min=E.min.toString().replace(new RegExp((0,c.default)(E.groupSeparator),"g"),""),E.radixPoint===","&&(E.min=E.min.replace(E.radixPoint,".")),E.min=isFinite(E.min)?parseFloat(E.min):NaN,isNaN(E.min)&&(E.min=Number.MIN_VALUE)),E.max!==null&&(E.max=E.max.toString().replace(new RegExp((0,c.default)(E.groupSeparator),"g"),""),E.radixPoint===","&&(E.max=E.max.replace(E.radixPoint,".")),E.max=isFinite(E.max)?parseFloat(E.max):NaN,isNaN(E.max)&&(E.max=Number.MAX_VALUE)),E.parseMinMaxOptions="done")}(y),y.radixPoint!==""&&y.substituteRadixPoint&&(y.substitutes[y.radixPoint=="."?",":"."]=y.radixPoint),M},_mask:function(y){return"("+y.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,SetMaxOnOverflow:!1,step:1,inputType:"text",unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"decimal",shortcuts:{k:"1000",m:"1000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",usePrototypeDefinitions:!1,stripLeadingZeroes:!0,substituteRadixPoint:!0,definitions:{0:{validator:b},1:{validator:b,definitionSymbol:"9"},9:{validator:"[0-9---]",definitionSymbol:"*"},"+":{validator:function(y,T,x,S,M){return M.allowMinus&&(y==="-"||y===M.negationSymbol.front)}},"-":{validator:function(y,T,x,S,M){return M.allowMinus&&y===M.negationSymbol.back}}},preValidation:function(y,T,x,S,M,w,E,C){var P=this;if(M.__financeInput!==!1&&x===M.radixPoint)return!1;var A=y.indexOf(M.radixPoint),R=T;if(T=function(W,O,B,V,j){return j._radixDance&&j.numericInput&&O!==j.negationSymbol.back&&W<=B&&(B>0||O==j.radixPoint)&&(V.validPositions[W-1]===void 0||V.validPositions[W-1].input!==j.negationSymbol.back)&&(W-=1),W}(T,x,A,w,M),x==="-"||x===M.negationSymbol.front){if(M.allowMinus!==!0)return!1;var N=!1,U=_("+",w),k=_("-",w);return U!==-1&&(N=[U],k!==-1&&N.push(k)),N!==!1?{remove:N,caret:R-M.negationSymbol.back.length}:{insert:[{pos:g.call(P,"+",w),c:M.negationSymbol.front,fromIsValid:!0},{pos:g.call(P,"-",w),c:M.negationSymbol.back,fromIsValid:void 0}],caret:R+M.negationSymbol.back.length}}if(x===M.groupSeparator)return{caret:R};if(C)return!0;if(A!==-1&&M._radixDance===!0&&S===!1&&x===M.radixPoint&&M.digits!==void 0&&(isNaN(M.digits)||parseInt(M.digits)>0)&&A!==T){var D=g.call(P,M.radixPoint,w);return w.validPositions[D]&&(w.validPositions[D].generatedInput=w.validPositions[D].generated||!1),{caret:M._radixDance&&T===A-1?A+1:A}}if(M.__financeInput===!1){if(S){if(M.digitsOptional)return{rewritePosition:E.end};if(!M.digitsOptional){if(E.begin>A&&E.end<=A)return x===M.radixPoint?{insert:{pos:A+1,c:"0",fromIsValid:!0},rewritePosition:A}:{rewritePosition:A+1};if(E.begin<A)return{rewritePosition:E.begin-1}}}else if(!M.showMaskOnHover&&!M.showMaskOnFocus&&!M.digitsOptional&&M.digits>0&&this.__valueGet.call(this.el)==="")return{rewritePosition:A}}return{rewritePosition:T}},postValidation:function(y,T,x,S,M,w,E){if(S===!1)return S;if(E)return!0;if(M.min!==null||M.max!==null){var C=M.onUnMask(y.slice().reverse().join(""),void 0,f.extend({},M,{unmaskAsNumber:!0}));if(M.min!==null&&C<M.min&&(C.toString().length>M.min.toString().length||C<0))return!1;if(M.max!==null&&C>M.max)return!!M.SetMaxOnOverflow&&{refreshFromBuffer:!0,buffer:v(M.max.toString().replace(".",M.radixPoint).split(""),M.digits,M).reverse()}}return S},onUnMask:function(y,T,x){if(T===""&&x.nullable===!0)return T;var S=y.replace(x.prefix,"");return S=(S=S.replace(x.suffix,"")).replace(new RegExp((0,c.default)(x.groupSeparator),"g"),""),x.placeholder.charAt(0)!==""&&(S=S.replace(new RegExp(x.placeholder.charAt(0),"g"),"0")),x.unmaskAsNumber?(x.radixPoint!==""&&S.indexOf(x.radixPoint)!==-1&&(S=S.replace(c.default.call(this,x.radixPoint),".")),S=(S=S.replace(new RegExp("^"+(0,c.default)(x.negationSymbol.front)),"-")).replace(new RegExp((0,c.default)(x.negationSymbol.back)+"$"),""),Number(S)):S},isComplete:function(y,T){var x=(T.numericInput?y.slice().reverse():y).join("");return x=(x=(x=(x=(x=x.replace(new RegExp("^"+(0,c.default)(T.negationSymbol.front)),"-")).replace(new RegExp((0,c.default)(T.negationSymbol.back)+"$"),"")).replace(T.prefix,"")).replace(T.suffix,"")).replace(new RegExp((0,c.default)(T.groupSeparator)+"([0-9]{3})","g"),"$1"),T.radixPoint===","&&(x=x.replace((0,c.default)(T.radixPoint),".")),isFinite(x)},onBeforeMask:function(y,T){var x;y=(x=y)!==null&&x!==void 0?x:"";var S=T.radixPoint||",";isFinite(T.digits)&&(T.digits=parseInt(T.digits)),typeof y!="number"&&T.inputType!=="number"||S===""||(y=y.toString().replace(".",S));var M=y.charAt(0)==="-"||y.charAt(0)===T.negationSymbol.front,w=y.split(S),E=w[0].replace(/[^\-0-9]/g,""),C=w.length>1?w[1].replace(/[^0-9]/g,""):"",P=w.length>1;y=E+(C!==""?S+C:C);var A=0;if(S!==""&&(A=T.digitsOptional?T.digits<C.length?T.digits:C.length:T.digits,C!==""||!T.digitsOptional)){var R=Math.pow(10,A||1);y=y.replace((0,c.default)(S),"."),isNaN(parseFloat(y))||(y=(T.roundingFN(parseFloat(y)*R)/R).toFixed(A)),y=y.toString().replace(".",S)}if(T.digits===0&&y.indexOf(S)!==-1&&(y=y.substring(0,y.indexOf(S))),T.min!==null||T.max!==null){var N=y.toString().replace(S,".");T.min!==null&&N<T.min?y=T.min.toString().replace(".",S):T.max!==null&&N>T.max&&(y=T.max.toString().replace(".",S))}return M&&y.charAt(0)!=="-"&&(y="-"+y),v(y.toString().split(""),A,T,P).join("")},onBeforeWrite:function(y,T,x,S){function M(k,D){if(S.__financeInput!==!1||D){var W=k.indexOf(S.radixPoint);W!==-1&&k.splice(W,1)}if(S.groupSeparator!=="")for(;(W=k.indexOf(S.groupSeparator))!==-1;)k.splice(W,1);return k}var w,E;if(S.stripLeadingZeroes&&(E=function(k,D){var W=new RegExp("(^"+(D.negationSymbol.front!==""?(0,c.default)(D.negationSymbol.front)+"?":"")+(0,c.default)(D.prefix)+")(.*)("+(0,c.default)(D.suffix)+(D.negationSymbol.back!=""?(0,c.default)(D.negationSymbol.back)+"?":"")+"$)").exec(k.slice().reverse().join("")),O=W?W[2]:"",B=!1;return O&&(O=O.split(D.radixPoint.charAt(0))[0],B=new RegExp("^[0"+D.groupSeparator+"]*").exec(O)),!(!B||!(B[0].length>1||B[0].length>0&&B[0].length<O.length))&&B}(T,S)))for(var C=T.join("").lastIndexOf(E[0].split("").reverse().join(""))-(E[0]==E.input?0:1),P=E[0]==E.input?1:0,A=E[0].length-P;A>0;A--)this.maskset.validPositions.splice(C+A,1),delete T[C+A];if(y)switch(y.type){case"blur":case"checkval":if(S.min!==null){var R=S.onUnMask(T.slice().reverse().join(""),void 0,f.extend({},S,{unmaskAsNumber:!0}));if(S.min!==null&&R<S.min)return{refreshFromBuffer:!0,buffer:v(S.min.toString().replace(".",S.radixPoint).split(""),S.digits,S).reverse()}}if(T[T.length-1]===S.negationSymbol.front){var N=new RegExp("(^"+(S.negationSymbol.front!=""?(0,c.default)(S.negationSymbol.front)+"?":"")+(0,c.default)(S.prefix)+")(.*)("+(0,c.default)(S.suffix)+(S.negationSymbol.back!=""?(0,c.default)(S.negationSymbol.back)+"?":"")+"$)").exec(M(T.slice(),!0).reverse().join(""));(N?N[2]:"")==0&&(w={refreshFromBuffer:!0,buffer:[0]})}else S.radixPoint!==""&&T.indexOf(S.radixPoint)===S.suffix.length&&(w&&w.buffer?w.buffer.splice(0,1+S.suffix.length):(T.splice(0,1+S.suffix.length),w={refreshFromBuffer:!0,buffer:M(T)}));if(S.enforceDigitsOnBlur){var U=(w=w||{})&&w.buffer||T.slice().reverse();w.refreshFromBuffer=!0,w.buffer=v(U,S.digits,S,!0).reverse()}}return w},onKeyDown:function(y,T,x,S){var M,w=f(this);if(y.location!=3){var E,C=y.key;if((E=S.shortcuts&&S.shortcuts[C])&&E.length>1)return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())*parseInt(E)),w.trigger("setvalue"),!1}if(y.ctrlKey)switch(y.key){case d.keys.ArrowUp:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(S.step)),w.trigger("setvalue"),!1;case d.keys.ArrowDown:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(S.step)),w.trigger("setvalue"),!1}if(!y.shiftKey&&(y.key===d.keys.Delete||y.key===d.keys.Backspace||y.key===d.keys.BACKSPACE_SAFARI)&&x.begin!==T.length){if(T[y.key===d.keys.Delete?x.begin-1:x.end]===S.negationSymbol.front)return M=T.slice().reverse(),S.negationSymbol.front!==""&&M.shift(),S.negationSymbol.back!==""&&M.pop(),w.trigger("setvalue",[M.join(""),x.begin]),!1;if(S._radixDance===!0){var P,A=T.indexOf(S.radixPoint);if(S.digitsOptional){if(A===0)return(M=T.slice().reverse()).pop(),w.trigger("setvalue",[M.join(""),x.begin>=M.length?M.length:x.begin]),!1}else if(A!==-1&&(x.begin<A||x.end<A||y.key===d.keys.Delete&&(x.begin===A||x.begin-1===A)))return x.begin===x.end&&(y.key===d.keys.Backspace||y.key===d.keys.BACKSPACE_SAFARI?x.begin++:y.key===d.keys.Delete&&x.begin-1===A&&(P=f.extend({},x),x.begin--,x.end--)),(M=T.slice().reverse()).splice(M.length-x.begin,x.begin-x.end+1),M=v(M,S.digits,S).join(""),P&&(x=P),w.trigger("setvalue",[M,x.begin>=M.length?A+1:x.begin]),!1}}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",inputmode:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function(y){return"("+y.groupSeparator+"99){*|1}("+y.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}})},9380:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=!(typeof window>"u"||!window.document||!window.document.createElement);o.default=l?window:{}},7760:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.HandleNativePlaceholder=function(b,y){var T=b?b.inputmask:this;if(c.ie){if(b.inputmask._valueGet()!==y&&(b.placeholder!==y||b.placeholder==="")){var x=h.getBuffer.call(T).slice(),S=b.inputmask._valueGet();if(S!==y){var M=h.getLastValidPosition.call(T);M===-1&&S===h.getBufferTemplate.call(T).join("")?x=[]:M!==-1&&v.call(T,x),_(b,x)}}}else b.placeholder!==y&&(b.placeholder=y,b.placeholder===""&&b.removeAttribute("placeholder"))},o.applyInputValue=m,o.checkVal=g,o.clearOptionalTail=v,o.unmaskedvalue=function(b){var y=b?b.inputmask:this,T=y.opts,x=y.maskset;if(b){if(b.inputmask===void 0)return b.value;b.inputmask&&b.inputmask.refreshValue&&m(b,b.inputmask._valueGet(!0))}for(var S=[],M=x.validPositions,w=0,E=M.length;w<E;w++)M[w]&&M[w].match&&(M[w].match.static!=1||Array.isArray(x.metadata)&&M[w].generatedInput!==!0)&&S.push(M[w].input);var C=S.length===0?"":(y.isRTL?S.reverse():S).join("");if(typeof T.onUnMask=="function"){var P=(y.isRTL?h.getBuffer.call(y).slice().reverse():h.getBuffer.call(y)).join("");C=T.onUnMask.call(y,P,C,T)}return C},o.writeBuffer=_;var c=l(9845),u=l(6030),d=l(2839),h=l(8711),p=l(7215),f=l(4713);function m(b,y,T){var x=b?b.inputmask:this,S=x.opts;b.inputmask.refreshValue=!1,typeof S.onBeforeMask=="function"&&(y=S.onBeforeMask.call(x,y,S)||y),g(b,!0,!1,y=(y||"").toString().split(""),T),x.undoValue=x._valueGet(!0),(S.clearMaskOnLostFocus||S.clearIncomplete)&&b.inputmask._valueGet()===h.getBufferTemplate.call(x).join("")&&h.getLastValidPosition.call(x)===-1&&b.inputmask._valueSet("")}function v(b){b.length=0;for(var y,T=f.getMaskTemplate.call(this,!0,0,!0,void 0,!0);(y=T.shift())!==void 0;)b.push(y);return b}function g(b,y,T,x,S){var M,w=b?b.inputmask:this,E=w.maskset,C=w.opts,P=w.dependencyLib,A=x.slice(),R="",N=-1,U=C.skipOptionalPartCharacter;C.skipOptionalPartCharacter="",h.resetMaskSet.call(w,!1),w.clicked=0,N=C.radixPoint?h.determineNewCaretPosition.call(w,{begin:0,end:0},!1,C.__financeInput===!1?"radixFocus":void 0).begin:0,E.p=N,w.caretPos={begin:N};var k=[],D=w.caretPos;if(A.forEach(function(Y,H){if(Y!==void 0){var q=new P.Event("_checkval");q.key=Y,R+=Y;var K=h.getLastValidPosition.call(w,void 0,!0);(function(G,te){for(var ue=f.getMaskTemplate.call(w,!0,0).slice(G,h.seekNext.call(w,G,!1,!1)).join("").replace(/'/g,""),se=ue.indexOf(te);se>0&&ue[se-1]===" ";)se--;var X=se===0&&!h.isMask.call(w,G)&&(f.getTest.call(w,G).match.nativeDef===te.charAt(0)||f.getTest.call(w,G).match.static===!0&&f.getTest.call(w,G).match.nativeDef==="'"+te.charAt(0)||f.getTest.call(w,G).match.nativeDef===" "&&(f.getTest.call(w,G+1).match.nativeDef===te.charAt(0)||f.getTest.call(w,G+1).match.static===!0&&f.getTest.call(w,G+1).match.nativeDef==="'"+te.charAt(0)));if(!X&&se>0&&!h.isMask.call(w,G,!1,!0)){var ne=h.seekNext.call(w,G);w.caretPos.begin<ne&&(w.caretPos={begin:ne})}return X})(N,R)?M=u.EventHandlers.keypressEvent.call(w,q,!0,!1,T,K+1):(M=u.EventHandlers.keypressEvent.call(w,q,!0,!1,T,w.caretPos.begin))&&(N=w.caretPos.begin+1,R=""),M?(M.pos!==void 0&&E.validPositions[M.pos]&&E.validPositions[M.pos].match.static===!0&&E.validPositions[M.pos].alternation===void 0&&(k.push(M.pos),w.isRTL||(M.forwardPosition=M.pos+1)),_.call(w,void 0,h.getBuffer.call(w),M.forwardPosition,q,!1),w.caretPos={begin:M.forwardPosition,end:M.forwardPosition},D=w.caretPos):E.validPositions[H]===void 0&&A[H]===f.getPlaceholder.call(w,H)&&h.isMask.call(w,H,!0)?w.caretPos.begin++:w.caretPos=D}}),k.length>0){var W,O,B=h.seekNext.call(w,-1,void 0,!1);if(!p.isComplete.call(w,h.getBuffer.call(w))&&k.length<=B||p.isComplete.call(w,h.getBuffer.call(w))&&k.length>0&&k.length!==B&&k[0]===0){for(var V=B;(W=k.shift())!==void 0;)if(W<V){var j=new P.Event("_checkval");if((O=E.validPositions[W]).generatedInput=!0,j.key=O.input,(M=u.EventHandlers.keypressEvent.call(w,j,!0,!1,T,V))&&M.pos!==void 0&&M.pos!==W&&E.validPositions[M.pos]&&E.validPositions[M.pos].match.static===!0)k.push(M.pos);else if(!M)break;V++}}}y&&_.call(w,b,h.getBuffer.call(w),M?M.forwardPosition:w.caretPos.begin,S||new P.Event("checkval"),S&&(S.type==="input"&&w.undoValue!==h.getBuffer.call(w).join("")||S.type==="paste")),C.skipOptionalPartCharacter=U}function _(b,y,T,x,S){var M=b?b.inputmask:this,w=M.opts,E=M.dependencyLib;if(x&&typeof w.onBeforeWrite=="function"){var C=w.onBeforeWrite.call(M,x,y,T,w);if(C){if(C.refreshFromBuffer){var P=C.refreshFromBuffer;p.refreshFromBuffer.call(M,P===!0?P:P.start,P.end,C.buffer||y),y=h.getBuffer.call(M,!0)}T!==void 0&&(T=C.caret!==void 0?C.caret:T)}}if(b!==void 0&&(b.inputmask._valueSet(y.join("")),T===void 0||x!==void 0&&x.type==="blur"||h.caret.call(M,b,T,void 0,void 0,x!==void 0&&x.type==="keydown"&&(x.key===d.keys.Delete||x.key===d.keys.Backspace)),b.inputmask.writeBufferHook===void 0||b.inputmask.writeBufferHook(T),S===!0)){var A=E(b),R=b.inputmask._valueGet();b.inputmask.skipInputEvent=!0,A.trigger("input"),setTimeout(function(){R===h.getBufferTemplate.call(M).join("")?A.trigger("cleared"):p.isComplete.call(M,y)===!0&&A.trigger("complete")},0)}}},2394:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=T(l(3976)),u=T(l(7392)),d=T(l(4963)),h=l(9716),p=T(l(9380)),f=l(7760),m=l(157),v=l(2391),g=l(8711),_=l(7215),b=l(4713);function y(E){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},y(E)}function T(E){return E&&E.__esModule?E:{default:E}}var x=p.default.document,S="_inputmask_opts";function M(E,C,P){if(!(this instanceof M))return new M(E,C,P);this.dependencyLib=d.default,this.el=void 0,this.events={},this.maskset=void 0,P!==!0&&(Object.prototype.toString.call(E)==="[object Object]"?C=E:(C=C||{},E&&(C.alias=E)),this.opts=d.default.extend(!0,{},this.defaults,C),this.noMasksCache=C&&C.definitions!==void 0,this.userOptions=C||{},w(this.opts.alias,C,this.opts)),this.refreshValue=!1,this.undoValue=void 0,this.$el=void 0,this.skipInputEvent=!1,this.validationEvent=!1,this.ignorable=!1,this.maxLength,this.mouseEnter=!1,this.clicked=0,this.originalPlaceholder=void 0,this.isComposing=!1,this.hasAlternator=!1}function w(E,C,P){var A=M.prototype.aliases[E];return A?(A.alias&&w(A.alias,void 0,P),d.default.extend(!0,P,A),d.default.extend(!0,P,C),!0):(P.mask===null&&(P.mask=E),!1)}M.prototype={dataAttribute:"data-inputmask",defaults:c.default,definitions:u.default,aliases:{},masksCache:{},i18n:{},get isRTL(){return this.opts.isRTL||this.opts.numericInput},mask:function(E){var C=this;return typeof E=="string"&&(E=x.getElementById(E)||x.querySelectorAll(E)),(E=E.nodeName?[E]:Array.isArray(E)?E:[].slice.call(E)).forEach(function(P,A){var R=d.default.extend(!0,{},C.opts);if(function(U,k,D,W){function O(q,K){var G=W===""?q:W+"-"+q;(K=K!==void 0?K:U.getAttribute(G))!==null&&(typeof K=="string"&&(q.indexOf("on")===0?K=p.default[K]:K==="false"?K=!1:K==="true"&&(K=!0)),D[q]=K)}if(k.importDataAttributes===!0){var B,V,j,Y,H=U.getAttribute(W);if(H&&H!==""&&(H=H.replace(/'/g,'"'),V=JSON.parse("{"+H+"}")),V){for(Y in j=void 0,V)if(Y.toLowerCase()==="alias"){j=V[Y];break}}for(B in O("alias",j),D.alias&&w(D.alias,D,k),k){if(V){for(Y in j=void 0,V)if(Y.toLowerCase()===B.toLowerCase()){j=V[Y];break}}O(B,j)}}return d.default.extend(!0,k,D),(U.dir==="rtl"||k.rightAlign)&&(U.style.textAlign="right"),(U.dir==="rtl"||k.numericInput)&&(U.dir="ltr",U.removeAttribute("dir"),k.isRTL=!0),Object.keys(D).length}(P,R,d.default.extend(!0,{},C.userOptions),C.dataAttribute)){var N=(0,v.generateMaskSet)(R,C.noMasksCache);N!==void 0&&(P.inputmask!==void 0&&(P.inputmask.opts.autoUnmask=!0,P.inputmask.remove()),P.inputmask=new M(void 0,void 0,!0),P.inputmask.opts=R,P.inputmask.noMasksCache=C.noMasksCache,P.inputmask.userOptions=d.default.extend(!0,{},C.userOptions),P.inputmask.el=P,P.inputmask.$el=(0,d.default)(P),P.inputmask.maskset=N,d.default.data(P,S,C.userOptions),m.mask.call(P.inputmask))}}),E&&E[0]&&E[0].inputmask||this},option:function(E,C){return typeof E=="string"?this.opts[E]:y(E)==="object"?(d.default.extend(this.userOptions,E),this.el&&C!==!0&&this.mask(this.el),this):void 0},unmaskedvalue:function(E){if(this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),this.el===void 0||E!==void 0){var C=(typeof this.opts.onBeforeMask=="function"&&this.opts.onBeforeMask.call(this,E,this.opts)||E).split("");f.checkVal.call(this,void 0,!1,!1,C),typeof this.opts.onBeforeWrite=="function"&&this.opts.onBeforeWrite.call(this,void 0,g.getBuffer.call(this),0,this.opts)}return f.unmaskedvalue.call(this,this.el)},remove:function(){if(this.el){d.default.data(this.el,S,null);var E=this.opts.autoUnmask?(0,f.unmaskedvalue)(this.el):this._valueGet(this.opts.autoUnmask);E!==g.getBufferTemplate.call(this).join("")?this._valueSet(E,this.opts.autoUnmask):this._valueSet(""),h.EventRuler.off(this.el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el),"value")&&this.__valueGet&&Object.defineProperty(this.el,"value",{get:this.__valueGet,set:this.__valueSet,configurable:!0}):x.__lookupGetter__&&this.el.__lookupGetter__("value")&&this.__valueGet&&(this.el.__defineGetter__("value",this.__valueGet),this.el.__defineSetter__("value",this.__valueSet)),this.el.inputmask=void 0}return this.el},getemptymask:function(){return this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),(this.isRTL?g.getBufferTemplate.call(this).reverse():g.getBufferTemplate.call(this)).join("")},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),_.isComplete.call(this,g.getBuffer.call(this))},getmetadata:function(){if(this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),Array.isArray(this.maskset.metadata)){var E=b.getMaskTemplate.call(this,!0,0,!1).join("");return this.maskset.metadata.forEach(function(C){return C.mask!==E||(E=C,!1)}),E}return this.maskset.metadata},isValid:function(E){if(this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache),E){var C=(typeof this.opts.onBeforeMask=="function"&&this.opts.onBeforeMask.call(this,E,this.opts)||E).split("");f.checkVal.call(this,void 0,!0,!1,C)}else E=this.isRTL?g.getBuffer.call(this).slice().reverse().join(""):g.getBuffer.call(this).join("");for(var P=g.getBuffer.call(this),A=g.determineLastRequiredPosition.call(this),R=P.length-1;R>A&&!g.isMask.call(this,R);R--);return P.splice(A,R+1-A),_.isComplete.call(this,P)&&E===(this.isRTL?g.getBuffer.call(this).slice().reverse().join(""):g.getBuffer.call(this).join(""))},format:function(E,C){this.maskset=this.maskset||(0,v.generateMaskSet)(this.opts,this.noMasksCache);var P=(typeof this.opts.onBeforeMask=="function"&&this.opts.onBeforeMask.call(this,E,this.opts)||E).split("");f.checkVal.call(this,void 0,!0,!1,P);var A=this.isRTL?g.getBuffer.call(this).slice().reverse().join(""):g.getBuffer.call(this).join("");return C?{value:A,metadata:this.getmetadata()}:A},setValue:function(E){this.el&&(0,d.default)(this.el).trigger("setvalue",[E])},analyseMask:v.analyseMask},M.extendDefaults=function(E){d.default.extend(!0,M.prototype.defaults,E)},M.extendDefinitions=function(E){d.default.extend(!0,M.prototype.definitions,E)},M.extendAliases=function(E){d.default.extend(!0,M.prototype.aliases,E)},M.format=function(E,C,P){return M(C).format(E,P)},M.unmask=function(E,C){return M(C).unmaskedvalue(E)},M.isValid=function(E,C){return M(C).isValid(E)},M.remove=function(E){typeof E=="string"&&(E=x.getElementById(E)||x.querySelectorAll(E)),(E=E.nodeName?[E]:E).forEach(function(C){C.inputmask&&C.inputmask.remove()})},M.setValue=function(E,C){typeof E=="string"&&(E=x.getElementById(E)||x.querySelectorAll(E)),(E=E.nodeName?[E]:E).forEach(function(P){P.inputmask?P.inputmask.setValue(C):(0,d.default)(P).trigger("setvalue",[C])})},M.dependencyLib=d.default,p.default.Inputmask=M,o.default=M},5296:function(a,o,l){function c(x){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},c(x)}var u=b(l(9380)),d=b(l(2394));function h(x,S){for(var M=0;M<S.length;M++){var w=S[M];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,(E=w.key,C=void 0,C=function(P,A){if(c(P)!=="object"||P===null)return P;var R=P[Symbol.toPrimitive];if(R!==void 0){var N=R.call(P,A);if(c(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(P)}(E,"string"),c(C)==="symbol"?C:String(C)),w)}var E,C}function p(x){var S=v();return function(){var M,w=_(x);if(S){var E=_(this).constructor;M=Reflect.construct(w,arguments,E)}else M=w.apply(this,arguments);return function(C,P){if(P&&(c(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}(C)}(this,M)}}function f(x){var S=typeof Map=="function"?new Map:void 0;return f=function(M){if(M===null||!function(E){try{return Function.toString.call(E).indexOf("[native code]")!==-1}catch{return typeof E=="function"}}(M))return M;if(typeof M!="function")throw new TypeError("Super expression must either be null or a function");if(S!==void 0){if(S.has(M))return S.get(M);S.set(M,w)}function w(){return m(M,arguments,_(this).constructor)}return w.prototype=Object.create(M.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),g(w,M)},f(x)}function m(x,S,M){return m=v()?Reflect.construct.bind():function(w,E,C){var P=[null];P.push.apply(P,E);var A=new(Function.bind.apply(w,P));return C&&g(A,C.prototype),A},m.apply(null,arguments)}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(x,S){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,w){return M.__proto__=w,M},g(x,S)}function _(x){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},_(x)}function b(x){return x&&x.__esModule?x:{default:x}}var y=u.default.document;if(y&&y.head&&y.head.attachShadow&&u.default.customElements&&u.default.customElements.get("input-mask")===void 0){var T=function(x){(function(C,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(P&&P.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),P&&g(C,P)})(E,x);var S,M,w=p(E);function E(){var C;(function(U,k){if(!(U instanceof k))throw new TypeError("Cannot call a class as a function")})(this,E);var P=(C=w.call(this)).getAttributeNames(),A=C.attachShadow({mode:"closed"});for(var R in C.input=y.createElement("input"),C.input.type="text",A.appendChild(C.input),P)Object.prototype.hasOwnProperty.call(P,R)&&C.input.setAttribute(P[R],C.getAttribute(P[R]));var N=new d.default;return N.dataAttribute="",N.mask(C.input),C.input.inputmask.shadowRoot=A,C}return S=E,(M=[{key:"attributeChangedCallback",value:function(C,P,A){this.input.setAttribute(C,A)}},{key:"value",get:function(){return this.input.value},set:function(C){this.input.value=C}}])&&h(S.prototype,M),Object.defineProperty(S,"prototype",{writable:!1}),E}(f(HTMLElement));u.default.customElements.define("input-mask",T)}},2839:function(a,o){function l(m){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l(m)}function c(m,v){return function(g){if(Array.isArray(g))return g}(m)||function(g,_){var b=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(b!=null){var y,T,x,S,M=[],w=!0,E=!1;try{if(x=(b=b.call(g)).next,_!==0)for(;!(w=(y=x.call(b)).done)&&(M.push(y.value),M.length!==_);w=!0);}catch(C){E=!0,T=C}finally{try{if(!w&&b.return!=null&&(S=b.return(),Object(S)!==S))return}finally{if(E)throw T}}return M}}(m,v)||function(g,_){if(g){if(typeof g=="string")return u(g,_);var b=Object.prototype.toString.call(g).slice(8,-1);if(b==="Object"&&g.constructor&&(b=g.constructor.name),b==="Map"||b==="Set")return Array.from(g);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return u(g,_)}}(m,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(m,v){(v==null||v>m.length)&&(v=m.length);for(var g=0,_=new Array(v);g<v;g++)_[g]=m[g];return _}function d(m,v){var g=Object.keys(m);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);v&&(_=_.filter(function(b){return Object.getOwnPropertyDescriptor(m,b).enumerable})),g.push.apply(g,_)}return g}function h(m,v,g){return(v=function(_){var b=function(y,T){if(l(y)!=="object"||y===null)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var S=x.call(y,T);if(l(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(y)}(_,"string");return l(b)==="symbol"?b:String(b)}(v))in m?Object.defineProperty(m,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[v]=g,m}Object.defineProperty(o,"__esModule",{value:!0}),o.keys=o.keyCode=void 0,o.toKey=function(m,v){return f[m]||(v?String.fromCharCode(m):String.fromCharCode(m).toLowerCase())},o.toKeyCode=function(m){return p[m]};var p=o.keyCode=function(m){for(var v=1;v<arguments.length;v++){var g=arguments[v]!=null?arguments[v]:{};v%2?d(Object(g),!0).forEach(function(_){h(m,_,g[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(g)):d(Object(g)).forEach(function(_){Object.defineProperty(m,_,Object.getOwnPropertyDescriptor(g,_))})}return m}({c:67,x:88,z:90,BACKSPACE_SAFARI:127,Enter:13,Meta_LEFT:91,Meta_RIGHT:92,Space:32},{Alt:18,AltGraph:18,ArrowDown:40,ArrowLeft:37,ArrowRight:39,ArrowUp:38,Backspace:8,CapsLock:20,Control:17,ContextMenu:93,Dead:221,Delete:46,End:35,Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Home:36,Insert:45,NumLock:144,PageDown:34,PageUp:33,Pause:19,PrintScreen:44,Process:229,Shift:16,ScrollLock:145,Tab:9,Unidentified:229}),f=Object.entries(p).reduce(function(m,v){var g=c(v,2),_=g[0],b=g[1];return m[b]=m[b]===void 0?_:m[b],m},{});o.keys=Object.entries(p).reduce(function(m,v){var g=c(v,2),_=g[0];return g[1],m[_]=_==="Space"?" ":_,m},{})},2391:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.analyseMask=function(v,g,_){var b,y,T,x,S,M,w=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,E=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,C=!1,P=new h.default,A=[],R=[],N=!1;function U(se,X,ne){ne=ne!==void 0?ne:se.matches.length;var F=se.matches[ne-1];if(g){if(X.indexOf("[")===0||C&&/\\d|\\s|\\w|\\p/i.test(X)||X==="."){var fe=_.casing?"i":"";/\\p\{.*}/i.test(X)&&(fe+="u"),se.matches.splice(ne++,0,{fn:new RegExp(X,fe),static:!1,optionality:!1,newBlockMarker:F===void 0?"master":F.def!==X,casing:null,def:X,placeholder:p(_.placeholder)==="object"?_.placeholder[P.matches.length]:void 0,nativeDef:X})}else C&&(X=X[X.length-1]),X.split("").forEach(function(pe,Me){F=se.matches[ne-1],se.matches.splice(ne++,0,{fn:/[a-z]/i.test(_.staticDefinitionSymbol||pe)?new RegExp("["+(_.staticDefinitionSymbol||pe)+"]",_.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:F===void 0?"master":F.def!==pe&&F.static!==!0,casing:null,def:_.staticDefinitionSymbol||pe,placeholder:_.staticDefinitionSymbol!==void 0?pe:p(_.placeholder)==="object"?_.placeholder[P.matches.length]:void 0,nativeDef:(C?"'":"")+pe})});C=!1}else{var ve=_.definitions&&_.definitions[X]||_.usePrototypeDefinitions&&d.default.prototype.definitions[X];ve&&!C?se.matches.splice(ne++,0,{fn:ve.validator?typeof ve.validator=="string"?new RegExp(ve.validator,_.casing?"i":""):new function(){this.test=ve.validator}:/./,static:ve.static||!1,optionality:ve.optional||!1,defOptionality:ve.optional||!1,newBlockMarker:F===void 0||ve.optional?"master":F.def!==(ve.definitionSymbol||X),casing:ve.casing,def:ve.definitionSymbol||X,placeholder:ve.placeholder,nativeDef:X,generated:ve.generated}):(se.matches.splice(ne++,0,{fn:/[a-z]/i.test(_.staticDefinitionSymbol||X)?new RegExp("["+(_.staticDefinitionSymbol||X)+"]",_.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:F===void 0?"master":F.def!==X&&F.static!==!0,casing:null,def:_.staticDefinitionSymbol||X,placeholder:_.staticDefinitionSymbol!==void 0?X:void 0,nativeDef:(C?"'":"")+X}),C=!1)}}function k(){if(A.length>0){if(U(x=A[A.length-1],y),x.isAlternator){S=A.pop();for(var se=0;se<S.matches.length;se++)S.matches[se].isGroup&&(S.matches[se].isGroup=!1);A.length>0?(x=A[A.length-1]).matches.push(S):P.matches.push(S)}}else U(P,y)}function D(se){var X=new h.default(!0);return X.openGroup=!1,X.matches=se,X}function W(){if((T=A.pop()).openGroup=!1,T!==void 0)if(A.length>0){if((x=A[A.length-1]).matches.push(T),x.isAlternator){S=A.pop();for(var se=0;se<S.matches.length;se++)S.matches[se].isGroup=!1,S.matches[se].alternatorGroup=!1;A.length>0?(x=A[A.length-1]).matches.push(S):P.matches.push(S)}}else P.matches.push(T);else k()}function O(se){var X=se.pop();return X.isQuantifier&&(X=D([se.pop(),X])),X}for(g&&(_.optionalmarker[0]=void 0,_.optionalmarker[1]=void 0);b=g?E.exec(v):w.exec(v);){if(y=b[0],g){switch(y.charAt(0)){case"?":y="{0,1}";break;case"+":case"*":y="{"+y+"}";break;case"|":if(A.length===0){var B=D(P.matches);B.openGroup=!0,A.push(B),P.matches=[],N=!0}}switch(y){case"\\d":y="[0-9]";break;case"\\p":y+=E.exec(v)[0],y+=E.exec(v)[0]}}if(C)k();else switch(y.charAt(0)){case"$":case"^":g||k();break;case _.escapeChar:C=!0,g&&k();break;case _.optionalmarker[1]:case _.groupmarker[1]:W();break;case _.optionalmarker[0]:A.push(new h.default(!1,!0));break;case _.groupmarker[0]:A.push(new h.default(!0));break;case _.quantifiermarker[0]:var V=new h.default(!1,!1,!0),j=(y=y.replace(/[{}?]/g,"")).split("|"),Y=j[0].split(","),H=isNaN(Y[0])?Y[0]:parseInt(Y[0]),q=Y.length===1?H:isNaN(Y[1])?Y[1]:parseInt(Y[1]),K=isNaN(j[1])?j[1]:parseInt(j[1]);H!=="*"&&H!=="+"||(H=q==="*"?0:1),V.quantifier={min:H,max:q,jit:K};var G=A.length>0?A[A.length-1].matches:P.matches;(b=G.pop()).isGroup||(b=D([b])),G.push(b),G.push(V);break;case _.alternatormarker:if(A.length>0){var te=(x=A[A.length-1]).matches[x.matches.length-1];M=x.openGroup&&(te.matches===void 0||te.isGroup===!1&&te.isAlternator===!1)?A.pop():O(x.matches)}else M=O(P.matches);if(M.isAlternator)A.push(M);else if(M.alternatorGroup?(S=A.pop(),M.alternatorGroup=!1):S=new h.default(!1,!1,!1,!0),S.matches.push(M),A.push(S),M.openGroup){M.openGroup=!1;var ue=new h.default(!0);ue.alternatorGroup=!0,A.push(ue)}break;default:k()}}for(N&&W();A.length>0;)T=A.pop(),P.matches.push(T);return P.matches.length>0&&(function se(X){X&&X.matches&&X.matches.forEach(function(ne,F){var fe=X.matches[F+1];(fe===void 0||fe.matches===void 0||fe.isQuantifier===!1)&&ne&&ne.isGroup&&(ne.isGroup=!1,g||(U(ne,_.groupmarker[0],0),ne.openGroup!==!0&&U(ne,_.groupmarker[1]))),se(ne)})}(P),R.push(P)),(_.numericInput||_.isRTL)&&function se(X){for(var ne in X.matches=X.matches.reverse(),X.matches)if(Object.prototype.hasOwnProperty.call(X.matches,ne)){var F=parseInt(ne);if(X.matches[ne].isQuantifier&&X.matches[F+1]&&X.matches[F+1].isGroup){var fe=X.matches[ne];X.matches.splice(ne,1),X.matches.splice(F+1,0,fe)}X.matches[ne].matches!==void 0?X.matches[ne]=se(X.matches[ne]):X.matches[ne]=((ve=X.matches[ne])===_.optionalmarker[0]?ve=_.optionalmarker[1]:ve===_.optionalmarker[1]?ve=_.optionalmarker[0]:ve===_.groupmarker[0]?ve=_.groupmarker[1]:ve===_.groupmarker[1]&&(ve=_.groupmarker[0]),ve)}var ve;return X}(R[0]),R},o.generateMaskSet=function(v,g){var _;function b(x,S){var M=S.repeat,w=S.groupmarker,E=S.quantifiermarker,C=S.keepStatic;if(M>0||M==="*"||M==="+"){var P=M==="*"?0:M==="+"?1:M;if(P!=M)x=w[0]+x+w[1]+E[0]+P+","+M+E[1];else for(var A=x,R=1;R<P;R++)x+=A}if(C===!0){var N=x.match(new RegExp("(.)\\[([^\\]]*)\\]","g"));N&&N.forEach(function(U,k){var D=function(B,V){return function(j){if(Array.isArray(j))return j}(B)||function(j,Y){var H=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(H!=null){var q,K,G,te,ue=[],se=!0,X=!1;try{if(G=(H=H.call(j)).next,Y!==0)for(;!(se=(q=G.call(H)).done)&&(ue.push(q.value),ue.length!==Y);se=!0);}catch(ne){X=!0,K=ne}finally{try{if(!se&&H.return!=null&&(te=H.return(),Object(te)!==te))return}finally{if(X)throw K}}return ue}}(B,V)||function(j,Y){if(j){if(typeof j=="string")return f(j,Y);var H=Object.prototype.toString.call(j).slice(8,-1);if(H==="Object"&&j.constructor&&(H=j.constructor.name),H==="Map"||H==="Set")return Array.from(j);if(H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return f(j,Y)}}(B,V)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(U.split("["),2),W=D[0],O=D[1];O=O.replace("]",""),x=x.replace(new RegExp("".concat((0,u.default)(W),"\\[").concat((0,u.default)(O),"\\]")),W.charAt(0)===O.charAt(0)?"(".concat(W,"|").concat(W).concat(O,")"):"".concat(W,"[").concat(O,"]"))})}return x}function y(x,S,M){var w,E,C=!1;return x!==null&&x!==""||((C=M.regex!==null)?x=(x=M.regex).replace(/^(\^)(.*)(\$)$/,"$2"):(C=!0,x=".*")),x.length===1&&M.greedy===!1&&M.repeat!==0&&(M.placeholder=""),x=b(x,M),E=C?"regex_"+M.regex:M.numericInput?x.split("").reverse().join(""):x,M.keepStatic!==null&&(E="ks_"+M.keepStatic+E),p(M.placeholder)==="object"&&(E="ph_"+JSON.stringify(M.placeholder)+E),d.default.prototype.masksCache[E]===void 0||g===!0?(w={mask:x,maskToken:d.default.prototype.analyseMask(x,C,M),validPositions:[],_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:S,maskLength:void 0,jitOffset:{}},g!==!0&&(d.default.prototype.masksCache[E]=w,w=c.default.extend(!0,{},d.default.prototype.masksCache[E]))):w=c.default.extend(!0,{},d.default.prototype.masksCache[E]),w}if(typeof v.mask=="function"&&(v.mask=v.mask(v)),Array.isArray(v.mask)){if(v.mask.length>1){v.keepStatic===null&&(v.keepStatic=!0);var T=v.groupmarker[0];return(v.isRTL?v.mask.reverse():v.mask).forEach(function(x){T.length>1&&(T+=v.alternatormarker),x.mask!==void 0&&typeof x.mask!="function"?T+=x.mask:T+=x}),y(T+=v.groupmarker[1],v.mask,v)}v.mask=v.mask.pop()}return _=v.mask&&v.mask.mask!==void 0&&typeof v.mask.mask!="function"?y(v.mask.mask,v.mask,v):y(v.mask,v.mask,v),v.keepStatic===null&&(v.keepStatic=!1),_};var c=m(l(4963)),u=m(l(7184)),d=m(l(2394)),h=m(l(9695));function p(v){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p(v)}function f(v,g){(g==null||g>v.length)&&(g=v.length);for(var _=0,b=new Array(g);_<g;_++)b[_]=v[_];return b}function m(v){return v&&v.__esModule?v:{default:v}}},157:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.mask=function(){var m=this,v=this.opts,g=this.el,_=this.dependencyLib;d.EventRuler.off(g);var b=function(x,S){var M=x.getAttribute("type"),w=x.tagName.toLowerCase()==="input"&&S.supportsInputType.includes(M)||x.isContentEditable||x.tagName.toLowerCase()==="textarea";if(!w)if(x.tagName.toLowerCase()==="input"){var E=document.createElement("input");E.setAttribute("type",M),w=E.type==="text",E=null}else w="partial";return w!==!1?function(C){var P,A;function R(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():p.getLastValidPosition.call(m)!==-1||S.nullable!==!0?(this.inputmask.shadowRoot||this.ownerDocument).activeElement===this&&S.clearMaskOnLostFocus?(m.isRTL?h.clearOptionalTail.call(m,p.getBuffer.call(m).slice()).reverse():h.clearOptionalTail.call(m,p.getBuffer.call(m).slice())).join(""):P.call(this):"":P.call(this)}function N(k){A.call(this,k),this.inputmask&&(0,h.applyInputValue)(this,k)}if(!C.inputmask.__valueGet){if(S.noValuePatching!==!0){if(Object.getOwnPropertyDescriptor){var U=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(C),"value"):void 0;U&&U.get&&U.set?(P=U.get,A=U.set,Object.defineProperty(C,"value",{get:R,set:N,configurable:!0})):C.tagName.toLowerCase()!=="input"&&(P=function(){return this.textContent},A=function(k){this.textContent=k},Object.defineProperty(C,"value",{get:R,set:N,configurable:!0}))}else document.__lookupGetter__&&C.__lookupGetter__("value")&&(P=C.__lookupGetter__("value"),A=C.__lookupSetter__("value"),C.__defineGetter__("value",R),C.__defineSetter__("value",N));C.inputmask.__valueGet=P,C.inputmask.__valueSet=A}C.inputmask._valueGet=function(k){return m.isRTL&&k!==!0?P.call(this.el).split("").reverse().join(""):P.call(this.el)},C.inputmask._valueSet=function(k,D){A.call(this.el,k==null?"":D!==!0&&m.isRTL?k.split("").reverse().join(""):k)},P===void 0&&(P=function(){return this.value},A=function(k){this.value=k},function(k){if(_.valHooks&&(_.valHooks[k]===void 0||_.valHooks[k].inputmaskpatch!==!0)){var D=_.valHooks[k]&&_.valHooks[k].get?_.valHooks[k].get:function(O){return O.value},W=_.valHooks[k]&&_.valHooks[k].set?_.valHooks[k].set:function(O,B){return O.value=B,O};_.valHooks[k]={get:function(O){if(O.inputmask){if(O.inputmask.opts.autoUnmask)return O.inputmask.unmaskedvalue();var B=D(O);return p.getLastValidPosition.call(m,void 0,void 0,O.inputmask.maskset.validPositions)!==-1||S.nullable!==!0?B:""}return D(O)},set:function(O,B){var V=W(O,B);return O.inputmask&&(0,h.applyInputValue)(O,B),V},inputmaskpatch:!0}}}(C.type),function(k){d.EventRuler.on(k,"mouseenter",function(){var D=this,W=D.inputmask._valueGet(!0);W!=(D.inputmask.isRTL?p.getBuffer.call(D.inputmask).slice().reverse():p.getBuffer.call(D.inputmask)).join("")&&(0,h.applyInputValue)(D,W)})}(C))}}(x):x.inputmask=void 0,w}(g,v);if(b!==!1){m.originalPlaceholder=g.placeholder,m.maxLength=g!==void 0?g.maxLength:void 0,m.maxLength===-1&&(m.maxLength=void 0),"inputMode"in g&&g.getAttribute("inputmode")===null&&(g.inputMode=v.inputmode,g.setAttribute("inputmode",v.inputmode)),b===!0&&(v.showMaskOnFocus=v.showMaskOnFocus&&["cc-number","cc-exp"].indexOf(g.autocomplete)===-1,c.iphone&&(v.insertModeVisual=!1,g.setAttribute("autocorrect","off")),d.EventRuler.on(g,"submit",u.EventHandlers.submitEvent),d.EventRuler.on(g,"reset",u.EventHandlers.resetEvent),d.EventRuler.on(g,"blur",u.EventHandlers.blurEvent),d.EventRuler.on(g,"focus",u.EventHandlers.focusEvent),d.EventRuler.on(g,"invalid",u.EventHandlers.invalidEvent),d.EventRuler.on(g,"click",u.EventHandlers.clickEvent),d.EventRuler.on(g,"mouseleave",u.EventHandlers.mouseleaveEvent),d.EventRuler.on(g,"mouseenter",u.EventHandlers.mouseenterEvent),d.EventRuler.on(g,"paste",u.EventHandlers.pasteEvent),d.EventRuler.on(g,"cut",u.EventHandlers.cutEvent),d.EventRuler.on(g,"complete",v.oncomplete),d.EventRuler.on(g,"incomplete",v.onincomplete),d.EventRuler.on(g,"cleared",v.oncleared),v.inputEventOnly!==!0&&d.EventRuler.on(g,"keydown",u.EventHandlers.keyEvent),(c.mobile||v.inputEventOnly)&&g.removeAttribute("maxLength"),d.EventRuler.on(g,"input",u.EventHandlers.inputFallBackEvent)),d.EventRuler.on(g,"setvalue",u.EventHandlers.setValueEvent),m.applyMaskHook===void 0||m.applyMaskHook(),p.getBufferTemplate.call(m).join(""),m.undoValue=m._valueGet(!0);var y=(g.inputmask.shadowRoot||g.ownerDocument).activeElement;if(g.inputmask._valueGet(!0)!==""||v.clearMaskOnLostFocus===!1||y===g){(0,h.applyInputValue)(g,g.inputmask._valueGet(!0),v);var T=p.getBuffer.call(m).slice();f.isComplete.call(m,T)===!1&&v.clearIncomplete&&p.resetMaskSet.call(m,!1),v.clearMaskOnLostFocus&&y!==g&&(p.getLastValidPosition.call(m)===-1?T=[]:h.clearOptionalTail.call(m,T)),(v.clearMaskOnLostFocus===!1||v.showMaskOnFocus&&y===g||g.inputmask._valueGet(!0)!=="")&&(0,h.writeBuffer)(g,T),y===g&&p.caret.call(m,g,p.seekNext.call(m,p.getLastValidPosition.call(m)))}}};var c=l(9845),u=l(6030),d=l(9716),h=l(7760),p=l(8711),f=l(7215)},9695:function(a,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(l,c,u,d){this.matches=[],this.openGroup=l||!1,this.alternatorGroup=!1,this.isGroup=l||!1,this.isOptional=c||!1,this.isQuantifier=u||!1,this.isAlternator=d||!1,this.quantifier={min:1,max:1}}},3194:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,o){if(this==null)throw new TypeError('"this" is null or not defined');var l=Object(this),c=l.length>>>0;if(c===0)return!1;for(var u=0|o,d=Math.max(u>=0?u:c-Math.abs(u),0);d<c;){if(l[d]===a)return!0;d++}return!1}})},9302:function(){var a=Function.bind.call(Function.call,Array.prototype.reduce),o=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),l=Function.bind.call(Function.call,Array.prototype.concat),c=Object.keys;Object.entries||(Object.entries=function(u){return a(c(u),function(d,h){return l(d,typeof h=="string"&&o(u,h)?[[h,u[h]]]:[])},[])})},7149:function(){function a(o){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},a(o)}typeof Object.getPrototypeOf!="function"&&(Object.getPrototypeOf=a("test".__proto__)==="object"?function(o){return o.__proto__}:function(o){return o.constructor.prototype})},4013:function(){String.prototype.includes||(String.prototype.includes=function(a,o){return typeof o!="number"&&(o=0),!(o+a.length>this.length)&&this.indexOf(a,o)!==-1})},8711:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.caret=function(_,b,y,T,x){var S,M=this,w=this.opts;if(b===void 0)return"selectionStart"in _&&"selectionEnd"in _?(b=_.selectionStart,y=_.selectionEnd):u.default.getSelection?(S=u.default.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==_&&S.commonAncestorContainer!==_||(b=S.startOffset,y=S.endOffset):document.selection&&document.selection.createRange&&(y=(b=0-(S=document.selection.createRange()).duplicate().moveStart("character",-_.inputmask._valueGet().length))+S.text.length),{begin:T?b:g.call(M,b),end:T?y:g.call(M,y)};if(Array.isArray(b)&&(y=M.isRTL?b[0]:b[1],b=M.isRTL?b[1]:b[0]),b.begin!==void 0&&(y=M.isRTL?b.begin:b.end,b=M.isRTL?b.end:b.begin),typeof b=="number"){b=T?b:g.call(M,b),y=typeof(y=T?y:g.call(M,y))=="number"?y:b;var E=parseInt(((_.ownerDocument.defaultView||u.default).getComputedStyle?(_.ownerDocument.defaultView||u.default).getComputedStyle(_,null):_.currentStyle).fontSize)*y;if(_.scrollLeft=E>_.scrollWidth?E:0,_.inputmask.caretPos={begin:b,end:y},w.insertModeVisual&&w.insertMode===!1&&b===y&&(x||y++),_===(_.inputmask.shadowRoot||_.ownerDocument).activeElement){if("setSelectionRange"in _)_.setSelectionRange(b,y);else if(u.default.getSelection){if(S=document.createRange(),_.firstChild===void 0||_.firstChild===null){var C=document.createTextNode("");_.appendChild(C)}S.setStart(_.firstChild,b<_.inputmask._valueGet().length?b:_.inputmask._valueGet().length),S.setEnd(_.firstChild,y<_.inputmask._valueGet().length?y:_.inputmask._valueGet().length),S.collapse(!0);var P=u.default.getSelection();P.removeAllRanges(),P.addRange(S)}else _.createTextRange&&((S=_.createTextRange()).collapse(!0),S.moveEnd("character",y),S.moveStart("character",b),S.select());_.inputmask.caretHook===void 0||_.inputmask.caretHook.call(M,{begin:b,end:y})}}},o.determineLastRequiredPosition=function(_){var b,y,T=this,x=T.maskset,S=T.dependencyLib,M=f.call(T),w={},E=x.validPositions[M],C=h.getMaskTemplate.call(T,!0,f.call(T),!0,!0),P=C.length,A=E!==void 0?E.locator.slice():void 0;for(b=M+1;b<C.length;b++)A=(y=h.getTestTemplate.call(T,b,A,b-1)).locator.slice(),w[b]=S.extend(!0,{},y);var R=E&&E.alternation!==void 0?E.locator[E.alternation]:void 0;for(b=P-1;b>M&&((y=w[b]).match.optionality||y.match.optionalQuantifier&&y.match.newBlockMarker||R&&(R!==w[b].locator[E.alternation]&&y.match.static!==!0||y.match.static===!0&&y.locator[E.alternation]&&d.checkAlternationMatch.call(T,y.locator[E.alternation].toString().split(","),R.toString().split(","))&&h.getTests.call(T,b)[0].def!==""))&&C[b]===h.getPlaceholder.call(T,b,y.match);b--)P--;return _?{l:P,def:w[P]?w[P].match:void 0}:P},o.determineNewCaretPosition=function(_,b,y){var T,x,S,M=this,w=M.maskset,E=M.opts;if(b&&(M.isRTL?_.end=_.begin:_.begin=_.end),_.begin===_.end){switch(y=y||E.positionCaretOnClick){case"none":break;case"select":_={begin:0,end:p.call(M).length};break;case"ignore":_.end=_.begin=v.call(M,f.call(M));break;case"radixFocus":if(M.clicked>1&&w.validPositions.length===0)break;if(function(U){if(E.radixPoint!==""&&E.digits!==0){var k=w.validPositions;if(k[U]===void 0||k[U].input===void 0){if(U<v.call(M,-1))return!0;var D=p.call(M).indexOf(E.radixPoint);if(D!==-1){for(var W=0,O=k.length;W<O;W++)if(k[W]&&D<W&&k[W].input!==h.getPlaceholder.call(M,W))return!1;return!0}}}return!1}(_.begin)){var C=p.call(M).join("").indexOf(E.radixPoint);_.end=_.begin=E.numericInput?v.call(M,C):C;break}default:if(T=_.begin,x=f.call(M,T,!0),T<=(S=v.call(M,x!==-1||m.call(M,0)?x:-1)))_.end=_.begin=m.call(M,T,!1,!0)?T:v.call(M,T);else{var P=w.validPositions[x],A=h.getTestTemplate.call(M,S,P?P.match.locator:void 0,P),R=h.getPlaceholder.call(M,S,A.match);if(R!==""&&p.call(M)[S]!==R&&A.match.optionalQuantifier!==!0&&A.match.newBlockMarker!==!0||!m.call(M,S,E.keepStatic,!0)&&A.match.def===R){var N=v.call(M,S);(T>=N||T===S)&&(S=N)}_.end=_.begin=S}}return _}},o.getBuffer=p,o.getBufferTemplate=function(){var _=this.maskset;return _._buffer===void 0&&(_._buffer=h.getMaskTemplate.call(this,!1,1),_.buffer===void 0&&(_.buffer=_._buffer.slice())),_._buffer},o.getLastValidPosition=f,o.isMask=m,o.resetMaskSet=function(_){var b=this.maskset;b.buffer=void 0,_!==!0&&(b.validPositions=[],b.p=0),_===!1&&(b.tests={},b.jitOffset={})},o.seekNext=v,o.seekPrevious=function(_,b){var y=this,T=_-1;if(_<=0)return 0;for(;T>0&&(b===!0&&(h.getTest.call(y,T).match.newBlockMarker!==!0||!m.call(y,T,void 0,!0))||b!==!0&&!m.call(y,T,void 0,!0));)T--;return T},o.translatePosition=g;var c,u=(c=l(9380))&&c.__esModule?c:{default:c},d=l(7215),h=l(4713);function p(_){var b=this,y=b.maskset;return y.buffer!==void 0&&_!==!0||(y.buffer=h.getMaskTemplate.call(b,!0,f.call(b),!0),y._buffer===void 0&&(y._buffer=y.buffer.slice())),y.buffer}function f(_,b,y){var T=this.maskset,x=-1,S=-1,M=y||T.validPositions;_===void 0&&(_=-1);for(var w=0,E=M.length;w<E;w++)M[w]&&(b||M[w].generatedInput!==!0)&&(w<=_&&(x=w),w>=_&&(S=w));return x===-1||x===_?S:S===-1||_-x<S-_?x:S}function m(_,b,y){var T=this,x=this.maskset,S=h.getTestTemplate.call(T,_).match;if(S.def===""&&(S=h.getTest.call(T,_).match),S.static!==!0)return S.fn;if(y===!0&&x.validPositions[_]!==void 0&&x.validPositions[_].generatedInput!==!0)return!0;if(b!==!0&&_>-1){if(y){var M=h.getTests.call(T,_);return M.length>1+(M[M.length-1].match.def===""?1:0)}var w=h.determineTestTemplate.call(T,_,h.getTests.call(T,_)),E=h.getPlaceholder.call(T,_,w.match);return w.match.def!==E}return!1}function v(_,b,y){var T=this;y===void 0&&(y=!0);for(var x=_+1;h.getTest.call(T,x).match.def!==""&&(b===!0&&(h.getTest.call(T,x).match.newBlockMarker!==!0||!m.call(T,x,void 0,!0))||b!==!0&&!m.call(T,x,void 0,y));)x++;return x}function g(_){var b=this.opts,y=this.el;return!this.isRTL||typeof _!="number"||b.greedy&&b.placeholder===""||!y||(_=this._valueGet().length-_)<0&&(_=0),_}},4713:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.determineTestTemplate=g,o.getDecisionTaker=f,o.getMaskTemplate=function(T,x,S,M,w){var E=this,C=this.opts,P=this.maskset,A=C.greedy;w&&C.greedy&&(C.greedy=!1,E.maskset.tests={}),x=x||0;var R,N,U,k,D=[],W=0;do{if(T===!0&&P.validPositions[W])N=(U=w&&P.validPositions[W].match.optionality&&P.validPositions[W+1]===void 0&&(P.validPositions[W].generatedInput===!0||P.validPositions[W].input==C.skipOptionalPartCharacter&&W>0)?g.call(E,W,y.call(E,W,R,W-1)):P.validPositions[W]).match,R=U.locator.slice(),D.push(S===!0?U.input:S===!1?N.nativeDef:m.call(E,W,N));else{N=(U=v.call(E,W,R,W-1)).match,R=U.locator.slice();var O=M!==!0&&(C.jitMasking!==!1?C.jitMasking:N.jit);(k=(k||P.validPositions[W-1])&&N.static&&N.def!==C.groupSeparator&&N.fn===null)||O===!1||O===void 0||typeof O=="number"&&isFinite(O)&&O>W?D.push(S===!1?N.nativeDef:m.call(E,D.length,N)):k=!1}W++}while(N.static!==!0||N.def!==""||x>W);return D[D.length-1]===""&&D.pop(),S===!1&&P.maskLength!==void 0||(P.maskLength=W-1),C.greedy=A,D},o.getPlaceholder=m,o.getTest=_,o.getTestTemplate=v,o.getTests=y,o.isSubsetOf=b;var c,u=(c=l(2394))&&c.__esModule?c:{default:c},d=l(8711);function h(T){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},h(T)}function p(T,x){var S=(T.alternation!=null?T.mloc[f(T)]:T.locator).join("");if(S!=="")for(S=S.split(":")[0];S.length<x;)S+="0";return S}function f(T){var x=T.locator[T.alternation];return typeof x=="string"&&x.length>0&&(x=x.split(",")[0]),x!==void 0?x.toString():""}function m(T,x,S){var M=this,w=this.opts,E=this.maskset;if((x=x||_.call(M,T).match).placeholder!==void 0||S===!0){if(x.placeholder!==""&&x.static===!0&&x.generated!==!0){var C=d.getLastValidPosition.call(M,T),P=d.seekNext.call(M,C);return(S?T<=P:T<P)?w.staticDefinitionSymbol&&x.static?x.nativeDef:x.def:typeof x.placeholder=="function"?x.placeholder(w):x.placeholder}return typeof x.placeholder=="function"?x.placeholder(w):x.placeholder}if(x.static===!0){if(T>-1&&E.validPositions[T]===void 0){var A,R=y.call(M,T),N=[];if(typeof w.placeholder=="string"&&R.length>1+(R[R.length-1].match.def===""?1:0)){for(var U=0;U<R.length;U++)if(R[U].match.def!==""&&R[U].match.optionality!==!0&&R[U].match.optionalQuantifier!==!0&&(R[U].match.static===!0||A===void 0||R[U].match.fn.test(A.match.def,E,T,!0,w)!==!1)&&(N.push(R[U]),R[U].match.static===!0&&(A=R[U]),N.length>1&&/[0-9a-bA-Z]/.test(N[0].match.def)))return w.placeholder.charAt(T%w.placeholder.length)}}return x.def}return h(w.placeholder)==="object"?x.def:w.placeholder.charAt(T%w.placeholder.length)}function v(T,x,S){return this.maskset.validPositions[T]||g.call(this,T,y.call(this,T,x&&x.slice(),S))}function g(T,x){var S=this.opts,M=0,w=function(k,D){var W=0,O=!1;return D.forEach(function(B){B.match.optionality&&(W!==0&&W!==B.match.optionality&&(O=!0),(W===0||W>B.match.optionality)&&(W=B.match.optionality))}),W&&(k==0||D.length==1?W=0:O||(W=0)),W}(T,x);T=T>0?T-1:0;var E,C,P,A=p(_.call(this,T));S.greedy&&x.length>1&&x[x.length-1].match.def===""&&(M=1);for(var R=0;R<x.length-M;R++){var N=x[R];E=p(N,A.length);var U=Math.abs(E-A);(N.unMatchedAlternationStopped!==!0||x.filter(function(k){return k.unMatchedAlternationStopped!==!0}).length<=1)&&(C===void 0||E!==""&&U<C||P&&!S.greedy&&P.match.optionality&&P.match.optionality-w>0&&P.match.newBlockMarker==="master"&&(!N.match.optionality||N.match.optionality-w<1||!N.match.newBlockMarker)||P&&!S.greedy&&P.match.optionalQuantifier&&!N.match.optionalQuantifier)&&(C=U,P=N)}return P}function _(T,x){var S=this.maskset;return S.validPositions[T]?S.validPositions[T]:(x||y.call(this,T))[0]}function b(T,x,S){function M(w){for(var E,C=[],P=-1,A=0,R=w.length;A<R;A++)if(w.charAt(A)==="-")for(E=w.charCodeAt(A+1);++P<E;)C.push(String.fromCharCode(P));else P=w.charCodeAt(A),C.push(w.charAt(A));return C.join("")}return T.match.def===x.match.nativeDef||!(!(S.regex||T.match.fn instanceof RegExp&&x.match.fn instanceof RegExp)||T.match.static===!0||x.match.static===!0)&&(x.match.fn.source==="."||M(x.match.fn.source.replace(/[[\]/]/g,"")).indexOf(M(T.match.fn.source.replace(/[[\]/]/g,"")))!==-1)}function y(T,x,S){var M,w,E=this,C=this.dependencyLib,P=this.maskset,A=this.opts,R=this.el,N=P.maskToken,U=x?S:0,k=x?x.slice():[0],D=[],W=!1,O=x?x.join(""):"",B=!1;function V(K,G,te,ue){function se(F,fe,ve){function pe(L,Q){var oe=Q.matches.indexOf(L)===0;return oe||Q.matches.every(function(he,de){return he.isQuantifier===!0?oe=pe(L,Q.matches[de-1]):Object.prototype.hasOwnProperty.call(he,"matches")&&(oe=pe(L,he)),!oe}),oe}function Me(L,Q,oe){var he,de;if((P.tests[L]||P.validPositions[L])&&(P.validPositions[L]?[P.validPositions[L]]:P.tests[L]).every(function(le,ye){if(le.mloc[Q])return he=le,!1;var Se=oe!==void 0?oe:le.alternation,_e=le.locator[Se]!==void 0?le.locator[Se].toString().indexOf(Q):-1;return(de===void 0||_e<de)&&_e!==-1&&(he=le,de=_e),!0}),he){var ee=he.locator[he.alternation],ie=he.mloc[Q]||he.mloc[ee]||he.locator;return ie[ie.length-1].toString().indexOf(":")!==-1&&ie.pop(),ie.slice((oe!==void 0?oe:he.alternation)+1)}return oe!==void 0?Me(L,Q):void 0}function Pe(L,Q){return L.match.static===!0&&Q.match.static!==!0&&Q.match.fn.test(L.match.def,P,T,!1,A,!1)}function Ce(L,Q){var oe=L.alternation,he=Q===void 0||oe<=Q.alternation&&L.locator[oe].toString().indexOf(Q.locator[oe])===-1;if(!he&&oe>Q.alternation){for(var de=0;de<oe;de++)if(L.locator[de]!==Q.locator[de]){oe=de,he=!0;break}}return!!he&&function(ee){L.mloc=L.mloc||{};var ie=L.locator[ee];if(ie!==void 0){if(typeof ie=="string"&&(ie=ie.split(",")[0]),L.mloc[ie]===void 0&&(L.mloc[ie]=L.locator.slice(),L.mloc[ie].push(":".concat(L.alternation))),Q!==void 0){for(var le in Q.mloc)typeof le=="string"&&(le=parseInt(le.split(",")[0])),L.mloc[le+0]=Q.mloc[le];L.locator[ee]=Object.keys(L.mloc).join(",")}return L.alternation>ee&&(L.alternation=ee),!0}return L.alternation=void 0,!1}(oe)}function z(L,Q){if(L.locator.length!==Q.locator.length)return!1;for(var oe=L.alternation+1;oe<L.locator.length;oe++)if(L.locator[oe]!==Q.locator[oe])return!1;return!0}if(U>T+A._maxTestPos)throw new Error("Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. ".concat(P.mask));if(U===T&&F.matches===void 0){if(D.push({match:F,locator:fe.reverse(),cd:O,mloc:{}}),!F.optionality||ve!==void 0||!(A.definitions&&A.definitions[F.nativeDef]&&A.definitions[F.nativeDef].optional||u.default.prototype.definitions[F.nativeDef]&&u.default.prototype.definitions[F.nativeDef].optional))return!0;W=!0,U=T}else if(F.matches!==void 0){if(F.isGroup&&ve!==F)return function(){if(F=se(K.matches[K.matches.indexOf(F)+1],fe,ve))return!0}();if(F.isOptional)return function(){var L=F,Q=D.length;if(F=V(F,G,fe,ve),D.length>0){if(D.forEach(function(oe,he){he>=Q&&(oe.match.optionality=oe.match.optionality?oe.match.optionality+1:1)}),M=D[D.length-1].match,ve!==void 0||!pe(M,L))return F;W=!0,U=T}}();if(F.isAlternator)return function(){function L(He){for(var We,tt=He.matches[0].matches?He.matches[0].matches.length:1,zt=0;zt<He.matches.length&&tt===(We=He.matches[zt].matches?He.matches[zt].matches.length:1);zt++);return tt!==We}E.hasAlternator=!0;var Q,oe=F,he=[],de=D.slice(),ee=fe.length,ie=G.length>0?G.shift():-1;if(ie===-1||typeof ie=="string"){var le,ye=U,Se=G.slice(),_e=[];if(typeof ie=="string")_e=ie.split(",");else for(le=0;le<oe.matches.length;le++)_e.push(le.toString());if(P.excludes[T]!==void 0){for(var Te=_e.slice(),ke=0,Ne=P.excludes[T].length;ke<Ne;ke++){var Ge=P.excludes[T][ke].toString().split(":");fe.length==Ge[1]&&_e.splice(_e.indexOf(Ge[0]),1)}_e.length===0&&(delete P.excludes[T],_e=Te)}(A.keepStatic===!0||isFinite(parseInt(A.keepStatic))&&ye>=A.keepStatic)&&(_e=_e.slice(0,1));for(var Be=0;Be<_e.length;Be++){le=parseInt(_e[Be]),D=[],G=typeof ie=="string"&&Me(U,le,ee)||Se.slice();var qe=oe.matches[le];if(qe&&se(qe,[le].concat(fe),ve))F=!0;else if(Be===0&&(B=L(oe)),qe&&qe.matches&&qe.matches.length>oe.matches[0].matches.length)break;Q=D.slice(),U=ye,D=[];for(var ge=0;ge<Q.length;ge++){var Ue=Q[ge],xe=!1;Ue.alternation=Ue.alternation||ee,Ce(Ue);for(var Le=0;Le<he.length;Le++){var ze=he[Le];if(typeof ie!="string"||Ue.alternation!==void 0&&_e.includes(Ue.locator[Ue.alternation].toString())){if(Ue.match.nativeDef===ze.match.nativeDef){xe=!0,Ce(ze,Ue);break}if(b(Ue,ze,A)){Ce(Ue,ze)&&(xe=!0,he.splice(he.indexOf(ze),0,Ue));break}if(b(ze,Ue,A)){Ce(ze,Ue);break}if(Pe(Ue,ze)){z(Ue,ze)||R.inputmask.userOptions.keepStatic!==void 0?Ce(Ue,ze)&&(xe=!0,he.splice(he.indexOf(ze),0,Ue)):A.keepStatic=!0;break}if(Pe(ze,Ue)){Ce(ze,Ue);break}}}xe||he.push(Ue)}}D=de.concat(he),U=T,W=D.length>0&&B,F=he.length>0&&!B,B&&W&&!F&&D.forEach(function(He,We){He.unMatchedAlternationStopped=!0}),G=Se.slice()}else F=se(oe.matches[ie]||K.matches[ie],[ie].concat(fe),ve);if(F)return!0}();if(F.isQuantifier&&ve!==K.matches[K.matches.indexOf(F)-1])return function(){for(var L=F,Q=!1,oe=G.length>0?G.shift():0;oe<(isNaN(L.quantifier.max)?oe+1:L.quantifier.max)&&U<=T;oe++){var he=K.matches[K.matches.indexOf(L)-1];if(F=se(he,[oe].concat(fe),he)){if(D.forEach(function(de,ee){(M=j(he,de.match)?de.match:D[D.length-1].match).optionalQuantifier=oe>=L.quantifier.min,M.jit=(oe+1)*(he.matches.indexOf(M)+1)>L.quantifier.jit,M.optionalQuantifier&&pe(M,he)&&(W=!0,U=T,A.greedy&&P.validPositions[T-1]==null&&oe>L.quantifier.min&&["*","+"].indexOf(L.quantifier.max)!=-1&&(D.pop(),O=void 0),Q=!0,F=!1),!Q&&M.jit&&(P.jitOffset[T]=he.matches.length-he.matches.indexOf(M))}),Q)break;return!0}}}();if(F=V(F,G,fe,ve))return!0}else U++}for(var X=G.length>0?G.shift():0;X<K.matches.length;X++)if(K.matches[X].isQuantifier!==!0){var ne=se(K.matches[X],[X].concat(te),ue);if(ne&&U===T)return ne;if(U>T)break}}function j(K,G){var te=K.matches.indexOf(G)!=-1;return te||K.matches.forEach(function(ue,se){ue.matches===void 0||te||(te=j(ue,G))}),te}if(T>-1){if(x===void 0){for(var Y,H=T-1;(Y=P.validPositions[H]||P.tests[H])===void 0&&H>-1;)H--;Y!==void 0&&H>-1&&(k=function(K,G){var te,ue=[];return Array.isArray(G)||(G=[G]),G.length>0&&(G[0].alternation===void 0||A.keepStatic===!0?(ue=g.call(E,K,G.slice()).locator.slice()).length===0&&(ue=G[0].locator.slice()):G.forEach(function(se){se.def!==""&&(ue.length===0?(te=se.alternation,ue=se.locator.slice()):se.locator[te]&&ue[te].toString().indexOf(se.locator[te])===-1&&(ue[te]+=","+se.locator[te]))})),ue}(H,Y),O=k.join(""),U=H)}if(P.tests[T]&&P.tests[T][0].cd===O)return P.tests[T];for(var q=k.shift();q<N.length&&!(V(N[q],k,[q])&&U===T||U>T);q++);}return(D.length===0||W)&&D.push({match:{fn:null,static:!0,optionality:!1,casing:null,def:"",placeholder:""},locator:B&&D.filter(function(K){return K.unMatchedAlternationStopped!==!0}).length===0?[0]:[],mloc:{},cd:O}),x!==void 0&&P.tests[T]?w=C.extend(!0,[],D):(P.tests[T]=C.extend(!0,[],D),w=P.tests[T]),D.forEach(function(K){K.match.optionality=K.match.defOptionality||!1}),w}},7215:function(a,o,l){Object.defineProperty(o,"__esModule",{value:!0}),o.alternate=p,o.checkAlternationMatch=function(x,S,M){for(var w,E=this.opts.greedy?S:S.slice(0,1),C=!1,P=M!==void 0?M.split(","):[],A=0;A<P.length;A++)(w=x.indexOf(P[A]))!==-1&&x.splice(w,1);for(var R=0;R<x.length;R++)if(E.includes(x[R])){C=!0;break}return C},o.handleRemove=function(x,S,M,w,E){var C=this,P=this.maskset,A=this.opts;if((A.numericInput||C.isRTL)&&(S===u.keys.Backspace?S=u.keys.Delete:S===u.keys.Delete&&(S=u.keys.Backspace),C.isRTL)){var R=M.end;M.end=M.begin,M.begin=R}var N,U=d.getLastValidPosition.call(C,void 0,!0);M.end>=d.getBuffer.call(C).length&&U>=M.end&&(M.end=U+1),S===u.keys.Backspace?M.end-M.begin<1&&(M.begin=d.seekPrevious.call(C,M.begin)):S===u.keys.Delete&&M.begin===M.end&&(M.end=d.isMask.call(C,M.end,!0,!0)?M.end+1:d.seekNext.call(C,M.end)+1),(N=T.call(C,M))!==!1&&((w!==!0&&A.keepStatic!==!1||A.regex!==null&&h.getTest.call(C,M.begin).match.def.indexOf("|")!==-1)&&p.call(C,!0),w!==!0&&(P.p=S===u.keys.Delete?M.begin+N:M.begin,P.p=d.determineNewCaretPosition.call(C,{begin:P.p,end:P.p},!1,A.insertMode===!1&&S===u.keys.Backspace?"none":void 0).begin))},o.isComplete=m,o.isSelection=v,o.isValid=g,o.refreshFromBuffer=b,o.revalidateMask=T;var c=l(6030),u=l(2839),d=l(8711),h=l(4713);function p(x,S,M,w,E,C){var P=this,A=this.dependencyLib,R=this.opts,N=P.maskset;if(!P.hasAlternator)return!1;var U,k,D,W,O,B,V,j,Y,H,q,K=A.extend(!0,[],N.validPositions),G=A.extend(!0,{},N.tests),te=!1,ue=!1,se=E!==void 0?E:d.getLastValidPosition.call(P);if(C&&(H=C.begin,q=C.end,C.begin>C.end&&(H=C.end,q=C.begin)),se===-1&&E===void 0)U=0,k=(W=h.getTest.call(P,U)).alternation;else for(;se>=0;se--)if((D=N.validPositions[se])&&D.alternation!==void 0){if(se<=(x||0)&&W&&W.locator[D.alternation]!==D.locator[D.alternation])break;U=se,k=N.validPositions[U].alternation,W=D}if(k!==void 0){V=parseInt(U),N.excludes[V]=N.excludes[V]||[],x!==!0&&N.excludes[V].push((0,h.getDecisionTaker)(W)+":"+W.alternation);var X=[],ne=-1;for(O=V;V<d.getLastValidPosition.call(P,void 0,!0)+1;O++)ne===-1&&x<=O&&S!==void 0&&(X.push(S),ne=X.length-1),(B=N.validPositions[V])&&B.generatedInput!==!0&&(C===void 0||O<H||O>=q)&&X.push(B.input),N.validPositions.splice(V,1);for(ne===-1&&S!==void 0&&(X.push(S),ne=X.length-1);N.excludes[V]!==void 0&&N.excludes[V].length<10;){for(N.tests={},d.resetMaskSet.call(P,!0),te=!0,O=0;O<X.length&&(j=te.caret||R.insertMode==0&&j!=null?d.seekNext.call(P,j):d.getLastValidPosition.call(P,void 0,!0)+1,Y=X[O],te=g.call(P,j,Y,!1,w,!0));O++)O===ne&&(ue=te),x==1&&te&&(ue={caretPos:O});if(te)break;if(d.resetMaskSet.call(P),W=h.getTest.call(P,V),N.validPositions=A.extend(!0,[],K),N.tests=A.extend(!0,{},G),!N.excludes[V]){ue=p.call(P,x,S,M,w,V-1,C);break}if(W.alternation!=null){var F=(0,h.getDecisionTaker)(W);if(N.excludes[V].indexOf(F+":"+W.alternation)!==-1){ue=p.call(P,x,S,M,w,V-1,C);break}for(N.excludes[V].push(F+":"+W.alternation),O=V;O<d.getLastValidPosition.call(P,void 0,!0)+1;O++)N.validPositions.splice(V)}else delete N.excludes[V]}}return ue&&R.keepStatic===!1||delete N.excludes[V],ue}function f(x,S,M){var w=this.opts,E=this.maskset;switch(w.casing||S.casing){case"upper":x=x.toUpperCase();break;case"lower":x=x.toLowerCase();break;case"title":var C=E.validPositions[M-1];x=M===0||C&&C.input===String.fromCharCode(u.keyCode.Space)?x.toUpperCase():x.toLowerCase();break;default:if(typeof w.casing=="function"){var P=Array.prototype.slice.call(arguments);P.push(E.validPositions),x=w.casing.apply(this,P)}}return x}function m(x){var S=this,M=this.opts,w=this.maskset;if(typeof M.isComplete=="function")return M.isComplete(x,M);if(M.repeat!=="*"){var E=!1,C=d.determineLastRequiredPosition.call(S,!0),P=C.l;if(C.def===void 0||C.def.newBlockMarker||C.def.optionality||C.def.optionalQuantifier){E=!0;for(var A=0;A<=P;A++){var R=h.getTestTemplate.call(S,A).match;if(R.static!==!0&&w.validPositions[A]===void 0&&(R.optionality===!1||R.optionality===void 0||R.optionality&&R.newBlockMarker==0)&&(R.optionalQuantifier===!1||R.optionalQuantifier===void 0)||R.static===!0&&R.def!=""&&x[A]!==h.getPlaceholder.call(S,A,R)){E=!1;break}}}return E}}function v(x){var S=this.opts.insertMode?0:1;return this.isRTL?x.begin-x.end>S:x.end-x.begin>S}function g(x,S,M,w,E,C,P){var A=this,R=this.dependencyLib,N=this.opts,U=A.maskset;M=M===!0;var k=x;function D(te){if(te!==void 0){if(te.remove!==void 0&&(Array.isArray(te.remove)||(te.remove=[te.remove]),te.remove.sort(function(se,X){return A.isRTL?se.pos-X.pos:X.pos-se.pos}).forEach(function(se){T.call(A,{begin:se,end:se+1})}),te.remove=void 0),te.insert!==void 0&&(Array.isArray(te.insert)||(te.insert=[te.insert]),te.insert.sort(function(se,X){return A.isRTL?X.pos-se.pos:se.pos-X.pos}).forEach(function(se){se.c!==""&&g.call(A,se.pos,se.c,se.strict===void 0||se.strict,se.fromIsValid!==void 0?se.fromIsValid:w)}),te.insert=void 0),te.refreshFromBuffer&&te.buffer){var ue=te.refreshFromBuffer;b.call(A,ue===!0?ue:ue.start,ue.end,te.buffer),te.refreshFromBuffer=void 0}te.rewritePosition!==void 0&&(k=te.rewritePosition,te=!0)}return te}function W(te,ue,se){var X=!1;return h.getTests.call(A,te).every(function(ne,F){var fe=ne.match;if(d.getBuffer.call(A,!0),(X=(!fe.jit||U.validPositions[d.seekPrevious.call(A,te)]!==void 0)&&(fe.fn!=null?fe.fn.test(ue,U,te,se,N,v.call(A,x)):(ue===fe.def||ue===N.skipOptionalPartCharacter)&&fe.def!==""&&{c:h.getPlaceholder.call(A,te,fe,!0)||fe.def,pos:te}))!==!1){var ve=X.c!==void 0?X.c:ue,pe=te;return ve=ve===N.skipOptionalPartCharacter&&fe.static===!0?h.getPlaceholder.call(A,te,fe,!0)||fe.def:ve,(X=D(X))!==!0&&X.pos!==void 0&&X.pos!==te&&(pe=X.pos),X!==!0&&X.pos===void 0&&X.c===void 0||T.call(A,x,R.extend({},ne,{input:f.call(A,ve,fe,pe)}),w,pe)===!1&&(X=!1),!1}return!0}),X}x.begin!==void 0&&(k=A.isRTL?x.end:x.begin);var O=!0,B=R.extend(!0,[],U.validPositions);if(N.keepStatic===!1&&U.excludes[k]!==void 0&&E!==!0&&w!==!0)for(var V=k;V<(A.isRTL?x.begin:x.end);V++)U.excludes[V]!==void 0&&(U.excludes[V]=void 0,delete U.tests[V]);if(typeof N.preValidation=="function"&&w!==!0&&C!==!0&&(O=D(O=N.preValidation.call(A,d.getBuffer.call(A),k,S,v.call(A,x),N,U,x,M||E))),O===!0){if(O=W(k,S,M),(!M||w===!0)&&O===!1&&C!==!0){var j=U.validPositions[k];if(!j||j.match.static!==!0||j.match.def!==S&&S!==N.skipOptionalPartCharacter){if(N.insertMode||U.validPositions[d.seekNext.call(A,k)]===void 0||x.end>k){var Y=!1;if(U.jitOffset[k]&&U.validPositions[d.seekNext.call(A,k)]===void 0&&(O=g.call(A,k+U.jitOffset[k],S,!0,!0))!==!1&&(E!==!0&&(O.caret=k),Y=!0),x.end>k&&(U.validPositions[k]=void 0),!Y&&!d.isMask.call(A,k,N.keepStatic&&k===0)){for(var H=k+1,q=d.seekNext.call(A,k,!1,k!==0);H<=q;H++)if((O=W(H,S,M))!==!1){O=y.call(A,k,O.pos!==void 0?O.pos:H)||O,k=H;break}}}}else O={caret:d.seekNext.call(A,k)}}A.hasAlternator&&E!==!0&&!M&&(E=!0,O===!1&&N.keepStatic&&(m.call(A,d.getBuffer.call(A))||k===0)?O=p.call(A,k,S,M,w,void 0,x):(v.call(A,x)&&U.tests[k]&&U.tests[k].length>1&&N.keepStatic||O==1&&N.numericInput!==!0&&U.tests[k]&&U.tests[k].length>1&&d.getLastValidPosition.call(A,void 0,!0)>k)&&(O=p.call(A,!0))),O===!0&&(O={pos:k})}if(typeof N.postValidation=="function"&&w!==!0&&C!==!0){var K=N.postValidation.call(A,d.getBuffer.call(A,!0),x.begin!==void 0?A.isRTL?x.end:x.begin:x,S,O,N,U,M,P);K!==void 0&&(O=K===!0?O:K)}O&&O.pos===void 0&&(O.pos=k),O===!1||C===!0?(d.resetMaskSet.call(A,!0),U.validPositions=R.extend(!0,[],B)):y.call(A,void 0,k,!0);var G=D(O);return A.maxLength!==void 0&&d.getBuffer.call(A).length>A.maxLength&&!w&&(d.resetMaskSet.call(A,!0),U.validPositions=R.extend(!0,[],B),G=!1),G}function _(x,S,M){for(var w=this.maskset,E=!1,C=h.getTests.call(this,x),P=0;P<C.length;P++){if(C[P].match&&(C[P].match.nativeDef===S.match[M.shiftPositions?"def":"nativeDef"]&&(!M.shiftPositions||!S.match.static)||C[P].match.nativeDef===S.match.nativeDef||M.regex&&!C[P].match.static&&C[P].match.fn.test(S.input,w,x,!1,M))){E=!0;break}if(C[P].match&&C[P].match.def===S.match.nativeDef){E=void 0;break}}return E===!1&&w.jitOffset[x]!==void 0&&(E=_.call(this,x+w.jitOffset[x],S,M)),E}function b(x,S,M){var w,E,C=this,P=this.maskset,A=this.opts,R=this.dependencyLib,N=A.skipOptionalPartCharacter,U=C.isRTL?M.slice().reverse():M;if(A.skipOptionalPartCharacter="",x===!0)d.resetMaskSet.call(C,!1),x=0,S=M.length,E=d.determineNewCaretPosition.call(C,{begin:0,end:0},!1).begin;else{for(w=x;w<S;w++)P.validPositions.splice(x,0);E=x}var k=new R.Event("keypress");for(w=x;w<S;w++){k.key=U[w].toString(),C.ignorable=!1;var D=c.EventHandlers.keypressEvent.call(C,k,!0,!1,!1,E);D!==!1&&D!==void 0&&(E=D.forwardPosition)}A.skipOptionalPartCharacter=N}function y(x,S,M){var w=this,E=this.maskset,C=this.dependencyLib;if(x===void 0)for(x=S-1;x>0&&!E.validPositions[x];x--);for(var P=x;P<S;P++)if(E.validPositions[P]===void 0&&!d.isMask.call(w,P,!1)&&(P==0?h.getTest.call(w,P):E.validPositions[P-1])){var A=h.getTests.call(w,P).slice();A[A.length-1].match.def===""&&A.pop();var R,N=h.determineTestTemplate.call(w,P,A);if(N&&(N.match.jit!==!0||N.match.newBlockMarker==="master"&&(R=E.validPositions[P+1])&&R.match.optionalQuantifier===!0)&&((N=C.extend({},N,{input:h.getPlaceholder.call(w,P,N.match,!0)||N.match.def})).generatedInput=!0,T.call(w,P,N,!0),M!==!0)){var U=E.validPositions[S].input;return E.validPositions[S]=void 0,g.call(w,S,U,!0,!0)}}}function T(x,S,M,w){var E=this,C=this.maskset,P=this.opts,A=this.dependencyLib;function R(G,te,ue){var se=te[G];if(se!==void 0&&se.match.static===!0&&se.match.optionality!==!0&&(te[0]===void 0||te[0].alternation===void 0)){var X=ue.begin<=G-1?te[G-1]&&te[G-1].match.static===!0&&te[G-1]:te[G-1],ne=ue.end>G+1?te[G+1]&&te[G+1].match.static===!0&&te[G+1]:te[G+1];return X&&ne}return!1}var N=0,U=x.begin!==void 0?x.begin:x,k=x.end!==void 0?x.end:x,D=!0;if(x.begin>x.end&&(U=x.end,k=x.begin),w=w!==void 0?w:U,M===void 0&&(U!==k||P.insertMode&&C.validPositions[w]!==void 0||S===void 0||S.match.optionalQuantifier||S.match.optionality)){var W,O=A.extend(!0,[],C.validPositions),B=d.getLastValidPosition.call(E,void 0,!0);C.p=U;var V=v.call(E,x)?U:w;for(W=B;W>=V;W--)C.validPositions.splice(W,1),S===void 0&&delete C.tests[W+1];var j,Y,H=w,q=H;for(S&&(C.validPositions[w]=A.extend(!0,{},S),q++,H++),O[k]==null&&C.jitOffset[k]&&(k+=C.jitOffset[k]+1),W=S?k:k-1;W<=B;W++){if((j=O[W])!==void 0&&j.generatedInput!==!0&&(W>=k||W>=U&&R(W,O,{begin:U,end:k}))){for(;h.getTest.call(E,q).match.def!=="";){if((Y=_.call(E,q,j,P))!==!1||j.match.def==="+"){j.match.def==="+"&&d.getBuffer.call(E,!0);var K=g.call(E,q,j.input,j.match.def!=="+",!0);if(D=K!==!1,H=(K.pos||q)+1,!D&&Y)break}else D=!1;if(D){S===void 0&&j.match.static&&W===x.begin&&N++;break}if(!D&&d.getBuffer.call(E),q>C.maskLength)break;q++}h.getTest.call(E,q).match.def==""&&(D=!1),q=H}if(!D)break}if(!D)return C.validPositions=A.extend(!0,[],O),d.resetMaskSet.call(E,!0),!1}else S&&h.getTest.call(E,w).match.cd===S.match.cd&&(C.validPositions[w]=A.extend(!0,{},S));return d.resetMaskSet.call(E,!0),N}}},i={};function s(a){var o=i[a];if(o!==void 0)return o.exports;var l=i[a]={exports:{}};return n[a](l,l.exports,s),l.exports}var r={};return function(){var a=r;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s(7149),s(3194),s(9302),s(4013),s(3851),s(219),s(207),s(5296);var o,l=(o=s(2394))&&o.__esModule?o:{default:o};a.default=l.default}(),r}()})})(kE);var ek=kE.exports;const Ip=Nv(ek);Ip("+38 (099) 999-99-99").mask("#form-meeting-phone");Ip("+38 (099) 999-99-99").mask("#form-any-questions-phone-2");Ip("+38 (099) 999-99-99").mask("#form-interview--phone");document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('[id^="form-meeting"]').forEach(n=>{n.addEventListener("submit",function(i){i.preventDefault();const s={name:n.querySelector('[name="name"]').value,phone:n.querySelector('[name="phone"]').value,doctor:n.querySelector('[name="doctor"]').value,clinic:n.querySelector('[name="clinic"]').value};fetch("/feedback-store",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.success){dataLayer.push({event:"zapysatysya_na_pryiom_iLion",phone_number:s.phone,email:"","address.first_name":s.name});const a=document.getElementById("close-appointment-modal");a&&a.click(),n.reset();const o=$("#popup--appointment-thank"),l=new bootstrap.Modal(o);l.show(),setTimeout(()=>l.hide(),2e3)}else{const a=r.errors;for(const o in a){const l=n.querySelector(`#${o}_error`),c=l==null?void 0:l.nextElementSibling;c&&c.classList.contains("field--help-info")?c.textContent=a[o][0]:l&&l.insertAdjacentHTML("afterend",'<div class="field--help-info small-txt text-red mb-2">'+a[o][0]+"</div>")}}}).catch(r=>console.error("Error submitting form:",r))})});const e=document.querySelector('[id="form-any-questions"]');e&&e.addEventListener("submit",function(n){n.preventDefault();const i={name:e.querySelector('[name="name"]').value,phone:e.querySelector('[name="phone"]').value};fetch("/feedback-question-store",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.success){dataLayer.push({event:"zalyshylys_pytannia_iLion",phone_number:i.phone,email:"","address.first_name":i.name}),e.reset();const r=$("#popup--appointment-thank"),a=new bootstrap.Modal(r);a.show(),setTimeout(()=>a.hide(),2e3)}else{const r=s.errors;for(const a in r){const o=e.querySelector(`#${a}_error`),l=o==null?void 0:o.nextElementSibling;l&&l.classList.contains("field--help-info")?l.textContent=r[a][0]:o&&o.insertAdjacentHTML("afterend",'<div class="field--help-info small-txt text-red mb-2">'+r[a][0]+"</div>")}}}).catch(s=>console.error("Error submitting form:",s))})});
