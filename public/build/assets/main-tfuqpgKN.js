var J0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ey(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Nx(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var Lg={exports:{}},ty={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(i){(function(e,t){i.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:J0,function(e,t){var n=[],s=Object.getPrototypeOf,r=n.slice,o=n.flat?function(p){return n.flat.call(p)}:function(p){return n.concat.apply([],p)},a=n.push,l=n.indexOf,u={},c=u.toString,d=u.hasOwnProperty,h=d.toString,f=h.call(Object),m={},b=function(_){return typeof _=="function"&&typeof _.nodeType!="number"&&typeof _.item!="function"},v=function(_){return _!=null&&_===_.window},g=e.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function w(p,_,x){x=x||g;var T,L,R=x.createElement("script");if(R.text=p,_)for(T in E)L=_[T]||_.getAttribute&&_.getAttribute(T),L&&R.setAttribute(T,L);x.head.appendChild(R).parentNode.removeChild(R)}function S(p){return p==null?p+"":typeof p=="object"||typeof p=="function"?u[c.call(p)]||"object":typeof p}var I="3.7.1",D=/HTML$/i,y=function(p,_){return new y.fn.init(p,_)};y.fn=y.prototype={jquery:I,constructor:y,length:0,toArray:function(){return r.call(this)},get:function(p){return p==null?r.call(this):p<0?this[p+this.length]:this[p]},pushStack:function(p){var _=y.merge(this.constructor(),p);return _.prevObject=this,_},each:function(p){return y.each(this,p)},map:function(p){return this.pushStack(y.map(this,function(_,x){return p.call(_,x,_)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(p,_){return(_+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(p,_){return _%2}))},eq:function(p){var _=this.length,x=+p+(p<0?_:0);return this.pushStack(x>=0&&x<_?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},y.extend=y.fn.extend=function(){var p,_,x,T,L,R,N=arguments[0]||{},ne=1,ee=arguments.length,he=!1;for(typeof N=="boolean"&&(he=N,N=arguments[ne]||{},ne++),typeof N!="object"&&!b(N)&&(N={}),ne===ee&&(N=this,ne--);ne<ee;ne++)if((p=arguments[ne])!=null)for(_ in p)T=p[_],!(_==="__proto__"||N===T)&&(he&&T&&(y.isPlainObject(T)||(L=Array.isArray(T)))?(x=N[_],L&&!Array.isArray(x)?R=[]:!L&&!y.isPlainObject(x)?R={}:R=x,L=!1,N[_]=y.extend(he,R,T)):T!==void 0&&(N[_]=T));return N},y.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(p){throw new Error(p)},noop:function(){},isPlainObject:function(p){var _,x;return!p||c.call(p)!=="[object Object]"?!1:(_=s(p),_?(x=d.call(_,"constructor")&&_.constructor,typeof x=="function"&&h.call(x)===f):!0)},isEmptyObject:function(p){var _;for(_ in p)return!1;return!0},globalEval:function(p,_,x){w(p,{nonce:_&&_.nonce},x)},each:function(p,_){var x,T=0;if(B(p))for(x=p.length;T<x&&_.call(p[T],T,p[T])!==!1;T++);else for(T in p)if(_.call(p[T],T,p[T])===!1)break;return p},text:function(p){var _,x="",T=0,L=p.nodeType;if(!L)for(;_=p[T++];)x+=y.text(_);return L===1||L===11?p.textContent:L===9?p.documentElement.textContent:L===3||L===4?p.nodeValue:x},makeArray:function(p,_){var x=_||[];return p!=null&&(B(Object(p))?y.merge(x,typeof p=="string"?[p]:p):a.call(x,p)),x},inArray:function(p,_,x){return _==null?-1:l.call(_,p,x)},isXMLDoc:function(p){var _=p&&p.namespaceURI,x=p&&(p.ownerDocument||p).documentElement;return!D.test(_||x&&x.nodeName||"HTML")},merge:function(p,_){for(var x=+_.length,T=0,L=p.length;T<x;T++)p[L++]=_[T];return p.length=L,p},grep:function(p,_,x){for(var T,L=[],R=0,N=p.length,ne=!x;R<N;R++)T=!_(p[R],R),T!==ne&&L.push(p[R]);return L},map:function(p,_,x){var T,L,R=0,N=[];if(B(p))for(T=p.length;R<T;R++)L=_(p[R],R,x),L!=null&&N.push(L);else for(R in p)L=_(p[R],R,x),L!=null&&N.push(L);return o(N)},guid:1,support:m}),typeof Symbol=="function"&&(y.fn[Symbol.iterator]=n[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(p,_){u["[object "+_+"]"]=_.toLowerCase()});function B(p){var _=!!p&&"length"in p&&p.length,x=S(p);return b(p)||v(p)?!1:x==="array"||_===0||typeof _=="number"&&_>0&&_-1 in p}function V(p,_){return p.nodeName&&p.nodeName.toLowerCase()===_.toLowerCase()}var C=n.pop,A=n.sort,H=n.splice,P="[\\x20\\t\\r\\n\\f]",F=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");y.contains=function(p,_){var x=_&&_.parentNode;return p===x||!!(x&&x.nodeType===1&&(p.contains?p.contains(x):p.compareDocumentPosition&&p.compareDocumentPosition(x)&16))};var Y=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Q(p,_){return _?p==="\0"?"ï¿½":p.slice(0,-1)+"\\"+p.charCodeAt(p.length-1).toString(16)+" ":"\\"+p}y.escapeSelector=function(p){return(p+"").replace(Y,Q)};var G=g,z=a;(function(){var p,_,x,T,L,R=z,N,ne,ee,he,Ae,Ie=y.expando,we=0,Ue=0,Mt=ea(),Gt=ea(),Nt=ea(),Vi=ea(),Li=function(X,ae){return X===ae&&(L=!0),0},Xn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Yn="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Wt="\\["+P+"*("+Yn+")(?:"+P+"*([*^$|!~]?=)"+P+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Yn+"))|)"+P+"*\\]",ar=":("+Yn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Wt+")*)|.*)\\)|)",Zt=new RegExp(P+"+","g"),_i=new RegExp("^"+P+"*,"+P+"*"),Or=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),vo=new RegExp(P+"|>"),Kn=new RegExp(ar),ms=new RegExp("^"+Yn+"$"),Zn={ID:new RegExp("^#("+Yn+")"),CLASS:new RegExp("^\\.("+Yn+")"),TAG:new RegExp("^("+Yn+"|[*])"),ATTR:new RegExp("^"+Wt),PSEUDO:new RegExp("^"+ar),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+Xn+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},Rs=/^(?:input|select|textarea|button)$/i,Is=/^h\d$/i,xn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,El=/[+~]/,gs=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),Qn=function(X,ae){var ye="0x"+X.slice(1)-65536;return ae||(ye<0?String.fromCharCode(ye+65536):String.fromCharCode(ye>>10|55296,ye&1023|56320))},lr=function(){Ds()},vh=ta(function(X){return X.disabled===!0&&V(X,"fieldset")},{dir:"parentNode",next:"legend"});function Jo(){try{return N.activeElement}catch{}}try{R.apply(n=r.call(G.childNodes),G.childNodes),n[G.childNodes.length].nodeType}catch{R={apply:function(ae,ye){z.apply(ae,r.call(ye))},call:function(ae){z.apply(ae,r.call(arguments,1))}}}function zt(X,ae,ye,Te){var De,Ve,nt,ft,st,$t,Tt,Dt=ae&&ae.ownerDocument,Ft=ae?ae.nodeType:9;if(ye=ye||[],typeof X!="string"||!X||Ft!==1&&Ft!==9&&Ft!==11)return ye;if(!Te&&(Ds(ae),ae=ae||N,ee)){if(Ft!==11&&(st=xn.exec(X)))if(De=st[1]){if(Ft===9)if(nt=ae.getElementById(De)){if(nt.id===De)return R.call(ye,nt),ye}else return ye;else if(Dt&&(nt=Dt.getElementById(De))&&zt.contains(ae,nt)&&nt.id===De)return R.call(ye,nt),ye}else{if(st[2])return R.apply(ye,ae.getElementsByTagName(X)),ye;if((De=st[3])&&ae.getElementsByClassName)return R.apply(ye,ae.getElementsByClassName(De)),ye}if(!Vi[X+" "]&&(!he||!he.test(X))){if(Tt=X,Dt=ae,Ft===1&&(vo.test(X)||Or.test(X))){for(Dt=El.test(X)&&bo(ae.parentNode)||ae,(Dt!=ae||!m.scope)&&((ft=ae.getAttribute("id"))?ft=y.escapeSelector(ft):ae.setAttribute("id",ft=Ie)),$t=vs(X),Ve=$t.length;Ve--;)$t[Ve]=(ft?"#"+ft:":scope")+" "+Fr($t[Ve]);Tt=$t.join(",")}try{return R.apply(ye,Dt.querySelectorAll(Tt)),ye}catch{Vi(X,!0)}finally{ft===Ie&&ae.removeAttribute("id")}}}return Qc(X.replace(F,"$1"),ae,ye,Te)}function ea(){var X=[];function ae(ye,Te){return X.push(ye+" ")>_.cacheLength&&delete ae[X.shift()],ae[ye+" "]=Te}return ae}function Sn(X){return X[Ie]=!0,X}function Nr(X){var ae=N.createElement("fieldset");try{return!!X(ae)}catch{return!1}finally{ae.parentNode&&ae.parentNode.removeChild(ae),ae=null}}function yh(X){return function(ae){return V(ae,"input")&&ae.type===X}}function yo(X){return function(ae){return(V(ae,"input")||V(ae,"button"))&&ae.type===X}}function kr(X){return function(ae){return"form"in ae?ae.parentNode&&ae.disabled===!1?"label"in ae?"label"in ae.parentNode?ae.parentNode.disabled===X:ae.disabled===X:ae.isDisabled===X||ae.isDisabled!==!X&&vh(ae)===X:ae.disabled===X:"label"in ae?ae.disabled===X:!1}}function Dn(X){return Sn(function(ae){return ae=+ae,Sn(function(ye,Te){for(var De,Ve=X([],ye.length,ae),nt=Ve.length;nt--;)ye[De=Ve[nt]]&&(ye[De]=!(Te[De]=ye[De]))})})}function bo(X){return X&&typeof X.getElementsByTagName<"u"&&X}function Ds(X){var ae,ye=X?X.ownerDocument||X:G;return ye==N||ye.nodeType!==9||!ye.documentElement||(N=ye,ne=N.documentElement,ee=!y.isXMLDoc(N),Ae=ne.matches||ne.webkitMatchesSelector||ne.msMatchesSelector,ne.msMatchesSelector&&G!=N&&(ae=N.defaultView)&&ae.top!==ae&&ae.addEventListener("unload",lr),m.getById=Nr(function(Te){return ne.appendChild(Te).id=y.expando,!N.getElementsByName||!N.getElementsByName(y.expando).length}),m.disconnectedMatch=Nr(function(Te){return Ae.call(Te,"*")}),m.scope=Nr(function(){return N.querySelectorAll(":scope")}),m.cssHas=Nr(function(){try{return N.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(_.filter.ID=function(Te){var De=Te.replace(gs,Qn);return function(Ve){return Ve.getAttribute("id")===De}},_.find.ID=function(Te,De){if(typeof De.getElementById<"u"&&ee){var Ve=De.getElementById(Te);return Ve?[Ve]:[]}}):(_.filter.ID=function(Te){var De=Te.replace(gs,Qn);return function(Ve){var nt=typeof Ve.getAttributeNode<"u"&&Ve.getAttributeNode("id");return nt&&nt.value===De}},_.find.ID=function(Te,De){if(typeof De.getElementById<"u"&&ee){var Ve,nt,ft,st=De.getElementById(Te);if(st){if(Ve=st.getAttributeNode("id"),Ve&&Ve.value===Te)return[st];for(ft=De.getElementsByName(Te),nt=0;st=ft[nt++];)if(Ve=st.getAttributeNode("id"),Ve&&Ve.value===Te)return[st]}return[]}}),_.find.TAG=function(Te,De){return typeof De.getElementsByTagName<"u"?De.getElementsByTagName(Te):De.querySelectorAll(Te)},_.find.CLASS=function(Te,De){if(typeof De.getElementsByClassName<"u"&&ee)return De.getElementsByClassName(Te)},he=[],Nr(function(Te){var De;ne.appendChild(Te).innerHTML="<a id='"+Ie+"' href='' disabled='disabled'></a><select id='"+Ie+"-\r\\' disabled='disabled'><option selected=''></option></select>",Te.querySelectorAll("[selected]").length||he.push("\\["+P+"*(?:value|"+Xn+")"),Te.querySelectorAll("[id~="+Ie+"-]").length||he.push("~="),Te.querySelectorAll("a#"+Ie+"+*").length||he.push(".#.+[+~]"),Te.querySelectorAll(":checked").length||he.push(":checked"),De=N.createElement("input"),De.setAttribute("type","hidden"),Te.appendChild(De).setAttribute("name","D"),ne.appendChild(Te).disabled=!0,Te.querySelectorAll(":disabled").length!==2&&he.push(":enabled",":disabled"),De=N.createElement("input"),De.setAttribute("name",""),Te.appendChild(De),Te.querySelectorAll("[name='']").length||he.push("\\["+P+"*name"+P+"*="+P+`*(?:''|"")`)}),m.cssHas||he.push(":has"),he=he.length&&new RegExp(he.join("|")),Li=function(Te,De){if(Te===De)return L=!0,0;var Ve=!Te.compareDocumentPosition-!De.compareDocumentPosition;return Ve||(Ve=(Te.ownerDocument||Te)==(De.ownerDocument||De)?Te.compareDocumentPosition(De):1,Ve&1||!m.sortDetached&&De.compareDocumentPosition(Te)===Ve?Te===N||Te.ownerDocument==G&&zt.contains(G,Te)?-1:De===N||De.ownerDocument==G&&zt.contains(G,De)?1:T?l.call(T,Te)-l.call(T,De):0:Ve&4?-1:1)}),N}zt.matches=function(X,ae){return zt(X,null,null,ae)},zt.matchesSelector=function(X,ae){if(Ds(X),ee&&!Vi[ae+" "]&&(!he||!he.test(ae)))try{var ye=Ae.call(X,ae);if(ye||m.disconnectedMatch||X.document&&X.document.nodeType!==11)return ye}catch{Vi(ae,!0)}return zt(ae,N,null,[X]).length>0},zt.contains=function(X,ae){return(X.ownerDocument||X)!=N&&Ds(X),y.contains(X,ae)},zt.attr=function(X,ae){(X.ownerDocument||X)!=N&&Ds(X);var ye=_.attrHandle[ae.toLowerCase()],Te=ye&&d.call(_.attrHandle,ae.toLowerCase())?ye(X,ae,!ee):void 0;return Te!==void 0?Te:X.getAttribute(ae)},zt.error=function(X){throw new Error("Syntax error, unrecognized expression: "+X)},y.uniqueSort=function(X){var ae,ye=[],Te=0,De=0;if(L=!m.sortStable,T=!m.sortStable&&r.call(X,0),A.call(X,Li),L){for(;ae=X[De++];)ae===X[De]&&(Te=ye.push(De));for(;Te--;)H.call(X,ye[Te],1)}return T=null,X},y.fn.uniqueSort=function(){return this.pushStack(y.uniqueSort(r.apply(this)))},_=y.expr={cacheLength:50,createPseudo:Sn,match:Zn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(X){return X[1]=X[1].replace(gs,Qn),X[3]=(X[3]||X[4]||X[5]||"").replace(gs,Qn),X[2]==="~="&&(X[3]=" "+X[3]+" "),X.slice(0,4)},CHILD:function(X){return X[1]=X[1].toLowerCase(),X[1].slice(0,3)==="nth"?(X[3]||zt.error(X[0]),X[4]=+(X[4]?X[5]+(X[6]||1):2*(X[3]==="even"||X[3]==="odd")),X[5]=+(X[7]+X[8]||X[3]==="odd")):X[3]&&zt.error(X[0]),X},PSEUDO:function(X){var ae,ye=!X[6]&&X[2];return Zn.CHILD.test(X[0])?null:(X[3]?X[2]=X[4]||X[5]||"":ye&&Kn.test(ye)&&(ae=vs(ye,!0))&&(ae=ye.indexOf(")",ye.length-ae)-ye.length)&&(X[0]=X[0].slice(0,ae),X[2]=ye.slice(0,ae)),X.slice(0,3))}},filter:{TAG:function(X){var ae=X.replace(gs,Qn).toLowerCase();return X==="*"?function(){return!0}:function(ye){return V(ye,ae)}},CLASS:function(X){var ae=Mt[X+" "];return ae||(ae=new RegExp("(^|"+P+")"+X+"("+P+"|$)"))&&Mt(X,function(ye){return ae.test(typeof ye.className=="string"&&ye.className||typeof ye.getAttribute<"u"&&ye.getAttribute("class")||"")})},ATTR:function(X,ae,ye){return function(Te){var De=zt.attr(Te,X);return De==null?ae==="!=":ae?(De+="",ae==="="?De===ye:ae==="!="?De!==ye:ae==="^="?ye&&De.indexOf(ye)===0:ae==="*="?ye&&De.indexOf(ye)>-1:ae==="$="?ye&&De.slice(-ye.length)===ye:ae==="~="?(" "+De.replace(Zt," ")+" ").indexOf(ye)>-1:ae==="|="?De===ye||De.slice(0,ye.length+1)===ye+"-":!1):!0}},CHILD:function(X,ae,ye,Te,De){var Ve=X.slice(0,3)!=="nth",nt=X.slice(-4)!=="last",ft=ae==="of-type";return Te===1&&De===0?function(st){return!!st.parentNode}:function(st,$t,Tt){var Dt,Ft,vt,hi,$i,Di=Ve!==nt?"nextSibling":"previousSibling",Tn=st.parentNode,Jn=ft&&st.nodeName.toLowerCase(),Ur=!Tt&&!ft,Ti=!1;if(Tn){if(Ve){for(;Di;){for(vt=st;vt=vt[Di];)if(ft?V(vt,Jn):vt.nodeType===1)return!1;$i=Di=X==="only"&&!$i&&"nextSibling"}return!0}if($i=[nt?Tn.firstChild:Tn.lastChild],nt&&Ur){for(Ft=Tn[Ie]||(Tn[Ie]={}),Dt=Ft[X]||[],hi=Dt[0]===we&&Dt[1],Ti=hi&&Dt[2],vt=hi&&Tn.childNodes[hi];vt=++hi&&vt&&vt[Di]||(Ti=hi=0)||$i.pop();)if(vt.nodeType===1&&++Ti&&vt===st){Ft[X]=[we,hi,Ti];break}}else if(Ur&&(Ft=st[Ie]||(st[Ie]={}),Dt=Ft[X]||[],hi=Dt[0]===we&&Dt[1],Ti=hi),Ti===!1)for(;(vt=++hi&&vt&&vt[Di]||(Ti=hi=0)||$i.pop())&&!((ft?V(vt,Jn):vt.nodeType===1)&&++Ti&&(Ur&&(Ft=vt[Ie]||(vt[Ie]={}),Ft[X]=[we,Ti]),vt===st)););return Ti-=De,Ti===Te||Ti%Te===0&&Ti/Te>=0}}},PSEUDO:function(X,ae){var ye,Te=_.pseudos[X]||_.setFilters[X.toLowerCase()]||zt.error("unsupported pseudo: "+X);return Te[Ie]?Te(ae):Te.length>1?(ye=[X,X,"",ae],_.setFilters.hasOwnProperty(X.toLowerCase())?Sn(function(De,Ve){for(var nt,ft=Te(De,ae),st=ft.length;st--;)nt=l.call(De,ft[st]),De[nt]=!(Ve[nt]=ft[st])}):function(De){return Te(De,0,ye)}):Te}},pseudos:{not:Sn(function(X){var ae=[],ye=[],Te=Os(X.replace(F,"$1"));return Te[Ie]?Sn(function(De,Ve,nt,ft){for(var st,$t=Te(De,null,ft,[]),Tt=De.length;Tt--;)(st=$t[Tt])&&(De[Tt]=!(Ve[Tt]=st))}):function(De,Ve,nt){return ae[0]=De,Te(ae,null,nt,ye),ae[0]=null,!ye.pop()}}),has:Sn(function(X){return function(ae){return zt(X,ae).length>0}}),contains:Sn(function(X){return X=X.replace(gs,Qn),function(ae){return(ae.textContent||y.text(ae)).indexOf(X)>-1}}),lang:Sn(function(X){return ms.test(X||"")||zt.error("unsupported lang: "+X),X=X.replace(gs,Qn).toLowerCase(),function(ae){var ye;do if(ye=ee?ae.lang:ae.getAttribute("xml:lang")||ae.getAttribute("lang"))return ye=ye.toLowerCase(),ye===X||ye.indexOf(X+"-")===0;while((ae=ae.parentNode)&&ae.nodeType===1);return!1}}),target:function(X){var ae=e.location&&e.location.hash;return ae&&ae.slice(1)===X.id},root:function(X){return X===ne},focus:function(X){return X===Jo()&&N.hasFocus()&&!!(X.type||X.href||~X.tabIndex)},enabled:kr(!1),disabled:kr(!0),checked:function(X){return V(X,"input")&&!!X.checked||V(X,"option")&&!!X.selected},selected:function(X){return X.parentNode&&X.parentNode.selectedIndex,X.selected===!0},empty:function(X){for(X=X.firstChild;X;X=X.nextSibling)if(X.nodeType<6)return!1;return!0},parent:function(X){return!_.pseudos.empty(X)},header:function(X){return Is.test(X.nodeName)},input:function(X){return Rs.test(X.nodeName)},button:function(X){return V(X,"input")&&X.type==="button"||V(X,"button")},text:function(X){var ae;return V(X,"input")&&X.type==="text"&&((ae=X.getAttribute("type"))==null||ae.toLowerCase()==="text")},first:Dn(function(){return[0]}),last:Dn(function(X,ae){return[ae-1]}),eq:Dn(function(X,ae,ye){return[ye<0?ye+ae:ye]}),even:Dn(function(X,ae){for(var ye=0;ye<ae;ye+=2)X.push(ye);return X}),odd:Dn(function(X,ae){for(var ye=1;ye<ae;ye+=2)X.push(ye);return X}),lt:Dn(function(X,ae,ye){var Te;for(ye<0?Te=ye+ae:ye>ae?Te=ae:Te=ye;--Te>=0;)X.push(Te);return X}),gt:Dn(function(X,ae,ye){for(var Te=ye<0?ye+ae:ye;++Te<ae;)X.push(Te);return X})}},_.pseudos.nth=_.pseudos.eq;for(p in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[p]=yh(p);for(p in{submit:!0,reset:!0})_.pseudos[p]=yo(p);function Zc(){}Zc.prototype=_.filters=_.pseudos,_.setFilters=new Zc;function vs(X,ae){var ye,Te,De,Ve,nt,ft,st,$t=Gt[X+" "];if($t)return ae?0:$t.slice(0);for(nt=X,ft=[],st=_.preFilter;nt;){(!ye||(Te=_i.exec(nt)))&&(Te&&(nt=nt.slice(Te[0].length)||nt),ft.push(De=[])),ye=!1,(Te=Or.exec(nt))&&(ye=Te.shift(),De.push({value:ye,type:Te[0].replace(F," ")}),nt=nt.slice(ye.length));for(Ve in _.filter)(Te=Zn[Ve].exec(nt))&&(!st[Ve]||(Te=st[Ve](Te)))&&(ye=Te.shift(),De.push({value:ye,type:Ve,matches:Te}),nt=nt.slice(ye.length));if(!ye)break}return ae?nt.length:nt?zt.error(X):Gt(X,ft).slice(0)}function Fr(X){for(var ae=0,ye=X.length,Te="";ae<ye;ae++)Te+=X[ae].value;return Te}function ta(X,ae,ye){var Te=ae.dir,De=ae.next,Ve=De||Te,nt=ye&&Ve==="parentNode",ft=Ue++;return ae.first?function(st,$t,Tt){for(;st=st[Te];)if(st.nodeType===1||nt)return X(st,$t,Tt);return!1}:function(st,$t,Tt){var Dt,Ft,vt=[we,ft];if(Tt){for(;st=st[Te];)if((st.nodeType===1||nt)&&X(st,$t,Tt))return!0}else for(;st=st[Te];)if(st.nodeType===1||nt)if(Ft=st[Ie]||(st[Ie]={}),De&&V(st,De))st=st[Te]||st;else{if((Dt=Ft[Ve])&&Dt[0]===we&&Dt[1]===ft)return vt[2]=Dt[2];if(Ft[Ve]=vt,vt[2]=X(st,$t,Tt))return!0}return!1}}function wl(X){return X.length>1?function(ae,ye,Te){for(var De=X.length;De--;)if(!X[De](ae,ye,Te))return!1;return!0}:X[0]}function bh(X,ae,ye){for(var Te=0,De=ae.length;Te<De;Te++)zt(X,ae[Te],ye);return ye}function ia(X,ae,ye,Te,De){for(var Ve,nt=[],ft=0,st=X.length,$t=ae!=null;ft<st;ft++)(Ve=X[ft])&&(!ye||ye(Ve,Te,De))&&(nt.push(Ve),$t&&ae.push(ft));return nt}function xl(X,ae,ye,Te,De,Ve){return Te&&!Te[Ie]&&(Te=xl(Te)),De&&!De[Ie]&&(De=xl(De,Ve)),Sn(function(nt,ft,st,$t){var Tt,Dt,Ft,vt,hi=[],$i=[],Di=ft.length,Tn=nt||bh(ae||"*",st.nodeType?[st]:st,[]),Jn=X&&(nt||!ae)?ia(Tn,hi,X,st,$t):Tn;if(ye?(vt=De||(nt?X:Di||Te)?[]:ft,ye(Jn,vt,st,$t)):vt=Jn,Te)for(Tt=ia(vt,$i),Te(Tt,[],st,$t),Dt=Tt.length;Dt--;)(Ft=Tt[Dt])&&(vt[$i[Dt]]=!(Jn[$i[Dt]]=Ft));if(nt){if(De||X){if(De){for(Tt=[],Dt=vt.length;Dt--;)(Ft=vt[Dt])&&Tt.push(Jn[Dt]=Ft);De(null,vt=[],Tt,$t)}for(Dt=vt.length;Dt--;)(Ft=vt[Dt])&&(Tt=De?l.call(nt,Ft):hi[Dt])>-1&&(nt[Tt]=!(ft[Tt]=Ft))}}else vt=ia(vt===ft?vt.splice(Di,vt.length):vt),De?De(null,ft,vt,$t):R.apply(ft,vt)})}function Sl(X){for(var ae,ye,Te,De=X.length,Ve=_.relative[X[0].type],nt=Ve||_.relative[" "],ft=Ve?1:0,st=ta(function(Dt){return Dt===ae},nt,!0),$t=ta(function(Dt){return l.call(ae,Dt)>-1},nt,!0),Tt=[function(Dt,Ft,vt){var hi=!Ve&&(vt||Ft!=x)||((ae=Ft).nodeType?st(Dt,Ft,vt):$t(Dt,Ft,vt));return ae=null,hi}];ft<De;ft++)if(ye=_.relative[X[ft].type])Tt=[ta(wl(Tt),ye)];else{if(ye=_.filter[X[ft].type].apply(null,X[ft].matches),ye[Ie]){for(Te=++ft;Te<De&&!_.relative[X[Te].type];Te++);return xl(ft>1&&wl(Tt),ft>1&&Fr(X.slice(0,ft-1).concat({value:X[ft-2].type===" "?"*":""})).replace(F,"$1"),ye,ft<Te&&Sl(X.slice(ft,Te)),Te<De&&Sl(X=X.slice(Te)),Te<De&&Fr(X))}Tt.push(ye)}return wl(Tt)}function cr(X,ae){var ye=ae.length>0,Te=X.length>0,De=function(Ve,nt,ft,st,$t){var Tt,Dt,Ft,vt=0,hi="0",$i=Ve&&[],Di=[],Tn=x,Jn=Ve||Te&&_.find.TAG("*",$t),Ur=we+=Tn==null?1:Math.random()||.1,Ti=Jn.length;for($t&&(x=nt==N||nt||$t);hi!==Ti&&(Tt=Jn[hi])!=null;hi++){if(Te&&Tt){for(Dt=0,!nt&&Tt.ownerDocument!=N&&(Ds(Tt),ft=!ee);Ft=X[Dt++];)if(Ft(Tt,nt||N,ft)){R.call(st,Tt);break}$t&&(we=Ur)}ye&&((Tt=!Ft&&Tt)&&vt--,Ve&&$i.push(Tt))}if(vt+=hi,ye&&hi!==vt){for(Dt=0;Ft=ae[Dt++];)Ft($i,Di,nt,ft);if(Ve){if(vt>0)for(;hi--;)$i[hi]||Di[hi]||(Di[hi]=C.call(st));Di=ia(Di)}R.apply(st,Di),$t&&!Ve&&Di.length>0&&vt+ae.length>1&&y.uniqueSort(st)}return $t&&(we=Ur,x=Tn),$i};return ye?Sn(De):De}function Os(X,ae){var ye,Te=[],De=[],Ve=Nt[X+" "];if(!Ve){for(ae||(ae=vs(X)),ye=ae.length;ye--;)Ve=Sl(ae[ye]),Ve[Ie]?Te.push(Ve):De.push(Ve);Ve=Nt(X,cr(De,Te)),Ve.selector=X}return Ve}function Qc(X,ae,ye,Te){var De,Ve,nt,ft,st,$t=typeof X=="function"&&X,Tt=!Te&&vs(X=$t.selector||X);if(ye=ye||[],Tt.length===1){if(Ve=Tt[0]=Tt[0].slice(0),Ve.length>2&&(nt=Ve[0]).type==="ID"&&ae.nodeType===9&&ee&&_.relative[Ve[1].type]){if(ae=(_.find.ID(nt.matches[0].replace(gs,Qn),ae)||[])[0],ae)$t&&(ae=ae.parentNode);else return ye;X=X.slice(Ve.shift().value.length)}for(De=Zn.needsContext.test(X)?0:Ve.length;De--&&(nt=Ve[De],!_.relative[ft=nt.type]);)if((st=_.find[ft])&&(Te=st(nt.matches[0].replace(gs,Qn),El.test(Ve[0].type)&&bo(ae.parentNode)||ae))){if(Ve.splice(De,1),X=Te.length&&Fr(Ve),!X)return R.apply(ye,Te),ye;break}}return($t||Os(X,Tt))(Te,ae,!ee,ye,!ae||El.test(X)&&bo(ae.parentNode)||ae),ye}m.sortStable=Ie.split("").sort(Li).join("")===Ie,Ds(),m.sortDetached=Nr(function(X){return X.compareDocumentPosition(N.createElement("fieldset"))&1}),y.find=zt,y.expr[":"]=y.expr.pseudos,y.unique=y.uniqueSort,zt.compile=Os,zt.select=Qc,zt.setDocument=Ds,zt.tokenize=vs,zt.escape=y.escapeSelector,zt.getText=y.text,zt.isXML=y.isXMLDoc,zt.selectors=y.expr,zt.support=y.support,zt.uniqueSort=y.uniqueSort})();var ue=function(p,_,x){for(var T=[],L=x!==void 0;(p=p[_])&&p.nodeType!==9;)if(p.nodeType===1){if(L&&y(p).is(x))break;T.push(p)}return T},Ee=function(p,_){for(var x=[];p;p=p.nextSibling)p.nodeType===1&&p!==_&&x.push(p);return x},J=y.expr.match.needsContext,W=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function oe(p,_,x){return b(_)?y.grep(p,function(T,L){return!!_.call(T,L,T)!==x}):_.nodeType?y.grep(p,function(T){return T===_!==x}):typeof _!="string"?y.grep(p,function(T){return l.call(_,T)>-1!==x}):y.filter(_,p,x)}y.filter=function(p,_,x){var T=_[0];return x&&(p=":not("+p+")"),_.length===1&&T.nodeType===1?y.find.matchesSelector(T,p)?[T]:[]:y.find.matches(p,y.grep(_,function(L){return L.nodeType===1}))},y.fn.extend({find:function(p){var _,x,T=this.length,L=this;if(typeof p!="string")return this.pushStack(y(p).filter(function(){for(_=0;_<T;_++)if(y.contains(L[_],this))return!0}));for(x=this.pushStack([]),_=0;_<T;_++)y.find(p,L[_],x);return T>1?y.uniqueSort(x):x},filter:function(p){return this.pushStack(oe(this,p||[],!1))},not:function(p){return this.pushStack(oe(this,p||[],!0))},is:function(p){return!!oe(this,typeof p=="string"&&J.test(p)?y(p):p||[],!1).length}});var ie,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,me=y.fn.init=function(p,_,x){var T,L;if(!p)return this;if(x=x||ie,typeof p=="string")if(p[0]==="<"&&p[p.length-1]===">"&&p.length>=3?T=[null,p,null]:T=j.exec(p),T&&(T[1]||!_))if(T[1]){if(_=_ instanceof y?_[0]:_,y.merge(this,y.parseHTML(T[1],_&&_.nodeType?_.ownerDocument||_:g,!0)),W.test(T[1])&&y.isPlainObject(_))for(T in _)b(this[T])?this[T](_[T]):this.attr(T,_[T]);return this}else return L=g.getElementById(T[2]),L&&(this[0]=L,this.length=1),this;else return!_||_.jquery?(_||x).find(p):this.constructor(_).find(p);else{if(p.nodeType)return this[0]=p,this.length=1,this;if(b(p))return x.ready!==void 0?x.ready(p):p(y)}return y.makeArray(p,this)};me.prototype=y.fn,ie=y(g);var ge=/^(?:parents|prev(?:Until|All))/,Ne={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({has:function(p){var _=y(p,this),x=_.length;return this.filter(function(){for(var T=0;T<x;T++)if(y.contains(this,_[T]))return!0})},closest:function(p,_){var x,T=0,L=this.length,R=[],N=typeof p!="string"&&y(p);if(!J.test(p)){for(;T<L;T++)for(x=this[T];x&&x!==_;x=x.parentNode)if(x.nodeType<11&&(N?N.index(x)>-1:x.nodeType===1&&y.find.matchesSelector(x,p))){R.push(x);break}}return this.pushStack(R.length>1?y.uniqueSort(R):R)},index:function(p){return p?typeof p=="string"?l.call(y(p),this[0]):l.call(this,p.jquery?p[0]:p):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(p,_){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(p,_))))},addBack:function(p){return this.add(p==null?this.prevObject:this.prevObject.filter(p))}});function Fe(p,_){for(;(p=p[_])&&p.nodeType!==1;);return p}y.each({parent:function(p){var _=p.parentNode;return _&&_.nodeType!==11?_:null},parents:function(p){return ue(p,"parentNode")},parentsUntil:function(p,_,x){return ue(p,"parentNode",x)},next:function(p){return Fe(p,"nextSibling")},prev:function(p){return Fe(p,"previousSibling")},nextAll:function(p){return ue(p,"nextSibling")},prevAll:function(p){return ue(p,"previousSibling")},nextUntil:function(p,_,x){return ue(p,"nextSibling",x)},prevUntil:function(p,_,x){return ue(p,"previousSibling",x)},siblings:function(p){return Ee((p.parentNode||{}).firstChild,p)},children:function(p){return Ee(p.firstChild)},contents:function(p){return p.contentDocument!=null&&s(p.contentDocument)?p.contentDocument:(V(p,"template")&&(p=p.content||p),y.merge([],p.childNodes))}},function(p,_){y.fn[p]=function(x,T){var L=y.map(this,_,x);return p.slice(-5)!=="Until"&&(T=x),T&&typeof T=="string"&&(L=y.filter(T,L)),this.length>1&&(Ne[p]||y.uniqueSort(L),ge.test(p)&&L.reverse()),this.pushStack(L)}});var He=/[^\x20\t\r\n\f]+/g;function ct(p){var _={};return y.each(p.match(He)||[],function(x,T){_[T]=!0}),_}y.Callbacks=function(p){p=typeof p=="string"?ct(p):y.extend({},p);var _,x,T,L,R=[],N=[],ne=-1,ee=function(){for(L=L||p.once,T=_=!0;N.length;ne=-1)for(x=N.shift();++ne<R.length;)R[ne].apply(x[0],x[1])===!1&&p.stopOnFalse&&(ne=R.length,x=!1);p.memory||(x=!1),_=!1,L&&(x?R=[]:R="")},he={add:function(){return R&&(x&&!_&&(ne=R.length-1,N.push(x)),function Ae(Ie){y.each(Ie,function(we,Ue){b(Ue)?(!p.unique||!he.has(Ue))&&R.push(Ue):Ue&&Ue.length&&S(Ue)!=="string"&&Ae(Ue)})}(arguments),x&&!_&&ee()),this},remove:function(){return y.each(arguments,function(Ae,Ie){for(var we;(we=y.inArray(Ie,R,we))>-1;)R.splice(we,1),we<=ne&&ne--}),this},has:function(Ae){return Ae?y.inArray(Ae,R)>-1:R.length>0},empty:function(){return R&&(R=[]),this},disable:function(){return L=N=[],R=x="",this},disabled:function(){return!R},lock:function(){return L=N=[],!x&&!_&&(R=x=""),this},locked:function(){return!!L},fireWith:function(Ae,Ie){return L||(Ie=Ie||[],Ie=[Ae,Ie.slice?Ie.slice():Ie],N.push(Ie),_||ee()),this},fire:function(){return he.fireWith(this,arguments),this},fired:function(){return!!T}};return he};function at(p){return p}function se(p){throw p}function ut(p,_,x,T){var L;try{p&&b(L=p.promise)?L.call(p).done(_).fail(x):p&&b(L=p.then)?L.call(p,_,x):_.apply(void 0,[p].slice(T))}catch(R){x.apply(void 0,[R])}}y.extend({Deferred:function(p){var _=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],x="pending",T={state:function(){return x},always:function(){return L.done(arguments).fail(arguments),this},catch:function(R){return T.then(null,R)},pipe:function(){var R=arguments;return y.Deferred(function(N){y.each(_,function(ne,ee){var he=b(R[ee[4]])&&R[ee[4]];L[ee[1]](function(){var Ae=he&&he.apply(this,arguments);Ae&&b(Ae.promise)?Ae.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[ee[0]+"With"](this,he?[Ae]:arguments)})}),R=null}).promise()},then:function(R,N,ne){var ee=0;function he(Ae,Ie,we,Ue){return function(){var Mt=this,Gt=arguments,Nt=function(){var Li,Xn;if(!(Ae<ee)){if(Li=we.apply(Mt,Gt),Li===Ie.promise())throw new TypeError("Thenable self-resolution");Xn=Li&&(typeof Li=="object"||typeof Li=="function")&&Li.then,b(Xn)?Ue?Xn.call(Li,he(ee,Ie,at,Ue),he(ee,Ie,se,Ue)):(ee++,Xn.call(Li,he(ee,Ie,at,Ue),he(ee,Ie,se,Ue),he(ee,Ie,at,Ie.notifyWith))):(we!==at&&(Mt=void 0,Gt=[Li]),(Ue||Ie.resolveWith)(Mt,Gt))}},Vi=Ue?Nt:function(){try{Nt()}catch(Li){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(Li,Vi.error),Ae+1>=ee&&(we!==se&&(Mt=void 0,Gt=[Li]),Ie.rejectWith(Mt,Gt))}};Ae?Vi():(y.Deferred.getErrorHook?Vi.error=y.Deferred.getErrorHook():y.Deferred.getStackHook&&(Vi.error=y.Deferred.getStackHook()),e.setTimeout(Vi))}}return y.Deferred(function(Ae){_[0][3].add(he(0,Ae,b(ne)?ne:at,Ae.notifyWith)),_[1][3].add(he(0,Ae,b(R)?R:at)),_[2][3].add(he(0,Ae,b(N)?N:se))}).promise()},promise:function(R){return R!=null?y.extend(R,T):T}},L={};return y.each(_,function(R,N){var ne=N[2],ee=N[5];T[N[1]]=ne.add,ee&&ne.add(function(){x=ee},_[3-R][2].disable,_[3-R][3].disable,_[0][2].lock,_[0][3].lock),ne.add(N[3].fire),L[N[0]]=function(){return L[N[0]+"With"](this===L?void 0:this,arguments),this},L[N[0]+"With"]=ne.fireWith}),T.promise(L),p&&p.call(L,L),L},when:function(p){var _=arguments.length,x=_,T=Array(x),L=r.call(arguments),R=y.Deferred(),N=function(ne){return function(ee){T[ne]=this,L[ne]=arguments.length>1?r.call(arguments):ee,--_||R.resolveWith(T,L)}};if(_<=1&&(ut(p,R.done(N(x)).resolve,R.reject,!_),R.state()==="pending"||b(L[x]&&L[x].then)))return R.then();for(;x--;)ut(L[x],N(x),R.reject);return R.promise()}});var pt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(p,_){e.console&&e.console.warn&&p&&pt.test(p.name)&&e.console.warn("jQuery.Deferred exception: "+p.message,p.stack,_)},y.readyException=function(p){e.setTimeout(function(){throw p})};var yt=y.Deferred();y.fn.ready=function(p){return yt.then(p).catch(function(_){y.readyException(_)}),this},y.extend({isReady:!1,readyWait:1,ready:function(p){(p===!0?--y.readyWait:y.isReady)||(y.isReady=!0,!(p!==!0&&--y.readyWait>0)&&yt.resolveWith(g,[y]))}}),y.ready.then=yt.then;function qe(){g.removeEventListener("DOMContentLoaded",qe),e.removeEventListener("load",qe),y.ready()}g.readyState==="complete"||g.readyState!=="loading"&&!g.documentElement.doScroll?e.setTimeout(y.ready):(g.addEventListener("DOMContentLoaded",qe),e.addEventListener("load",qe));var dt=function(p,_,x,T,L,R,N){var ne=0,ee=p.length,he=x==null;if(S(x)==="object"){L=!0;for(ne in x)dt(p,_,ne,x[ne],!0,R,N)}else if(T!==void 0&&(L=!0,b(T)||(N=!0),he&&(N?(_.call(p,T),_=null):(he=_,_=function(Ae,Ie,we){return he.call(y(Ae),we)})),_))for(;ne<ee;ne++)_(p[ne],x,N?T:T.call(p[ne],ne,_(p[ne],x)));return L?p:he?_.call(p):ee?_(p[0],x):R},We=/^-ms-/,q=/-([a-z])/g;function O(p,_){return _.toUpperCase()}function le(p){return p.replace(We,"ms-").replace(q,O)}var Ce=function(p){return p.nodeType===1||p.nodeType===9||!+p.nodeType};function Re(){this.expando=y.expando+Re.uid++}Re.uid=1,Re.prototype={cache:function(p){var _=p[this.expando];return _||(_={},Ce(p)&&(p.nodeType?p[this.expando]=_:Object.defineProperty(p,this.expando,{value:_,configurable:!0}))),_},set:function(p,_,x){var T,L=this.cache(p);if(typeof _=="string")L[le(_)]=x;else for(T in _)L[le(T)]=_[T];return L},get:function(p,_){return _===void 0?this.cache(p):p[this.expando]&&p[this.expando][le(_)]},access:function(p,_,x){return _===void 0||_&&typeof _=="string"&&x===void 0?this.get(p,_):(this.set(p,_,x),x!==void 0?x:_)},remove:function(p,_){var x,T=p[this.expando];if(T!==void 0){if(_!==void 0)for(Array.isArray(_)?_=_.map(le):(_=le(_),_=_ in T?[_]:_.match(He)||[]),x=_.length;x--;)delete T[_[x]];(_===void 0||y.isEmptyObject(T))&&(p.nodeType?p[this.expando]=void 0:delete p[this.expando])}},hasData:function(p){var _=p[this.expando];return _!==void 0&&!y.isEmptyObject(_)}};var pe=new Re,Xe=new Re,$e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,it=/[A-Z]/g;function Ot(p){return p==="true"?!0:p==="false"?!1:p==="null"?null:p===+p+""?+p:$e.test(p)?JSON.parse(p):p}function ke(p,_,x){var T;if(x===void 0&&p.nodeType===1)if(T="data-"+_.replace(it,"-$&").toLowerCase(),x=p.getAttribute(T),typeof x=="string"){try{x=Ot(x)}catch{}Xe.set(p,_,x)}else x=void 0;return x}y.extend({hasData:function(p){return Xe.hasData(p)||pe.hasData(p)},data:function(p,_,x){return Xe.access(p,_,x)},removeData:function(p,_){Xe.remove(p,_)},_data:function(p,_,x){return pe.access(p,_,x)},_removeData:function(p,_){pe.remove(p,_)}}),y.fn.extend({data:function(p,_){var x,T,L,R=this[0],N=R&&R.attributes;if(p===void 0){if(this.length&&(L=Xe.get(R),R.nodeType===1&&!pe.get(R,"hasDataAttrs"))){for(x=N.length;x--;)N[x]&&(T=N[x].name,T.indexOf("data-")===0&&(T=le(T.slice(5)),ke(R,T,L[T])));pe.set(R,"hasDataAttrs",!0)}return L}return typeof p=="object"?this.each(function(){Xe.set(this,p)}):dt(this,function(ne){var ee;if(R&&ne===void 0)return ee=Xe.get(R,p),ee!==void 0||(ee=ke(R,p),ee!==void 0)?ee:void 0;this.each(function(){Xe.set(this,p,ne)})},null,_,arguments.length>1,null,!0)},removeData:function(p){return this.each(function(){Xe.remove(this,p)})}}),y.extend({queue:function(p,_,x){var T;if(p)return _=(_||"fx")+"queue",T=pe.get(p,_),x&&(!T||Array.isArray(x)?T=pe.access(p,_,y.makeArray(x)):T.push(x)),T||[]},dequeue:function(p,_){_=_||"fx";var x=y.queue(p,_),T=x.length,L=x.shift(),R=y._queueHooks(p,_),N=function(){y.dequeue(p,_)};L==="inprogress"&&(L=x.shift(),T--),L&&(_==="fx"&&x.unshift("inprogress"),delete R.stop,L.call(p,N,R)),!T&&R&&R.empty.fire()},_queueHooks:function(p,_){var x=_+"queueHooks";return pe.get(p,x)||pe.access(p,x,{empty:y.Callbacks("once memory").add(function(){pe.remove(p,[_+"queue",x])})})}}),y.fn.extend({queue:function(p,_){var x=2;return typeof p!="string"&&(_=p,p="fx",x--),arguments.length<x?y.queue(this[0],p):_===void 0?this:this.each(function(){var T=y.queue(this,p,_);y._queueHooks(this,p),p==="fx"&&T[0]!=="inprogress"&&y.dequeue(this,p)})},dequeue:function(p){return this.each(function(){y.dequeue(this,p)})},clearQueue:function(p){return this.queue(p||"fx",[])},promise:function(p,_){var x,T=1,L=y.Deferred(),R=this,N=this.length,ne=function(){--T||L.resolveWith(R,[R])};for(typeof p!="string"&&(_=p,p=void 0),p=p||"fx";N--;)x=pe.get(R[N],p+"queueHooks"),x&&x.empty&&(T++,x.empty.add(ne));return ne(),L.promise(_)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),mt=["Top","Right","Bottom","Left"],Ye=g.documentElement,wt=function(p){return y.contains(p.ownerDocument,p)},St={composed:!0};Ye.getRootNode&&(wt=function(p){return y.contains(p.ownerDocument,p)||p.getRootNode(St)===p.ownerDocument});var kt=function(p,_){return p=_||p,p.style.display==="none"||p.style.display===""&&wt(p)&&y.css(p,"display")==="none"};function ce(p,_,x,T){var L,R,N=20,ne=T?function(){return T.cur()}:function(){return y.css(p,_,"")},ee=ne(),he=x&&x[3]||(y.cssNumber[_]?"":"px"),Ae=p.nodeType&&(y.cssNumber[_]||he!=="px"&&+ee)&&_t.exec(y.css(p,_));if(Ae&&Ae[3]!==he){for(ee=ee/2,he=he||Ae[3],Ae=+ee||1;N--;)y.style(p,_,Ae+he),(1-R)*(1-(R=ne()/ee||.5))<=0&&(N=0),Ae=Ae/R;Ae=Ae*2,y.style(p,_,Ae+he),x=x||[]}return x&&(Ae=+Ae||+ee||0,L=x[1]?Ae+(x[1]+1)*x[2]:+x[2],T&&(T.unit=he,T.start=Ae,T.end=L)),L}var Ge={};function Pe(p){var _,x=p.ownerDocument,T=p.nodeName,L=Ge[T];return L||(_=x.body.appendChild(x.createElement(T)),L=y.css(_,"display"),_.parentNode.removeChild(_),L==="none"&&(L="block"),Ge[T]=L,L)}function Oe(p,_){for(var x,T,L=[],R=0,N=p.length;R<N;R++)T=p[R],T.style&&(x=T.style.display,_?(x==="none"&&(L[R]=pe.get(T,"display")||null,L[R]||(T.style.display="")),T.style.display===""&&kt(T)&&(L[R]=Pe(T))):x!=="none"&&(L[R]="none",pe.set(T,"display",x)));for(R=0;R<N;R++)L[R]!=null&&(p[R].style.display=L[R]);return p}y.fn.extend({show:function(){return Oe(this,!0)},hide:function(){return Oe(this)},toggle:function(p){return typeof p=="boolean"?p?this.show():this.hide():this.each(function(){kt(this)?y(this).show():y(this).hide()})}});var je=/^(?:checkbox|radio)$/i,et=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ut=/^$|^module$|\/(?:java|ecma)script/i;(function(){var p=g.createDocumentFragment(),_=p.appendChild(g.createElement("div")),x=g.createElement("input");x.setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),_.appendChild(x),m.checkClone=_.cloneNode(!0).cloneNode(!0).lastChild.checked,_.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!_.cloneNode(!0).lastChild.defaultValue,_.innerHTML="<option></option>",m.option=!!_.lastChild})();var jt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td,m.option||(jt.optgroup=jt.option=[1,"<select multiple='multiple'>","</select>"]);function Qt(p,_){var x;return typeof p.getElementsByTagName<"u"?x=p.getElementsByTagName(_||"*"):typeof p.querySelectorAll<"u"?x=p.querySelectorAll(_||"*"):x=[],_===void 0||_&&V(p,_)?y.merge([p],x):x}function Bt(p,_){for(var x=0,T=p.length;x<T;x++)pe.set(p[x],"globalEval",!_||pe.get(_[x],"globalEval"))}var Si=/<|&#?\w+;/;function Hi(p,_,x,T,L){for(var R,N,ne,ee,he,Ae,Ie=_.createDocumentFragment(),we=[],Ue=0,Mt=p.length;Ue<Mt;Ue++)if(R=p[Ue],R||R===0)if(S(R)==="object")y.merge(we,R.nodeType?[R]:R);else if(!Si.test(R))we.push(_.createTextNode(R));else{for(N=N||Ie.appendChild(_.createElement("div")),ne=(et.exec(R)||["",""])[1].toLowerCase(),ee=jt[ne]||jt._default,N.innerHTML=ee[1]+y.htmlPrefilter(R)+ee[2],Ae=ee[0];Ae--;)N=N.lastChild;y.merge(we,N.childNodes),N=Ie.firstChild,N.textContent=""}for(Ie.textContent="",Ue=0;R=we[Ue++];){if(T&&y.inArray(R,T)>-1){L&&L.push(R);continue}if(he=wt(R),N=Qt(Ie.appendChild(R),"script"),he&&Bt(N),x)for(Ae=0;R=N[Ae++];)Ut.test(R.type||"")&&x.push(R)}return Ie}var Wn=/^([^.]*)(?:\.(.+)|)/;function cn(){return!0}function qi(){return!1}function jn(p,_,x,T,L,R){var N,ne;if(typeof _=="object"){typeof x!="string"&&(T=T||x,x=void 0);for(ne in _)jn(p,ne,x,T,_[ne],R);return p}if(T==null&&L==null?(L=x,T=x=void 0):L==null&&(typeof x=="string"?(L=T,T=void 0):(L=T,T=x,x=void 0)),L===!1)L=qi;else if(!L)return p;return R===1&&(N=L,L=function(ee){return y().off(ee),N.apply(this,arguments)},L.guid=N.guid||(N.guid=y.guid++)),p.each(function(){y.event.add(this,_,L,T,x)})}y.event={global:{},add:function(p,_,x,T,L){var R,N,ne,ee,he,Ae,Ie,we,Ue,Mt,Gt,Nt=pe.get(p);if(Ce(p))for(x.handler&&(R=x,x=R.handler,L=R.selector),L&&y.find.matchesSelector(Ye,L),x.guid||(x.guid=y.guid++),(ee=Nt.events)||(ee=Nt.events=Object.create(null)),(N=Nt.handle)||(N=Nt.handle=function(Vi){return typeof y<"u"&&y.event.triggered!==Vi.type?y.event.dispatch.apply(p,arguments):void 0}),_=(_||"").match(He)||[""],he=_.length;he--;)ne=Wn.exec(_[he])||[],Ue=Gt=ne[1],Mt=(ne[2]||"").split(".").sort(),Ue&&(Ie=y.event.special[Ue]||{},Ue=(L?Ie.delegateType:Ie.bindType)||Ue,Ie=y.event.special[Ue]||{},Ae=y.extend({type:Ue,origType:Gt,data:T,handler:x,guid:x.guid,selector:L,needsContext:L&&y.expr.match.needsContext.test(L),namespace:Mt.join(".")},R),(we=ee[Ue])||(we=ee[Ue]=[],we.delegateCount=0,(!Ie.setup||Ie.setup.call(p,T,Mt,N)===!1)&&p.addEventListener&&p.addEventListener(Ue,N)),Ie.add&&(Ie.add.call(p,Ae),Ae.handler.guid||(Ae.handler.guid=x.guid)),L?we.splice(we.delegateCount++,0,Ae):we.push(Ae),y.event.global[Ue]=!0)},remove:function(p,_,x,T,L){var R,N,ne,ee,he,Ae,Ie,we,Ue,Mt,Gt,Nt=pe.hasData(p)&&pe.get(p);if(!(!Nt||!(ee=Nt.events))){for(_=(_||"").match(He)||[""],he=_.length;he--;){if(ne=Wn.exec(_[he])||[],Ue=Gt=ne[1],Mt=(ne[2]||"").split(".").sort(),!Ue){for(Ue in ee)y.event.remove(p,Ue+_[he],x,T,!0);continue}for(Ie=y.event.special[Ue]||{},Ue=(T?Ie.delegateType:Ie.bindType)||Ue,we=ee[Ue]||[],ne=ne[2]&&new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=R=we.length;R--;)Ae=we[R],(L||Gt===Ae.origType)&&(!x||x.guid===Ae.guid)&&(!ne||ne.test(Ae.namespace))&&(!T||T===Ae.selector||T==="**"&&Ae.selector)&&(we.splice(R,1),Ae.selector&&we.delegateCount--,Ie.remove&&Ie.remove.call(p,Ae));N&&!we.length&&((!Ie.teardown||Ie.teardown.call(p,Mt,Nt.handle)===!1)&&y.removeEvent(p,Ue,Nt.handle),delete ee[Ue])}y.isEmptyObject(ee)&&pe.remove(p,"handle events")}},dispatch:function(p){var _,x,T,L,R,N,ne=new Array(arguments.length),ee=y.event.fix(p),he=(pe.get(this,"events")||Object.create(null))[ee.type]||[],Ae=y.event.special[ee.type]||{};for(ne[0]=ee,_=1;_<arguments.length;_++)ne[_]=arguments[_];if(ee.delegateTarget=this,!(Ae.preDispatch&&Ae.preDispatch.call(this,ee)===!1)){for(N=y.event.handlers.call(this,ee,he),_=0;(L=N[_++])&&!ee.isPropagationStopped();)for(ee.currentTarget=L.elem,x=0;(R=L.handlers[x++])&&!ee.isImmediatePropagationStopped();)(!ee.rnamespace||R.namespace===!1||ee.rnamespace.test(R.namespace))&&(ee.handleObj=R,ee.data=R.data,T=((y.event.special[R.origType]||{}).handle||R.handler).apply(L.elem,ne),T!==void 0&&(ee.result=T)===!1&&(ee.preventDefault(),ee.stopPropagation()));return Ae.postDispatch&&Ae.postDispatch.call(this,ee),ee.result}},handlers:function(p,_){var x,T,L,R,N,ne=[],ee=_.delegateCount,he=p.target;if(ee&&he.nodeType&&!(p.type==="click"&&p.button>=1)){for(;he!==this;he=he.parentNode||this)if(he.nodeType===1&&!(p.type==="click"&&he.disabled===!0)){for(R=[],N={},x=0;x<ee;x++)T=_[x],L=T.selector+" ",N[L]===void 0&&(N[L]=T.needsContext?y(L,this).index(he)>-1:y.find(L,this,null,[he]).length),N[L]&&R.push(T);R.length&&ne.push({elem:he,handlers:R})}}return he=this,ee<_.length&&ne.push({elem:he,handlers:_.slice(ee)}),ne},addProp:function(p,_){Object.defineProperty(y.Event.prototype,p,{enumerable:!0,configurable:!0,get:b(_)?function(){if(this.originalEvent)return _(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[p]},set:function(x){Object.defineProperty(this,p,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(p){return p[y.expando]?p:new y.Event(p)},special:{load:{noBubble:!0},click:{setup:function(p){var _=this||p;return je.test(_.type)&&_.click&&V(_,"input")&&er(_,"click",!0),!1},trigger:function(p){var _=this||p;return je.test(_.type)&&_.click&&V(_,"input")&&er(_,"click"),!0},_default:function(p){var _=p.target;return je.test(_.type)&&_.click&&V(_,"input")&&pe.get(_,"click")||V(_,"a")}},beforeunload:{postDispatch:function(p){p.result!==void 0&&p.originalEvent&&(p.originalEvent.returnValue=p.result)}}}};function er(p,_,x){if(!x){pe.get(p,_)===void 0&&y.event.add(p,_,cn);return}pe.set(p,_,!1),y.event.add(p,_,{namespace:!1,handler:function(T){var L,R=pe.get(this,_);if(T.isTrigger&1&&this[_]){if(R)(y.event.special[_]||{}).delegateType&&T.stopPropagation();else if(R=r.call(arguments),pe.set(this,_,R),this[_](),L=pe.get(this,_),pe.set(this,_,!1),R!==L)return T.stopImmediatePropagation(),T.preventDefault(),L}else R&&(pe.set(this,_,y.event.trigger(R[0],R.slice(1),this)),T.stopPropagation(),T.isImmediatePropagationStopped=cn)}})}y.removeEvent=function(p,_,x){p.removeEventListener&&p.removeEventListener(_,x)},y.Event=function(p,_){if(!(this instanceof y.Event))return new y.Event(p,_);p&&p.type?(this.originalEvent=p,this.type=p.type,this.isDefaultPrevented=p.defaultPrevented||p.defaultPrevented===void 0&&p.returnValue===!1?cn:qi,this.target=p.target&&p.target.nodeType===3?p.target.parentNode:p.target,this.currentTarget=p.currentTarget,this.relatedTarget=p.relatedTarget):this.type=p,_&&y.extend(this,_),this.timeStamp=p&&p.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:qi,isPropagationStopped:qi,isImmediatePropagationStopped:qi,isSimulated:!1,preventDefault:function(){var p=this.originalEvent;this.isDefaultPrevented=cn,p&&!this.isSimulated&&p.preventDefault()},stopPropagation:function(){var p=this.originalEvent;this.isPropagationStopped=cn,p&&!this.isSimulated&&p.stopPropagation()},stopImmediatePropagation:function(){var p=this.originalEvent;this.isImmediatePropagationStopped=cn,p&&!this.isSimulated&&p.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(p,_){function x(T){if(g.documentMode){var L=pe.get(this,"handle"),R=y.event.fix(T);R.type=T.type==="focusin"?"focus":"blur",R.isSimulated=!0,L(T),R.target===R.currentTarget&&L(R)}else y.event.simulate(_,T.target,y.event.fix(T))}y.event.special[p]={setup:function(){var T;if(er(this,p,!0),g.documentMode)T=pe.get(this,_),T||this.addEventListener(_,x),pe.set(this,_,(T||0)+1);else return!1},trigger:function(){return er(this,p),!0},teardown:function(){var T;if(g.documentMode)T=pe.get(this,_)-1,T?pe.set(this,_,T):(this.removeEventListener(_,x),pe.remove(this,_));else return!1},_default:function(T){return pe.get(T.target,p)},delegateType:_},y.event.special[_]={setup:function(){var T=this.ownerDocument||this.document||this,L=g.documentMode?this:T,R=pe.get(L,_);R||(g.documentMode?this.addEventListener(_,x):T.addEventListener(p,x,!0)),pe.set(L,_,(R||0)+1)},teardown:function(){var T=this.ownerDocument||this.document||this,L=g.documentMode?this:T,R=pe.get(L,_)-1;R?pe.set(L,_,R):(g.documentMode?this.removeEventListener(_,x):T.removeEventListener(p,x,!0),pe.remove(L,_))}}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(p,_){y.event.special[p]={delegateType:_,bindType:_,handle:function(x){var T,L=this,R=x.relatedTarget,N=x.handleObj;return(!R||R!==L&&!y.contains(L,R))&&(x.type=N.origType,T=N.handler.apply(this,arguments),x.type=_),T}}}),y.fn.extend({on:function(p,_,x,T){return jn(this,p,_,x,T)},one:function(p,_,x,T){return jn(this,p,_,x,T,1)},off:function(p,_,x){var T,L;if(p&&p.preventDefault&&p.handleObj)return T=p.handleObj,y(p.delegateTarget).off(T.namespace?T.origType+"."+T.namespace:T.origType,T.selector,T.handler),this;if(typeof p=="object"){for(L in p)this.off(L,_,p[L]);return this}return(_===!1||typeof _=="function")&&(x=_,_=void 0),x===!1&&(x=qi),this.each(function(){y.event.remove(this,p,x,_)})}});var tr=/<script|<style|<link/i,Rr=/checked\s*(?:[^=]|=\s*.checked.)/i,Xo=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ir(p,_){return V(p,"table")&&V(_.nodeType!==11?_:_.firstChild,"tr")&&y(p).children("tbody")[0]||p}function Yo(p){return p.type=(p.getAttribute("type")!==null)+"/"+p.type,p}function Ko(p){return(p.type||"").slice(0,5)==="true/"?p.type=p.type.slice(5):p.removeAttribute("type"),p}function Zo(p,_){var x,T,L,R,N,ne,ee;if(_.nodeType===1){if(pe.hasData(p)&&(R=pe.get(p),ee=R.events,ee)){pe.remove(_,"handle events");for(L in ee)for(x=0,T=ee[L].length;x<T;x++)y.event.add(_,L,ee[L][x])}Xe.hasData(p)&&(N=Xe.access(p),ne=y.extend({},N),Xe.set(_,ne))}}function mo(p,_){var x=_.nodeName.toLowerCase();x==="input"&&je.test(p.type)?_.checked=p.checked:(x==="input"||x==="textarea")&&(_.defaultValue=p.defaultValue)}function Ps(p,_,x,T){_=o(_);var L,R,N,ne,ee,he,Ae=0,Ie=p.length,we=Ie-1,Ue=_[0],Mt=b(Ue);if(Mt||Ie>1&&typeof Ue=="string"&&!m.checkClone&&Rr.test(Ue))return p.each(function(Gt){var Nt=p.eq(Gt);Mt&&(_[0]=Ue.call(this,Gt,Nt.html())),Ps(Nt,_,x,T)});if(Ie&&(L=Hi(_,p[0].ownerDocument,!1,p,T),R=L.firstChild,L.childNodes.length===1&&(L=R),R||T)){for(N=y.map(Qt(L,"script"),Yo),ne=N.length;Ae<Ie;Ae++)ee=L,Ae!==we&&(ee=y.clone(ee,!0,!0),ne&&y.merge(N,Qt(ee,"script"))),x.call(p[Ae],ee,Ae);if(ne)for(he=N[N.length-1].ownerDocument,y.map(N,Ko),Ae=0;Ae<ne;Ae++)ee=N[Ae],Ut.test(ee.type||"")&&!pe.access(ee,"globalEval")&&y.contains(he,ee)&&(ee.src&&(ee.type||"").toLowerCase()!=="module"?y._evalUrl&&!ee.noModule&&y._evalUrl(ee.src,{nonce:ee.nonce||ee.getAttribute("nonce")},he):w(ee.textContent.replace(Xo,""),ee,he))}return p}function U(p,_,x){for(var T,L=_?y.filter(_,p):p,R=0;(T=L[R])!=null;R++)!x&&T.nodeType===1&&y.cleanData(Qt(T)),T.parentNode&&(x&&wt(T)&&Bt(Qt(T,"script")),T.parentNode.removeChild(T));return p}y.extend({htmlPrefilter:function(p){return p},clone:function(p,_,x){var T,L,R,N,ne=p.cloneNode(!0),ee=wt(p);if(!m.noCloneChecked&&(p.nodeType===1||p.nodeType===11)&&!y.isXMLDoc(p))for(N=Qt(ne),R=Qt(p),T=0,L=R.length;T<L;T++)mo(R[T],N[T]);if(_)if(x)for(R=R||Qt(p),N=N||Qt(ne),T=0,L=R.length;T<L;T++)Zo(R[T],N[T]);else Zo(p,ne);return N=Qt(ne,"script"),N.length>0&&Bt(N,!ee&&Qt(p,"script")),ne},cleanData:function(p){for(var _,x,T,L=y.event.special,R=0;(x=p[R])!==void 0;R++)if(Ce(x)){if(_=x[pe.expando]){if(_.events)for(T in _.events)L[T]?y.event.remove(x,T):y.removeEvent(x,T,_.handle);x[pe.expando]=void 0}x[Xe.expando]&&(x[Xe.expando]=void 0)}}}),y.fn.extend({detach:function(p){return U(this,p,!0)},remove:function(p){return U(this,p)},text:function(p){return dt(this,function(_){return _===void 0?y.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=_)})},null,p,arguments.length)},append:function(){return Ps(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _=ir(this,p);_.appendChild(p)}})},prepend:function(){return Ps(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _=ir(this,p);_.insertBefore(p,_.firstChild)}})},before:function(){return Ps(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this)})},after:function(){return Ps(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this.nextSibling)})},empty:function(){for(var p,_=0;(p=this[_])!=null;_++)p.nodeType===1&&(y.cleanData(Qt(p,!1)),p.textContent="");return this},clone:function(p,_){return p=p??!1,_=_??p,this.map(function(){return y.clone(this,p,_)})},html:function(p){return dt(this,function(_){var x=this[0]||{},T=0,L=this.length;if(_===void 0&&x.nodeType===1)return x.innerHTML;if(typeof _=="string"&&!tr.test(_)&&!jt[(et.exec(_)||["",""])[1].toLowerCase()]){_=y.htmlPrefilter(_);try{for(;T<L;T++)x=this[T]||{},x.nodeType===1&&(y.cleanData(Qt(x,!1)),x.innerHTML=_);x=0}catch{}}x&&this.empty().append(_)},null,p,arguments.length)},replaceWith:function(){var p=[];return Ps(this,arguments,function(_){var x=this.parentNode;y.inArray(this,p)<0&&(y.cleanData(Qt(this)),x&&x.replaceChild(_,this))},p)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(p,_){y.fn[p]=function(x){for(var T,L=[],R=y(x),N=R.length-1,ne=0;ne<=N;ne++)T=ne===N?this:this.clone(!0),y(R[ne])[_](T),a.apply(L,T.get());return this.pushStack(L)}});var de=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),be=/^--/,Se=function(p){var _=p.ownerDocument.defaultView;return(!_||!_.opener)&&(_=e),_.getComputedStyle(p)},fe=function(p,_,x){var T,L,R={};for(L in _)R[L]=p.style[L],p.style[L]=_[L];T=x.call(p);for(L in _)p.style[L]=R[L];return T},Be=new RegExp(mt.join("|"),"i");(function(){function p(){if(he){ee.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",he.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ye.appendChild(ee).appendChild(he);var Ae=e.getComputedStyle(he);x=Ae.top!=="1%",ne=_(Ae.marginLeft)===12,he.style.right="60%",R=_(Ae.right)===36,T=_(Ae.width)===36,he.style.position="absolute",L=_(he.offsetWidth/3)===12,Ye.removeChild(ee),he=null}}function _(Ae){return Math.round(parseFloat(Ae))}var x,T,L,R,N,ne,ee=g.createElement("div"),he=g.createElement("div");he.style&&(he.style.backgroundClip="content-box",he.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=he.style.backgroundClip==="content-box",y.extend(m,{boxSizingReliable:function(){return p(),T},pixelBoxStyles:function(){return p(),R},pixelPosition:function(){return p(),x},reliableMarginLeft:function(){return p(),ne},scrollboxSize:function(){return p(),L},reliableTrDimensions:function(){var Ae,Ie,we,Ue;return N==null&&(Ae=g.createElement("table"),Ie=g.createElement("tr"),we=g.createElement("div"),Ae.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ie.style.cssText="box-sizing:content-box;border:1px solid",Ie.style.height="1px",we.style.height="9px",we.style.display="block",Ye.appendChild(Ae).appendChild(Ie).appendChild(we),Ue=e.getComputedStyle(Ie),N=parseInt(Ue.height,10)+parseInt(Ue.borderTopWidth,10)+parseInt(Ue.borderBottomWidth,10)===Ie.offsetHeight,Ye.removeChild(Ae)),N}}))})();function Ke(p,_,x){var T,L,R,N,ne=be.test(_),ee=p.style;return x=x||Se(p),x&&(N=x.getPropertyValue(_)||x[_],ne&&N&&(N=N.replace(F,"$1")||void 0),N===""&&!wt(p)&&(N=y.style(p,_)),!m.pixelBoxStyles()&&de.test(N)&&Be.test(_)&&(T=ee.width,L=ee.minWidth,R=ee.maxWidth,ee.minWidth=ee.maxWidth=ee.width=N,N=x.width,ee.width=T,ee.minWidth=L,ee.maxWidth=R)),N!==void 0?N+"":N}function lt(p,_){return{get:function(){if(p()){delete this.get;return}return(this.get=_).apply(this,arguments)}}}var ot=["Webkit","Moz","ms"],Et=g.createElement("div").style,xt={};function ht(p){for(var _=p[0].toUpperCase()+p.slice(1),x=ot.length;x--;)if(p=ot[x]+_,p in Et)return p}function Xt(p){var _=y.cssProps[p]||xt[p];return _||(p in Et?p:xt[p]=ht(p)||p)}var di=/^(none|table(?!-c[ea]).+)/,vi={position:"absolute",visibility:"hidden",display:"block"},Xi={letterSpacing:"0",fontWeight:"400"};function Kt(p,_,x){var T=_t.exec(_);return T?Math.max(0,T[2]-(x||0))+(T[3]||"px"):_}function gt(p,_,x,T,L,R){var N=_==="width"?1:0,ne=0,ee=0,he=0;if(x===(T?"border":"content"))return 0;for(;N<4;N+=2)x==="margin"&&(he+=y.css(p,x+mt[N],!0,L)),T?(x==="content"&&(ee-=y.css(p,"padding"+mt[N],!0,L)),x!=="margin"&&(ee-=y.css(p,"border"+mt[N]+"Width",!0,L))):(ee+=y.css(p,"padding"+mt[N],!0,L),x!=="padding"?ee+=y.css(p,"border"+mt[N]+"Width",!0,L):ne+=y.css(p,"border"+mt[N]+"Width",!0,L));return!T&&R>=0&&(ee+=Math.max(0,Math.ceil(p["offset"+_[0].toUpperCase()+_.slice(1)]-R-ee-ne-.5))||0),ee+he}function Pi(p,_,x){var T=Se(p),L=!m.boxSizingReliable()||x,R=L&&y.css(p,"boxSizing",!1,T)==="border-box",N=R,ne=Ke(p,_,T),ee="offset"+_[0].toUpperCase()+_.slice(1);if(de.test(ne)){if(!x)return ne;ne="auto"}return(!m.boxSizingReliable()&&R||!m.reliableTrDimensions()&&V(p,"tr")||ne==="auto"||!parseFloat(ne)&&y.css(p,"display",!1,T)==="inline")&&p.getClientRects().length&&(R=y.css(p,"boxSizing",!1,T)==="border-box",N=ee in p,N&&(ne=p[ee])),ne=parseFloat(ne)||0,ne+gt(p,_,x||(R?"border":"content"),N,T,ne)+"px"}y.extend({cssHooks:{opacity:{get:function(p,_){if(_){var x=Ke(p,"opacity");return x===""?"1":x}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(p,_,x,T){if(!(!p||p.nodeType===3||p.nodeType===8||!p.style)){var L,R,N,ne=le(_),ee=be.test(_),he=p.style;if(ee||(_=Xt(ne)),N=y.cssHooks[_]||y.cssHooks[ne],x!==void 0){if(R=typeof x,R==="string"&&(L=_t.exec(x))&&L[1]&&(x=ce(p,_,L),R="number"),x==null||x!==x)return;R==="number"&&!ee&&(x+=L&&L[3]||(y.cssNumber[ne]?"":"px")),!m.clearCloneStyle&&x===""&&_.indexOf("background")===0&&(he[_]="inherit"),(!N||!("set"in N)||(x=N.set(p,x,T))!==void 0)&&(ee?he.setProperty(_,x):he[_]=x)}else return N&&"get"in N&&(L=N.get(p,!1,T))!==void 0?L:he[_]}},css:function(p,_,x,T){var L,R,N,ne=le(_),ee=be.test(_);return ee||(_=Xt(ne)),N=y.cssHooks[_]||y.cssHooks[ne],N&&"get"in N&&(L=N.get(p,!0,x)),L===void 0&&(L=Ke(p,_,T)),L==="normal"&&_ in Xi&&(L=Xi[_]),x===""||x?(R=parseFloat(L),x===!0||isFinite(R)?R||0:L):L}}),y.each(["height","width"],function(p,_){y.cssHooks[_]={get:function(x,T,L){if(T)return di.test(y.css(x,"display"))&&(!x.getClientRects().length||!x.getBoundingClientRect().width)?fe(x,vi,function(){return Pi(x,_,L)}):Pi(x,_,L)},set:function(x,T,L){var R,N=Se(x),ne=!m.scrollboxSize()&&N.position==="absolute",ee=ne||L,he=ee&&y.css(x,"boxSizing",!1,N)==="border-box",Ae=L?gt(x,_,L,he,N):0;return he&&ne&&(Ae-=Math.ceil(x["offset"+_[0].toUpperCase()+_.slice(1)]-parseFloat(N[_])-gt(x,_,"border",!1,N)-.5)),Ae&&(R=_t.exec(T))&&(R[3]||"px")!=="px"&&(x.style[_]=T,T=y.css(x,_)),Kt(x,T,Ae)}}}),y.cssHooks.marginLeft=lt(m.reliableMarginLeft,function(p,_){if(_)return(parseFloat(Ke(p,"marginLeft"))||p.getBoundingClientRect().left-fe(p,{marginLeft:0},function(){return p.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(p,_){y.cssHooks[p+_]={expand:function(x){for(var T=0,L={},R=typeof x=="string"?x.split(" "):[x];T<4;T++)L[p+mt[T]+_]=R[T]||R[T-2]||R[0];return L}},p!=="margin"&&(y.cssHooks[p+_].set=Kt)}),y.fn.extend({css:function(p,_){return dt(this,function(x,T,L){var R,N,ne={},ee=0;if(Array.isArray(T)){for(R=Se(x),N=T.length;ee<N;ee++)ne[T[ee]]=y.css(x,T[ee],!1,R);return ne}return L!==void 0?y.style(x,T,L):y.css(x,T)},p,_,arguments.length>1)}});function It(p,_,x,T,L){return new It.prototype.init(p,_,x,T,L)}y.Tween=It,It.prototype={constructor:It,init:function(p,_,x,T,L,R){this.elem=p,this.prop=x,this.easing=L||y.easing._default,this.options=_,this.start=this.now=this.cur(),this.end=T,this.unit=R||(y.cssNumber[x]?"":"px")},cur:function(){var p=It.propHooks[this.prop];return p&&p.get?p.get(this):It.propHooks._default.get(this)},run:function(p){var _,x=It.propHooks[this.prop];return this.options.duration?this.pos=_=y.easing[this.easing](p,this.options.duration*p,0,1,this.options.duration):this.pos=_=p,this.now=(this.end-this.start)*_+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):It.propHooks._default.set(this),this}},It.prototype.init.prototype=It.prototype,It.propHooks={_default:{get:function(p){var _;return p.elem.nodeType!==1||p.elem[p.prop]!=null&&p.elem.style[p.prop]==null?p.elem[p.prop]:(_=y.css(p.elem,p.prop,""),!_||_==="auto"?0:_)},set:function(p){y.fx.step[p.prop]?y.fx.step[p.prop](p):p.elem.nodeType===1&&(y.cssHooks[p.prop]||p.elem.style[Xt(p.prop)]!=null)?y.style(p.elem,p.prop,p.now+p.unit):p.elem[p.prop]=p.now}}},It.propHooks.scrollTop=It.propHooks.scrollLeft={set:function(p){p.elem.nodeType&&p.elem.parentNode&&(p.elem[p.prop]=p.now)}},y.easing={linear:function(p){return p},swing:function(p){return .5-Math.cos(p*Math.PI)/2},_default:"swing"},y.fx=It.prototype.init,y.fx.step={};var Ii,pn,nn=/^(?:toggle|show|hide)$/,ps=/queueHooks$/;function ti(){pn&&(g.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ti):e.setTimeout(ti,y.fx.interval),y.fx.tick())}function Rn(){return e.setTimeout(function(){Ii=void 0}),Ii=Date.now()}function wn(p,_){var x,T=0,L={height:p};for(_=_?1:0;T<4;T+=2-_)x=mt[T],L["margin"+x]=L["padding"+x]=p;return _&&(L.opacity=L.width=p),L}function bi(p,_,x){for(var T,L=(Fi.tweeners[_]||[]).concat(Fi.tweeners["*"]),R=0,N=L.length;R<N;R++)if(T=L[R].call(x,_,p))return T}function nr(p,_,x){var T,L,R,N,ne,ee,he,Ae,Ie="width"in _||"height"in _,we=this,Ue={},Mt=p.style,Gt=p.nodeType&&kt(p),Nt=pe.get(p,"fxshow");x.queue||(N=y._queueHooks(p,"fx"),N.unqueued==null&&(N.unqueued=0,ne=N.empty.fire,N.empty.fire=function(){N.unqueued||ne()}),N.unqueued++,we.always(function(){we.always(function(){N.unqueued--,y.queue(p,"fx").length||N.empty.fire()})}));for(T in _)if(L=_[T],nn.test(L)){if(delete _[T],R=R||L==="toggle",L===(Gt?"hide":"show"))if(L==="show"&&Nt&&Nt[T]!==void 0)Gt=!0;else continue;Ue[T]=Nt&&Nt[T]||y.style(p,T)}if(ee=!y.isEmptyObject(_),!(!ee&&y.isEmptyObject(Ue))){Ie&&p.nodeType===1&&(x.overflow=[Mt.overflow,Mt.overflowX,Mt.overflowY],he=Nt&&Nt.display,he==null&&(he=pe.get(p,"display")),Ae=y.css(p,"display"),Ae==="none"&&(he?Ae=he:(Oe([p],!0),he=p.style.display||he,Ae=y.css(p,"display"),Oe([p]))),(Ae==="inline"||Ae==="inline-block"&&he!=null)&&y.css(p,"float")==="none"&&(ee||(we.done(function(){Mt.display=he}),he==null&&(Ae=Mt.display,he=Ae==="none"?"":Ae)),Mt.display="inline-block")),x.overflow&&(Mt.overflow="hidden",we.always(function(){Mt.overflow=x.overflow[0],Mt.overflowX=x.overflow[1],Mt.overflowY=x.overflow[2]})),ee=!1;for(T in Ue)ee||(Nt?"hidden"in Nt&&(Gt=Nt.hidden):Nt=pe.access(p,"fxshow",{display:he}),R&&(Nt.hidden=!Gt),Gt&&Oe([p],!0),we.done(function(){Gt||Oe([p]),pe.remove(p,"fxshow");for(T in Ue)y.style(p,T,Ue[T])})),ee=bi(Gt?Nt[T]:0,T,we),T in Nt||(Nt[T]=ee.start,Gt&&(ee.end=ee.start,ee.start=0))}}function ll(p,_){var x,T,L,R,N;for(x in p)if(T=le(x),L=_[T],R=p[x],Array.isArray(R)&&(L=R[1],R=p[x]=R[0]),x!==T&&(p[T]=R,delete p[x]),N=y.cssHooks[T],N&&"expand"in N){R=N.expand(R),delete p[T];for(x in R)x in p||(p[x]=R[x],_[x]=L)}else _[T]=L}function Fi(p,_,x){var T,L,R=0,N=Fi.prefilters.length,ne=y.Deferred().always(function(){delete ee.elem}),ee=function(){if(L)return!1;for(var Ie=Ii||Rn(),we=Math.max(0,he.startTime+he.duration-Ie),Ue=we/he.duration||0,Mt=1-Ue,Gt=0,Nt=he.tweens.length;Gt<Nt;Gt++)he.tweens[Gt].run(Mt);return ne.notifyWith(p,[he,Mt,we]),Mt<1&&Nt?we:(Nt||ne.notifyWith(p,[he,1,0]),ne.resolveWith(p,[he]),!1)},he=ne.promise({elem:p,props:y.extend({},_),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},x),originalProperties:_,originalOptions:x,startTime:Ii||Rn(),duration:x.duration,tweens:[],createTween:function(Ie,we){var Ue=y.Tween(p,he.opts,Ie,we,he.opts.specialEasing[Ie]||he.opts.easing);return he.tweens.push(Ue),Ue},stop:function(Ie){var we=0,Ue=Ie?he.tweens.length:0;if(L)return this;for(L=!0;we<Ue;we++)he.tweens[we].run(1);return Ie?(ne.notifyWith(p,[he,1,0]),ne.resolveWith(p,[he,Ie])):ne.rejectWith(p,[he,Ie]),this}}),Ae=he.props;for(ll(Ae,he.opts.specialEasing);R<N;R++)if(T=Fi.prefilters[R].call(he,p,Ae,he.opts),T)return b(T.stop)&&(y._queueHooks(he.elem,he.opts.queue).stop=T.stop.bind(T)),T;return y.map(Ae,bi,he),b(he.opts.start)&&he.opts.start.call(p,he),he.progress(he.opts.progress).done(he.opts.done,he.opts.complete).fail(he.opts.fail).always(he.opts.always),y.fx.timer(y.extend(ee,{elem:p,anim:he,queue:he.opts.queue})),he}y.Animation=y.extend(Fi,{tweeners:{"*":[function(p,_){var x=this.createTween(p,_);return ce(x.elem,p,_t.exec(_),x),x}]},tweener:function(p,_){b(p)?(_=p,p=["*"]):p=p.match(He);for(var x,T=0,L=p.length;T<L;T++)x=p[T],Fi.tweeners[x]=Fi.tweeners[x]||[],Fi.tweeners[x].unshift(_)},prefilters:[nr],prefilter:function(p,_){_?Fi.prefilters.unshift(p):Fi.prefilters.push(p)}}),y.speed=function(p,_,x){var T=p&&typeof p=="object"?y.extend({},p):{complete:x||!x&&_||b(p)&&p,duration:p,easing:x&&_||_&&!b(_)&&_};return y.fx.off?T.duration=0:typeof T.duration!="number"&&(T.duration in y.fx.speeds?T.duration=y.fx.speeds[T.duration]:T.duration=y.fx.speeds._default),(T.queue==null||T.queue===!0)&&(T.queue="fx"),T.old=T.complete,T.complete=function(){b(T.old)&&T.old.call(this),T.queue&&y.dequeue(this,T.queue)},T},y.fn.extend({fadeTo:function(p,_,x,T){return this.filter(kt).css("opacity",0).show().end().animate({opacity:_},p,x,T)},animate:function(p,_,x,T){var L=y.isEmptyObject(p),R=y.speed(_,x,T),N=function(){var ne=Fi(this,y.extend({},p),R);(L||pe.get(this,"finish"))&&ne.stop(!0)};return N.finish=N,L||R.queue===!1?this.each(N):this.queue(R.queue,N)},stop:function(p,_,x){var T=function(L){var R=L.stop;delete L.stop,R(x)};return typeof p!="string"&&(x=_,_=p,p=void 0),_&&this.queue(p||"fx",[]),this.each(function(){var L=!0,R=p!=null&&p+"queueHooks",N=y.timers,ne=pe.get(this);if(R)ne[R]&&ne[R].stop&&T(ne[R]);else for(R in ne)ne[R]&&ne[R].stop&&ps.test(R)&&T(ne[R]);for(R=N.length;R--;)N[R].elem===this&&(p==null||N[R].queue===p)&&(N[R].anim.stop(x),L=!1,N.splice(R,1));(L||!x)&&y.dequeue(this,p)})},finish:function(p){return p!==!1&&(p=p||"fx"),this.each(function(){var _,x=pe.get(this),T=x[p+"queue"],L=x[p+"queueHooks"],R=y.timers,N=T?T.length:0;for(x.finish=!0,y.queue(this,p,[]),L&&L.stop&&L.stop.call(this,!0),_=R.length;_--;)R[_].elem===this&&R[_].queue===p&&(R[_].anim.stop(!0),R.splice(_,1));for(_=0;_<N;_++)T[_]&&T[_].finish&&T[_].finish.call(this);delete x.finish})}}),y.each(["toggle","show","hide"],function(p,_){var x=y.fn[_];y.fn[_]=function(T,L,R){return T==null||typeof T=="boolean"?x.apply(this,arguments):this.animate(wn(_,!0),T,L,R)}}),y.each({slideDown:wn("show"),slideUp:wn("hide"),slideToggle:wn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(p,_){y.fn[p]=function(x,T,L){return this.animate(_,x,T,L)}}),y.timers=[],y.fx.tick=function(){var p,_=0,x=y.timers;for(Ii=Date.now();_<x.length;_++)p=x[_],!p()&&x[_]===p&&x.splice(_--,1);x.length||y.fx.stop(),Ii=void 0},y.fx.timer=function(p){y.timers.push(p),y.fx.start()},y.fx.interval=13,y.fx.start=function(){pn||(pn=!0,ti())},y.fx.stop=function(){pn=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(p,_){return p=y.fx&&y.fx.speeds[p]||p,_=_||"fx",this.queue(_,function(x,T){var L=e.setTimeout(x,p);T.stop=function(){e.clearTimeout(L)}})},function(){var p=g.createElement("input"),_=g.createElement("select"),x=_.appendChild(g.createElement("option"));p.type="checkbox",m.checkOn=p.value!=="",m.optSelected=x.selected,p=g.createElement("input"),p.value="t",p.type="radio",m.radioValue=p.value==="t"}();var cl,Ir=y.expr.attrHandle;y.fn.extend({attr:function(p,_){return dt(this,y.attr,p,_,arguments.length>1)},removeAttr:function(p){return this.each(function(){y.removeAttr(this,p)})}}),y.extend({attr:function(p,_,x){var T,L,R=p.nodeType;if(!(R===3||R===8||R===2)){if(typeof p.getAttribute>"u")return y.prop(p,_,x);if((R!==1||!y.isXMLDoc(p))&&(L=y.attrHooks[_.toLowerCase()]||(y.expr.match.bool.test(_)?cl:void 0)),x!==void 0){if(x===null){y.removeAttr(p,_);return}return L&&"set"in L&&(T=L.set(p,x,_))!==void 0?T:(p.setAttribute(_,x+""),x)}return L&&"get"in L&&(T=L.get(p,_))!==null?T:(T=y.find.attr(p,_),T??void 0)}},attrHooks:{type:{set:function(p,_){if(!m.radioValue&&_==="radio"&&V(p,"input")){var x=p.value;return p.setAttribute("type",_),x&&(p.value=x),_}}}},removeAttr:function(p,_){var x,T=0,L=_&&_.match(He);if(L&&p.nodeType===1)for(;x=L[T++];)p.removeAttribute(x)}}),cl={set:function(p,_,x){return _===!1?y.removeAttr(p,x):p.setAttribute(x,x),x}},y.each(y.expr.match.bool.source.match(/\w+/g),function(p,_){var x=Ir[_]||y.find.attr;Ir[_]=function(T,L,R){var N,ne,ee=L.toLowerCase();return R||(ne=Ir[ee],Ir[ee]=N,N=x(T,L,R)!=null?ee:null,Ir[ee]=ne),N}});var ul=/^(?:input|select|textarea|button)$/i,dl=/^(?:a|area)$/i;y.fn.extend({prop:function(p,_){return dt(this,y.prop,p,_,arguments.length>1)},removeProp:function(p){return this.each(function(){delete this[y.propFix[p]||p]})}}),y.extend({prop:function(p,_,x){var T,L,R=p.nodeType;if(!(R===3||R===8||R===2))return(R!==1||!y.isXMLDoc(p))&&(_=y.propFix[_]||_,L=y.propHooks[_]),x!==void 0?L&&"set"in L&&(T=L.set(p,x,_))!==void 0?T:p[_]=x:L&&"get"in L&&(T=L.get(p,_))!==null?T:p[_]},propHooks:{tabIndex:{get:function(p){var _=y.find.attr(p,"tabindex");return _?parseInt(_,10):ul.test(p.nodeName)||dl.test(p.nodeName)&&p.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(y.propHooks.selected={get:function(p){var _=p.parentNode;return _&&_.parentNode&&_.parentNode.selectedIndex,null},set:function(p){var _=p.parentNode;_&&(_.selectedIndex,_.parentNode&&_.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this});function sr(p){var _=p.match(He)||[];return _.join(" ")}function rr(p){return p.getAttribute&&p.getAttribute("class")||""}function Dr(p){return Array.isArray(p)?p:typeof p=="string"?p.match(He)||[]:[]}y.fn.extend({addClass:function(p){var _,x,T,L,R,N;return b(p)?this.each(function(ne){y(this).addClass(p.call(this,ne,rr(this)))}):(_=Dr(p),_.length?this.each(function(){if(T=rr(this),x=this.nodeType===1&&" "+sr(T)+" ",x){for(R=0;R<_.length;R++)L=_[R],x.indexOf(" "+L+" ")<0&&(x+=L+" ");N=sr(x),T!==N&&this.setAttribute("class",N)}}):this)},removeClass:function(p){var _,x,T,L,R,N;return b(p)?this.each(function(ne){y(this).removeClass(p.call(this,ne,rr(this)))}):arguments.length?(_=Dr(p),_.length?this.each(function(){if(T=rr(this),x=this.nodeType===1&&" "+sr(T)+" ",x){for(R=0;R<_.length;R++)for(L=_[R];x.indexOf(" "+L+" ")>-1;)x=x.replace(" "+L+" "," ");N=sr(x),T!==N&&this.setAttribute("class",N)}}):this):this.attr("class","")},toggleClass:function(p,_){var x,T,L,R,N=typeof p,ne=N==="string"||Array.isArray(p);return b(p)?this.each(function(ee){y(this).toggleClass(p.call(this,ee,rr(this),_),_)}):typeof _=="boolean"&&ne?_?this.addClass(p):this.removeClass(p):(x=Dr(p),this.each(function(){if(ne)for(R=y(this),L=0;L<x.length;L++)T=x[L],R.hasClass(T)?R.removeClass(T):R.addClass(T);else(p===void 0||N==="boolean")&&(T=rr(this),T&&pe.set(this,"__className__",T),this.setAttribute&&this.setAttribute("class",T||p===!1?"":pe.get(this,"__className__")||""))}))},hasClass:function(p){var _,x,T=0;for(_=" "+p+" ";x=this[T++];)if(x.nodeType===1&&(" "+sr(rr(x))+" ").indexOf(_)>-1)return!0;return!1}});var In=/\r/g;y.fn.extend({val:function(p){var _,x,T,L=this[0];return arguments.length?(T=b(p),this.each(function(R){var N;this.nodeType===1&&(T?N=p.call(this,R,y(this).val()):N=p,N==null?N="":typeof N=="number"?N+="":Array.isArray(N)&&(N=y.map(N,function(ne){return ne==null?"":ne+""})),_=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()],(!_||!("set"in _)||_.set(this,N,"value")===void 0)&&(this.value=N))})):L?(_=y.valHooks[L.type]||y.valHooks[L.nodeName.toLowerCase()],_&&"get"in _&&(x=_.get(L,"value"))!==void 0?x:(x=L.value,typeof x=="string"?x.replace(In,""):x??"")):void 0}}),y.extend({valHooks:{option:{get:function(p){var _=y.find.attr(p,"value");return _??sr(y.text(p))}},select:{get:function(p){var _,x,T,L=p.options,R=p.selectedIndex,N=p.type==="select-one",ne=N?null:[],ee=N?R+1:L.length;for(R<0?T=ee:T=N?R:0;T<ee;T++)if(x=L[T],(x.selected||T===R)&&!x.disabled&&(!x.parentNode.disabled||!V(x.parentNode,"optgroup"))){if(_=y(x).val(),N)return _;ne.push(_)}return ne},set:function(p,_){for(var x,T,L=p.options,R=y.makeArray(_),N=L.length;N--;)T=L[N],(T.selected=y.inArray(y.valHooks.option.get(T),R)>-1)&&(x=!0);return x||(p.selectedIndex=-1),R}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(p,_){if(Array.isArray(_))return p.checked=y.inArray(y(p).val(),_)>-1}},m.checkOn||(y.valHooks[this].get=function(p){return p.getAttribute("value")===null?"on":p.value})});var go=e.location,Vc={guid:Date.now()},hl=/\?/;y.parseXML=function(p){var _,x;if(!p||typeof p!="string")return null;try{_=new e.DOMParser().parseFromString(p,"text/xml")}catch{}return x=_&&_.getElementsByTagName("parsererror")[0],(!_||x)&&y.error("Invalid XML: "+(x?y.map(x.childNodes,function(T){return T.textContent}).join(`
`):p)),_};var fl=/^(?:focusinfocus|focusoutblur)$/,$c=function(p){p.stopPropagation()};y.extend(y.event,{trigger:function(p,_,x,T){var L,R,N,ne,ee,he,Ae,Ie,we=[x||g],Ue=d.call(p,"type")?p.type:p,Mt=d.call(p,"namespace")?p.namespace.split("."):[];if(R=Ie=N=x=x||g,!(x.nodeType===3||x.nodeType===8)&&!fl.test(Ue+y.event.triggered)&&(Ue.indexOf(".")>-1&&(Mt=Ue.split("."),Ue=Mt.shift(),Mt.sort()),ee=Ue.indexOf(":")<0&&"on"+Ue,p=p[y.expando]?p:new y.Event(Ue,typeof p=="object"&&p),p.isTrigger=T?2:3,p.namespace=Mt.join("."),p.rnamespace=p.namespace?new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p.result=void 0,p.target||(p.target=x),_=_==null?[p]:y.makeArray(_,[p]),Ae=y.event.special[Ue]||{},!(!T&&Ae.trigger&&Ae.trigger.apply(x,_)===!1))){if(!T&&!Ae.noBubble&&!v(x)){for(ne=Ae.delegateType||Ue,fl.test(ne+Ue)||(R=R.parentNode);R;R=R.parentNode)we.push(R),N=R;N===(x.ownerDocument||g)&&we.push(N.defaultView||N.parentWindow||e)}for(L=0;(R=we[L++])&&!p.isPropagationStopped();)Ie=R,p.type=L>1?ne:Ae.bindType||Ue,he=(pe.get(R,"events")||Object.create(null))[p.type]&&pe.get(R,"handle"),he&&he.apply(R,_),he=ee&&R[ee],he&&he.apply&&Ce(R)&&(p.result=he.apply(R,_),p.result===!1&&p.preventDefault());return p.type=Ue,!T&&!p.isDefaultPrevented()&&(!Ae._default||Ae._default.apply(we.pop(),_)===!1)&&Ce(x)&&ee&&b(x[Ue])&&!v(x)&&(N=x[ee],N&&(x[ee]=null),y.event.triggered=Ue,p.isPropagationStopped()&&Ie.addEventListener(Ue,$c),x[Ue](),p.isPropagationStopped()&&Ie.removeEventListener(Ue,$c),y.event.triggered=void 0,N&&(x[ee]=N)),p.result}},simulate:function(p,_,x){var T=y.extend(new y.Event,x,{type:p,isSimulated:!0});y.event.trigger(T,null,_)}}),y.fn.extend({trigger:function(p,_){return this.each(function(){y.event.trigger(p,_,this)})},triggerHandler:function(p,_){var x=this[0];if(x)return y.event.trigger(p,_,x,!0)}});var Gc=/\[\]$/,pl=/\r?\n/g,lh=/^(?:submit|button|image|reset|file)$/i,ch=/^(?:input|select|textarea|keygen)/i;function ml(p,_,x,T){var L;if(Array.isArray(_))y.each(_,function(R,N){x||Gc.test(p)?T(p,N):ml(p+"["+(typeof N=="object"&&N!=null?R:"")+"]",N,x,T)});else if(!x&&S(_)==="object")for(L in _)ml(p+"["+L+"]",_[L],x,T);else T(p,_)}y.param=function(p,_){var x,T=[],L=function(R,N){var ne=b(N)?N():N;T[T.length]=encodeURIComponent(R)+"="+encodeURIComponent(ne??"")};if(p==null)return"";if(Array.isArray(p)||p.jquery&&!y.isPlainObject(p))y.each(p,function(){L(this.name,this.value)});else for(x in p)ml(x,p[x],_,L);return T.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var p=y.prop(this,"elements");return p?y.makeArray(p):this}).filter(function(){var p=this.type;return this.name&&!y(this).is(":disabled")&&ch.test(this.nodeName)&&!lh.test(p)&&(this.checked||!je.test(p))}).map(function(p,_){var x=y(this).val();return x==null?null:Array.isArray(x)?y.map(x,function(T){return{name:_.name,value:T.replace(pl,`\r
`)}}):{name:_.name,value:x.replace(pl,`\r
`)}}).get()}});var gl=/%20/g,Wc=/#.*$/,uh=/([?&])_=[^&]*/,Qo=/^(.*?):[ \t]*([^\r\n]*)$/mg,dh=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vl=/^(?:GET|HEAD)$/,hh=/^\/\//,jc={},yl={},qc="*/".concat("*"),bl=g.createElement("a");bl.href=go.href;function Xc(p){return function(_,x){typeof _!="string"&&(x=_,_="*");var T,L=0,R=_.toLowerCase().match(He)||[];if(b(x))for(;T=R[L++];)T[0]==="+"?(T=T.slice(1)||"*",(p[T]=p[T]||[]).unshift(x)):(p[T]=p[T]||[]).push(x)}}function Yc(p,_,x,T){var L={},R=p===yl;function N(ne){var ee;return L[ne]=!0,y.each(p[ne]||[],function(he,Ae){var Ie=Ae(_,x,T);if(typeof Ie=="string"&&!R&&!L[Ie])return _.dataTypes.unshift(Ie),N(Ie),!1;if(R)return!(ee=Ie)}),ee}return N(_.dataTypes[0])||!L["*"]&&N("*")}function _l(p,_){var x,T,L=y.ajaxSettings.flatOptions||{};for(x in _)_[x]!==void 0&&((L[x]?p:T||(T={}))[x]=_[x]);return T&&y.extend(!0,p,T),p}function fh(p,_,x){for(var T,L,R,N,ne=p.contents,ee=p.dataTypes;ee[0]==="*";)ee.shift(),T===void 0&&(T=p.mimeType||_.getResponseHeader("Content-Type"));if(T){for(L in ne)if(ne[L]&&ne[L].test(T)){ee.unshift(L);break}}if(ee[0]in x)R=ee[0];else{for(L in x){if(!ee[0]||p.converters[L+" "+ee[0]]){R=L;break}N||(N=L)}R=R||N}if(R)return R!==ee[0]&&ee.unshift(R),x[R]}function ph(p,_,x,T){var L,R,N,ne,ee,he={},Ae=p.dataTypes.slice();if(Ae[1])for(N in p.converters)he[N.toLowerCase()]=p.converters[N];for(R=Ae.shift();R;)if(p.responseFields[R]&&(x[p.responseFields[R]]=_),!ee&&T&&p.dataFilter&&(_=p.dataFilter(_,p.dataType)),ee=R,R=Ae.shift(),R){if(R==="*")R=ee;else if(ee!=="*"&&ee!==R){if(N=he[ee+" "+R]||he["* "+R],!N){for(L in he)if(ne=L.split(" "),ne[1]===R&&(N=he[ee+" "+ne[0]]||he["* "+ne[0]],N)){N===!0?N=he[L]:he[L]!==!0&&(R=ne[0],Ae.unshift(ne[1]));break}}if(N!==!0)if(N&&p.throws)_=N(_);else try{_=N(_)}catch(Ie){return{state:"parsererror",error:N?Ie:"No conversion from "+ee+" to "+R}}}}return{state:"success",data:_}}y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:go.href,type:"GET",isLocal:dh.test(go.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(p,_){return _?_l(_l(p,y.ajaxSettings),_):_l(y.ajaxSettings,p)},ajaxPrefilter:Xc(jc),ajaxTransport:Xc(yl),ajax:function(p,_){typeof p=="object"&&(_=p,p=void 0),_=_||{};var x,T,L,R,N,ne,ee,he,Ae,Ie,we=y.ajaxSetup({},_),Ue=we.context||we,Mt=we.context&&(Ue.nodeType||Ue.jquery)?y(Ue):y.event,Gt=y.Deferred(),Nt=y.Callbacks("once memory"),Vi=we.statusCode||{},Li={},Xn={},Yn="canceled",Wt={readyState:0,getResponseHeader:function(Zt){var _i;if(ee){if(!R)for(R={};_i=Qo.exec(L);)R[_i[1].toLowerCase()+" "]=(R[_i[1].toLowerCase()+" "]||[]).concat(_i[2]);_i=R[Zt.toLowerCase()+" "]}return _i==null?null:_i.join(", ")},getAllResponseHeaders:function(){return ee?L:null},setRequestHeader:function(Zt,_i){return ee==null&&(Zt=Xn[Zt.toLowerCase()]=Xn[Zt.toLowerCase()]||Zt,Li[Zt]=_i),this},overrideMimeType:function(Zt){return ee==null&&(we.mimeType=Zt),this},statusCode:function(Zt){var _i;if(Zt)if(ee)Wt.always(Zt[Wt.status]);else for(_i in Zt)Vi[_i]=[Vi[_i],Zt[_i]];return this},abort:function(Zt){var _i=Zt||Yn;return x&&x.abort(_i),ar(0,_i),this}};if(Gt.promise(Wt),we.url=((p||we.url||go.href)+"").replace(hh,go.protocol+"//"),we.type=_.method||_.type||we.method||we.type,we.dataTypes=(we.dataType||"*").toLowerCase().match(He)||[""],we.crossDomain==null){ne=g.createElement("a");try{ne.href=we.url,ne.href=ne.href,we.crossDomain=bl.protocol+"//"+bl.host!=ne.protocol+"//"+ne.host}catch{we.crossDomain=!0}}if(we.data&&we.processData&&typeof we.data!="string"&&(we.data=y.param(we.data,we.traditional)),Yc(jc,we,_,Wt),ee)return Wt;he=y.event&&we.global,he&&y.active++===0&&y.event.trigger("ajaxStart"),we.type=we.type.toUpperCase(),we.hasContent=!vl.test(we.type),T=we.url.replace(Wc,""),we.hasContent?we.data&&we.processData&&(we.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(we.data=we.data.replace(gl,"+")):(Ie=we.url.slice(T.length),we.data&&(we.processData||typeof we.data=="string")&&(T+=(hl.test(T)?"&":"?")+we.data,delete we.data),we.cache===!1&&(T=T.replace(uh,"$1"),Ie=(hl.test(T)?"&":"?")+"_="+Vc.guid+++Ie),we.url=T+Ie),we.ifModified&&(y.lastModified[T]&&Wt.setRequestHeader("If-Modified-Since",y.lastModified[T]),y.etag[T]&&Wt.setRequestHeader("If-None-Match",y.etag[T])),(we.data&&we.hasContent&&we.contentType!==!1||_.contentType)&&Wt.setRequestHeader("Content-Type",we.contentType),Wt.setRequestHeader("Accept",we.dataTypes[0]&&we.accepts[we.dataTypes[0]]?we.accepts[we.dataTypes[0]]+(we.dataTypes[0]!=="*"?", "+qc+"; q=0.01":""):we.accepts["*"]);for(Ae in we.headers)Wt.setRequestHeader(Ae,we.headers[Ae]);if(we.beforeSend&&(we.beforeSend.call(Ue,Wt,we)===!1||ee))return Wt.abort();if(Yn="abort",Nt.add(we.complete),Wt.done(we.success),Wt.fail(we.error),x=Yc(yl,we,_,Wt),!x)ar(-1,"No Transport");else{if(Wt.readyState=1,he&&Mt.trigger("ajaxSend",[Wt,we]),ee)return Wt;we.async&&we.timeout>0&&(N=e.setTimeout(function(){Wt.abort("timeout")},we.timeout));try{ee=!1,x.send(Li,ar)}catch(Zt){if(ee)throw Zt;ar(-1,Zt)}}function ar(Zt,_i,Or,vo){var Kn,ms,Zn,Rs,Is,xn=_i;ee||(ee=!0,N&&e.clearTimeout(N),x=void 0,L=vo||"",Wt.readyState=Zt>0?4:0,Kn=Zt>=200&&Zt<300||Zt===304,Or&&(Rs=fh(we,Wt,Or)),!Kn&&y.inArray("script",we.dataTypes)>-1&&y.inArray("json",we.dataTypes)<0&&(we.converters["text script"]=function(){}),Rs=ph(we,Rs,Wt,Kn),Kn?(we.ifModified&&(Is=Wt.getResponseHeader("Last-Modified"),Is&&(y.lastModified[T]=Is),Is=Wt.getResponseHeader("etag"),Is&&(y.etag[T]=Is)),Zt===204||we.type==="HEAD"?xn="nocontent":Zt===304?xn="notmodified":(xn=Rs.state,ms=Rs.data,Zn=Rs.error,Kn=!Zn)):(Zn=xn,(Zt||!xn)&&(xn="error",Zt<0&&(Zt=0))),Wt.status=Zt,Wt.statusText=(_i||xn)+"",Kn?Gt.resolveWith(Ue,[ms,xn,Wt]):Gt.rejectWith(Ue,[Wt,xn,Zn]),Wt.statusCode(Vi),Vi=void 0,he&&Mt.trigger(Kn?"ajaxSuccess":"ajaxError",[Wt,we,Kn?ms:Zn]),Nt.fireWith(Ue,[Wt,xn]),he&&(Mt.trigger("ajaxComplete",[Wt,we]),--y.active||y.event.trigger("ajaxStop")))}return Wt},getJSON:function(p,_,x){return y.get(p,_,x,"json")},getScript:function(p,_){return y.get(p,void 0,_,"script")}}),y.each(["get","post"],function(p,_){y[_]=function(x,T,L,R){return b(T)&&(R=R||L,L=T,T=void 0),y.ajax(y.extend({url:x,type:_,dataType:R,data:T,success:L},y.isPlainObject(x)&&x))}}),y.ajaxPrefilter(function(p){var _;for(_ in p.headers)_.toLowerCase()==="content-type"&&(p.contentType=p.headers[_]||"")}),y._evalUrl=function(p,_,x){return y.ajax({url:p,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(T){y.globalEval(T,_,x)}})},y.fn.extend({wrapAll:function(p){var _;return this[0]&&(b(p)&&(p=p.call(this[0])),_=y(p,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&_.insertBefore(this[0]),_.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(p){return b(p)?this.each(function(_){y(this).wrapInner(p.call(this,_))}):this.each(function(){var _=y(this),x=_.contents();x.length?x.wrapAll(p):_.append(p)})},wrap:function(p){var _=b(p);return this.each(function(x){y(this).wrapAll(_?p.call(this,x):p)})},unwrap:function(p){return this.parent(p).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(p){return!y.expr.pseudos.visible(p)},y.expr.pseudos.visible=function(p){return!!(p.offsetWidth||p.offsetHeight||p.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Ls={0:200,1223:204},qn=y.ajaxSettings.xhr();m.cors=!!qn&&"withCredentials"in qn,m.ajax=qn=!!qn,y.ajaxTransport(function(p){var _,x;if(m.cors||qn&&!p.crossDomain)return{send:function(T,L){var R,N=p.xhr();if(N.open(p.type,p.url,p.async,p.username,p.password),p.xhrFields)for(R in p.xhrFields)N[R]=p.xhrFields[R];p.mimeType&&N.overrideMimeType&&N.overrideMimeType(p.mimeType),!p.crossDomain&&!T["X-Requested-With"]&&(T["X-Requested-With"]="XMLHttpRequest");for(R in T)N.setRequestHeader(R,T[R]);_=function(ne){return function(){_&&(_=x=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,ne==="abort"?N.abort():ne==="error"?typeof N.status!="number"?L(0,"error"):L(N.status,N.statusText):L(Ls[N.status]||N.status,N.statusText,(N.responseType||"text")!=="text"||typeof N.responseText!="string"?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=_(),x=N.onerror=N.ontimeout=_("error"),N.onabort!==void 0?N.onabort=x:N.onreadystatechange=function(){N.readyState===4&&e.setTimeout(function(){_&&x()})},_=_("abort");try{N.send(p.hasContent&&p.data||null)}catch(ne){if(_)throw ne}},abort:function(){_&&_()}}}),y.ajaxPrefilter(function(p){p.crossDomain&&(p.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(p){return y.globalEval(p),p}}}),y.ajaxPrefilter("script",function(p){p.cache===void 0&&(p.cache=!1),p.crossDomain&&(p.type="GET")}),y.ajaxTransport("script",function(p){if(p.crossDomain||p.scriptAttrs){var _,x;return{send:function(T,L){_=y("<script>").attr(p.scriptAttrs||{}).prop({charset:p.scriptCharset,src:p.url}).on("load error",x=function(R){_.remove(),x=null,R&&L(R.type==="error"?404:200,R.type)}),g.head.appendChild(_[0])},abort:function(){x&&x()}}}});var Kc=[],or=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var p=Kc.pop()||y.expando+"_"+Vc.guid++;return this[p]=!0,p}}),y.ajaxPrefilter("json jsonp",function(p,_,x){var T,L,R,N=p.jsonp!==!1&&(or.test(p.url)?"url":typeof p.data=="string"&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&or.test(p.data)&&"data");if(N||p.dataTypes[0]==="jsonp")return T=p.jsonpCallback=b(p.jsonpCallback)?p.jsonpCallback():p.jsonpCallback,N?p[N]=p[N].replace(or,"$1"+T):p.jsonp!==!1&&(p.url+=(hl.test(p.url)?"&":"?")+p.jsonp+"="+T),p.converters["script json"]=function(){return R||y.error(T+" was not called"),R[0]},p.dataTypes[0]="json",L=e[T],e[T]=function(){R=arguments},x.always(function(){L===void 0?y(e).removeProp(T):e[T]=L,p[T]&&(p.jsonpCallback=_.jsonpCallback,Kc.push(T)),R&&b(L)&&L(R[0]),R=L=void 0}),"script"}),m.createHTMLDocument=function(){var p=g.implementation.createHTMLDocument("").body;return p.innerHTML="<form></form><form></form>",p.childNodes.length===2}(),y.parseHTML=function(p,_,x){if(typeof p!="string")return[];typeof _=="boolean"&&(x=_,_=!1);var T,L,R;return _||(m.createHTMLDocument?(_=g.implementation.createHTMLDocument(""),T=_.createElement("base"),T.href=g.location.href,_.head.appendChild(T)):_=g),L=W.exec(p),R=!x&&[],L?[_.createElement(L[1])]:(L=Hi([p],_,R),R&&R.length&&y(R).remove(),y.merge([],L.childNodes))},y.fn.load=function(p,_,x){var T,L,R,N=this,ne=p.indexOf(" ");return ne>-1&&(T=sr(p.slice(ne)),p=p.slice(0,ne)),b(_)?(x=_,_=void 0):_&&typeof _=="object"&&(L="POST"),N.length>0&&y.ajax({url:p,type:L||"GET",dataType:"html",data:_}).done(function(ee){R=arguments,N.html(T?y("<div>").append(y.parseHTML(ee)).find(T):ee)}).always(x&&function(ee,he){N.each(function(){x.apply(this,R||[ee.responseText,he,ee])})}),this},y.expr.pseudos.animated=function(p){return y.grep(y.timers,function(_){return p===_.elem}).length},y.offset={setOffset:function(p,_,x){var T,L,R,N,ne,ee,he,Ae=y.css(p,"position"),Ie=y(p),we={};Ae==="static"&&(p.style.position="relative"),ne=Ie.offset(),R=y.css(p,"top"),ee=y.css(p,"left"),he=(Ae==="absolute"||Ae==="fixed")&&(R+ee).indexOf("auto")>-1,he?(T=Ie.position(),N=T.top,L=T.left):(N=parseFloat(R)||0,L=parseFloat(ee)||0),b(_)&&(_=_.call(p,x,y.extend({},ne))),_.top!=null&&(we.top=_.top-ne.top+N),_.left!=null&&(we.left=_.left-ne.left+L),"using"in _?_.using.call(p,we):Ie.css(we)}},y.fn.extend({offset:function(p){if(arguments.length)return p===void 0?this:this.each(function(L){y.offset.setOffset(this,p,L)});var _,x,T=this[0];if(T)return T.getClientRects().length?(_=T.getBoundingClientRect(),x=T.ownerDocument.defaultView,{top:_.top+x.pageYOffset,left:_.left+x.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var p,_,x,T=this[0],L={top:0,left:0};if(y.css(T,"position")==="fixed")_=T.getBoundingClientRect();else{for(_=this.offset(),x=T.ownerDocument,p=T.offsetParent||x.documentElement;p&&(p===x.body||p===x.documentElement)&&y.css(p,"position")==="static";)p=p.parentNode;p&&p!==T&&p.nodeType===1&&(L=y(p).offset(),L.top+=y.css(p,"borderTopWidth",!0),L.left+=y.css(p,"borderLeftWidth",!0))}return{top:_.top-L.top-y.css(T,"marginTop",!0),left:_.left-L.left-y.css(T,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var p=this.offsetParent;p&&y.css(p,"position")==="static";)p=p.offsetParent;return p||Ye})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(p,_){var x=_==="pageYOffset";y.fn[p]=function(T){return dt(this,function(L,R,N){var ne;if(v(L)?ne=L:L.nodeType===9&&(ne=L.defaultView),N===void 0)return ne?ne[_]:L[R];ne?ne.scrollTo(x?ne.pageXOffset:N,x?N:ne.pageYOffset):L[R]=N},p,T,arguments.length)}}),y.each(["top","left"],function(p,_){y.cssHooks[_]=lt(m.pixelPosition,function(x,T){if(T)return T=Ke(x,_),de.test(T)?y(x).position()[_]+"px":T})}),y.each({Height:"height",Width:"width"},function(p,_){y.each({padding:"inner"+p,content:_,"":"outer"+p},function(x,T){y.fn[T]=function(L,R){var N=arguments.length&&(x||typeof L!="boolean"),ne=x||(L===!0||R===!0?"margin":"border");return dt(this,function(ee,he,Ae){var Ie;return v(ee)?T.indexOf("outer")===0?ee["inner"+p]:ee.document.documentElement["client"+p]:ee.nodeType===9?(Ie=ee.documentElement,Math.max(ee.body["scroll"+p],Ie["scroll"+p],ee.body["offset"+p],Ie["offset"+p],Ie["client"+p])):Ae===void 0?y.css(ee,he,ne):y.style(ee,he,Ae,ne)},_,N?L:void 0,N)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(p,_){y.fn[_]=function(x){return this.on(_,x)}}),y.fn.extend({bind:function(p,_,x){return this.on(p,null,_,x)},unbind:function(p,_){return this.off(p,null,_)},delegate:function(p,_,x,T){return this.on(_,p,x,T)},undelegate:function(p,_,x){return arguments.length===1?this.off(p,"**"):this.off(_,p||"**",x)},hover:function(p,_){return this.on("mouseenter",p).on("mouseleave",_||p)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(p,_){y.fn[_]=function(x,T){return arguments.length>0?this.on(_,null,x,T):this.trigger(_)}});var mn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;y.proxy=function(p,_){var x,T,L;if(typeof _=="string"&&(x=p[_],_=p,p=x),!!b(p))return T=r.call(arguments,2),L=function(){return p.apply(_||this,T.concat(r.call(arguments)))},L.guid=p.guid=p.guid||y.guid++,L},y.holdReady=function(p){p?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=V,y.isFunction=b,y.isWindow=v,y.camelCase=le,y.type=S,y.now=Date.now,y.isNumeric=function(p){var _=y.type(p);return(_==="number"||_==="string")&&!isNaN(p-parseFloat(p))},y.trim=function(p){return p==null?"":(p+"").replace(mn,"$1")};var mh=e.jQuery,gh=e.$;return y.noConflict=function(p){return e.$===y&&(e.$=gh),p&&e.jQuery===y&&(e.jQuery=mh),y},typeof t>"u"&&(e.jQuery=e.$=y),y})})(ty);var dc=ty.exports;const ve=ey(dc);/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var Sc=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",kx=function(){for(var i=["Edge","Trident","Firefox"],e=0;e<i.length;e+=1)if(Sc&&navigator.userAgent.indexOf(i[e])>=0)return 1;return 0}();function Fx(i){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,i()}))}}function Ux(i){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,i()},kx))}}var zx=Sc&&window.Promise,Bx=zx?Fx:Ux;function iy(i){var e={};return i&&e.toString.call(i)==="[object Function]"}function jo(i,e){if(i.nodeType!==1)return[];var t=i.ownerDocument.defaultView,n=t.getComputedStyle(i,null);return e?n[e]:n}function hm(i){return i.nodeName==="HTML"?i:i.parentNode||i.host}function Tc(i){if(!i)return document.body;switch(i.nodeName){case"HTML":case"BODY":return i.ownerDocument.body;case"#document":return i.body}var e=jo(i),t=e.overflow,n=e.overflowX,s=e.overflowY;return/(auto|scroll|overlay)/.test(t+s+n)?i:Tc(hm(i))}function ny(i){return i&&i.referenceNode?i.referenceNode:i}var Rg=Sc&&!!(window.MSInputMethodContext&&document.documentMode),Ig=Sc&&/MSIE 10/.test(navigator.userAgent);function el(i){return i===11?Rg:i===10?Ig:Rg||Ig}function za(i){if(!i)return document.documentElement;for(var e=el(10)?document.body:null,t=i.offsetParent||null;t===e&&i.nextElementSibling;)t=(i=i.nextElementSibling).offsetParent;var n=t&&t.nodeName;return!n||n==="BODY"||n==="HTML"?i?i.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(t.nodeName)!==-1&&jo(t,"position")==="static"?za(t):t}function Hx(i){var e=i.nodeName;return e==="BODY"?!1:e==="HTML"||za(i.firstElementChild)===i}function Of(i){return i.parentNode!==null?Of(i.parentNode):i}function nd(i,e){if(!i||!i.nodeType||!e||!e.nodeType)return document.documentElement;var t=i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=t?i:e,s=t?e:i,r=document.createRange();r.setStart(n,0),r.setEnd(s,0);var o=r.commonAncestorContainer;if(i!==o&&e!==o||n.contains(s))return Hx(o)?o:za(o);var a=Of(i);return a.host?nd(a.host,e):nd(i,Of(e).host)}function Ba(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",t=e==="top"?"scrollTop":"scrollLeft",n=i.nodeName;if(n==="BODY"||n==="HTML"){var s=i.ownerDocument.documentElement,r=i.ownerDocument.scrollingElement||s;return r[t]}return i[t]}function Vx(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=Ba(e,"top"),s=Ba(e,"left"),r=t?-1:1;return i.top+=n*r,i.bottom+=n*r,i.left+=s*r,i.right+=s*r,i}function Dg(i,e){var t=e==="x"?"Left":"Top",n=t==="Left"?"Right":"Bottom";return parseFloat(i["border"+t+"Width"])+parseFloat(i["border"+n+"Width"])}function Og(i,e,t,n){return Math.max(e["offset"+i],e["scroll"+i],t["client"+i],t["offset"+i],t["scroll"+i],el(10)?parseInt(t["offset"+i])+parseInt(n["margin"+(i==="Height"?"Top":"Left")])+parseInt(n["margin"+(i==="Height"?"Bottom":"Right")]):0)}function sy(i){var e=i.body,t=i.documentElement,n=el(10)&&getComputedStyle(t);return{height:Og("Height",e,t,n),width:Og("Width",e,t,n)}}var $x=function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")},Gx=function(){function i(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),Ha=function(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i},cs=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i};function ro(i){return cs({},i,{right:i.left+i.width,bottom:i.top+i.height})}function Nf(i){var e={};try{if(el(10)){e=i.getBoundingClientRect();var t=Ba(i,"top"),n=Ba(i,"left");e.top+=t,e.left+=n,e.bottom+=t,e.right+=n}else e=i.getBoundingClientRect()}catch{}var s={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r=i.nodeName==="HTML"?sy(i.ownerDocument):{},o=r.width||i.clientWidth||s.width,a=r.height||i.clientHeight||s.height,l=i.offsetWidth-o,u=i.offsetHeight-a;if(l||u){var c=jo(i);l-=Dg(c,"x"),u-=Dg(c,"y"),s.width-=l,s.height-=u}return ro(s)}function fm(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=el(10),s=e.nodeName==="HTML",r=Nf(i),o=Nf(e),a=Tc(i),l=jo(e),u=parseFloat(l.borderTopWidth),c=parseFloat(l.borderLeftWidth);t&&s&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var d=ro({top:r.top-o.top-u,left:r.left-o.left-c,width:r.width,height:r.height});if(d.marginTop=0,d.marginLeft=0,!n&&s){var h=parseFloat(l.marginTop),f=parseFloat(l.marginLeft);d.top-=u-h,d.bottom-=u-h,d.left-=c-f,d.right-=c-f,d.marginTop=h,d.marginLeft=f}return(n&&!t?e.contains(a):e===a&&a.nodeName!=="BODY")&&(d=Vx(d,e)),d}function Wx(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=i.ownerDocument.documentElement,n=fm(i,t),s=Math.max(t.clientWidth,window.innerWidth||0),r=Math.max(t.clientHeight,window.innerHeight||0),o=e?0:Ba(t),a=e?0:Ba(t,"left"),l={top:o-n.top+n.marginTop,left:a-n.left+n.marginLeft,width:s,height:r};return ro(l)}function ry(i){var e=i.nodeName;if(e==="BODY"||e==="HTML")return!1;if(jo(i,"position")==="fixed")return!0;var t=hm(i);return t?ry(t):!1}function oy(i){if(!i||!i.parentElement||el())return document.documentElement;for(var e=i.parentElement;e&&jo(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function pm(i,e,t,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r={top:0,left:0},o=s?oy(i):nd(i,ny(e));if(n==="viewport")r=Wx(o,s);else{var a=void 0;n==="scrollParent"?(a=Tc(hm(e)),a.nodeName==="BODY"&&(a=i.ownerDocument.documentElement)):n==="window"?a=i.ownerDocument.documentElement:a=n;var l=fm(a,o,s);if(a.nodeName==="HTML"&&!ry(o)){var u=sy(i.ownerDocument),c=u.height,d=u.width;r.top+=l.top-l.marginTop,r.bottom=c+l.top,r.left+=l.left-l.marginLeft,r.right=d+l.left}else r=l}t=t||0;var h=typeof t=="number";return r.left+=h?t:t.left||0,r.top+=h?t:t.top||0,r.right-=h?t:t.right||0,r.bottom-=h?t:t.bottom||0,r}function jx(i){var e=i.width,t=i.height;return e*t}function ay(i,e,t,n,s){var r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(i.indexOf("auto")===-1)return i;var o=pm(t,n,r,s),a={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},l=Object.keys(a).map(function(h){return cs({key:h},a[h],{area:jx(a[h])})}).sort(function(h,f){return f.area-h.area}),u=l.filter(function(h){var f=h.width,m=h.height;return f>=t.clientWidth&&m>=t.clientHeight}),c=u.length>0?u[0].key:l[0].key,d=i.split("-")[1];return c+(d?"-"+d:"")}function ly(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=n?oy(e):nd(e,ny(t));return fm(t,s,n)}function cy(i){var e=i.ownerDocument.defaultView,t=e.getComputedStyle(i),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),s=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0),r={width:i.offsetWidth+s,height:i.offsetHeight+n};return r}function sd(i){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return i.replace(/left|right|bottom|top/g,function(t){return e[t]})}function uy(i,e,t){t=t.split("-")[0];var n=cy(i),s={width:n.width,height:n.height},r=["right","left"].indexOf(t)!==-1,o=r?"top":"left",a=r?"left":"top",l=r?"height":"width",u=r?"width":"height";return s[o]=e[o]+e[l]/2-n[l]/2,t===a?s[a]=e[a]-n[u]:s[a]=e[sd(a)],s}function Mc(i,e){return Array.prototype.find?i.find(e):i.filter(e)[0]}function qx(i,e,t){if(Array.prototype.findIndex)return i.findIndex(function(s){return s[e]===t});var n=Mc(i,function(s){return s[e]===t});return i.indexOf(n)}function dy(i,e,t){var n=t===void 0?i:i.slice(0,qx(i,"name",t));return n.forEach(function(s){s.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=s.function||s.fn;s.enabled&&iy(r)&&(e.offsets.popper=ro(e.offsets.popper),e.offsets.reference=ro(e.offsets.reference),e=r(e,s))}),e}function Xx(){if(!this.state.isDestroyed){var i={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};i.offsets.reference=ly(this.state,this.popper,this.reference,this.options.positionFixed),i.placement=ay(this.options.placement,i.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),i.originalPlacement=i.placement,i.positionFixed=this.options.positionFixed,i.offsets.popper=uy(this.popper,i.offsets.reference,i.placement),i.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",i=dy(this.modifiers,i),this.state.isCreated?this.options.onUpdate(i):(this.state.isCreated=!0,this.options.onCreate(i))}}function hy(i,e){return i.some(function(t){var n=t.name,s=t.enabled;return s&&n===e})}function mm(i){for(var e=[!1,"ms","Webkit","Moz","O"],t=i.charAt(0).toUpperCase()+i.slice(1),n=0;n<e.length;n++){var s=e[n],r=s?""+s+t:i;if(typeof document.body.style[r]<"u")return r}return null}function Yx(){return this.state.isDestroyed=!0,hy(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[mm("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function fy(i){var e=i.ownerDocument;return e?e.defaultView:window}function py(i,e,t,n){var s=i.nodeName==="BODY",r=s?i.ownerDocument.defaultView:i;r.addEventListener(e,t,{passive:!0}),s||py(Tc(r.parentNode),e,t,n),n.push(r)}function Kx(i,e,t,n){t.updateBound=n,fy(i).addEventListener("resize",t.updateBound,{passive:!0});var s=Tc(i);return py(s,"scroll",t.updateBound,t.scrollParents),t.scrollElement=s,t.eventsEnabled=!0,t}function Zx(){this.state.eventsEnabled||(this.state=Kx(this.reference,this.options,this.state,this.scheduleUpdate))}function Qx(i,e){return fy(i).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function Jx(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=Qx(this.reference,this.state))}function gm(i){return i!==""&&!isNaN(parseFloat(i))&&isFinite(i)}function kf(i,e){Object.keys(e).forEach(function(t){var n="";["width","height","top","right","bottom","left"].indexOf(t)!==-1&&gm(e[t])&&(n="px"),i.style[t]=e[t]+n})}function eS(i,e){Object.keys(e).forEach(function(t){var n=e[t];n!==!1?i.setAttribute(t,e[t]):i.removeAttribute(t)})}function tS(i){return kf(i.instance.popper,i.styles),eS(i.instance.popper,i.attributes),i.arrowElement&&Object.keys(i.arrowStyles).length&&kf(i.arrowElement,i.arrowStyles),i}function iS(i,e,t,n,s){var r=ly(s,e,i,t.positionFixed),o=ay(t.placement,r,e,i,t.modifiers.flip.boundariesElement,t.modifiers.flip.padding);return e.setAttribute("x-placement",o),kf(e,{position:t.positionFixed?"fixed":"absolute"}),t}function nS(i,e){var t=i.offsets,n=t.popper,s=t.reference,r=Math.round,o=Math.floor,a=function(g){return g},l=r(s.width),u=r(n.width),c=["left","right"].indexOf(i.placement)!==-1,d=i.placement.indexOf("-")!==-1,h=l%2===u%2,f=l%2===1&&u%2===1,m=e?c||d||h?r:o:a,b=e?r:a;return{left:m(f&&!d&&e?n.left-1:n.left),top:b(n.top),bottom:b(n.bottom),right:m(n.right)}}var sS=Sc&&/Firefox/i.test(navigator.userAgent);function rS(i,e){var t=e.x,n=e.y,s=i.offsets.popper,r=Mc(i.instance.modifiers,function(w){return w.name==="applyStyle"}).gpuAcceleration;r!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=r!==void 0?r:e.gpuAcceleration,a=za(i.instance.popper),l=Nf(a),u={position:s.position},c=nS(i,window.devicePixelRatio<2||!sS),d=t==="bottom"?"top":"bottom",h=n==="right"?"left":"right",f=mm("transform"),m=void 0,b=void 0;if(d==="bottom"?a.nodeName==="HTML"?b=-a.clientHeight+c.bottom:b=-l.height+c.bottom:b=c.top,h==="right"?a.nodeName==="HTML"?m=-a.clientWidth+c.right:m=-l.width+c.right:m=c.left,o&&f)u[f]="translate3d("+m+"px, "+b+"px, 0)",u[d]=0,u[h]=0,u.willChange="transform";else{var v=d==="bottom"?-1:1,g=h==="right"?-1:1;u[d]=b*v,u[h]=m*g,u.willChange=d+", "+h}var E={"x-placement":i.placement};return i.attributes=cs({},E,i.attributes),i.styles=cs({},u,i.styles),i.arrowStyles=cs({},i.offsets.arrow,i.arrowStyles),i}function my(i,e,t){var n=Mc(i,function(a){var l=a.name;return l===e}),s=!!n&&i.some(function(a){return a.name===t&&a.enabled&&a.order<n.order});if(!s){var r="`"+e+"`",o="`"+t+"`";console.warn(o+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return s}function oS(i,e){var t;if(!my(i.instance.modifiers,"arrow","keepTogether"))return i;var n=e.element;if(typeof n=="string"){if(n=i.instance.popper.querySelector(n),!n)return i}else if(!i.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),i;var s=i.placement.split("-")[0],r=i.offsets,o=r.popper,a=r.reference,l=["left","right"].indexOf(s)!==-1,u=l?"height":"width",c=l?"Top":"Left",d=c.toLowerCase(),h=l?"left":"top",f=l?"bottom":"right",m=cy(n)[u];a[f]-m<o[d]&&(i.offsets.popper[d]-=o[d]-(a[f]-m)),a[d]+m>o[f]&&(i.offsets.popper[d]+=a[d]+m-o[f]),i.offsets.popper=ro(i.offsets.popper);var b=a[d]+a[u]/2-m/2,v=jo(i.instance.popper),g=parseFloat(v["margin"+c]),E=parseFloat(v["border"+c+"Width"]),w=b-i.offsets.popper[d]-g-E;return w=Math.max(Math.min(o[u]-m,w),0),i.arrowElement=n,i.offsets.arrow=(t={},Ha(t,d,Math.round(w)),Ha(t,h,""),t),i}function aS(i){return i==="end"?"start":i==="start"?"end":i}var gy=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],wh=gy.slice(3);function Ng(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=wh.indexOf(i),n=wh.slice(t+1).concat(wh.slice(0,t));return e?n.reverse():n}var xh={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function lS(i,e){if(hy(i.instance.modifiers,"inner")||i.flipped&&i.placement===i.originalPlacement)return i;var t=pm(i.instance.popper,i.instance.reference,e.padding,e.boundariesElement,i.positionFixed),n=i.placement.split("-")[0],s=sd(n),r=i.placement.split("-")[1]||"",o=[];switch(e.behavior){case xh.FLIP:o=[n,s];break;case xh.CLOCKWISE:o=Ng(n);break;case xh.COUNTERCLOCKWISE:o=Ng(n,!0);break;default:o=e.behavior}return o.forEach(function(a,l){if(n!==a||o.length===l+1)return i;n=i.placement.split("-")[0],s=sd(n);var u=i.offsets.popper,c=i.offsets.reference,d=Math.floor,h=n==="left"&&d(u.right)>d(c.left)||n==="right"&&d(u.left)<d(c.right)||n==="top"&&d(u.bottom)>d(c.top)||n==="bottom"&&d(u.top)<d(c.bottom),f=d(u.left)<d(t.left),m=d(u.right)>d(t.right),b=d(u.top)<d(t.top),v=d(u.bottom)>d(t.bottom),g=n==="left"&&f||n==="right"&&m||n==="top"&&b||n==="bottom"&&v,E=["top","bottom"].indexOf(n)!==-1,w=!!e.flipVariations&&(E&&r==="start"&&f||E&&r==="end"&&m||!E&&r==="start"&&b||!E&&r==="end"&&v),S=!!e.flipVariationsByContent&&(E&&r==="start"&&m||E&&r==="end"&&f||!E&&r==="start"&&v||!E&&r==="end"&&b),I=w||S;(h||g||I)&&(i.flipped=!0,(h||g)&&(n=o[l+1]),I&&(r=aS(r)),i.placement=n+(r?"-"+r:""),i.offsets.popper=cs({},i.offsets.popper,uy(i.instance.popper,i.offsets.reference,i.placement)),i=dy(i.instance.modifiers,i,"flip"))}),i}function cS(i){var e=i.offsets,t=e.popper,n=e.reference,s=i.placement.split("-")[0],r=Math.floor,o=["top","bottom"].indexOf(s)!==-1,a=o?"right":"bottom",l=o?"left":"top",u=o?"width":"height";return t[a]<r(n[l])&&(i.offsets.popper[l]=r(n[l])-t[u]),t[l]>r(n[a])&&(i.offsets.popper[l]=r(n[a])),i}function uS(i,e,t,n){var s=i.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+s[1],o=s[2];if(!r)return i;if(o.indexOf("%")===0){var a=void 0;switch(o){case"%p":a=t;break;case"%":case"%r":default:a=n}var l=ro(a);return l[e]/100*r}else if(o==="vh"||o==="vw"){var u=void 0;return o==="vh"?u=Math.max(document.documentElement.clientHeight,window.innerHeight||0):u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),u/100*r}else return r}function dS(i,e,t,n){var s=[0,0],r=["right","left"].indexOf(n)!==-1,o=i.split(/(\+|\-)/).map(function(c){return c.trim()}),a=o.indexOf(Mc(o,function(c){return c.search(/,|\s/)!==-1}));o[a]&&o[a].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=a!==-1?[o.slice(0,a).concat([o[a].split(l)[0]]),[o[a].split(l)[1]].concat(o.slice(a+1))]:[o];return u=u.map(function(c,d){var h=(d===1?!r:r)?"height":"width",f=!1;return c.reduce(function(m,b){return m[m.length-1]===""&&["+","-"].indexOf(b)!==-1?(m[m.length-1]=b,f=!0,m):f?(m[m.length-1]+=b,f=!1,m):m.concat(b)},[]).map(function(m){return uS(m,h,e,t)})}),u.forEach(function(c,d){c.forEach(function(h,f){gm(h)&&(s[d]+=h*(c[f-1]==="-"?-1:1))})}),s}function hS(i,e){var t=e.offset,n=i.placement,s=i.offsets,r=s.popper,o=s.reference,a=n.split("-")[0],l=void 0;return gm(+t)?l=[+t,0]:l=dS(t,r,o,a),a==="left"?(r.top+=l[0],r.left-=l[1]):a==="right"?(r.top+=l[0],r.left+=l[1]):a==="top"?(r.left+=l[0],r.top-=l[1]):a==="bottom"&&(r.left+=l[0],r.top+=l[1]),i.popper=r,i}function fS(i,e){var t=e.boundariesElement||za(i.instance.popper);i.instance.reference===t&&(t=za(t));var n=mm("transform"),s=i.instance.popper.style,r=s.top,o=s.left,a=s[n];s.top="",s.left="",s[n]="";var l=pm(i.instance.popper,i.instance.reference,e.padding,t,i.positionFixed);s.top=r,s.left=o,s[n]=a,e.boundaries=l;var u=e.priority,c=i.offsets.popper,d={primary:function(f){var m=c[f];return c[f]<l[f]&&!e.escapeWithReference&&(m=Math.max(c[f],l[f])),Ha({},f,m)},secondary:function(f){var m=f==="right"?"left":"top",b=c[m];return c[f]>l[f]&&!e.escapeWithReference&&(b=Math.min(c[m],l[f]-(f==="right"?c.width:c.height))),Ha({},m,b)}};return u.forEach(function(h){var f=["left","top"].indexOf(h)!==-1?"primary":"secondary";c=cs({},c,d[f](h))}),i.offsets.popper=c,i}function pS(i){var e=i.placement,t=e.split("-")[0],n=e.split("-")[1];if(n){var s=i.offsets,r=s.reference,o=s.popper,a=["bottom","top"].indexOf(t)!==-1,l=a?"left":"top",u=a?"width":"height",c={start:Ha({},l,r[l]),end:Ha({},l,r[l]+r[u]-o[u])};i.offsets.popper=cs({},o,c[n])}return i}function mS(i){if(!my(i.instance.modifiers,"hide","preventOverflow"))return i;var e=i.offsets.reference,t=Mc(i.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(e.bottom<t.top||e.left>t.right||e.top>t.bottom||e.right<t.left){if(i.hide===!0)return i;i.hide=!0,i.attributes["x-out-of-boundaries"]=""}else{if(i.hide===!1)return i;i.hide=!1,i.attributes["x-out-of-boundaries"]=!1}return i}function gS(i){var e=i.placement,t=e.split("-")[0],n=i.offsets,s=n.popper,r=n.reference,o=["left","right"].indexOf(t)!==-1,a=["top","left"].indexOf(t)===-1;return s[o?"left":"top"]=r[t]-(a?s[o?"width":"height"]:0),i.placement=sd(e),i.offsets.popper=ro(s),i}var vS={shift:{order:100,enabled:!0,fn:pS},offset:{order:200,enabled:!0,fn:hS,offset:0},preventOverflow:{order:300,enabled:!0,fn:fS,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:cS},arrow:{order:500,enabled:!0,fn:oS,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:lS,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:gS},hide:{order:800,enabled:!0,fn:mS},computeStyle:{order:850,enabled:!0,fn:rS,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:tS,onLoad:iS,gpuAcceleration:void 0}},yS={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:vS},Dd=function(){function i(e,t){var n=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$x(this,i),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=Bx(this.update.bind(this)),this.options=cs({},i.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(cs({},i.Defaults.modifiers,s.modifiers)).forEach(function(o){n.options.modifiers[o]=cs({},i.Defaults.modifiers[o]||{},s.modifiers?s.modifiers[o]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(o){return cs({name:o},n.options.modifiers[o])}).sort(function(o,a){return o.order-a.order}),this.modifiers.forEach(function(o){o.enabled&&iy(o.onLoad)&&o.onLoad(n.reference,n.popper,n.options,o,n.state)}),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return Gx(i,[{key:"update",value:function(){return Xx.call(this)}},{key:"destroy",value:function(){return Yx.call(this)}},{key:"enableEventListeners",value:function(){return Zx.call(this)}},{key:"disableEventListeners",value:function(){return Jx.call(this)}}]),i}();Dd.Utils=(typeof window<"u"?window:global).PopperUtils;Dd.placements=gy;Dd.Defaults=yS;const bS=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),_S=Nx(bS);/*!
  * Bootstrap v4.6.2 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(i,e){(function(t,n){n(e,dc,_S)})(J0,function(t,n,s){function r(_e){return _e&&typeof _e=="object"&&"default"in _e?_e:{default:_e}}var o=r(n),a=r(s);function l(_e,re){for(var te=0;te<re.length;te++){var M=re[te];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_e,M.key,M)}}function u(_e,re,te){return te&&l(_e,te),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function c(){return c=Object.assign?Object.assign.bind():function(_e){for(var re=1;re<arguments.length;re++){var te=arguments[re];for(var M in te)Object.prototype.hasOwnProperty.call(te,M)&&(_e[M]=te[M])}return _e},c.apply(this,arguments)}function d(_e,re){_e.prototype=Object.create(re.prototype),_e.prototype.constructor=_e,h(_e,re)}function h(_e,re){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,k){return M.__proto__=k,M},h(_e,re)}var f="transitionend",m=1e6,b=1e3;function v(_e){return _e===null||typeof _e>"u"?""+_e:{}.toString.call(_e).match(/\s([a-z]+)/i)[1].toLowerCase()}function g(){return{bindType:f,delegateType:f,handle:function(re){if(o.default(re.target).is(this))return re.handleObj.handler.apply(this,arguments)}}}function E(_e){var re=this,te=!1;return o.default(this).one(S.TRANSITION_END,function(){te=!0}),setTimeout(function(){te||S.triggerTransitionEnd(re)},_e),this}function w(){o.default.fn.emulateTransitionEnd=E,o.default.event.special[S.TRANSITION_END]=g()}var S={TRANSITION_END:"bsTransitionEnd",getUID:function(re){do re+=~~(Math.random()*m);while(document.getElementById(re));return re},getSelectorFromElement:function(re){var te=re.getAttribute("data-target");if(!te||te==="#"){var M=re.getAttribute("href");te=M&&M!=="#"?M.trim():""}try{return document.querySelector(te)?te:null}catch{return null}},getTransitionDurationFromElement:function(re){if(!re)return 0;var te=o.default(re).css("transition-duration"),M=o.default(re).css("transition-delay"),k=parseFloat(te),Z=parseFloat(M);return!k&&!Z?0:(te=te.split(",")[0],M=M.split(",")[0],(parseFloat(te)+parseFloat(M))*b)},reflow:function(re){return re.offsetHeight},triggerTransitionEnd:function(re){o.default(re).trigger(f)},supportsTransitionEnd:function(){return!!f},isElement:function(re){return(re[0]||re).nodeType},typeCheckConfig:function(re,te,M){for(var k in M)if(Object.prototype.hasOwnProperty.call(M,k)){var Z=M[k],Me=te[k],Le=Me&&S.isElement(Me)?"element":v(Me);if(!new RegExp(Z).test(Le))throw new Error(re.toUpperCase()+": "+('Option "'+k+'" provided type "'+Le+'" ')+('but expected type "'+Z+'".'))}},findShadowRoot:function(re){if(!document.documentElement.attachShadow)return null;if(typeof re.getRootNode=="function"){var te=re.getRootNode();return te instanceof ShadowRoot?te:null}return re instanceof ShadowRoot?re:re.parentNode?S.findShadowRoot(re.parentNode):null},jQueryDetection:function(){if(typeof o.default>"u")throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var re=o.default.fn.jquery.split(" ")[0].split("."),te=1,M=2,k=9,Z=1,Me=4;if(re[0]<M&&re[1]<k||re[0]===te&&re[1]===k&&re[2]<Z||re[0]>=Me)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};S.jQueryDetection(),w();var I="alert",D="4.6.2",y="bs.alert",B="."+y,V=".data-api",C=o.default.fn[I],A="alert",H="fade",P="show",F="close"+B,Y="closed"+B,Q="click"+B+V,G='[data-dismiss="alert"]',z=function(){function _e(te){this._element=te}var re=_e.prototype;return re.close=function(M){var k=this._element;M&&(k=this._getRootElement(M));var Z=this._triggerCloseEvent(k);Z.isDefaultPrevented()||this._removeElement(k)},re.dispose=function(){o.default.removeData(this._element,y),this._element=null},re._getRootElement=function(M){var k=S.getSelectorFromElement(M),Z=!1;return k&&(Z=document.querySelector(k)),Z||(Z=o.default(M).closest("."+A)[0]),Z},re._triggerCloseEvent=function(M){var k=o.default.Event(F);return o.default(M).trigger(k),k},re._removeElement=function(M){var k=this;if(o.default(M).removeClass(P),!o.default(M).hasClass(H)){this._destroyElement(M);return}var Z=S.getTransitionDurationFromElement(M);o.default(M).one(S.TRANSITION_END,function(Me){return k._destroyElement(M,Me)}).emulateTransitionEnd(Z)},re._destroyElement=function(M){o.default(M).detach().trigger(Y).remove()},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this),Z=k.data(y);Z||(Z=new _e(this),k.data(y,Z)),M==="close"&&Z[M](this)})},_e._handleDismiss=function(M){return function(k){k&&k.preventDefault(),M.close(this)}},u(_e,null,[{key:"VERSION",get:function(){return D}}]),_e}();o.default(document).on(Q,G,z._handleDismiss(new z)),o.default.fn[I]=z._jQueryInterface,o.default.fn[I].Constructor=z,o.default.fn[I].noConflict=function(){return o.default.fn[I]=C,z._jQueryInterface};var ue="button",Ee="4.6.2",J="bs.button",W="."+J,oe=".data-api",ie=o.default.fn[ue],j="active",me="btn",ge="focus",Ne="click"+W+oe,Fe="focus"+W+oe+" "+("blur"+W+oe),He="load"+W+oe,ct='[data-toggle^="button"]',at='[data-toggle="buttons"]',se='[data-toggle="button"]',ut='[data-toggle="buttons"] .btn',pt='input:not([type="hidden"])',yt=".active",qe=".btn",dt=function(){function _e(te){this._element=te,this.shouldAvoidTriggerChange=!1}var re=_e.prototype;return re.toggle=function(){var M=!0,k=!0,Z=o.default(this._element).closest(at)[0];if(Z){var Me=this._element.querySelector(pt);if(Me){if(Me.type==="radio")if(Me.checked&&this._element.classList.contains(j))M=!1;else{var Le=Z.querySelector(yt);Le&&o.default(Le).removeClass(j)}M&&((Me.type==="checkbox"||Me.type==="radio")&&(Me.checked=!this._element.classList.contains(j)),this.shouldAvoidTriggerChange||o.default(Me).trigger("change")),Me.focus(),k=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(k&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(j)),M&&o.default(this._element).toggleClass(j))},re.dispose=function(){o.default.removeData(this._element,J),this._element=null},_e._jQueryInterface=function(M,k){return this.each(function(){var Z=o.default(this),Me=Z.data(J);Me||(Me=new _e(this),Z.data(J,Me)),Me.shouldAvoidTriggerChange=k,M==="toggle"&&Me[M]()})},u(_e,null,[{key:"VERSION",get:function(){return Ee}}]),_e}();o.default(document).on(Ne,ct,function(_e){var re=_e.target,te=re;if(o.default(re).hasClass(me)||(re=o.default(re).closest(qe)[0]),!re||re.hasAttribute("disabled")||re.classList.contains("disabled"))_e.preventDefault();else{var M=re.querySelector(pt);if(M&&(M.hasAttribute("disabled")||M.classList.contains("disabled"))){_e.preventDefault();return}(te.tagName==="INPUT"||re.tagName!=="LABEL")&&dt._jQueryInterface.call(o.default(re),"toggle",te.tagName==="INPUT")}}).on(Fe,ct,function(_e){var re=o.default(_e.target).closest(qe)[0];o.default(re).toggleClass(ge,/^focus(in)?$/.test(_e.type))}),o.default(window).on(He,function(){for(var _e=[].slice.call(document.querySelectorAll(ut)),re=0,te=_e.length;re<te;re++){var M=_e[re],k=M.querySelector(pt);k.checked||k.hasAttribute("checked")?M.classList.add(j):M.classList.remove(j)}_e=[].slice.call(document.querySelectorAll(se));for(var Z=0,Me=_e.length;Z<Me;Z++){var Le=_e[Z];Le.getAttribute("aria-pressed")==="true"?Le.classList.add(j):Le.classList.remove(j)}}),o.default.fn[ue]=dt._jQueryInterface,o.default.fn[ue].Constructor=dt,o.default.fn[ue].noConflict=function(){return o.default.fn[ue]=ie,dt._jQueryInterface};var We="carousel",q="4.6.2",O="bs.carousel",le="."+O,Ce=".data-api",Re=o.default.fn[We],pe=37,Xe=39,$e=500,it=40,Ot="carousel",ke="active",rt="slide",_t="carousel-item-right",mt="carousel-item-left",Ye="carousel-item-next",wt="carousel-item-prev",St="pointer-event",kt="next",ce="prev",Ge="left",Pe="right",Oe="slide"+le,je="slid"+le,et="keydown"+le,Ut="mouseenter"+le,jt="mouseleave"+le,Qt="touchstart"+le,Bt="touchmove"+le,Si="touchend"+le,Hi="pointerdown"+le,Wn="pointerup"+le,cn="dragstart"+le,qi="load"+le+Ce,jn="click"+le+Ce,er=".active",tr=".active.carousel-item",Rr=".carousel-item",Xo=".carousel-item img",ir=".carousel-item-next, .carousel-item-prev",Yo=".carousel-indicators",Ko="[data-slide], [data-slide-to]",Zo='[data-ride="carousel"]',mo={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Ps={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},U={TOUCH:"touch",PEN:"pen"},de=function(){function _e(te,M){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(M),this._element=te,this._indicatorsElement=this._element.querySelector(Yo),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=!!(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var re=_e.prototype;return re.next=function(){this._isSliding||this._slide(kt)},re.nextWhenVisible=function(){var M=o.default(this._element);!document.hidden&&M.is(":visible")&&M.css("visibility")!=="hidden"&&this.next()},re.prev=function(){this._isSliding||this._slide(ce)},re.pause=function(M){M||(this._isPaused=!0),this._element.querySelector(ir)&&(S.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},re.cycle=function(M){M||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},re.to=function(M){var k=this;this._activeElement=this._element.querySelector(tr);var Z=this._getItemIndex(this._activeElement);if(!(M>this._items.length-1||M<0)){if(this._isSliding){o.default(this._element).one(je,function(){return k.to(M)});return}if(Z===M){this.pause(),this.cycle();return}var Me=M>Z?kt:ce;this._slide(Me,this._items[M])}},re.dispose=function(){o.default(this._element).off(le),o.default.removeData(this._element,O),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},re._getConfig=function(M){return M=c({},mo,M),S.typeCheckConfig(We,M,Ps),M},re._handleSwipe=function(){var M=Math.abs(this.touchDeltaX);if(!(M<=it)){var k=M/this.touchDeltaX;this.touchDeltaX=0,k>0&&this.prev(),k<0&&this.next()}},re._addEventListeners=function(){var M=this;this._config.keyboard&&o.default(this._element).on(et,function(k){return M._keydown(k)}),this._config.pause==="hover"&&o.default(this._element).on(Ut,function(k){return M.pause(k)}).on(jt,function(k){return M.cycle(k)}),this._config.touch&&this._addTouchEventListeners()},re._addTouchEventListeners=function(){var M=this;if(this._touchSupported){var k=function(ze){M._pointerEvent&&U[ze.originalEvent.pointerType.toUpperCase()]?M.touchStartX=ze.originalEvent.clientX:M._pointerEvent||(M.touchStartX=ze.originalEvent.touches[0].clientX)},Z=function(ze){M.touchDeltaX=ze.originalEvent.touches&&ze.originalEvent.touches.length>1?0:ze.originalEvent.touches[0].clientX-M.touchStartX},Me=function(ze){M._pointerEvent&&U[ze.originalEvent.pointerType.toUpperCase()]&&(M.touchDeltaX=ze.originalEvent.clientX-M.touchStartX),M._handleSwipe(),M._config.pause==="hover"&&(M.pause(),M.touchTimeout&&clearTimeout(M.touchTimeout),M.touchTimeout=setTimeout(function(Ct){return M.cycle(Ct)},$e+M._config.interval))};o.default(this._element.querySelectorAll(Xo)).on(cn,function(Le){return Le.preventDefault()}),this._pointerEvent?(o.default(this._element).on(Hi,function(Le){return k(Le)}),o.default(this._element).on(Wn,function(Le){return Me(Le)}),this._element.classList.add(St)):(o.default(this._element).on(Qt,function(Le){return k(Le)}),o.default(this._element).on(Bt,function(Le){return Z(Le)}),o.default(this._element).on(Si,function(Le){return Me(Le)}))}},re._keydown=function(M){if(!/input|textarea/i.test(M.target.tagName))switch(M.which){case pe:M.preventDefault(),this.prev();break;case Xe:M.preventDefault(),this.next();break}},re._getItemIndex=function(M){return this._items=M&&M.parentNode?[].slice.call(M.parentNode.querySelectorAll(Rr)):[],this._items.indexOf(M)},re._getItemByDirection=function(M,k){var Z=M===kt,Me=M===ce,Le=this._getItemIndex(k),ze=this._items.length-1,Ct=Me&&Le===0||Z&&Le===ze;if(Ct&&!this._config.wrap)return k;var ii=M===ce?-1:1,ri=(Le+ii)%this._items.length;return ri===-1?this._items[this._items.length-1]:this._items[ri]},re._triggerSlideEvent=function(M,k){var Z=this._getItemIndex(M),Me=this._getItemIndex(this._element.querySelector(tr)),Le=o.default.Event(Oe,{relatedTarget:M,direction:k,from:Me,to:Z});return o.default(this._element).trigger(Le),Le},re._setActiveIndicatorElement=function(M){if(this._indicatorsElement){var k=[].slice.call(this._indicatorsElement.querySelectorAll(er));o.default(k).removeClass(ke);var Z=this._indicatorsElement.children[this._getItemIndex(M)];Z&&o.default(Z).addClass(ke)}},re._updateInterval=function(){var M=this._activeElement||this._element.querySelector(tr);if(M){var k=parseInt(M.getAttribute("data-interval"),10);k?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=k):this._config.interval=this._config.defaultInterval||this._config.interval}},re._slide=function(M,k){var Z=this,Me=this._element.querySelector(tr),Le=this._getItemIndex(Me),ze=k||Me&&this._getItemByDirection(M,Me),Ct=this._getItemIndex(ze),ii=!!this._interval,ri,Yi,Ns;if(M===kt?(ri=mt,Yi=Ye,Ns=Ge):(ri=_t,Yi=wt,Ns=Pe),ze&&o.default(ze).hasClass(ke)){this._isSliding=!1;return}var ys=this._triggerSlideEvent(ze,Ns);if(!ys.isDefaultPrevented()&&!(!Me||!ze)){this._isSliding=!0,ii&&this.pause(),this._setActiveIndicatorElement(ze),this._activeElement=ze;var sa=o.default.Event(je,{relatedTarget:ze,direction:Ns,from:Le,to:Ct});if(o.default(this._element).hasClass(rt)){o.default(ze).addClass(Yi),S.reflow(ze),o.default(Me).addClass(ri),o.default(ze).addClass(ri);var Eh=S.getTransitionDurationFromElement(Me);o.default(Me).one(S.TRANSITION_END,function(){o.default(ze).removeClass(ri+" "+Yi).addClass(ke),o.default(Me).removeClass(ke+" "+Yi+" "+ri),Z._isSliding=!1,setTimeout(function(){return o.default(Z._element).trigger(sa)},0)}).emulateTransitionEnd(Eh)}else o.default(Me).removeClass(ke),o.default(ze).addClass(ke),this._isSliding=!1,o.default(this._element).trigger(sa);ii&&this.cycle()}},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this).data(O),Z=c({},mo,o.default(this).data());typeof M=="object"&&(Z=c({},Z,M));var Me=typeof M=="string"?M:Z.slide;if(k||(k=new _e(this,Z),o.default(this).data(O,k)),typeof M=="number")k.to(M);else if(typeof Me=="string"){if(typeof k[Me]>"u")throw new TypeError('No method named "'+Me+'"');k[Me]()}else Z.interval&&Z.ride&&(k.pause(),k.cycle())})},_e._dataApiClickHandler=function(M){var k=S.getSelectorFromElement(this);if(k){var Z=o.default(k)[0];if(!(!Z||!o.default(Z).hasClass(Ot))){var Me=c({},o.default(Z).data(),o.default(this).data()),Le=this.getAttribute("data-slide-to");Le&&(Me.interval=!1),_e._jQueryInterface.call(o.default(Z),Me),Le&&o.default(Z).data(O).to(Le),M.preventDefault()}}},u(_e,null,[{key:"VERSION",get:function(){return q}},{key:"Default",get:function(){return mo}}]),_e}();o.default(document).on(jn,Ko,de._dataApiClickHandler),o.default(window).on(qi,function(){for(var _e=[].slice.call(document.querySelectorAll(Zo)),re=0,te=_e.length;re<te;re++){var M=o.default(_e[re]);de._jQueryInterface.call(M,M.data())}}),o.default.fn[We]=de._jQueryInterface,o.default.fn[We].Constructor=de,o.default.fn[We].noConflict=function(){return o.default.fn[We]=Re,de._jQueryInterface};var be="collapse",Se="4.6.2",fe="bs.collapse",Be="."+fe,Ke=".data-api",lt=o.default.fn[be],ot="show",Et="collapse",xt="collapsing",ht="collapsed",Xt="width",di="height",vi="show"+Be,Xi="shown"+Be,Kt="hide"+Be,gt="hidden"+Be,Pi="click"+Be+Ke,It=".show, .collapsing",Ii='[data-toggle="collapse"]',pn={toggle:!0,parent:""},nn={toggle:"boolean",parent:"(string|element)"},ps=function(){function _e(te,M){this._isTransitioning=!1,this._element=te,this._config=this._getConfig(M),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+te.id+'"],'+('[data-toggle="collapse"][data-target="#'+te.id+'"]')));for(var k=[].slice.call(document.querySelectorAll(Ii)),Z=0,Me=k.length;Z<Me;Z++){var Le=k[Z],ze=S.getSelectorFromElement(Le),Ct=[].slice.call(document.querySelectorAll(ze)).filter(function(ii){return ii===te});ze!==null&&Ct.length>0&&(this._selector=ze,this._triggerArray.push(Le))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var re=_e.prototype;return re.toggle=function(){o.default(this._element).hasClass(ot)?this.hide():this.show()},re.show=function(){var M=this;if(!(this._isTransitioning||o.default(this._element).hasClass(ot))){var k,Z;if(this._parent&&(k=[].slice.call(this._parent.querySelectorAll(It)).filter(function(Yi){return typeof M._config.parent=="string"?Yi.getAttribute("data-parent")===M._config.parent:Yi.classList.contains(Et)}),k.length===0&&(k=null)),!(k&&(Z=o.default(k).not(this._selector).data(fe),Z&&Z._isTransitioning))){var Me=o.default.Event(vi);if(o.default(this._element).trigger(Me),!Me.isDefaultPrevented()){k&&(_e._jQueryInterface.call(o.default(k).not(this._selector),"hide"),Z||o.default(k).data(fe,null));var Le=this._getDimension();o.default(this._element).removeClass(Et).addClass(xt),this._element.style[Le]=0,this._triggerArray.length&&o.default(this._triggerArray).removeClass(ht).attr("aria-expanded",!0),this.setTransitioning(!0);var ze=function(){o.default(M._element).removeClass(xt).addClass(Et+" "+ot),M._element.style[Le]="",M.setTransitioning(!1),o.default(M._element).trigger(Xi)},Ct=Le[0].toUpperCase()+Le.slice(1),ii="scroll"+Ct,ri=S.getTransitionDurationFromElement(this._element);o.default(this._element).one(S.TRANSITION_END,ze).emulateTransitionEnd(ri),this._element.style[Le]=this._element[ii]+"px"}}}},re.hide=function(){var M=this;if(!(this._isTransitioning||!o.default(this._element).hasClass(ot))){var k=o.default.Event(Kt);if(o.default(this._element).trigger(k),!k.isDefaultPrevented()){var Z=this._getDimension();this._element.style[Z]=this._element.getBoundingClientRect()[Z]+"px",S.reflow(this._element),o.default(this._element).addClass(xt).removeClass(Et+" "+ot);var Me=this._triggerArray.length;if(Me>0)for(var Le=0;Le<Me;Le++){var ze=this._triggerArray[Le],Ct=S.getSelectorFromElement(ze);if(Ct!==null){var ii=o.default([].slice.call(document.querySelectorAll(Ct)));ii.hasClass(ot)||o.default(ze).addClass(ht).attr("aria-expanded",!1)}}this.setTransitioning(!0);var ri=function(){M.setTransitioning(!1),o.default(M._element).removeClass(xt).addClass(Et).trigger(gt)};this._element.style[Z]="";var Yi=S.getTransitionDurationFromElement(this._element);o.default(this._element).one(S.TRANSITION_END,ri).emulateTransitionEnd(Yi)}}},re.setTransitioning=function(M){this._isTransitioning=M},re.dispose=function(){o.default.removeData(this._element,fe),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},re._getConfig=function(M){return M=c({},pn,M),M.toggle=!!M.toggle,S.typeCheckConfig(be,M,nn),M},re._getDimension=function(){var M=o.default(this._element).hasClass(Xt);return M?Xt:di},re._getParent=function(){var M=this,k;S.isElement(this._config.parent)?(k=this._config.parent,typeof this._config.parent.jquery<"u"&&(k=this._config.parent[0])):k=document.querySelector(this._config.parent);var Z='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',Me=[].slice.call(k.querySelectorAll(Z));return o.default(Me).each(function(Le,ze){M._addAriaAndCollapsedClass(_e._getTargetFromElement(ze),[ze])}),k},re._addAriaAndCollapsedClass=function(M,k){var Z=o.default(M).hasClass(ot);k.length&&o.default(k).toggleClass(ht,!Z).attr("aria-expanded",Z)},_e._getTargetFromElement=function(M){var k=S.getSelectorFromElement(M);return k?document.querySelector(k):null},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this),Z=k.data(fe),Me=c({},pn,k.data(),typeof M=="object"&&M?M:{});if(!Z&&Me.toggle&&typeof M=="string"&&/show|hide/.test(M)&&(Me.toggle=!1),Z||(Z=new _e(this,Me),k.data(fe,Z)),typeof M=="string"){if(typeof Z[M]>"u")throw new TypeError('No method named "'+M+'"');Z[M]()}})},u(_e,null,[{key:"VERSION",get:function(){return Se}},{key:"Default",get:function(){return pn}}]),_e}();o.default(document).on(Pi,Ii,function(_e){_e.currentTarget.tagName==="A"&&_e.preventDefault();var re=o.default(this),te=S.getSelectorFromElement(this),M=[].slice.call(document.querySelectorAll(te));o.default(M).each(function(){var k=o.default(this),Z=k.data(fe),Me=Z?"toggle":re.data();ps._jQueryInterface.call(k,Me)})}),o.default.fn[be]=ps._jQueryInterface,o.default.fn[be].Constructor=ps,o.default.fn[be].noConflict=function(){return o.default.fn[be]=lt,ps._jQueryInterface};var ti="dropdown",Rn="4.6.2",wn="bs.dropdown",bi="."+wn,nr=".data-api",ll=o.default.fn[ti],Fi=27,cl=32,Ir=9,ul=38,dl=40,sr=3,rr=new RegExp(ul+"|"+dl+"|"+Fi),Dr="disabled",In="show",go="dropup",Vc="dropright",hl="dropleft",fl="dropdown-menu-right",$c="position-static",Gc="hide"+bi,pl="hidden"+bi,lh="show"+bi,ch="shown"+bi,ml="click"+bi,gl="click"+bi+nr,Wc="keydown"+bi+nr,uh="keyup"+bi+nr,Qo='[data-toggle="dropdown"]',dh=".dropdown form",vl=".dropdown-menu",hh=".navbar-nav",jc=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",yl="top-start",qc="top-end",bl="bottom-start",Xc="bottom-end",Yc="right-start",_l="left-start",fh={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},ph={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},Ls=function(){function _e(te,M){this._element=te,this._popper=null,this._config=this._getConfig(M),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var re=_e.prototype;return re.toggle=function(){if(!(this._element.disabled||o.default(this._element).hasClass(Dr))){var M=o.default(this._menu).hasClass(In);_e._clearMenus(),!M&&this.show(!0)}},re.show=function(M){if(M===void 0&&(M=!1),!(this._element.disabled||o.default(this._element).hasClass(Dr)||o.default(this._menu).hasClass(In))){var k={relatedTarget:this._element},Z=o.default.Event(lh,k),Me=_e._getParentFromElement(this._element);if(o.default(Me).trigger(Z),!Z.isDefaultPrevented()){if(!this._inNavbar&&M){if(typeof a.default>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var Le=this._element;this._config.reference==="parent"?Le=Me:S.isElement(this._config.reference)&&(Le=this._config.reference,typeof this._config.reference.jquery<"u"&&(Le=this._config.reference[0])),this._config.boundary!=="scrollParent"&&o.default(Me).addClass($c),this._popper=new a.default(Le,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&o.default(Me).closest(hh).length===0&&o.default(document.body).children().on("mouseover",null,o.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),o.default(this._menu).toggleClass(In),o.default(Me).toggleClass(In).trigger(o.default.Event(ch,k))}}},re.hide=function(){if(!(this._element.disabled||o.default(this._element).hasClass(Dr)||!o.default(this._menu).hasClass(In))){var M={relatedTarget:this._element},k=o.default.Event(Gc,M),Z=_e._getParentFromElement(this._element);o.default(Z).trigger(k),!k.isDefaultPrevented()&&(this._popper&&this._popper.destroy(),o.default(this._menu).toggleClass(In),o.default(Z).toggleClass(In).trigger(o.default.Event(pl,M)))}},re.dispose=function(){o.default.removeData(this._element,wn),o.default(this._element).off(bi),this._element=null,this._menu=null,this._popper!==null&&(this._popper.destroy(),this._popper=null)},re.update=function(){this._inNavbar=this._detectNavbar(),this._popper!==null&&this._popper.scheduleUpdate()},re._addEventListeners=function(){var M=this;o.default(this._element).on(ml,function(k){k.preventDefault(),k.stopPropagation(),M.toggle()})},re._getConfig=function(M){return M=c({},this.constructor.Default,o.default(this._element).data(),M),S.typeCheckConfig(ti,M,this.constructor.DefaultType),M},re._getMenuElement=function(){if(!this._menu){var M=_e._getParentFromElement(this._element);M&&(this._menu=M.querySelector(vl))}return this._menu},re._getPlacement=function(){var M=o.default(this._element.parentNode),k=bl;return M.hasClass(go)?k=o.default(this._menu).hasClass(fl)?qc:yl:M.hasClass(Vc)?k=Yc:M.hasClass(hl)?k=_l:o.default(this._menu).hasClass(fl)&&(k=Xc),k},re._detectNavbar=function(){return o.default(this._element).closest(".navbar").length>0},re._getOffset=function(){var M=this,k={};return typeof this._config.offset=="function"?k.fn=function(Z){return Z.offsets=c({},Z.offsets,M._config.offset(Z.offsets,M._element)),Z}:k.offset=this._config.offset,k},re._getPopperConfig=function(){var M={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return this._config.display==="static"&&(M.modifiers.applyStyle={enabled:!1}),c({},M,this._config.popperConfig)},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this).data(wn),Z=typeof M=="object"?M:null;if(k||(k=new _e(this,Z),o.default(this).data(wn,k)),typeof M=="string"){if(typeof k[M]>"u")throw new TypeError('No method named "'+M+'"');k[M]()}})},_e._clearMenus=function(M){if(!(M&&(M.which===sr||M.type==="keyup"&&M.which!==Ir)))for(var k=[].slice.call(document.querySelectorAll(Qo)),Z=0,Me=k.length;Z<Me;Z++){var Le=_e._getParentFromElement(k[Z]),ze=o.default(k[Z]).data(wn),Ct={relatedTarget:k[Z]};if(M&&M.type==="click"&&(Ct.clickEvent=M),!!ze){var ii=ze._menu;if(o.default(Le).hasClass(In)&&!(M&&(M.type==="click"&&/input|textarea/i.test(M.target.tagName)||M.type==="keyup"&&M.which===Ir)&&o.default.contains(Le,M.target))){var ri=o.default.Event(Gc,Ct);o.default(Le).trigger(ri),!ri.isDefaultPrevented()&&("ontouchstart"in document.documentElement&&o.default(document.body).children().off("mouseover",null,o.default.noop),k[Z].setAttribute("aria-expanded","false"),ze._popper&&ze._popper.destroy(),o.default(ii).removeClass(In),o.default(Le).removeClass(In).trigger(o.default.Event(pl,Ct)))}}}},_e._getParentFromElement=function(M){var k,Z=S.getSelectorFromElement(M);return Z&&(k=document.querySelector(Z)),k||M.parentNode},_e._dataApiKeydownHandler=function(M){if(!(/input|textarea/i.test(M.target.tagName)?M.which===cl||M.which!==Fi&&(M.which!==dl&&M.which!==ul||o.default(M.target).closest(vl).length):!rr.test(M.which))&&!(this.disabled||o.default(this).hasClass(Dr))){var k=_e._getParentFromElement(this),Z=o.default(k).hasClass(In);if(!(!Z&&M.which===Fi)){if(M.preventDefault(),M.stopPropagation(),!Z||M.which===Fi||M.which===cl){M.which===Fi&&o.default(k.querySelector(Qo)).trigger("focus"),o.default(this).trigger("click");return}var Me=[].slice.call(k.querySelectorAll(jc)).filter(function(ze){return o.default(ze).is(":visible")});if(Me.length!==0){var Le=Me.indexOf(M.target);M.which===ul&&Le>0&&Le--,M.which===dl&&Le<Me.length-1&&Le++,Le<0&&(Le=0),Me[Le].focus()}}}},u(_e,null,[{key:"VERSION",get:function(){return Rn}},{key:"Default",get:function(){return fh}},{key:"DefaultType",get:function(){return ph}}]),_e}();o.default(document).on(Wc,Qo,Ls._dataApiKeydownHandler).on(Wc,vl,Ls._dataApiKeydownHandler).on(gl+" "+uh,Ls._clearMenus).on(gl,Qo,function(_e){_e.preventDefault(),_e.stopPropagation(),Ls._jQueryInterface.call(o.default(this),"toggle")}).on(gl,dh,function(_e){_e.stopPropagation()}),o.default.fn[ti]=Ls._jQueryInterface,o.default.fn[ti].Constructor=Ls,o.default.fn[ti].noConflict=function(){return o.default.fn[ti]=ll,Ls._jQueryInterface};var qn="modal",Kc="4.6.2",or="bs.modal",mn="."+or,mh=".data-api",gh=o.default.fn[qn],p=27,_="modal-dialog-scrollable",x="modal-scrollbar-measure",T="modal-backdrop",L="modal-open",R="fade",N="show",ne="modal-static",ee="hide"+mn,he="hidePrevented"+mn,Ae="hidden"+mn,Ie="show"+mn,we="shown"+mn,Ue="focusin"+mn,Mt="resize"+mn,Gt="click.dismiss"+mn,Nt="keydown.dismiss"+mn,Vi="mouseup.dismiss"+mn,Li="mousedown.dismiss"+mn,Xn="click"+mn+mh,Yn=".modal-dialog",Wt=".modal-body",ar='[data-toggle="modal"]',Zt='[data-dismiss="modal"]',_i=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Or=".sticky-top",vo={backdrop:!0,keyboard:!0,focus:!0,show:!0},Kn={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},ms=function(){function _e(te,M){this._config=this._getConfig(M),this._element=te,this._dialog=te.querySelector(Yn),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var re=_e.prototype;return re.toggle=function(M){return this._isShown?this.hide():this.show(M)},re.show=function(M){var k=this;if(!(this._isShown||this._isTransitioning)){var Z=o.default.Event(Ie,{relatedTarget:M});o.default(this._element).trigger(Z),!Z.isDefaultPrevented()&&(this._isShown=!0,o.default(this._element).hasClass(R)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),o.default(this._element).on(Gt,Zt,function(Me){return k.hide(Me)}),o.default(this._dialog).on(Li,function(){o.default(k._element).one(Vi,function(Me){o.default(Me.target).is(k._element)&&(k._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return k._showElement(M)}))}},re.hide=function(M){var k=this;if(M&&M.preventDefault(),!(!this._isShown||this._isTransitioning)){var Z=o.default.Event(ee);if(o.default(this._element).trigger(Z),!(!this._isShown||Z.isDefaultPrevented())){this._isShown=!1;var Me=o.default(this._element).hasClass(R);if(Me&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),o.default(document).off(Ue),o.default(this._element).removeClass(N),o.default(this._element).off(Gt),o.default(this._dialog).off(Li),Me){var Le=S.getTransitionDurationFromElement(this._element);o.default(this._element).one(S.TRANSITION_END,function(ze){return k._hideModal(ze)}).emulateTransitionEnd(Le)}else this._hideModal()}}},re.dispose=function(){[window,this._element,this._dialog].forEach(function(M){return o.default(M).off(mn)}),o.default(document).off(Ue),o.default.removeData(this._element,or),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},re.handleUpdate=function(){this._adjustDialog()},re._getConfig=function(M){return M=c({},vo,M),S.typeCheckConfig(qn,M,Kn),M},re._triggerBackdropTransition=function(){var M=this,k=o.default.Event(he);if(o.default(this._element).trigger(k),!k.isDefaultPrevented()){var Z=this._element.scrollHeight>document.documentElement.clientHeight;Z||(this._element.style.overflowY="hidden"),this._element.classList.add(ne);var Me=S.getTransitionDurationFromElement(this._dialog);o.default(this._element).off(S.TRANSITION_END),o.default(this._element).one(S.TRANSITION_END,function(){M._element.classList.remove(ne),Z||o.default(M._element).one(S.TRANSITION_END,function(){M._element.style.overflowY=""}).emulateTransitionEnd(M._element,Me)}).emulateTransitionEnd(Me),this._element.focus()}},re._showElement=function(M){var k=this,Z=o.default(this._element).hasClass(R),Me=this._dialog?this._dialog.querySelector(Wt):null;(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),o.default(this._dialog).hasClass(_)&&Me?Me.scrollTop=0:this._element.scrollTop=0,Z&&S.reflow(this._element),o.default(this._element).addClass(N),this._config.focus&&this._enforceFocus();var Le=o.default.Event(we,{relatedTarget:M}),ze=function(){k._config.focus&&k._element.focus(),k._isTransitioning=!1,o.default(k._element).trigger(Le)};if(Z){var Ct=S.getTransitionDurationFromElement(this._dialog);o.default(this._dialog).one(S.TRANSITION_END,ze).emulateTransitionEnd(Ct)}else ze()},re._enforceFocus=function(){var M=this;o.default(document).off(Ue).on(Ue,function(k){document!==k.target&&M._element!==k.target&&o.default(M._element).has(k.target).length===0&&M._element.focus()})},re._setEscapeEvent=function(){var M=this;this._isShown?o.default(this._element).on(Nt,function(k){M._config.keyboard&&k.which===p?(k.preventDefault(),M.hide()):!M._config.keyboard&&k.which===p&&M._triggerBackdropTransition()}):this._isShown||o.default(this._element).off(Nt)},re._setResizeEvent=function(){var M=this;this._isShown?o.default(window).on(Mt,function(k){return M.handleUpdate(k)}):o.default(window).off(Mt)},re._hideModal=function(){var M=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){o.default(document.body).removeClass(L),M._resetAdjustments(),M._resetScrollbar(),o.default(M._element).trigger(Ae)})},re._removeBackdrop=function(){this._backdrop&&(o.default(this._backdrop).remove(),this._backdrop=null)},re._showBackdrop=function(M){var k=this,Z=o.default(this._element).hasClass(R)?R:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=T,Z&&this._backdrop.classList.add(Z),o.default(this._backdrop).appendTo(document.body),o.default(this._element).on(Gt,function(Ct){if(k._ignoreBackdropClick){k._ignoreBackdropClick=!1;return}Ct.target===Ct.currentTarget&&(k._config.backdrop==="static"?k._triggerBackdropTransition():k.hide())}),Z&&S.reflow(this._backdrop),o.default(this._backdrop).addClass(N),!M)return;if(!Z){M();return}var Me=S.getTransitionDurationFromElement(this._backdrop);o.default(this._backdrop).one(S.TRANSITION_END,M).emulateTransitionEnd(Me)}else if(!this._isShown&&this._backdrop){o.default(this._backdrop).removeClass(N);var Le=function(){k._removeBackdrop(),M&&M()};if(o.default(this._element).hasClass(R)){var ze=S.getTransitionDurationFromElement(this._backdrop);o.default(this._backdrop).one(S.TRANSITION_END,Le).emulateTransitionEnd(ze)}else Le()}else M&&M()},re._adjustDialog=function(){var M=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&M&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!M&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},re._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},re._checkScrollbar=function(){var M=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(M.left+M.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},re._setScrollbar=function(){var M=this;if(this._isBodyOverflowing){var k=[].slice.call(document.querySelectorAll(_i)),Z=[].slice.call(document.querySelectorAll(Or));o.default(k).each(function(ze,Ct){var ii=Ct.style.paddingRight,ri=o.default(Ct).css("padding-right");o.default(Ct).data("padding-right",ii).css("padding-right",parseFloat(ri)+M._scrollbarWidth+"px")}),o.default(Z).each(function(ze,Ct){var ii=Ct.style.marginRight,ri=o.default(Ct).css("margin-right");o.default(Ct).data("margin-right",ii).css("margin-right",parseFloat(ri)-M._scrollbarWidth+"px")});var Me=document.body.style.paddingRight,Le=o.default(document.body).css("padding-right");o.default(document.body).data("padding-right",Me).css("padding-right",parseFloat(Le)+this._scrollbarWidth+"px")}o.default(document.body).addClass(L)},re._resetScrollbar=function(){var M=[].slice.call(document.querySelectorAll(_i));o.default(M).each(function(Me,Le){var ze=o.default(Le).data("padding-right");o.default(Le).removeData("padding-right"),Le.style.paddingRight=ze||""});var k=[].slice.call(document.querySelectorAll(""+Or));o.default(k).each(function(Me,Le){var ze=o.default(Le).data("margin-right");typeof ze<"u"&&o.default(Le).css("margin-right",ze).removeData("margin-right")});var Z=o.default(document.body).data("padding-right");o.default(document.body).removeData("padding-right"),document.body.style.paddingRight=Z||""},re._getScrollbarWidth=function(){var M=document.createElement("div");M.className=x,document.body.appendChild(M);var k=M.getBoundingClientRect().width-M.clientWidth;return document.body.removeChild(M),k},_e._jQueryInterface=function(M,k){return this.each(function(){var Z=o.default(this).data(or),Me=c({},vo,o.default(this).data(),typeof M=="object"&&M?M:{});if(Z||(Z=new _e(this,Me),o.default(this).data(or,Z)),typeof M=="string"){if(typeof Z[M]>"u")throw new TypeError('No method named "'+M+'"');Z[M](k)}else Me.show&&Z.show(k)})},u(_e,null,[{key:"VERSION",get:function(){return Kc}},{key:"Default",get:function(){return vo}}]),_e}();o.default(document).on(Xn,ar,function(_e){var re=this,te,M=S.getSelectorFromElement(this);M&&(te=document.querySelector(M));var k=o.default(te).data(or)?"toggle":c({},o.default(te).data(),o.default(this).data());(this.tagName==="A"||this.tagName==="AREA")&&_e.preventDefault();var Z=o.default(te).one(Ie,function(Me){Me.isDefaultPrevented()||Z.one(Ae,function(){o.default(re).is(":visible")&&re.focus()})});ms._jQueryInterface.call(o.default(te),k,this)}),o.default.fn[qn]=ms._jQueryInterface,o.default.fn[qn].Constructor=ms,o.default.fn[qn].noConflict=function(){return o.default.fn[qn]=gh,ms._jQueryInterface};var Zn=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Rs=/^aria-[\w-]*$/i,Is={"*":["class","dir","id","lang","role",Rs],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},xn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,El=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function gs(_e,re){var te=_e.nodeName.toLowerCase();if(re.indexOf(te)!==-1)return Zn.indexOf(te)!==-1?!!(xn.test(_e.nodeValue)||El.test(_e.nodeValue)):!0;for(var M=re.filter(function(Me){return Me instanceof RegExp}),k=0,Z=M.length;k<Z;k++)if(M[k].test(te))return!0;return!1}function Qn(_e,re,te){if(_e.length===0)return _e;if(te&&typeof te=="function")return te(_e);for(var M=new window.DOMParser,k=M.parseFromString(_e,"text/html"),Z=Object.keys(re),Me=[].slice.call(k.body.querySelectorAll("*")),Le=function(Yi,Ns){var ys=Me[Yi],sa=ys.nodeName.toLowerCase();if(Z.indexOf(ys.nodeName.toLowerCase())===-1)return ys.parentNode.removeChild(ys),"continue";var Eh=[].slice.call(ys.attributes),Ox=[].concat(re["*"]||[],re[sa]||[]);Eh.forEach(function(Pg){gs(Pg,Ox)||ys.removeAttribute(Pg.nodeName)})},ze=0,Ct=Me.length;ze<Ct;ze++)var ii=Le(ze);return k.body.innerHTML}var lr="tooltip",vh="4.6.2",Jo="bs.tooltip",zt="."+Jo,ea=o.default.fn[lr],Sn="bs-tooltip",Nr=new RegExp("(^|\\s)"+Sn+"\\S+","g"),yh=["sanitize","whiteList","sanitizeFn"],yo="fade",kr="show",Dn="show",bo="out",Ds=".tooltip-inner",Zc=".arrow",vs="hover",Fr="focus",ta="click",wl="manual",bh={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},ia={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:Is,popperConfig:null},xl={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Sl={HIDE:"hide"+zt,HIDDEN:"hidden"+zt,SHOW:"show"+zt,SHOWN:"shown"+zt,INSERTED:"inserted"+zt,CLICK:"click"+zt,FOCUSIN:"focusin"+zt,FOCUSOUT:"focusout"+zt,MOUSEENTER:"mouseenter"+zt,MOUSELEAVE:"mouseleave"+zt},cr=function(){function _e(te,M){if(typeof a.default>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=te,this.config=this._getConfig(M),this.tip=null,this._setListeners()}var re=_e.prototype;return re.enable=function(){this._isEnabled=!0},re.disable=function(){this._isEnabled=!1},re.toggleEnabled=function(){this._isEnabled=!this._isEnabled},re.toggle=function(M){if(this._isEnabled)if(M){var k=this.constructor.DATA_KEY,Z=o.default(M.currentTarget).data(k);Z||(Z=new this.constructor(M.currentTarget,this._getDelegateConfig()),o.default(M.currentTarget).data(k,Z)),Z._activeTrigger.click=!Z._activeTrigger.click,Z._isWithActiveTrigger()?Z._enter(null,Z):Z._leave(null,Z)}else{if(o.default(this.getTipElement()).hasClass(kr)){this._leave(null,this);return}this._enter(null,this)}},re.dispose=function(){clearTimeout(this._timeout),o.default.removeData(this.element,this.constructor.DATA_KEY),o.default(this.element).off(this.constructor.EVENT_KEY),o.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&o.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},re.show=function(){var M=this;if(o.default(this.element).css("display")==="none")throw new Error("Please use show on visible elements");var k=o.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){o.default(this.element).trigger(k);var Z=S.findShadowRoot(this.element),Me=o.default.contains(Z!==null?Z:this.element.ownerDocument.documentElement,this.element);if(k.isDefaultPrevented()||!Me)return;var Le=this.getTipElement(),ze=S.getUID(this.constructor.NAME);Le.setAttribute("id",ze),this.element.setAttribute("aria-describedby",ze),this.setContent(),this.config.animation&&o.default(Le).addClass(yo);var Ct=typeof this.config.placement=="function"?this.config.placement.call(this,Le,this.element):this.config.placement,ii=this._getAttachment(Ct);this.addAttachmentClass(ii);var ri=this._getContainer();o.default(Le).data(this.constructor.DATA_KEY,this),o.default.contains(this.element.ownerDocument.documentElement,this.tip)||o.default(Le).appendTo(ri),o.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new a.default(this.element,Le,this._getPopperConfig(ii)),o.default(Le).addClass(kr),o.default(Le).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&o.default(document.body).children().on("mouseover",null,o.default.noop);var Yi=function(){M.config.animation&&M._fixTransition();var sa=M._hoverState;M._hoverState=null,o.default(M.element).trigger(M.constructor.Event.SHOWN),sa===bo&&M._leave(null,M)};if(o.default(this.tip).hasClass(yo)){var Ns=S.getTransitionDurationFromElement(this.tip);o.default(this.tip).one(S.TRANSITION_END,Yi).emulateTransitionEnd(Ns)}else Yi()}},re.hide=function(M){var k=this,Z=this.getTipElement(),Me=o.default.Event(this.constructor.Event.HIDE),Le=function(){k._hoverState!==Dn&&Z.parentNode&&Z.parentNode.removeChild(Z),k._cleanTipClass(),k.element.removeAttribute("aria-describedby"),o.default(k.element).trigger(k.constructor.Event.HIDDEN),k._popper!==null&&k._popper.destroy(),M&&M()};if(o.default(this.element).trigger(Me),!Me.isDefaultPrevented()){if(o.default(Z).removeClass(kr),"ontouchstart"in document.documentElement&&o.default(document.body).children().off("mouseover",null,o.default.noop),this._activeTrigger[ta]=!1,this._activeTrigger[Fr]=!1,this._activeTrigger[vs]=!1,o.default(this.tip).hasClass(yo)){var ze=S.getTransitionDurationFromElement(Z);o.default(Z).one(S.TRANSITION_END,Le).emulateTransitionEnd(ze)}else Le();this._hoverState=""}},re.update=function(){this._popper!==null&&this._popper.scheduleUpdate()},re.isWithContent=function(){return!!this.getTitle()},re.addAttachmentClass=function(M){o.default(this.getTipElement()).addClass(Sn+"-"+M)},re.getTipElement=function(){return this.tip=this.tip||o.default(this.config.template)[0],this.tip},re.setContent=function(){var M=this.getTipElement();this.setElementContent(o.default(M.querySelectorAll(Ds)),this.getTitle()),o.default(M).removeClass(yo+" "+kr)},re.setElementContent=function(M,k){if(typeof k=="object"&&(k.nodeType||k.jquery)){this.config.html?o.default(k).parent().is(M)||M.empty().append(k):M.text(o.default(k).text());return}this.config.html?(this.config.sanitize&&(k=Qn(k,this.config.whiteList,this.config.sanitizeFn)),M.html(k)):M.text(k)},re.getTitle=function(){var M=this.element.getAttribute("data-original-title");return M||(M=typeof this.config.title=="function"?this.config.title.call(this.element):this.config.title),M},re._getPopperConfig=function(M){var k=this,Z={placement:M,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:Zc},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(Le){Le.originalPlacement!==Le.placement&&k._handlePopperPlacementChange(Le)},onUpdate:function(Le){return k._handlePopperPlacementChange(Le)}};return c({},Z,this.config.popperConfig)},re._getOffset=function(){var M=this,k={};return typeof this.config.offset=="function"?k.fn=function(Z){return Z.offsets=c({},Z.offsets,M.config.offset(Z.offsets,M.element)),Z}:k.offset=this.config.offset,k},re._getContainer=function(){return this.config.container===!1?document.body:S.isElement(this.config.container)?o.default(this.config.container):o.default(document).find(this.config.container)},re._getAttachment=function(M){return bh[M.toUpperCase()]},re._setListeners=function(){var M=this,k=this.config.trigger.split(" ");k.forEach(function(Z){if(Z==="click")o.default(M.element).on(M.constructor.Event.CLICK,M.config.selector,function(ze){return M.toggle(ze)});else if(Z!==wl){var Me=Z===vs?M.constructor.Event.MOUSEENTER:M.constructor.Event.FOCUSIN,Le=Z===vs?M.constructor.Event.MOUSELEAVE:M.constructor.Event.FOCUSOUT;o.default(M.element).on(Me,M.config.selector,function(ze){return M._enter(ze)}).on(Le,M.config.selector,function(ze){return M._leave(ze)})}}),this._hideModalHandler=function(){M.element&&M.hide()},o.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=c({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},re._fixTitle=function(){var M=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||M!=="string")&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},re._enter=function(M,k){var Z=this.constructor.DATA_KEY;if(k=k||o.default(M.currentTarget).data(Z),k||(k=new this.constructor(M.currentTarget,this._getDelegateConfig()),o.default(M.currentTarget).data(Z,k)),M&&(k._activeTrigger[M.type==="focusin"?Fr:vs]=!0),o.default(k.getTipElement()).hasClass(kr)||k._hoverState===Dn){k._hoverState=Dn;return}if(clearTimeout(k._timeout),k._hoverState=Dn,!k.config.delay||!k.config.delay.show){k.show();return}k._timeout=setTimeout(function(){k._hoverState===Dn&&k.show()},k.config.delay.show)},re._leave=function(M,k){var Z=this.constructor.DATA_KEY;if(k=k||o.default(M.currentTarget).data(Z),k||(k=new this.constructor(M.currentTarget,this._getDelegateConfig()),o.default(M.currentTarget).data(Z,k)),M&&(k._activeTrigger[M.type==="focusout"?Fr:vs]=!1),!k._isWithActiveTrigger()){if(clearTimeout(k._timeout),k._hoverState=bo,!k.config.delay||!k.config.delay.hide){k.hide();return}k._timeout=setTimeout(function(){k._hoverState===bo&&k.hide()},k.config.delay.hide)}},re._isWithActiveTrigger=function(){for(var M in this._activeTrigger)if(this._activeTrigger[M])return!0;return!1},re._getConfig=function(M){var k=o.default(this.element).data();return Object.keys(k).forEach(function(Z){yh.indexOf(Z)!==-1&&delete k[Z]}),M=c({},this.constructor.Default,k,typeof M=="object"&&M?M:{}),typeof M.delay=="number"&&(M.delay={show:M.delay,hide:M.delay}),typeof M.title=="number"&&(M.title=M.title.toString()),typeof M.content=="number"&&(M.content=M.content.toString()),S.typeCheckConfig(lr,M,this.constructor.DefaultType),M.sanitize&&(M.template=Qn(M.template,M.whiteList,M.sanitizeFn)),M},re._getDelegateConfig=function(){var M={};if(this.config)for(var k in this.config)this.constructor.Default[k]!==this.config[k]&&(M[k]=this.config[k]);return M},re._cleanTipClass=function(){var M=o.default(this.getTipElement()),k=M.attr("class").match(Nr);k!==null&&k.length&&M.removeClass(k.join(""))},re._handlePopperPlacementChange=function(M){this.tip=M.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(M.placement))},re._fixTransition=function(){var M=this.getTipElement(),k=this.config.animation;M.getAttribute("x-placement")===null&&(o.default(M).removeClass(yo),this.config.animation=!1,this.hide(),this.show(),this.config.animation=k)},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this),Z=k.data(Jo),Me=typeof M=="object"&&M;if(!(!Z&&/dispose|hide/.test(M))&&(Z||(Z=new _e(this,Me),k.data(Jo,Z)),typeof M=="string")){if(typeof Z[M]>"u")throw new TypeError('No method named "'+M+'"');Z[M]()}})},u(_e,null,[{key:"VERSION",get:function(){return vh}},{key:"Default",get:function(){return ia}},{key:"NAME",get:function(){return lr}},{key:"DATA_KEY",get:function(){return Jo}},{key:"Event",get:function(){return Sl}},{key:"EVENT_KEY",get:function(){return zt}},{key:"DefaultType",get:function(){return xl}}]),_e}();o.default.fn[lr]=cr._jQueryInterface,o.default.fn[lr].Constructor=cr,o.default.fn[lr].noConflict=function(){return o.default.fn[lr]=ea,cr._jQueryInterface};var Os="popover",Qc="4.6.2",X="bs.popover",ae="."+X,ye=o.default.fn[Os],Te="bs-popover",De=new RegExp("(^|\\s)"+Te+"\\S+","g"),Ve="fade",nt="show",ft=".popover-header",st=".popover-body",$t=c({},cr.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Tt=c({},cr.DefaultType,{content:"(string|element|function)"}),Dt={HIDE:"hide"+ae,HIDDEN:"hidden"+ae,SHOW:"show"+ae,SHOWN:"shown"+ae,INSERTED:"inserted"+ae,CLICK:"click"+ae,FOCUSIN:"focusin"+ae,FOCUSOUT:"focusout"+ae,MOUSEENTER:"mouseenter"+ae,MOUSELEAVE:"mouseleave"+ae},Ft=function(_e){d(re,_e);function re(){return _e.apply(this,arguments)||this}var te=re.prototype;return te.isWithContent=function(){return this.getTitle()||this._getContent()},te.addAttachmentClass=function(k){o.default(this.getTipElement()).addClass(Te+"-"+k)},te.getTipElement=function(){return this.tip=this.tip||o.default(this.config.template)[0],this.tip},te.setContent=function(){var k=o.default(this.getTipElement());this.setElementContent(k.find(ft),this.getTitle());var Z=this._getContent();typeof Z=="function"&&(Z=Z.call(this.element)),this.setElementContent(k.find(st),Z),k.removeClass(Ve+" "+nt)},te._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},te._cleanTipClass=function(){var k=o.default(this.getTipElement()),Z=k.attr("class").match(De);Z!==null&&Z.length>0&&k.removeClass(Z.join(""))},re._jQueryInterface=function(k){return this.each(function(){var Z=o.default(this).data(X),Me=typeof k=="object"?k:null;if(!(!Z&&/dispose|hide/.test(k))&&(Z||(Z=new re(this,Me),o.default(this).data(X,Z)),typeof k=="string")){if(typeof Z[k]>"u")throw new TypeError('No method named "'+k+'"');Z[k]()}})},u(re,null,[{key:"VERSION",get:function(){return Qc}},{key:"Default",get:function(){return $t}},{key:"NAME",get:function(){return Os}},{key:"DATA_KEY",get:function(){return X}},{key:"Event",get:function(){return Dt}},{key:"EVENT_KEY",get:function(){return ae}},{key:"DefaultType",get:function(){return Tt}}]),re}(cr);o.default.fn[Os]=Ft._jQueryInterface,o.default.fn[Os].Constructor=Ft,o.default.fn[Os].noConflict=function(){return o.default.fn[Os]=ye,Ft._jQueryInterface};var vt="scrollspy",hi="4.6.2",$i="bs.scrollspy",Di="."+$i,Tn=".data-api",Jn=o.default.fn[vt],Ur="dropdown-item",Ti="active",ex="activate"+Di,tx="scroll"+Di,ix="load"+Di+Tn,nx="offset",vg="position",sx='[data-spy="scroll"]',yg=".nav, .list-group",_h=".nav-link",rx=".nav-item",bg=".list-group-item",ox=".dropdown",ax=".dropdown-item",lx=".dropdown-toggle",_g={offset:10,method:"auto",target:""},cx={offset:"number",method:"string",target:"(string|element)"},Tl=function(){function _e(te,M){var k=this;this._element=te,this._scrollElement=te.tagName==="BODY"?window:te,this._config=this._getConfig(M),this._selector=this._config.target+" "+_h+","+(this._config.target+" "+bg+",")+(this._config.target+" "+ax),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,o.default(this._scrollElement).on(tx,function(Z){return k._process(Z)}),this.refresh(),this._process()}var re=_e.prototype;return re.refresh=function(){var M=this,k=this._scrollElement===this._scrollElement.window?nx:vg,Z=this._config.method==="auto"?k:this._config.method,Me=Z===vg?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var Le=[].slice.call(document.querySelectorAll(this._selector));Le.map(function(ze){var Ct,ii=S.getSelectorFromElement(ze);if(ii&&(Ct=document.querySelector(ii)),Ct){var ri=Ct.getBoundingClientRect();if(ri.width||ri.height)return[o.default(Ct)[Z]().top+Me,ii]}return null}).filter(Boolean).sort(function(ze,Ct){return ze[0]-Ct[0]}).forEach(function(ze){M._offsets.push(ze[0]),M._targets.push(ze[1])})},re.dispose=function(){o.default.removeData(this._element,$i),o.default(this._scrollElement).off(Di),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},re._getConfig=function(M){if(M=c({},_g,typeof M=="object"&&M?M:{}),typeof M.target!="string"&&S.isElement(M.target)){var k=o.default(M.target).attr("id");k||(k=S.getUID(vt),o.default(M.target).attr("id",k)),M.target="#"+k}return S.typeCheckConfig(vt,M,cx),M},re._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},re._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},re._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},re._process=function(){var M=this._getScrollTop()+this._config.offset,k=this._getScrollHeight(),Z=this._config.offset+k-this._getOffsetHeight();if(this._scrollHeight!==k&&this.refresh(),M>=Z){var Me=this._targets[this._targets.length-1];this._activeTarget!==Me&&this._activate(Me);return}if(this._activeTarget&&M<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(var Le=this._offsets.length;Le--;){var ze=this._activeTarget!==this._targets[Le]&&M>=this._offsets[Le]&&(typeof this._offsets[Le+1]>"u"||M<this._offsets[Le+1]);ze&&this._activate(this._targets[Le])}},re._activate=function(M){this._activeTarget=M,this._clear();var k=this._selector.split(",").map(function(Me){return Me+'[data-target="'+M+'"],'+Me+'[href="'+M+'"]'}),Z=o.default([].slice.call(document.querySelectorAll(k.join(","))));Z.hasClass(Ur)?(Z.closest(ox).find(lx).addClass(Ti),Z.addClass(Ti)):(Z.addClass(Ti),Z.parents(yg).prev(_h+", "+bg).addClass(Ti),Z.parents(yg).prev(rx).children(_h).addClass(Ti)),o.default(this._scrollElement).trigger(ex,{relatedTarget:M})},re._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(M){return M.classList.contains(Ti)}).forEach(function(M){return M.classList.remove(Ti)})},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this).data($i),Z=typeof M=="object"&&M;if(k||(k=new _e(this,Z),o.default(this).data($i,k)),typeof M=="string"){if(typeof k[M]>"u")throw new TypeError('No method named "'+M+'"');k[M]()}})},u(_e,null,[{key:"VERSION",get:function(){return hi}},{key:"Default",get:function(){return _g}}]),_e}();o.default(window).on(ix,function(){for(var _e=[].slice.call(document.querySelectorAll(sx)),re=_e.length,te=re;te--;){var M=o.default(_e[te]);Tl._jQueryInterface.call(M,M.data())}}),o.default.fn[vt]=Tl._jQueryInterface,o.default.fn[vt].Constructor=Tl,o.default.fn[vt].noConflict=function(){return o.default.fn[vt]=Jn,Tl._jQueryInterface};var Ml="tab",ux="4.6.2",Jc="bs.tab",Cl="."+Jc,dx=".data-api",hx=o.default.fn[Ml],fx="dropdown-menu",Al="active",px="disabled",Eg="fade",wg="show",mx="hide"+Cl,gx="hidden"+Cl,vx="show"+Cl,yx="shown"+Cl,bx="click"+Cl+dx,_x=".dropdown",Ex=".nav, .list-group",xg=".active",Sg="> li > .active",wx='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',xx=".dropdown-toggle",Sx="> .dropdown-menu .active",Pl=function(){function _e(te){this._element=te}var re=_e.prototype;return re.show=function(){var M=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&o.default(this._element).hasClass(Al)||o.default(this._element).hasClass(px)||this._element.hasAttribute("disabled"))){var k,Z,Me=o.default(this._element).closest(Ex)[0],Le=S.getSelectorFromElement(this._element);if(Me){var ze=Me.nodeName==="UL"||Me.nodeName==="OL"?Sg:xg;Z=o.default.makeArray(o.default(Me).find(ze)),Z=Z[Z.length-1]}var Ct=o.default.Event(mx,{relatedTarget:this._element}),ii=o.default.Event(vx,{relatedTarget:Z});if(Z&&o.default(Z).trigger(Ct),o.default(this._element).trigger(ii),!(ii.isDefaultPrevented()||Ct.isDefaultPrevented())){Le&&(k=document.querySelector(Le)),this._activate(this._element,Me);var ri=function(){var Ns=o.default.Event(gx,{relatedTarget:M._element}),ys=o.default.Event(yx,{relatedTarget:Z});o.default(Z).trigger(Ns),o.default(M._element).trigger(ys)};k?this._activate(k,k.parentNode,ri):ri()}}},re.dispose=function(){o.default.removeData(this._element,Jc),this._element=null},re._activate=function(M,k,Z){var Me=this,Le=k&&(k.nodeName==="UL"||k.nodeName==="OL")?o.default(k).find(Sg):o.default(k).children(xg),ze=Le[0],Ct=Z&&ze&&o.default(ze).hasClass(Eg),ii=function(){return Me._transitionComplete(M,ze,Z)};if(ze&&Ct){var ri=S.getTransitionDurationFromElement(ze);o.default(ze).removeClass(wg).one(S.TRANSITION_END,ii).emulateTransitionEnd(ri)}else ii()},re._transitionComplete=function(M,k,Z){if(k){o.default(k).removeClass(Al);var Me=o.default(k.parentNode).find(Sx)[0];Me&&o.default(Me).removeClass(Al),k.getAttribute("role")==="tab"&&k.setAttribute("aria-selected",!1)}o.default(M).addClass(Al),M.getAttribute("role")==="tab"&&M.setAttribute("aria-selected",!0),S.reflow(M),M.classList.contains(Eg)&&M.classList.add(wg);var Le=M.parentNode;if(Le&&Le.nodeName==="LI"&&(Le=Le.parentNode),Le&&o.default(Le).hasClass(fx)){var ze=o.default(M).closest(_x)[0];if(ze){var Ct=[].slice.call(ze.querySelectorAll(xx));o.default(Ct).addClass(Al)}M.setAttribute("aria-expanded",!0)}Z&&Z()},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this),Z=k.data(Jc);if(Z||(Z=new _e(this),k.data(Jc,Z)),typeof M=="string"){if(typeof Z[M]>"u")throw new TypeError('No method named "'+M+'"');Z[M]()}})},u(_e,null,[{key:"VERSION",get:function(){return ux}}]),_e}();o.default(document).on(bx,wx,function(_e){_e.preventDefault(),Pl._jQueryInterface.call(o.default(this),"show")}),o.default.fn[Ml]=Pl._jQueryInterface,o.default.fn[Ml].Constructor=Pl,o.default.fn[Ml].noConflict=function(){return o.default.fn[Ml]=hx,Pl._jQueryInterface};var na="toast",Tx="4.6.2",eu="bs.toast",Ll="."+eu,Mx=o.default.fn[na],Cx="fade",Tg="hide",Rl="show",Mg="showing",Cg="click.dismiss"+Ll,Ax="hide"+Ll,Px="hidden"+Ll,Lx="show"+Ll,Rx="shown"+Ll,Ix='[data-dismiss="toast"]',Ag={animation:!0,autohide:!0,delay:500},Dx={animation:"boolean",autohide:"boolean",delay:"number"},tu=function(){function _e(te,M){this._element=te,this._config=this._getConfig(M),this._timeout=null,this._setListeners()}var re=_e.prototype;return re.show=function(){var M=this,k=o.default.Event(Lx);if(o.default(this._element).trigger(k),!k.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add(Cx);var Z=function(){M._element.classList.remove(Mg),M._element.classList.add(Rl),o.default(M._element).trigger(Rx),M._config.autohide&&(M._timeout=setTimeout(function(){M.hide()},M._config.delay))};if(this._element.classList.remove(Tg),S.reflow(this._element),this._element.classList.add(Mg),this._config.animation){var Me=S.getTransitionDurationFromElement(this._element);o.default(this._element).one(S.TRANSITION_END,Z).emulateTransitionEnd(Me)}else Z()}},re.hide=function(){if(this._element.classList.contains(Rl)){var M=o.default.Event(Ax);o.default(this._element).trigger(M),!M.isDefaultPrevented()&&this._close()}},re.dispose=function(){this._clearTimeout(),this._element.classList.contains(Rl)&&this._element.classList.remove(Rl),o.default(this._element).off(Cg),o.default.removeData(this._element,eu),this._element=null,this._config=null},re._getConfig=function(M){return M=c({},Ag,o.default(this._element).data(),typeof M=="object"&&M?M:{}),S.typeCheckConfig(na,M,this.constructor.DefaultType),M},re._setListeners=function(){var M=this;o.default(this._element).on(Cg,Ix,function(){return M.hide()})},re._close=function(){var M=this,k=function(){M._element.classList.add(Tg),o.default(M._element).trigger(Px)};if(this._element.classList.remove(Rl),this._config.animation){var Z=S.getTransitionDurationFromElement(this._element);o.default(this._element).one(S.TRANSITION_END,k).emulateTransitionEnd(Z)}else k()},re._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},_e._jQueryInterface=function(M){return this.each(function(){var k=o.default(this),Z=k.data(eu),Me=typeof M=="object"&&M;if(Z||(Z=new _e(this,Me),k.data(eu,Z)),typeof M=="string"){if(typeof Z[M]>"u")throw new TypeError('No method named "'+M+'"');Z[M](this)}})},u(_e,null,[{key:"VERSION",get:function(){return Tx}},{key:"DefaultType",get:function(){return Dx}},{key:"Default",get:function(){return Ag}}]),_e}();o.default.fn[na]=tu._jQueryInterface,o.default.fn[na].Constructor=tu,o.default.fn[na].noConflict=function(){return o.default.fn[na]=Mx,tu._jQueryInterface},t.Alert=z,t.Button=dt,t.Carousel=de,t.Collapse=ps,t.Dropdown=Ls,t.Modal=ms,t.Popover=Ft,t.Scrollspy=Tl,t.Tab=Pl,t.Toast=tu,t.Tooltip=cr,t.Util=S,Object.defineProperty(t,"__esModule",{value:!0})})})(Lg,Lg.exports);function kg(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function vm(i,e){i===void 0&&(i={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof i[t]>"u"?i[t]=e[t]:kg(e[t])&&kg(i[t])&&Object.keys(e[t]).length>0&&vm(i[t],e[t])})}const vy={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ln(){const i=typeof document<"u"?document:{};return vm(i,vy),i}const ES={document:vy,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function Ri(){const i=typeof window<"u"?window:{};return vm(i,ES),i}function jr(i){return i===void 0&&(i=""),i.trim().split(" ").filter(e=>!!e.trim())}function wS(i){const e=i;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Vo(i,e){return e===void 0&&(e=0),setTimeout(i,e)}function as(){return Date.now()}function xS(i){const e=Ri();let t;return e.getComputedStyle&&(t=e.getComputedStyle(i,null)),!t&&i.currentStyle&&(t=i.currentStyle),t||(t=i.style),t}function Ff(i,e){e===void 0&&(e="x");const t=Ri();let n,s,r;const o=xS(i);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=r.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?s=r.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function $l(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function SS(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function Un(){const i=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!SS(n)){const s=Object.keys(Object(n)).filter(r=>e.indexOf(r)<0);for(let r=0,o=s.length;r<o;r+=1){const a=s[r],l=Object.getOwnPropertyDescriptor(n,a);l!==void 0&&l.enumerable&&($l(i[a])&&$l(n[a])?n[a].__swiper__?i[a]=n[a]:Un(i[a],n[a]):!$l(i[a])&&$l(n[a])?(i[a]={},n[a].__swiper__?i[a]=n[a]:Un(i[a],n[a])):i[a]=n[a])}}}return i}function Gl(i,e,t){i.style.setProperty(e,t)}function yy(i){let{swiper:e,targetPosition:t,side:n}=i;const s=Ri(),r=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const u=t>r?"next":"prev",c=(h,f)=>u==="next"&&h>=f||u==="prev"&&h<=f,d=()=>{a=new Date().getTime(),o===null&&(o=a);const h=Math.max(Math.min((a-o)/l,1),0),f=.5-Math.cos(h*Math.PI)/2;let m=r+f*(t-r);if(c(m,t)&&(m=t),e.wrapperEl.scrollTo({[n]:m}),c(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:m})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function qo(i){return i.querySelector(".swiper-slide-transform")||i.shadowRoot&&i.shadowRoot.querySelector(".swiper-slide-transform")||i}function an(i,e){e===void 0&&(e="");const t=[...i.children];return i instanceof HTMLSlotElement&&t.push(...i.assignedElements()),e?t.filter(n=>n.matches(e)):t}function TS(i,e){const t=e.contains(i);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(i):t}function rd(i){try{console.warn(i);return}catch{}}function Hn(i,e){e===void 0&&(e=[]);const t=document.createElement(i);return t.classList.add(...Array.isArray(e)?e:jr(e)),t}function od(i){const e=Ri(),t=ln(),n=i.getBoundingClientRect(),s=t.body,r=i.clientTop||s.clientTop||0,o=i.clientLeft||s.clientLeft||0,a=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:n.top+a-r,left:n.left+l-o}}function MS(i,e){const t=[];for(;i.previousElementSibling;){const n=i.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function CS(i,e){const t=[];for(;i.nextElementSibling;){const n=i.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function Kr(i,e){return Ri().getComputedStyle(i,null).getPropertyValue(e)}function hc(i){let e=i,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function zo(i,e){const t=[];let n=i.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function Xl(i,e){function t(n){n.target===i&&(e.call(i,n),i.removeEventListener("transitionend",t))}e&&i.addEventListener("transitionend",t)}function Uf(i,e,t){const n=Ri();return i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function qt(i){return(Array.isArray(i)?i:[i]).filter(e=>!!e)}function Od(i){return e=>Math.abs(e)>0&&i.browser&&i.browser.need3dFix&&Math.abs(e)%90===0?e+.001:e}let Sh;function AS(){const i=Ri(),e=ln();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function by(){return Sh||(Sh=AS()),Sh}let Th;function PS(i){let{userAgent:e}=i===void 0?{}:i;const t=by(),n=Ri(),s=n.navigator.platform,r=e||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,u=r.match(/(Android);?[\s\/]+([\d.]+)?/);let c=r.match(/(iPad).*OS\s([\d_]+)/);const d=r.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=s==="Win32";let m=s==="MacIntel";const b=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&m&&t.touch&&b.indexOf(`${a}x${l}`)>=0&&(c=r.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),m=!1),u&&!f&&(o.os="android",o.android=!0),(c||h||d)&&(o.os="ios",o.ios=!0),o}function _y(i){return i===void 0&&(i={}),Th||(Th=PS(i)),Th}let Mh;function LS(){const i=Ri(),e=_y();let t=!1;function n(){const a=i.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(n()){const a=String(i.navigator.userAgent);if(a.includes("Version/")){const[l,u]=a.split("Version/")[1].split(" ")[0].split(".").map(c=>Number(c));t=l<16||l===16&&u<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),r=n(),o=r||s&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:o,isWebView:s}}function RS(){return Mh||(Mh=LS()),Mh}function IS(i){let{swiper:e,on:t,emit:n}=i;const s=Ri();let r=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(d=>{o=s.requestAnimationFrame(()=>{const{width:h,height:f}=e;let m=h,b=f;d.forEach(v=>{let{contentBoxSize:g,contentRect:E,target:w}=v;w&&w!==e.el||(m=E?E.width:(g[0]||g).inlineSize,b=E?E.height:(g[0]||g).blockSize)}),(m!==h||b!==f)&&a()})}),r.observe(e.el))},u=()=>{o&&s.cancelAnimationFrame(o),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},c=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",c)}),t("destroy",()=>{u(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",c)})}function DS(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=[],o=Ri(),a=function(c,d){d===void 0&&(d={});const h=o.MutationObserver||o.WebkitMutationObserver,f=new h(m=>{if(e.__preventObserver__)return;if(m.length===1){s("observerUpdate",m[0]);return}const b=function(){s("observerUpdate",m[0])};o.requestAnimationFrame?o.requestAnimationFrame(b):o.setTimeout(b,0)});f.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),r.push(f)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=zo(e.hostEl);for(let d=0;d<c.length;d+=1)a(c[d])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},u=()=>{r.forEach(c=>{c.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",u)}var OS={on(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return i.split(" ").forEach(r=>{n.eventsListeners[r]||(n.eventsListeners[r]=[]),n.eventsListeners[r][s](e)}),n},once(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function s(){n.off(i,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(n,o)}return s.__emitterProxy=e,n.on(i,s,t)},onAny(i,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(i)<0&&t.eventsAnyListeners[n](i),t},offAny(i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(i);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(i,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||i.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[n].splice(r,1)})}),t},emit(){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let e,t,n;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),n=i):(e=r[0].events,t=r[0].data,n=r[0].context||i),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(u=>{u.apply(n,[l,...t])}),i.eventsListeners&&i.eventsListeners[l]&&i.eventsListeners[l].forEach(u=>{u.apply(n,t)})}),i}};function NS(){const i=this;let e,t;const n=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?t=i.params.height:t=n.clientHeight,!(e===0&&i.isHorizontal()||t===0&&i.isVertical())&&(e=e-parseInt(Kr(n,"padding-left")||0,10)-parseInt(Kr(n,"padding-right")||0,10),t=t-parseInt(Kr(n,"padding-top")||0,10)-parseInt(Kr(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(i,{width:e,height:t,size:i.isHorizontal()?e:t}))}function kS(){const i=this;function e(C,A){return parseFloat(C.getPropertyValue(i.getDirectionLabel(A))||0)}const t=i.params,{wrapperEl:n,slidesEl:s,size:r,rtlTranslate:o,wrongRTL:a}=i,l=i.virtual&&t.virtual.enabled,u=l?i.virtual.slides.length:i.slides.length,c=an(s,`.${i.params.slideClass}, swiper-slide`),d=l?i.virtual.slides.length:c.length;let h=[];const f=[],m=[];let b=t.slidesOffsetBefore;typeof b=="function"&&(b=t.slidesOffsetBefore.call(i));let v=t.slidesOffsetAfter;typeof v=="function"&&(v=t.slidesOffsetAfter.call(i));const g=i.snapGrid.length,E=i.slidesGrid.length;let w=t.spaceBetween,S=-b,I=0,D=0;if(typeof r>"u")return;typeof w=="string"&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*r:typeof w=="string"&&(w=parseFloat(w)),i.virtualSize=-w,c.forEach(C=>{o?C.style.marginLeft="":C.style.marginRight="",C.style.marginBottom="",C.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Gl(n,"--swiper-centered-offset-before",""),Gl(n,"--swiper-centered-offset-after",""));const y=t.grid&&t.grid.rows>1&&i.grid;y?i.grid.initSlides(c):i.grid&&i.grid.unsetSlides();let B;const V=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(C=>typeof t.breakpoints[C].slidesPerView<"u").length>0;for(let C=0;C<d;C+=1){B=0;let A;if(c[C]&&(A=c[C]),y&&i.grid.updateSlide(C,A,c),!(c[C]&&Kr(A,"display")==="none")){if(t.slidesPerView==="auto"){V&&(c[C].style[i.getDirectionLabel("width")]="");const H=getComputedStyle(A),P=A.style.transform,F=A.style.webkitTransform;if(P&&(A.style.transform="none"),F&&(A.style.webkitTransform="none"),t.roundLengths)B=i.isHorizontal()?Uf(A,"width"):Uf(A,"height");else{const Y=e(H,"width"),Q=e(H,"padding-left"),G=e(H,"padding-right"),z=e(H,"margin-left"),ue=e(H,"margin-right"),Ee=H.getPropertyValue("box-sizing");if(Ee&&Ee==="border-box")B=Y+z+ue;else{const{clientWidth:J,offsetWidth:W}=A;B=Y+Q+G+z+ue+(W-J)}}P&&(A.style.transform=P),F&&(A.style.webkitTransform=F),t.roundLengths&&(B=Math.floor(B))}else B=(r-(t.slidesPerView-1)*w)/t.slidesPerView,t.roundLengths&&(B=Math.floor(B)),c[C]&&(c[C].style[i.getDirectionLabel("width")]=`${B}px`);c[C]&&(c[C].swiperSlideSize=B),m.push(B),t.centeredSlides?(S=S+B/2+I/2+w,I===0&&C!==0&&(S=S-r/2-w),C===0&&(S=S-r/2-w),Math.abs(S)<1/1e3&&(S=0),t.roundLengths&&(S=Math.floor(S)),D%t.slidesPerGroup===0&&h.push(S),f.push(S)):(t.roundLengths&&(S=Math.floor(S)),(D-Math.min(i.params.slidesPerGroupSkip,D))%i.params.slidesPerGroup===0&&h.push(S),f.push(S),S=S+B+w),i.virtualSize+=B+w,I=B,D+=1}}if(i.virtualSize=Math.max(i.virtualSize,r)+v,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(n.style.width=`${i.virtualSize+w}px`),t.setWrapperSize&&(n.style[i.getDirectionLabel("width")]=`${i.virtualSize+w}px`),y&&i.grid.updateWrapperSize(B,h),!t.centeredSlides){const C=[];for(let A=0;A<h.length;A+=1){let H=h[A];t.roundLengths&&(H=Math.floor(H)),h[A]<=i.virtualSize-r&&C.push(H)}h=C,Math.floor(i.virtualSize-r)-Math.floor(h[h.length-1])>1&&h.push(i.virtualSize-r)}if(l&&t.loop){const C=m[0]+w;if(t.slidesPerGroup>1){const A=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/t.slidesPerGroup),H=C*t.slidesPerGroup;for(let P=0;P<A;P+=1)h.push(h[h.length-1]+H)}for(let A=0;A<i.virtual.slidesBefore+i.virtual.slidesAfter;A+=1)t.slidesPerGroup===1&&h.push(h[h.length-1]+C),f.push(f[f.length-1]+C),i.virtualSize+=C}if(h.length===0&&(h=[0]),w!==0){const C=i.isHorizontal()&&o?"marginLeft":i.getDirectionLabel("marginRight");c.filter((A,H)=>!t.cssMode||t.loop?!0:H!==c.length-1).forEach(A=>{A.style[C]=`${w}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let C=0;m.forEach(H=>{C+=H+(w||0)}),C-=w;const A=C>r?C-r:0;h=h.map(H=>H<=0?-b:H>A?A+v:H)}if(t.centerInsufficientSlides){let C=0;m.forEach(H=>{C+=H+(w||0)}),C-=w;const A=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(C+A<r){const H=(r-C-A)/2;h.forEach((P,F)=>{h[F]=P-H}),f.forEach((P,F)=>{f[F]=P+H})}}if(Object.assign(i,{slides:c,snapGrid:h,slidesGrid:f,slidesSizesGrid:m}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Gl(n,"--swiper-centered-offset-before",`${-h[0]}px`),Gl(n,"--swiper-centered-offset-after",`${i.size/2-m[m.length-1]/2}px`);const C=-i.snapGrid[0],A=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(H=>H+C),i.slidesGrid=i.slidesGrid.map(H=>H+A)}if(d!==u&&i.emit("slidesLengthChange"),h.length!==g&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),f.length!==E&&i.emit("slidesGridLengthChange"),t.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const C=`${t.containerModifierClass}backface-hidden`,A=i.el.classList.contains(C);d<=t.maxBackfaceHiddenSlides?A||i.el.classList.add(C):A&&i.el.classList.remove(C)}}function FS(i){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);const o=a=>n?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const a=e.activeIndex+r;if(a>e.slides.length&&!n)break;t.push(o(a))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){const a=t[r].offsetHeight;s=a>s?a:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function US(){const i=this,e=i.slides,t=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(i.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-i.cssOverflowAdjustment()}const Fg=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function zS(i){i===void 0&&(i=this&&this.translate||0);const e=this,t=e.params,{slides:n,rtlTranslate:s,snapGrid:r}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-i;s&&(o=i),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<n.length;l+=1){const u=n[l];let c=u.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=n[0].swiperSlideOffset);const d=(o+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+a),h=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+a),f=-(o-c),m=f+e.slidesSizesGrid[l],b=f>=0&&f<=e.size-e.slidesSizesGrid[l],v=f>=0&&f<e.size-1||m>1&&m<=e.size||f<=0&&m>=e.size;v&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l)),Fg(u,v,t.slideVisibleClass),Fg(u,b,t.slideFullyVisibleClass),u.progress=s?-d:d,u.originalProgress=s?-h:h}}function BS(i){const e=this;if(typeof i>"u"){const c=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*c||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:o,progressLoop:a}=e;const l=r,u=o;if(n===0)s=0,r=!0,o=!0;else{s=(i-e.minTranslate())/n;const c=Math.abs(i-e.minTranslate())<1,d=Math.abs(i-e.maxTranslate())<1;r=c||s<=0,o=d||s>=1,c&&(s=0),d&&(s=1)}if(t.loop){const c=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[c],f=e.slidesGrid[d],m=e.slidesGrid[e.slidesGrid.length-1],b=Math.abs(i);b>=h?a=(b-h)/m:a=(b+m-f)/m,a>1&&(a-=1)}Object.assign(e,{progress:s,progressLoop:a,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(i),r&&!l&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(l&&!r||u&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}const Ch=(i,e,t)=>{e&&!i.classList.contains(t)?i.classList.add(t):!e&&i.classList.contains(t)&&i.classList.remove(t)};function HS(){const i=this,{slides:e,params:t,slidesEl:n,activeIndex:s}=i,r=i.virtual&&t.virtual.enabled,o=i.grid&&t.grid&&t.grid.rows>1,a=d=>an(n,`.${t.slideClass}${d}, swiper-slide${d}`)[0];let l,u,c;if(r)if(t.loop){let d=s-i.virtual.slidesBefore;d<0&&(d=i.virtual.slides.length+d),d>=i.virtual.slides.length&&(d-=i.virtual.slides.length),l=a(`[data-swiper-slide-index="${d}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=e.filter(d=>d.column===s)[0],c=e.filter(d=>d.column===s+1)[0],u=e.filter(d=>d.column===s-1)[0]):l=e[s];l&&(o||(c=CS(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c&&(c=e[0]),u=MS(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(d=>{Ch(d,d===l,t.slideActiveClass),Ch(d,d===c,t.slideNextClass),Ch(d,d===u,t.slidePrevClass)}),i.emitSlidesClasses()}const zu=(i,e)=>{if(!i||i.destroyed||!i.params)return;const t=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=e.closest(t());if(n){let s=n.querySelector(`.${i.params.lazyPreloaderClass}`);!s&&i.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},Ah=(i,e)=>{if(!i.slides[e])return;const t=i.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},zf=i=>{if(!i||i.destroyed||!i.params)return;let e=i.params.lazyPreloadPrevNext;const t=i.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),s=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const o=s,a=[o-e];a.push(...Array.from({length:e}).map((l,u)=>o+n+u)),i.slides.forEach((l,u)=>{a.includes(l.column)&&Ah(i,u)});return}const r=s+n-1;if(i.params.rewind||i.params.loop)for(let o=s-e;o<=r+e;o+=1){const a=(o%t+t)%t;(a<s||a>r)&&Ah(i,a)}else for(let o=Math.max(s-e,0);o<=Math.min(r+e,t-1);o+=1)o!==s&&(o>r||o<s)&&Ah(i,o)};function VS(i){const{slidesGrid:e,params:t}=i,n=i.rtlTranslate?i.translate:-i.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?n>=e[r]&&n<e[r+1]-(e[r+1]-e[r])/2?s=r:n>=e[r]&&n<e[r+1]&&(s=r+1):n>=e[r]&&(s=r);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function $S(i){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:s,activeIndex:r,realIndex:o,snapIndex:a}=e;let l=i,u;const c=f=>{let m=f-e.virtual.slidesBefore;return m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),m};if(typeof l>"u"&&(l=VS(e)),n.indexOf(t)>=0)u=n.indexOf(t);else{const f=Math.min(s.slidesPerGroupSkip,l);u=f+Math.floor((l-f)/s.slidesPerGroup)}if(u>=n.length&&(u=n.length-1),l===r&&!e.params.loop){u!==a&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=c(l);return}const d=e.grid&&s.grid&&s.grid.rows>1;let h;if(e.virtual&&s.virtual.enabled&&s.loop)h=c(l);else if(d){const f=e.slides.filter(b=>b.column===l)[0];let m=parseInt(f.getAttribute("data-swiper-slide-index"),10);Number.isNaN(m)&&(m=Math.max(e.slides.indexOf(f),0)),h=Math.floor(m/s.grid.rows)}else if(e.slides[l]){const f=e.slides[l].getAttribute("data-swiper-slide-index");f?h=parseInt(f,10):h=l}else h=l;Object.assign(e,{previousSnapIndex:a,snapIndex:u,previousRealIndex:o,realIndex:h,previousIndex:r,activeIndex:l}),e.initialized&&zf(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==h&&e.emit("realIndexChange"),e.emit("slideChange"))}function GS(i,e){const t=this,n=t.params;let s=i.closest(`.${n.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(i)&&[...e.slice(e.indexOf(i)+1,e.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${n.slideClass}, swiper-slide`)&&(s=a)});let r=!1,o;if(s){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===s){r=!0,o=a;break}}if(s&&r)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var WS={updateSize:NS,updateSlides:kS,updateAutoHeight:FS,updateSlidesOffset:US,updateSlidesProgress:zS,updateProgress:BS,updateSlidesClasses:HS,updateActiveIndex:$S,updateClickedSlide:GS};function jS(i){i===void 0&&(i=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:n,translate:s,wrapperEl:r}=e;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let o=Ff(r,i);return o+=e.cssOverflowAdjustment(),n&&(o=-o),o||0}function qS(i,e){const t=this,{rtlTranslate:n,params:s,wrapperEl:r,progress:o}=t;let a=0,l=0;const u=0;t.isHorizontal()?a=n?-i:i:l=i,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,s.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:s.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${u}px)`);let c;const d=t.maxTranslate()-t.minTranslate();d===0?c=0:c=(i-t.minTranslate())/d,c!==o&&t.updateProgress(i),t.emit("setTranslate",t.translate,e)}function XS(){return-this.snapGrid[0]}function YS(){return-this.snapGrid[this.snapGrid.length-1]}function KS(i,e,t,n,s){i===void 0&&(i=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);const r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const l=r.minTranslate(),u=r.maxTranslate();let c;if(n&&i>l?c=l:n&&i<u?c=u:c=i,r.updateProgress(c),o.cssMode){const d=r.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-c;else{if(!r.support.smoothScroll)return yy({swiper:r,targetPosition:-c,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(c),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(c),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(h){!r||r.destroyed||h.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var ZS={getTranslate:jS,setTranslate:qS,minTranslate:XS,maxTranslate:YS,translateTo:KS};function QS(i,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${i}ms`,t.wrapperEl.style.transitionDelay=i===0?"0ms":""),t.emit("setTransition",i,e)}function Ey(i){let{swiper:e,runCallbacks:t,direction:n,step:s}=i;const{activeIndex:r,previousIndex:o}=e;let a=n;if(a||(r>o?a="next":r<o?a="prev":a="reset"),e.emit(`transition${s}`),t&&r!==o){if(a==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),a==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function JS(i,e){i===void 0&&(i=!0);const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),Ey({swiper:t,runCallbacks:i,direction:e,step:"Start"}))}function e1(i,e){i===void 0&&(i=!0);const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),Ey({swiper:t,runCallbacks:i,direction:e,step:"End"}))}var t1={setTransition:QS,transitionStart:JS,transitionEnd:e1};function i1(i,e,t,n,s){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));const r=this;let o=i;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:m}=r;if(!m&&!n&&!s||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);const b=Math.min(r.params.slidesPerGroupSkip,o);let v=b+Math.floor((o-b)/r.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(a.normalizeSlideIndex)for(let I=0;I<u.length;I+=1){const D=-Math.floor(g*100),y=Math.floor(u[I]*100),B=Math.floor(u[I+1]*100);typeof u[I+1]<"u"?D>=y&&D<B-(B-y)/2?o=I:D>=y&&D<B&&(o=I+1):D>=y&&(o=I)}if(r.initialized&&o!==d&&(!r.allowSlideNext&&(h?g>r.translate&&g>r.minTranslate():g<r.translate&&g<r.minTranslate())||!r.allowSlidePrev&&g>r.translate&&g>r.maxTranslate()&&(d||0)!==o))return!1;o!==(c||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(g);let E;o>d?E="next":o<d?E="prev":E="reset";const w=r.virtual&&r.params.virtual.enabled;if(!(w&&s)&&(h&&-g===r.translate||!h&&g===r.translate))return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(g),E!=="reset"&&(r.transitionStart(t,E),r.transitionEnd(t,E)),!1;if(a.cssMode){const I=r.isHorizontal(),D=h?g:-g;if(e===0)w&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),w&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[I?"scrollLeft":"scrollTop"]=D})):f[I?"scrollLeft":"scrollTop"]=D,w&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return yy({swiper:r,targetPosition:D,side:I?"left":"top"}),!0;f.scrollTo({[I?"left":"top"]:D,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(g),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,n),r.transitionStart(t,E),e===0?r.transitionEnd(t,E):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(D){!r||r.destroyed||D.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,E))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function n1(i,e,t,n){i===void 0&&(i=0),t===void 0&&(t=!0),typeof i=="string"&&(i=parseInt(i,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=i;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(r){const h=o*s.params.grid.rows;a=s.slides.filter(f=>f.getAttribute("data-swiper-slide-index")*1===h)[0].column}else a=s.getSlideIndexByData(o);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:u}=s.params;let c=s.params.slidesPerView;c==="auto"?c=s.slidesPerViewDynamic():(c=Math.ceil(parseFloat(s.params.slidesPerView,10)),u&&c%2===0&&(c=c+1));let d=l-a<c;if(u&&(d=d||a<Math.ceil(c/2)),n&&u&&s.params.slidesPerView!=="auto"&&!r&&(d=!1),d){const h=u?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?a+1:a-l+1,slideRealIndex:h==="next"?s.realIndex:void 0})}if(r){const h=o*s.params.grid.rows;o=s.slides.filter(f=>f.getAttribute("data-swiper-slide-index")*1===h)[0].column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,t,n)}),s}function s1(i,e,t){e===void 0&&(e=!0);const n=this,{enabled:s,params:r,animating:o}=n;if(!s||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<r.slidesPerGroupSkip?1:a,u=n.virtual&&r.virtual.enabled;if(r.loop){if(o&&!u&&r.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,i,e,t)}),!0}return r.rewind&&n.isEnd?n.slideTo(0,i,e,t):n.slideTo(n.activeIndex+l,i,e,t)}function r1(i,e,t){e===void 0&&(e=!0);const n=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:u}=n;if(!l||n.destroyed)return n;typeof i>"u"&&(i=n.params.speed);const c=n.virtual&&s.virtual.enabled;if(s.loop){if(u&&!c&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const d=a?n.translate:-n.translate;function h(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const f=h(d),m=r.map(g=>h(g));let b=r[m.indexOf(f)-1];if(typeof b>"u"&&s.cssMode){let g;r.forEach((E,w)=>{f>=E&&(g=w)}),typeof g<"u"&&(b=r[g>0?g-1:g])}let v=0;if(typeof b<"u"&&(v=o.indexOf(b),v<0&&(v=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(v=v-n.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),s.rewind&&n.isBeginning){const g=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(g,i,e,t)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(v,i,e,t)}),!0;return n.slideTo(v,i,e,t)}function o1(i,e,t){e===void 0&&(e=!0);const n=this;if(!n.destroyed)return typeof i>"u"&&(i=n.params.speed),n.slideTo(n.activeIndex,i,e,t)}function a1(i,e,t,n){e===void 0&&(e=!0),n===void 0&&(n=.5);const s=this;if(s.destroyed)return;typeof i>"u"&&(i=s.params.speed);let r=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const u=s.snapGrid[a],c=s.snapGrid[a+1];l-u>(c-u)*n&&(r+=s.params.slidesPerGroup)}else{const u=s.snapGrid[a-1],c=s.snapGrid[a];l-u<=(c-u)*n&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,i,e,t)}function l1(){const i=this;if(i.destroyed)return;const{params:e,slidesEl:t}=i,n=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView;let s=i.clickedIndex,r;const o=i.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(i.animating)return;r=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<i.loopedSlides-n/2||s>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),s=i.getSlideIndex(an(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Vo(()=>{i.slideTo(s)})):i.slideTo(s):s>i.slides.length-n?(i.loopFix(),s=i.getSlideIndex(an(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Vo(()=>{i.slideTo(s)})):i.slideTo(s)}else i.slideTo(s)}var c1={slideTo:i1,slideToLoop:n1,slideNext:s1,slidePrev:r1,slideReset:o1,slideToClosest:a1,slideToClickedSlide:l1};function u1(i){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const s=()=>{an(n,`.${t.slideClass}, swiper-slide`).forEach((d,h)=>{d.setAttribute("data-swiper-slide-index",h)})},r=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(r?t.grid.rows:1),a=e.slides.length%o!==0,l=r&&e.slides.length%t.grid.rows!==0,u=c=>{for(let d=0;d<c;d+=1){const h=e.isElement?Hn("swiper-slide",[t.slideBlankClass]):Hn("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(h)}};if(a){if(t.loopAddBlankSlides){const c=o-e.slides.length%o;u(c),e.recalcSlides(),e.updateSlides()}else rd("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(t.loopAddBlankSlides){const c=t.grid.rows-e.slides.length%t.grid.rows;u(c),e.recalcSlides(),e.updateSlides()}else rd("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:i,direction:t.centeredSlides?void 0:"next"})}function d1(i){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:s,activeSlideIndex:r,byController:o,byMousewheel:a}=i===void 0?{}:i;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:d,slidesEl:h,params:f}=l,{centeredSlides:m}=f;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=d,l.emit("loopFix");return}let b=f.slidesPerView;b==="auto"?b=l.slidesPerViewDynamic():(b=Math.ceil(parseFloat(f.slidesPerView,10)),m&&b%2===0&&(b=b+1));const v=f.slidesPerGroupAuto?b:f.slidesPerGroup;let g=v;g%v!==0&&(g+=v-g%v),g+=f.loopAdditionalSlides,l.loopedSlides=g;const E=l.grid&&f.grid&&f.grid.rows>1;u.length<b+g?rd("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):E&&f.grid.fill==="row"&&rd("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],S=[];let I=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(u.filter(P=>P.classList.contains(f.slideActiveClass))[0]):I=r;const D=n==="next"||!n,y=n==="prev"||!n;let B=0,V=0;const C=E?Math.ceil(u.length/f.grid.rows):u.length,H=(E?u[r].column:r)+(m&&typeof s>"u"?-b/2+.5:0);if(H<g){B=Math.max(g-H,v);for(let P=0;P<g-H;P+=1){const F=P-Math.floor(P/C)*C;if(E){const Y=C-F-1;for(let Q=u.length-1;Q>=0;Q-=1)u[Q].column===Y&&w.push(Q)}else w.push(C-F-1)}}else if(H+b>C-g){V=Math.max(H-(C-g*2),v);for(let P=0;P<V;P+=1){const F=P-Math.floor(P/C)*C;E?u.forEach((Y,Q)=>{Y.column===F&&S.push(Q)}):S.push(F)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),y&&w.forEach(P=>{u[P].swiperLoopMoveDOM=!0,h.prepend(u[P]),u[P].swiperLoopMoveDOM=!1}),D&&S.forEach(P=>{u[P].swiperLoopMoveDOM=!0,h.append(u[P]),u[P].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"?l.updateSlides():E&&(w.length>0&&y||S.length>0&&D)&&l.slides.forEach((P,F)=>{l.grid.updateSlide(F,P,l.slides)}),f.watchSlidesProgress&&l.updateSlidesOffset(),t){if(w.length>0&&y){if(typeof e>"u"){const P=l.slidesGrid[I],Y=l.slidesGrid[I+B]-P;a?l.setTranslate(l.translate-Y):(l.slideTo(I+Math.ceil(B),0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-Y,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-Y))}else if(s){const P=E?w.length/f.grid.rows:w.length;l.slideTo(l.activeIndex+P,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(S.length>0&&D)if(typeof e>"u"){const P=l.slidesGrid[I],Y=l.slidesGrid[I-V]-P;a?l.setTranslate(l.translate-Y):(l.slideTo(I-V,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-Y,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-Y))}else{const P=E?S.length/f.grid.rows:S.length;l.slideTo(l.activeIndex-P,0,!1,!0)}}if(l.allowSlidePrev=c,l.allowSlideNext=d,l.controller&&l.controller.control&&!o){const P={slideRealIndex:e,direction:n,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(F=>{!F.destroyed&&F.params.loop&&F.loopFix({...P,slideTo:F.params.slidesPerView===f.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...P,slideTo:l.controller.control.params.slidesPerView===f.slidesPerView?t:!1})}l.emit("loopFix")}function h1(){const i=this,{params:e,slidesEl:t}=i;if(!e.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const n=[];i.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[r]=s}),i.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{t.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var f1={loopCreate:u1,loopFix:d1,loopDestroy:h1};function p1(i){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=i?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function m1(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var g1={setGrabCursor:p1,unsetGrabCursor:m1};function v1(i,e){e===void 0&&(e=this);function t(n){if(!n||n===ln()||n===Ri())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(i);return!s&&!n.getRootNode?null:s||t(n.getRootNode().host)}return t(e)}function Ug(i,e,t){const n=Ri(),{params:s}=i,r=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return r&&(t<=o||t>=n.innerWidth-o)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function y1(i){const e=this,t=ln();let n=i;n.originalEvent&&(n=n.originalEvent);const s=e.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){Ug(e,n,n.targetTouches[0].pageX);return}const{params:r,touches:o,enabled:a}=e;if(!a||!r.simulateTouch&&n.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=n.target;if(r.touchEventsTarget==="wrapper"&&!TS(l,e.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const u=!!r.noSwipingClass&&r.noSwipingClass!=="",c=n.composedPath?n.composedPath():n.path;u&&n.target&&n.target.shadowRoot&&c&&(l=c[0]);const d=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,h=!!(n.target&&n.target.shadowRoot);if(r.noSwiping&&(h?v1(d,l):l.closest(d))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=n.pageX,o.currentY=n.pageY;const f=o.currentX,m=o.currentY;if(!Ug(e,n,f))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=f,o.startY=m,s.touchStartTime=as(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let b=!0;l.matches(s.focusableElements)&&(b=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==l&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&t.activeElement.blur();const v=b&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||v)&&!l.isContentEditable&&n.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function b1(i){const e=ln(),t=this,n=t.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:a}=t;if(!a||!s.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(n.touchId!==null||l.pointerId!==n.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].filter(D=>D.identifier===n.touchId)[0],!u||u.identifier!==n.touchId)return}else u=l;if(!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=u.pageX,d=u.pageY;if(l.preventedByNestedSwiper){r.startX=c,r.startY=d;return}if(!t.allowTouchMove){l.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(r,{startX:c,startY:d,currentX:c,currentY:d}),n.touchStartTime=as());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(d<r.startY&&t.translate<=t.maxTranslate()||d>r.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(c<r.startX&&t.translate<=t.maxTranslate()||c>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(n.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}n.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=c,r.currentY=d;const h=r.currentX-r.startX,f=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(h**2+f**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let D;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?n.isScrolling=!1:h*h+f*f>=25&&(D=Math.atan2(Math.abs(f),Math.abs(h))*180/Math.PI,n.isScrolling=t.isHorizontal()?D>s.touchAngle:90-D>s.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(n.startMoving=!0),n.isScrolling||l.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let m=t.isHorizontal()?h:f,b=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(m=Math.abs(m)*(o?1:-1),b=Math.abs(b)*(o?1:-1)),r.diff=m,m*=s.touchRatio,o&&(m=-m,b=-b);const v=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=b>0?"prev":"next";const g=t.params.loop&&!s.cssMode,E=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(g&&E&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(D)}n.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let w;if(new Date().getTime(),n.isMoved&&n.allowThresholdMove&&v!==t.touchesDirection&&g&&E&&Math.abs(m)>=1){Object.assign(r,{startX:c,startY:d,currentX:c,currentY:d,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}t.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=m+n.startTranslate;let S=!0,I=s.resistanceRatio;if(s.touchReleaseOnEdges&&(I=0),m>0?(g&&E&&!w&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(S=!1,s.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+m)**I))):m<0&&(g&&E&&!w&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(S=!1,s.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-m)**I))),S&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(m)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,n.currentTranslate=n.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function _1(i){const e=this,t=e.touchEventsData;let n=i;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].filter(I=>I.identifier===t.touchId)[0],!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||n.pointerId!==t.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:u,enabled:c}=e;if(!c||!o.simulateTouch&&n.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",n),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=as(),h=d-t.touchStartTime;if(e.allowClick){const I=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(I&&I[0]||n.target,I),e.emit("tap click",n),h<300&&d-t.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(t.lastClickTime=as(),Vo(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(o.followFinger?f=l?e.translate:-e.translate:f=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}const m=f>=-e.maxTranslate()&&!e.params.loop;let b=0,v=e.slidesSizesGrid[0];for(let I=0;I<u.length;I+=I<o.slidesPerGroupSkip?1:o.slidesPerGroup){const D=I<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[I+D]<"u"?(m||f>=u[I]&&f<u[I+D])&&(b=I,v=u[I+D]-u[I]):(m||f>=u[I])&&(b=I,v=u[u.length-1]-u[u.length-2])}let g=null,E=null;o.rewind&&(e.isBeginning?E=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const w=(f-u[b])/v,S=b<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(h>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(w>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?g:b+S):e.slideTo(b)),e.swipeDirection==="prev"&&(w>1-o.longSwipesRatio?e.slideTo(b+S):E!==null&&w<0&&Math.abs(w)>o.longSwipesRatio?e.slideTo(E):e.slideTo(b))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(b+S):e.slideTo(b):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:b+S),e.swipeDirection==="prev"&&e.slideTo(E!==null?E:b))}}function zg(){const i=this,{params:e,el:t}=i;if(t&&t.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:r}=i,o=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!a?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!o?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=s,i.allowSlideNext=n,i.params.watchOverflow&&r!==i.snapGrid&&i.checkOverflow()}function E1(i){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function w1(){const i=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let s;const r=i.maxTranslate()-i.minTranslate();r===0?s=0:s=(i.translate-i.minTranslate())/r,s!==i.progress&&i.updateProgress(t?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function x1(i){const e=this;zu(e,i.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function S1(){const i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}const wy=(i,e)=>{const t=ln(),{params:n,el:s,wrapperEl:r,device:o}=i,a=!!n.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;!s||typeof s=="string"||(t[l]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",i.onTouchStart,{passive:!1}),s[l]("pointerdown",i.onTouchStart,{passive:!1}),t[l]("touchmove",i.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",i.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",i.onTouchEnd,{passive:!0}),t[l]("pointerup",i.onTouchEnd,{passive:!0}),t[l]("pointercancel",i.onTouchEnd,{passive:!0}),t[l]("touchcancel",i.onTouchEnd,{passive:!0}),t[l]("pointerout",i.onTouchEnd,{passive:!0}),t[l]("pointerleave",i.onTouchEnd,{passive:!0}),t[l]("contextmenu",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[l]("click",i.onClick,!0),n.cssMode&&r[l]("scroll",i.onScroll),n.updateOnWindowResize?i[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",zg,!0):i[u]("observerUpdate",zg,!0),s[l]("load",i.onLoad,{capture:!0}))};function T1(){const i=this,{params:e}=i;i.onTouchStart=y1.bind(i),i.onTouchMove=b1.bind(i),i.onTouchEnd=_1.bind(i),i.onDocumentTouchStart=S1.bind(i),e.cssMode&&(i.onScroll=w1.bind(i)),i.onClick=E1.bind(i),i.onLoad=x1.bind(i),wy(i,"on")}function M1(){wy(this,"off")}var C1={attachEvents:T1,detachEvents:M1};const Bg=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function A1(){const i=this,{realIndex:e,initialized:t,params:n,el:s}=i,r=n.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const o=i.getBreakpoint(r,i.params.breakpointsBase,i.el);if(!o||i.currentBreakpoint===o)return;const l=(o in r?r[o]:void 0)||i.originalParams,u=Bg(i,n),c=Bg(i,l),d=i.params.grabCursor,h=l.grabCursor,f=n.enabled;u&&!c?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!u&&c&&(s.classList.add(`${n.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),d&&!h?i.unsetGrabCursor():!d&&h&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(w=>{if(typeof l[w]>"u")return;const S=n[w]&&n[w].enabled,I=l[w]&&l[w].enabled;S&&!I&&i[w].disable(),!S&&I&&i[w].enable()});const m=l.direction&&l.direction!==n.direction,b=n.loop&&(l.slidesPerView!==n.slidesPerView||m),v=n.loop;m&&t&&i.changeDirection(),Un(i.params,l);const g=i.params.enabled,E=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),f&&!g?i.disable():!f&&g&&i.enable(),i.currentBreakpoint=o,i.emit("_beforeBreakpoint",l),t&&(b?(i.loopDestroy(),i.loopCreate(e),i.updateSlides()):!v&&E?(i.loopCreate(e),i.updateSlides()):v&&!E&&i.loopDestroy()),i.emit("breakpoint",l)}function P1(i,e,t){if(e===void 0&&(e="window"),!i||e==="container"&&!t)return;let n=!1;const s=Ri(),r=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(i).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:u}=o[a];e==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(n=l):u<=t.clientWidth&&(n=l)}return n||"max"}var L1={setBreakpoint:A1,getBreakpoint:P1};function R1(i,e){const t=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&t.push(e+s)}):typeof n=="string"&&t.push(e+n)}),t}function I1(){const i=this,{classNames:e,params:t,rtl:n,el:s,device:r}=i,o=R1(["initialized",t.direction,{"free-mode":i.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),i.emitContainerClasses()}function D1(){const i=this,{el:e,classNames:t}=i;!e||typeof e=="string"||(e.classList.remove(...t),i.emitContainerClasses())}var O1={addClasses:I1,removeClasses:D1};function N1(){const i=this,{isLocked:e,params:t}=i,{slidesOffsetBefore:n}=t;if(n){const s=i.slides.length-1,r=i.slidesGrid[s]+i.slidesSizesGrid[s]+n*2;i.isLocked=i.size>r}else i.isLocked=i.snapGrid.length===1;t.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),t.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var k1={checkOverflow:N1},Hg={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function F1(i,e){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],r=n[s];if(typeof r!="object"||r===null){Un(e,n);return}if(i[s]===!0&&(i[s]={enabled:!0}),s==="navigation"&&i[s]&&i[s].enabled&&!i[s].prevEl&&!i[s].nextEl&&(i[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&i[s]&&i[s].enabled&&!i[s].el&&(i[s].auto=!0),!(s in i&&"enabled"in r)){Un(e,n);return}typeof i[s]=="object"&&!("enabled"in i[s])&&(i[s].enabled=!0),i[s]||(i[s]={enabled:!1}),Un(e,n)}}const Ph={eventsEmitter:OS,update:WS,translate:ZS,transition:t1,slide:c1,loop:f1,grabCursor:g1,events:C1,breakpoints:L1,checkOverflow:k1,classes:O1},Lh={};class gi{constructor(){let e,t;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=Un({},t),e&&!t.el&&(t.el=e);const o=ln();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const c=[];return o.querySelectorAll(t.el).forEach(d=>{const h=Un({},t,{el:d});c.push(new gi(h))}),c}const a=this;a.__swiper__=!0,a.support=by(),a.device=_y({userAgent:t.userAgent}),a.browser=RS(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(c=>{c({params:t,swiper:a,extendParams:F1(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const u=Un({},Hg,l);return a.params=Un({},u,Lh,t),a.originalParams=Un({},a.params),a.passedParams=Un({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(c=>{a.on(c,a.params.on[c])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=an(t,`.${n.slideClass}, swiper-slide`),r=hc(s[0]);return hc(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=an(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),o=(n.maxTranslate()-s)*e+s;n.translateTo(o,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const n=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:u}=n;let c=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let d=r[u]?Math.ceil(r[u].swiperSlideSize):0,h;for(let f=u+1;f<r.length;f+=1)r[f]&&!h&&(d+=Math.ceil(r[f].swiperSlideSize),c+=1,d>l&&(h=!0));for(let f=u-1;f>=0;f-=1)r[f]&&!h&&(d+=r[f].swiperSlideSize,c+=1,d>l&&(h=!0))}else if(e==="current")for(let d=u+1;d<r.length;d+=1)(t?o[d]+a[d]-o[u]<l:o[d]-o[u]<l)&&(c+=1);else for(let d=u-1;d>=0;d-=1)o[u]-o[d]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&zu(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const o=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const n=this,s=n.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):an(n,s())[0];return!o&&t.params.createElements&&(o=Hn("div",t.params.wrapperClass),n.append(o),an(n,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:n,wrapperEl:o,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:o,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||Kr(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||Kr(n,"direction")==="rtl"),wrongRTL:Kr(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?zu(t,r):r.addEventListener("load",o=>{zu(t,o.target)})}),zf(t),t.initialized=!0,zf(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const n=this,{params:s,el:r,wrapperEl:o,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),wS(n)),n.destroyed=!0),null}static extendDefaults(e){Un(Lh,e)}static get extendedDefaults(){return Lh}static get defaults(){return Hg}static installModule(e){gi.prototype.__modules__||(gi.prototype.__modules__=[]);const t=gi.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>gi.installModule(t)),gi):(gi.installModule(e),gi)}}Object.keys(Ph).forEach(i=>{Object.keys(Ph[i]).forEach(e=>{gi.prototype[e]=Ph[i][e]})});gi.use([IS,DS]);function U1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let r;const o=ln();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const a=o.createElement("div");function l(m,b){const v=e.params.virtual;if(v.cache&&e.virtual.cache[b])return e.virtual.cache[b];let g;return v.renderSlide?(g=v.renderSlide.call(e,m,b),typeof g=="string"&&(a.innerHTML=g,g=a.children[0])):e.isElement?g=Hn("swiper-slide"):g=Hn("div",e.params.slideClass),g.setAttribute("data-swiper-slide-index",b),v.renderSlide||(g.innerHTML=m),v.cache&&(e.virtual.cache[b]=g),g}function u(m,b){const{slidesPerView:v,slidesPerGroup:g,centeredSlides:E,loop:w,initialSlide:S}=e.params;if(b&&!w&&S>0)return;const{addSlidesBefore:I,addSlidesAfter:D}=e.params.virtual,{from:y,to:B,slides:V,slidesGrid:C,offset:A}=e.virtual;e.params.cssMode||e.updateActiveIndex();const H=e.activeIndex||0;let P;e.rtlTranslate?P="right":P=e.isHorizontal()?"left":"top";let F,Y;E?(F=Math.floor(v/2)+g+D,Y=Math.floor(v/2)+g+I):(F=v+(g-1)+D,Y=(w?v:g)+I);let Q=H-Y,G=H+F;w||(Q=Math.max(Q,0),G=Math.min(G,V.length-1));let z=(e.slidesGrid[Q]||0)-(e.slidesGrid[0]||0);w&&H>=Y?(Q-=Y,E||(z+=e.slidesGrid[0])):w&&H<Y&&(Q=-Y,E&&(z+=e.slidesGrid[0])),Object.assign(e.virtual,{from:Q,to:G,offset:z,slidesGrid:e.slidesGrid,slidesBefore:Y,slidesAfter:F});function ue(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s("virtualUpdate")}if(y===Q&&B===G&&!m){e.slidesGrid!==C&&z!==A&&e.slides.forEach(j=>{j.style[P]=`${z-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),s("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:z,from:Q,to:G,slides:function(){const me=[];for(let ge=Q;ge<=G;ge+=1)me.push(V[ge]);return me}()}),e.params.virtual.renderExternalUpdate?ue():s("virtualUpdate");return}const Ee=[],J=[],W=j=>{let me=j;return j<0?me=V.length+j:me>=V.length&&(me=me-V.length),me};if(m)e.slides.filter(j=>j.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(j=>{j.remove()});else for(let j=y;j<=B;j+=1)if(j<Q||j>G){const me=W(j);e.slides.filter(ge=>ge.matches(`.${e.params.slideClass}[data-swiper-slide-index="${me}"], swiper-slide[data-swiper-slide-index="${me}"]`)).forEach(ge=>{ge.remove()})}const oe=w?-V.length:0,ie=w?V.length*2:V.length;for(let j=oe;j<ie;j+=1)if(j>=Q&&j<=G){const me=W(j);typeof B>"u"||m?J.push(me):(j>B&&J.push(me),j<y&&Ee.push(me))}if(J.forEach(j=>{e.slidesEl.append(l(V[j],j))}),w)for(let j=Ee.length-1;j>=0;j-=1){const me=Ee[j];e.slidesEl.prepend(l(V[me],me))}else Ee.sort((j,me)=>me-j),Ee.forEach(j=>{e.slidesEl.prepend(l(V[j],j))});an(e.slidesEl,".swiper-slide, swiper-slide").forEach(j=>{j.style[P]=`${z-Math.abs(e.cssOverflowAdjustment())}px`}),ue()}function c(m){if(typeof m=="object"&&"length"in m)for(let b=0;b<m.length;b+=1)m[b]&&e.virtual.slides.push(m[b]);else e.virtual.slides.push(m);u(!0)}function d(m){const b=e.activeIndex;let v=b+1,g=1;if(Array.isArray(m)){for(let E=0;E<m.length;E+=1)m[E]&&e.virtual.slides.unshift(m[E]);v=b+m.length,g=m.length}else e.virtual.slides.unshift(m);if(e.params.virtual.cache){const E=e.virtual.cache,w={};Object.keys(E).forEach(S=>{const I=E[S],D=I.getAttribute("data-swiper-slide-index");D&&I.setAttribute("data-swiper-slide-index",parseInt(D,10)+g),w[parseInt(S,10)+g]=I}),e.virtual.cache=w}u(!0),e.slideTo(v,0)}function h(m){if(typeof m>"u"||m===null)return;let b=e.activeIndex;if(Array.isArray(m))for(let v=m.length-1;v>=0;v-=1)e.params.virtual.cache&&(delete e.virtual.cache[m[v]],Object.keys(e.virtual.cache).forEach(g=>{g>m&&(e.virtual.cache[g-1]=e.virtual.cache[g],e.virtual.cache[g-1].setAttribute("data-swiper-slide-index",g-1),delete e.virtual.cache[g])})),e.virtual.slides.splice(m[v],1),m[v]<b&&(b-=1),b=Math.max(b,0);else e.params.virtual.cache&&(delete e.virtual.cache[m],Object.keys(e.virtual.cache).forEach(v=>{v>m&&(e.virtual.cache[v-1]=e.virtual.cache[v],e.virtual.cache[v-1].setAttribute("data-swiper-slide-index",v-1),delete e.virtual.cache[v])})),e.virtual.slides.splice(m,1),m<b&&(b-=1),b=Math.max(b,0);u(!0),e.slideTo(b,0)}function f(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),u(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let m;if(typeof e.passedParams.virtual.slides>"u"){const b=[...e.slidesEl.children].filter(v=>v.matches(`.${e.params.slideClass}, swiper-slide`));b&&b.length&&(e.virtual.slides=[...b],m=!0,b.forEach((v,g)=>{v.setAttribute("data-swiper-slide-index",g),e.virtual.cache[g]=v,v.remove()}))}m||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,u(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{u()},100)):u())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&Gl(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:c,prependSlide:d,removeSlide:h,removeAllSlides:f,update:u})}function z1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=ln(),o=Ri();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(c){if(!e.enabled)return;const{rtlTranslate:d}=e;let h=c;h.originalEvent&&(h=h.originalEvent);const f=h.keyCode||h.charCode,m=e.params.keyboard.pageUpDown,b=m&&f===33,v=m&&f===34,g=f===37,E=f===39,w=f===38,S=f===40;if(!e.allowSlideNext&&(e.isHorizontal()&&E||e.isVertical()&&S||v)||!e.allowSlidePrev&&(e.isHorizontal()&&g||e.isVertical()&&w||b))return!1;if(!(h.shiftKey||h.altKey||h.ctrlKey||h.metaKey)&&!(r.activeElement&&r.activeElement.nodeName&&(r.activeElement.nodeName.toLowerCase()==="input"||r.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(b||v||g||E||w||S)){let I=!1;if(zo(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&zo(e.el,`.${e.params.slideActiveClass}`).length===0)return;const D=e.el,y=D.clientWidth,B=D.clientHeight,V=o.innerWidth,C=o.innerHeight,A=od(D);d&&(A.left-=D.scrollLeft);const H=[[A.left,A.top],[A.left+y,A.top],[A.left,A.top+B],[A.left+y,A.top+B]];for(let P=0;P<H.length;P+=1){const F=H[P];if(F[0]>=0&&F[0]<=V&&F[1]>=0&&F[1]<=C){if(F[0]===0&&F[1]===0)continue;I=!0}}if(!I)return}e.isHorizontal()?((b||v||g||E)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),((v||E)&&!d||(b||g)&&d)&&e.slideNext(),((b||g)&&!d||(v||E)&&d)&&e.slidePrev()):((b||v||w||S)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),(v||S)&&e.slideNext(),(b||w)&&e.slidePrev()),s("keyPress",f)}}function l(){e.keyboard.enabled||(r.addEventListener("keydown",a),e.keyboard.enabled=!0)}function u(){e.keyboard.enabled&&(r.removeEventListener("keydown",a),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&l()}),n("destroy",()=>{e.keyboard.enabled&&u()}),Object.assign(e.keyboard,{enable:l,disable:u})}function B1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=Ri();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let o,a=as(),l;const u=[];function c(w){let y=0,B=0,V=0,C=0;return"detail"in w&&(B=w.detail),"wheelDelta"in w&&(B=-w.wheelDelta/120),"wheelDeltaY"in w&&(B=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(y=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(y=B,B=0),V=y*10,C=B*10,"deltaY"in w&&(C=w.deltaY),"deltaX"in w&&(V=w.deltaX),w.shiftKey&&!V&&(V=C,C=0),(V||C)&&w.deltaMode&&(w.deltaMode===1?(V*=40,C*=40):(V*=800,C*=800)),V&&!y&&(y=V<1?-1:1),C&&!B&&(B=C<1?-1:1),{spinX:y,spinY:B,pixelX:V,pixelY:C}}function d(){e.enabled&&(e.mouseEntered=!0)}function h(){e.enabled&&(e.mouseEntered=!1)}function f(w){return e.params.mousewheel.thresholdDelta&&w.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&as()-a<e.params.mousewheel.thresholdTime?!1:w.delta>=6&&as()-a<60?!0:(w.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),s("scroll",w.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),s("scroll",w.raw)),a=new r.Date().getTime(),!1)}function m(w){const S=e.params.mousewheel;if(w.direction<0){if(e.isEnd&&!e.params.loop&&S.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&S.releaseOnEdges)return!0;return!1}function b(w){let S=w,I=!0;if(!e.enabled||w.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const D=e.params.mousewheel;e.params.cssMode&&S.preventDefault();let y=e.el;e.params.mousewheel.eventsTarget!=="container"&&(y=document.querySelector(e.params.mousewheel.eventsTarget));const B=y&&y.contains(S.target);if(!e.mouseEntered&&!B&&!D.releaseOnEdges)return!0;S.originalEvent&&(S=S.originalEvent);let V=0;const C=e.rtlTranslate?-1:1,A=c(S);if(D.forceToAxis)if(e.isHorizontal())if(Math.abs(A.pixelX)>Math.abs(A.pixelY))V=-A.pixelX*C;else return!0;else if(Math.abs(A.pixelY)>Math.abs(A.pixelX))V=-A.pixelY;else return!0;else V=Math.abs(A.pixelX)>Math.abs(A.pixelY)?-A.pixelX*C:-A.pixelY;if(V===0)return!0;D.invert&&(V=-V);let H=e.getTranslate()+V*D.sensitivity;if(H>=e.minTranslate()&&(H=e.minTranslate()),H<=e.maxTranslate()&&(H=e.maxTranslate()),I=e.params.loop?!0:!(H===e.minTranslate()||H===e.maxTranslate()),I&&e.params.nested&&S.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const P={time:as(),delta:Math.abs(V),direction:Math.sign(V),raw:w};u.length>=2&&u.shift();const F=u.length?u[u.length-1]:void 0;if(u.push(P),F?(P.direction!==F.direction||P.delta>F.delta||P.time>F.time+150)&&f(P):f(P),m(P))return!0}else{const P={time:as(),delta:Math.abs(V),direction:Math.sign(V)},F=l&&P.time<l.time+500&&P.delta<=l.delta&&P.direction===l.direction;if(!F){l=void 0;let Y=e.getTranslate()+V*D.sensitivity;const Q=e.isBeginning,G=e.isEnd;if(Y>=e.minTranslate()&&(Y=e.minTranslate()),Y<=e.maxTranslate()&&(Y=e.maxTranslate()),e.setTransition(0),e.setTranslate(Y),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!Q&&e.isBeginning||!G&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:P.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(o),o=void 0,u.length>=15&&u.shift();const z=u.length?u[u.length-1]:void 0,ue=u[0];if(u.push(P),z&&(P.delta>z.delta||P.direction!==z.direction))u.splice(0);else if(u.length>=15&&P.time-ue.time<500&&ue.delta-P.delta>=1&&P.delta<=6){const Ee=V>0?.8:.2;l=P,u.splice(0),o=Vo(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,Ee)},0)}o||(o=Vo(()=>{if(e.destroyed||!e.params)return;const Ee=.5;l=P,u.splice(0),e.slideToClosest(e.params.speed,!0,void 0,Ee)},500))}if(F||s("scroll",S),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),D.releaseOnEdges&&(Y===e.minTranslate()||Y===e.maxTranslate()))return!0}}return S.preventDefault?S.preventDefault():S.returnValue=!1,!1}function v(w){let S=e.el;e.params.mousewheel.eventsTarget!=="container"&&(S=document.querySelector(e.params.mousewheel.eventsTarget)),S[w]("mouseenter",d),S[w]("mouseleave",h),S[w]("wheel",b)}function g(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",b),!0):e.mousewheel.enabled?!1:(v("addEventListener"),e.mousewheel.enabled=!0,!0)}function E(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,b),!0):e.mousewheel.enabled?(v("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&E(),e.params.mousewheel.enabled&&g()}),n("destroy",()=>{e.params.cssMode&&g(),e.mousewheel.enabled&&E()}),Object.assign(e.mousewheel,{enable:g,disable:E})}function ym(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let r=an(i.el,`.${n[s]}`)[0];r||(r=Hn("div",n[s]),r.className=n[s],i.el.append(r)),t[s]=r,e[s]=r}}),t}function H1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(m){let b;return m&&typeof m=="string"&&e.isElement&&(b=e.el.querySelector(m)||e.hostEl.querySelector(m),b)?b:(m&&(typeof m=="string"&&(b=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&b&&b.length>1&&e.el.querySelectorAll(m).length===1?b=e.el.querySelector(m):b&&b.length===1&&(b=b[0])),m&&!b?m:b)}function o(m,b){const v=e.params.navigation;m=qt(m),m.forEach(g=>{g&&(g.classList[b?"add":"remove"](...v.disabledClass.split(" ")),g.tagName==="BUTTON"&&(g.disabled=b),e.params.watchOverflow&&e.enabled&&g.classList[e.isLocked?"add":"remove"](v.lockClass))})}function a(){const{nextEl:m,prevEl:b}=e.navigation;if(e.params.loop){o(b,!1),o(m,!1);return}o(b,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function l(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function u(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function c(){const m=e.params.navigation;if(e.params.navigation=ym(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let b=r(m.nextEl),v=r(m.prevEl);Object.assign(e.navigation,{nextEl:b,prevEl:v}),b=qt(b),v=qt(v);const g=(E,w)=>{E&&E.addEventListener("click",w==="next"?u:l),!e.enabled&&E&&E.classList.add(...m.lockClass.split(" "))};b.forEach(E=>g(E,"next")),v.forEach(E=>g(E,"prev"))}function d(){let{nextEl:m,prevEl:b}=e.navigation;m=qt(m),b=qt(b);const v=(g,E)=>{g.removeEventListener("click",E==="next"?u:l),g.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(g=>v(g,"next")),b.forEach(g=>v(g,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?f():(c(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{d()}),n("enable disable",()=>{let{nextEl:m,prevEl:b}=e.navigation;if(m=qt(m),b=qt(b),e.enabled){a();return}[...m,...b].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),n("click",(m,b)=>{let{nextEl:v,prevEl:g}=e.navigation;v=qt(v),g=qt(g);const E=b.target;let w=g.includes(E)||v.includes(E);if(e.isElement&&!w){const S=b.path||b.composedPath&&b.composedPath();S&&(w=S.find(I=>v.includes(I)||g.includes(I)))}if(e.params.navigation.hideOnClick&&!w){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===E||e.pagination.el.contains(E)))return;let S;v.length?S=v[0].classList.contains(e.params.navigation.hiddenClass):g.length&&(S=g[0].classList.contains(e.params.navigation.hiddenClass)),s(S===!0?"navigationShow":"navigationHide"),[...v,...g].filter(I=>!!I).forEach(I=>I.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),c(),a()},f=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:h,disable:f,update:a,init:c,destroy:d})}function _r(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function V1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:E=>E,formatFractionTotal:E=>E,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function u(E,w){const{bulletActiveClass:S}=e.params.pagination;E&&(E=E[`${w==="prev"?"previous":"next"}ElementSibling`],E&&(E.classList.add(`${S}-${w}`),E=E[`${w==="prev"?"previous":"next"}ElementSibling`],E&&E.classList.add(`${S}-${w}-${w}`)))}function c(E,w,S){if(E=E%S,w=w%S,w===E+1)return"next";if(w===E-1)return"previous"}function d(E){const w=E.target.closest(_r(e.params.pagination.bulletClass));if(!w)return;E.preventDefault();const S=hc(w)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===S)return;const I=c(e.realIndex,S,e.slides.length);I==="next"?e.slideNext():I==="previous"?e.slidePrev():e.slideToLoop(S)}else e.slideTo(S)}function h(){const E=e.rtl,w=e.params.pagination;if(l())return;let S=e.pagination.el;S=qt(S);let I,D;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,B=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(D=e.previousRealIndex||0,I=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(I=e.snapIndex,D=e.previousSnapIndex):(D=e.previousIndex||0,I=e.activeIndex||0),w.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const V=e.pagination.bullets;let C,A,H;if(w.dynamicBullets&&(o=Uf(V[0],e.isHorizontal()?"width":"height"),S.forEach(P=>{P.style[e.isHorizontal()?"width":"height"]=`${o*(w.dynamicMainBullets+4)}px`}),w.dynamicMainBullets>1&&D!==void 0&&(a+=I-(D||0),a>w.dynamicMainBullets-1?a=w.dynamicMainBullets-1:a<0&&(a=0)),C=Math.max(I-a,0),A=C+(Math.min(V.length,w.dynamicMainBullets)-1),H=(A+C)/2),V.forEach(P=>{const F=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Y=>`${w.bulletActiveClass}${Y}`)].map(Y=>typeof Y=="string"&&Y.includes(" ")?Y.split(" "):Y).flat();P.classList.remove(...F)}),S.length>1)V.forEach(P=>{const F=hc(P);F===I?P.classList.add(...w.bulletActiveClass.split(" ")):e.isElement&&P.setAttribute("part","bullet"),w.dynamicBullets&&(F>=C&&F<=A&&P.classList.add(...`${w.bulletActiveClass}-main`.split(" ")),F===C&&u(P,"prev"),F===A&&u(P,"next"))});else{const P=V[I];if(P&&P.classList.add(...w.bulletActiveClass.split(" ")),e.isElement&&V.forEach((F,Y)=>{F.setAttribute("part",Y===I?"bullet-active":"bullet")}),w.dynamicBullets){const F=V[C],Y=V[A];for(let Q=C;Q<=A;Q+=1)V[Q]&&V[Q].classList.add(...`${w.bulletActiveClass}-main`.split(" "));u(F,"prev"),u(Y,"next")}}if(w.dynamicBullets){const P=Math.min(V.length,w.dynamicMainBullets+4),F=(o*P-o)/2-H*o,Y=E?"right":"left";V.forEach(Q=>{Q.style[e.isHorizontal()?Y:"top"]=`${F}px`})}}S.forEach((V,C)=>{if(w.type==="fraction"&&(V.querySelectorAll(_r(w.currentClass)).forEach(A=>{A.textContent=w.formatFractionCurrent(I+1)}),V.querySelectorAll(_r(w.totalClass)).forEach(A=>{A.textContent=w.formatFractionTotal(B)})),w.type==="progressbar"){let A;w.progressbarOpposite?A=e.isHorizontal()?"vertical":"horizontal":A=e.isHorizontal()?"horizontal":"vertical";const H=(I+1)/B;let P=1,F=1;A==="horizontal"?P=H:F=H,V.querySelectorAll(_r(w.progressbarFillClass)).forEach(Y=>{Y.style.transform=`translate3d(0,0,0) scaleX(${P}) scaleY(${F})`,Y.style.transitionDuration=`${e.params.speed}ms`})}w.type==="custom"&&w.renderCustom?(V.innerHTML=w.renderCustom(e,I+1,B),C===0&&s("paginationRender",V)):(C===0&&s("paginationRender",V),s("paginationUpdate",V)),e.params.watchOverflow&&e.enabled&&V.classList[e.isLocked?"add":"remove"](w.lockClass)})}function f(){const E=e.params.pagination;if(l())return;const w=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let S=e.pagination.el;S=qt(S);let I="";if(E.type==="bullets"){let D=e.params.loop?Math.ceil(w/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&D>w&&(D=w);for(let y=0;y<D;y+=1)E.renderBullet?I+=E.renderBullet.call(e,y,E.bulletClass):I+=`<${E.bulletElement} ${e.isElement?'part="bullet"':""} class="${E.bulletClass}"></${E.bulletElement}>`}E.type==="fraction"&&(E.renderFraction?I=E.renderFraction.call(e,E.currentClass,E.totalClass):I=`<span class="${E.currentClass}"></span> / <span class="${E.totalClass}"></span>`),E.type==="progressbar"&&(E.renderProgressbar?I=E.renderProgressbar.call(e,E.progressbarFillClass):I=`<span class="${E.progressbarFillClass}"></span>`),e.pagination.bullets=[],S.forEach(D=>{E.type!=="custom"&&(D.innerHTML=I||""),E.type==="bullets"&&e.pagination.bullets.push(...D.querySelectorAll(_r(E.bulletClass)))}),E.type!=="custom"&&s("paginationRender",S[0])}function m(){e.params.pagination=ym(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const E=e.params.pagination;if(!E.el)return;let w;typeof E.el=="string"&&e.isElement&&(w=e.el.querySelector(E.el)),!w&&typeof E.el=="string"&&(w=[...document.querySelectorAll(E.el)]),w||(w=E.el),!(!w||w.length===0)&&(e.params.uniqueNavElements&&typeof E.el=="string"&&Array.isArray(w)&&w.length>1&&(w=[...e.el.querySelectorAll(E.el)],w.length>1&&(w=w.filter(S=>zo(S,".swiper")[0]===e.el)[0])),Array.isArray(w)&&w.length===1&&(w=w[0]),Object.assign(e.pagination,{el:w}),w=qt(w),w.forEach(S=>{E.type==="bullets"&&E.clickable&&S.classList.add(...(E.clickableClass||"").split(" ")),S.classList.add(E.modifierClass+E.type),S.classList.add(e.isHorizontal()?E.horizontalClass:E.verticalClass),E.type==="bullets"&&E.dynamicBullets&&(S.classList.add(`${E.modifierClass}${E.type}-dynamic`),a=0,E.dynamicMainBullets<1&&(E.dynamicMainBullets=1)),E.type==="progressbar"&&E.progressbarOpposite&&S.classList.add(E.progressbarOppositeClass),E.clickable&&S.addEventListener("click",d),e.enabled||S.classList.add(E.lockClass)}))}function b(){const E=e.params.pagination;if(l())return;let w=e.pagination.el;w&&(w=qt(w),w.forEach(S=>{S.classList.remove(E.hiddenClass),S.classList.remove(E.modifierClass+E.type),S.classList.remove(e.isHorizontal()?E.horizontalClass:E.verticalClass),E.clickable&&(S.classList.remove(...(E.clickableClass||"").split(" ")),S.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(S=>S.classList.remove(...E.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const E=e.params.pagination;let{el:w}=e.pagination;w=qt(w),w.forEach(S=>{S.classList.remove(E.horizontalClass,E.verticalClass),S.classList.add(e.isHorizontal()?E.horizontalClass:E.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?g():(m(),f(),h())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),n("snapIndexChange",()=>{h()}),n("snapGridLengthChange",()=>{f(),h()}),n("destroy",()=>{b()}),n("enable disable",()=>{let{el:E}=e.pagination;E&&(E=qt(E),E.forEach(w=>w.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{h()}),n("click",(E,w)=>{const S=w.target,I=qt(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&I&&I.length>0&&!S.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&S===e.navigation.nextEl||e.navigation.prevEl&&S===e.navigation.prevEl))return;const D=I[0].classList.contains(e.params.pagination.hiddenClass);s(D===!0?"paginationShow":"paginationHide"),I.forEach(y=>y.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:E}=e.pagination;E&&(E=qt(E),E.forEach(w=>w.classList.remove(e.params.pagination.paginationDisabledClass))),m(),f(),h()},g=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:E}=e.pagination;E&&(E=qt(E),E.forEach(w=>w.classList.add(e.params.pagination.paginationDisabledClass))),b()};Object.assign(e.pagination,{enable:v,disable:g,render:f,update:h,init:m,destroy:b})}function $1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=ln();let o=!1,a=null,l=null,u,c,d,h;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function f(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:H,rtlTranslate:P}=e,{dragEl:F,el:Y}=H,Q=e.params.scrollbar,G=e.params.loop?e.progressLoop:e.progress;let z=c,ue=(d-c)*G;P?(ue=-ue,ue>0?(z=c-ue,ue=0):-ue+c>d&&(z=d+ue)):ue<0?(z=c+ue,ue=0):ue+c>d&&(z=d-ue),e.isHorizontal()?(F.style.transform=`translate3d(${ue}px, 0, 0)`,F.style.width=`${z}px`):(F.style.transform=`translate3d(0px, ${ue}px, 0)`,F.style.height=`${z}px`),Q.hide&&(clearTimeout(a),Y.style.opacity=1,a=setTimeout(()=>{Y.style.opacity=0,Y.style.transitionDuration="400ms"},1e3))}function m(H){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${H}ms`)}function b(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:H}=e,{dragEl:P,el:F}=H;P.style.width="",P.style.height="",d=e.isHorizontal()?F.offsetWidth:F.offsetHeight,h=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?c=d*h:c=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?P.style.width=`${c}px`:P.style.height=`${c}px`,h>=1?F.style.display="none":F.style.display="",e.params.scrollbar.hide&&(F.style.opacity=0),e.params.watchOverflow&&e.enabled&&H.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function v(H){return e.isHorizontal()?H.clientX:H.clientY}function g(H){const{scrollbar:P,rtlTranslate:F}=e,{el:Y}=P;let Q;Q=(v(H)-od(Y)[e.isHorizontal()?"left":"top"]-(u!==null?u:c/2))/(d-c),Q=Math.max(Math.min(Q,1),0),F&&(Q=1-Q);const G=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*Q;e.updateProgress(G),e.setTranslate(G),e.updateActiveIndex(),e.updateSlidesClasses()}function E(H){const P=e.params.scrollbar,{scrollbar:F,wrapperEl:Y}=e,{el:Q,dragEl:G}=F;o=!0,u=H.target===G?v(H)-H.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,H.preventDefault(),H.stopPropagation(),Y.style.transitionDuration="100ms",G.style.transitionDuration="100ms",g(H),clearTimeout(l),Q.style.transitionDuration="0ms",P.hide&&(Q.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",H)}function w(H){const{scrollbar:P,wrapperEl:F}=e,{el:Y,dragEl:Q}=P;o&&(H.preventDefault&&H.cancelable?H.preventDefault():H.returnValue=!1,g(H),F.style.transitionDuration="0ms",Y.style.transitionDuration="0ms",Q.style.transitionDuration="0ms",s("scrollbarDragMove",H))}function S(H){const P=e.params.scrollbar,{scrollbar:F,wrapperEl:Y}=e,{el:Q}=F;o&&(o=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",Y.style.transitionDuration=""),P.hide&&(clearTimeout(l),l=Vo(()=>{Q.style.opacity=0,Q.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",H),P.snapOnRelease&&e.slideToClosest())}function I(H){const{scrollbar:P,params:F}=e,Y=P.el;if(!Y)return;const Q=Y,G=F.passiveListeners?{passive:!1,capture:!1}:!1,z=F.passiveListeners?{passive:!0,capture:!1}:!1;if(!Q)return;const ue=H==="on"?"addEventListener":"removeEventListener";Q[ue]("pointerdown",E,G),r[ue]("pointermove",w,G),r[ue]("pointerup",S,z)}function D(){!e.params.scrollbar.el||!e.scrollbar.el||I("on")}function y(){!e.params.scrollbar.el||!e.scrollbar.el||I("off")}function B(){const{scrollbar:H,el:P}=e;e.params.scrollbar=ym(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const F=e.params.scrollbar;if(!F.el)return;let Y;if(typeof F.el=="string"&&e.isElement&&(Y=e.el.querySelector(F.el)),!Y&&typeof F.el=="string"){if(Y=r.querySelectorAll(F.el),!Y.length)return}else Y||(Y=F.el);e.params.uniqueNavElements&&typeof F.el=="string"&&Y.length>1&&P.querySelectorAll(F.el).length===1&&(Y=P.querySelector(F.el)),Y.length>0&&(Y=Y[0]),Y.classList.add(e.isHorizontal()?F.horizontalClass:F.verticalClass);let Q;Y&&(Q=Y.querySelector(_r(e.params.scrollbar.dragClass)),Q||(Q=Hn("div",e.params.scrollbar.dragClass),Y.append(Q))),Object.assign(H,{el:Y,dragEl:Q}),F.draggable&&D(),Y&&Y.classList[e.enabled?"remove":"add"](...jr(e.params.scrollbar.lockClass))}function V(){const H=e.params.scrollbar,P=e.scrollbar.el;P&&P.classList.remove(...jr(e.isHorizontal()?H.horizontalClass:H.verticalClass)),y()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const H=e.params.scrollbar;let{el:P}=e.scrollbar;P=qt(P),P.forEach(F=>{F.classList.remove(H.horizontalClass,H.verticalClass),F.classList.add(e.isHorizontal()?H.horizontalClass:H.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?A():(B(),b(),f())}),n("update resize observerUpdate lock unlock changeDirection",()=>{b()}),n("setTranslate",()=>{f()}),n("setTransition",(H,P)=>{m(P)}),n("enable disable",()=>{const{el:H}=e.scrollbar;H&&H.classList[e.enabled?"remove":"add"](...jr(e.params.scrollbar.lockClass))}),n("destroy",()=>{V()});const C=()=>{e.el.classList.remove(...jr(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...jr(e.params.scrollbar.scrollbarDisabledClass)),B(),b(),f()},A=()=>{e.el.classList.add(...jr(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...jr(e.params.scrollbar.scrollbarDisabledClass)),V()};Object.assign(e.scrollbar,{enable:C,disable:A,updateSize:b,setTranslate:f,init:B,destroy:V})}function G1(i){let{swiper:e,extendParams:t,on:n}=i;t({parallax:{enabled:!1}});const s="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",r=(l,u)=>{const{rtl:c}=e,d=c?-1:1,h=l.getAttribute("data-swiper-parallax")||"0";let f=l.getAttribute("data-swiper-parallax-x"),m=l.getAttribute("data-swiper-parallax-y");const b=l.getAttribute("data-swiper-parallax-scale"),v=l.getAttribute("data-swiper-parallax-opacity"),g=l.getAttribute("data-swiper-parallax-rotate");if(f||m?(f=f||"0",m=m||"0"):e.isHorizontal()?(f=h,m="0"):(m=h,f="0"),f.indexOf("%")>=0?f=`${parseInt(f,10)*u*d}%`:f=`${f*u*d}px`,m.indexOf("%")>=0?m=`${parseInt(m,10)*u}%`:m=`${m*u}px`,typeof v<"u"&&v!==null){const w=v-(v-1)*(1-Math.abs(u));l.style.opacity=w}let E=`translate3d(${f}, ${m}, 0px)`;if(typeof b<"u"&&b!==null){const w=b-(b-1)*(1-Math.abs(u));E+=` scale(${w})`}if(g&&typeof g<"u"&&g!==null){const w=g*u*-1;E+=` rotate(${w}deg)`}l.style.transform=E},o=()=>{const{el:l,slides:u,progress:c,snapGrid:d,isElement:h}=e,f=an(l,s);e.isElement&&f.push(...an(e.hostEl,s)),f.forEach(m=>{r(m,c)}),u.forEach((m,b)=>{let v=m.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(v+=Math.ceil(b/2)-c*(d.length-1)),v=Math.min(Math.max(v,-1),1),m.querySelectorAll(`${s}, [data-swiper-parallax-rotate]`).forEach(g=>{r(g,v)})})},a=function(l){l===void 0&&(l=e.params.speed);const{el:u,hostEl:c}=e,d=[...u.querySelectorAll(s)];e.isElement&&d.push(...c.querySelectorAll(s)),d.forEach(h=>{let f=parseInt(h.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(f=0),h.style.transitionDuration=`${f}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&o()}),n("setTranslate",()=>{e.params.parallax.enabled&&o()}),n("setTransition",(l,u)=>{e.params.parallax.enabled&&a(u)})}function W1(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;const r=Ri();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let o=1,a=!1,l,u;const c=[],d={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let m=1;Object.defineProperty(e.zoom,"scale",{get(){return m},set(J){if(m!==J){const W=d.imageEl,oe=d.slideEl;s("zoomChange",J,W,oe)}m=J}});function b(){if(c.length<2)return 1;const J=c[0].pageX,W=c[0].pageY,oe=c[1].pageX,ie=c[1].pageY;return Math.sqrt((oe-J)**2+(ie-W)**2)}function v(){const J=e.params.zoom,W=d.imageWrapEl.getAttribute("data-swiper-zoom")||J.maxRatio;if(J.limitToOriginalSize&&d.imageEl&&d.imageEl.naturalWidth){const oe=d.imageEl.naturalWidth/d.imageEl.offsetWidth;return Math.min(oe,W)}return W}function g(){if(c.length<2)return{x:null,y:null};const J=d.imageEl.getBoundingClientRect();return[(c[0].pageX+(c[1].pageX-c[0].pageX)/2-J.x-r.scrollX)/o,(c[0].pageY+(c[1].pageY-c[0].pageY)/2-J.y-r.scrollY)/o]}function E(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function w(J){const W=E();return!!(J.target.matches(W)||e.slides.filter(oe=>oe.contains(J.target)).length>0)}function S(J){const W=`.${e.params.zoom.containerClass}`;return!!(J.target.matches(W)||[...e.hostEl.querySelectorAll(W)].filter(oe=>oe.contains(J.target)).length>0)}function I(J){if(J.pointerType==="mouse"&&c.splice(0,c.length),!w(J))return;const W=e.params.zoom;if(l=!1,u=!1,c.push(J),!(c.length<2)){if(l=!0,d.scaleStart=b(),!d.slideEl){d.slideEl=J.target.closest(`.${e.params.slideClass}, swiper-slide`),d.slideEl||(d.slideEl=e.slides[e.activeIndex]);let oe=d.slideEl.querySelector(`.${W.containerClass}`);if(oe&&(oe=oe.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=oe,oe?d.imageWrapEl=zo(d.imageEl,`.${W.containerClass}`)[0]:d.imageWrapEl=void 0,!d.imageWrapEl){d.imageEl=void 0;return}d.maxRatio=v()}if(d.imageEl){const[oe,ie]=g();d.originX=oe,d.originY=ie,d.imageEl.style.transitionDuration="0ms"}a=!0}}function D(J){if(!w(J))return;const W=e.params.zoom,oe=e.zoom,ie=c.findIndex(j=>j.pointerId===J.pointerId);ie>=0&&(c[ie]=J),!(c.length<2)&&(u=!0,d.scaleMove=b(),d.imageEl&&(oe.scale=d.scaleMove/d.scaleStart*o,oe.scale>d.maxRatio&&(oe.scale=d.maxRatio-1+(oe.scale-d.maxRatio+1)**.5),oe.scale<W.minRatio&&(oe.scale=W.minRatio+1-(W.minRatio-oe.scale+1)**.5),d.imageEl.style.transform=`translate3d(0,0,0) scale(${oe.scale})`))}function y(J){if(!w(J)||J.pointerType==="mouse"&&J.type==="pointerout")return;const W=e.params.zoom,oe=e.zoom,ie=c.findIndex(j=>j.pointerId===J.pointerId);ie>=0&&c.splice(ie,1),!(!l||!u)&&(l=!1,u=!1,d.imageEl&&(oe.scale=Math.max(Math.min(oe.scale,d.maxRatio),W.minRatio),d.imageEl.style.transitionDuration=`${e.params.speed}ms`,d.imageEl.style.transform=`translate3d(0,0,0) scale(${oe.scale})`,o=oe.scale,a=!1,oe.scale>1&&d.slideEl?d.slideEl.classList.add(`${W.zoomedSlideClass}`):oe.scale<=1&&d.slideEl&&d.slideEl.classList.remove(`${W.zoomedSlideClass}`),oe.scale===1&&(d.originX=0,d.originY=0,d.slideEl=void 0)))}let B;function V(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function C(){clearTimeout(B),e.touchEventsData.preventTouchMoveFromPointerMove=!0,B=setTimeout(()=>{e.destroyed||V()})}function A(J){const W=e.device;if(!d.imageEl||h.isTouched)return;W.android&&J.cancelable&&J.preventDefault(),h.isTouched=!0;const oe=c.length>0?c[0]:J;h.touchesStart.x=oe.pageX,h.touchesStart.y=oe.pageY}function H(J){if(!w(J)||!S(J))return;const W=e.zoom;if(!d.imageEl||!h.isTouched||!d.slideEl)return;h.isMoved||(h.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,h.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,h.startX=Ff(d.imageWrapEl,"x")||0,h.startY=Ff(d.imageWrapEl,"y")||0,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight,d.imageWrapEl.style.transitionDuration="0ms");const oe=h.width*W.scale,ie=h.height*W.scale;if(h.minX=Math.min(d.slideWidth/2-oe/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-ie/2,0),h.maxY=-h.minY,h.touchesCurrent.x=c.length>0?c[0].pageX:J.pageX,h.touchesCurrent.y=c.length>0?c[0].pageY:J.pageY,Math.max(Math.abs(h.touchesCurrent.x-h.touchesStart.x),Math.abs(h.touchesCurrent.y-h.touchesStart.y))>5&&(e.allowClick=!1),!h.isMoved&&!a){if(e.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x)){h.isTouched=!1,V();return}if(!e.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y)){h.isTouched=!1,V();return}}J.cancelable&&J.preventDefault(),J.stopPropagation(),C(),h.isMoved=!0;const me=(W.scale-o)/(d.maxRatio-e.params.zoom.minRatio),{originX:ge,originY:Ne}=d;h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX+me*(h.width-ge*2),h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY+me*(h.height-Ne*2),h.currentX<h.minX&&(h.currentX=h.minX+1-(h.minX-h.currentX+1)**.8),h.currentX>h.maxX&&(h.currentX=h.maxX-1+(h.currentX-h.maxX+1)**.8),h.currentY<h.minY&&(h.currentY=h.minY+1-(h.minY-h.currentY+1)**.8),h.currentY>h.maxY&&(h.currentY=h.maxY-1+(h.currentY-h.maxY+1)**.8),f.prevPositionX||(f.prevPositionX=h.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=h.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(h.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(h.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(h.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(h.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=h.touchesCurrent.x,f.prevPositionY=h.touchesCurrent.y,f.prevTime=Date.now(),d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function P(){const J=e.zoom;if(!d.imageEl)return;if(!h.isTouched||!h.isMoved){h.isTouched=!1,h.isMoved=!1;return}h.isTouched=!1,h.isMoved=!1;let W=300,oe=300;const ie=f.x*W,j=h.currentX+ie,me=f.y*oe,ge=h.currentY+me;f.x!==0&&(W=Math.abs((j-h.currentX)/f.x)),f.y!==0&&(oe=Math.abs((ge-h.currentY)/f.y));const Ne=Math.max(W,oe);h.currentX=j,h.currentY=ge;const Fe=h.width*J.scale,He=h.height*J.scale;h.minX=Math.min(d.slideWidth/2-Fe/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-He/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),d.imageWrapEl.style.transitionDuration=`${Ne}ms`,d.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function F(){const J=e.zoom;d.slideEl&&e.activeIndex!==e.slides.indexOf(d.slideEl)&&(d.imageEl&&(d.imageEl.style.transform="translate3d(0,0,0) scale(1)"),d.imageWrapEl&&(d.imageWrapEl.style.transform="translate3d(0,0,0)"),d.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),J.scale=1,o=1,d.slideEl=void 0,d.imageEl=void 0,d.imageWrapEl=void 0,d.originX=0,d.originY=0)}function Y(J){const W=e.zoom,oe=e.params.zoom;if(!d.slideEl){J&&J.target&&(d.slideEl=J.target.closest(`.${e.params.slideClass}, swiper-slide`)),d.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=an(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex]);let Re=d.slideEl.querySelector(`.${oe.containerClass}`);Re&&(Re=Re.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=Re,Re?d.imageWrapEl=zo(d.imageEl,`.${oe.containerClass}`)[0]:d.imageWrapEl=void 0}if(!d.imageEl||!d.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),d.slideEl.classList.add(`${oe.zoomedSlideClass}`);let ie,j,me,ge,Ne,Fe,He,ct,at,se,ut,pt,yt,qe,dt,We,q,O;typeof h.touchesStart.x>"u"&&J?(ie=J.pageX,j=J.pageY):(ie=h.touchesStart.x,j=h.touchesStart.y);const le=typeof J=="number"?J:null;o===1&&le&&(ie=void 0,j=void 0,h.touchesStart.x=void 0,h.touchesStart.y=void 0);const Ce=v();W.scale=le||Ce,o=le||Ce,J&&!(o===1&&le)?(q=d.slideEl.offsetWidth,O=d.slideEl.offsetHeight,me=od(d.slideEl).left+r.scrollX,ge=od(d.slideEl).top+r.scrollY,Ne=me+q/2-ie,Fe=ge+O/2-j,at=d.imageEl.offsetWidth||d.imageEl.clientWidth,se=d.imageEl.offsetHeight||d.imageEl.clientHeight,ut=at*W.scale,pt=se*W.scale,yt=Math.min(q/2-ut/2,0),qe=Math.min(O/2-pt/2,0),dt=-yt,We=-qe,He=Ne*W.scale,ct=Fe*W.scale,He<yt&&(He=yt),He>dt&&(He=dt),ct<qe&&(ct=qe),ct>We&&(ct=We)):(He=0,ct=0),le&&W.scale===1&&(d.originX=0,d.originY=0),d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform=`translate3d(${He}px, ${ct}px,0)`,d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform=`translate3d(0,0,0) scale(${W.scale})`}function Q(){const J=e.zoom,W=e.params.zoom;if(!d.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=an(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex];let oe=d.slideEl.querySelector(`.${W.containerClass}`);oe&&(oe=oe.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=oe,oe?d.imageWrapEl=zo(d.imageEl,`.${W.containerClass}`)[0]:d.imageWrapEl=void 0}!d.imageEl||!d.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),J.scale=1,o=1,h.touchesStart.x=void 0,h.touchesStart.y=void 0,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform="translate3d(0,0,0)",d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform="translate3d(0,0,0) scale(1)",d.slideEl.classList.remove(`${W.zoomedSlideClass}`),d.slideEl=void 0,d.originX=0,d.originY=0)}function G(J){const W=e.zoom;W.scale&&W.scale!==1?Q():Y(J)}function z(){const J=e.params.passiveListeners?{passive:!0,capture:!1}:!1,W=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:J,activeListenerWithCapture:W}}function ue(){const J=e.zoom;if(J.enabled)return;J.enabled=!0;const{passiveListener:W,activeListenerWithCapture:oe}=z();e.wrapperEl.addEventListener("pointerdown",I,W),e.wrapperEl.addEventListener("pointermove",D,oe),["pointerup","pointercancel","pointerout"].forEach(ie=>{e.wrapperEl.addEventListener(ie,y,W)}),e.wrapperEl.addEventListener("pointermove",H,oe)}function Ee(){const J=e.zoom;if(!J.enabled)return;J.enabled=!1;const{passiveListener:W,activeListenerWithCapture:oe}=z();e.wrapperEl.removeEventListener("pointerdown",I,W),e.wrapperEl.removeEventListener("pointermove",D,oe),["pointerup","pointercancel","pointerout"].forEach(ie=>{e.wrapperEl.removeEventListener(ie,y,W)}),e.wrapperEl.removeEventListener("pointermove",H,oe)}n("init",()=>{e.params.zoom.enabled&&ue()}),n("destroy",()=>{Ee()}),n("touchStart",(J,W)=>{e.zoom.enabled&&A(W)}),n("touchEnd",(J,W)=>{e.zoom.enabled&&P()}),n("doubleTap",(J,W)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&G(W)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&F()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&F()}),Object.assign(e.zoom,{enable:ue,disable:Ee,in:Y,out:Q,toggle:G})}function j1(i){let{swiper:e,extendParams:t,on:n}=i;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(u,c){const d=function(){let b,v,g;return(E,w)=>{for(v=-1,b=E.length;b-v>1;)g=b+v>>1,E[g]<=w?v=g:b=g;return b}}();this.x=u,this.y=c,this.lastIndex=u.length-1;let h,f;return this.interpolate=function(b){return b?(f=d(this.x,b),h=f-1,(b-this.x[h])*(this.y[f]-this.y[h])/(this.x[f]-this.x[h])+this.y[h]):0},this}function r(u){e.controller.spline=e.params.loop?new s(e.slidesGrid,u.slidesGrid):new s(e.snapGrid,u.snapGrid)}function o(u,c){const d=e.controller.control;let h,f;const m=e.constructor;function b(v){if(v.destroyed)return;const g=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(r(v),f=-e.controller.spline.interpolate(-g)),(!f||e.params.controller.by==="container")&&(h=(v.maxTranslate()-v.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(h)||!Number.isFinite(h))&&(h=1),f=(g-e.minTranslate())*h+v.minTranslate()),e.params.controller.inverse&&(f=v.maxTranslate()-f),v.updateProgress(f),v.setTranslate(f,e),v.updateActiveIndex(),v.updateSlidesClasses()}if(Array.isArray(d))for(let v=0;v<d.length;v+=1)d[v]!==c&&d[v]instanceof m&&b(d[v]);else d instanceof m&&c!==d&&b(d)}function a(u,c){const d=e.constructor,h=e.controller.control;let f;function m(b){b.destroyed||(b.setTransition(u,e),u!==0&&(b.transitionStart(),b.params.autoHeight&&Vo(()=>{b.updateAutoHeight()}),Xl(b.wrapperEl,()=>{h&&b.transitionEnd()})))}if(Array.isArray(h))for(f=0;f<h.length;f+=1)h[f]!==c&&h[f]instanceof d&&m(h[f]);else h instanceof d&&c!==h&&m(h)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(c=>{if(e.controller.control||(e.controller.control=[]),c&&c.swiper)e.controller.control.push(c.swiper);else if(c){const d=`${e.params.eventsPrefix}init`,h=f=>{e.controller.control.push(f.detail[0]),e.update(),c.removeEventListener(d,h)};c.addEventListener(d,h)}});return}e.controller.control=e.params.controller.control}),n("update",()=>{l()}),n("resize",()=>{l()}),n("observerUpdate",()=>{l()}),n("setTranslate",(u,c,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(c,d)}),n("setTransition",(u,c,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(c,d)}),Object.assign(e.controller,{setTranslate:o,setTransition:a})}function q1(i){let{swiper:e,extendParams:t,on:n}=i;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let s=null,r,o,a=new Date().getTime();function l(G){const z=s;z.length!==0&&(z.innerHTML="",z.innerHTML=G)}function u(G){const z=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(G).replace(/x/g,z)}function c(G){G=qt(G),G.forEach(z=>{z.setAttribute("tabIndex","0")})}function d(G){G=qt(G),G.forEach(z=>{z.setAttribute("tabIndex","-1")})}function h(G,z){G=qt(G),G.forEach(ue=>{ue.setAttribute("role",z)})}function f(G,z){G=qt(G),G.forEach(ue=>{ue.setAttribute("aria-roledescription",z)})}function m(G,z){G=qt(G),G.forEach(ue=>{ue.setAttribute("aria-controls",z)})}function b(G,z){G=qt(G),G.forEach(ue=>{ue.setAttribute("aria-label",z)})}function v(G,z){G=qt(G),G.forEach(ue=>{ue.setAttribute("id",z)})}function g(G,z){G=qt(G),G.forEach(ue=>{ue.setAttribute("aria-live",z)})}function E(G){G=qt(G),G.forEach(z=>{z.setAttribute("aria-disabled",!0)})}function w(G){G=qt(G),G.forEach(z=>{z.setAttribute("aria-disabled",!1)})}function S(G){if(G.keyCode!==13&&G.keyCode!==32)return;const z=e.params.a11y,ue=G.target;if(!(e.pagination&&e.pagination.el&&(ue===e.pagination.el||e.pagination.el.contains(G.target))&&!G.target.matches(_r(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){const Ee=qt(e.navigation.prevEl);qt(e.navigation.nextEl).includes(ue)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(z.lastSlideMessage):l(z.nextSlideMessage)),Ee.includes(ue)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(z.firstSlideMessage):l(z.prevSlideMessage))}e.pagination&&ue.matches(_r(e.params.pagination.bulletClass))&&ue.click()}}function I(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:G,prevEl:z}=e.navigation;z&&(e.isBeginning?(E(z),d(z)):(w(z),c(z))),G&&(e.isEnd?(E(G),d(G)):(w(G),c(G)))}function D(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function y(){return D()&&e.params.pagination.clickable}function B(){const G=e.params.a11y;D()&&e.pagination.bullets.forEach(z=>{e.params.pagination.clickable&&(c(z),e.params.pagination.renderBullet||(h(z,"button"),b(z,G.paginationBulletMessage.replace(/\{\{index\}\}/,hc(z)+1)))),z.matches(_r(e.params.pagination.bulletActiveClass))?z.setAttribute("aria-current","true"):z.removeAttribute("aria-current")})}const V=(G,z,ue)=>{c(G),G.tagName!=="BUTTON"&&(h(G,"button"),G.addEventListener("keydown",S)),b(G,ue),m(G,z)},C=G=>{o&&o!==G.target&&!o.contains(G.target)&&(r=!0),e.a11y.clicked=!0},A=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},H=G=>{a=new Date().getTime()},P=G=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-a<100)return;const z=G.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!z||!e.slides.includes(z))return;o=z;const ue=e.slides.indexOf(z)===e.activeIndex,Ee=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(z);ue||Ee||G.sourceCapabilities&&G.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{r||(e.params.loop?e.slideToLoop(parseInt(z.getAttribute("data-swiper-slide-index")),0):e.slideTo(e.slides.indexOf(z),0),r=!1)}))},F=()=>{const G=e.params.a11y;G.itemRoleDescriptionMessage&&f(e.slides,G.itemRoleDescriptionMessage),G.slideRole&&h(e.slides,G.slideRole);const z=e.slides.length;G.slideLabelMessage&&e.slides.forEach((ue,Ee)=>{const J=e.params.loop?parseInt(ue.getAttribute("data-swiper-slide-index"),10):Ee,W=G.slideLabelMessage.replace(/\{\{index\}\}/,J+1).replace(/\{\{slidesLength\}\}/,z);b(ue,W)})},Y=()=>{const G=e.params.a11y;e.el.append(s);const z=e.el;G.containerRoleDescriptionMessage&&f(z,G.containerRoleDescriptionMessage),G.containerMessage&&b(z,G.containerMessage),G.containerRole&&h(z,G.containerRole);const ue=e.wrapperEl,Ee=G.id||ue.getAttribute("id")||`swiper-wrapper-${u(16)}`,J=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";v(ue,Ee),g(ue,J),F();let{nextEl:W,prevEl:oe}=e.navigation?e.navigation:{};W=qt(W),oe=qt(oe),W&&W.forEach(j=>V(j,Ee,G.nextSlideMessage)),oe&&oe.forEach(j=>V(j,Ee,G.prevSlideMessage)),y()&&qt(e.pagination.el).forEach(me=>{me.addEventListener("keydown",S)}),ln().addEventListener("visibilitychange",H),e.el.addEventListener("focus",P,!0),e.el.addEventListener("focus",P,!0),e.el.addEventListener("pointerdown",C,!0),e.el.addEventListener("pointerup",A,!0)};function Q(){s&&s.remove();let{nextEl:G,prevEl:z}=e.navigation?e.navigation:{};G=qt(G),z=qt(z),G&&G.forEach(Ee=>Ee.removeEventListener("keydown",S)),z&&z.forEach(Ee=>Ee.removeEventListener("keydown",S)),y()&&qt(e.pagination.el).forEach(J=>{J.removeEventListener("keydown",S)}),ln().removeEventListener("visibilitychange",H),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",P,!0),e.el.removeEventListener("pointerdown",C,!0),e.el.removeEventListener("pointerup",A,!0))}n("beforeInit",()=>{s=Hn("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&Y()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&F()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&I()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&B()}),n("destroy",()=>{e.params.a11y.enabled&&Q()})}function X1(i){let{swiper:e,extendParams:t,on:n}=i;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let s=!1,r={};const o=f=>f.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),a=f=>{const m=Ri();let b;f?b=new URL(f):b=m.location;const v=b.pathname.slice(1).split("/").filter(S=>S!==""),g=v.length,E=v[g-2],w=v[g-1];return{key:E,value:w}},l=(f,m)=>{const b=Ri();if(!s||!e.params.history.enabled)return;let v;e.params.url?v=new URL(e.params.url):v=b.location;const g=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${m}"]`):e.slides[m];let E=o(g.getAttribute("data-history"));if(e.params.history.root.length>0){let S=e.params.history.root;S[S.length-1]==="/"&&(S=S.slice(0,S.length-1)),E=`${S}/${f?`${f}/`:""}${E}`}else v.pathname.includes(f)||(E=`${f?`${f}/`:""}${E}`);e.params.history.keepQuery&&(E+=v.search);const w=b.history.state;w&&w.value===E||(e.params.history.replaceState?b.history.replaceState({value:E},null,E):b.history.pushState({value:E},null,E))},u=(f,m,b)=>{if(m)for(let v=0,g=e.slides.length;v<g;v+=1){const E=e.slides[v];if(o(E.getAttribute("data-history"))===m){const S=e.getSlideIndex(E);e.slideTo(S,f,b)}}else e.slideTo(0,f,b)},c=()=>{r=a(e.params.url),u(e.params.speed,r.value,!1)},d=()=>{const f=Ri();if(e.params.history){if(!f.history||!f.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(s=!0,r=a(e.params.url),!r.key&&!r.value){e.params.history.replaceState||f.addEventListener("popstate",c);return}u(0,r.value,e.params.runCallbacksOnInit),e.params.history.replaceState||f.addEventListener("popstate",c)}},h=()=>{const f=Ri();e.params.history.replaceState||f.removeEventListener("popstate",c)};n("init",()=>{e.params.history.enabled&&d()}),n("destroy",()=>{e.params.history.enabled&&h()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{s&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function Y1(i){let{swiper:e,extendParams:t,emit:n,on:s}=i,r=!1;const o=ln(),a=Ri();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,f){if(e.virtual&&e.params.virtual.enabled){const m=e.slides.filter(v=>v.getAttribute("data-hash")===f)[0];return m?parseInt(m.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(an(e.slidesEl,`.${e.params.slideClass}[data-hash="${f}"], swiper-slide[data-hash="${f}"]`)[0])}}});const l=()=>{n("hashChange");const h=o.location.hash.replace("#",""),f=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],m=f?f.getAttribute("data-hash"):"";if(h!==m){const b=e.params.hashNavigation.getSlideIndex(e,h);if(typeof b>"u"||Number.isNaN(b))return;e.slideTo(b)}},u=()=>{if(!r||!e.params.hashNavigation.enabled)return;const h=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],f=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&a.history&&a.history.replaceState?(a.history.replaceState(null,null,`#${f}`||""),n("hashSet")):(o.location.hash=f||"",n("hashSet"))},c=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;const h=o.location.hash.replace("#","");if(h){const m=e.params.hashNavigation.getSlideIndex(e,h);e.slideTo(m||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&a.addEventListener("hashchange",l)},d=()=>{e.params.hashNavigation.watchState&&a.removeEventListener("hashchange",l)};s("init",()=>{e.params.hashNavigation.enabled&&c()}),s("destroy",()=>{e.params.hashNavigation.enabled&&d()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{r&&u()}),s("slideChange",()=>{r&&e.params.cssMode&&u()})}function K1(i){let{swiper:e,extendParams:t,on:n,emit:s,params:r}=i;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=r&&r.autoplay?r.autoplay.delay:3e3,u=r&&r.autoplay?r.autoplay.delay:3e3,c,d=new Date().getTime(),h,f,m,b,v,g,E;function w(z){!e||e.destroyed||!e.wrapperEl||z.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",w),!(E||z.detail&&z.detail.bySwiperTouchMove)&&C())}const S=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?h=!0:h&&(u=c,h=!1);const z=e.autoplay.paused?c:d+u-new Date().getTime();e.autoplay.timeLeft=z,s("autoplayTimeLeft",z,z/l),a=requestAnimationFrame(()=>{S()})},I=()=>{let z;return e.virtual&&e.params.virtual.enabled?z=e.slides.filter(Ee=>Ee.classList.contains("swiper-slide-active"))[0]:z=e.slides[e.activeIndex],z?parseInt(z.getAttribute("data-swiper-autoplay"),10):void 0},D=z=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),S();let ue=typeof z>"u"?e.params.autoplay.delay:z;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const Ee=I();!Number.isNaN(Ee)&&Ee>0&&typeof z>"u"&&(ue=Ee,l=Ee,u=Ee),c=ue;const J=e.params.speed,W=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(J,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,J,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(J,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,J,!0,!0),s("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{D()})))};return ue>0?(clearTimeout(o),o=setTimeout(()=>{W()},ue)):requestAnimationFrame(()=>{W()}),ue},y=()=>{d=new Date().getTime(),e.autoplay.running=!0,D(),s("autoplayStart")},B=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),s("autoplayStop")},V=(z,ue)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),z||(g=!0);const Ee=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",w):C()};if(e.autoplay.paused=!0,ue){v&&(c=e.params.autoplay.delay),v=!1,Ee();return}c=(c||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&c<0&&!e.params.loop)&&(c<0&&(c=0),Ee())},C=()=>{e.isEnd&&c<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),g?(g=!1,D(c)):D(),e.autoplay.paused=!1,s("autoplayResume"))},A=()=>{if(e.destroyed||!e.autoplay.running)return;const z=ln();z.visibilityState==="hidden"&&(g=!0,V(!0)),z.visibilityState==="visible"&&C()},H=z=>{z.pointerType==="mouse"&&(g=!0,E=!0,!(e.animating||e.autoplay.paused)&&V(!0))},P=z=>{z.pointerType==="mouse"&&(E=!1,e.autoplay.paused&&C())},F=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",H),e.el.addEventListener("pointerleave",P))},Y=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",H),e.el.removeEventListener("pointerleave",P))},Q=()=>{ln().addEventListener("visibilitychange",A)},G=()=>{ln().removeEventListener("visibilitychange",A)};n("init",()=>{e.params.autoplay.enabled&&(F(),Q(),y())}),n("destroy",()=>{Y(),G(),e.autoplay.running&&B()}),n("_freeModeStaticRelease",()=>{(m||g)&&C()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?B():V(!0,!0)}),n("beforeTransitionStart",(z,ue,Ee)=>{e.destroyed||!e.autoplay.running||(Ee||!e.params.autoplay.disableOnInteraction?V(!0,!0):B())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){B();return}f=!0,m=!1,g=!1,b=setTimeout(()=>{g=!0,m=!0,V(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!f)){if(clearTimeout(b),clearTimeout(o),e.params.autoplay.disableOnInteraction){m=!1,f=!1;return}m&&e.params.cssMode&&C(),m=!1,f=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:y,stop:B,pause:V,resume:C})}function Z1(i){let{swiper:e,extendParams:t,on:n}=i;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;e.thumbs={swiper:null};function o(){const u=e.thumbs.swiper;if(!u||u.destroyed)return;const c=u.clickedIndex,d=u.clickedSlide;if(d&&d.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof c>"u"||c===null)return;let h;u.params.loop?h=parseInt(u.clickedSlide.getAttribute("data-swiper-slide-index"),10):h=c,e.params.loop?e.slideToLoop(h):e.slideTo(h)}function a(){const{thumbs:u}=e.params;if(s)return!1;s=!0;const c=e.constructor;if(u.swiper instanceof c)e.thumbs.swiper=u.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if($l(u.swiper)){const d=Object.assign({},u.swiper);Object.assign(d,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new c(d),r=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",o),!0}function l(u){const c=e.thumbs.swiper;if(!c||c.destroyed)return;const d=c.params.slidesPerView==="auto"?c.slidesPerViewDynamic():c.params.slidesPerView;let h=1;const f=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(h=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),c.slides.forEach(v=>v.classList.remove(f)),c.params.loop||c.params.virtual&&c.params.virtual.enabled)for(let v=0;v<h;v+=1)an(c.slidesEl,`[data-swiper-slide-index="${e.realIndex+v}"]`).forEach(g=>{g.classList.add(f)});else for(let v=0;v<h;v+=1)c.slides[e.realIndex+v]&&c.slides[e.realIndex+v].classList.add(f);const m=e.params.thumbs.autoScrollOffset,b=m&&!c.params.loop;if(e.realIndex!==c.realIndex||b){const v=c.activeIndex;let g,E;if(c.params.loop){const w=c.slides.filter(S=>S.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];g=c.slides.indexOf(w),E=e.activeIndex>e.previousIndex?"next":"prev"}else g=e.realIndex,E=g>e.previousIndex?"next":"prev";b&&(g+=E==="next"?m:-1*m),c.visibleSlidesIndexes&&c.visibleSlidesIndexes.indexOf(g)<0&&(c.params.centeredSlides?g>v?g=g-Math.floor(d/2)+1:g=g+Math.floor(d/2)-1:g>v&&c.params.slidesPerGroup,c.slideTo(g,u?0:void 0))}}n("beforeInit",()=>{const{thumbs:u}=e.params;if(!(!u||!u.swiper))if(typeof u.swiper=="string"||u.swiper instanceof HTMLElement){const c=ln(),d=()=>{const f=typeof u.swiper=="string"?c.querySelector(u.swiper):u.swiper;if(f&&f.swiper)u.swiper=f.swiper,a(),l(!0);else if(f){const m=`${e.params.eventsPrefix}init`,b=v=>{u.swiper=v.detail[0],f.removeEventListener(m,b),a(),l(!0),u.swiper.update(),e.update()};f.addEventListener(m,b)}return f},h=()=>{if(e.destroyed)return;d()||requestAnimationFrame(h)};requestAnimationFrame(h)}else a(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(u,c)=>{const d=e.thumbs.swiper;!d||d.destroyed||d.setTransition(c)}),n("beforeDestroy",()=>{const u=e.thumbs.swiper;!u||u.destroyed||r&&u.destroy()}),Object.assign(e.thumbs,{init:a,update:l})}function Q1(i){let{swiper:e,extendParams:t,emit:n,once:s}=i;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(e.params.cssMode)return;const l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function o(){if(e.params.cssMode)return;const{touchEventsData:l,touches:u}=e;l.velocities.length===0&&l.velocities.push({position:u[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:u[e.isHorizontal()?"currentX":"currentY"],time:as()})}function a(l){let{currentPos:u}=l;if(e.params.cssMode)return;const{params:c,wrapperEl:d,rtlTranslate:h,snapGrid:f,touchEventsData:m}=e,v=as()-m.touchStartTime;if(u<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(u>-e.maxTranslate()){e.slides.length<f.length?e.slideTo(f.length-1):e.slideTo(e.slides.length-1);return}if(c.freeMode.momentum){if(m.velocities.length>1){const B=m.velocities.pop(),V=m.velocities.pop(),C=B.position-V.position,A=B.time-V.time;e.velocity=C/A,e.velocity/=2,Math.abs(e.velocity)<c.freeMode.minimumVelocity&&(e.velocity=0),(A>150||as()-B.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=c.freeMode.momentumVelocityRatio,m.velocities.length=0;let g=1e3*c.freeMode.momentumRatio;const E=e.velocity*g;let w=e.translate+E;h&&(w=-w);let S=!1,I;const D=Math.abs(e.velocity)*20*c.freeMode.momentumBounceRatio;let y;if(w<e.maxTranslate())c.freeMode.momentumBounce?(w+e.maxTranslate()<-D&&(w=e.maxTranslate()-D),I=e.maxTranslate(),S=!0,m.allowMomentumBounce=!0):w=e.maxTranslate(),c.loop&&c.centeredSlides&&(y=!0);else if(w>e.minTranslate())c.freeMode.momentumBounce?(w-e.minTranslate()>D&&(w=e.minTranslate()+D),I=e.minTranslate(),S=!0,m.allowMomentumBounce=!0):w=e.minTranslate(),c.loop&&c.centeredSlides&&(y=!0);else if(c.freeMode.sticky){let B;for(let V=0;V<f.length;V+=1)if(f[V]>-w){B=V;break}Math.abs(f[B]-w)<Math.abs(f[B-1]-w)||e.swipeDirection==="next"?w=f[B]:w=f[B-1],w=-w}if(y&&s("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(h?g=Math.abs((-w-e.translate)/e.velocity):g=Math.abs((w-e.translate)/e.velocity),c.freeMode.sticky){const B=Math.abs((h?-w:w)-e.translate),V=e.slidesSizesGrid[e.activeIndex];B<V?g=c.speed:B<2*V?g=c.speed*1.5:g=c.speed*2.5}}else if(c.freeMode.sticky){e.slideToClosest();return}c.freeMode.momentumBounce&&S?(e.updateProgress(I),e.setTransition(g),e.setTranslate(w),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Xl(d,()=>{!e||e.destroyed||!m.allowMomentumBounce||(n("momentumBounce"),e.setTransition(c.speed),setTimeout(()=>{e.setTranslate(I),Xl(d,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(w),e.setTransition(g),e.setTranslate(w),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Xl(d,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(w),e.updateActiveIndex(),e.updateSlidesClasses()}else if(c.freeMode.sticky){e.slideToClosest();return}else c.freeMode&&n("_freeModeNoMomentumRelease");(!c.freeMode.momentum||v>=c.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:r,onTouchMove:o,onTouchEnd:a}})}function J1(i){let{swiper:e,extendParams:t,on:n}=i;t({grid:{rows:1,fill:"column"}});let s,r,o,a;const l=()=>{let b=e.params.spaceBetween;return typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*e.size:typeof b=="string"&&(b=parseFloat(b)),b},u=b=>{const{slidesPerView:v}=e.params,{rows:g,fill:E}=e.params.grid,w=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:b.length;o=Math.floor(w/g),Math.floor(w/g)===w/g?s=w:s=Math.ceil(w/g)*g,v!=="auto"&&E==="row"&&(s=Math.max(s,v*g)),r=s/g},c=()=>{e.slides&&e.slides.forEach(b=>{b.swiperSlideGridSet&&(b.style.height="",b.style[e.getDirectionLabel("margin-top")]="")})},d=(b,v,g)=>{const{slidesPerGroup:E}=e.params,w=l(),{rows:S,fill:I}=e.params.grid,D=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:g.length;let y,B,V;if(I==="row"&&E>1){const C=Math.floor(b/(E*S)),A=b-S*E*C,H=C===0?E:Math.min(Math.ceil((D-C*S*E)/S),E);V=Math.floor(A/H),B=A-V*H+C*E,y=B+V*s/S,v.style.order=y}else I==="column"?(B=Math.floor(b/S),V=b-B*S,(B>o||B===o&&V===S-1)&&(V+=1,V>=S&&(V=0,B+=1))):(V=Math.floor(b/r),B=b-V*r);v.row=V,v.column=B,v.style.height=`calc((100% - ${(S-1)*w}px) / ${S})`,v.style[e.getDirectionLabel("margin-top")]=V!==0?w&&`${w}px`:"",v.swiperSlideGridSet=!0},h=(b,v)=>{const{centeredSlides:g,roundLengths:E}=e.params,w=l(),{rows:S}=e.params.grid;if(e.virtualSize=(b+w)*s,e.virtualSize=Math.ceil(e.virtualSize/S)-w,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+w}px`),g){const I=[];for(let D=0;D<v.length;D+=1){let y=v[D];E&&(y=Math.floor(y)),v[D]<e.virtualSize+v[0]&&I.push(y)}v.splice(0,v.length),v.push(...I)}},f=()=>{a=e.params.grid&&e.params.grid.rows>1},m=()=>{const{params:b,el:v}=e,g=b.grid&&b.grid.rows>1;a&&!g?(v.classList.remove(`${b.containerModifierClass}grid`,`${b.containerModifierClass}grid-column`),o=1,e.emitContainerClasses()):!a&&g&&(v.classList.add(`${b.containerModifierClass}grid`),b.grid.fill==="column"&&v.classList.add(`${b.containerModifierClass}grid-column`),e.emitContainerClasses()),a=g};n("init",f),n("update",m),e.grid={initSlides:u,unsetSlides:c,updateSlide:d,updateWrapperSize:h}}function eT(i){const e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();const s=r=>{if(typeof r=="string"){const o=document.createElement("div");o.innerHTML=r,n.append(o.children[0]),o.innerHTML=""}else n.append(r)};if(typeof i=="object"&&"length"in i)for(let r=0;r<i.length;r+=1)i[r]&&s(i[r]);else s(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function tT(i){const e=this,{params:t,activeIndex:n,slidesEl:s}=e;t.loop&&e.loopDestroy();let r=n+1;const o=a=>{if(typeof a=="string"){const l=document.createElement("div");l.innerHTML=a,s.prepend(l.children[0]),l.innerHTML=""}else s.prepend(a)};if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)i[a]&&o(i[a]);r=n+i.length}else o(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(r,0,!1)}function iT(i,e){const t=this,{params:n,activeIndex:s,slidesEl:r}=t;let o=s;n.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());const a=t.slides.length;if(i<=0){t.prependSlide(e);return}if(i>=a){t.appendSlide(e);return}let l=o>i?o+1:o;const u=[];for(let c=a-1;c>=i;c-=1){const d=t.slides[c];d.remove(),u.unshift(d)}if(typeof e=="object"&&"length"in e){for(let c=0;c<e.length;c+=1)e[c]&&r.append(e[c]);l=o>i?o+e.length:o}else r.append(e);for(let c=0;c<u.length;c+=1)r.append(u[c]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function nT(i){const e=this,{params:t,activeIndex:n}=e;let s=n;t.loop&&(s-=e.loopedSlides,e.loopDestroy());let r=s,o;if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)o=i[a],e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1);r=Math.max(r,0)}else o=i,e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1),r=Math.max(r,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function sT(){const i=this,e=[];for(let t=0;t<i.slides.length;t+=1)e.push(t);i.removeSlide(e)}function rT(i){let{swiper:e}=i;Object.assign(e,{appendSlide:eT.bind(e),prependSlide:tT.bind(e),addSlide:iT.bind(e),removeSlide:nT.bind(e),removeAllSlides:sT.bind(e)})}function tl(i){const{effect:e,swiper:t,on:n,setTranslate:s,setTransition:r,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:u}=i;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=o?o():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),n("setTranslate",()=>{t.params.effect===e&&s()}),n("setTransition",(d,h)=>{t.params.effect===e&&r(h)}),n("transitionEnd",()=>{if(t.params.effect===e&&l){if(!u||!u().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let c;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(c=!0),requestAnimationFrame(()=>{c&&t.slides&&t.slides.length&&(s(),c=!1)}))})}function Cc(i,e){const t=qo(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function Nd(i){let{swiper:e,duration:t,transformElements:n,allSlides:s}=i;const{activeIndex:r}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(u=>u.shadowRoot&&u.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let a=!1,l;s?l=n:l=n.filter(u=>{const c=u.classList.contains("swiper-slide-transform")?o(u):u;return e.getSlideIndex(c)===r}),l.forEach(u=>{Xl(u,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;const c=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(c)})})}}function oT(i){let{swiper:e,extendParams:t,on:n}=i;t({fadeEffect:{crossFade:!1}}),tl({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){const u=e.slides[l];let d=-u.swiperSlideOffset;e.params.virtualTranslate||(d-=e.translate);let h=0;e.isHorizontal()||(h=d,d=0);const f=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(u.progress),0):1+Math.min(Math.max(u.progress,-1),0),m=Cc(a,u);m.style.opacity=f,m.style.transform=`translate3d(${d}px, ${h}px, 0px)`}},setTransition:o=>{const a=e.slides.map(l=>qo(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),Nd({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function aT(i){let{swiper:e,extendParams:t,on:n}=i;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const s=(l,u,c)=>{let d=c?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=c?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=Hn("div",`swiper-slide-shadow-cube swiper-slide-shadow-${c?"left":"top"}`.split(" ")),l.append(d)),h||(h=Hn("div",`swiper-slide-shadow-cube swiper-slide-shadow-${c?"right":"bottom"}`.split(" ")),l.append(h)),d&&(d.style.opacity=Math.max(-u,0)),h&&(h.style.opacity=Math.max(u,0))};tl({effect:"cube",swiper:e,on:n,setTranslate:()=>{const{el:l,wrapperEl:u,slides:c,width:d,height:h,rtlTranslate:f,size:m,browser:b}=e,v=Od(e),g=e.params.cubeEffect,E=e.isHorizontal(),w=e.virtual&&e.params.virtual.enabled;let S=0,I;g.shadow&&(E?(I=e.wrapperEl.querySelector(".swiper-cube-shadow"),I||(I=Hn("div","swiper-cube-shadow"),e.wrapperEl.append(I)),I.style.height=`${d}px`):(I=l.querySelector(".swiper-cube-shadow"),I||(I=Hn("div","swiper-cube-shadow"),l.append(I))));for(let y=0;y<c.length;y+=1){const B=c[y];let V=y;w&&(V=parseInt(B.getAttribute("data-swiper-slide-index"),10));let C=V*90,A=Math.floor(C/360);f&&(C=-C,A=Math.floor(-C/360));const H=Math.max(Math.min(B.progress,1),-1);let P=0,F=0,Y=0;V%4===0?(P=-A*4*m,Y=0):(V-1)%4===0?(P=0,Y=-A*4*m):(V-2)%4===0?(P=m+A*4*m,Y=m):(V-3)%4===0&&(P=-m,Y=3*m+m*4*A),f&&(P=-P),E||(F=P,P=0);const Q=`rotateX(${v(E?0:-C)}deg) rotateY(${v(E?C:0)}deg) translate3d(${P}px, ${F}px, ${Y}px)`;H<=1&&H>-1&&(S=V*90+H*90,f&&(S=-V*90-H*90)),B.style.transform=Q,g.slideShadows&&s(B,H,E)}if(u.style.transformOrigin=`50% 50% -${m/2}px`,u.style["-webkit-transform-origin"]=`50% 50% -${m/2}px`,g.shadow)if(E)I.style.transform=`translate3d(0px, ${d/2+g.shadowOffset}px, ${-d/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${g.shadowScale})`;else{const y=Math.abs(S)-Math.floor(Math.abs(S)/90)*90,B=1.5-(Math.sin(y*2*Math.PI/360)/2+Math.cos(y*2*Math.PI/360)/2),V=g.shadowScale,C=g.shadowScale/B,A=g.shadowOffset;I.style.transform=`scale3d(${V}, 1, ${C}) translate3d(0px, ${h/2+A}px, ${-h/2/C}px) rotateX(-89.99deg)`}const D=(b.isSafari||b.isWebView)&&b.needPerspectiveFix?-m/2:0;u.style.transform=`translate3d(0px,0,${D}px) rotateX(${v(e.isHorizontal()?0:S)}deg) rotateY(${v(e.isHorizontal()?-S:0)}deg)`,u.style.setProperty("--swiper-cube-translate-z",`${D}px`)},setTransition:l=>{const{el:u,slides:c}=e;if(c.forEach(d=>{d.style.transitionDuration=`${l}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const d=u.querySelector(".swiper-cube-shadow");d&&(d.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{const l=e.isHorizontal();e.slides.forEach(u=>{const c=Math.max(Math.min(u.progress,1),-1);s(u,c,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Va(i,e,t){const n=`swiper-slide-shadow${t?`-${t}`:""}${i?` swiper-slide-shadow-${i}`:""}`,s=qo(e);let r=s.querySelector(`.${n.split(" ").join(".")}`);return r||(r=Hn("div",n.split(" ")),s.append(r)),r}function lT(i){let{swiper:e,extendParams:t,on:n}=i;t({flipEffect:{slideShadows:!0,limitRotation:!0}});const s=(l,u)=>{let c=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),d=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");c||(c=Va("flip",l,e.isHorizontal()?"left":"top")),d||(d=Va("flip",l,e.isHorizontal()?"right":"bottom")),c&&(c.style.opacity=Math.max(-u,0)),d&&(d.style.opacity=Math.max(u,0))};tl({effect:"flip",swiper:e,on:n,setTranslate:()=>{const{slides:l,rtlTranslate:u}=e,c=e.params.flipEffect,d=Od(e);for(let h=0;h<l.length;h+=1){const f=l[h];let m=f.progress;e.params.flipEffect.limitRotation&&(m=Math.max(Math.min(f.progress,1),-1));const b=f.swiperSlideOffset;let g=-180*m,E=0,w=e.params.cssMode?-b-e.translate:-b,S=0;e.isHorizontal()?u&&(g=-g):(S=w,w=0,E=-g,g=0),f.style.zIndex=-Math.abs(Math.round(m))+l.length,c.slideShadows&&s(f,m);const I=`translate3d(${w}px, ${S}px, 0px) rotateX(${d(E)}deg) rotateY(${d(g)}deg)`,D=Cc(c,f);D.style.transform=I}},setTransition:l=>{const u=e.slides.map(c=>qo(c));u.forEach(c=>{c.style.transitionDuration=`${l}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>{d.style.transitionDuration=`${l}ms`})}),Nd({swiper:e,duration:l,transformElements:u})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let u=l.progress;e.params.flipEffect.limitRotation&&(u=Math.max(Math.min(l.progress,1),-1)),s(l,u)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function cT(i){let{swiper:e,extendParams:t,on:n}=i;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),tl({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{const{width:o,height:a,slides:l,slidesSizesGrid:u}=e,c=e.params.coverflowEffect,d=e.isHorizontal(),h=e.translate,f=d?-h+o/2:-h+a/2,m=d?c.rotate:-c.rotate,b=c.depth,v=Od(e);for(let g=0,E=l.length;g<E;g+=1){const w=l[g],S=u[g],I=w.swiperSlideOffset,D=(f-I-S/2)/S,y=typeof c.modifier=="function"?c.modifier(D):D*c.modifier;let B=d?m*y:0,V=d?0:m*y,C=-b*Math.abs(y),A=c.stretch;typeof A=="string"&&A.indexOf("%")!==-1&&(A=parseFloat(c.stretch)/100*S);let H=d?0:A*y,P=d?A*y:0,F=1-(1-c.scale)*Math.abs(y);Math.abs(P)<.001&&(P=0),Math.abs(H)<.001&&(H=0),Math.abs(C)<.001&&(C=0),Math.abs(B)<.001&&(B=0),Math.abs(V)<.001&&(V=0),Math.abs(F)<.001&&(F=0);const Y=`translate3d(${P}px,${H}px,${C}px)  rotateX(${v(V)}deg) rotateY(${v(B)}deg) scale(${F})`,Q=Cc(c,w);if(Q.style.transform=Y,w.style.zIndex=-Math.abs(Math.round(y))+1,c.slideShadows){let G=d?w.querySelector(".swiper-slide-shadow-left"):w.querySelector(".swiper-slide-shadow-top"),z=d?w.querySelector(".swiper-slide-shadow-right"):w.querySelector(".swiper-slide-shadow-bottom");G||(G=Va("coverflow",w,d?"left":"top")),z||(z=Va("coverflow",w,d?"right":"bottom")),G&&(G.style.opacity=y>0?y:0),z&&(z.style.opacity=-y>0?-y:0)}}},setTransition:o=>{e.slides.map(l=>qo(l)).forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>{u.style.transitionDuration=`${o}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function uT(i){let{swiper:e,extendParams:t,on:n}=i;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const s=a=>typeof a=="string"?a:`${a}px`;tl({effect:"creative",swiper:e,on:n,setTranslate:()=>{const{slides:a,wrapperEl:l,slidesSizesGrid:u}=e,c=e.params.creativeEffect,{progressMultiplier:d}=c,h=e.params.centeredSlides,f=Od(e);if(h){const m=u[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${m}px))`}for(let m=0;m<a.length;m+=1){const b=a[m],v=b.progress,g=Math.min(Math.max(b.progress,-c.limitProgress),c.limitProgress);let E=g;h||(E=Math.min(Math.max(b.originalProgress,-c.limitProgress),c.limitProgress));const w=b.swiperSlideOffset,S=[e.params.cssMode?-w-e.translate:-w,0,0],I=[0,0,0];let D=!1;e.isHorizontal()||(S[1]=S[0],S[0]=0);let y={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};g<0?(y=c.next,D=!0):g>0&&(y=c.prev,D=!0),S.forEach((F,Y)=>{S[Y]=`calc(${F}px + (${s(y.translate[Y])} * ${Math.abs(g*d)}))`}),I.forEach((F,Y)=>{let Q=y.rotate[Y]*Math.abs(g*d);I[Y]=Q}),b.style.zIndex=-Math.abs(Math.round(v))+a.length;const B=S.join(", "),V=`rotateX(${f(I[0])}deg) rotateY(${f(I[1])}deg) rotateZ(${f(I[2])}deg)`,C=E<0?`scale(${1+(1-y.scale)*E*d})`:`scale(${1-(1-y.scale)*E*d})`,A=E<0?1+(1-y.opacity)*E*d:1-(1-y.opacity)*E*d,H=`translate3d(${B}) ${V} ${C}`;if(D&&y.shadow||!D){let F=b.querySelector(".swiper-slide-shadow");if(!F&&y.shadow&&(F=Va("creative",b)),F){const Y=c.shadowPerProgress?g*(1/c.limitProgress):g;F.style.opacity=Math.min(Math.max(Math.abs(Y),0),1)}}const P=Cc(c,b);P.style.transform=H,P.style.opacity=A,y.origin&&(P.style.transformOrigin=y.origin)}},setTransition:a=>{const l=e.slides.map(u=>qo(u));l.forEach(u=>{u.style.transitionDuration=`${a}ms`,u.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${a}ms`})}),Nd({swiper:e,duration:a,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function dT(i){let{swiper:e,extendParams:t,on:n}=i;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),tl({effect:"cards",swiper:e,on:n,setTranslate:()=>{const{slides:o,activeIndex:a,rtlTranslate:l}=e,u=e.params.cardsEffect,{startTranslate:c,isTouched:d}=e.touchEventsData,h=l?-e.translate:e.translate;for(let f=0;f<o.length;f+=1){const m=o[f],b=m.progress,v=Math.min(Math.max(b,-4),4);let g=m.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(g-=o[0].swiperSlideOffset);let E=e.params.cssMode?-g-e.translate:-g,w=0;const S=-100*Math.abs(v);let I=1,D=-u.perSlideRotate*v,y=u.perSlideOffset-Math.abs(v)*.75;const B=e.virtual&&e.params.virtual.enabled?e.virtual.from+f:f,V=(B===a||B===a-1)&&v>0&&v<1&&(d||e.params.cssMode)&&h<c,C=(B===a||B===a+1)&&v<0&&v>-1&&(d||e.params.cssMode)&&h>c;if(V||C){const F=(1-Math.abs((Math.abs(v)-.5)/.5))**.5;D+=-28*v*F,I+=-.5*F,y+=96*F,w=`${-25*F*Math.abs(v)}%`}if(v<0?E=`calc(${E}px ${l?"-":"+"} (${y*Math.abs(v)}%))`:v>0?E=`calc(${E}px ${l?"-":"+"} (-${y*Math.abs(v)}%))`:E=`${E}px`,!e.isHorizontal()){const F=w;w=E,E=F}const A=v<0?`${1+(1-I)*v}`:`${1-(1-I)*v}`,H=`
        translate3d(${E}, ${w}, ${S}px)
        rotateZ(${u.rotate?l?-D:D:0}deg)
        scale(${A})
      `;if(u.slideShadows){let F=m.querySelector(".swiper-slide-shadow");F||(F=Va("cards",m)),F&&(F.style.opacity=Math.min(Math.max((Math.abs(v)-.5)/.5,0),1))}m.style.zIndex=-Math.abs(Math.round(b))+o.length;const P=Cc(u,m);P.style.transform=H}},setTransition:o=>{const a=e.slides.map(l=>qo(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(u=>{u.style.transitionDuration=`${o}ms`})}),Nd({swiper:e,duration:o,transformElements:a})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}const hT=[U1,z1,B1,H1,V1,$1,G1,W1,j1,q1,X1,Y1,K1,Z1,Q1,J1,rT,oT,aT,lT,cT,uT,dT];gi.use(hT);new gi(".section-top--backdrop-swiper",{grabCursor:!0,slidesPerView:1,loop:!0,spaceBetween:20,pagination:{el:".section-top--backdrop-swiper .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},speed:1e3,effect:"fade"});new gi(".shares--swiper",{grabCursor:!0,slidesPerView:3,loop:!0,spaceBetween:25,pagination:{el:".shares .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{loop:!1},1024:{slidesPerView:2.3,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".doctors--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".doctors .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},575:{slidesPerView:1.8,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".offices--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".offices .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:20},575:{slidesPerView:1.8,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".reviews--swiper",{grabCursor:!0,slidesPerView:2,loop:!0,spaceBetween:25,pagination:{el:".reviews .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:1.8,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.3,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".partners--swiper",{slidesPerView:6.5,spaceBetween:25,loop:!0,speed:6e3,autoplay:{enabled:!0,delay:1},centeredSlides:!0,allowTouchMove:!1,breakpoints:{1200:{},1024:{slidesPerView:5.5,spaceBetween:20},768:{slidesPerView:4.2,spaceBetween:20},575:{slidesPerView:3.2,spaceBetween:15},0:{slidesPerView:1.8,spaceBetween:15}}});new gi(".news--swiper",{grabCursor:!0,slidesPerView:3,loop:!0,spaceBetween:25,pagination:{el:".news .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{loop:!1},1024:{slidesPerView:2.3,spaceBetween:20},768:{slidesPerView:1.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".certificates--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,pagination:{el:".certificates .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.2,spaceBetween:20},768:{slidesPerView:2.6,spaceBetween:20},575:{slidesPerView:1.6,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".stay-conditions--swiper",{grabCursor:!0,loop:!0,pagination:{el:".stay-conditions .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1024:{loop:!1},768:{slidesPerView:2.2,spaceBetween:20},575:{slidesPerView:1.7,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".hospital--swiper",{grabCursor:!0,loop:!0,pagination:{el:".hospital .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1024:{loop:!1},768:{slidesPerView:2.2,spaceBetween:20},575:{slidesPerView:1.7,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}}});new gi(".media--swiper",{grabCursor:!0,loop:!0,slidesPerView:4.5,spaceBetween:25,pagination:{el:".media-content .swiper-pagination",clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{},1024:{slidesPerView:3.5},768:{slidesPerView:2.7,spaceBetween:20},575:{slidesPerView:2.2,spaceBetween:15},0:{slidesPerView:1,spaceBetween:15}},observer:!0,observeParents:!0,observeSlideChildren:!0});new gi(".template-shares--swiper",{grabCursor:!0,slidesPerView:1,loop:!0,spaceBetween:25,pagination:{el:".template-shares--swiper .swiper-pagination",clickable:!0},navigation:{nextEl:".template-shares--swiper .swiper-buttons .button-slider-next",prevEl:".template-shares--swiper .swiper-buttons .button-slider-prev"},autoplay:{delay:1e4,disableOnInteraction:!1},breakpoints:{1024:{},768:{spaceBetween:20,slidesPerView:2},0:{spaceBetween:15}}});new gi(".offices-anchor--swiper",{grabCursor:!0,slidesPerView:4,loop:!0,spaceBetween:25,autoHeight:!0,navigation:{nextEl:".offices-anchor--swiper .swiper-buttons .button-slider-next",prevEl:".offices-anchor--swiper .swiper-buttons .button-slider-prev"},autoplay:{delay:1e4,disableOnInteraction:!1},breakpoints:{1400:{},1200:{slidesPerView:3},1024:{slidesPerView:3},768:{spaceBetween:20,slidesPerView:2},575:{spaceBetween:15,slidesPerView:1},0:{spaceBetween:15,slidesPerView:1}}});document.querySelectorAll(".offices-direction-thumbs--swiper").forEach(function(i,e){var t=document.querySelectorAll(".offices-direction--swiper")[e];if(i&&t){var n=new gi(i,{grabCursor:!0,spaceBetween:8,slidesPerView:"auto"});new gi(t,{grabCursor:!0,slidesPerView:1,loop:!0,breakpoints:{1200:{spaceBetween:25},576:{spaceBetween:20},0:{}},autoplay:{delay:1e4,disableOnInteraction:!1},navigation:{nextEl:t.querySelector(".swiper-buttons .button-slider-next"),prevEl:t.querySelector(".swiper-buttons .button-slider-prev")},thumbs:{swiper:n}})}});var xy={exports:{}};/*!
 * Select2 4.1.0-rc.0
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */(function(i){(function(e){i.exports?i.exports=function(t,n){return n===void 0&&(typeof window<"u"?n=dc:n=dc(t)),e(n),n}:e(jQuery)})(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var s=e.fn.select2.amd;var s;return function(){if(!s||!s.requirejs){s?o=s:s={};/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var r,o,a;(function(l){var u,c,d,h,f={},m={},b={},v={},g=Object.prototype.hasOwnProperty,E=[].slice,w=/\.js$/;function S(P,F){return g.call(P,F)}function I(P,F){var Y,Q,G,z,ue,Ee,J,W,oe,ie,j,me,ge=F&&F.split("/"),Ne=b.map,Fe=Ne&&Ne["*"]||{};if(P){for(P=P.split("/"),ue=P.length-1,b.nodeIdCompat&&w.test(P[ue])&&(P[ue]=P[ue].replace(w,"")),P[0].charAt(0)==="."&&ge&&(me=ge.slice(0,ge.length-1),P=me.concat(P)),oe=0;oe<P.length;oe++)if(j=P[oe],j===".")P.splice(oe,1),oe-=1;else if(j===".."){if(oe===0||oe===1&&P[2]===".."||P[oe-1]==="..")continue;oe>0&&(P.splice(oe-1,2),oe-=2)}P=P.join("/")}if((ge||Fe)&&Ne){for(Y=P.split("/"),oe=Y.length;oe>0;oe-=1){if(Q=Y.slice(0,oe).join("/"),ge){for(ie=ge.length;ie>0;ie-=1)if(G=Ne[ge.slice(0,ie).join("/")],G&&(G=G[Q],G)){z=G,Ee=oe;break}}if(z)break;!J&&Fe&&Fe[Q]&&(J=Fe[Q],W=oe)}!z&&J&&(z=J,Ee=W),z&&(Y.splice(0,Ee,z),P=Y.join("/"))}return P}function D(P,F){return function(){var Y=E.call(arguments,0);return typeof Y[0]!="string"&&Y.length===1&&Y.push(null),c.apply(l,Y.concat([P,F]))}}function y(P){return function(F){return I(F,P)}}function B(P){return function(F){f[P]=F}}function V(P){if(S(m,P)){var F=m[P];delete m[P],v[P]=!0,u.apply(l,F)}if(!S(f,P)&&!S(v,P))throw new Error("No "+P);return f[P]}function C(P){var F,Y=P?P.indexOf("!"):-1;return Y>-1&&(F=P.substring(0,Y),P=P.substring(Y+1,P.length)),[F,P]}function A(P){return P?C(P):[]}d=function(P,F){var Y,Q=C(P),G=Q[0],z=F[1];return P=Q[1],G&&(G=I(G,z),Y=V(G)),G?Y&&Y.normalize?P=Y.normalize(P,y(z)):P=I(P,z):(P=I(P,z),Q=C(P),G=Q[0],P=Q[1],G&&(Y=V(G))),{f:G?G+"!"+P:P,n:P,pr:G,p:Y}};function H(P){return function(){return b&&b.config&&b.config[P]||{}}}h={require:function(P){return D(P)},exports:function(P){var F=f[P];return typeof F<"u"?F:f[P]={}},module:function(P){return{id:P,uri:"",exports:f[P],config:H(P)}}},u=function(P,F,Y,Q){var G,z,ue,Ee,J,W,oe=[],ie=typeof Y,j;if(Q=Q||P,W=A(Q),ie==="undefined"||ie==="function"){for(F=!F.length&&Y.length?["require","exports","module"]:F,J=0;J<F.length;J+=1)if(Ee=d(F[J],W),z=Ee.f,z==="require")oe[J]=h.require(P);else if(z==="exports")oe[J]=h.exports(P),j=!0;else if(z==="module")G=oe[J]=h.module(P);else if(S(f,z)||S(m,z)||S(v,z))oe[J]=V(z);else if(Ee.p)Ee.p.load(Ee.n,D(Q,!0),B(z),{}),oe[J]=f[z];else throw new Error(P+" missing "+z);ue=Y?Y.apply(f[P],oe):void 0,P&&(G&&G.exports!==l&&G.exports!==f[P]?f[P]=G.exports:(ue!==l||!j)&&(f[P]=ue))}else P&&(f[P]=Y)},r=o=c=function(P,F,Y,Q,G){if(typeof P=="string")return h[P]?h[P](F):V(d(P,A(F)).f);if(!P.splice){if(b=P,b.deps&&c(b.deps,b.callback),!F)return;F.splice?(P=F,F=Y,Y=null):P=l}return F=F||function(){},typeof Y=="function"&&(Y=Q,Q=G),Q?u(l,P,F,Y):setTimeout(function(){u(l,P,F,Y)},4),c},c.config=function(P){return c(P)},r._defined=f,a=function(P,F,Y){if(typeof P!="string")throw new Error("See almond README: incorrect module build, no module name");F.splice||(Y=F,F=[]),!S(f,P)&&!S(m,P)&&(m[P]=[P,F,Y])},a.amd={jQuery:!0}})(),s.requirejs=r,s.require=o,s.define=a}}(),s.define("almond",function(){}),s.define("jquery",[],function(){var r=e||$;return r==null&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),r}),s.define("select2/utils",["jquery"],function(r){var o={};o.Extend=function(c,d){var h={}.hasOwnProperty;function f(){this.constructor=c}for(var m in d)h.call(d,m)&&(c[m]=d[m]);return f.prototype=d.prototype,c.prototype=new f,c.__super__=d.prototype,c};function a(c){var d=c.prototype,h=[];for(var f in d){var m=d[f];typeof m=="function"&&f!=="constructor"&&h.push(f)}return h}o.Decorate=function(c,d){var h=a(d),f=a(c);function m(){var I=Array.prototype.unshift,D=d.prototype.constructor.length,y=c.prototype.constructor;D>0&&(I.call(arguments,c.prototype.constructor),y=d.prototype.constructor),y.apply(this,arguments)}d.displayName=c.displayName;function b(){this.constructor=m}m.prototype=new b;for(var v=0;v<f.length;v++){var g=f[v];m.prototype[g]=c.prototype[g]}for(var E=function(I){var D=function(){};I in m.prototype&&(D=m.prototype[I]);var y=d.prototype[I];return function(){var B=Array.prototype.unshift;return B.call(arguments,D),y.apply(this,arguments)}},w=0;w<h.length;w++){var S=h[w];m.prototype[S]=E(S)}return m};var l=function(){this.listeners={}};l.prototype.on=function(c,d){this.listeners=this.listeners||{},c in this.listeners?this.listeners[c].push(d):this.listeners[c]=[d]},l.prototype.trigger=function(c){var d=Array.prototype.slice,h=d.call(arguments,1);this.listeners=this.listeners||{},h==null&&(h=[]),h.length===0&&h.push({}),h[0]._type=c,c in this.listeners&&this.invoke(this.listeners[c],d.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},l.prototype.invoke=function(c,d){for(var h=0,f=c.length;h<f;h++)c[h].apply(this,d)},o.Observable=l,o.generateChars=function(c){for(var d="",h=0;h<c;h++){var f=Math.floor(Math.random()*36);d+=f.toString(36)}return d},o.bind=function(c,d){return function(){c.apply(d,arguments)}},o._convertData=function(c){for(var d in c){var h=d.split("-"),f=c;if(h.length!==1){for(var m=0;m<h.length;m++){var b=h[m];b=b.substring(0,1).toLowerCase()+b.substring(1),b in f||(f[b]={}),m==h.length-1&&(f[b]=c[d]),f=f[b]}delete c[d]}}return c},o.hasScroll=function(c,d){var h=r(d),f=d.style.overflowX,m=d.style.overflowY;return f===m&&(m==="hidden"||m==="visible")?!1:f==="scroll"||m==="scroll"?!0:h.innerHeight()<d.scrollHeight||h.innerWidth()<d.scrollWidth},o.escapeMarkup=function(c){var d={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return typeof c!="string"?c:String(c).replace(/[&<>"'\/\\]/g,function(h){return d[h]})},o.__cache={};var u=0;return o.GetUniqueElementId=function(c){var d=c.getAttribute("data-select2-id");return d!=null||(c.id?d="select2-data-"+c.id:d="select2-data-"+(++u).toString()+"-"+o.generateChars(4),c.setAttribute("data-select2-id",d)),d},o.StoreData=function(c,d,h){var f=o.GetUniqueElementId(c);o.__cache[f]||(o.__cache[f]={}),o.__cache[f][d]=h},o.GetData=function(c,d){var h=o.GetUniqueElementId(c);return d?o.__cache[h]&&o.__cache[h][d]!=null?o.__cache[h][d]:r(c).data(d):o.__cache[h]},o.RemoveData=function(c){var d=o.GetUniqueElementId(c);o.__cache[d]!=null&&delete o.__cache[d],c.removeAttribute("data-select2-id")},o.copyNonInternalCssClasses=function(c,d){var h=c.getAttribute("class").trim().split(/\s+/);h=h.filter(function(b){return b.indexOf("select2-")===0});var f=d.getAttribute("class").trim().split(/\s+/);f=f.filter(function(b){return b.indexOf("select2-")!==0});var m=h.concat(f);c.setAttribute("class",m.join(" "))},o}),s.define("select2/results",["jquery","./utils"],function(r,o){function a(l,u,c){this.$element=l,this.data=c,this.options=u,a.__super__.constructor.call(this)}return o.Extend(a,o.Observable),a.prototype.render=function(){var l=r('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&l.attr("aria-multiselectable","true"),this.$results=l,l},a.prototype.clear=function(){this.$results.empty()},a.prototype.displayMessage=function(l){var u=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var c=r('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),d=this.options.get("translations").get(l.message);c.append(u(d(l.args))),c[0].className+=" select2-results__message",this.$results.append(c)},a.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},a.prototype.append=function(l){this.hideLoading();var u=[];if(l.results==null||l.results.length===0){this.$results.children().length===0&&this.trigger("results:message",{message:"noResults"});return}l.results=this.sort(l.results);for(var c=0;c<l.results.length;c++){var d=l.results[c],h=this.option(d);u.push(h)}this.$results.append(u)},a.prototype.position=function(l,u){var c=u.find(".select2-results");c.append(l)},a.prototype.sort=function(l){var u=this.options.get("sorter");return u(l)},a.prototype.highlightFirstItem=function(){var l=this.$results.find(".select2-results__option--selectable"),u=l.filter(".select2-results__option--selected");u.length>0?u.first().trigger("mouseenter"):l.first().trigger("mouseenter"),this.ensureHighlightVisible()},a.prototype.setClasses=function(){var l=this;this.data.current(function(u){var c=u.map(function(h){return h.id.toString()}),d=l.$results.find(".select2-results__option--selectable");d.each(function(){var h=r(this),f=o.GetData(this,"data"),m=""+f.id;f.element!=null&&f.element.selected||f.element==null&&c.indexOf(m)>-1?(this.classList.add("select2-results__option--selected"),h.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),h.attr("aria-selected","false"))})})},a.prototype.showLoading=function(l){this.hideLoading();var u=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:u(l)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},a.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},a.prototype.option=function(l){var u=document.createElement("li");u.classList.add("select2-results__option"),u.classList.add("select2-results__option--selectable");var c={role:"option"},d=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;(l.element!=null&&d.call(l.element,":disabled")||l.element==null&&l.disabled)&&(c["aria-disabled"]="true",u.classList.remove("select2-results__option--selectable"),u.classList.add("select2-results__option--disabled")),l.id==null&&u.classList.remove("select2-results__option--selectable"),l._resultId!=null&&(u.id=l._resultId),l.title&&(u.title=l.title),l.children&&(c.role="group",c["aria-label"]=l.text,u.classList.remove("select2-results__option--selectable"),u.classList.add("select2-results__option--group"));for(var h in c){var f=c[h];u.setAttribute(h,f)}if(l.children){var m=r(u),b=document.createElement("strong");b.className="select2-results__group",this.template(l,b);for(var v=[],g=0;g<l.children.length;g++){var E=l.children[g],w=this.option(E);v.push(w)}var S=r("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});S.append(v),m.append(b),m.append(S)}else this.template(l,u);return o.StoreData(u,"data",l),u},a.prototype.bind=function(l,u){var c=this,d=l.id+"-results";this.$results.attr("id",d),l.on("results:all",function(h){c.clear(),c.append(h.data),l.isOpen()&&(c.setClasses(),c.highlightFirstItem())}),l.on("results:append",function(h){c.append(h.data),l.isOpen()&&c.setClasses()}),l.on("query",function(h){c.hideMessages(),c.showLoading(h)}),l.on("select",function(){l.isOpen()&&(c.setClasses(),c.options.get("scrollAfterSelect")&&c.highlightFirstItem())}),l.on("unselect",function(){l.isOpen()&&(c.setClasses(),c.options.get("scrollAfterSelect")&&c.highlightFirstItem())}),l.on("open",function(){c.$results.attr("aria-expanded","true"),c.$results.attr("aria-hidden","false"),c.setClasses(),c.ensureHighlightVisible()}),l.on("close",function(){c.$results.attr("aria-expanded","false"),c.$results.attr("aria-hidden","true"),c.$results.removeAttr("aria-activedescendant")}),l.on("results:toggle",function(){var h=c.getHighlightedResults();h.length!==0&&h.trigger("mouseup")}),l.on("results:select",function(){var h=c.getHighlightedResults();if(h.length!==0){var f=o.GetData(h[0],"data");h.hasClass("select2-results__option--selected")?c.trigger("close",{}):c.trigger("select",{data:f})}}),l.on("results:previous",function(){var h=c.getHighlightedResults(),f=c.$results.find(".select2-results__option--selectable"),m=f.index(h);if(!(m<=0)){var b=m-1;h.length===0&&(b=0);var v=f.eq(b);v.trigger("mouseenter");var g=c.$results.offset().top,E=v.offset().top,w=c.$results.scrollTop()+(E-g);b===0?c.$results.scrollTop(0):E-g<0&&c.$results.scrollTop(w)}}),l.on("results:next",function(){var h=c.getHighlightedResults(),f=c.$results.find(".select2-results__option--selectable"),m=f.index(h),b=m+1;if(!(b>=f.length)){var v=f.eq(b);v.trigger("mouseenter");var g=c.$results.offset().top+c.$results.outerHeight(!1),E=v.offset().top+v.outerHeight(!1),w=c.$results.scrollTop()+E-g;b===0?c.$results.scrollTop(0):E>g&&c.$results.scrollTop(w)}}),l.on("results:focus",function(h){h.element[0].classList.add("select2-results__option--highlighted"),h.element[0].setAttribute("aria-selected","true")}),l.on("results:message",function(h){c.displayMessage(h)}),r.fn.mousewheel&&this.$results.on("mousewheel",function(h){var f=c.$results.scrollTop(),m=c.$results.get(0).scrollHeight-f+h.deltaY,b=h.deltaY>0&&f-h.deltaY<=0,v=h.deltaY<0&&m<=c.$results.height();b?(c.$results.scrollTop(0),h.preventDefault(),h.stopPropagation()):v&&(c.$results.scrollTop(c.$results.get(0).scrollHeight-c.$results.height()),h.preventDefault(),h.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(h){var f=r(this),m=o.GetData(this,"data");if(f.hasClass("select2-results__option--selected")){c.options.get("multiple")?c.trigger("unselect",{originalEvent:h,data:m}):c.trigger("close",{});return}c.trigger("select",{originalEvent:h,data:m})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(h){var f=o.GetData(this,"data");c.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),c.trigger("results:focus",{data:f,element:r(this)})})},a.prototype.getHighlightedResults=function(){var l=this.$results.find(".select2-results__option--highlighted");return l},a.prototype.destroy=function(){this.$results.remove()},a.prototype.ensureHighlightVisible=function(){var l=this.getHighlightedResults();if(l.length!==0){var u=this.$results.find(".select2-results__option--selectable"),c=u.index(l),d=this.$results.offset().top,h=l.offset().top,f=this.$results.scrollTop()+(h-d),m=h-d;f-=l.outerHeight(!1)*2,c<=2?this.$results.scrollTop(0):(m>this.$results.outerHeight()||m<0)&&this.$results.scrollTop(f)}},a.prototype.template=function(l,u){var c=this.options.get("templateResult"),d=this.options.get("escapeMarkup"),h=c(l,u);h==null?u.style.display="none":typeof h=="string"?u.innerHTML=d(h):r(u).append(h)},a}),s.define("select2/keys",[],function(){var r={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return r}),s.define("select2/selection/base",["jquery","../utils","../keys"],function(r,o,a){function l(u,c){this.$element=u,this.options=c,l.__super__.constructor.call(this)}return o.Extend(l,o.Observable),l.prototype.render=function(){var u=r('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,o.GetData(this.$element[0],"old-tabindex")!=null?this._tabindex=o.GetData(this.$element[0],"old-tabindex"):this.$element.attr("tabindex")!=null&&(this._tabindex=this.$element.attr("tabindex")),u.attr("title",this.$element.attr("title")),u.attr("tabindex",this._tabindex),u.attr("aria-disabled","false"),this.$selection=u,u},l.prototype.bind=function(u,c){var d=this,h=u.id+"-results";this.container=u,this.$selection.on("focus",function(f){d.trigger("focus",f)}),this.$selection.on("blur",function(f){d._handleBlur(f)}),this.$selection.on("keydown",function(f){d.trigger("keypress",f),f.which===a.SPACE&&f.preventDefault()}),u.on("results:focus",function(f){d.$selection.attr("aria-activedescendant",f.data._resultId)}),u.on("selection:update",function(f){d.update(f.data)}),u.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",h),d._attachCloseHandler(u)}),u.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.trigger("focus"),d._detachCloseHandler(u)}),u.on("enable",function(){d.$selection.attr("tabindex",d._tabindex),d.$selection.attr("aria-disabled","false")}),u.on("disable",function(){d.$selection.attr("tabindex","-1"),d.$selection.attr("aria-disabled","true")})},l.prototype._handleBlur=function(u){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||r.contains(c.$selection[0],document.activeElement)||c.trigger("blur",u)},1)},l.prototype._attachCloseHandler=function(u){r(document.body).on("mousedown.select2."+u.id,function(c){var d=r(c.target),h=d.closest(".select2"),f=r(".select2.select2-container--open");f.each(function(){if(this!=h[0]){var m=o.GetData(this,"element");m.select2("close")}})})},l.prototype._detachCloseHandler=function(u){r(document.body).off("mousedown.select2."+u.id)},l.prototype.position=function(u,c){var d=c.find(".selection");d.append(u)},l.prototype.destroy=function(){this._detachCloseHandler(this.container)},l.prototype.update=function(u){throw new Error("The `update` method must be defined in child classes.")},l.prototype.isEnabled=function(){return!this.isDisabled()},l.prototype.isDisabled=function(){return this.options.get("disabled")},l}),s.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(r,o,a,l){function u(){u.__super__.constructor.apply(this,arguments)}return a.Extend(u,o),u.prototype.render=function(){var c=u.__super__.render.call(this);return c[0].classList.add("select2-selection--single"),c.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),c},u.prototype.bind=function(c,d){var h=this;u.__super__.bind.apply(this,arguments);var f=c.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",f).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",f),this.$selection.attr("aria-controls",f),this.$selection.on("mousedown",function(m){m.which===1&&h.trigger("toggle",{originalEvent:m})}),this.$selection.on("focus",function(m){}),this.$selection.on("blur",function(m){}),c.on("focus",function(m){c.isOpen()||h.$selection.trigger("focus")})},u.prototype.clear=function(){var c=this.$selection.find(".select2-selection__rendered");c.empty(),c.removeAttr("title")},u.prototype.display=function(c,d){var h=this.options.get("templateSelection"),f=this.options.get("escapeMarkup");return f(h(c,d))},u.prototype.selectionContainer=function(){return r("<span></span>")},u.prototype.update=function(c){if(c.length===0){this.clear();return}var d=c[0],h=this.$selection.find(".select2-selection__rendered"),f=this.display(d,h);h.empty().append(f);var m=d.title||d.text;m?h.attr("title",m):h.removeAttr("title")},u}),s.define("select2/selection/multiple",["jquery","./base","../utils"],function(r,o,a){function l(u,c){l.__super__.constructor.apply(this,arguments)}return a.Extend(l,o),l.prototype.render=function(){var u=l.__super__.render.call(this);return u[0].classList.add("select2-selection--multiple"),u.html('<ul class="select2-selection__rendered"></ul>'),u},l.prototype.bind=function(u,c){var d=this;l.__super__.bind.apply(this,arguments);var h=u.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",h),this.$selection.on("click",function(f){d.trigger("toggle",{originalEvent:f})}),this.$selection.on("click",".select2-selection__choice__remove",function(f){if(!d.isDisabled()){var m=r(this),b=m.parent(),v=a.GetData(b[0],"data");d.trigger("unselect",{originalEvent:f,data:v})}}),this.$selection.on("keydown",".select2-selection__choice__remove",function(f){d.isDisabled()||f.stopPropagation()})},l.prototype.clear=function(){var u=this.$selection.find(".select2-selection__rendered");u.empty(),u.removeAttr("title")},l.prototype.display=function(u,c){var d=this.options.get("templateSelection"),h=this.options.get("escapeMarkup");return h(d(u,c))},l.prototype.selectionContainer=function(){var u=r('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>');return u},l.prototype.update=function(u){if(this.clear(),u.length!==0){for(var c=[],d=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",h=0;h<u.length;h++){var f=u[h],m=this.selectionContainer(),b=this.display(f,m),v=d+a.generateChars(4)+"-";f.id?v+=f.id:v+=a.generateChars(4),m.find(".select2-selection__choice__display").append(b).attr("id",v);var g=f.title||f.text;g&&m.attr("title",g);var E=this.options.get("translations").get("removeItem"),w=m.find(".select2-selection__choice__remove");w.attr("title",E()),w.attr("aria-label",E()),w.attr("aria-describedby",v),a.StoreData(m[0],"data",f),c.push(m)}var S=this.$selection.find(".select2-selection__rendered");S.append(c)}},l}),s.define("select2/selection/placeholder",[],function(){function r(o,a,l){this.placeholder=this.normalizePlaceholder(l.get("placeholder")),o.call(this,a,l)}return r.prototype.normalizePlaceholder=function(o,a){return typeof a=="string"&&(a={id:"",text:a}),a},r.prototype.createPlaceholder=function(o,a){var l=this.selectionContainer();l.html(this.display(a)),l[0].classList.add("select2-selection__placeholder"),l[0].classList.remove("select2-selection__choice");var u=a.title||a.text||l.text();return this.$selection.find(".select2-selection__rendered").attr("title",u),l},r.prototype.update=function(o,a){var l=a.length==1&&a[0].id!=this.placeholder.id,u=a.length>1;if(u||l)return o.call(this,a);this.clear();var c=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(c)},r}),s.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(r,o,a){function l(){}return l.prototype.bind=function(u,c,d){var h=this;u.call(this,c,d),this.placeholder==null&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(f){h._handleClear(f)}),c.on("keypress",function(f){h._handleKeyboardClear(f,c)})},l.prototype._handleClear=function(u,c){if(!this.isDisabled()){var d=this.$selection.find(".select2-selection__clear");if(d.length!==0){c.stopPropagation();var h=a.GetData(d[0],"data"),f=this.$element.val();this.$element.val(this.placeholder.id);var m={data:h};if(this.trigger("clear",m),m.prevented){this.$element.val(f);return}for(var b=0;b<h.length;b++)if(m={data:h[b]},this.trigger("unselect",m),m.prevented){this.$element.val(f);return}this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}},l.prototype._handleKeyboardClear=function(u,c,d){d.isOpen()||(c.which==o.DELETE||c.which==o.BACKSPACE)&&this._handleClear(c)},l.prototype.update=function(u,c){if(u.call(this,c),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||c.length===0)){var d=this.$selection.find(".select2-selection__rendered").attr("id"),h=this.options.get("translations").get("removeAllItems"),f=r('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');f.attr("title",h()),f.attr("aria-label",h()),f.attr("aria-describedby",d),a.StoreData(f[0],"data",c),this.$selection.prepend(f),this.$selection[0].classList.add("select2-selection--clearable")}},l}),s.define("select2/selection/search",["jquery","../utils","../keys"],function(r,o,a){function l(u,c,d){u.call(this,c,d)}return l.prototype.render=function(u){var c=this.options.get("translations").get("search"),d=r('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=d,this.$search=d.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",c());var h=u.call(this);return this._transferTabIndex(),h.append(this.$searchContainer),h},l.prototype.bind=function(u,c,d){var h=this,f=c.id+"-results",m=c.id+"-container";u.call(this,c,d),h.$search.attr("aria-describedby",m),c.on("open",function(){h.$search.attr("aria-controls",f),h.$search.trigger("focus")}),c.on("close",function(){h.$search.val(""),h.resizeSearch(),h.$search.removeAttr("aria-controls"),h.$search.removeAttr("aria-activedescendant"),h.$search.trigger("focus")}),c.on("enable",function(){h.$search.prop("disabled",!1),h._transferTabIndex()}),c.on("disable",function(){h.$search.prop("disabled",!0)}),c.on("focus",function(g){h.$search.trigger("focus")}),c.on("results:focus",function(g){g.data._resultId?h.$search.attr("aria-activedescendant",g.data._resultId):h.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(g){h.trigger("focus",g)}),this.$selection.on("focusout",".select2-search--inline",function(g){h._handleBlur(g)}),this.$selection.on("keydown",".select2-search--inline",function(g){g.stopPropagation(),h.trigger("keypress",g),h._keyUpPrevented=g.isDefaultPrevented();var E=g.which;if(E===a.BACKSPACE&&h.$search.val()===""){var w=h.$selection.find(".select2-selection__choice").last();if(w.length>0){var S=o.GetData(w[0],"data");h.searchRemoveChoice(S),g.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(g){h.$search.val()&&g.stopPropagation()});var b=document.documentMode,v=b&&b<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(g){if(v){h.$selection.off("input.search input.searchcheck");return}h.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(g){if(v&&g.type==="input"){h.$selection.off("input.search input.searchcheck");return}var E=g.which;E==a.SHIFT||E==a.CTRL||E==a.ALT||E!=a.TAB&&h.handleSearch(g)})},l.prototype._transferTabIndex=function(u){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},l.prototype.createPlaceholder=function(u,c){this.$search.attr("placeholder",c.text)},l.prototype.update=function(u,c){var d=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),u.call(this,c),this.resizeSearch(),d&&this.$search.trigger("focus")},l.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var u=this.$search.val();this.trigger("query",{term:u})}this._keyUpPrevented=!1},l.prototype.searchRemoveChoice=function(u,c){this.trigger("unselect",{data:c}),this.$search.val(c.text),this.handleSearch()},l.prototype.resizeSearch=function(){this.$search.css("width","25px");var u="100%";if(this.$search.attr("placeholder")===""){var c=this.$search.val().length+1;u=c*.75+"em"}this.$search.css("width",u)},l}),s.define("select2/selection/selectionCss",["../utils"],function(r){function o(){}return o.prototype.render=function(a){var l=a.call(this),u=this.options.get("selectionCssClass")||"";return u.indexOf(":all:")!==-1&&(u=u.replace(":all:",""),r.copyNonInternalCssClasses(l[0],this.$element[0])),l.addClass(u),l},o}),s.define("select2/selection/eventRelay",["jquery"],function(r){function o(){}return o.prototype.bind=function(a,l,u){var c=this,d=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],h=["opening","closing","selecting","unselecting","clearing"];a.call(this,l,u),l.on("*",function(f,m){if(d.indexOf(f)!==-1){m=m||{};var b=r.Event("select2:"+f,{params:m});c.$element.trigger(b),h.indexOf(f)!==-1&&(m.prevented=b.isDefaultPrevented())}})},o}),s.define("select2/translation",["jquery","require"],function(r,o){function a(l){this.dict=l||{}}return a.prototype.all=function(){return this.dict},a.prototype.get=function(l){return this.dict[l]},a.prototype.extend=function(l){this.dict=r.extend({},l.all(),this.dict)},a._cache={},a.loadPath=function(l){if(!(l in a._cache)){var u=o(l);a._cache[l]=u}return new a(a._cache[l])},a}),s.define("select2/diacritics",[],function(){var r={"â¶":"A",ï¼¡:"A",Ã:"A",Ã:"A",Ã:"A",áº¦:"A",áº¤:"A",áºª:"A",áº¨:"A",Ã:"A",Ä:"A",Ä:"A",áº°:"A",áº®:"A",áº´:"A",áº²:"A",È¦:"A",Ç :"A",Ã:"A",Ç:"A",áº¢:"A",Ã:"A",Çº:"A",Ç:"A",È:"A",È:"A",áº :"A",áº¬:"A",áº¶:"A",á¸:"A",Ä:"A","Èº":"A","â±¯":"A","ê²":"AA",Ã:"AE",Ç¼:"AE",Ç¢:"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B",ï¼¢:"B",á¸:"B",á¸:"B",á¸:"B","É":"B",Æ:"B",Æ:"B","â¸":"C",ï¼£:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ã:"C",á¸:"C",Æ:"C","È»":"C","ê¾":"C","â¹":"D",ï¼¤:"D",á¸:"D",Ä:"D",á¸:"D",á¸:"D",á¸:"D",á¸:"D",Ä:"D",Æ:"D",Æ:"D",Æ:"D","ê¹":"D",Ç±:"DZ",Ç:"DZ",Ç²:"Dz",Ç:"Dz","âº":"E",ï¼¥:"E",Ã:"E",Ã:"E",Ã:"E",á»:"E",áº¾:"E",á»:"E",á»:"E",áº¼:"E",Ä:"E",á¸:"E",á¸:"E",Ä:"E",Ä:"E",Ã:"E",áºº:"E",Ä:"E",È:"E",È:"E",áº¸:"E",á»:"E",È¨:"E",á¸:"E",Ä:"E",á¸:"E",á¸:"E",Æ:"E",Æ:"E","â»":"F",ï¼¦:"F",á¸:"F",Æ:"F","ê»":"F","â¼":"G",ï¼§:"G",Ç´:"G",Ä:"G",á¸ :"G",Ä:"G",Ä :"G",Ç¦:"G",Ä¢:"G",Ç¤:"G",Æ:"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H",ï¼¨:"H",Ä¤:"H",á¸¢:"H",á¸¦:"H",È:"H",á¸¤:"H",á¸¨:"H",á¸ª:"H",Ä¦:"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I",ï¼©:"I",Ã:"I",Ã:"I",Ã:"I",Ä¨:"I",Äª:"I",Ä¬:"I",Ä°:"I",Ã:"I",á¸®:"I",á»:"I",Ç:"I",È:"I",È:"I",á»:"I",Ä®:"I",á¸¬:"I",Æ:"I","â¿":"J",ï¼ª:"J",Ä´:"J","É":"J","â":"K",ï¼«:"K",á¸°:"K",Ç¨:"K",á¸²:"K",Ä¶:"K",á¸´:"K",Æ:"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L",ï¼¬:"L",Ä¿:"L",Ä¹:"L",Ä½:"L",á¸¶:"L",á¸¸:"L",Ä»:"L",á¸¼:"L",á¸º:"L",Å:"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L",Ç:"LJ",Ç:"Lj","â":"M",ï¼­:"M",á¸¾:"M",á¹:"M",á¹:"M","â±®":"M",Æ:"M","â":"N",ï¼®:"N",Ç¸:"N",Å:"N",Ã:"N",á¹:"N",Å:"N",á¹:"N",Å:"N",á¹:"N",á¹:"N","È ":"N",Æ:"N","ê":"N","ê¤":"N",Ç:"NJ",Ç:"Nj","â":"O",ï¼¯:"O",Ã:"O",Ã:"O",Ã:"O",á»:"O",á»:"O",á»:"O",á»:"O",Ã:"O",á¹:"O",È¬:"O",á¹:"O",Å:"O",á¹:"O",á¹:"O",Å:"O",È®:"O",È°:"O",Ã:"O",Èª:"O",á»:"O",Å:"O",Ç:"O",È:"O",È:"O",Æ :"O",á»:"O",á»:"O",á» :"O",á»:"O",á»¢:"O",á»:"O",á»:"O",Çª:"O",Ç¬:"O",Ã:"O",Ç¾:"O",Æ:"O",Æ:"O","ê":"O","ê":"O",Å:"OE",Æ¢:"OI","ê":"OO",È¢:"OU","â":"P",ï¼°:"P",á¹:"P",á¹:"P",Æ¤:"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q",ï¼±:"Q","ê":"Q","ê":"Q","É":"Q","â":"R",ï¼²:"R",Å:"R",á¹:"R",Å:"R",È:"R",È:"R",á¹:"R",á¹:"R",Å:"R",á¹:"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S",ï¼³:"S","áº":"S",Å:"S",á¹¤:"S",Å:"S",á¹ :"S",Å :"S",á¹¦:"S",á¹¢:"S",á¹¨:"S",È:"S",Å:"S","â±¾":"S","ê¨":"S","ê":"S","â":"T",ï¼´:"T",á¹ª:"T",Å¤:"T",á¹¬:"T",È:"T",Å¢:"T",á¹°:"T",á¹®:"T",Å¦:"T",Æ¬:"T",Æ®:"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U",ï¼µ:"U",Ã:"U",Ã:"U",Ã:"U",Å¨:"U",á¹¸:"U",Åª:"U",á¹º:"U",Å¬:"U",Ã:"U",Ç:"U",Ç:"U",Ç:"U",Ç:"U",á»¦:"U",Å®:"U",Å°:"U",Ç:"U",È:"U",È:"U",Æ¯:"U",á»ª:"U",á»¨:"U",á»®:"U",á»¬:"U",á»°:"U",á»¤:"U",á¹²:"U",Å²:"U",á¹¶:"U",á¹´:"U","É":"U","â":"V",ï¼¶:"V",á¹¼:"V",á¹¾:"V",Æ²:"V","ê":"V","É":"V","ê ":"VY","â":"W",ï¼·:"W",áº:"W",áº:"W",Å´:"W",áº:"W",áº:"W",áº:"W","â±²":"W","â":"X",ï¼¸:"X",áº:"X",áº:"X","â":"Y",ï¼¹:"Y",á»²:"Y",Ã:"Y",Å¶:"Y",á»¸:"Y",È²:"Y",áº:"Y",Å¸:"Y",á»¶:"Y",á»´:"Y",Æ³:"Y","É":"Y","á»¾":"Y","â":"Z",ï¼º:"Z",Å¹:"Z",áº:"Z",Å»:"Z",Å½:"Z",áº:"Z",áº:"Z",Æµ:"Z",È¤:"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a",ï½:"a",áº:"a",Ã :"a",Ã¡:"a",Ã¢:"a",áº§:"a",áº¥:"a",áº«:"a",áº©:"a",Ã£:"a",Ä:"a",Ä:"a",áº±:"a",áº¯:"a",áºµ:"a",áº³:"a",È§:"a",Ç¡:"a",Ã¤:"a",Ç:"a",áº£:"a",Ã¥:"a",Ç»:"a",Ç:"a",È:"a",È:"a",áº¡:"a",áº­:"a",áº·:"a",á¸:"a",Ä:"a","â±¥":"a",É:"a","ê³":"aa",Ã¦:"ae",Ç½:"ae",Ç£:"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b",ï½:"b",á¸:"b",á¸:"b",á¸:"b",Æ:"b",Æ:"b",É:"b","â":"c",ï½:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ã§:"c",á¸:"c",Æ:"c","È¼":"c","ê¿":"c","â":"c","â":"d",ï½:"d",á¸:"d",Ä:"d",á¸:"d",á¸:"d",á¸:"d",á¸:"d",Ä:"d",Æ:"d",É:"d",É:"d","êº":"d",Ç³:"dz",Ç:"dz","â":"e",ï½:"e",Ã¨:"e",Ã©:"e",Ãª:"e",á»:"e",áº¿:"e",á»:"e",á»:"e",áº½:"e",Ä:"e",á¸:"e",á¸:"e",Ä:"e",Ä:"e",Ã«:"e",áº»:"e",Ä:"e",È:"e",È:"e",áº¹:"e",á»:"e",È©:"e",á¸:"e",Ä:"e",á¸:"e",á¸:"e","É":"e",É:"e",Ç:"e","â":"f",ï½:"f",á¸:"f",Æ:"f","ê¼":"f","â":"g",ï½:"g",Çµ:"g",Ä:"g",á¸¡:"g",Ä:"g",Ä¡:"g",Ç§:"g",Ä£:"g",Ç¥:"g",É :"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h",ï½:"h",Ä¥:"h",á¸£:"h",á¸§:"h",È:"h",á¸¥:"h",á¸©:"h",á¸«:"h",áº:"h",Ä§:"h","â±¨":"h","â±¶":"h",É¥:"h",Æ:"hv","â":"i",ï½:"i",Ã¬:"i",Ã­:"i",Ã®:"i",Ä©:"i",Ä«:"i",Ä­:"i",Ã¯:"i",á¸¯:"i",á»:"i",Ç:"i",È:"i",È:"i",á»:"i",Ä¯:"i",á¸­:"i",É¨:"i",Ä±:"i","â":"j",ï½:"j",Äµ:"j",Ç°:"j","É":"j","â":"k",ï½:"k",á¸±:"k",Ç©:"k",á¸³:"k",Ä·:"k",á¸µ:"k",Æ:"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l",ï½:"l",Å:"l",Äº:"l",Ä¾:"l",á¸·:"l",á¸¹:"l",Ä¼:"l",á¸½:"l",á¸»:"l",Å¿:"l",Å:"l",Æ:"l",É«:"l","â±¡":"l","ê":"l","ê":"l","ê":"l",Ç:"lj","â":"m",ï½:"m",á¸¿:"m",á¹:"m",á¹:"m",É±:"m",É¯:"m","â":"n",ï½:"n",Ç¹:"n",Å:"n",Ã±:"n",á¹:"n",Å:"n",á¹:"n",Å:"n",á¹:"n",á¹:"n",Æ:"n",É²:"n",Å:"n","ê":"n","ê¥":"n",Ç:"nj","â":"o",ï½:"o",Ã²:"o",Ã³:"o",Ã´:"o",á»:"o",á»:"o",á»:"o",á»:"o",Ãµ:"o",á¹:"o",È­:"o",á¹:"o",Å:"o",á¹:"o",á¹:"o",Å:"o",È¯:"o",È±:"o",Ã¶:"o",È«:"o",á»:"o",Å:"o",Ç:"o",È:"o",È:"o",Æ¡:"o",á»:"o",á»:"o",á»¡:"o",á»:"o",á»£:"o",á»:"o",á»:"o",Ç«:"o",Ç­:"o",Ã¸:"o",Ç¿:"o",É:"o","ê":"o","ê":"o",Éµ:"o",Å:"oe",Æ£:"oi",È£:"ou","ê":"oo","â":"p",ï½:"p",á¹:"p",á¹:"p",Æ¥:"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q",ï½:"q","É":"q","ê":"q","ê":"q","â¡":"r",ï½:"r",Å:"r",á¹:"r",Å:"r",È:"r",È:"r",á¹:"r",á¹:"r",Å:"r",á¹:"r","É":"r",É½:"r","ê":"r","ê§":"r","ê":"r","â¢":"s",ï½:"s",Ã:"s",Å:"s",á¹¥:"s",Å:"s",á¹¡:"s",Å¡:"s",á¹§:"s",á¹£:"s",á¹©:"s",È:"s",Å:"s","È¿":"s","ê©":"s","ê":"s",áº:"s","â£":"t",ï½:"t",á¹«:"t",áº:"t",Å¥:"t",á¹­:"t",È:"t",Å£:"t",á¹±:"t",á¹¯:"t",Å§:"t",Æ­:"t",Ê:"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u",ï½:"u",Ã¹:"u",Ãº:"u",Ã»:"u",Å©:"u",á¹¹:"u",Å«:"u",á¹»:"u",Å­:"u",Ã¼:"u",Ç:"u",Ç:"u",Ç:"u",Ç:"u",á»§:"u",Å¯:"u",Å±:"u",Ç:"u",È:"u",È:"u",Æ°:"u",á»«:"u",á»©:"u",á»¯:"u",á»­:"u",á»±:"u",á»¥:"u",á¹³:"u",Å³:"u",á¹·:"u",á¹µ:"u",Ê:"u","â¥":"v",ï½:"v",á¹½:"v",á¹¿:"v",Ê:"v","ê":"v",Ê:"v","ê¡":"vy","â¦":"w",ï½:"w",áº:"w",áº:"w",Åµ:"w",áº:"w",áº:"w",áº:"w",áº:"w","â±³":"w","â§":"x",ï½:"x",áº:"x",áº:"x","â¨":"y",ï½:"y",á»³:"y",Ã½:"y",Å·:"y",á»¹:"y",È³:"y",áº:"y",Ã¿:"y",á»·:"y",áº:"y",á»µ:"y",Æ´:"y","É":"y","á»¿":"y","â©":"z",ï½:"z",Åº:"z",áº:"z",Å¼:"z",Å¾:"z",áº:"z",áº:"z",Æ¶:"z",È¥:"z","É":"z","â±¬":"z","ê£":"z",Î:"Î",Î:"Î",Î:"Î",Î:"Î",Îª:"Î",Î:"Î",Î:"Î¥",Î«:"Î¥",Î:"Î©",Î¬:"Î±",Î­:"Îµ",Î®:"Î·",Î¯:"Î¹",Ï:"Î¹",Î:"Î¹",Ï:"Î¿",Ï:"Ï",Ï:"Ï",Î°:"Ï",Ï:"Ï",Ï:"Ï","â":"'"};return r}),s.define("select2/data/base",["../utils"],function(r){function o(a,l){o.__super__.constructor.call(this)}return r.Extend(o,r.Observable),o.prototype.current=function(a){throw new Error("The `current` method must be defined in child classes.")},o.prototype.query=function(a,l){throw new Error("The `query` method must be defined in child classes.")},o.prototype.bind=function(a,l){},o.prototype.destroy=function(){},o.prototype.generateResultId=function(a,l){var u=a.id+"-result-";return u+=r.generateChars(4),l.id!=null?u+="-"+l.id.toString():u+="-"+r.generateChars(4),u},o}),s.define("select2/data/select",["./base","../utils","jquery"],function(r,o,a){function l(u,c){this.$element=u,this.options=c,l.__super__.constructor.call(this)}return o.Extend(l,r),l.prototype.current=function(u){var c=this,d=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(h){return c.item(a(h))});u(d)},l.prototype.select=function(u){var c=this;if(u.selected=!0,u.element!=null&&u.element.tagName.toLowerCase()==="option"){u.element.selected=!0,this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple"))this.current(function(h){var f=[];u=[u],u.push.apply(u,h);for(var m=0;m<u.length;m++){var b=u[m].id;f.indexOf(b)===-1&&f.push(b)}c.$element.val(f),c.$element.trigger("input").trigger("change")});else{var d=u.id;this.$element.val(d),this.$element.trigger("input").trigger("change")}},l.prototype.unselect=function(u){var c=this;if(this.$element.prop("multiple")){if(u.selected=!1,u.element!=null&&u.element.tagName.toLowerCase()==="option"){u.element.selected=!1,this.$element.trigger("input").trigger("change");return}this.current(function(d){for(var h=[],f=0;f<d.length;f++){var m=d[f].id;m!==u.id&&h.indexOf(m)===-1&&h.push(m)}c.$element.val(h),c.$element.trigger("input").trigger("change")})}},l.prototype.bind=function(u,c){var d=this;this.container=u,u.on("select",function(h){d.select(h.data)}),u.on("unselect",function(h){d.unselect(h.data)})},l.prototype.destroy=function(){this.$element.find("*").each(function(){o.RemoveData(this)})},l.prototype.query=function(u,c){var d=[],h=this,f=this.$element.children();f.each(function(){if(!(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup")){var m=a(this),b=h.item(m),v=h.matches(u,b);v!==null&&d.push(v)}}),c({results:d})},l.prototype.addOptions=function(u){this.$element.append(u)},l.prototype.option=function(u){var c;u.children?(c=document.createElement("optgroup"),c.label=u.text):(c=document.createElement("option"),c.textContent!==void 0?c.textContent=u.text:c.innerText=u.text),u.id!==void 0&&(c.value=u.id),u.disabled&&(c.disabled=!0),u.selected&&(c.selected=!0),u.title&&(c.title=u.title);var d=this._normalizeItem(u);return d.element=c,o.StoreData(c,"data",d),a(c)},l.prototype.item=function(u){var c={};if(c=o.GetData(u[0],"data"),c!=null)return c;var d=u[0];if(d.tagName.toLowerCase()==="option")c={id:u.val(),text:u.text(),disabled:u.prop("disabled"),selected:u.prop("selected"),title:u.prop("title")};else if(d.tagName.toLowerCase()==="optgroup"){c={text:u.prop("label"),children:[],title:u.prop("title")};for(var h=u.children("option"),f=[],m=0;m<h.length;m++){var b=a(h[m]),v=this.item(b);f.push(v)}c.children=f}return c=this._normalizeItem(c),c.element=u[0],o.StoreData(u[0],"data",c),c},l.prototype._normalizeItem=function(u){u!==Object(u)&&(u={id:u,text:u}),u=a.extend({},{text:""},u);var c={selected:!1,disabled:!1};return u.id!=null&&(u.id=u.id.toString()),u.text!=null&&(u.text=u.text.toString()),u._resultId==null&&u.id&&this.container!=null&&(u._resultId=this.generateResultId(this.container,u)),a.extend({},c,u)},l.prototype.matches=function(u,c){var d=this.options.get("matcher");return d(u,c)},l}),s.define("select2/data/array",["./select","../utils","jquery"],function(r,o,a){function l(u,c){this._dataToConvert=c.get("data")||[],l.__super__.constructor.call(this,u,c)}return o.Extend(l,r),l.prototype.bind=function(u,c){l.__super__.bind.call(this,u,c),this.addOptions(this.convertToOptions(this._dataToConvert))},l.prototype.select=function(u){var c=this.$element.find("option").filter(function(d,h){return h.value==u.id.toString()});c.length===0&&(c=this.option(u),this.addOptions(c)),l.__super__.select.call(this,u)},l.prototype.convertToOptions=function(u){var c=this,d=this.$element.find("option"),h=d.map(function(){return c.item(a(this)).id}).get(),f=[];function m(y){return function(){return a(this).val()==y.id}}for(var b=0;b<u.length;b++){var v=this._normalizeItem(u[b]);if(h.indexOf(v.id)>=0){var g=d.filter(m(v)),E=this.item(g),w=a.extend(!0,{},v,E),S=this.option(w);g.replaceWith(S);continue}var I=this.option(v);if(v.children){var D=this.convertToOptions(v.children);I.append(D)}f.push(I)}return f},l}),s.define("select2/data/ajax",["./array","../utils","jquery"],function(r,o,a){function l(u,c){this.ajaxOptions=this._applyDefaults(c.get("ajax")),this.ajaxOptions.processResults!=null&&(this.processResults=this.ajaxOptions.processResults),l.__super__.constructor.call(this,u,c)}return o.Extend(l,r),l.prototype._applyDefaults=function(u){var c={data:function(d){return a.extend({},d,{q:d.term})},transport:function(d,h,f){var m=a.ajax(d);return m.then(h),m.fail(f),m}};return a.extend({},c,u,!0)},l.prototype.processResults=function(u){return u},l.prototype.query=function(u,c){var d=this;this._request!=null&&(typeof this._request.abort=="function"&&this._request.abort(),this._request=null);var h=a.extend({type:"GET"},this.ajaxOptions);typeof h.url=="function"&&(h.url=h.url.call(this.$element,u)),typeof h.data=="function"&&(h.data=h.data.call(this.$element,u));function f(){var m=h.transport(h,function(b){var v=d.processResults(b,u);d.options.get("debug")&&window.console&&console.error&&(!v||!v.results||!Array.isArray(v.results))&&console.error("Select2: The AJAX results did not return an array in the `results` key of the response."),c(v)},function(){"status"in m&&(m.status===0||m.status==="0")||d.trigger("results:message",{message:"errorLoading"})});d._request=m}this.ajaxOptions.delay&&u.term!=null?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},l}),s.define("select2/data/tags",["jquery"],function(r){function o(a,l,u){var c=u.get("tags"),d=u.get("createTag");d!==void 0&&(this.createTag=d);var h=u.get("insertTag");if(h!==void 0&&(this.insertTag=h),a.call(this,l,u),Array.isArray(c))for(var f=0;f<c.length;f++){var m=c[f],b=this._normalizeItem(m),v=this.option(b);this.$element.append(v)}}return o.prototype.query=function(a,l,u){var c=this;if(this._removeOldTags(),l.term==null||l.page!=null){a.call(this,l,u);return}function d(h,f){for(var m=h.results,b=0;b<m.length;b++){var v=m[b],g=v.children!=null&&!d({results:v.children},!0),E=(v.text||"").toUpperCase(),w=(l.term||"").toUpperCase(),S=E===w;if(S||g){if(f)return!1;h.data=m,u(h);return}}if(f)return!0;var I=c.createTag(l);if(I!=null){var D=c.option(I);D.attr("data-select2-tag","true"),c.addOptions([D]),c.insertTag(m,I)}h.results=m,u(h)}a.call(this,l,d)},o.prototype.createTag=function(a,l){if(l.term==null)return null;var u=l.term.trim();return u===""?null:{id:u,text:u}},o.prototype.insertTag=function(a,l,u){l.unshift(u)},o.prototype._removeOldTags=function(a){var l=this.$element.find("option[data-select2-tag]");l.each(function(){this.selected||r(this).remove()})},o}),s.define("select2/data/tokenizer",["jquery"],function(r){function o(a,l,u){var c=u.get("tokenizer");c!==void 0&&(this.tokenizer=c),a.call(this,l,u)}return o.prototype.bind=function(a,l,u){a.call(this,l,u),this.$search=l.dropdown.$search||l.selection.$search||u.find(".select2-search__field")},o.prototype.query=function(a,l,u){var c=this;function d(m){var b=c._normalizeItem(m),v=c.$element.find("option").filter(function(){return r(this).val()===b.id});if(!v.length){var g=c.option(b);g.attr("data-select2-tag",!0),c._removeOldTags(),c.addOptions([g])}h(b)}function h(m){c.trigger("select",{data:m})}l.term=l.term||"";var f=this.tokenizer(l,this.options,d);f.term!==l.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.trigger("focus")),l.term=f.term),a.call(this,l,u)},o.prototype.tokenizer=function(a,l,u,c){for(var d=u.get("tokenSeparators")||[],h=l.term,f=0,m=this.createTag||function(w){return{id:w.term,text:w.term}};f<h.length;){var b=h[f];if(d.indexOf(b)===-1){f++;continue}var v=h.substr(0,f),g=r.extend({},l,{term:v}),E=m(g);if(E==null){f++;continue}c(E),h=h.substr(f+1)||"",f=0}return{term:h}},o}),s.define("select2/data/minimumInputLength",[],function(){function r(o,a,l){this.minimumInputLength=l.get("minimumInputLength"),o.call(this,a,l)}return r.prototype.query=function(o,a,l){if(a.term=a.term||"",a.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:a.term,params:a}});return}o.call(this,a,l)},r}),s.define("select2/data/maximumInputLength",[],function(){function r(o,a,l){this.maximumInputLength=l.get("maximumInputLength"),o.call(this,a,l)}return r.prototype.query=function(o,a,l){if(a.term=a.term||"",this.maximumInputLength>0&&a.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:a.term,params:a}});return}o.call(this,a,l)},r}),s.define("select2/data/maximumSelectionLength",[],function(){function r(o,a,l){this.maximumSelectionLength=l.get("maximumSelectionLength"),o.call(this,a,l)}return r.prototype.bind=function(o,a,l){var u=this;o.call(this,a,l),a.on("select",function(){u._checkIfMaximumSelected()})},r.prototype.query=function(o,a,l){var u=this;this._checkIfMaximumSelected(function(){o.call(u,a,l)})},r.prototype._checkIfMaximumSelected=function(o,a){var l=this;this.current(function(u){var c=u!=null?u.length:0;if(l.maximumSelectionLength>0&&c>=l.maximumSelectionLength){l.trigger("results:message",{message:"maximumSelected",args:{maximum:l.maximumSelectionLength}});return}a&&a()})},r}),s.define("select2/dropdown",["jquery","./utils"],function(r,o){function a(l,u){this.$element=l,this.options=u,a.__super__.constructor.call(this)}return o.Extend(a,o.Observable),a.prototype.render=function(){var l=r('<span class="select2-dropdown"><span class="select2-results"></span></span>');return l.attr("dir",this.options.get("dir")),this.$dropdown=l,l},a.prototype.bind=function(){},a.prototype.position=function(l,u){},a.prototype.destroy=function(){this.$dropdown.remove()},a}),s.define("select2/dropdown/search",["jquery"],function(r){function o(){}return o.prototype.render=function(a){var l=a.call(this),u=this.options.get("translations").get("search"),c=r('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=c,this.$search=c.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",u()),l.prepend(c),l},o.prototype.bind=function(a,l,u){var c=this,d=l.id+"-results";a.call(this,l,u),this.$search.on("keydown",function(h){c.trigger("keypress",h),c._keyUpPrevented=h.isDefaultPrevented()}),this.$search.on("input",function(h){r(this).off("keyup")}),this.$search.on("keyup input",function(h){c.handleSearch(h)}),l.on("open",function(){c.$search.attr("tabindex",0),c.$search.attr("aria-controls",d),c.$search.trigger("focus"),window.setTimeout(function(){c.$search.trigger("focus")},0)}),l.on("close",function(){c.$search.attr("tabindex",-1),c.$search.removeAttr("aria-controls"),c.$search.removeAttr("aria-activedescendant"),c.$search.val(""),c.$search.trigger("blur")}),l.on("focus",function(){l.isOpen()||c.$search.trigger("focus")}),l.on("results:all",function(h){if(h.query.term==null||h.query.term===""){var f=c.showSearch(h);f?c.$searchContainer[0].classList.remove("select2-search--hide"):c.$searchContainer[0].classList.add("select2-search--hide")}}),l.on("results:focus",function(h){h.data._resultId?c.$search.attr("aria-activedescendant",h.data._resultId):c.$search.removeAttr("aria-activedescendant")})},o.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var l=this.$search.val();this.trigger("query",{term:l})}this._keyUpPrevented=!1},o.prototype.showSearch=function(a,l){return!0},o}),s.define("select2/dropdown/hidePlaceholder",[],function(){function r(o,a,l,u){this.placeholder=this.normalizePlaceholder(l.get("placeholder")),o.call(this,a,l,u)}return r.prototype.append=function(o,a){a.results=this.removePlaceholder(a.results),o.call(this,a)},r.prototype.normalizePlaceholder=function(o,a){return typeof a=="string"&&(a={id:"",text:a}),a},r.prototype.removePlaceholder=function(o,a){for(var l=a.slice(0),u=a.length-1;u>=0;u--){var c=a[u];this.placeholder.id===c.id&&l.splice(u,1)}return l},r}),s.define("select2/dropdown/infiniteScroll",["jquery"],function(r){function o(a,l,u,c){this.lastParams={},a.call(this,l,u,c),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return o.prototype.append=function(a,l){this.$loadingMore.remove(),this.loading=!1,a.call(this,l),this.showLoadingMore(l)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},o.prototype.bind=function(a,l,u){var c=this;a.call(this,l,u),l.on("query",function(d){c.lastParams=d,c.loading=!0}),l.on("query:append",function(d){c.lastParams=d,c.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},o.prototype.loadMoreIfNeeded=function(){var a=r.contains(document.documentElement,this.$loadingMore[0]);if(!(this.loading||!a)){var l=this.$results.offset().top+this.$results.outerHeight(!1),u=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1);l+50>=u&&this.loadMore()}},o.prototype.loadMore=function(){this.loading=!0;var a=r.extend({},{page:1},this.lastParams);a.page++,this.trigger("query:append",a)},o.prototype.showLoadingMore=function(a,l){return l.pagination&&l.pagination.more},o.prototype.createLoadingMore=function(){var a=r('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),l=this.options.get("translations").get("loadingMore");return a.html(l(this.lastParams)),a},o}),s.define("select2/dropdown/attachBody",["jquery","../utils"],function(r,o){function a(l,u,c){this.$dropdownParent=r(c.get("dropdownParent")||document.body),l.call(this,u,c)}return a.prototype.bind=function(l,u,c){var d=this;l.call(this,u,c),u.on("open",function(){d._showDropdown(),d._attachPositioningHandler(u),d._bindContainerResultHandlers(u)}),u.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(u)}),this.$dropdownContainer.on("mousedown",function(h){h.stopPropagation()})},a.prototype.destroy=function(l){l.call(this),this.$dropdownContainer.remove()},a.prototype.position=function(l,u,c){u.attr("class",c.attr("class")),u[0].classList.remove("select2"),u[0].classList.add("select2-container--open"),u.css({position:"absolute",top:-999999}),this.$container=c},a.prototype.render=function(l){var u=r("<span></span>"),c=l.call(this);return u.append(c),this.$dropdownContainer=u,u},a.prototype._hideDropdown=function(l){this.$dropdownContainer.detach()},a.prototype._bindContainerResultHandlers=function(l,u){if(!this._containerResultsHandlersBound){var c=this;u.on("results:all",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("results:append",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("results:message",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("select",function(){c._positionDropdown(),c._resizeDropdown()}),u.on("unselect",function(){c._positionDropdown(),c._resizeDropdown()}),this._containerResultsHandlersBound=!0}},a.prototype._attachPositioningHandler=function(l,u){var c=this,d="scroll.select2."+u.id,h="resize.select2."+u.id,f="orientationchange.select2."+u.id,m=this.$container.parents().filter(o.hasScroll);m.each(function(){o.StoreData(this,"select2-scroll-position",{x:r(this).scrollLeft(),y:r(this).scrollTop()})}),m.on(d,function(b){var v=o.GetData(this,"select2-scroll-position");r(this).scrollTop(v.y)}),r(window).on(d+" "+h+" "+f,function(b){c._positionDropdown(),c._resizeDropdown()})},a.prototype._detachPositioningHandler=function(l,u){var c="scroll.select2."+u.id,d="resize.select2."+u.id,h="orientationchange.select2."+u.id,f=this.$container.parents().filter(o.hasScroll);f.off(c),r(window).off(c+" "+d+" "+h)},a.prototype._positionDropdown=function(){var l=r(window),u=this.$dropdown[0].classList.contains("select2-dropdown--above"),c=this.$dropdown[0].classList.contains("select2-dropdown--below"),d=null,h=this.$container.offset();h.bottom=h.top+this.$container.outerHeight(!1);var f={height:this.$container.outerHeight(!1)};f.top=h.top,f.bottom=h.top+f.height;var m={height:this.$dropdown.outerHeight(!1)},b={top:l.scrollTop(),bottom:l.scrollTop()+l.height()},v=b.top<h.top-m.height,g=b.bottom>h.bottom+m.height,E={left:h.left,top:f.bottom},w=this.$dropdownParent;w.css("position")==="static"&&(w=w.offsetParent());var S={top:0,left:0};(r.contains(document.body,w[0])||w[0].isConnected)&&(S=w.offset()),E.top-=S.top,E.left-=S.left,!u&&!c&&(d="below"),!g&&v&&!u?d="above":!v&&g&&u&&(d="below"),(d=="above"||u&&d!=="below")&&(E.top=f.top-S.top-m.height),d!=null&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+d),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+d)),this.$dropdownContainer.css(E)},a.prototype._resizeDropdown=function(){var l={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(l.minWidth=l.width,l.position="relative",l.width="auto"),this.$dropdown.css(l)},a.prototype._showDropdown=function(l){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},a}),s.define("select2/dropdown/minimumResultsForSearch",[],function(){function r(a){for(var l=0,u=0;u<a.length;u++){var c=a[u];c.children?l+=r(c.children):l++}return l}function o(a,l,u,c){this.minimumResultsForSearch=u.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,l,u,c)}return o.prototype.showSearch=function(a,l){return r(l.data.results)<this.minimumResultsForSearch?!1:a.call(this,l)},o}),s.define("select2/dropdown/selectOnClose",["../utils"],function(r){function o(){}return o.prototype.bind=function(a,l,u){var c=this;a.call(this,l,u),l.on("close",function(d){c._handleSelectOnClose(d)})},o.prototype._handleSelectOnClose=function(a,l){if(l&&l.originalSelect2Event!=null){var u=l.originalSelect2Event;if(u._type==="select"||u._type==="unselect")return}var c=this.getHighlightedResults();if(!(c.length<1)){var d=r.GetData(c[0],"data");d.element!=null&&d.element.selected||d.element==null&&d.selected||this.trigger("select",{data:d})}},o}),s.define("select2/dropdown/closeOnSelect",[],function(){function r(){}return r.prototype.bind=function(o,a,l){var u=this;o.call(this,a,l),a.on("select",function(c){u._selectTriggered(c)}),a.on("unselect",function(c){u._selectTriggered(c)})},r.prototype._selectTriggered=function(o,a){var l=a.originalEvent;l&&(l.ctrlKey||l.metaKey)||this.trigger("close",{originalEvent:l,originalSelect2Event:a})},r}),s.define("select2/dropdown/dropdownCss",["../utils"],function(r){function o(){}return o.prototype.render=function(a){var l=a.call(this),u=this.options.get("dropdownCssClass")||"";return u.indexOf(":all:")!==-1&&(u=u.replace(":all:",""),r.copyNonInternalCssClasses(l[0],this.$element[0])),l.addClass(u),l},o}),s.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(r){function o(){}return o.prototype.highlightFirstItem=function(a){var l=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(l.length>0){var u=l.first(),c=r.GetData(u[0],"data"),d=c.element;if(d&&d.getAttribute&&d.getAttribute("data-select2-tag")==="true"){u.trigger("mouseenter");return}}a.call(this)},o}),s.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(r){var o=r.input.length-r.maximum,a="Please delete "+o+" character";return o!=1&&(a+="s"),a},inputTooShort:function(r){var o=r.minimum-r.input.length,a="Please enter "+o+" or more characters";return a},loadingMore:function(){return"Loading more resultsâ¦"},maximumSelected:function(r){var o="You can only select "+r.maximum+" item";return r.maximum!=1&&(o+="s"),o},noResults:function(){return"No results found"},searching:function(){return"Searchingâ¦"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),s.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(r,o,a,l,u,c,d,h,f,m,b,v,g,E,w,S,I,D,y,B,V,C,A,H,P,F,Y,Q,G,z,ue){function Ee(){this.reset()}Ee.prototype.apply=function(W){if(W=r.extend(!0,{},this.defaults,W),W.dataAdapter==null&&(W.ajax!=null?W.dataAdapter=w:W.data!=null?W.dataAdapter=E:W.dataAdapter=g,W.minimumInputLength>0&&(W.dataAdapter=m.Decorate(W.dataAdapter,D)),W.maximumInputLength>0&&(W.dataAdapter=m.Decorate(W.dataAdapter,y)),W.maximumSelectionLength>0&&(W.dataAdapter=m.Decorate(W.dataAdapter,B)),W.tags&&(W.dataAdapter=m.Decorate(W.dataAdapter,S)),(W.tokenSeparators!=null||W.tokenizer!=null)&&(W.dataAdapter=m.Decorate(W.dataAdapter,I))),W.resultsAdapter==null&&(W.resultsAdapter=o,W.ajax!=null&&(W.resultsAdapter=m.Decorate(W.resultsAdapter,H)),W.placeholder!=null&&(W.resultsAdapter=m.Decorate(W.resultsAdapter,A)),W.selectOnClose&&(W.resultsAdapter=m.Decorate(W.resultsAdapter,Y)),W.tags&&(W.resultsAdapter=m.Decorate(W.resultsAdapter,z))),W.dropdownAdapter==null){if(W.multiple)W.dropdownAdapter=V;else{var oe=m.Decorate(V,C);W.dropdownAdapter=oe}W.minimumResultsForSearch!==0&&(W.dropdownAdapter=m.Decorate(W.dropdownAdapter,F)),W.closeOnSelect&&(W.dropdownAdapter=m.Decorate(W.dropdownAdapter,Q)),W.dropdownCssClass!=null&&(W.dropdownAdapter=m.Decorate(W.dropdownAdapter,G)),W.dropdownAdapter=m.Decorate(W.dropdownAdapter,P)}W.selectionAdapter==null&&(W.multiple?W.selectionAdapter=l:W.selectionAdapter=a,W.placeholder!=null&&(W.selectionAdapter=m.Decorate(W.selectionAdapter,u)),W.allowClear&&(W.selectionAdapter=m.Decorate(W.selectionAdapter,c)),W.multiple&&(W.selectionAdapter=m.Decorate(W.selectionAdapter,d)),W.selectionCssClass!=null&&(W.selectionAdapter=m.Decorate(W.selectionAdapter,h)),W.selectionAdapter=m.Decorate(W.selectionAdapter,f)),W.language=this._resolveLanguage(W.language),W.language.push("en");for(var ie=[],j=0;j<W.language.length;j++){var me=W.language[j];ie.indexOf(me)===-1&&ie.push(me)}return W.language=ie,W.translations=this._processTranslations(W.language,W.debug),W},Ee.prototype.reset=function(){function W(ie){function j(me){return v[me]||me}return ie.replace(/[^\u0000-\u007E]/g,j)}function oe(ie,j){if(ie.term==null||ie.term.trim()==="")return j;if(j.children&&j.children.length>0){for(var me=r.extend(!0,{},j),ge=j.children.length-1;ge>=0;ge--){var Ne=j.children[ge],Fe=oe(ie,Ne);Fe==null&&me.children.splice(ge,1)}return me.children.length>0?me:oe(ie,me)}var He=W(j.text).toUpperCase(),ct=W(ie.term).toUpperCase();return He.indexOf(ct)>-1?j:null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:m.escapeMarkup,language:{},matcher:oe,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(ie){return ie},templateResult:function(ie){return ie.text},templateSelection:function(ie){return ie.text},theme:"default",width:"resolve"}},Ee.prototype.applyFromElement=function(W,oe){var ie=W.language,j=this.defaults.language,me=oe.prop("lang"),ge=oe.closest("[lang]").prop("lang"),Ne=Array.prototype.concat.call(this._resolveLanguage(me),this._resolveLanguage(ie),this._resolveLanguage(j),this._resolveLanguage(ge));return W.language=Ne,W},Ee.prototype._resolveLanguage=function(W){if(!W)return[];if(r.isEmptyObject(W))return[];if(r.isPlainObject(W))return[W];var oe;Array.isArray(W)?oe=W:oe=[W];for(var ie=[],j=0;j<oe.length;j++)if(ie.push(oe[j]),typeof oe[j]=="string"&&oe[j].indexOf("-")>0){var me=oe[j].split("-"),ge=me[0];ie.push(ge)}return ie},Ee.prototype._processTranslations=function(W,oe){for(var ie=new b,j=0;j<W.length;j++){var me=new b,ge=W[j];if(typeof ge=="string")try{me=b.loadPath(ge)}catch{try{ge=this.defaults.amdLanguageBase+ge,me=b.loadPath(ge)}catch{oe&&window.console&&console.warn&&console.warn('Select2: The language file for "'+ge+'" could not be automatically loaded. A fallback will be used instead.')}}else r.isPlainObject(ge)?me=new b(ge):me=ge;ie.extend(me)}return ie},Ee.prototype.set=function(W,oe){var ie=r.camelCase(W),j={};j[ie]=oe;var me=m._convertData(j);r.extend(!0,this.defaults,me)};var J=new Ee;return J}),s.define("select2/options",["jquery","./defaults","./utils"],function(r,o,a){function l(u,c){this.options=u,c!=null&&this.fromElement(c),c!=null&&(this.options=o.applyFromElement(this.options,c)),this.options=o.apply(this.options)}return l.prototype.fromElement=function(u){var c=["select2"];this.options.multiple==null&&(this.options.multiple=u.prop("multiple")),this.options.disabled==null&&(this.options.disabled=u.prop("disabled")),this.options.autocomplete==null&&u.prop("autocomplete")&&(this.options.autocomplete=u.prop("autocomplete")),this.options.dir==null&&(u.prop("dir")?this.options.dir=u.prop("dir"):u.closest("[dir]").prop("dir")?this.options.dir=u.closest("[dir]").prop("dir"):this.options.dir="ltr"),u.prop("disabled",this.options.disabled),u.prop("multiple",this.options.multiple),a.GetData(u[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),a.StoreData(u[0],"data",a.GetData(u[0],"select2Tags")),a.StoreData(u[0],"tags",!0)),a.GetData(u[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),u.attr("ajax--url",a.GetData(u[0],"ajaxUrl")),a.StoreData(u[0],"ajax-Url",a.GetData(u[0],"ajaxUrl")));var d={};function h(I,D){return D.toUpperCase()}for(var f=0;f<u[0].attributes.length;f++){var m=u[0].attributes[f].name,b="data-";if(m.substr(0,b.length)==b){var v=m.substring(b.length),g=a.GetData(u[0],v),E=v.replace(/-([a-z])/g,h);d[E]=g}}r.fn.jquery&&r.fn.jquery.substr(0,2)=="1."&&u[0].dataset&&(d=r.extend(!0,{},u[0].dataset,d));var w=r.extend(!0,{},a.GetData(u[0]),d);w=a._convertData(w);for(var S in w)c.indexOf(S)>-1||(r.isPlainObject(this.options[S])?r.extend(this.options[S],w[S]):this.options[S]=w[S]);return this},l.prototype.get=function(u){return this.options[u]},l.prototype.set=function(u,c){this.options[u]=c},l}),s.define("select2/core",["jquery","./options","./utils","./keys"],function(r,o,a,l){var u=function(c,d){a.GetData(c[0],"select2")!=null&&a.GetData(c[0],"select2").destroy(),this.$element=c,this.id=this._generateId(c),d=d||{},this.options=new o(d,c),u.__super__.constructor.call(this);var h=c.attr("tabindex")||0;a.StoreData(c[0],"old-tabindex",h),c.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(c,this.options);var m=this.render();this._placeContainer(m);var b=this.options.get("selectionAdapter");this.selection=new b(c,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,m);var v=this.options.get("dropdownAdapter");this.dropdown=new v(c,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,m);var g=this.options.get("resultsAdapter");this.results=new g(c,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var E=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(w){E.trigger("selection:update",{data:w})}),c[0].classList.add("select2-hidden-accessible"),c.attr("aria-hidden","true"),this._syncAttributes(),a.StoreData(c[0],"select2",this),c.data("select2",this)};return a.Extend(u,a.Observable),u.prototype._generateId=function(c){var d="";return c.attr("id")!=null?d=c.attr("id"):c.attr("name")!=null?d=c.attr("name")+"-"+a.generateChars(2):d=a.generateChars(4),d=d.replace(/(:|\.|\[|\]|,)/g,""),d="select2-"+d,d},u.prototype._placeContainer=function(c){c.insertAfter(this.$element);var d=this._resolveWidth(this.$element,this.options.get("width"));d!=null&&c.css("width",d)},u.prototype._resolveWidth=function(c,d){var h=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(d=="resolve"){var f=this._resolveWidth(c,"style");return f??this._resolveWidth(c,"element")}if(d=="element"){var m=c.outerWidth(!1);return m<=0?"auto":m+"px"}if(d=="style"){var b=c.attr("style");if(typeof b!="string")return null;for(var v=b.split(";"),g=0,E=v.length;g<E;g=g+1){var w=v[g].replace(/\s/g,""),S=w.match(h);if(S!==null&&S.length>=1)return S[1]}return null}if(d=="computedstyle"){var I=window.getComputedStyle(c[0]);return I.width}return d},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var c=this;this.$element.on("change.select2",function(){c.dataAdapter.current(function(d){c.trigger("selection:update",{data:d})})}),this.$element.on("focus.select2",function(d){c.trigger("focus",d)}),this._syncA=a.bind(this._syncAttributes,this),this._syncS=a.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(d){c._syncA(),c._syncS(d)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},u.prototype._registerDataEvents=function(){var c=this;this.dataAdapter.on("*",function(d,h){c.trigger(d,h)})},u.prototype._registerSelectionEvents=function(){var c=this,d=["toggle","focus"];this.selection.on("toggle",function(){c.toggleDropdown()}),this.selection.on("focus",function(h){c.focus(h)}),this.selection.on("*",function(h,f){d.indexOf(h)===-1&&c.trigger(h,f)})},u.prototype._registerDropdownEvents=function(){var c=this;this.dropdown.on("*",function(d,h){c.trigger(d,h)})},u.prototype._registerResultsEvents=function(){var c=this;this.results.on("*",function(d,h){c.trigger(d,h)})},u.prototype._registerEvents=function(){var c=this;this.on("open",function(){c.$container[0].classList.add("select2-container--open")}),this.on("close",function(){c.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){c.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){c.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){c.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(d){c.isOpen()||c.trigger("open",{}),this.dataAdapter.query(d,function(h){c.trigger("results:all",{data:h,query:d})})}),this.on("query:append",function(d){this.dataAdapter.query(d,function(h){c.trigger("results:append",{data:h,query:d})})}),this.on("keypress",function(d){var h=d.which;c.isOpen()?h===l.ESC||h===l.UP&&d.altKey?(c.close(d),d.preventDefault()):h===l.ENTER||h===l.TAB?(c.trigger("results:select",{}),d.preventDefault()):h===l.SPACE&&d.ctrlKey?(c.trigger("results:toggle",{}),d.preventDefault()):h===l.UP?(c.trigger("results:previous",{}),d.preventDefault()):h===l.DOWN&&(c.trigger("results:next",{}),d.preventDefault()):(h===l.ENTER||h===l.SPACE||h===l.DOWN&&d.altKey)&&(c.open(),d.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._isChangeMutation=function(c){var d=this;if(c.addedNodes&&c.addedNodes.length>0)for(var h=0;h<c.addedNodes.length;h++){var f=c.addedNodes[h];if(f.selected)return!0}else{if(c.removedNodes&&c.removedNodes.length>0)return!0;if(Array.isArray(c))return c.some(function(m){return d._isChangeMutation(m)})}return!1},u.prototype._syncSubtree=function(c){var d=this._isChangeMutation(c),h=this;d&&this.dataAdapter.current(function(f){h.trigger("selection:update",{data:f})})},u.prototype.trigger=function(c,d){var h=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(d===void 0&&(d={}),c in f){var m=f[c],b={prevented:!1,name:c,args:d};if(h.call(this,m,b),b.prevented){d.prevented=!0;return}}h.call(this,c,d)},u.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},u.prototype.close=function(c){this.isOpen()&&this.trigger("close",{originalEvent:c})},u.prototype.isEnabled=function(){return!this.isDisabled()},u.prototype.isDisabled=function(){return this.options.get("disabled")},u.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},u.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},u.prototype.focus=function(c){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(c){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(c==null||c.length===0)&&(c=[!0]);var d=!c[0];this.$element.prop("disabled",d)},u.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var c=[];return this.dataAdapter.current(function(d){c=d}),c},u.prototype.val=function(c){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),c==null||c.length===0)return this.$element.val();var d=c[0];Array.isArray(d)&&(d=d.map(function(h){return h.toString()})),this.$element.val(d).trigger("input").trigger("change")},u.prototype.destroy=function(){a.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",a.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),a.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},u.prototype.render=function(){var c=r('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return c.attr("dir",this.options.get("dir")),this.$container=c,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),a.StoreData(c[0],"element",this.$element),c},u}),s.define("jquery-mousewheel",["jquery"],function(r){return r}),s.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(r,o,a,l,u){if(r.fn.select2==null){var c=["open","close","destroy"];r.fn.select2=function(d){if(d=d||{},typeof d=="object")return this.each(function(){var m=r.extend(!0,{},d);new a(r(this),m)}),this;if(typeof d=="string"){var h,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var m=u.GetData(this,"select2");m==null&&window.console&&console.error&&console.error("The select2('"+d+"') method was called on an element that is not using Select2."),h=m[d].apply(m,f)}),c.indexOf(d)>-1?this:h}else throw new Error("Invalid arguments for Select2: "+d)}}return r.fn.select2.defaults==null&&(r.fn.select2.defaults=l),a}),{define:s.define,require:s.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n})})(xy);var fT=xy.exports;const pT=ey(fT);pT();ve(function(){ve(".select-choose-specialist").select2({minimumResultsForSearch:-1}),ve(".select-choose-clinic").select2({minimumResultsForSearch:-1}),ve(".select-choose-specialist--popup").select2({minimumResultsForSearch:-1,dropdownCssClass:"select-up-index",dropdownParent:ve(".main")}),ve(".select-choose-clinic--popup").select2({minimumResultsForSearch:-1,dropdownCssClass:"select-up-index",dropdownParent:ve(".main")}),ve(".select-doctors-category").select2({minimumResultsForSearch:-1,dropdownParent:ve(".doctors")}),ve(".select-news-category").select2({minimumResultsForSearch:-1,placeholder:"ÐÐ°ÑÐµÐ³Ð¾ÑÑÑ ÑÑÐ°ÑÐµÐ¹",dropdownCssClass:"news-category-results",dropdownParent:ve(".news-head")})});function tt(i,e,t){return(e=gT(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function mT(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function gT(i){var e=mT(i,"string");return typeof e=="symbol"?e:String(e)}function vT(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Vg(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function yT(i,e,t){return e&&Vg(i.prototype,e),t&&Vg(i,t),i}function bT(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function $g(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Gg(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$g(Object(t),!0).forEach(function(n){bT(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):$g(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var Wg={addCSS:!0,thumbWidth:15,watch:!0};function _T(i,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(i,e)}function ET(i,e){if(i&&e){var t=new Event(e,{bubbles:!0});i.dispatchEvent(t)}}var Ac=function(i){return i!=null?i.constructor:null},bm=function(i,e){return!!(i&&e&&i instanceof e)},Sy=function(i){return i==null},Ty=function(i){return Ac(i)===Object},wT=function(i){return Ac(i)===Number&&!Number.isNaN(i)},My=function(i){return Ac(i)===String},xT=function(i){return Ac(i)===Boolean},ST=function(i){return Ac(i)===Function},Cy=function(i){return Array.isArray(i)},Ay=function(i){return bm(i,NodeList)},TT=function(i){return bm(i,Element)},MT=function(i){return bm(i,Event)},CT=function(i){return Sy(i)||(My(i)||Cy(i)||Ay(i))&&!i.length||Ty(i)&&!Object.keys(i).length},un={nullOrUndefined:Sy,object:Ty,number:wT,string:My,boolean:xT,function:ST,array:Cy,nodeList:Ay,element:TT,event:MT,empty:CT};function AT(i){var e="".concat(i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function PT(i,e){if(1>e){var t=AT(e);return parseFloat(i.toFixed(t))}return Math.round(i/e)*e}var LT=function(){function i(e,t){vT(this,i),un.element(e)?this.element=e:un.string(e)&&(this.element=document.querySelector(e)),un.element(this.element)&&un.empty(this.element.rangeTouch)&&(this.config=Gg({},Wg,{},t),this.init())}return yT(i,[{key:"init",value:function(){i.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){i.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(s){t.element[n](s,function(r){return t.set(r)},!1)})}},{key:"get",value:function(e){if(!i.enabled||!un.event(e))return null;var t,n=e.target,s=e.changedTouches[0],r=parseFloat(n.getAttribute("min"))||0,o=parseFloat(n.getAttribute("max"))||100,a=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(t=100/l.width*(s.clientX-l.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*u:50<t&&(t+=2*(t-50)*u),r+PT(t/100*(o-r),a)}},{key:"set",value:function(e){i.enabled&&un.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),ET(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=null;if(un.empty(e)||un.string(e)?n=Array.from(document.querySelectorAll(un.string(e)?e:'input[type="range"]')):un.element(e)?n=[e]:un.nodeList(e)?n=Array.from(e):un.array(e)&&(n=e.filter(un.element)),un.empty(n))return null;var s=Gg({},Wg,{},t);if(un.string(e)&&s.watch){var r=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(l){un.element(l)&&_T(l,e)&&new i(l,s)})})});r.observe(document.body,{childList:!0,subtree:!0})}return n.map(function(o){return new i(o,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),i}();const Pc=i=>i!=null?i.constructor:null,Cr=(i,e)=>!!(i&&e&&i instanceof e),_m=i=>i==null,Py=i=>Pc(i)===Object,RT=i=>Pc(i)===Number&&!Number.isNaN(i),kd=i=>Pc(i)===String,IT=i=>Pc(i)===Boolean,Ly=i=>typeof i=="function",Ry=i=>Array.isArray(i),DT=i=>Cr(i,WeakMap),Iy=i=>Cr(i,NodeList),OT=i=>Pc(i)===Text,NT=i=>Cr(i,Event),kT=i=>Cr(i,KeyboardEvent),FT=i=>Cr(i,window.TextTrackCue)||Cr(i,window.VTTCue),UT=i=>Cr(i,TextTrack)||!_m(i)&&kd(i.kind),zT=i=>Cr(i,Promise)&&Ly(i.then),BT=i=>i!==null&&typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object",Dy=i=>_m(i)||(kd(i)||Ry(i)||Iy(i))&&!i.length||Py(i)&&!Object.keys(i).length,HT=i=>{if(Cr(i,window.URL))return!0;if(!kd(i))return!1;let e=i;i.startsWith("http://")&&i.startsWith("https://")||(e=`http://${i}`);try{return!Dy(new URL(e).hostname)}catch{return!1}};var K={nullOrUndefined:_m,object:Py,number:RT,string:kd,boolean:IT,function:Ly,array:Ry,weakMap:DT,nodeList:Iy,element:BT,textNode:OT,event:NT,keyboardEvent:kT,cue:FT,track:UT,promise:zT,url:HT,empty:Dy};const Bf=(()=>{const i=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(e).find(n=>i.style[n]!==void 0);return!!K.string(t)&&e[t]})();function Oy(i,e){setTimeout(()=>{try{i.hidden=!0,i.offsetHeight,i.hidden=!1}catch{}},e)}const VT=!!window.document.documentMode,$T=/Edge/g.test(navigator.userAgent),GT="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),WT=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,jT=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,qT=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var en={isIE:VT,isEdge:$T,isWebKit:GT,isIPhone:WT,isIPadOS:jT,isIos:qT};function XT(i){return JSON.parse(JSON.stringify(i))}function Ny(i,e){return e.split(".").reduce((t,n)=>t&&t[n],i)}function Oi(i={},...e){if(!e.length)return i;const t=e.shift();return K.object(t)?(Object.keys(t).forEach(n=>{K.object(t[n])?(Object.keys(i).includes(n)||Object.assign(i,{[n]:{}}),Oi(i[n],t[n])):Object.assign(i,{[n]:t[n]})}),Oi(i,...e)):i}function ky(i,e){const t=i.length?i:[i];Array.from(t).reverse().forEach((n,s)=>{const r=s>0?e.cloneNode(!0):e,o=n.parentNode,a=n.nextSibling;r.appendChild(n),a?o.insertBefore(r,a):o.appendChild(r)})}function Hf(i,e){K.element(i)&&!K.empty(e)&&Object.entries(e).filter(([,t])=>!K.nullOrUndefined(t)).forEach(([t,n])=>i.setAttribute(t,n))}function At(i,e,t){const n=document.createElement(i);return K.object(e)&&Hf(n,e),K.string(t)&&(n.innerText=t),n}function YT(i,e){K.element(i)&&K.element(e)&&e.parentNode.insertBefore(i,e.nextSibling)}function jg(i,e,t,n){K.element(e)&&e.appendChild(At(i,t,n))}function wr(i){K.nodeList(i)||K.array(i)?Array.from(i).forEach(wr):K.element(i)&&K.element(i.parentNode)&&i.parentNode.removeChild(i)}function Bu(i){if(!K.element(i))return;let{length:e}=i.childNodes;for(;e>0;)i.removeChild(i.lastChild),e-=1}function ad(i,e){return K.element(e)&&K.element(e.parentNode)&&K.element(i)?(e.parentNode.replaceChild(i,e),i):null}function zs(i,e){if(!K.string(i)||K.empty(i))return{};const t={},n=Oi({},e);return i.split(",").forEach(s=>{const r=s.trim(),o=r.replace(".",""),a=r.replace(/[[\]]/g,"").split("="),[l]=a,u=a.length>1?a[1].replace(/["']/g,""):"";switch(r.charAt(0)){case".":K.string(n.class)?t.class=`${n.class} ${o}`:t.class=o;break;case"#":t.id=r.replace("#","");break;case"[":t[l]=u}}),Oi(n,t)}function _o(i,e){if(!K.element(i))return;let t=e;K.boolean(t)||(t=!i.hidden),i.hidden=t}function ci(i,e,t){if(K.nodeList(i))return Array.from(i).map(n=>ci(n,e,t));if(K.element(i)){let n="toggle";return t!==void 0&&(n=t?"add":"remove"),i.classList[n](e),i.classList.contains(e)}return!1}function ld(i,e){return K.element(i)&&i.classList.contains(e)}function No(i,e){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(i,e)}function KT(i,e){const{prototype:t}=Element;return(t.closest||function(){let n=this;do{if(No.matches(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}).call(i,e)}function fc(i){return this.elements.container.querySelectorAll(i)}function Gi(i){return this.elements.container.querySelector(i)}function Rh(i=null,e=!1){K.element(i)&&i.focus({preventScroll:!0,focusVisible:e})}const qg={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Ni={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(i,e){const t=Ni[i]||e!=="html5";return{api:t,ui:t&&Ni.rangeInput}},pip:!(en.isIPhone||!K.function(At("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||At("video").disablePictureInPicture)),airplay:K.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(i){if(K.empty(i))return!1;const[e]=i.split("/");let t=i;if(!this.isHTML5||e!==this.type)return!1;Object.keys(qg).includes(t)&&(t+=`; codecs="${qg[i]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const i=document.createElement("input");return i.type="range",i.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Bf!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ZT=(()=>{let i=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(i=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return i})();function pc(i,e,t,n=!1,s=!0,r=!1){if(!i||!("addEventListener"in i)||K.empty(e)||!K.function(t))return;const o=e.split(" ");let a=r;ZT&&(a={passive:s,capture:r}),o.forEach(l=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:i,type:l,callback:t,options:a}),i[n?"addEventListener":"removeEventListener"](l,t,a)})}function Jt(i,e="",t,n=!0,s=!1){pc.call(this,i,e,t,!0,n,s)}function Fd(i,e="",t,n=!0,s=!1){pc.call(this,i,e,t,!1,n,s)}function Em(i,e="",t,n=!0,s=!1){const r=(...o)=>{Fd(i,e,r,n,s),t.apply(this,o)};pc.call(this,i,e,r,!0,n,s)}function Lt(i,e="",t=!1,n={}){if(!K.element(i)||K.empty(e))return;const s=new CustomEvent(e,{bubbles:t,detail:{...n,plyr:this}});i.dispatchEvent(s)}function QT(){this&&this.eventListeners&&(this.eventListeners.forEach(i=>{const{element:e,type:t,callback:n,options:s}=i;e.removeEventListener(t,n,s)}),this.eventListeners=[])}function JT(){return new Promise(i=>this.ready?setTimeout(i,0):Jt.call(this,this.elements.container,"ready",i)).then(()=>{})}function $s(i){K.promise(i)&&i.then(null,()=>{})}function Vf(i){return K.array(i)?i.filter((e,t)=>i.indexOf(e)===t):i}function Fy(i,e){return K.array(i)&&i.length?i.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t):null}function Uy(i){return!(!window||!window.CSS)&&window.CSS.supports(i)}const Xg=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((i,[e,t])=>({...i,[e/t]:[e,t]}),{});function zy(i){return K.array(i)||K.string(i)&&i.includes(":")?(K.array(i)?i:i.split(":")).map(Number).every(K.number):!1}function cd(i){if(!K.array(i)||!i.every(K.number))return null;const[e,t]=i,n=(r,o)=>o===0?r:n(o,r%o),s=n(e,t);return[e/s,t/s]}function wm(i){const e=n=>zy(n)?n.split(":").map(Number):null;let t=e(i);if(t===null&&(t=e(this.config.ratio)),t===null&&!K.empty(this.embed)&&K.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:n,videoHeight:s}=this.media;t=[n,s]}return cd(t)}function $a(i){if(!this.isVideo)return{};const{wrapper:e}=this.elements,t=wm.call(this,i);if(!K.array(t))return{};const[n,s]=cd(t),r=100/n*s;if(Uy(`aspect-ratio: ${n}/${s}`)?e.style.aspectRatio=`${n}/${s}`:e.style.paddingBottom=`${r}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-r)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:r,ratio:t}}function By(i,e,t=.05){const n=i/e,s=Fy(Object.keys(Xg),n);return Math.abs(s-n)<=t?Xg[s]:[i,e]}function eM(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Zr={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(i=>{const e=i.getAttribute("type");return!!K.empty(e)||Ni.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Zr.getSources.call(this).map(i=>Number(i.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const i=this;i.options.speed=i.config.speed.options,K.empty(this.config.ratio)||$a.call(i),Object.defineProperty(i.media,"quality",{get(){const e=Zr.getSources.call(i).find(t=>t.getAttribute("src")===i.source);return e&&Number(e.getAttribute("size"))},set(e){if(i.quality!==e){if(i.config.quality.forced&&K.function(i.config.quality.onChange))i.config.quality.onChange(e);else{const t=Zr.getSources.call(i).find(l=>Number(l.getAttribute("size"))===e);if(!t)return;const{currentTime:n,paused:s,preload:r,readyState:o,playbackRate:a}=i.media;i.media.src=t.getAttribute("src"),(r!=="none"||o)&&(i.once("loadedmetadata",()=>{i.speed=a,i.currentTime=n,s||$s(i.play())}),i.media.load())}Lt.call(i,i.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(wr(Zr.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function tM(i){return`${i}-${Math.floor(1e4*Math.random())}`}function $f(i,...e){return K.empty(i)?i:i.toString().replace(/{(\d+)}/g,(t,n)=>e[n].toString())}function iM(i,e){return i===0||e===0||Number.isNaN(i)||Number.isNaN(e)?0:(i/e*100).toFixed(2)}const Yl=(i="",e="",t="")=>i.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),Hy=(i="")=>i.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function nM(i=""){let e=i.toString();return e=Yl(e,"-"," "),e=Yl(e,"_"," "),e=Hy(e),Yl(e," ","")}function sM(i=""){let e=i.toString();return e=nM(e),e.charAt(0).toLowerCase()+e.slice(1)}function rM(i){const e=document.createDocumentFragment(),t=document.createElement("div");return e.appendChild(t),t.innerHTML=i,e.firstChild.innerText}function oM(i){const e=document.createElement("div");return e.appendChild(i),e.innerHTML}const Yg={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Zi={get(i="",e={}){if(K.empty(i)||K.empty(e))return"";let t=Ny(e.i18n,i);if(K.empty(t))return Object.keys(Yg).includes(i)?Yg[i]:"";const n={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(n).forEach(([s,r])=>{t=Yl(t,s,r)}),t}};class mc{constructor(e){tt(this,"get",t=>{if(!mc.supported||!this.enabled)return null;const n=window.localStorage.getItem(this.key);if(K.empty(n))return null;const s=JSON.parse(n);return K.string(t)&&t.length?s[t]:s}),tt(this,"set",t=>{if(!mc.supported||!this.enabled||!K.object(t))return;let n=this.get();K.empty(n)&&(n={}),Oi(n,t);try{window.localStorage.setItem(this.key,JSON.stringify(n))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function Lc(i,e="text"){return new Promise((t,n)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",()=>{if(e==="text")try{t(JSON.parse(s.responseText))}catch{t(s.responseText)}else t(s.response)}),s.addEventListener("error",()=>{throw new Error(s.status)}),s.open("GET",i,!0),s.responseType=e,s.send()}catch(s){n(s)}})}function Vy(i,e){if(!K.string(i))return;const t="cache",n=K.string(e);let s=!1;const r=()=>document.getElementById(e)!==null,o=(a,l)=>{a.innerHTML=l,n&&r()||document.body.insertAdjacentElement("afterbegin",a)};if(!n||!r()){const a=mc.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),n&&l.setAttribute("id",e),a){const u=window.localStorage.getItem(`${t}-${e}`);if(s=u!==null,s){const c=JSON.parse(u);o(l,c.content)}}Lc(i).then(u=>{if(!K.empty(u)){if(a)try{window.localStorage.setItem(`${t}-${e}`,JSON.stringify({content:u}))}catch{}o(l,u)}}).catch(()=>{})}}const $y=i=>Math.trunc(i/60/60%60,10),aM=i=>Math.trunc(i/60%60,10),lM=i=>Math.trunc(i%60,10);function Ud(i=0,e=!1,t=!1){if(!K.number(i))return Ud(void 0,e,t);const n=a=>`0${a}`.slice(-2);let s=$y(i);const r=aM(i),o=lM(i);return s=e||s>0?`${s}:`:"",`${t&&i>0?"-":""}${s}${n(r)}:${n(o)}`}const Ze={getIconUrl(){const i=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,t=i.host!==e||en.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=Gi.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:fc.call(this,this.config.selectors.buttons.play),pause:Gi.call(this,this.config.selectors.buttons.pause),restart:Gi.call(this,this.config.selectors.buttons.restart),rewind:Gi.call(this,this.config.selectors.buttons.rewind),fastForward:Gi.call(this,this.config.selectors.buttons.fastForward),mute:Gi.call(this,this.config.selectors.buttons.mute),pip:Gi.call(this,this.config.selectors.buttons.pip),airplay:Gi.call(this,this.config.selectors.buttons.airplay),settings:Gi.call(this,this.config.selectors.buttons.settings),captions:Gi.call(this,this.config.selectors.buttons.captions),fullscreen:Gi.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Gi.call(this,this.config.selectors.progress),this.elements.inputs={seek:Gi.call(this,this.config.selectors.inputs.seek),volume:Gi.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Gi.call(this,this.config.selectors.display.buffer),currentTime:Gi.call(this,this.config.selectors.display.currentTime),duration:Gi.call(this,this.config.selectors.display.duration)},K.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(i){return this.debug.warn("It looks like there is a problem with your custom controls HTML",i),this.toggleNativeControls(!0),!1}},createIcon(i,e){const t="http://www.w3.org/2000/svg",n=Ze.getIconUrl.call(this),s=`${n.cors?"":n.url}#${this.config.iconPrefix}`,r=document.createElementNS(t,"svg");Hf(r,Oi(e,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(t,"use"),a=`${s}-${i}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),r.appendChild(o),r},createLabel(i,e={}){const t=Zi.get(i,this.config);return At("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},t)},createBadge(i){if(K.empty(i))return null;const e=At("span",{class:this.config.classNames.menu.value});return e.appendChild(At("span",{class:this.config.classNames.menu.badge},i)),e},createButton(i,e){const t=Oi({},e);let n=sM(i);const s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(t).includes(o)&&(s[o]=t[o],delete t[o])}),s.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(o=>o===this.config.classNames.control)||Oi(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,i){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,n="play",s.label="play",s.icon="play";break;default:K.empty(s.label)&&(s.label=n),K.empty(s.icon)&&(s.icon=i)}const r=At(s.element);return s.toggle?(r.appendChild(Ze.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),r.appendChild(Ze.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),r.appendChild(Ze.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),r.appendChild(Ze.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(r.appendChild(Ze.createIcon.call(this,s.icon)),r.appendChild(Ze.createLabel.call(this,s.label))),Oi(t,zs(this.config.selectors.buttons[n],t)),Hf(r,t),n==="play"?(K.array(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(r)):this.elements.buttons[n]=r,r},createRange(i,e){const t=At("input",Oi(zs(this.config.selectors.inputs[i]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Zi.get(i,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[i]=t,Ze.updateRangeFill.call(this,t),LT.setup(t),t},createProgress(i,e){const t=At("progress",Oi(zs(this.config.selectors.display[i]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(i!=="volume"){t.appendChild(At("span",null,"0"));const n={played:"played",buffer:"buffered"}[i],s=n?Zi.get(n,this.config):"";t.innerText=`% ${s.toLowerCase()}`}return this.elements.display[i]=t,t},createTime(i,e){const t=zs(this.config.selectors.display[i],e),n=At("div",Oi(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Zi.get(i,this.config),role:"timer"}),"00:00");return this.elements.display[i]=n,n},bindMenuItemShortcuts(i,e){Jt.call(this,i,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const n=No(i,'[role="menuitemradio"]');if(!n&&[" ","ArrowRight"].includes(t.key))Ze.showMenuPanel.call(this,e,!0);else{let s;t.key!==" "&&(t.key==="ArrowDown"||n&&t.key==="ArrowRight"?(s=i.nextElementSibling,K.element(s)||(s=i.parentNode.firstElementChild)):(s=i.previousElementSibling,K.element(s)||(s=i.parentNode.lastElementChild)),Rh.call(this,s,!0))}},!1),Jt.call(this,i,"keyup",t=>{t.key==="Return"&&Ze.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:i,list:e,type:t,title:n,badge:s=null,checked:r=!1}){const o=zs(this.config.selectors.inputs[t]),a=At("button",Oi(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":r,value:i})),l=At("span");l.innerHTML=n,K.element(s)&&l.appendChild(s),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(u){u&&Array.from(a.parentNode.children).filter(c=>No(c,'[role="menuitemradio"]')).forEach(c=>c.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(a,"click keyup",u=>{if(!K.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),a.checked=!0,t){case"language":this.currentTrack=Number(i);break;case"quality":this.quality=i;break;case"speed":this.speed=parseFloat(i)}Ze.showMenuPanel.call(this,"home",K.keyboardEvent(u))}},t,!1),Ze.bindMenuItemShortcuts.call(this,a,t),e.appendChild(a)},formatTime(i=0,e=!1){return K.number(i)?Ud(i,$y(this.duration)>0,e):i},updateTimeDisplay(i=null,e=0,t=!1){K.element(i)&&K.number(e)&&(i.innerText=Ze.formatTime(e,t))},updateVolume(){this.supported.ui&&(K.element(this.elements.inputs.volume)&&Ze.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),K.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(i,e=0){K.element(i)&&(i.value=e,Ze.updateRangeFill.call(this,i))},updateProgress(i){if(!this.supported.ui||!K.event(i))return;let e=0;const t=(n,s)=>{const r=K.number(s)?s:0,o=K.element(n)?n:this.elements.display.buffer;if(K.element(o)){o.value=r;const a=o.getElementsByTagName("span")[0];K.element(a)&&(a.childNodes[0].nodeValue=r)}};if(i)switch(i.type){case"timeupdate":case"seeking":case"seeked":e=iM(this.currentTime,this.duration),i.type==="timeupdate"&&Ze.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(i){const e=K.event(i)?i.target:i;if(K.element(e)&&e.getAttribute("type")==="range"){if(No(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=Ze.formatTime(this.currentTime),n=Ze.formatTime(this.duration),s=Zi.get("seekLabel",this.config);e.setAttribute("aria-valuetext",s.replace("{currentTime}",t).replace("{duration}",n))}else if(No(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(en.isWebKit||en.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(i){var e,t;if(!this.config.tooltips.seek||!K.element(this.elements.inputs.seek)||!K.element(this.elements.display.seekTooltip)||this.duration===0)return;const n=this.elements.display.seekTooltip,s=`${this.config.classNames.tooltip}--visible`,r=c=>ci(n,s,c);if(this.touch)return void r(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(K.event(i))o=100/a.width*(i.pageX-a.left);else{if(!ld(n,s))return;o=parseFloat(n.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;n.innerText=Ze.formatTime(l);const u=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.find(({time:c})=>c===Math.round(l));u&&n.insertAdjacentHTML("afterbegin",`${u.label}<br>`),n.style.left=`${o}%`,K.event(i)&&["mouseenter","mouseleave"].includes(i.type)&&r(i.type==="mouseenter")},timeUpdate(i){const e=!K.element(this.elements.display.duration)&&this.config.invertTime;Ze.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),i&&i.type==="timeupdate"&&this.media.seeking||Ze.updateProgress.call(this,i)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return _o(this.elements.display.currentTime,!0),void _o(this.elements.progress,!0);K.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const i=K.element(this.elements.display.duration);!i&&this.config.displayDuration&&this.paused&&Ze.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),i&&Ze.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Ze.setMarkers.call(this),Ze.updateSeekTooltip.call(this)},toggleMenuButton(i,e){_o(this.elements.settings.buttons[i],!e)},updateSetting(i,e,t){const n=this.elements.settings.panels[i];let s=null,r=e;if(i==="captions")s=this.currentTrack;else{if(s=K.empty(t)?this[i]:t,K.empty(s)&&(s=this.config[i].default),!K.empty(this.options[i])&&!this.options[i].includes(s))return void this.debug.warn(`Unsupported value of '${s}' for ${i}`);if(!this.config[i].options.includes(s))return void this.debug.warn(`Disabled value of '${s}' for ${i}`)}if(K.element(r)||(r=n&&n.querySelector('[role="menu"]')),!K.element(r))return;this.elements.settings.buttons[i].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Ze.getLabel.call(this,i,s);const o=r&&r.querySelector(`[value="${s}"]`);K.element(o)&&(o.checked=!0)},getLabel(i,e){switch(i){case"speed":return e===1?Zi.get("normal",this.config):`${e}&times;`;case"quality":if(K.number(e)){const t=Zi.get(`qualityLabel.${e}`,this.config);return t.length?t:`${e}p`}return Hy(e);case"captions":return ni.getLabel.call(this);default:return null}},setQualityMenu(i){if(!K.element(this.elements.settings.panels.quality))return;const e="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');K.array(i)&&(this.options.quality=Vf(i).filter(r=>this.config.quality.options.includes(r)));const n=!K.empty(this.options.quality)&&this.options.quality.length>1;if(Ze.toggleMenuButton.call(this,e,n),Bu(t),Ze.checkMenu.call(this),!n)return;const s=r=>{const o=Zi.get(`qualityBadge.${r}`,this.config);return o.length?Ze.createBadge.call(this,o):null};this.options.quality.sort((r,o)=>{const a=this.config.quality.options;return a.indexOf(r)>a.indexOf(o)?1:-1}).forEach(r=>{Ze.createMenuItem.call(this,{value:r,list:t,type:e,title:Ze.getLabel.call(this,"quality",r),badge:s(r)})}),Ze.updateSetting.call(this,e,t)},setCaptionsMenu(){if(!K.element(this.elements.settings.panels.captions))return;const i="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=ni.getTracks.call(this),n=!!t.length;if(Ze.toggleMenuButton.call(this,i,n),Bu(e),Ze.checkMenu.call(this),!n)return;const s=t.map((r,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:ni.getLabel.call(this,r),badge:r.language&&Ze.createBadge.call(this,r.language.toUpperCase()),list:e,type:"language"}));s.unshift({value:-1,checked:!this.captions.toggled,title:Zi.get("disabled",this.config),list:e,type:"language"}),s.forEach(Ze.createMenuItem.bind(this)),Ze.updateSetting.call(this,i,e)},setSpeedMenu(){if(!K.element(this.elements.settings.panels.speed))return;const i="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(n=>n>=this.minimumSpeed&&n<=this.maximumSpeed);const t=!K.empty(this.options.speed)&&this.options.speed.length>1;Ze.toggleMenuButton.call(this,i,t),Bu(e),Ze.checkMenu.call(this),t&&(this.options.speed.forEach(n=>{Ze.createMenuItem.call(this,{value:n,list:e,type:i,title:Ze.getLabel.call(this,"speed",n)})}),Ze.updateSetting.call(this,i,e))},checkMenu(){const{buttons:i}=this.elements.settings,e=!K.empty(i)&&Object.values(i).some(t=>!t.hidden);_o(this.elements.settings.menu,!e)},focusFirstMenuItem(i,e=!1){if(this.elements.settings.popup.hidden)return;let t=i;K.element(t)||(t=Object.values(this.elements.settings.panels).find(s=>!s.hidden));const n=t.querySelector('[role^="menuitem"]');Rh.call(this,n,e)},toggleMenu(i){const{popup:e}=this.elements.settings,t=this.elements.buttons.settings;if(!K.element(e)||!K.element(t))return;const{hidden:n}=e;let s=n;if(K.boolean(i))s=i;else if(K.keyboardEvent(i)&&i.key==="Escape")s=!1;else if(K.event(i)){const r=K.function(i.composedPath)?i.composedPath()[0]:i.target,o=e.contains(r);if(o||!o&&i.target!==t&&s)return}t.setAttribute("aria-expanded",s),_o(e,!s),ci(this.elements.container,this.config.classNames.menu.open,s),s&&K.keyboardEvent(i)?Ze.focusFirstMenuItem.call(this,null,!0):s||n||Rh.call(this,t,K.keyboardEvent(i))},getMenuSize(i){const e=i.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),i.parentNode.appendChild(e);const t=e.scrollWidth,n=e.scrollHeight;return wr(e),{width:t,height:n}},showMenuPanel(i="",e=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${i}`);if(!K.element(t))return;const n=t.parentNode,s=Array.from(n.children).find(r=>!r.hidden);if(Ni.transitions&&!Ni.reducedMotion){n.style.width=`${s.scrollWidth}px`,n.style.height=`${s.scrollHeight}px`;const r=Ze.getMenuSize.call(this,t),o=a=>{a.target===n&&["width","height"].includes(a.propertyName)&&(n.style.width="",n.style.height="",Fd.call(this,n,Bf,o))};Jt.call(this,n,Bf,o),n.style.width=`${r.width}px`,n.style.height=`${r.height}px`}_o(s,!0),_o(t,!1),Ze.focusFirstMenuItem.call(this,t,e)},setDownloadUrl(){const i=this.elements.buttons.download;K.element(i)&&i.setAttribute("href",this.download)},create(i){const{bindMenuItemShortcuts:e,createButton:t,createProgress:n,createRange:s,createTime:r,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=Ze;this.elements.controls=null,K.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const u=At("div",zs(this.config.selectors.controls.wrapper));this.elements.controls=u;const c={class:"plyr__controls__item"};return Vf(K.array(this.config.controls)?this.config.controls:[]).forEach(d=>{if(d==="restart"&&u.appendChild(t.call(this,"restart",c)),d==="rewind"&&u.appendChild(t.call(this,"rewind",c)),d==="play"&&u.appendChild(t.call(this,"play",c)),d==="fast-forward"&&u.appendChild(t.call(this,"fast-forward",c)),d==="progress"){const h=At("div",{class:`${c.class} plyr__progress__container`}),f=At("div",zs(this.config.selectors.progress));if(f.appendChild(s.call(this,"seek",{id:`plyr-seek-${i.id}`})),f.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const m=At("span",{class:this.config.classNames.tooltip},"00:00");f.appendChild(m),this.elements.display.seekTooltip=m}this.elements.progress=f,h.appendChild(this.elements.progress),u.appendChild(h)}if(d==="current-time"&&u.appendChild(r.call(this,"currentTime",c)),d==="duration"&&u.appendChild(r.call(this,"duration",c)),d==="mute"||d==="volume"){let{volume:h}=this.elements;if(K.element(h)&&u.contains(h)||(h=At("div",Oi({},c,{class:`${c.class} plyr__volume`.trim()})),this.elements.volume=h,u.appendChild(h)),d==="mute"&&h.appendChild(t.call(this,"mute")),d==="volume"&&!en.isIos&&!en.isIPadOS){const f={max:1,step:.05,value:this.config.volume};h.appendChild(s.call(this,"volume",Oi(f,{id:`plyr-volume-${i.id}`})))}}if(d==="captions"&&u.appendChild(t.call(this,"captions",c)),d==="settings"&&!K.empty(this.config.settings)){const h=At("div",Oi({},c,{class:`${c.class} plyr__menu`.trim(),hidden:""}));h.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${i.id}`,"aria-expanded":!1}));const f=At("div",{class:"plyr__menu__container",id:`plyr-settings-${i.id}`,hidden:""}),m=At("div"),b=At("div",{id:`plyr-settings-${i.id}-home`}),v=At("div",{role:"menu"});b.appendChild(v),m.appendChild(b),this.elements.settings.panels.home=b,this.config.settings.forEach(g=>{const E=At("button",Oi(zs(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,E,g),Jt.call(this,E,"click",()=>{l.call(this,g,!1)});const w=At("span",null,Zi.get(g,this.config)),S=At("span",{class:this.config.classNames.menu.value});S.innerHTML=i[g],w.appendChild(S),E.appendChild(w),v.appendChild(E);const I=At("div",{id:`plyr-settings-${i.id}-${g}`,hidden:""}),D=At("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});D.appendChild(At("span",{"aria-hidden":!0},Zi.get(g,this.config))),D.appendChild(At("span",{class:this.config.classNames.hidden},Zi.get("menuBack",this.config))),Jt.call(this,I,"keydown",y=>{y.key==="ArrowLeft"&&(y.preventDefault(),y.stopPropagation(),l.call(this,"home",!0))},!1),Jt.call(this,D,"click",()=>{l.call(this,"home",!1)}),I.appendChild(D),I.appendChild(At("div",{role:"menu"})),m.appendChild(I),this.elements.settings.buttons[g]=E,this.elements.settings.panels[g]=I}),f.appendChild(m),h.appendChild(f),u.appendChild(h),this.elements.settings.popup=f,this.elements.settings.menu=h}if(d==="pip"&&Ni.pip&&u.appendChild(t.call(this,"pip",c)),d==="airplay"&&Ni.airplay&&u.appendChild(t.call(this,"airplay",c)),d==="download"){const h=Oi({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(h.download="");const{download:f}=this.config.urls;!K.url(f)&&this.isEmbed&&Oi(h,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(t.call(this,"download",h))}d==="fullscreen"&&u.appendChild(t.call(this,"fullscreen",c))}),this.isHTML5&&o.call(this,Zr.getQualityOptions.call(this)),a.call(this),u},inject(){if(this.config.loadSprite){const s=Ze.getIconUrl.call(this);s.cors&&Vy(s.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let i=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;K.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),K.element(this.config.controls)||K.string(this.config.controls)?i=this.config.controls:(i=Ze.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:ni.getLabel.call(this)}),t=!1);let n;if(t&&K.string(this.config.controls)&&(i=(s=>{let r=s;return Object.entries(e).forEach(([o,a])=>{r=Yl(r,`{${o}}`,a)}),r})(i)),K.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),K.element(n)||(n=this.elements.container),n[K.element(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),K.element(this.elements.controls)||Ze.findElements.call(this),!K.empty(this.elements.buttons)){const s=r=>{const o=this.config.classNames.controlPressed;r.setAttribute("aria-pressed","false"),Object.defineProperty(r,"pressed",{configurable:!0,enumerable:!0,get:()=>ld(r,o),set(a=!1){ci(r,o,a),r.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(r=>{K.array(r)||K.nodeList(r)?Array.from(r).filter(Boolean).forEach(s):s(r)})}if(en.isEdge&&Oy(n),this.config.tooltips.controls){const{classNames:s,selectors:r}=this.config,o=`${r.controls.wrapper} ${r.labels} .${s.hidden}`,a=fc.call(this,o);Array.from(a).forEach(l=>{ci(l,this.config.classNames.hidden,!1),ci(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var i,e;if(!this.duration||this.elements.markers)return;const t=(i=this.config.markers)===null||i===void 0||(e=i.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(t==null||!t.length)return;const n=document.createDocumentFragment(),s=document.createDocumentFragment();let r=null;const o=`${this.config.classNames.tooltip}--visible`,a=l=>ci(r,o,l);t.forEach(l=>{const u=At("span",{class:this.config.classNames.marker},""),c=l.time/this.duration*100+"%";r&&(u.addEventListener("mouseenter",()=>{l.label||(r.style.left=c,r.innerHTML=l.label,a(!0))}),u.addEventListener("mouseleave",()=>{a(!1)})),u.addEventListener("click",()=>{this.currentTime=l.time}),u.style.left=c,s.appendChild(u)}),n.appendChild(s),this.config.tooltips.seek||(r=At("span",{class:this.config.classNames.tooltip},""),n.appendChild(r)),this.elements.markers={points:s,tip:r},this.elements.progress.appendChild(n)}};function Gy(i,e=!0){let t=i;if(e){const n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch{return null}}function Wy(i){const e=new URLSearchParams;return K.object(i)&&Object.entries(i).forEach(([t,n])=>{e.set(t,n)}),e}const ni={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Ni.textTracks)return void(K.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ze.setCaptionsMenu.call(this));if(K.element(this.elements.captions)||(this.elements.captions=At("div",zs(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),YT(this.elements.captions,this.elements.wrapper)),en.isIE&&window.URL){const n=this.media.querySelectorAll("track");Array.from(n).forEach(s=>{const r=s.getAttribute("src"),o=Gy(r);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&Lc(r,"blob").then(a=>{s.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{wr(s)})})}const i=Vf((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(n=>n.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=i);let t=this.storage.get("captions");if(K.boolean(t)||({active:t}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:t,language:e,languages:i}),this.isHTML5){const n=this.config.captions.update?"addtrack removetrack":"removetrack";Jt.call(this,this.media.textTracks,n,ni.update.bind(this))}setTimeout(ni.update.bind(this),0)},update(){const i=ni.getTracks.call(this,!0),{active:e,language:t,meta:n,currentTrackNode:s}=this.captions,r=!!i.find(o=>o.language===t);this.isHTML5&&this.isVideo&&i.filter(o=>!n.get(o)).forEach(o=>{this.debug.log("Track added",o),n.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),Jt.call(this,o,"cuechange",()=>ni.updateCues.call(this))}),(r&&this.language!==t||!i.includes(s))&&(ni.setLanguage.call(this,t),ni.toggle.call(this,e&&r)),this.elements&&ci(this.elements.container,this.config.classNames.captions.enabled,!K.empty(i)),K.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ze.setCaptionsMenu.call(this)},toggle(i,e=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,n=this.config.classNames.captions.active,s=K.nullOrUndefined(i)?!t:i;if(s!==t){if(e||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!e){const r=ni.getTracks.call(this),o=ni.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void ni.set.call(this,r.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),ci(this.elements.container,n,s),this.captions.toggled=s,Ze.updateSetting.call(this,"captions"),Lt.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout(()=>{s&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(i,e=!0){const t=ni.getTracks.call(this);if(i!==-1)if(K.number(i))if(i in t){if(this.captions.currentTrack!==i){this.captions.currentTrack=i;const n=t[i],{language:s}=n||{};this.captions.currentTrackNode=n,Ze.updateSetting.call(this,"captions"),e||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),Lt.call(this,this.media,"languagechange")}ni.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&ni.updateCues.call(this)}else this.debug.warn("Track not found",i);else this.debug.warn("Invalid caption argument",i);else ni.toggle.call(this,!1,e)},setLanguage(i,e=!0){if(!K.string(i))return void this.debug.warn("Invalid language argument",i);const t=i.toLowerCase();this.captions.language=t;const n=ni.getTracks.call(this),s=ni.findTrack.call(this,[t]);ni.set.call(this,n.indexOf(s),e)},getTracks(i=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||i||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(i,e=!1){const t=ni.getTracks.call(this),n=o=>Number((this.captions.meta.get(o)||{}).default),s=Array.from(t).sort((o,a)=>n(a)-n(o));let r;return i.every(o=>(r=s.find(a=>a.language===o),!r)),r||(e?s[0]:void 0)},getCurrentTrack(){return ni.getTracks.call(this)[this.currentTrack]},getLabel(i){let e=i;return!K.track(e)&&Ni.textTracks&&this.captions.toggled&&(e=ni.getCurrentTrack.call(this)),K.track(e)?K.empty(e.label)?K.empty(e.language)?Zi.get("enabled",this.config):i.language.toUpperCase():e.label:Zi.get("disabled",this.config)},updateCues(i){if(!this.supported.ui)return;if(!K.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!K.nullOrUndefined(i)&&!Array.isArray(i))return void this.debug.warn("updateCues: Invalid input",i);let e=i;if(!e){const n=ni.getCurrentTrack.call(this);e=Array.from((n||{}).activeCues||[]).map(s=>s.getCueAsHTML()).map(oM)}const t=e.map(n=>n.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){Bu(this.elements.captions);const n=At("span",zs(this.config.selectors.caption));n.innerHTML=t,this.elements.captions.appendChild(n),Lt.call(this,this.media,"cuechange")}}},jy={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Ih={active:"picture-in-picture",inactive:"inline"},qr={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Dh={audio:"audio",video:"video"};function cM(i){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(i)?qr.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(i)?qr.vimeo:null}const Oh=()=>{};class uM{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Oh}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Oh}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Oh}}class xs{constructor(e){tt(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;K.element(t)&&(t.pressed=this.active);const n=this.target===this.player.media?this.target:this.player.elements.container;Lt.call(this.player,n,this.active?"enterfullscreen":"exitfullscreen",!0)}),tt(this,"toggleFallback",(t=!1)=>{if(t?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",ci(this.target,this.player.config.classNames.fullscreen.fallback,t),en.isIos){let n=document.head.querySelector('meta[name="viewport"]');const s="viewport-fit=cover";n||(n=document.createElement("meta"),n.setAttribute("name","viewport"));const r=K.string(n.content)&&n.content.includes(s);t?(this.cleanupViewport=!r,r||(n.content+=`,${s}`)):this.cleanupViewport&&(n.content=n.content.split(",").filter(o=>o.trim()!==s).join(","))}this.onChange()}),tt(this,"trapFocus",t=>{if(en.isIos||en.isIPadOS||!this.active||t.key!=="Tab")return;const n=document.activeElement,s=fc.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[r]=s,o=s[s.length-1];n!==o||t.shiftKey?n===r&&t.shiftKey&&(o.focus(),t.preventDefault()):(r.focus(),t.preventDefault())}),tt(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":xs.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");ci(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),tt(this,"enter",()=>{this.supported&&(en.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!xs.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?K.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),tt(this,"exit",()=>{if(this.supported)if(en.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),$s(this.player.play());else if(!xs.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!K.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),tt(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=xs.prefix,this.property=xs.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&KT(this.player.elements.container,e.config.fullscreen.container),Jt.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),Jt.call(this.player,this.player.elements.container,"dblclick",t=>{K.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),Jt.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return xs.nativeSupported&&!this.forceFallback}static get prefix(){if(K.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!K.function(document[`${t}ExitFullscreen`])&&!K.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,xs.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||xs.nativeSupported||!en.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!xs.nativeSupported||this.forceFallback)return ld(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return en.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Hu(i,e=1){return new Promise((t,n)=>{const s=new Image,r=()=>{delete s.onload,delete s.onerror,(s.naturalWidth>=e?t:n)(s)};Object.assign(s,{onload:r,onerror:r,src:i})})}const fi={addStyleHook(){ci(this.elements.container,this.config.selectors.container.replace(".",""),!0),ci(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(i=!1){i&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void fi.toggleNativeControls.call(this,!0);K.element(this.elements.controls)||(Ze.inject.call(this),this.listeners.controls()),fi.toggleNativeControls.call(this),this.isHTML5&&ni.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Ze.updateVolume.call(this),Ze.timeUpdate.call(this),Ze.durationUpdate.call(this),fi.checkPlaying.call(this),ci(this.elements.container,this.config.classNames.pip.supported,Ni.pip&&this.isHTML5&&this.isVideo),ci(this.elements.container,this.config.classNames.airplay.supported,Ni.airplay&&this.isHTML5),ci(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{Lt.call(this,this.media,"ready")},0),fi.setTitle.call(this),this.poster&&fi.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&Ze.durationUpdate.call(this),this.config.mediaMetadata&&Ze.setMediaMetadata.call(this)},setTitle(){let i=Zi.get("play",this.config);if(K.string(this.config.title)&&!K.empty(this.config.title)&&(i+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",i)}),this.isEmbed){const e=Gi.call(this,"iframe");if(!K.element(e))return;const t=K.empty(this.config.title)?"video":this.config.title,n=Zi.get("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",t))}},togglePoster(i){ci(this.elements.container,this.config.classNames.posterEnabled,i)},setPoster(i,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",i),this.elements.poster.removeAttribute("hidden"),JT.call(this).then(()=>Hu(i)).catch(t=>{throw i===this.poster&&fi.togglePoster.call(this,!1),t}).then(()=>{if(i!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${i}')`,backgroundSize:""}),fi.togglePoster.call(this,!0),i)))},checkPlaying(i){ci(this.elements.container,this.config.classNames.playing,this.playing),ci(this.elements.container,this.config.classNames.paused,this.paused),ci(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",Zi.get(this.playing?"pause":"play",this.config))}),K.event(i)&&i.type==="timeupdate"||fi.toggleControls.call(this)},checkLoading(i){this.loading=["stalled","waiting"].includes(i.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{ci(this.elements.container,this.config.classNames.loading,this.loading),fi.toggleControls.call(this)},this.loading?250:0)},toggleControls(i){const{controls:e}=this.elements;if(e&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(i||this.loading||this.paused||e.pressed||e.hover||t))}},migrateStyles(){Object.values({...this.media.style}).filter(i=>!K.empty(i)&&K.string(i)&&i.startsWith("--plyr")).forEach(i=>{this.elements.container.style.setProperty(i,this.media.style.getPropertyValue(i)),this.media.style.removeProperty(i)}),K.empty(this.media.style)&&this.media.removeAttribute("style")}};class dM{constructor(e){tt(this,"firstTouch",()=>{const{player:t}=this,{elements:n}=t;t.touch=!0,ci(n.container,t.config.classNames.isTouch,!0)}),tt(this,"global",(t=!0)=>{const{player:n}=this;n.config.keyboard.global&&pc.call(n,window,"keydown keyup",this.handleKey,t,!1),pc.call(n,document.body,"click",this.toggleMenu,t),Em.call(n,document.body,"touchstart",this.firstTouch)}),tt(this,"container",()=>{const{player:t}=this,{config:n,elements:s,timers:r}=t;!n.keyboard.global&&n.keyboard.focused&&Jt.call(t,s.container,"keydown keyup",this.handleKey,!1),Jt.call(t,s.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:u}=s;u&&l.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let c=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(fi.toggleControls.call(t,!0),c=t.touch?3e3:2e3),clearTimeout(r.controls),r.controls=setTimeout(()=>fi.toggleControls.call(t,!1),c)});const o=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const l=s.wrapper,{active:u}=t.fullscreen,[c,d]=wm.call(t),h=Uy(`aspect-ratio: ${c} / ${d}`);if(!u)return void(h?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[f,m]=eM(),b=f/m>c/d;h?(l.style.width=b?"auto":"100%",l.style.height=b?"100%":"auto"):(l.style.maxWidth=b?m/d*c+"px":null,l.style.margin=b?"0 auto":null)},a=()=>{clearTimeout(r.resized),r.resized=setTimeout(o,50)};Jt.call(t,s.container,"enterfullscreen exitfullscreen",l=>{const{target:u}=t.fullscreen;u===s.container&&(!t.isEmbed&&K.empty(t.config.ratio)||(o(),(l.type==="enterfullscreen"?Jt:Fd).call(t,window,"resize",a)))})}),tt(this,"media",()=>{const{player:t}=this,{elements:n}=t;if(Jt.call(t,t.media,"timeupdate seeking seeked",r=>Ze.timeUpdate.call(t,r)),Jt.call(t,t.media,"durationchange loadeddata loadedmetadata",r=>Ze.durationUpdate.call(t,r)),Jt.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),Jt.call(t,t.media,"progress playing seeking seeked",r=>Ze.updateProgress.call(t,r)),Jt.call(t,t.media,"volumechange",r=>Ze.updateVolume.call(t,r)),Jt.call(t,t.media,"playing play pause ended emptied timeupdate",r=>fi.checkPlaying.call(t,r)),Jt.call(t,t.media,"waiting canplay seeked playing",r=>fi.checkLoading.call(t,r)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const r=Gi.call(t,`.${t.config.classNames.video}`);if(!K.element(r))return;Jt.call(t,n.container,"click",o=>{([n.container,r].includes(o.target)||r.contains(o.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(o,t.restart,"restart"),this.proxy(o,()=>{$s(t.play())},"play")):this.proxy(o,()=>{$s(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&Jt.call(t,n.wrapper,"contextmenu",r=>{r.preventDefault()},!1),Jt.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),Jt.call(t,t.media,"ratechange",()=>{Ze.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),Jt.call(t,t.media,"qualitychange",r=>{Ze.updateSetting.call(t,"quality",null,r.detail.quality)}),Jt.call(t,t.media,"ready qualitychange",()=>{Ze.setDownloadUrl.call(t)});const s=t.config.events.concat(["keyup","keydown"]).join(" ");Jt.call(t,t.media,s,r=>{let{detail:o={}}=r;r.type==="error"&&(o=t.media.error),Lt.call(t,n.container,r.type,!0,o)})}),tt(this,"proxy",(t,n,s)=>{const{player:r}=this,o=r.config.listeners[s];let a=!0;K.function(o)&&(a=o.call(r,t)),a!==!1&&K.function(n)&&n.call(r,t)}),tt(this,"bind",(t,n,s,r,o=!0)=>{const{player:a}=this,l=a.config.listeners[r],u=K.function(l);Jt.call(a,t,n,c=>this.proxy(c,s,r),o&&!u)}),tt(this,"controls",()=>{const{player:t}=this,{elements:n}=t,s=en.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach(r=>{this.bind(r,"click",()=>{$s(t.togglePlay())},"play")}),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(n.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(n.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(n.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(n.buttons.download,"click",()=>{Lt.call(t,t.media,"download")},"download"),this.bind(n.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(n.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",r=>{r.stopPropagation(),r.preventDefault(),Ze.toggleMenu.call(t,r)},null,!1),this.bind(n.buttons.settings,"keyup",r=>{[" ","Enter"].includes(r.key)&&(r.key!=="Enter"?(r.preventDefault(),r.stopPropagation(),Ze.toggleMenu.call(t,r)):Ze.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(n.settings.menu,"keydown",r=>{r.key==="Escape"&&Ze.toggleMenu.call(t,r)}),this.bind(n.inputs.seek,"mousedown mousemove",r=>{const o=n.progress.getBoundingClientRect(),a=100/o.width*(r.pageX-o.left);r.currentTarget.setAttribute("seek-value",a)}),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",r=>{const o=r.currentTarget,a="play-on-seeked";if(K.keyboardEvent(r)&&!["ArrowLeft","ArrowRight"].includes(r.key))return;t.lastSeekTime=Date.now();const l=o.hasAttribute(a),u=["mouseup","touchend","keyup"].includes(r.type);l&&u?(o.removeAttribute(a),$s(t.play())):!u&&t.playing&&(o.setAttribute(a,""),t.pause())}),en.isIos){const r=fc.call(t,'input[type="range"]');Array.from(r).forEach(o=>this.bind(o,s,a=>Oy(a.target)))}this.bind(n.inputs.seek,s,r=>{const o=r.currentTarget;let a=o.getAttribute("seek-value");K.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),t.currentTime=a/o.max*t.duration},"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",r=>Ze.updateSeekTooltip.call(t,r)),this.bind(n.progress,"mousemove touchmove",r=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.startMove(r)}),this.bind(n.progress,"mouseleave touchend click",()=>{const{previewThumbnails:r}=t;r&&r.loaded&&r.endMove(!1,!0)}),this.bind(n.progress,"mousedown touchstart",r=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.startScrubbing(r)}),this.bind(n.progress,"mouseup touchend",r=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.endScrubbing(r)}),en.isWebKit&&Array.from(fc.call(t,'input[type="range"]')).forEach(r=>{this.bind(r,"input",o=>Ze.updateRangeFill.call(t,o.target))}),t.config.toggleInvert&&!K.element(n.display.duration)&&this.bind(n.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,Ze.timeUpdate.call(t))}),this.bind(n.inputs.volume,s,r=>{t.volume=r.target.value},"volume"),this.bind(n.controls,"mouseenter mouseleave",r=>{n.controls.hover=!t.touch&&r.type==="mouseenter"}),n.fullscreen&&Array.from(n.fullscreen.children).filter(r=>!r.contains(n.container)).forEach(r=>{this.bind(r,"mouseenter mouseleave",o=>{n.controls&&(n.controls.hover=!t.touch&&o.type==="mouseenter")})}),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",r=>{n.controls.pressed=["mousedown","touchstart"].includes(r.type)}),this.bind(n.controls,"focusin",()=>{const{config:r,timers:o}=t;ci(n.controls,r.classNames.noTransition,!0),fi.toggleControls.call(t,!0),setTimeout(()=>{ci(n.controls,r.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>fi.toggleControls.call(t,!1),a)}),this.bind(n.inputs.volume,"wheel",r=>{const o=r.webkitDirectionInvertedFromDevice,[a,l]=[r.deltaX,-r.deltaY].map(d=>o?-d:d),u=Math.sign(Math.abs(a)>Math.abs(l)?a:l);t.increaseVolume(u/50);const{volume:c}=t.media;(u===1&&c<1||u===-1&&c>0)&&r.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:n}=t,{key:s,type:r,altKey:o,ctrlKey:a,metaKey:l,shiftKey:u}=e,c=r==="keydown",d=c&&s===this.lastKey;if(!(o||a||l||u)&&s){if(c){const f=document.activeElement;if(K.element(f)){const{editable:m}=t.config.selectors,{seek:b}=n.inputs;if(f!==b&&No(f,m)||e.key===" "&&No(f,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(h=parseInt(s,10),t.currentTime=t.duration/10*h);break;case" ":case"k":d||$s(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":d||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":d||t.toggleCaptions();break;case"l":t.loop=!t.loop}s==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null;var h}}toggleMenu(e){Ze.toggleMenu.call(this.player,e)}}function hM(i,e){return i(e={exports:{}},e.exports),e.exports}var fM=hM(function(i,e){i.exports=function(){var t=function(){},n={},s={},r={};function o(h,f){h=h.push?h:[h];var m,b,v,g=[],E=h.length,w=E;for(m=function(S,I){I.length&&g.push(S),--w||f(g)};E--;)b=h[E],(v=s[b])?m(b,v):(r[b]=r[b]||[]).push(m)}function a(h,f){if(h){var m=r[h];if(s[h]=f,m)for(;m.length;)m[0](h,f),m.splice(0,1)}}function l(h,f){h.call&&(h={success:h}),f.length?(h.error||t)(f):(h.success||t)(h)}function u(h,f,m,b){var v,g,E=document,w=m.async,S=(m.numRetries||0)+1,I=m.before||t,D=h.replace(/[\?|#].*$/,""),y=h.replace(/^(css|img)!/,"");b=b||0,/(^css!|\.css$)/.test(D)?((g=E.createElement("link")).rel="stylesheet",g.href=y,(v="hideFocus"in g)&&g.relList&&(v=0,g.rel="preload",g.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(D)?(g=E.createElement("img")).src=y:((g=E.createElement("script")).src=h,g.async=w===void 0||w),g.onload=g.onerror=g.onbeforeload=function(B){var V=B.type[0];if(v)try{g.sheet.cssText.length||(V="e")}catch(C){C.code!=18&&(V="e")}if(V=="e"){if((b+=1)<S)return u(h,f,m,b)}else if(g.rel=="preload"&&g.as=="style")return g.rel="stylesheet";f(h,V,B.defaultPrevented)},I(h,g)!==!1&&E.head.appendChild(g)}function c(h,f,m){var b,v,g=(h=h.push?h:[h]).length,E=g,w=[];for(b=function(S,I,D){if(I=="e"&&w.push(S),I=="b"){if(!D)return;w.push(S)}--g||f(w)},v=0;v<E;v++)u(h[v],b,m)}function d(h,f,m){var b,v;if(f&&f.trim&&(b=f),v=(b?m:f)||{},b){if(b in n)throw"LoadJS";n[b]=!0}function g(E,w){c(h,function(S){l(v,S),E&&l({success:E,error:w},S),a(b,S)},v)}if(v.returnPromise)return new Promise(g);g()}return d.ready=function(h,f){return o(h,function(m){l(f,m)}),d},d.done=function(h){a(h,[])},d.reset=function(){n={},s={},r={}},d.isDefined=function(h){return h in n},d}()});function xm(i){return new Promise((e,t)=>{fM(i,{success:e,error:t})})}function pM(i){return K.empty(i)?null:K.number(Number(i))?i:i.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:i}function mM(i){const e=i.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Il(i){i&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===i&&(this.media.paused=!i,Lt.call(this,this.media,i?"play":"pause"))}const Gf={setup(){const i=this;ci(i.elements.wrapper,i.config.classNames.embed,!0),i.options.speed=i.config.speed.options,$a.call(i),K.object(window.Vimeo)?Gf.ready.call(i):xm(i.config.urls.vimeo.sdk).then(()=>{Gf.ready.call(i)}).catch(e=>{i.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const i=this,e=i.config.vimeo,{premium:t,referrerPolicy:n,...s}=e;let r=i.media.getAttribute("src"),o="";K.empty(r)?(r=i.media.getAttribute(i.config.attributes.embed.id),o=i.media.getAttribute(i.config.attributes.embed.hash)):o=mM(r);const a=o?{h:o}:{};t&&Object.assign(s,{controls:!1,sidedock:!1});const l=Wy({loop:i.config.loop.active,autoplay:i.autoplay,muted:i.muted,gesture:"media",playsinline:i.config.playsinline,...a,...s}),u=pM(r),c=At("iframe"),d=$f(i.config.urls.vimeo.iframe,u,l);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),K.empty(n)||c.setAttribute("referrerPolicy",n),t||!e.customControls)c.setAttribute("data-poster",i.poster),i.media=ad(c,i.media);else{const E=At("div",{class:i.config.classNames.embedContainer,"data-poster":i.poster});E.appendChild(c),i.media=ad(E,i.media)}e.customControls||Lc($f(i.config.urls.vimeo.api,d)).then(E=>{!K.empty(E)&&E.thumbnail_url&&fi.setPoster.call(i,E.thumbnail_url).catch(()=>{})}),i.embed=new window.Vimeo.Player(c,{autopause:i.config.autopause,muted:i.muted}),i.media.paused=!0,i.media.currentTime=0,i.supported.ui&&i.embed.disableTextTrack(),i.media.play=()=>(Il.call(i,!0),i.embed.play()),i.media.pause=()=>(Il.call(i,!1),i.embed.pause()),i.media.stop=()=>{i.pause(),i.currentTime=0};let{currentTime:h}=i.media;Object.defineProperty(i.media,"currentTime",{get:()=>h,set(E){const{embed:w,media:S,paused:I,volume:D}=i,y=I&&!w.hasPlayed;S.seeking=!0,Lt.call(i,S,"seeking"),Promise.resolve(y&&w.setVolume(0)).then(()=>w.setCurrentTime(E)).then(()=>y&&w.pause()).then(()=>y&&w.setVolume(D)).catch(()=>{})}});let f=i.config.speed.selected;Object.defineProperty(i.media,"playbackRate",{get:()=>f,set(E){i.embed.setPlaybackRate(E).then(()=>{f=E,Lt.call(i,i.media,"ratechange")}).catch(()=>{i.options.speed=[1]})}});let{volume:m}=i.config;Object.defineProperty(i.media,"volume",{get:()=>m,set(E){i.embed.setVolume(E).then(()=>{m=E,Lt.call(i,i.media,"volumechange")})}});let{muted:b}=i.config;Object.defineProperty(i.media,"muted",{get:()=>b,set(E){const w=!!K.boolean(E)&&E;i.embed.setMuted(!!w||i.config.muted).then(()=>{b=w,Lt.call(i,i.media,"volumechange")})}});let v,{loop:g}=i.config;Object.defineProperty(i.media,"loop",{get:()=>g,set(E){const w=K.boolean(E)?E:i.config.loop.active;i.embed.setLoop(w).then(()=>{g=w})}}),i.embed.getVideoUrl().then(E=>{v=E,Ze.setDownloadUrl.call(i)}).catch(E=>{this.debug.warn(E)}),Object.defineProperty(i.media,"currentSrc",{get:()=>v}),Object.defineProperty(i.media,"ended",{get:()=>i.currentTime===i.duration}),Promise.all([i.embed.getVideoWidth(),i.embed.getVideoHeight()]).then(E=>{const[w,S]=E;i.embed.ratio=By(w,S),$a.call(this)}),i.embed.setAutopause(i.config.autopause).then(E=>{i.config.autopause=E}),i.embed.getVideoTitle().then(E=>{i.config.title=E,fi.setTitle.call(this)}),i.embed.getCurrentTime().then(E=>{h=E,Lt.call(i,i.media,"timeupdate")}),i.embed.getDuration().then(E=>{i.media.duration=E,Lt.call(i,i.media,"durationchange")}),i.embed.getTextTracks().then(E=>{i.media.textTracks=E,ni.setup.call(i)}),i.embed.on("cuechange",({cues:E=[]})=>{const w=E.map(S=>rM(S.text));ni.updateCues.call(i,w)}),i.embed.on("loaded",()=>{i.embed.getPaused().then(E=>{Il.call(i,!E),E||Lt.call(i,i.media,"playing")}),K.element(i.embed.element)&&i.supported.ui&&i.embed.element.setAttribute("tabindex",-1)}),i.embed.on("bufferstart",()=>{Lt.call(i,i.media,"waiting")}),i.embed.on("bufferend",()=>{Lt.call(i,i.media,"playing")}),i.embed.on("play",()=>{Il.call(i,!0),Lt.call(i,i.media,"playing")}),i.embed.on("pause",()=>{Il.call(i,!1)}),i.embed.on("timeupdate",E=>{i.media.seeking=!1,h=E.seconds,Lt.call(i,i.media,"timeupdate")}),i.embed.on("progress",E=>{i.media.buffered=E.percent,Lt.call(i,i.media,"progress"),parseInt(E.percent,10)===1&&Lt.call(i,i.media,"canplaythrough"),i.embed.getDuration().then(w=>{w!==i.media.duration&&(i.media.duration=w,Lt.call(i,i.media,"durationchange"))})}),i.embed.on("seeked",()=>{i.media.seeking=!1,Lt.call(i,i.media,"seeked")}),i.embed.on("ended",()=>{i.media.paused=!0,Lt.call(i,i.media,"ended")}),i.embed.on("error",E=>{i.media.error=E,Lt.call(i,i.media,"error")}),e.customControls&&setTimeout(()=>fi.build.call(i),0)}};function gM(i){return K.empty(i)?null:i.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:i}function Dl(i){i&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===i&&(this.media.paused=!i,Lt.call(this,this.media,i?"play":"pause"))}function vM(i){return i.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const Vu={setup(){if(ci(this.elements.wrapper,this.config.classNames.embed,!0),K.object(window.YT)&&K.function(window.YT.Player))Vu.ready.call(this);else{const i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{K.function(i)&&i(),Vu.ready.call(this)},xm(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(i){Lc($f(this.config.urls.youtube.api,i)).then(e=>{if(K.object(e)){const{title:t,height:n,width:s}=e;this.config.title=t,fi.setTitle.call(this),this.embed.ratio=By(s,n)}$a.call(this)}).catch(()=>{$a.call(this)})},ready(){const i=this,e=i.config.youtube,t=i.media&&i.media.getAttribute("id");if(!K.empty(t)&&t.startsWith("youtube-"))return;let n=i.media.getAttribute("src");K.empty(n)&&(n=i.media.getAttribute(this.config.attributes.embed.id));const s=gM(n),r=At("div",{id:tM(i.provider),"data-poster":e.customControls?i.poster:void 0});if(i.media=ad(r,i.media),e.customControls){const o=a=>`https://i.ytimg.com/vi/${s}/${a}default.jpg`;Hu(o("maxres"),121).catch(()=>Hu(o("sd"),121)).catch(()=>Hu(o("hq"))).then(a=>fi.setPoster.call(i,a.src)).then(a=>{a.includes("maxres")||(i.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}i.embed=new window.YT.Player(i.media,{videoId:s,host:vM(e),playerVars:Oi({},{autoplay:i.config.autoplay?1:0,hl:i.config.hl,controls:i.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:i.config.playsinline&&!i.config.fullscreen.iosNative?1:0,cc_load_policy:i.captions.active?1:0,cc_lang_pref:i.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(o){if(!i.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";i.media.error={code:a,message:l},Lt.call(i,i.media,"error")}},onPlaybackRateChange(o){const a=o.target;i.media.playbackRate=a.getPlaybackRate(),Lt.call(i,i.media,"ratechange")},onReady(o){if(K.function(i.media.play))return;const a=o.target;Vu.getTitle.call(i,s),i.media.play=()=>{Dl.call(i,!0),a.playVideo()},i.media.pause=()=>{Dl.call(i,!1),a.pauseVideo()},i.media.stop=()=>{a.stopVideo()},i.media.duration=a.getDuration(),i.media.paused=!0,i.media.currentTime=0,Object.defineProperty(i.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(d){i.paused&&!i.embed.hasPlayed&&i.embed.mute(),i.media.seeking=!0,Lt.call(i,i.media,"seeking"),a.seekTo(d)}}),Object.defineProperty(i.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(d){a.setPlaybackRate(d)}});let{volume:l}=i.config;Object.defineProperty(i.media,"volume",{get:()=>l,set(d){l=d,a.setVolume(100*l),Lt.call(i,i.media,"volumechange")}});let{muted:u}=i.config;Object.defineProperty(i.media,"muted",{get:()=>u,set(d){const h=K.boolean(d)?d:u;u=h,a[h?"mute":"unMute"](),a.setVolume(100*l),Lt.call(i,i.media,"volumechange")}}),Object.defineProperty(i.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(i.media,"ended",{get:()=>i.currentTime===i.duration});const c=a.getAvailablePlaybackRates();i.options.speed=c.filter(d=>i.config.speed.options.includes(d)),i.supported.ui&&e.customControls&&i.media.setAttribute("tabindex",-1),Lt.call(i,i.media,"timeupdate"),Lt.call(i,i.media,"durationchange"),clearInterval(i.timers.buffering),i.timers.buffering=setInterval(()=>{i.media.buffered=a.getVideoLoadedFraction(),(i.media.lastBuffered===null||i.media.lastBuffered<i.media.buffered)&&Lt.call(i,i.media,"progress"),i.media.lastBuffered=i.media.buffered,i.media.buffered===1&&(clearInterval(i.timers.buffering),Lt.call(i,i.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>fi.build.call(i),50)},onStateChange(o){const a=o.target;switch(clearInterval(i.timers.playing),i.media.seeking&&[1,2].includes(o.data)&&(i.media.seeking=!1,Lt.call(i,i.media,"seeked")),o.data){case-1:Lt.call(i,i.media,"timeupdate"),i.media.buffered=a.getVideoLoadedFraction(),Lt.call(i,i.media,"progress");break;case 0:Dl.call(i,!1),i.media.loop?(a.stopVideo(),a.playVideo()):Lt.call(i,i.media,"ended");break;case 1:e.customControls&&!i.config.autoplay&&i.media.paused&&!i.embed.hasPlayed?i.media.pause():(Dl.call(i,!0),Lt.call(i,i.media,"playing"),i.timers.playing=setInterval(()=>{Lt.call(i,i.media,"timeupdate")},50),i.media.duration!==a.getDuration()&&(i.media.duration=a.getDuration(),Lt.call(i,i.media,"durationchange")));break;case 2:i.muted||i.embed.unMute(),Dl.call(i,!1);break;case 3:Lt.call(i,i.media,"waiting")}Lt.call(i,i.elements.container,"statechange",!1,{code:o.data})}}})}},qy={setup(){this.media?(ci(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ci(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ci(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=At("div",{class:this.config.classNames.video}),ky(this.media,this.elements.wrapper),this.elements.poster=At("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Zr.setup.call(this):this.isYouTube?Vu.setup.call(this):this.isVimeo&&Gf.setup.call(this)):this.debug.warn("No media element found!")}};class yM{constructor(e){tt(this,"load",()=>{this.enabled&&(K.object(window.google)&&K.object(window.google.ima)?this.ready():xm(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),tt(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),tt(this,"setupIMA",()=>{this.elements.container=At("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),tt(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(n){this.onAdError(n)}}),tt(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const n=Ud(Math.max(this.manager.getRemainingTime(),0)),s=`${Zi.get("advertisement",this.player.config)} - ${n}`;this.elements.container.setAttribute("data-badge-text",s)},100)}),tt(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=t.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s)),Object.keys(google.ima.AdEvent.Type).forEach(s=>{this.manager.addEventListener(google.ima.AdEvent.Type[s],r=>this.onAdEvent(r))}),this.trigger("loaded")}),tt(this,"addCuePoints",()=>{K.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const n=this.player.elements.progress;if(K.element(n)){const s=100/this.player.duration*t,r=At("span",{class:this.player.config.classNames.cues});r.style.left=`${s.toString()}%`,n.appendChild(r)}}})}),tt(this,"onAdEvent",t=>{const{container:n}=this.player.elements,s=t.getAd(),r=t.getAdData();switch((o=>{Lt.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),s.isLinear()||(s.width=n.offsetWidth,s.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn(`Non-fatal ad error: ${r.adError.getMessage()}`)}}),tt(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),tt(this,"listeners",()=>{const{container:t}=this.player.elements;let n;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{n=this.player.currentTime}),this.player.on("seeked",()=>{const s=this.player.currentTime;K.empty(this.cuePoints)||this.cuePoints.forEach((r,o)=>{n<r&&r<s&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),tt(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(n){this.onAdError(n)}}).catch(()=>{})}),tt(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,$s(this.player.media.play())}),tt(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),tt(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),tt(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),tt(this,"trigger",(t,...n)=>{const s=this.events[t];K.array(s)&&s.forEach(r=>{K.function(r)&&r.apply(this,n)})}),tt(this,"on",(t,n)=>(K.array(this.events[t])||(this.events[t]=[]),this.events[t].push(n),this)),tt(this,"startSafetyTimer",(t,n)=>{this.player.debug.log(`Safety timer invoked from: ${n}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),tt(this,"clearSafetyTimer",t=>{K.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,n)=>{this.on("loaded",t),this.on("error",n)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!K.empty(e.publisherId)||K.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return K.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Wy({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function Xy(i=0,e=0,t=255){return Math.min(Math.max(i,e),t)}const bM=i=>{const e=[];return i.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const n={};t.split(/\r\n|\n|\r/).forEach(s=>{if(K.number(n.startTime)){if(!K.empty(s.trim())&&K.empty(n.text)){const r=s.trim().split("#xywh=");[n.text]=r,r[1]&&([n.x,n.y,n.w,n.h]=r[1].split(","))}}else{const r=s.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);r&&(n.startTime=60*Number(r[1]||0)*60+60*Number(r[2])+Number(r[3])+ +`0.${r[4]}`,n.endTime=60*Number(r[6]||0)*60+60*Number(r[7])+Number(r[8])+ +`0.${r[9]}`)}}),n.text&&e.push(n)}),e},Kg=(i,e)=>{const t={};return i>e.width/e.height?(t.width=e.width,t.height=1/i*e.width):(t.height=e.height,t.width=i*e.height),t};class Wf{constructor(e){tt(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),tt(this,"getThumbnails",()=>new Promise(t=>{const{src:n}=this.player.config.previewThumbnails;if(K.empty(n))throw new Error("Missing previewThumbnails.src config attribute");const s=()=>{this.thumbnails.sort((r,o)=>r.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(K.function(n))n(r=>{this.thumbnails=r,s()});else{const r=(K.string(n)?[n]:n).map(o=>this.getThumbnail(o));Promise.all(r).then(s)}})),tt(this,"getThumbnail",t=>new Promise(n=>{Lc(t).then(s=>{const r={frames:bM(s),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{r.height=o.naturalHeight,r.width=o.naturalWidth,this.thumbnails.push(r),n()},o.src=r.urlPrefix+r.frames[0].text})})),tt(this,"startMove",t=>{if(this.loaded&&K.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var n,s;const r=this.player.elements.progress.getBoundingClientRect(),o=100/r.width*(t.pageX-r.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=Ud(this.seekTime);const a=(n=this.player.config.markers)===null||n===void 0||(s=n.points)===null||s===void 0?void 0:s.find(({time:l})=>l===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),tt(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),tt(this,"startScrubbing",t=>{(K.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),tt(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Em.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),tt(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),tt(this,"render",()=>{this.elements.thumb.container=At("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=At("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=At("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=At("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),K.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=At("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),tt(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),tt(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(r=>this.seekTime>=r.startTime&&this.seekTime<=r.endTime),n=t>=0;let s=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((r,o)=>{this.loadedImages.includes(r.frames[t].text)&&(s=o)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(s)))}),tt(this,"loadImage",(t=0)=>{const n=this.showingThumb,s=this.thumbnails[t],{urlPrefix:r}=s,o=s.frames[n],a=s.frames[n].text,l=r+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,t,n,a,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=l,u.dataset.index=n,u.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${l}`),u.onload=()=>this.showImage(u,o,t,n,a,!0),this.loadingImage=u,this.removeOldImages(u)}}),tt(this,"showImage",(t,n,s,r,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${r}. qual: ${s}. newimg: ${a}`),this.setImageSizeAndOffset(t,n),a&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(r,!0).then(this.preloadNearby(r,!1)).then(this.getHigherQuality(s,t,n,o))}),tt(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(n=>{if(n.tagName.toLowerCase()!=="img")return;const s=this.usingSprites?500:1e3;if(n.dataset.index!==t.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;const{currentImageContainer:r}=this;setTimeout(()=>{r.removeChild(n),this.player.debug.log(`Removing thumb: ${n.dataset.filename}`)},s)}})}),tt(this,"preloadNearby",(t,n=!0)=>new Promise(s=>{setTimeout(()=>{const r=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===r){let o;o=n?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let a=!1;o.forEach(l=>{const u=l.text;if(u!==r&&!this.loadedImages.includes(u)){a=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:c}=this.thumbnails[0],d=c+u,h=new Image;h.src=d,h.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),s()}}}),a||s()}},300)})),tt(this,"getHigherQuality",(t,n,s,r)=>{if(t<this.thumbnails.length-1){let o=n.naturalHeight;this.usingSprites&&(o=s.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===r&&(this.player.debug.log(`Showing higher quality thumb for: ${r}`),this.loadImage(t+1))},300)}}),tt(this,"toggleThumbContainer",(t=!1,n=!1)=>{const s=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(s,t),!t&&n&&(this.showingThumb=null,this.showingThumbFilename=null)}),tt(this,"toggleScrubbingContainer",(t=!1)=>{const n=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(n,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),tt(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),tt(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const n=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${n}px`}else if(t.clientHeight<20&&t.clientWidth>20){const n=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${n}px`}}else{const n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${n}px`}this.setThumbContainerPos()}),tt(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),n=this.player.elements.container.getBoundingClientRect(),{container:s}=this.elements.thumb,r=n.left-t.left+10,o=n.right-t.left-s.clientWidth-10,a=this.mousePosX-t.left-s.clientWidth/2,l=Xy(a,r,o);s.style.left=`${l}px`,s.style.setProperty("--preview-arrow-offset",a-l+"px")}),tt(this,"setScrubbingContainerSize",()=>{const{width:t,height:n}=Kg(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${n}px`}),tt(this,"setImageSizeAndOffset",(t,n)=>{if(!this.usingSprites)return;const s=this.thumbContainerHeight/n.h;t.style.height=t.naturalHeight*s+"px",t.style.width=t.naturalWidth*s+"px",t.style.left=`-${n.x*s}px`,t.style.top=`-${n.y*s}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=Kg(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const jf={insertElements(i,e){K.string(e)?jg(i,this.media,{src:e}):K.array(e)&&e.forEach(t=>{jg(i,this.media,t)})},change(i){Ny(i,"sources.length")?(Zr.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],wr(this.media),this.media=null,K.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:t}=i,[{provider:n=qr.html5,src:s}]=e,r=n==="html5"?t:"div",o=n==="html5"?{}:{src:s};Object.assign(this,{provider:n,type:t,supported:Ni.check(t,n,this.config.playsinline),media:At(r,o)}),this.elements.container.appendChild(this.media),K.boolean(i.autoplay)&&(this.config.autoplay=i.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),K.empty(i.poster)||(this.poster=i.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),fi.addStyleHook.call(this),this.isHTML5&&jf.insertElements.call(this,"source",e),this.config.title=i.title,qy.setup.call(this),this.isHTML5&&Object.keys(i).includes("tracks")&&jf.insertElements.call(this,"track",i.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&fi.build.call(this),this.isHTML5&&this.media.load(),K.empty(i.previewThumbnails)||(Object.assign(this.config.previewThumbnails,i.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Wf(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class gc{constructor(e,t){if(tt(this,"play",()=>K.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>$s(this.media.play())),this.media.play()):null),tt(this,"pause",()=>this.playing&&K.function(this.media.pause)?this.media.pause():null),tt(this,"togglePlay",a=>(K.boolean(a)?a:!this.playing)?this.play():this.pause()),tt(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):K.function(this.media.stop)&&this.media.stop()}),tt(this,"restart",()=>{this.currentTime=0}),tt(this,"rewind",a=>{this.currentTime-=K.number(a)?a:this.config.seekTime}),tt(this,"forward",a=>{this.currentTime+=K.number(a)?a:this.config.seekTime}),tt(this,"increaseVolume",a=>{const l=this.media.muted?0:this.volume;this.volume=l+(K.number(a)?a:0)}),tt(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),tt(this,"airplay",()=>{Ni.airplay&&this.media.webkitShowPlaybackTargetPicker()}),tt(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const l=ld(this.elements.container,this.config.classNames.hideControls),u=a===void 0?void 0:!a,c=ci(this.elements.container,this.config.classNames.hideControls,u);if(c&&K.array(this.config.controls)&&this.config.controls.includes("settings")&&!K.empty(this.config.settings)&&Ze.toggleMenu.call(this,!1),c!==l){const d=c?"controlshidden":"controlsshown";Lt.call(this,this.media,d)}return!c}return!1}),tt(this,"on",(a,l)=>{Jt.call(this,this.elements.container,a,l)}),tt(this,"once",(a,l)=>{Em.call(this,this.elements.container,a,l)}),tt(this,"off",(a,l)=>{Fd(this.elements.container,a,l)}),tt(this,"destroy",(a,l=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(wr(this.elements.buttons.play),wr(this.elements.captions),wr(this.elements.controls),wr(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),K.function(a)&&a()):(QT.call(this),Zr.cancelRequests.call(this),ad(this.elements.original,this.elements.container),Lt.call(this,this.elements.original,"destroyed",!0),K.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(fi.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&K.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),tt(this,"supports",a=>Ni.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Ni.touch,this.media=e,K.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||K.nodeList(this.media)||K.array(this.media))&&(this.media=this.media[0]),this.config=Oi({},jy,gc.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new uM(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Ni),K.nullOrUndefined(this.media)||!K.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Ni.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const s=this.media.tagName.toLowerCase();let r=null,o=null;switch(s){case"div":if(r=this.media.querySelector("iframe"),K.element(r)){if(o=Gy(r.getAttribute("src")),this.provider=cM(o.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(K.empty(this.provider)||!Object.values(qr).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Dh.video;break;case"video":case"audio":this.type=s,this.provider=qr.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Ni.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new dM(this),this.storage=new mc(this),this.media.plyr=this,K.element(this.elements.container)||(this.elements.container=At("div"),ky(this.media,this.elements.container)),fi.migrateStyles.call(this),fi.addStyleHook.call(this),qy.setup.call(this),this.config.debug&&Jt.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log(`event: ${a.type}`)}),this.fullscreen=new xs(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&fi.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new yM(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>$s(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Wf(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===qr.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===qr.youtube}get isVimeo(){return this.provider===qr.vimeo}get isVideo(){return this.type===Dh.video}get isAudio(){return this.type===Dh.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const t=K.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return K.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=K.number(t)&&t!==1/0?t:0;return e||n}set volume(e){let t=e;K.string(t)&&(t=Number(t)),K.number(t)||(t=this.storage.get("volume")),K.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!K.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;K.boolean(t)||(t=this.storage.get("muted")),K.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;K.number(e)&&(t=e),K.number(t)||(t=this.storage.get("speed")),K.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:s}=this;t=Xy(t,n,s),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let s=[!K.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(K.number),r=!0;if(!n.includes(s)){const o=Fy(n,s);this.debug.warn(`Unsupported quality option: ${s}, using ${o} instead`),s=o,r=!1}t.selected=s,this.media.quality=s,r&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(e){const t=K.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(e){jf.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return K.url(e)?e:this.source}set download(e){K.url(e)&&(this.config.urls.download=e,Ze.setDownloadUrl.call(this))}set poster(e){this.isVideo?fi.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=cd(wm.call(this));return K.array(e)?e.join(":"):e}set ratio(e){this.isVideo?K.string(e)&&zy(e)?(this.config.ratio=cd(e),$a.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=K.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){ni.toggle.call(this,e,!1)}set currentTrack(e){ni.set.call(this,e,!1),ni.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){ni.setLanguage.call(this,e,!1)}get language(){return(ni.getCurrentTrack.call(this)||{}).language}set pip(e){if(!Ni.pip)return;const t=K.boolean(e)?e:!this.pip;K.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Ih.active:Ih.inactive),K.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return Ni.pip?K.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ih.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Wf(this))}static supported(e,t){return Ni.check(e,t)}static loadSprite(e,t){return Vy(e,t)}static setup(e,t={}){let n=null;return K.string(e)?n=Array.from(document.querySelectorAll(e)):K.nodeList(e)?n=Array.from(e):K.array(e)&&(n=e.filter(K.element)),K.empty(n)?null:n.map(s=>new gc(s,t))}}gc.defaults=XT(jy);const _M=document.querySelectorAll(".js-player");let Nh;_M.length>0&&(Nh=gc.setup(".js-player",{}),Nh.forEach((i,e)=>{i.on("play",()=>{Nh.forEach((t,n)=>{n!==e&&t.pause()})})}));const Qe=(i,e=1e4)=>(i=parseFloat(i+"")||0,Math.round((i+Number.EPSILON)*e)/e),qf=function(i){if(!(i&&i instanceof Element&&i.offsetParent))return!1;const e=i.scrollHeight>i.clientHeight,t=window.getComputedStyle(i).overflowY,n=t.indexOf("hidden")!==-1,s=t.indexOf("visible")!==-1;return e&&!n&&!s},ud=function(i,e=void 0){return!(!i||i===document.body||e&&i===e)&&(qf(i)?i:ud(i.parentElement,e))},Gs=function(i){var e=new DOMParser().parseFromString(i,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},Sm=i=>`${i||""}`.split(" ").filter(e=>!!e),Ws=(i,e,t)=>{i&&Sm(e).forEach(n=>{i.classList.toggle(n,t||!1)})};let ra=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}};const oa={passive:!1};let EM=class{constructor(e,{start:t=()=>!0,move:n=()=>{},end:s=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=n,this.endCallback=s;for(const r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,oa),this.element.addEventListener("touchstart",this.onTouchStart,oa),this.element.addEventListener("touchmove",this.onMove,oa),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const t=new ra(e);this.currentPointers.some(n=>n.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new ra(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const t=this.currentPointers.slice(),n="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new ra(r)):[new ra(e)],s=[];for(const r of n){const o=this.currentPointers.findIndex(a=>a.id===r.id);o<0||(s.push(r),this.currentPointers[o]=r)}s.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new ra(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new ra(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){const n=this.currentPointers.findIndex(s=>s.id===t.id);n<0||(this.currentPointers.splice(n,1),this.startPointers.splice(n,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,oa),this.element.removeEventListener("touchstart",this.onTouchStart,oa),this.element.removeEventListener("touchmove",this.onMove,oa),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function Zg(i,e){return e?Math.sqrt(Math.pow(e.clientX-i.clientX,2)+Math.pow(e.clientY-i.clientY,2)):0}function Qg(i,e){return e?{clientX:(i.clientX+e.clientX)/2,clientY:(i.clientY+e.clientY)/2}:i}const Xf=i=>typeof i=="object"&&i!==null&&i.constructor===Object&&Object.prototype.toString.call(i)==="[object Object]",Cn=(i,...e)=>{const t=e.length;for(let n=0;n<t;n++){const s=e[n]||{};Object.entries(s).forEach(([r,o])=>{const a=Array.isArray(o)?[]:{};i[r]||Object.assign(i,{[r]:a}),Xf(o)?Object.assign(i[r],Cn(a,o)):Array.isArray(o)?Object.assign(i,{[r]:[...o]}):Object.assign(i,{[r]:o})})}return i},kh=function(i,e){return i.split(".").reduce((t,n)=>typeof t=="object"?t[n]:void 0,e)};let dd=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?Cn({},this.constructor.defaults,e):{};for(const[t,n]of Object.entries(this.option("on")||{}))this.on(t,n)}option(e,...t){let n=kh(e,this.options);return n&&typeof n=="function"&&(n=n.call(this,this,...t)),n}optionFor(e,t,n,...s){let r=kh(t,e);var o;typeof(o=r)!="string"||isNaN(o)||isNaN(parseFloat(o))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...s));let a=kh(t,this.options);return a&&typeof a=="function"?r=a.call(this,this,e,...s,r):r===void 0&&(r=a),r===void 0?n:r}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(n,s,r)=>{let o="";return r?o=this.option(`${s[0]+s.toLowerCase().substring(1)}.l10n.${r}`):s&&(o=this.option(`l10n.${s}`)),o||(o=n),o});for(let n=0;n<t.length;n++)e=e.split(t[n][0]).join(t[n][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(n,s)=>s)}on(e,t){let n=[];typeof e=="string"?n=e.split(" "):Array.isArray(e)&&(n=e),this.events||(this.events=new Map),n.forEach(s=>{let r=this.events.get(s);r||(this.events.set(s,[]),r=[]),r.includes(t)||r.push(t),this.events.set(s,r)})}off(e,t){let n=[];typeof e=="string"?n=e.split(" "):Array.isArray(e)&&(n=e),n.forEach(s=>{const r=this.events.get(s);if(Array.isArray(r)){const o=r.indexOf(t);o>-1&&r.splice(o,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(n=>n(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(dd,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(dd,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});let Tm=class extends dd{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const t=new Map;for(const[n,s]of Object.entries(e)){const r=this.option(n),o=this.plugins[n];o||r===!1?o&&r===!1&&(o.detach(),delete this.plugins[n]):t.set(n,new s(this,r||{}))}for(const[n,s]of t)this.plugins[n]=s,s.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const t of e){const n=this.plugins[t];n&&n.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}};var li;(function(i){i[i.Init=0]="Init",i[i.Error=1]="Error",i[i.Ready=2]="Ready",i[i.Panning=3]="Panning",i[i.Mousemove=4]="Mousemove",i[i.Destroy=5]="Destroy"})(li||(li={}));const ur=["a","b","c","d","e","f"],Yy={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},wM={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Yy},Jg='<circle cx="25" cy="25" r="20"></circle>',Mm='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Jg+Jg+"</svg></div>",Mn=i=>i&&i!==null&&i instanceof Element&&"nodeType"in i,oi=(i,e)=>{i&&Sm(e).forEach(t=>{i.classList.remove(t)})},bt=(i,e)=>{i&&Sm(e).forEach(t=>{i.classList.add(t)})},iu={a:1,b:0,c:0,d:1,e:0,f:0},xM=1e5,nu=1e4,es="mousemove",ev="drag",tv="content",ts="auto";let Fh=null,Uh=null,vc=class Ky extends Tm{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Uh===null&&(Uh=window.matchMedia("(hover: none)").matches),Uh}get isMobile(){return Fh===null&&(Fh=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Fh}get panMode(){return this.options.panMode!==es||this.isTouchDevice?ev:es}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e===ts?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){const{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:t}=this,n=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,n)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of ur){const t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},n={}){var s;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:li.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},iu)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},iu)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},Ky.Plugins),n)),this.emit("attachPlugins"),this.emit("init");const r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const o=Gs(Mm);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(o):this.spinner=((s=r.parentElement)===null||s===void 0?void 0:s.insertBefore(o,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,t=this.cn(tv);let n=this.option(tv)||e.querySelector(`.${t}`);if(n||(n=e.querySelector("img,picture")||e.firstElementChild,n&&bt(n,t)),n instanceof HTMLPictureElement&&(n=n.querySelector("img")),!n)throw new Error("No content found");this.content=n}onLoad(){const{spinner:e,container:t,state:n}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),n===li.Init?this.enable():this.updateMetrics()}onError(){this.state!==li.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=li.Error,this.emit("error"))}getNextScale(e){const{fullScale:t,targetScale:n,coverScale:s,maxScale:r,minScale:o}=this;let a=o;switch(e){case"toggleMax":a=n-o<.5*(r-o)?r:o;break;case"toggleCover":a=n-o<.5*(s-o)?s:o;break;case"toggleZoom":a=n-o<.5*(t-o)?t:o;break;case"iterateZoom":let l=[1,t,r].sort((c,d)=>c-d),u=l.findIndex(c=>c>n+1e-5);a=l[u]||1}return a}attachObserver(){var e;const t=()=>{const{container:n,containerRect:s}=this;return Math.abs(s.width-n.getBoundingClientRect().width)>.1||Math.abs(s.height-n.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new EM(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(es,this.onMouseMove)}detachEvents(){var e;const{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(es,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,t=this.option("maxVelocity");for(const n of ur)e?(this.velocity[n]*=1-e,t&&!this.isScaling&&(this.velocity[n]=Math.max(Math.min(this.velocity[n],t),-1*t)),this.current[n]+=this.velocity[n]):this.current[n]=this.target[n];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of ur)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){const{current:n}=this,s=n.e+e,r=n.f+t,o=this.getBounds(),{x:a,y:l}=o,u=a.min,c=a.max,d=l.min,h=l.max;let f=0,m=0;return u!==1/0&&s<u?f=u-s:c!==1/0&&s>c&&(f=c-s),d!==1/0&&r<d?m=d-r:h!==1/0&&r>h&&(m=h-r),Math.abs(f)<1e-4&&(f=0),Math.abs(m)<1e-4&&(m=0),Object.assign(Object.assign({},o),{xDiff:f,yDiff:m,inBounds:!f&&!m})}clampTargetBounds(){const{target:e}=this,{x:t,y:n}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),n.min!==1/0&&(e.f=Math.max(e.f,n.min)),n.max!==1/0&&(e.f=Math.min(e.f,n.max))}calculateContentDim(e=this.current){const{content:t,contentRect:n}=this,{fitWidth:s,fitHeight:r,fullWidth:o,fullHeight:a}=n;let l=o,u=a;if(this.option("zoom")||this.angle!==0){const c=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),d=c?o:s,h=c?a:r,f=this.getMatrix(e),m=new DOMPoint(0,0).matrixTransform(f),b=new DOMPoint(0+d,0).matrixTransform(f),v=new DOMPoint(0+d,0+h).matrixTransform(f),g=new DOMPoint(0,0+h).matrixTransform(f),E=Math.abs(v.x-m.x),w=Math.abs(v.y-m.y),S=Math.abs(g.x-b.x),I=Math.abs(g.y-b.y);l=Math.max(E,S),u=Math.max(w,I)}return{contentWidth:l,contentHeight:u}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===es||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:t,y:n,xDiff:s,yDiff:r}=this.checkBounds(),o=this.option("maxVelocity");let a=this.velocity.e,l=this.velocity.f;s!==0?(this.isBouncingX=!0,s*a<=0?a+=.14*s:(a=.14*s,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*l<=0?l+=.14*r:(l=.14*r,n.min!==1/0&&(this.target.f=Math.max(e.f,n.min)),n.max!==1/0&&(this.target.f=Math.min(e.f,n.max))),o&&(l=Math.max(Math.min(l,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){const{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const n of ur)this.current[n]=this.target[n]=t[n];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=li.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());const n=e.target;if(!n||e.defaultPrevented)return;if(n.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const f=window.getSelection();return f&&f.type==="Range"})()&&!n.closest("button"))return;const s=n.closest("[data-panzoom-action]"),r=n.closest("[data-panzoom-change]"),o=s||r,a=o&&Mn(o)?o.dataset:null;if(a){const f=a.panzoomChange,m=a.panzoomAction;if((f||m)&&e.preventDefault(),f){let b={};try{b=JSON.parse(f)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(b)}if(m)return void(this[m]&&this[m]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(n.closest("[data-fancybox]"))return;const l=this.content.getBoundingClientRect(),u=this.dragStart;if(u.time&&!this.canZoomOut()&&(Math.abs(l.x-u.x)>2||Math.abs(l.y-u.y)>2))return;this.dragStart.time=0;const c=f=>{this.option("zoom",e)&&f&&typeof f=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(f)&&typeof this[f]=="function"&&(e.preventDefault(),this[f]({event:e}))},d=this.option("click",e),h=this.option("dblClick",e);h?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&d&&c(d)):(this.emit("dblClick",e),e.defaultPrevented||c(h)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&d&&c(d))}addTrackingPoint(e){const t=this.trackingPoints.filter(n=>n.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,n){var s;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===es&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const o=e.composedPath()[0];if(!n.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(s=window.getSelection())===null||s===void 0||s.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(o.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,n){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&Qe(this.targetScale)<=Qe(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);const{content:s}=this,r=Qg(n[0],n[1]),o=Qg(t[0],t[1]);let a=0,l=0;if(t.length>1){const w=s.getBoundingClientRect();a=r.clientX-w.left-.5*w.width,l=r.clientY-w.top-.5*w.height}const u=Zg(n[0],n[1]),c=Zg(t[0],t[1]);let d=u?c/u:1,h=o.clientX-r.clientX,f=o.clientY-r.clientY;this.dragOffset.x+=h,this.dragOffset.y+=f,this.dragOffset.time=Date.now()-this.dragStart.time;let m=Qe(this.targetScale)===Qe(this.minScale)&&this.option("lockAxis");if(m&&!this.lockedAxis)if(m==="xy"||m==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const w=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=w>45&&w<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,h=0,f=0}else this.lockedAxis=m;if(ud(e.target,this.content)&&(m="x",this.dragOffset.y=0),m&&m!=="xy"&&this.lockedAxis!==m&&Qe(this.targetScale)===Qe(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const b=this.checkBounds(h,f);this.option("rubberband")?(this.isInfinite!=="x"&&(b.xDiff>0&&h<0||b.xDiff<0&&h>0)&&(h*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*b.xDiff))),this.isInfinite!=="y"&&(b.yDiff>0&&f<0||b.yDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*b.yDiff)))):(b.xDiff&&(h=0),b.yDiff&&(f=0));const v=this.targetScale,g=this.minScale,E=this.maxScale;v<.5*g&&(d=Math.max(d,g)),v>1.5*E&&(d=Math.min(d,E)),this.lockedAxis==="y"&&Qe(v)===Qe(g)&&(h=0),this.lockedAxis==="x"&&Qe(v)===Qe(g)&&(f=0),this.applyChange({originX:a,originY:l,panX:h,panY:f,scale:d,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,n){if(n.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),ud(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==li.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const w of ur)this.velocity[w]=0;this.target.e=this.current.e,this.target.f=this.current.f,oi(this.container,"is-scaling"),oi(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:n}=this,s=n[0],r=n[n.length-1];let o=0,a=0,l=0;r&&s&&(o=r.clientX-s.clientX,a=r.clientY-s.clientY,l=r.time-s.time);const u=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;u!==1&&(o*=u,a*=u);let c=0,d=0,h=0,f=0,m=this.option("decelFriction");const b=this.targetScale;if(l>0){h=Math.abs(o)>3?o/(l/30):0,f=Math.abs(a)>3?a/(l/30):0;const w=this.option("maxVelocity");w&&(h=Math.max(Math.min(h,w),-1*w),f=Math.max(Math.min(f,w),-1*w))}h&&(c=h/(1/(1-m)-1)),f&&(d=f/(1/(1-m)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&Qe(b)===this.minScale)&&(c=h=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&Qe(b)===this.minScale)&&(d=f=0);const v=this.dragOffset.x,g=this.dragOffset.y,E=this.option("dragMinThreshold")||0;Math.abs(v)<E&&Math.abs(g)<E&&(c=d=0,h=f=0),(this.option("zoom")&&(b<this.minScale-1e-5||b>this.maxScale+1e-5)||t&&!c&&!d)&&(m=.35),this.applyChange({panX:c,panY:d,friction:m}),this.emit("decel",h,f,v,g)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,o){return Math.abs(o)>Math.abs(r)?o:r});const n=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,n),this.panMode===es||e.defaultPrevented)return;const s=this.option("wheel");s==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):s==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:t,content:n,contentRect:s}=this,r=Object.assign({},iu);for(const v of ur){const g=v=="e"||v==="f"?nu:xM;r[v]=Qe(e[v],g),Math.abs(t[v]-e[v])<(v=="e"||v==="f"?.51:.001)&&(e[v]=t[v])}let{a:o,b:a,c:l,d:u,e:c,f:d}=r,h=`matrix(${o}, ${a}, ${l}, ${u}, ${c}, ${d})`,f=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===h)return;f.style.transform=h;const{contentWidth:m,contentHeight:b}=this.calculateContentDim();s.width=m,s.height=b,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===li.Destroy||this.isContentLoading)return;const n=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:s,content:r}=this,o=r instanceof HTMLImageElement,a=s.getBoundingClientRect(),l=getComputedStyle(this.container);let u=a.width*n,c=a.height*n;const d=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),h=u-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),f=c-d;this.containerRect={width:u,height:c,innerWidth:h,innerHeight:f};const m=parseFloat(r.dataset.width||"")||(P=>{let F=0;return F=P instanceof HTMLImageElement?P.naturalWidth:P instanceof SVGElement?P.width.baseVal.value:Math.max(P.offsetWidth,P.scrollWidth),F||0})(r),b=parseFloat(r.dataset.height||"")||(P=>{let F=0;return F=P instanceof HTMLImageElement?P.naturalHeight:P instanceof SVGElement?P.height.baseVal.value:Math.max(P.offsetHeight,P.scrollHeight),F||0})(r);let v=this.option("width",m)||ts,g=this.option("height",b)||ts;const E=v===ts,w=g===ts;typeof v!="number"&&(v=m),typeof g!="number"&&(g=b),E&&(v=m*(g/b)),w&&(g=b/(m/v));let S=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(S=S.parentElement||S);const I=S.getAttribute("style")||"";S.style.setProperty("transform","none","important"),o&&(S.style.width="",S.style.height=""),S.offsetHeight;const D=r.getBoundingClientRect();let y=D.width*n,B=D.height*n,V=y,C=B;y=Math.min(y,v),B=Math.min(B,g),o?{width:y,height:B}=((P,F,Y,Q)=>{const G=Y/P,z=Q/F,ue=Math.min(G,z);return{width:P*=ue,height:F*=ue}})(v,g,y,B):(y=Math.min(y,v),B=Math.min(B,g));let A=.5*(C-B),H=.5*(V-y);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:D.top-a.top+A,bottom:a.bottom-D.bottom+A,left:D.left-a.left+H,right:a.right-D.right+H,fitWidth:y,fitHeight:B,width:y,height:B,fullWidth:v,fullHeight:g}),S.style.cssText=I,o&&(S.style.width=`${y}px`,S.style.height=`${B}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(Qe(this.targetScale)<Qe(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===li.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:n,lockedAxis:s}=this,{fitWidth:r,fitHeight:o}=this.contentRect;let a=0,l=0,u=0,c=0;const d=this.option("infinite");if(d===!0||s&&d===s)a=-1/0,u=1/0,l=-1/0,c=1/0;else{let{containerRect:h,contentRect:f}=this,m=Qe(r*n,nu),b=Qe(o*n,nu),{innerWidth:v,innerHeight:g}=h;if(h.width===m&&(v=h.width),h.width===b&&(g=h.height),e>v){u=.5*(e-v),a=-1*u;let E=.5*(f.right-f.left);a+=E,u+=E}if(r>v&&e<v&&(a-=.5*(r-v),u-=.5*(r-v)),t>g){c=.5*(t-g),l=-1*c;let E=.5*(f.bottom-f.top);l+=E,c+=E}o>g&&t<g&&(a-=.5*(o-g),u-=.5*(o-g))}return{x:{min:a,max:u},y:{min:l,max:c}}}getBounds(){const e=this.option("bounds");return e!==ts?e:this.calculateBounds()}updateControls(){const e=this,t=e.container,{panMode:n,contentRect:s,targetScale:r,minScale:o}=e;let a=o,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let u=e.canZoomIn(),c=e.canZoomOut(),d=n===ev&&!!this.option("touch"),h=c&&d;if(d&&(Qe(r)<Qe(o)&&!this.panOnlyZoomed&&(h=!0),(Qe(s.width,1)>Qe(s.fitWidth,1)||Qe(s.height,1)>Qe(s.fitHeight,1))&&(h=!0)),Qe(s.width*r,1)<Qe(s.fitWidth,1)&&(h=!1),n===es&&(h=!1),Ws(t,this.cn("isDraggable"),h),!this.option("zoom"))return;let f=u&&Qe(a)>Qe(r),m=!f&&!h&&c&&Qe(a)<Qe(r);Ws(t,this.cn("canZoomIn"),f),Ws(t,this.cn("canZoomOut"),m);for(const b of t.querySelectorAll("[data-panzoom-action]")){let v=!1,g=!1;switch(b.dataset.panzoomAction){case"zoomIn":u?v=!0:g=!0;break;case"zoomOut":c?v=!0:g=!0;break;case"toggleZoom":case"iterateZoom":u||c?v=!0:g=!0;const E=b.querySelector("g");E&&(E.style.display=u?"":"none")}v?(b.removeAttribute("disabled"),b.removeAttribute("tabindex")):g&&(b.setAttribute("disabled",""),b.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:n=this.targetScale,friction:s=this.option("friction"),angle:r=0,originX:o=0,originY:a=0,flipX:l=!1,flipY:u=!1,ignoreBounds:c=!1}){this.state!==li.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:n/this.targetScale,angle:r,originX:o,originY:a,friction:s,flipX:l,flipY:u,ignoreBounds:c})}applyChange({panX:e=0,panY:t=0,scale:n=1,angle:s=0,originX:r=-this.current.e,originY:o=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:u=!1,ignoreBounds:c=!1,bounce:d=this.option("bounce")}){const h=this.state;if(h===li.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=c;const{current:f}=this,m=f.e,b=f.f,v=this.getMatrix(this.target);let g=new DOMMatrix().translate(m,b).translate(r,o).translate(e,t);if(this.option("zoom")){if(!c){const E=this.targetScale,w=this.minScale,S=this.maxScale;E*n<w&&(n=w/E),E*n>S&&(n=S/E)}g=g.scale(n)}g=g.translate(-r,-o).translate(-m,-b).multiply(v),s&&(g=g.rotate(s)),l&&(g=g.scale(-1,1)),u&&(g=g.scale(1,-1));for(const E of ur)E!=="e"&&E!=="f"&&(g[E]>this.minScale+1e-5||g[E]<this.minScale-1e-5)?this.target[E]=g[E]:this.target[E]=Qe(g[E],nu);(this.targetScale<this.scale||Math.abs(n-1)>.1||this.panMode===es||d===!1)&&!c&&this.clampTargetBounds(),h===li.Init?this.animate():this.isResting||(this.state=li.Panning,this.requestTick())}stop(e=!1){if(this.state===li.Init||this.state===li.Destroy)return;const t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const n of ur)this.velocity[n]=0,e==="current"?this.current[n]=this.target[n]:e==="target"&&(this.target[n]=this.current[n]);this.setTransform(),oi(this.container,"is-scaling"),oi(this.container,"is-animating"),this.isTicking=!1,this.state=li.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),bt(this.container,"is-animating"),this.isScaling&&bt(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==es||!e||Qe(this.targetScale)<=Qe(this.minScale))return;this.emit("mouseMove",e);const{container:n,containerRect:s,contentRect:r}=this,o=s.width,a=s.height,l=n.getBoundingClientRect(),u=(e.clientX||0)-l.left,c=(e.clientY||0)-l.top;let{contentWidth:d,contentHeight:h}=this.calculateContentDim(this.target);const f=this.option("mouseMoveFactor");f>1&&(d!==o&&(d*=f),h!==a&&(h*=f));let m=.5*(d-o)-u/o*100/100*(d-o);m+=.5*(r.right-r.left);let b=.5*(h-a)-c/a*100/100*(h-a);b+=.5*(r.bottom-r.top),this.applyChange({panX:m-this.target.e,panY:b-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===li.Destroy||this.state===li.Init)return;const t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(u,c){return Math.abs(c)>Math.abs(u)?c:u});const s=Math.max(-1,Math.min(1,n)),{targetScale:r,maxScale:o,minScale:a}=this;let l=r*(100+45*s)/100;Qe(l)<Qe(a)&&Qe(r)<=Qe(a)?(this.cwd+=Math.abs(s),l=a):Qe(l)>Qe(o)&&Qe(r)>=Qe(o)?(this.cwd+=Math.abs(s),l=o):(this.cwd=0,l=Math.max(Math.min(l,o),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),Qe(l)!==Qe(r)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(Qe(this.contentRect.width,1)<Qe(this.contentRect.fitWidth,1)||Qe(this.targetScale)<Qe(this.maxScale))}canZoomOut(){return this.option("zoom")&&Qe(this.targetScale)>Qe(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t=ts,originX:n=ts,originY:s=ts,event:r}={}){if(this.isContentLoading||this.state===li.Destroy)return;const{targetScale:o,fullScale:a,maxScale:l,coverScale:u}=this;if(this.stop(),this.panMode===es&&(r=this.pmme||r),r||n===ts||s===ts){const d=this.content.getBoundingClientRect(),h=this.container.getBoundingClientRect(),f=r?r.clientX:h.left+.5*h.width,m=r?r.clientY:h.top+.5*h.height;n=f-d.left-.5*d.width,s=m-d.top-.5*d.height}let c=1;typeof e=="number"?c=e:e==="full"?c=a:e==="cover"?c=u:e==="max"?c=l:e==="fit"?c=1:e==="next"&&(c=this.getNextScale("iterateZoom")),c=c/o||1,t=t===ts?c>1?.15:.25:t,this.applyChange({scale:c,originX:n,originY:s,friction:t}),r&&this.panMode===es&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:t,target:n}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-n.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-n.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:t,target:n}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-n.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-n.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,t=this.cn("inFullscreen"),n=this.cn("htmlHasFullscreen");e.classList.toggle(t);const s=e.classList.contains(t);s?(document.documentElement.classList.add(n),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(n),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:t,b:n,c:s,d:r,e:o,f:a}=e;return new DOMMatrix([t,n,s,r,o,a])}reset(e){if(this.state!==li.Init&&this.state!==li.Destroy){this.stop("current");for(const t of ur)this.target[t]=iu[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=li.Panning,this.requestTick())}}destroy(){this.stop(),this.state=li.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:t}=this,n=this.option("classes")||{};for(const s of Object.values(n))e.classList.remove(s+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(vc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:wM}),Object.defineProperty(vc,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const iv=function(i,e){let t=!0;return(...n)=>{t&&(t=!1,i(...n),setTimeout(()=>{t=!0},e))}},nv=(i,e)=>{let t=[];return i.childNodes.forEach(n=>{n.nodeType!==Node.ELEMENT_NODE||e&&!n.matches(e)||t.push(n)}),t},SM={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var Bi;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Destroy=2]="Destroy"})(Bi||(Bi={}));const zh=i=>{if(typeof i=="string"||i instanceof HTMLElement)i={html:i};else{const e=i.thumb;e!==void 0&&(typeof e=="string"&&(i.thumbSrc=e),e instanceof HTMLImageElement&&(i.thumbEl=e,i.thumbElSrc=e.src,i.thumbSrc=e.src),delete i.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},i)},TM=(i={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},i);let As=class extends dd{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}};const MM={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};let Zy=class extends As{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),bt(e,this.cn("list")),e.setAttribute("role","tablist");const t=this.instance.container;t.appendChild(e),bt(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const t=this.instance.pages.length,n=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<n||t>s)return void this.cleanup();const o=typeof r=="number"&&t>5&&t>=r,a=!this.list||this.isDynamic!==o||this.list.children.length!==t;a&&this.cleanup();const l=this.build();if(Ws(l,this.cn("isDynamic"),!!o),a)for(let d=0;d<t;d++)l.append(this.createItem(d));let u,c=0;for(const d of[...l.children]){const h=c===this.instance.page;h&&(u=d),Ws(d,this.cn("isCurrent"),h),(e=d.children[0])===null||e===void 0||e.setAttribute("aria-selected",h?"true":"false");for(const f of["isBeforePrev","isPrev","isNext","isAfterNext"])oi(d,this.cn(f));c++}if(u=u||l.firstChild,o&&u){const d=u.previousElementSibling,h=d&&d.previousElementSibling;bt(d,this.cn("isPrev")),bt(h,this.cn("isBeforePrev"));const f=u.nextElementSibling,m=f&&f.nextElementSibling;bt(f,this.cn("isNext")),bt(m,this.cn("isAfterNext"))}this.isDynamic=o}createItem(e=0){var t;const n=document.createElement("li");n.setAttribute("role","presentation");const s=Gs(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return n.appendChild(s),(t=n.children[0])===null||t===void 0||t.setAttribute("role","tab"),n}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,oi(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Zy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:MM});const su="disabled",ru="next",sv="prev";let Qy=class extends As{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,t=e.pages.length,n=e.page;if(t<2)return void this.cleanup();this.build();let s=this.prev,r=this.next;s&&r&&(s.removeAttribute(su),r.removeAttribute(su),e.isInfinite||(n<=0&&s.setAttribute(su,""),n>=t-1&&r.setAttribute(su,"")))}addBtn(e){var t;const n=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",n.localize(`{{${e.toUpperCase()}}}`)),bt(s,this.cn("button")+" "+this.cn(e===ru?"isNext":"isPrev"));const r=n.isRTL?e===ru?sv:ru:e;var o;return s.innerHTML=n.localize(this.option(`${r}Tpl`)),s.dataset[`carousel${o=e,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(s),s}build(){const e=this.instance.container,t=this.cn("container");let{container:n,prev:s,next:r}=this;n||(n=e.querySelector("."+t),this.isDom=!!n),n||(n=document.createElement("div"),bt(n,t),e.appendChild(n)),this.container=n,r||(r=n.querySelector("[data-carousel-next]")),r||(r=this.addBtn(ru)),this.next=r,s||(s=n.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(sv)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Qy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});let Jy=class extends As{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===Bi.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===Bi.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,n){this.onNavTouch(e,e.panzoom,n)}onNavTouch(e,t,n){var s,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;const o=n.target,{nav:a,target:l}=this;if(!a||!l||!o)return;const u=o.closest("[data-index]");if(n.stopPropagation(),n.preventDefault(),!u)return;const c=parseInt(u.dataset.index||"",10)||0,d=l.getPageForSlide(c),h=a.getPageForSlide(c);a.slideTo(h),l.slideTo(d,{friction:((r=(s=this.nav)===null||s===void 0?void 0:s.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;const{target:n,nav:s}=this;if(!n||!s||s.state!==Bi.Ready||n.state!==Bi.Ready)return;const r=(t=(e=n.pages[n.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,o=s.getPageForSlide(r);this.markSelectedSlide(r),s.slideTo(o,s.prevPage===null&&n.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const t=this.nav;t&&t.state===Bi.Ready&&(this.selectedIndex=e,[...t.slides].map(n=>{n.el&&n.el.classList[n.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let t=e.options.target,n=e.options.nav;t?e.addAsNavFor(t):n&&e.addAsTargetFor(n)}detach(){const e=this,t=e.nav,n=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,n&&(n.off("ready",e.onTargetReady),n.off("refresh",e.onTargetChange),n.off("change",e.onTargetChange)),e.target=null}};Object.defineProperty(Jy,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const CM={Navigation:Qy,Dots:Zy,Sync:Jy},ou="animationend",rv="isSelected",au="slide";let $u=class Yf extends Tm{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Bi.Ready}get isInfinite(){let e=!1;const{contentDim:t,viewportDim:n,pages:s,slides:r}=this,o=r[0];return s.length>=2&&o&&t+o.dim>=n&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},n={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Bi.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Mn(e))throw new Error("No Element found");this.container=e,this.slideNext=iv(this.slideNext.bind(this),150),this.slidePrev=iv(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=n,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;const n=Cn({},Yf.defaults,this.userOptions);let s="";const r=n.breakpoints;if(r&&Xf(r))for(const[o,a]of Object.entries(r))window.matchMedia(o).matches&&Xf(a)&&(s+=o,Cn(n,a));s===this.bp&&this.state!==Bi.Init||(this.bp=s,this.state===Bi.Ready&&(n.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==Bi.Init&&this.destroy(),super.setOptions(n),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Bi.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Yf.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Bi.Ready,this.emit("ready")}initLayout(){const{container:e}=this,t=this.option("classes");bt(e,this.cn("container")),Ws(e,t.isLTR,!this.isRTL),Ws(e,t.isRTL,this.isRTL),Ws(e,t.isVertical,!this.isHorizontal),Ws(e,t.isHorizontal,this.isHorizontal);let n=this.option("viewport")||e.querySelector(`.${t.viewport}`);n||(n=document.createElement("div"),bt(n,t.viewport),n.append(...nv(e,`.${t.slide}`)),e.prepend(n)),n.addEventListener("scroll",this.onScroll);let s=this.option("track")||e.querySelector(`.${t.track}`);s||(s=document.createElement("div"),bt(s,t.track),s.append(...Array.from(n.childNodes))),s.setAttribute("aria-live","polite"),n.contains(s)||n.prepend(s),this.viewport=n,this.track=s,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const t=[...this.slides],n=[];[...nv(e,`.${this.cn(au)}`)].forEach(s=>{if(Mn(s)){const r=zh({el:s,isDom:!0,index:this.slides.length});n.push(r)}});for(let s of[...this.option("slides",[])||[],...t])n.push(zh(s));this.slides=n;for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;for(const s of n)this.emit("beforeInitSlide",s,s.index),this.emit("initSlide",s,s.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:t,isHorizontal:n}=this;if(!e||!t.length)return;let s=this.page;t[s]||(this.page=s=0);const r=(t[s].pos||0)*(this.isRTL&&n?1:-1),o=n?`${r}px`:"0",a=n?"0":`${r}px`;e.style.transform=`translate3d(${o}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new vc(this.viewport,Cn({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,n,...s)=>{this.emit(`Panzoom.${n}`,t,...s)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:t,viewportDim:n}=this;let s=this.option("slidesPerPage");s=(s==="auto"||t<=n)&&this.option("fill")!==!1?1/0:parseFloat(s+"");let r=0,o=0,a=0;for(const l of this.slides)(!e.length||o+l.dim-n>.05||a>=s)&&(e.push(TM()),r=e.length-1,o=0,a=0),e[r].slides.push(l),o+=l.dim+l.gap,a++;return e}processPages(){const e=this.pages,{contentDim:t,viewportDim:n,isInfinite:s}=this,r=this.option("center"),o=this.option("fill"),a=o&&r&&t>n&&!s;if(e.forEach((c,d)=>{var h;c.index=d,c.pos=((h=c.slides[0])===null||h===void 0?void 0:h.pos)||0,c.dim=0;for(const[f,m]of c.slides.entries())c.dim+=m.dim,f<c.slides.length-1&&(c.dim+=m.gap);a&&c.pos+.5*c.dim<.5*n?c.pos=0:a&&c.pos+.5*c.dim>=t-.5*n?c.pos=t-n:r&&(c.pos+=-.5*(n-c.dim))}),e.forEach(c=>{o&&!s&&t>n&&(c.pos=Math.max(c.pos,0),c.pos=Math.min(c.pos,t-n)),c.pos=Qe(c.pos,1e3),c.dim=Qe(c.dim,1e3),Math.abs(c.pos)<=.1&&(c.pos=0)}),s)return e;const l=[];let u;return e.forEach(c=>{const d=Object.assign({},c);u&&d.pos===u.pos?(u.dim+=d.dim,u.slides=[...u.slides,...d.slides]):(d.index=l.length,u=d,l.push(d))}),l}getPageFromIndex(e=0){const t=this.pages.length;let n;return e=parseInt((e||0).toString())||0,n=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),n}getSlideMetrics(e){var t,n;const s=this.isHorizontal?"width":"height";let r=0,o=0,a=e.el;const l=!(!a||a.parentNode);if(a?r=parseFloat(a.dataset[s]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),bt(a,this.cn(au)+" "+e.class+" "+e.customClass),r)a.style[s]=`${r}px`,a.style[s==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),r=a.getBoundingClientRect()[s]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let c=a[this.isHorizontal?"offsetWidth":"offsetHeight"];c-1>r&&(r=c)}const u=getComputedStyle(a);return u.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(u.paddingLeft)||0,r+=parseFloat(u.paddingRight)||0):(r+=parseFloat(u.paddingTop)||0,r+=parseFloat(u.paddingBottom)||0)),o=parseFloat(u[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(n=a.parentElement)===null||n===void 0||n.removeChild(a):e.el||a.remove(),{dim:Qe(r,1e3),gap:Qe(o,1e3)}}getBounds(){const{isInfinite:e,isRTL:t,isHorizontal:n,pages:s}=this;let r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(s.length){const o=s[0].pos,a=s[s.length-1].pos;r=t&&n?{min:o,max:a}:{min:-1*a,max:-1*o}}return{x:n?r:{min:0,max:0},y:n?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:n,isInfinite:s,viewport:r,viewportDim:o,contentDim:a,page:l,pages:u,slides:c,panzoom:d}=this,h=0,f=0,m=0,b=0;d?b=-1*d.current[this.axis]:u[l]&&(b=u[l].pos||0),e=t?n?"right":"left":"top",n&&t&&(b*=-1);for(const w of c){const S=w.el;S?(e==="top"?(S.style.right="",S.style.left=""):S.style.top="",w.index!==h?S.style[e]=f===0?"":`${Qe(f,1e3)}px`:S.style[e]="",m+=w.dim+w.gap,h++):f+=w.dim+w.gap}if(s&&m&&r){let w=getComputedStyle(r),S="padding",I=t?"Right":"Bottom",D=parseFloat(w[S+(t?"Left":"Top")]);b-=D,o+=D,o+=parseFloat(w[S+I]);for(const y of c)y.el&&(Qe(y.pos)<Qe(o)&&Qe(y.pos+y.dim+y.gap)<Qe(b)&&Qe(b)>Qe(a-o)&&(y.el.style[e]=`${Qe(f+m,1e3)}px`),Qe(y.pos+y.gap)>=Qe(a-o)&&Qe(y.pos)>Qe(b+o)&&Qe(b)<Qe(o)&&(y.el.style[e]=`-${Qe(m,1e3)}px`))}let v,g,E=[...this.inTransition];if(E.length>1&&(v=u[E[0]],g=u[E[1]]),v&&g){let w=0;for(const S of c)S.el?this.inTransition.has(S.index)&&v.slides.indexOf(S)<0&&(S.el.style[e]=`${Qe(w+(v.pos-g.pos),1e3)}px`):w+=S.dim+S.gap}}createSlideEl(e){const{track:t,slides:n}=this;if(!t||!e||e.el&&e.el.parentNode)return;const s=e.el||document.createElement("div");bt(s,this.cn(au)),bt(s,e.class),bt(s,e.customClass);const r=e.html;r&&(r instanceof HTMLElement?s.appendChild(r):s.innerHTML=e.html+"");const o=[];n.forEach((c,d)=>{c.el&&o.push(d)});const a=e.index;let l=null;o.length&&(l=n[o.reduce((c,d)=>Math.abs(d-a)<Math.abs(c-a)?d:c)]);const u=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;t.insertBefore(s,t.contains(u)?u:null),e.el=s,this.emit("createSlide",e)}removeSlideEl(e,t=!1){const n=e==null?void 0:e.el;if(!n||!n.parentNode)return;const s=this.cn(rv);if(n.classList.contains(s)&&(oi(n,s),this.emit("unselectSlide",e)),e.isDom&&!t)return n.removeAttribute("aria-hidden"),n.removeAttribute("data-index"),void(n.style.left="");this.emit("removeSlide",e);const r=new CustomEvent(ou);n.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var n,s,r,o;if(!t)return!1;const a=this.page,{pages:l,panzoom:u}=this;e=parseInt((e||0).toString())||0;const c=this.getPageFromIndex(e);if(!u||!l[c]||l.length<2||Math.abs((((s=(n=l[a])===null||n===void 0?void 0:n.slides[0])===null||s===void 0?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let d=e>a?1:-1;this.isInfinite&&(a===0&&e===l.length-1&&(d=-1),a===l.length-1&&e===0&&(d=1));const h=l[c].pos*(this.isRTL?1:-1);if(a===c&&Math.abs(h-u.target[this.axis])<1)return!1;this.clearTransitions();const f=u.isResting;bt(this.container,this.cn("inTransition"));const m=((r=l[a])===null||r===void 0?void 0:r.slides[0])||null,b=((o=l[c])===null||o===void 0?void 0:o.slides[0])||null;this.inTransition.add(b.index),this.createSlideEl(b);let v=m.el,g=b.el;f||t===au||(t="fadeFast",v=null);const E=this.isRTL?"next":"prev",w=this.isRTL?"prev":"next";return v&&(this.inTransition.add(m.index),m.transition=t,v.addEventListener(ou,this.onAnimationEnd),v.classList.add(`f-${t}Out`,`to-${d>0?w:E}`)),g&&(b.transition=t,g.addEventListener(ou,this.onAnimationEnd),g.classList.add(`f-${t}In`,`from-${d>0?E:w}`)),u.current[this.axis]=h,u.target[this.axis]=h,u.requestTick(),this.onChange(c),!0}manageSlideVisiblity(){const e=new Set,t=new Set,n=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)n.has(s)?e.add(s):t.add(s);for(const s of this.inTransition)e.add(this.slides[s]);for(const s of e)this.createSlideEl(s),this.lazyLoadSlide(s);for(const s of t)e.has(s)||this.removeSlideEl(s);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let t=this.cn(rv);if(t)for(const n of this.slides){const s=n.el;s&&(s.dataset.index=`${n.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(n)?s.removeAttribute(e):s.setAttribute(e,"true"):this.pages[this.page].slides.includes(n)?(s.classList.contains(t)||(bt(s,t),this.emit("selectSlide",n)),s.removeAttribute(e)):(s.classList.contains(t)&&(oi(s,t),this.emit("unselectSlide",n)),s.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:t,isInfinite:n,isRTL:s,viewportDim:r,contentDim:o}=this,a=this.panzoom;if(!a||!n)return;let l=a.current[e],u=a.target[e]-l,c=0,d=.5*r;s&&t?(l<-d&&(c=-1,l+=o),l>o-d&&(c=1,l-=o)):(l>d&&(c=1,l-=o),l<-o+d&&(c=-1,l+=o)),c&&(a.current[e]=l,a.target[e]=l+u)}lazyLoadImg(e,t){const n=this,s="f-fadeIn",r="is-preloading";let o=!1,a=null;const l=()=>{o||(o=!0,a&&(a.remove(),a=null),oi(t,r),t.complete&&(bt(t,s),setTimeout(()=>{oi(t,s)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(n.updateMetrics(),n.setViewportHeight()),this.emit("load",e))};bt(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{l()}),t.addEventListener("load",()=>{l()}),setTimeout(()=>{const u=t.parentNode;u&&e.el&&(t.complete?l():o||(a=Gs(Mm),u.insertBefore(a,t)))},300)}lazyLoadSlide(e){const t=e&&e.el;if(!t)return;const n=new Set;let s=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&s.push(t),s.map(r=>{r instanceof HTMLImageElement?n.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(const r of n)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;const n=e.target,s=n?parseInt(n.dataset.index||"",10)||0:-1,r=this.slides[s],o=e.animationName;if(!n||!r||!o)return;const a=!!this.inTransition.has(s)&&r.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,n=0,s=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:o,isHorizontal:a,axis:l,pages:u}=this,c=u.length,d=Math.abs(Math.atan2(n,t)/(Math.PI/180));let h=0;if(h=d>45&&d<135?a?0:n:a?t:0,!c)return;let f=this.page,m=o&&a?1:-1;const b=e.current[l]*m;let{pageIndex:v}=this.getPageFromPosition(b);Math.abs(h)>5?(u[f].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(f=v),f=o&&a?h<0?f-1:f+1:h<0?f+1:f-1):f=s===0&&r===0?f:v,this.slideTo(f,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const t=e.target,n=t&&Mn(t)?t.dataset:null;let s,r;n&&(n.carouselPage!==void 0?(r="slideTo",s=n.carouselPage):n.carouselNext!==void 0?r="slideNext":n.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](s)):this.emit("click",e)}onSlideTo(e){const t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){const n=this.page;this.prevPage=n,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==n&&(this.markSelectedSlides(),this.emit("change",e,n,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=Bi.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:n=this.option("transition")}={}){if(this.state===Bi.Destroy)return;e=parseInt((e||0).toString())||0;const s=this.getPageFromIndex(e),{axis:r,isHorizontal:o,isRTL:a,pages:l,panzoom:u}=this,c=l.length,d=a&&o?1:-1;if(!u||!c)return;if(this.page!==s){const f=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",f,e),f.defaultPrevented)return}if(this.transitionTo(e,n))return;let h=l[s].pos;if(this.isInfinite){const f=this.contentDim,m=u.target[r]*d;c===2?h+=f*Math.floor(parseFloat(e+"")/2):h=[h,h-f,h+f].reduce(function(b,v){return Math.abs(v-m)<Math.abs(b-m)?v:b})}h*=d,Math.abs(u.target[r]-h)<1||(u.panTo({x:o?h:0,y:o?0:h,friction:t}),this.onChange(s))}slideToClosest(e){if(this.panzoom){const{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),oi(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const t of this.slides){const n=t.el;if(n){n.removeEventListener(ou,this.onAnimationEnd),n.classList.remove(...e);const s=t.transition;s&&n.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var n,s,r,o;const a=this.panzoom,l=((n=this.pages[this.page])===null||n===void 0?void 0:n.pos)||0,u=((s=this.pages[this.page])===null||s===void 0?void 0:s.dim)||0,c=this.contentDim<this.viewportDim;let d=Array.isArray(t)?t:[t];const h=[];for(const f of d)h.push(zh(f));this.slides.splice(e,0,...h);for(let f=0;f<this.slides.length;f++)this.slides[f].index=f;for(const f of h)this.emit("beforeInitSlide",f,f.index);if(this.page>=e&&(this.page+=h.length),this.updateMetrics(),a){const f=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,m=((o=this.pages[this.page])===null||o===void 0?void 0:o.dim)||0,b=this.pages.length||1,v=this.isRTL?u-m:m-u,g=this.isRTL?l-f:f-l;c&&b===1?(e<=this.page&&(a.current[this.axis]-=v,a.target[this.axis]-=v),a.panTo({[this.isHorizontal?"x":"y"]:-1*f})):g&&e<=this.page&&(a.target[this.axis]-=g,a.current[this.axis]-=g,a.requestTick())}for(const f of h)this.emit("initSlide",f,f.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const t=this.slides.length;e=(e%t+t)%t;const n=this.slides[e];if(n){this.removeSlideEl(n,!0),this.slides.splice(e,1);for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",n)}}updateMetrics(){const{panzoom:e,viewport:t,track:n,slides:s,isHorizontal:r,isInfinite:o}=this;if(!n)return;const a=r?"width":"height",l=r?"offsetWidth":"offsetHeight";if(t){let d=Math.max(t[l],Qe(t.getBoundingClientRect()[a],1e3)),h=getComputedStyle(t),f="padding",m=r?"Right":"Bottom";d-=parseFloat(h[f+(r?"Left":"Top")])+parseFloat(h[f+m]),this.viewportDim=d}let u,c=0;for(const[d,h]of s.entries()){let f=0,m=0;!h.el&&u?(f=u.dim,m=u.gap):({dim:f,gap:m}=this.getSlideMetrics(h),u=h),f=Qe(f,1e3),m=Qe(m,1e3),h.dim=f,h.gap=m,h.pos=c,c+=f,(o||d<s.length-1)&&(c+=m)}c=Qe(c,1e3),this.contentDim=c,e&&(e.contentRect[a]=c,e.contentRect[r?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Bi.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,n=!1){e===void 0&&(e=this.page);const s=this,r=s.panzoom,o=s.contentDim,a=s.pages[e]||0;if(!a||!r)return e>this.page?-1:1;let l=-1*r.current.e,u=Qe((l-a.pos)/(1*a.dim),1e3),c=u,d=u;this.isInfinite&&n!==!0&&(c=Qe((l-a.pos+o)/(1*a.dim),1e3),d=Qe((l-a.pos-o)/(1*a.dim),1e3));let h=[u,c,d].reduce(function(f,m){return Math.abs(m)<Math.abs(f)?m:f});return t?h:h>1?1:h<-1?-1:h}setViewportHeight(){const{page:e,pages:t,viewport:n,isHorizontal:s}=this;if(!n||!t[e])return;let r=0;s&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(o=>{o.el&&(r=Math.max(r,o.el.offsetHeight))})),n.style.height=r?`${r}px`:""}getPageForSlide(e){for(const t of this.pages)for(const n of t.slides)if(n.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;const n=new Set;let{panzoom:s,contentDim:r,viewportDim:o,pages:a,page:l}=this;if(o){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let u=0;u=s&&s.state!==li.Init&&s.state!==li.Destroy?-1*s.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(u-=Math.floor(u/r)*r),this.isRTL&&this.isHorizontal&&(u*=-1);const c=u-o*e,d=u+o*(e+1),h=this.isInfinite?[-1,0,1]:[0];for(const f of this.slides)for(const m of h){const b=f.pos+m*r,v=b+f.dim+f.gap;b<d&&v>c&&n.add(f)}}return n}getPageFromPosition(e){const{viewportDim:t,contentDim:n,slides:s,pages:r,panzoom:o}=this,a=r.length,l=s.length,u=s[0],c=s[l-1],d=this.option("center");let h=0,f=0,m=0,b=e===void 0?-1*((o==null?void 0:o.target[this.axis])||0):e;d&&(b+=.5*t),this.isInfinite?(b<u.pos-.5*c.gap&&(b-=n,m=-1),b>c.pos+c.dim+.5*c.gap&&(b-=n,m=1)):b=Math.max(u.pos||0,Math.min(b,c.pos));let v=c,g=s.find(E=>{const w=E.pos-.5*v.gap,S=E.pos+E.dim+.5*E.gap;return v=E,b>=w&&b<S});return g||(g=c),f=this.getPageForSlide(g.index),h=f+m*a,{page:h,pageIndex:f}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([Bi.Destroy].includes(this.state))return;this.state=Bi.Destroy;const{container:e,viewport:t,track:n,slides:s,panzoom:r}=this,o=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),s&&s.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&n&&n.offsetParent&&t.replaceWith(...n.childNodes));for(const[l,u]of Object.entries(o))l!=="container"&&u&&e.classList.remove(u);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}};Object.defineProperty($u,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:vc}),Object.defineProperty($u,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:SM}),Object.defineProperty($u,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:CM});const eb=function(i){if(!Mn(i))return 0;const e=window.scrollY,t=window.innerHeight,n=e+t,s=i.getBoundingClientRect(),r=s.y+e,o=s.height,a=r+o;if(e>a||n<r)return 0;if(e<r&&n>a||r<e&&a>n)return 100;let l=o;r<e&&(l-=e-r),a>n&&(l-=a-n);const u=l/t*100;return Math.round(u)},Kl=!(typeof window>"u"||!window.document||!window.document.createElement);let Bh;const Hh=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),ov=i=>{if(i&&Kl){Bh===void 0&&document.createElement("div").focus({get preventScroll(){return Bh=!0,!1}});try{if(Bh)i.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;i.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},tb=()=>{const i=document;let e,t="",n="",s="";return i.fullscreenEnabled?(t="requestFullscreen",n="exitFullscreen",s="fullscreenElement"):i.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",n="webkitExitFullscreen",s="webkitFullscreenElement"),t&&(e={request:function(r=i.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return i[s]&&i[n]()},isFullscreen:function(){return i[s]}}),e},Kf={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},Yy),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var Qi,fn;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Closing=2]="Closing",i[i.CustomClosing=3]="CustomClosing",i[i.Destroy=4]="Destroy"})(Qi||(Qi={})),function(i){i[i.Loading=0]="Loading",i[i.Opening=1]="Opening",i[i.Ready=2]="Ready",i[i.Closing=3]="Closing"}(fn||(fn={}));let av="",Wl=!1,lu=!1,Io=null;const ib=()=>{let i="",e="";const t=Pt.getInstance();if(t){const n=t.carousel,s=t.getSlide();if(n&&s){let r=s.slug||void 0,o=s.triggerEl||void 0;e=r||t.option("slug")||"",!e&&o&&o.dataset&&(e=o.dataset.fancybox||""),e&&e!=="true"&&(i="#"+e+(!r&&n.slides.length>1?"-"+(s.index+1):""))}}return{hash:i,slug:e,index:1}},hd=()=>{const i=new URL(document.URL).hash,e=i.slice(1).split("-"),t=e[e.length-1],n=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:i,slug:e.join("-"),index:n}},nb=()=>{const{slug:i,index:e}=hd();if(!i)return;let t=document.querySelector(`[data-slug="${i}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Pt.getInstance())return;const n=document.querySelectorAll(`[data-fancybox="${i}"]`);n.length&&(t=n[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},sb=()=>{if(Pt.defaults.Hash===!1)return;const i=Pt.getInstance();if((i==null?void 0:i.options.Hash)===!1)return;const{slug:e,index:t}=hd(),{slug:n}=ib();i&&(e===n?i.jumpTo(t-1):(Wl=!0,i.close())),nb()},rb=()=>{Io&&clearTimeout(Io),queueMicrotask(()=>{sb()})},lv=()=>{window.addEventListener("hashchange",rb,!1),setTimeout(()=>{sb()},500)};Kl&&(/complete|interactive|loaded/.test(document.readyState)?lv():document.addEventListener("DOMContentLoaded",lv));const cu="is-zooming-in";let ob=class extends As{onCreateSlide(e,t,n){const s=this.instance.optionFor(n,"src")||"";n.el&&n.type==="image"&&typeof s=="string"&&this.setImage(n,s)}onRemoveSlide(e,t,n){n.panzoom&&n.panzoom.destroy(),n.panzoom=void 0,n.imageEl=void 0}onChange(e,t,n,s){oi(this.instance.container,cu);for(const r of t.slides){const o=r.panzoom;o&&r.index!==n&&o.reset(.35)}}onClose(){var e;const t=this.instance,n=t.container,s=t.getSlide();if(!n||!n.parentElement||!s)return;const{el:r,contentEl:o,panzoom:a,thumbElSrc:l}=s;if(!r||!l||!o||!a||a.isContentLoading||a.state===li.Init||a.state===li.Destroy)return;a.updateMetrics();let u=this.getZoomInfo(s);if(!u)return;this.instance.state=Qi.CustomClosing,n.classList.remove(cu),n.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${l}')`;const c=n.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(n.style,{position:"absolute",top:`${n.offsetTop+window.scrollY}px`,left:`${n.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:d,y:h,scale:f,opacity:m}=u;if(m){const b=((v,g,E,w)=>{const S=g-v,I=w-E;return D=>E+((D-v)/S*I||0)})(a.scale,f,1,0);a.on("afterTransform",()=>{o.style.opacity=b(a.scale)+""})}a.on("endAnimation",()=>{t.destroy()}),a.target.a=f,a.target.b=0,a.target.c=0,a.target.d=f,a.panTo({x:d,y:h,scale:f,friction:m?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){const n=this.instance;e.src=t,this.process(e,t).then(s=>{const{contentEl:r,imageEl:o,thumbElSrc:a,el:l}=e;if(n.isClosing()||!r||!o)return;r.offsetHeight;const u=!!n.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",h=>{h.preventDefault()});const d=document.createElement("div");bt(d,"fancybox-protected"),r.appendChild(d)}if(a&&u){const d=s.contentRect,h=Math.max(d.fullWidth,d.fullHeight);let f=null;!u.opacity&&h>1200&&(f=document.createElement("img"),bt(f,"fancybox-ghost"),f.src=a,r.appendChild(f));const m=()=>{f&&(bt(f,"f-fadeFastOut"),setTimeout(()=>{f&&(f.remove(),f=null)},200))};(c=a,new Promise((b,v)=>{const g=new Image;g.onload=b,g.onerror=v,g.src=c})).then(()=>{n.hideLoading(e),e.state=fn.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{m(),this.instance.done(e)},()=>{}),f&&setTimeout(()=>{m()},h>2500?800:200)},()=>{n.hideLoading(e),n.revealContent(e)})}else{const d=this.optionFor(e,"initialSize"),h=this.optionFor(e,"zoom"),f={event:n.prevMouseMoveEvent||n.options.event,friction:h?.12:0};let m=n.optionFor(e,"showClass")||void 0,b=!0;n.isOpeningSlide(e)&&(d==="full"?s.zoomToFull(f):d==="cover"?s.zoomToCover(f):d==="max"?s.zoomToMax(f):b=!1,s.stop("current")),b&&m&&(m=s.isDragging?"f-fadeIn":""),n.hideLoading(e),n.revealContent(e,m)}var c},()=>{n.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((n,s)=>{var r;const o=this.instance,a=e.el;o.clearContent(e),o.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=Gs(l)),!l||!Mn(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let u="",c=e.caption;u=typeof c=="string"&&c?c.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=o.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,l.src=t||"",l.alt=u,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}bt(l,"fancybox-image"),e.imageEl=l,o.setContent(e,l,!1),e.panzoom=new vc(a,Cn({transformParent:!0},this.option("Panzoom")||{},{content:l,width:(u,c)=>o.optionFor(e,"width","auto",c)||"auto",height:(u,c)=>o.optionFor(e,"height","auto",c)||"auto",wheel:()=>{const u=o.option("wheel");return(u==="zoom"||u=="pan")&&u},click:(u,c)=>{var d,h;if(o.isCompact||o.isClosing()||e.index!==((d=o.getSlide())===null||d===void 0?void 0:d.index))return!1;if(c){const m=c.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(m.nodeName))return!1}let f=!c||c.target&&((h=e.contentEl)===null||h===void 0?void 0:h.contains(c.target));return o.option(f?"contentClick":"backdropClick")||!1},dblClick:()=>o.isCompact?"toggleZoom":o.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:u=>{n(u)},error:()=>{s()},destroy:()=>{s()}}}))})}zoomIn(e){return new Promise((t,n)=>{const s=this.instance,r=s.container,{panzoom:o,contentEl:a,el:l}=e;o&&o.updateMetrics();const u=this.getZoomInfo(e);if(!(u&&l&&a&&o&&r))return void n();const{x:c,y:d,scale:h,opacity:f}=u,m=()=>{e.state!==fn.Closing&&(f&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-h)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&t(o))},b=E=>{(E.scale<.99||E.scale>1.01)&&!E.isDragging||(oi(r,cu),a.style.opacity="",E.off("endAnimation",b),E.off("touchStart",b),E.off("afterTransform",m),t(E))};o.on("endAnimation",b),o.on("touchStart",b),o.on("afterTransform",m),o.on(["error","destroy"],()=>{n()}),o.panTo({x:c,y:d,scale:h,friction:0,ignoreBounds:!0}),o.stop("current");const v={event:o.panMode==="mousemove"?s.prevMouseMoveEvent||s.options.event:void 0},g=this.optionFor(e,"initialSize");bt(r,cu),s.hideLoading(e),g==="full"?o.zoomToFull(v):g==="cover"?o.zoomToCover(v):g==="max"?o.zoomToMax(v):o.reset(.172)})}getZoomInfo(e){const{el:t,imageEl:n,thumbEl:s,panzoom:r}=e,o=this.instance,a=o.container;if(!t||!n||!s||!r||eb(s)<3||!this.optionFor(e,"zoom")||!a||o.state===Qi.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;const l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:u,left:c,width:d,height:h}=s.getBoundingClientRect(),{top:f,left:m,fitWidth:b,fitHeight:v}=r.contentRect;if(!(d&&h&&b&&v))return!1;const g=r.container.getBoundingClientRect();m+=g.left,f+=g.top;const E=-1*(m+.5*b-(c+.5*d)),w=-1*(f+.5*v-(u+.5*h)),S=d/b;let I=this.option("zoomOpacity")||!1;return I==="auto"&&(I=Math.abs(d/h-b/v)>.1),{x:E,y:w,scale:S,opacity:I}}attach(){const e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){const e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}};Object.defineProperty(ob,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const Vh="html",cv="image",$h="map",dr="youtube",Eo="vimeo",Ol="html5video",uv=(i,e={})=>{const t=new URL(i),n=new URLSearchParams(t.search),s=new URLSearchParams;for(const[a,l]of[...n,...Object.entries(e)]){let u=l+"";if(a==="t"){let c=u.match(/((\d*)m)?(\d*)s?/);c&&s.set("start",60*parseInt(c[2]||"0")+parseInt(c[3]||"0")+"")}else s.set(a,u)}let r=s+"",o=i.match(/#t=((.*)?\d+s)/);return o&&(r+=`#t=${o[1]}`),r},AM={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},PM=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class ab extends As{onBeforeInitSlide(e,t,n){this.processType(n)}onCreateSlide(e,t,n){this.setContent(n)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);const n=t.iframeEl;n&&(n.onload=n.onerror=null,n.src="//about:blank",t.iframeEl=null);const s=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&s&&r)s.classList.remove("fancybox__content"),getComputedStyle(s).getPropertyValue("display")!=="none"&&(s.style.display="none"),setTimeout(()=>{r&&(s&&r.parentNode&&r.parentNode.insertBefore(s,r),r.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,n){n.state===fn.Ready&&this.playVideo()}onUnselectSlide(e,t,n){var s,r;if(n.type===Ol){try{(r=(s=n.el)===null||s===void 0?void 0:s.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let o;n.type===Eo?o={method:"pause",value:"true"}:n.type===dr&&(o={event:"command",func:"pauseVideo"}),o&&n.iframeEl&&n.iframeEl.contentWindow&&n.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),n.poller&&clearTimeout(n.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(n=>{n.el&&(this.resizeIframe(n),this.setAspectRatio(n))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let n of Array.from(document.getElementsByClassName("fancybox__iframe")))n instanceof HTMLIFrameElement&&n.contentWindow===e.source&&(n.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){const n=document.getElementById(t.id);n&&(n.dataset.ready="true")}}catch{}}loadAjaxContent(e){const t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const n=this.instance,s=new XMLHttpRequest;n.showLoading(e),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&n.state===Qi.Ready&&(n.hideLoading(e),s.status===200?n.setContent(e,s.responseText):n.setError(e,s.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const r=e.ajax||null;s.open(r?"POST":"GET",t+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(r),e.xhr=s}setInlineContent(e){let t=null;if(Mn(e.src))t=e.src;else if(typeof e.src=="string"){const n=e.src.split("#",2).pop();t=n?document.getElementById(n):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);const n=t.dataset.animationName;n&&(t.classList.remove(n),delete t.dataset.animationName);let s=t.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",s)}else if(t.parentNode){const n=document.createElement("div");n.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(n,t),e.placeholderEl=n}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:t,el:n}=e;if(!t||typeof t!="string"||!n)return;n.classList.add("is-loading");const s=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${s.id}_${e.index}`);for(const[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(a,l);r.onerror=()=>{s.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;const o=this.optionFor(e,"preload");if(e.type!=="iframe"||o===!1)return r.setAttribute("src",e.src+""),s.setContent(e,r,!1),this.resizeIframe(e),void s.revealContent(e);s.showLoading(e),r.onload=()=>{if(!r.src.length)return;const a=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),a?s.revealContent(e):s.hideLoading(e)},r.setAttribute("src",t),s.setContent(e,r,!1)}resizeIframe(e){const{type:t,iframeEl:n}=e;if(t===dr||t===Eo)return;const s=n==null?void 0:n.parentElement;if(!n||!s)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let o=e.width||0,a=e.height||0;o&&a&&(r=!1);const l=s&&s.style;if(e.preload!==!1&&r!==!1&&l)try{const u=window.getComputedStyle(s),c=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),d=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),h=n.contentWindow;if(h){const f=h.document,m=f.getElementsByTagName(Vh)[0],b=f.body;l.width="",b.style.overflow="hidden",o=o||m.scrollWidth+c,l.width=`${o}px`,b.style.overflow="",l.flex="0 0 auto",l.height=`${b.scrollHeight}px`,a=m.scrollHeight+d}}catch{}if(o||a){const u={flex:"0 1 auto",width:"",height:""};o&&o!=="auto"&&(u.width=`${o}px`),a&&a!=="auto"&&(u.height=`${a}px`),Object.assign(l,u)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===Ol)try{const s=t.querySelector("video");if(s){const r=s.play();r!==void 0&&r.then(()=>{}).catch(o=>{s.muted=!0,s.play()})}}catch{}if(e.type!==dr&&e.type!==Eo)return;const n=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let s;if(e.iframeEl.dataset.ready==="true")return s=e.type===dr?{event:"command",func:"playVideo"}:{method:"play",value:"true"},s&&e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"),void(e.poller=void 0);e.type===dr&&(s={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"))}e.poller=setTimeout(n,250)};n()}processType(e){if(e.html)return e.type=Vh,e.src=e.html,void(e.html="");const t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let n=e.type,s=null;if(s=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const r=this.optionFor(e,dr),{nocookie:o}=r,a=function(d,h){var f={};for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&h.indexOf(m)<0&&(f[m]=d[m]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function"){var b=0;for(m=Object.getOwnPropertySymbols(d);b<m.length;b++)h.indexOf(m[b])<0&&Object.prototype.propertyIsEnumerable.call(d,m[b])&&(f[m[b]]=d[m[b]])}return f}(r,["nocookie"]),l=`www.youtube${o?"-nocookie":""}.com`,u=uv(t,a),c=encodeURIComponent(s[2]);e.videoId=c,e.src=`https://${l}/embed/${c}?${u}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,n=dr}else if(s=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const r=uv(t,this.optionFor(e,Eo)),o=encodeURIComponent(s[1]),a=s[4]||"";e.videoId=o,e.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${r?"&":""}`:""}${r}`,n=Eo}if(!n&&e.triggerEl){const r=e.triggerEl.dataset.type;PM.includes(r)&&(n=r)}n||typeof t=="string"&&(t.charAt(0)==="#"?n="inline":(s=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(n=Ol,e.videoFormat=e.videoFormat||"video/"+(s[1]==="ogv"?"ogg":s[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?n=cv:t.match(/\.(pdf)((\?|#).*)?$/i)&&(n="pdf")),(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,n=$h):(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,n=$h),n=n||this.instance.option("defaultType"),e.type=n,n===cv&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case Vh:this.instance.setContent(e,t);break;case Ol:const n=this.option("videoTpl");n&&this.instance.setContent(e,n.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case $h:case dr:case Eo:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const t=e.contentEl;if(!(e.el&&t&&e.type&&[dr,Eo,Ol].includes(e.type)))return;let n,s=e.width||"auto",r=e.height||"auto";if(s==="auto"||r==="auto"){n=this.optionFor(e,"videoRatio");const u=(n+"").match(/(\d+)\s*\/\s?(\d+)/);n=u&&u.length>2?parseFloat(u[1])/parseFloat(u[2]):parseFloat(n+"")}else s&&r&&(n=s/r);if(!n)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;const o=t.getBoundingClientRect(),a=o.width||1,l=o.height||1;t.style.aspectRatio=n+"",n<a/l?(r=r==="auto"?l:Math.min(l,r),t.style.width="auto",t.style.height=`${r}px`):(s=s==="auto"?a:Math.min(a,s),t.style.width=`${s}px`,t.style.height="auto")}attach(){const e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(ab,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:AM});const uu="play",du="pause",Nl="ready";class lb extends As{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Nl}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==Nl}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const t=this.instance,n=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[];let s=this.option("progressParentEl");if(s||(s=(n.length===1?n[0].el:null)||t.viewport),!s)return null;const r=document.createElement("div");return bt(r,"f-progress"),s.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){const e=this,t=e.instance;if(t.pages.length<2||e.timer)return;const n=e.option("timeout");e.state=uu,bt(t.container,"has-autoplay");let s=e.createProgressBar();s&&(s.style.transitionDuration=`${n}ms`,s.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},n),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==Nl){if(e.option("pauseOnHover")){const t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,t=e.state,n=e.instance.container;e.clear(),e.state=Nl,n.removeEventListener("mouseenter",e.onMouseEnter,!1),n.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),oi(n,"has-autoplay"),t!==Nl&&e.emit("stop")}pause(){const e=this;e.state===uu&&(e.state=du,e.clear(),e.emit(du))}resume(){const e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==uu){if(e.state===du&&!e.inHover){const n=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",n),n.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===uu||this.state===du?this.stop():this.start()}attach(){const e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(lb,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class cb extends As{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const t=e.carousel;if(!t)return;const n=e.container;n&&(t.options.Autoplay=Cn({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:s=>{var r;n.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==fn.Ready&&s.pause()},stop:()=>{n.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(s,r)=>{var o,a,l;!r||!r.cancelable||((o=e.getSlide())===null||o===void 0?void 0:o.state)===fn.Ready&&(!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting)||r.preventDefault()}}}),t.attachPlugins({Autoplay:lb}),this.ref=t.plugins.Autoplay)}onReady(e){const t=e.carousel,n=this.ref;n&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&n.start()}onDone(e,t){const n=this.ref,s=e.carousel;if(!n||!s)return;const r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&n.stop()}),e.isCurrentSlide(t)&&n.resume()}onKeydown(e,t){var n;const s=this.ref;s&&t===this.option("key")&&((n=document.activeElement)===null||n===void 0?void 0:n.nodeName)!=="BUTTON"&&s.toggle()}attach(){const e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){const e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(cb,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:i=>{var e;return((e=i.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||i.instance.container},timeout:3e3}});const ub={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var xr;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Hidden=2]="Hidden"})(xr||(xr={}));const dv="isResting",hu="thumbWidth",aa="thumbHeight",ks="thumbClipWidth";let db=class extends As{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:xr.Init})}get isModern(){return this.type==="modern"}onInitSlide(e,t){const n=t.el?t.el.dataset:void 0;n&&(t.thumbSrc=n.thumbSrc||t.thumbSrc||"",t[ks]=parseFloat(n[ks]||"")||t[ks]||0,t[aa]=parseFloat(n.thumbHeight||"")||t[aa]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var e;if(!this.isModern)return;const t=this.container,n=this.instance,s=n.panzoom,r=this.carousel,o=r?r.panzoom:null,a=n.page;if(s&&r&&o){if(s.isDragging){oi(t,this.cn(dv));let l=((e=r.pages[a])===null||e===void 0?void 0:e.pos)||0;l+=n.getProgress(a)*(this[ks]+this.thumbGap);let u=o.getBounds();-1*l>u.x.min&&-1*l<u.x.max&&o.panTo({x:-1*l,friction:.12})}else Ws(t,this.cn(dv),s.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const e of this.instance.slides||[])this.resizeModernSlide(e);this.shiftModern()}isDisabled(){const e=this.option("minCount")||0;if(e){const n=this.instance;let s=0;for(const r of n.slides||[])r.thumbSrc&&s++;if(s<e)return!0}const t=this.option("type");return["modern","classic"].indexOf(t)<0}getThumb(e){const t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(e){const t=this.carousel;t&&t.addSlide(e.index,this.getThumb(e))}getSlides(){const e=[];for(const t of this.instance.slides||[])e.push(this.getThumb(t));return e}resizeModernSlide(e){this.isModern&&(e[hu]=e[ks]&&e[aa]?Math.round(this[aa]*(e[ks]/e[aa])):this[hu])}updateProps(){const e=this.container;if(!e)return;const t=n=>parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-"+n))||0;this.thumbGap=t("gap"),this.thumbExtraGap=t("extra-gap"),this[hu]=t("width")||40,this[ks]=t("clip-width")||40,this[aa]=t("height")||40}build(){const e=this;if(e.state!==xr.Init)return;if(e.isDisabled())return void e.emit("disabled");const t=e.instance,n=t.container,s=e.getSlides(),r=e.option("type");e.type=r;const o=e.option("parentEl"),a=e.cn("container"),l=e.cn("track");let u=o==null?void 0:o.querySelector("."+a);u||(u=document.createElement("div"),bt(u,a),o?o.appendChild(u):n.after(u)),bt(u,`is-${r}`),bt(n,e.cn("hasThumbs")),e.container=u,e.updateProps();let c=u.querySelector("."+l);c||(c=document.createElement("div"),bt(c,e.cn("track")),u.appendChild(c)),e.track=c;const d=Cn({},{track:c,infinite:!1,center:!0,fill:r==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},e.option("Carousel")||{},{Sync:{target:t},slides:s}),h=new t.constructor(u,d);h.on("createSlide",(f,m)=>{e.setProps(m.index),e.emit("createSlide",m,m.el)}),h.on("ready",()=>{e.shiftModern(),e.emit("ready")}),h.on("refresh",()=>{e.shiftModern()}),h.on("Panzoom.click",(f,m,b)=>{e.onClick(b)}),e.carousel=h,e.state=xr.Ready}onClick(e){e.preventDefault(),e.stopPropagation();const t=this.instance,{pages:n,page:s}=t,r=v=>{if(v){const g=v.closest("[data-carousel-index]");if(g)return[parseInt(g.dataset.carouselIndex||"",10)||0,g]}return[-1,void 0]},o=(v,g)=>{const E=document.elementFromPoint(v,g);return E?r(E):[-1,void 0]};let[a,l]=r(e.target);if(a>-1)return;const u=this[ks],c=e.clientX,d=e.clientY;let[h,f]=o(c-u,d),[m,b]=o(c+u,d);f&&b?(a=Math.abs(c-f.getBoundingClientRect().right)<Math.abs(c-b.getBoundingClientRect().left)?h:m,a===s&&(a=a===h?m:h)):f?a=h:b&&(a=m),a>-1&&n[a]&&t.slideTo(a)}getShift(e){var t;const n=this,{instance:s}=n,r=n.carousel;if(!s||!r)return 0;const o=n[hu],a=n[ks],l=n.thumbGap,u=n.thumbExtraGap;if(!(!((t=r.slides[e])===null||t===void 0)&&t.el))return 0;const c=.5*(o-a),d=s.pages.length-1;let h=s.getProgress(0),f=s.getProgress(d),m=s.getProgress(e,!1,!0),b=0,v=c+u+l;const g=h<0&&h>-1,E=f>0&&f<1;return e===0?(b=v*Math.abs(h),E&&h===1&&(b-=v*Math.abs(f))):e===d?(b=v*Math.abs(f)*-1,g&&f===-1&&(b+=v*Math.abs(h))):g||E?(b=-1*v,b+=v*Math.abs(h),b+=v*(1-Math.abs(f))):b=v*m,b}setProps(e){var t;const n=this;if(!n.isModern)return;const{instance:s}=n,r=n.carousel;if(s&&r){const o=(t=r.slides[e])===null||t===void 0?void 0:t.el;if(o&&o.childNodes.length){let a=Qe(1-Math.abs(s.getProgress(e))),l=Qe(n.getShift(e));o.style.setProperty("--progress",a?a+"":""),o.style.setProperty("--shift",l+"")}}}shiftModern(){const e=this;if(!e.isModern)return;const{instance:t,track:n}=e,s=t.panzoom,r=e.carousel;if(!(t&&n&&s&&r)||s.state===li.Init||s.state===li.Destroy)return;for(const a of t.slides)e.setProps(a.index);let o=(e[ks]+e.thumbGap)*(r.slides.length||0);n.style.setProperty("--width",o+"")}cleanup(){const e=this;e.carousel&&e.carousel.destroy(),e.carousel=null,e.container&&e.container.remove(),e.container=null,e.track&&e.track.remove(),e.track=null,e.state=xr.Init,oi(e.instance.container,e.cn("hasThumbs"))}attach(){const e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===Bi.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on(["change","Panzoom.afterTransform"],e.onChange),t.on("Panzoom.refresh",e.onRefresh)}detach(){const e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off(["change","Panzoom.afterTransform"],e.onChange),t.off("Panzoom.refresh",e.onRefresh),e.cleanup()}};Object.defineProperty(db,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ub});const LM=Object.assign(Object.assign({},ub),{key:"t",showOnStart:!0,parentEl:null}),hv="is-masked",fv="aria-hidden";class hb extends As{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var n,s,r;const o=((r=(s=(n=this.instance)===null||n===void 0?void 0:n.carousel)===null||s===void 0?void 0:s.slides[t.index])===null||r===void 0?void 0:r.type)||"",a=t.el;if(a&&o){let l=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(l+=" for-video"),bt(a,l)}}onInit(){var e;const t=this,n=t.instance,s=n.carousel;if(t.ref||!s)return;const r=t.option("parentEl")||n.footer||n.container;if(!r)return;const o=Cn({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:n.option("Carousel.friction")||0}},on:{ready:a=>{const l=a.container;l&&this.hidden&&(t.refresh(),l.style.transition="none",t.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",t.show()}))}}});o.Carousel=o.Carousel||{},o.Carousel.on=Cn(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=o,s.attachPlugins({Thumbs:db}),t.ref=s.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=xr.Hidden,t.hidden=!0)}onResize(){var e;const t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){const n=this.option("key");n&&n===t&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===xr.Hidden?(e.state=xr.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(fv),t.classList.remove(hv),this.hidden=!1)}hide(){const e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(hv),t.setAttribute(fv,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const t=e.container,n=(t==null?void 0:t.firstChild)||null;t&&n&&n.childNodes.length&&(t.style.maxHeight=`${n.getBoundingClientRect().height}px`)}attach(){const e=this,t=e.instance;t.state===Qi.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;const t=this,n=t.instance;n.off("Carousel.init",t.onInit),n.off("resize",t.onResize),n.off("keydown",t.onKeydown),(e=n.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}}Object.defineProperty(hb,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:LM});const Gh={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var ko;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Disabled=2]="Disabled"})(ko||(ko={}));const RM={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},IM={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pv="has-toolbar",Wh="fancybox__toolbar";class fb extends As{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ko.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let n=this.option("display"),s=this.option("absolute"),r=this.option("enabled");if(r==="auto"){const u=this.instance.carousel;let c=0;if(u)for(const d of u.slides)(d.panzoom||d.type==="image")&&c++;c||(r=!1)}r||(n=void 0);let o=0;const a={left:[],middle:[],right:[]};if(n)for(const u of["left","middle","right"])for(const c of n[u]){const d=this.createEl(c);d&&((t=a[u])===null||t===void 0||t.push(d),o++)}let l=null;if(o&&(l=this.createContainer()),l){for(const[u,c]of Object.entries(a)){const d=document.createElement("div");bt(d,Wh+"__column is-"+u);for(const h of c)d.appendChild(h);s!=="auto"||u!=="middle"||c.length||(s=!0),l.appendChild(d)}s===!0&&bt(l,"is-absolute"),this.state=ko.Ready,this.onRefresh()}else this.state=ko.Disabled}onClick(e){var t,n;const s=this.instance,r=s.getSlide(),o=r==null?void 0:r.panzoom,a=e.target,l=a&&Mn(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=s.plugins.Thumbs)===null||t===void 0||t.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const d=(n=s.carousel)===null||n===void 0?void 0:n.plugins.Autoplay;let h=d.isActive;return o&&o.panMode==="mousemove"&&!h&&o.reset(),void(h?d.stop():d.start())}const u=l.panzoomAction,c=l.panzoomChange;if((c||u)&&(e.preventDefault(),e.stopPropagation()),c){let d={};try{d=JSON.parse(c)}catch{}o&&o.applyChange(d)}else u&&o&&o[u]&&o[u]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const t=this.instance.getSlide();if(!t||t.state!==fn.Ready)return;const n=t&&!t.error&&t.panzoom;for(const o of e.querySelectorAll("[data-panzoom-action]"))n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let s=n&&n.canZoomIn(),r=n&&n.canZoomOut();for(const o of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(const o of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(const o of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||s?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));const a=o.querySelector("g");a&&(a.style.display=s?"":"none")}}onDone(e,t){var n;(n=t.panzoom)===null||n===void 0||n.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const t=this.option("parentEl")||e;let n=t.querySelector("."+Wh);return n||(n=document.createElement("div"),bt(n,Wh),t.prepend(n)),n.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&bt(e,pv),this.container=n,n}createEl(e){const t=this.instance,n=t.carousel;if(!n||e==="toggleFS"||e==="fullscreen"&&!tb())return null;let s=null;const r=n.slides.length||0;let o=0,a=0;for(const u of n.slides)(u.panzoom||u.type==="image")&&o++,(u.type==="image"||u.downloadSrc)&&a++;if(r<2&&["infobar","prev","next"].includes(e))return s;if(Gh[e]!==void 0&&!o||e==="download"&&!a)return null;if(e==="thumbs"){const u=t.plugins.Thumbs;if(!u||!u.isEnabled)return null}if(e==="slideshow"&&(!n.plugins.Autoplay||r<2))return null;if(Gh[e]!==void 0){const u=Gh[e];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),bt(s,"f-button"),u.action&&(s.dataset.panzoomAction=u.action),u.change&&(s.dataset.panzoomChange=JSON.stringify(u.change)),s.appendChild(Gs(this.instance.localize(u.icon)))}else{const u=(this.option("items")||[])[e];u&&(s=Gs(this.instance.localize(u.tpl)),typeof u.click=="function"&&s.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),typeof u.click=="function"&&u.click.call(this,this,c)}))}const l=s==null?void 0:s.querySelector("svg");if(l)for(const[u,c]of Object.entries(IM))l.getAttribute(u)||l.setAttribute(u,String(c));return s}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=ko.Disabled;const t=this.instance.container;t&&oi(t,pv)}attach(){const e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(fb,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:RM});const DM={Hash:class extends As{onReady(){Wl=!1}onChange(i){Io&&clearTimeout(Io);const{hash:e}=ib(),{hash:t}=hd(),n=i.isOpeningSlide(i.getSlide());n&&(av=t===e?"":t),e&&e!==t&&(Io=setTimeout(()=>{try{if(i.state===Qi.Ready){let s="replaceState";n&&!lu&&(s="pushState",lu=!0),window.history[s]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(i){if(Io&&clearTimeout(Io),!Wl&&lu)return lu=!1,Wl=!1,void window.history.back();if(!Wl)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(av||""))}catch{}}attach(){const i=this.instance;i.on("ready",this.onReady),i.on(["Carousel.ready","Carousel.change"],this.onChange),i.on("close",this.onClose)}detach(){const i=this.instance;i.off("ready",this.onReady),i.off(["Carousel.ready","Carousel.change"],this.onChange),i.off("close",this.onClose)}static parseURL(){return hd()}static startFromUrl(){nb()}static destroy(){window.removeEventListener("hashchange",rb,!1)}},Html:ab,Images:ob,Slideshow:cb,Thumbs:hb,Toolbar:fb},mv="with-fancybox",jh="hide-scrollbar",gv="--fancybox-scrollbar-compensate",vv="--fancybox-body-margin",qh="aria-hidden",Xh="is-using-tab",Yh="is-animated",yv="is-compact",bv="is-loading",Kh="is-opening",fu="has-caption",la="disabled",wo="tabindex",_v="download",Zh="href",ca="src",zr=i=>typeof i=="string",Ev=function(){var i=window.getSelection();return!!i&&i.type==="Range"};let is,ns=null,xo=null,wv=0,xv=0,Sv=0,Tv=0;const ua=new Map;let OM=0;class Pt extends Tm{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},n={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Qi.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),is||(is=tb()),this.id=t.id||++OM,ua.set(this.id,this),this.userSlides=e,this.userPlugins=n,queueMicrotask(()=>{this.init()})}init(){if(this.state===Qi.Destroy)return;this.state=Qi.Init,this.attachPlugins(Object.assign(Object.assign({},Pt.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Kl)return;const t=document,n=t.body,s=t.documentElement;if(n.classList.contains(jh))return;let r=window.innerWidth-s.getBoundingClientRect().width;const o=parseFloat(window.getComputedStyle(n).marginRight);r<0&&(r=0),s.style.setProperty(gv,`${r}px`),o&&n.style.setProperty(vv,`${o}px`),n.classList.add(jh)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=Qi.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(qh,"false")},16)};this.option("Fullscreen.autoStart")&&is&&!is.isFullscreen()?is.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;const n=this.option("parentEl")||document.body,s=Gs(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(yv,this.isCompact),bt(s,this.option("mainClass")||""),bt(s,Kh),this.container=s,this.footer=s.querySelector(".fancybox__footer"),n.appendChild(s),bt(document.documentElement,mv),ns&&xo||(ns=document.createElement("span"),bt(ns,"fancybox-focus-guard"),ns.setAttribute(wo,"0"),ns.setAttribute(qh,"true"),ns.setAttribute("aria-label","Focus guard"),xo=ns.cloneNode(),(e=s.parentElement)===null||e===void 0||e.insertBefore(ns,s),(t=s.parentElement)===null||t===void 0||t.append(xo)),s.addEventListener("mousedown",r=>{wv=r.pageX,xv=r.pageY,oi(s,Xh)}),this.option("closeExisting"))for(const r of ua.values())r.id!==this.id&&r.close();else this.option("animated")&&(bt(s,Yh),setTimeout(()=>{this.isClosing()||oi(s,Yh)},350));this.emit("initLayout")}}initCarousel(e){const t=this.container;if(!t)return;const n=t.querySelector(".fancybox__carousel");if(!n)return;const s=this.carousel=new $u(n,Cn({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",(r,o,...a)=>{this.emit(`Carousel.${o}`,r,...a)}),s.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,o,a)=>{this.clearContent(a),a.state=void 0}),s.on("Panzoom.touchStart",()=>{var r,o;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((o=this.container)===null||o===void 0||o.focus())}),s.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",(r,o)=>{const a=this.getSlide();if(a&&qf(a.el))return;const l=this.container;if(l){const u=Math.abs(o.current.f),c=u<1?"":Math.max(.5,Math.min(1,1-u/o.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",c?"0s":""),l.style.setProperty("--fancybox-opacity",c+"")}}),s.on("Panzoom.touchEnd",(r,o,a)=>{var l;const u=this.getSlide();if(u&&qf(u.el)||o.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;const c=Math.abs(o.dragOffset.y);o.lockedAxis==="y"&&(c>=200||c>=50&&o.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(o.current.f<0?"Up":"Down")))})),s.on("change",r=>{var o;let a=(o=this.getSlide())===null||o===void 0?void 0:o.triggerEl;if(a){const l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});a.dispatchEvent(l)}}),s.on(["refresh","change"],r=>{const o=this.container;if(!o)return;for(const u of o.querySelectorAll("[data-fancybox-current-index]"))u.innerHTML=r.page+1;for(const u of o.querySelectorAll("[data-fancybox-count]"))u.innerHTML=r.pages.length;if(!r.isInfinite){for(const u of o.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(u.removeAttribute(la),u.removeAttribute(wo)):(u.setAttribute(la,""),u.setAttribute(wo,"-1"));for(const u of o.querySelectorAll("[data-fancybox-prev]"))r.page>0?(u.removeAttribute(la),u.removeAttribute(wo)):(u.setAttribute(la,""),u.setAttribute(wo,"-1"))}const a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!zr(a[ca])||(l=a[ca]);for(const u of o.querySelectorAll("[data-fancybox-download]")){const c=a.downloadFilename;l?(u.removeAttribute(la),u.removeAttribute(wo),u.setAttribute(Zh,l),u.setAttribute(_v,c||l),u.setAttribute("target","_blank")):(u.setAttribute(la,""),u.setAttribute(wo,"-1"),u.removeAttribute(Zh),u.removeAttribute(_v))}}),this.emit("initCarousel")}attachEvents(){const e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const n=window.visualViewport;n&&(n.addEventListener("scroll",e.onResize),n.addEventListener("resize",e.onResize))}detachEvents(){const e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const n=window.visualViewport;n&&(n.removeEventListener("resize",e.onResize),n.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const t=window.visualViewport,n=Math.max(1,(t==null?void 0:t.scale)||1);let s="",r="",o="";if(t&&n>1){let a=`${t.offsetLeft}px`,l=`${t.offsetTop}px`;s=t.width*n+"px",r=t.height*n+"px",o=`translate3d(${a}, ${l}, 0) scale(${1/n})`}e.style.transform=o,e.style.width=s,e.style.height=r}onClick(e){var t;const{container:n,isCompact:s}=this;if(!n||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-wv)>30||Math.abs(e.pageY-xv)>30)return;const o=document.activeElement;if(Ev()&&o&&n.contains(o))return;if(s&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(r.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;r.matches(Hh)||o.blur()}if(Ev())return;a=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(Hh)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const t=e.target;let n=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(n="slide");const s=n==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,u){return Math.abs(u)>Math.abs(l)?u:l}),o=Math.max(-1,Math.min(1,r)),a=Date.now();this.pwt&&a-this.pwt<300?s&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,o),e.defaultPrevented||(n==="close"?(e.preventDefault(),this.close(e)):n==="slide"&&(ud(t)||(e.preventDefault(),this[o>0?"prev":"next"]()))))}onScroll(){window.scrollTo(Sv,Tv)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const t=e.key,n=this.option("keyboard");if(!n)return;const s=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,o=r&&r.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if(t!=="Escape"&&!o&&Mn(s)&&(s.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)!==-1)||(e.key==="Tab"?bt(this.container,Xh):oi(this.container,Xh),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);const a=n[t];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){const e=this.container;if(!e)return;const t=this.isCompact;e.classList.toggle(yv,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){const s=this.plugins.Toolbar;if(s&&s.state===ko.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;const n=this.option("tpl.closeButton");if(n){const s=Gs(this.localize(n));e.closeBtnEl=e.contentEl.appendChild(s),e.el&&bt(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,n;const s="fancybox__caption",r=this.container;if(!r)return;oi(r,fu);const o=this.isCompact||this.option("commonCaption"),a=!o;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(const d of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])d.captionEl&&(d.captionEl.remove(),d.captionEl=void 0,oi(d.el,fu),(n=d.el)===null||n===void 0||n.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||o&&!this.isCurrentSlide(e))return;const l=e.el;let u=this.optionFor(e,"caption","");if(!u)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let c=null;if(a){if(c=e.captionEl||null,l&&!c){const d=s+`_${this.id}_${e.index}`;c=document.createElement("div"),bt(c,s),c.setAttribute("id",d),e.captionEl=l.appendChild(c),bt(l,fu),l.setAttribute("aria-labelledby",d)}}else c=this.caption,c||(c=r.querySelector("."+s)),!c&&(c=document.createElement("div"),c.dataset.fancyboxCaption="",bt(c,s),(this.footer||r).prepend(c)),bt(r,fu),this.caption=c;c&&(c.innerHTML="",zr(u)||typeof u=="number"?c.innerHTML=u+"":u instanceof HTMLElement&&c.appendChild(u))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;const n=document.activeElement||null,s=(e==null?void 0:e.target)||null,r=this.container,o=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!o||!e&&n&&r.contains(n))return;const a=this.getSlide(),l=a&&a.state===fn.Ready?a.el:null;if(!l||l.contains(n)||r===n)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const u=Array.from(r.querySelectorAll(Hh));let c=[],d=null;for(let f of u){const m=!f.offsetParent||!!f.closest('[aria-hidden="true"]'),b=l&&l.contains(f),v=!o.contains(f);if(f===r||(b||v)&&!m){c.push(f);const g=f.dataset.origTabindex;g!==void 0&&g&&(f.tabIndex=parseFloat(g)),f.removeAttribute("data-orig-tabindex"),!f.hasAttribute("autoFocus")&&d||(d=f)}else{const g=f.dataset.origTabindex===void 0?f.getAttribute("tabindex")||"":f.dataset.origTabindex;g&&(f.dataset.origTabindex=g),f.tabIndex=-1}}let h=null;e?(!s||c.indexOf(s)<0)&&(h=d||r,c.length&&(n===xo?h=c[0]:this.lastFocus!==r&&n!==ns||(h=c[c.length-1]))):h=a&&a.type==="image"?r:d||r,h&&ov(h),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=Pt.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",n){if(!e||!t)return void(n&&n());this.stop(e);const s=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",s),delete e.dataset.animationName,n&&n(),oi(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",s),bt(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",n=!0){if(this.isClosing())return;const s=e.el;if(!s)return;let r=null;if(Mn(t)?r=t:(r=Gs(t+""),Mn(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){const o=document.createElement("div");o.appendChild(r),r=o}Mn(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&Mn(r)?(bt(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),s.classList.add(`has-${e.error?"error":e.type||"unknown"}`),s.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=r,n&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){const n=e.el,s=e.contentEl;n&&s&&(this.emit("reveal",e),this.hideLoading(e),e.state=fn.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(s,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=fn.Ready,this.emit("done",e),bt(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(oi(this.container,Kh),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,n;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((n=this.getSlide())===null||n===void 0?void 0:n.index)}showLoading(e){e.state=fn.Loading;const t=e.el;t&&(bt(t,bv),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===fn.Loading){let n=Gs(Mm);bt(n,"fancybox-spinner"),e.spinnerEl=n,t.prepend(n),this.animate(n,"f-fadeIn")}},250))}hideLoading(e){const t=e.el;if(!t)return;const n=e.spinnerEl;this.isClosing()?n==null||n.remove():(oi(t,bv),n&&this.animate(n,"f-fadeOut",()=>{n.remove()}),e.state===fn.Loading&&(this.emit("loaded",e),e.state=fn.Ready))}setError(e,t){if(this.isClosing())return;const n=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",n,e),n.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);const s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,s)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const t=e.el;t&&(oi(t,"has-error"),oi(t,"has-unknown"),oi(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const t=this.carousel;return((e=t==null?void 0:t.pages[t==null?void 0:t.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;const n=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",n,e),n.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const s=()=>{this.proceedClose(e,t)};this.startedFs&&is&&is.isFullscreen()?Promise.resolve(is.exit()).then(()=>s()):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const t=()=>{this.clearIdle(),this.idle=!0,bt(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{const n=this.option("idle");n&&(this.idleTimer=setTimeout(t,n))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,oi(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){is&&(is.isFullscreen()?is.exit():is.request().then(()=>{this.startedFs=!0}))}isClosing(){return[Qi.Closing,Qi.CustomClosing,Qi.Destroy].includes(this.state)}proceedClose(e,t){var n,s;this.state=Qi.Closing,this.clearIdle(),this.detachEvents();const r=this.container,o=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(eb(l)?ov(l):l.focus()),r&&(oi(r,Kh),bt(r,"is-closing"),r.setAttribute(qh,"true"),this.option("animated")&&bt(r,Yh),r.style.pointerEvents="none"),o){o.clearTransitions(),(n=o.panzoom)===null||n===void 0||n.destroy(),(s=o.plugins.Navigation)===null||s===void 0||s.detach();for(const u of o.slides){u.state=fn.Closing,this.hideLoading(u);const c=u.contentEl;c&&this.stop(c);const d=u==null?void 0:u.panzoom;d&&(d.stop(),d.detachEvents(),d.detachObserver()),this.isCurrentSlide(u)||o.emit("removeSlide",u)}}Sv=window.scrollX,Tv=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==Qi.CustomClosing?(t===void 0&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,()=>{o&&o.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===Qi.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=Qi.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const t=this.container;t&&t.remove(),ua.delete(this.id);const n=Pt.getInstance();n?n.focus():(ns&&(ns.remove(),ns=null),xo&&(xo.remove(),xo=null),oi(document.documentElement,mv),(()=>{if(!Kl)return;const s=document,r=s.body;r.classList.remove(jh),r.style.setProperty(vv,""),s.documentElement.style.setProperty(gv,"")})(),this.emit("destroy"))}static bind(e,t,n){if(!Kl)return;let s,r="",o={};if(e===void 0?s=document.body:zr(e)?(s=document.body,r=e,typeof t=="object"&&(o=t||{})):(s=e,zr(t)&&(r=t),typeof n=="object"&&(o=n||{})),!s||!Mn(s))return;r=r||"[data-fancybox]";const a=Pt.openers.get(s)||new Map;a.set(r,o),Pt.openers.set(s,a),a.size===1&&s.addEventListener("click",Pt.fromEvent)}static unbind(e,t){let n,s="";if(zr(e)?(n=document.body,s=e):(n=e,zr(t)&&(s=t)),!n)return;const r=Pt.openers.get(n);r&&s&&r.delete(s),s&&r||(Pt.openers.delete(n),n.removeEventListener("click",Pt.fromEvent))}static destroy(){let e;for(;e=Pt.getInstance();)e.destroy();for(const t of Pt.openers.keys())t.removeEventListener("click",Pt.fromEvent);Pt.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const n=t.closest("[data-fancybox-trigger]");if(n){const m=n.dataset.fancyboxTrigger||"",b=document.querySelectorAll(`[data-fancybox="${m}"]`),v=parseInt(n.dataset.fancyboxIndex||"",10)||0;t=b[v]||t}if(!(t&&t instanceof Element))return;let s,r,o,a;if([...Pt.openers].reverse().find(([m,b])=>!(!m.contains(t)||![...b].reverse().find(([v,g])=>{let E=t.closest(v);return!!E&&(s=m,r=v,o=E,a=g,!0)}))),!s||!r||!o)return;a=a||{},e.preventDefault(),t=o;let l=[],u=Cn({},Kf,a);u.event=e,u.triggerEl=t,u.delegate=n;const c=u.groupAll,d=u.groupAttr,h=d&&t?t.getAttribute(`${d}`):"";if((!t||h||c)&&(l=[].slice.call(s.querySelectorAll(r))),t&&!c&&(l=h?l.filter(m=>m.getAttribute(`${d}`)===h):[t]),!l.length)return;const f=Pt.getInstance();return f&&f.options.triggerEl&&l.indexOf(f.options.triggerEl)>-1?void 0:(t&&(u.startIndex=l.indexOf(t)),Pt.fromNodes(l,u))}static fromSelector(e,t,n){let s=null,r="",o={};if(zr(e)?(s=document.body,r=e,typeof t=="object"&&(o=t||{})):e instanceof HTMLElement&&zr(t)&&(s=e,r=t,typeof n=="object"&&(o=n||{})),!s||!r)return!1;const a=Pt.openers.get(s);return!!a&&(o=Cn({},a.get(r)||{},o),!!o&&Pt.fromNodes(Array.from(s.querySelectorAll(r)),o))}static fromNodes(e,t){t=Cn({},Kf,t||{});const n=[];for(const s of e){const r=s.dataset||{},o=r[ca]||s.getAttribute(Zh)||s.getAttribute("currentSrc")||s.getAttribute(ca)||void 0;let a;const l=t.delegate;let u;l&&n.length===t.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),a&&(u=a.currentSrc||a[ca]||void 0,!u&&a.dataset&&(u=a.dataset.lazySrc||a.dataset[ca]||void 0));const c={src:o,triggerEl:s,thumbEl:a,thumbElSrc:u,thumbSrc:u};for(const d in r){let h=r[d]+"";h=h!=="false"&&(h==="true"||h),c[d]=h}n.push(c)}return new Pt(n,t)}static getInstance(e){return e?ua.get(e):Array.from(ua.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=Pt.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new Pt(e,t)}static next(){const e=Pt.getInstance();e&&e.next()}static prev(){const e=Pt.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(const n of ua.values())n.close(...t);else{const n=Pt.getInstance();n&&n.close(...t)}}}Object.defineProperty(Pt,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Pt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Kf}),Object.defineProperty(Pt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:DM}),Object.defineProperty(Pt,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});const En={Toolbar:{display:{left:[],right:["close"]}},Carousel:{Navigation:{nextTpl:'<svg><use xlink:href="img/icons/icons.svg#i-arrow-right"></use></svg>',prevTpl:'<svg><use xlink:href="img/icons/icons.svg#i-arrow-right"></use></svg>'}},contentClick:"iterateZoom",Images:{Panzoom:{maxScale:3}},Thumbs:!1,caption:(i,e)=>{var n;const t=e.caption||"";return`${e.index+1} / ${(n=i.carousel)==null?void 0:n.slides.length} <br /> ${t}`}};Pt.bind('[data-fancybox="clinic--gallery"]',En);Pt.bind('[data-fancybox="stay-conditions--gallery"]',En);Pt.bind('[data-fancybox="stay-conditions--gallery-mob"]',En);Pt.bind('[data-fancybox="hospital--gallery"]',En);Pt.bind('[data-fancybox="hospital--gallery-mob"]',En);Pt.bind('[data-fancybox="certificates--gallery"]',En);Pt.bind('[data-fancybox="media--gallery-1"]',En);Pt.bind('[data-fancybox="media--gallery-2"]',En);Pt.bind('[data-fancybox="media--gallery-3"]',En);Pt.bind('[data-fancybox="offices-direction--gallery-1"]',En);Pt.bind('[data-fancybox="offices-direction--gallery-2"]',En);Pt.bind('[data-fancybox="offices-direction--gallery-3"]',En);Pt.bind('[data-fancybox="offices-direction--gallery-4"]',En);Pt.bind('[data-fancybox="offices-direction--gallery-5"]',En);Pt.bind('[data-fancybox="offices-direction--gallery-6"]',En);var NM={exports:{}};/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */(function(i,e){(function(t){i.exports=t(dc)})(function(t){function n(f,m,b){var v;return function(){var g=this,E=arguments,w=function(){v=null,f.apply(g,E)};clearTimeout(v),v=setTimeout(w,m)}}function s(f){var m=++d;return"rmjs-"+m}function r(f){var m=f.clone().css({height:"auto",width:f.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(f),b=m.outerHeight(),v=parseInt(m.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),g=f.data("defaultHeight");m.remove();var E=v||f.data("collapsedHeight")||g;f.data({expandedHeight:b,maxHeight:v,collapsedHeight:E}).css({maxHeight:"none"})}function o(f){if(!c[f.selector]){var m=" ";f.embedCSS&&f.blockCSS!==""&&(m+=f.selector+" + [data-readmore-toggle], "+f.selector+"[data-readmore]{"+f.blockCSS+"}"),m+=f.selector+"[data-readmore]{transition: height "+f.speed+"ms;overflow: hidden;}",function(b,v){var g=b.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=v:g.appendChild(b.createTextNode(v)),b.getElementsByTagName("head")[0].appendChild(g)}(document,m),c[f.selector]=!0}}function a(f,m){this.element=f,this.options=t.extend({},u,m),o(this.options),this._defaults=u,this._name=l,this.init(),window.addEventListener?(window.addEventListener("load",h),window.addEventListener("resize",h)):(window.attachEvent("load",h),window.attachEvent("resize",h))}var l="readmore",u={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},c={},d=0,h=n(function(){t("[data-readmore]").each(function(){var f=t(this),m=f.attr("aria-expanded")==="true";r(f),f.css({height:f.data(m?"expandedHeight":"collapsedHeight")})})},100);a.prototype={init:function(){var f=t(this.element);f.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),r(f);var m=f.data("collapsedHeight"),b=f.data("heightMargin");if(f.outerHeight(!0)<=m+b)return this.options.blockProcessed&&typeof this.options.blockProcessed=="function"&&this.options.blockProcessed(f,!1),!0;var v=f.attr("id")||s(),g=this.options.startOpen?this.options.lessLink:this.options.moreLink;f.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:v}),f.after(t(g).on("click",function(E){return function(w){E.toggle(this,f[0],w)}}(this)).attr({"data-readmore-toggle":v,"aria-controls":v})),this.options.startOpen||f.css({height:m}),this.options.blockProcessed&&typeof this.options.blockProcessed=="function"&&this.options.blockProcessed(f,!0)},toggle:function(f,m,b){b&&b.preventDefault(),f||(f=t('[aria-controls="'+this.element.id+'"]')[0]),m||(m=this.element);var v=t(m),g="",E="",w=!1,S=v.data("collapsedHeight");v.height()<=S?(g=v.data("expandedHeight")+"px",E="lessLink",w=!0):(g=S,E="moreLink"),this.options.beforeToggle&&typeof this.options.beforeToggle=="function"&&this.options.beforeToggle(f,v,!w),v.css({height:g}),v.on("transitionend",function(I){return function(){I.options.afterToggle&&typeof I.options.afterToggle=="function"&&I.options.afterToggle(f,v,w),t(this).attr({"aria-expanded":w}).off("transitionend")}}(this)),t(f).replaceWith(t(this.options[E]).on("click",function(I){return function(D){I.toggle(this,m,D)}}(this)).attr({"data-readmore-toggle":v.attr("id"),"aria-controls":v.attr("id")}))},destroy:function(){t(this.element).each(function(){var f=t(this);f.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),f.removeData()})}},t.fn.readmore=function(f){var m=arguments,b=this.selector;return f=f||{},typeof f=="object"?this.each(function(){if(t.data(this,"plugin_"+l)){var v=t.data(this,"plugin_"+l);v.destroy.apply(v)}f.selector=b,t.data(this,"plugin_"+l,new a(this,f))}):typeof f=="string"&&f[0]!=="_"&&f!=="init"?this.each(function(){var v=t.data(this,"plugin_"+l);v instanceof a&&typeof v[f]=="function"&&v[f].apply(v,Array.prototype.slice.call(m,1))}):void 0}})})(NM);ve(document).ready(function(){function i(){window.innerWidth<1200?ve(".spoiler--contacts").readmore({speed:75,collapsedHeight:!1,moreLink:'<button class="btn-read-more btn rounded-0 mt-8 p-0 h5 text-blue">ÐÐ¾ÐºÐ°Ð·Ð°ÑÐ¸ Ð±ÑÐ»ÑÑÐµ</button>',lessLink:'<button class="btn-read-more btn rounded-0 mt-8 p-0 h5 text-blue">ÐÐ¾ÐºÐ°Ð·Ð°ÑÐ¸ Ð¼ÐµÐ½ÑÐµ</button>'}):ve(".spoiler--contacts").readmore("destroy").css("height","auto")}i(),ve(window).resize(function(){i()}),ve(".modal").on("shown.bs.modal",function(){i()})});ve(document).ready(function(){function i(){ve(".spoiler-list").readmore({speed:75,collapsedHeight:!1,moreLink:'<button class="btn-read-more btn rounded-0 mt-3 p-0 text-blue">ÐÐ¾ÐºÐ°Ð·Ð°ÑÐ¸ Ð±ÑÐ»ÑÑÐµ</button>',lessLink:'<button class="btn-read-more btn rounded-0 mt-3 p-0 text-blue">ÐÐ¾ÐºÐ°Ð·Ð°ÑÐ¸ Ð¼ÐµÐ½ÑÐµ</button>'})}i(),ve(window).resize(function(){i()})});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Cm="169",kM=0,Mv=1,FM=2,pb=1,UM=2,vr=3,oo=0,Pn=1,Er=2,Jr=0,Da=1,Cv=2,Av=3,Pv=4,zM=5,Do=100,BM=101,HM=102,VM=103,$M=104,GM=200,WM=201,jM=202,qM=203,Zf=204,Qf=205,XM=206,YM=207,KM=208,ZM=209,QM=210,JM=211,eC=212,tC=213,iC=214,Jf=0,ep=1,tp=2,Ga=3,ip=4,np=5,sp=6,rp=7,mb=0,nC=1,sC=2,eo=0,rC=1,oC=2,aC=3,lC=4,cC=5,uC=6,dC=7,gb=300,Wa=301,ja=302,op=303,ap=304,zd=306,lp=1e3,Fo=1001,cp=1002,us=1003,hC=1004,pu=1005,ls=1006,Qh=1007,Qr=1008,Ar=1009,vb=1010,yb=1011,yc=1012,Am=1013,$o=1014,Sr=1015,Rc=1016,Pm=1017,Lm=1018,qa=1020,bb=35902,_b=1021,Eb=1022,Ts=1023,wb=1024,xb=1025,Oa=1026,Xa=1027,Sb=1028,Rm=1029,Tb=1030,Im=1031,Dm=1033,Gu=33776,Wu=33777,ju=33778,qu=33779,up=35840,dp=35841,hp=35842,fp=35843,pp=36196,mp=37492,gp=37496,vp=37808,yp=37809,bp=37810,_p=37811,Ep=37812,wp=37813,xp=37814,Sp=37815,Tp=37816,Mp=37817,Cp=37818,Ap=37819,Pp=37820,Lp=37821,Xu=36492,Rp=36494,Ip=36495,Mb=36283,Dp=36284,Op=36285,Np=36286,fC=3200,pC=3201,mC=0,gC=1,Xr="",Bs="srgb",Lr="srgb-linear",Om="display-p3",Bd="display-p3-linear",fd="linear",Ei="srgb",pd="rec709",md="p3",da=7680,Lv=519,vC=512,yC=513,bC=514,Cb=515,_C=516,EC=517,wC=518,xC=519,Rv=35044,Iv="300 es",Tr=2e3,gd=2001;class il{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Dv=1234567;const Zl=Math.PI/180,bc=180/Math.PI;function nl(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(dn[i&255]+dn[i>>8&255]+dn[i>>16&255]+dn[i>>24&255]+"-"+dn[e&255]+dn[e>>8&255]+"-"+dn[e>>16&15|64]+dn[e>>24&255]+"-"+dn[t&63|128]+dn[t>>8&255]+"-"+dn[t>>16&255]+dn[t>>24&255]+dn[n&255]+dn[n>>8&255]+dn[n>>16&255]+dn[n>>24&255]).toLowerCase()}function rn(i,e,t){return Math.max(e,Math.min(t,i))}function Nm(i,e){return(i%e+e)%e}function SC(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function TC(i,e,t){return i!==e?(t-i)/(e-i):0}function Ql(i,e,t){return(1-t)*i+t*e}function MC(i,e,t,n){return Ql(i,e,1-Math.exp(-t*n))}function CC(i,e=1){return e-Math.abs(Nm(i,e*2)-e)}function AC(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function PC(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function LC(i,e){return i+Math.floor(Math.random()*(e-i+1))}function RC(i,e){return i+Math.random()*(e-i)}function IC(i){return i*(.5-Math.random())}function DC(i){i!==void 0&&(Dv=i);let e=Dv+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function OC(i){return i*Zl}function NC(i){return i*bc}function kC(i){return(i&i-1)===0&&i!==0}function FC(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function UC(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function zC(i,e,t,n,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),u=r((e+n)/2),c=o((e+n)/2),d=r((e-n)/2),h=o((e-n)/2),f=r((n-e)/2),m=o((n-e)/2);switch(s){case"XYX":i.set(a*c,l*d,l*h,a*u);break;case"YZY":i.set(l*h,a*c,l*d,a*u);break;case"ZXZ":i.set(l*d,l*h,a*c,a*u);break;case"XZX":i.set(a*c,l*m,l*f,a*u);break;case"YXY":i.set(l*f,a*c,l*m,a*u);break;case"ZYZ":i.set(l*m,l*f,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ta(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function gn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const wi={DEG2RAD:Zl,RAD2DEG:bc,generateUUID:nl,clamp:rn,euclideanModulo:Nm,mapLinear:SC,inverseLerp:TC,lerp:Ql,damp:MC,pingpong:CC,smoothstep:AC,smootherstep:PC,randInt:LC,randFloat:RC,randFloatSpread:IC,seededRandom:DC,degToRad:OC,radToDeg:NC,isPowerOfTwo:kC,ceilPowerOfTwo:FC,floorPowerOfTwo:UC,setQuaternionFromProperEuler:zC,normalize:gn,denormalize:Ta};class ei{constructor(e=0,t=0){ei.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(rn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*s+e.x,this.y=r*s+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vt{constructor(e,t,n,s,r,o,a,l,u){Vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,a,l,u)}set(e,t,n,s,r,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=s,c[2]=a,c[3]=t,c[4]=r,c[5]=l,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],a=n[3],l=n[6],u=n[1],c=n[4],d=n[7],h=n[2],f=n[5],m=n[8],b=s[0],v=s[3],g=s[6],E=s[1],w=s[4],S=s[7],I=s[2],D=s[5],y=s[8];return r[0]=o*b+a*E+l*I,r[3]=o*v+a*w+l*D,r[6]=o*g+a*S+l*y,r[1]=u*b+c*E+d*I,r[4]=u*v+c*w+d*D,r[7]=u*g+c*S+d*y,r[2]=h*b+f*E+m*I,r[5]=h*v+f*w+m*D,r[8]=h*g+f*S+m*y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*r*c+n*a*l+s*r*u-s*o*l}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=c*o-a*u,h=a*l-c*r,f=u*r-o*l,m=t*d+n*h+s*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/m;return e[0]=d*b,e[1]=(s*u-c*n)*b,e[2]=(a*n-s*o)*b,e[3]=h*b,e[4]=(c*t-s*l)*b,e[5]=(s*r-a*t)*b,e[6]=f*b,e[7]=(n*l-u*t)*b,e[8]=(o*t-n*r)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,o,a){const l=Math.cos(r),u=Math.sin(r);return this.set(n*l,n*u,-n*(l*o+u*a)+o+e,-s*u,s*l,-s*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Jh.makeScale(e,t)),this}rotate(e){return this.premultiply(Jh.makeRotation(-e)),this}translate(e,t){return this.premultiply(Jh.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Jh=new Vt;function Ab(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function vd(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function BC(){const i=vd("canvas");return i.style.display="block",i}const Ov={};function Yu(i){i in Ov||(Ov[i]=!0,console.warn(i))}function HC(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}function VC(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function $C(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Nv=new Vt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),kv=new Vt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),kl={[Lr]:{transfer:fd,primaries:pd,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[Bs]:{transfer:Ei,primaries:pd,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[Bd]:{transfer:fd,primaries:md,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(kv),fromReference:i=>i.applyMatrix3(Nv)},[Om]:{transfer:Ei,primaries:md,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(kv),fromReference:i=>i.applyMatrix3(Nv).convertLinearToSRGB()}},GC=new Set([Lr,Bd]),ai={enabled:!0,_workingColorSpace:Lr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!GC.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=kl[e].toReference,s=kl[t].fromReference;return s(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return kl[i].primaries},getTransfer:function(i){return i===Xr?fd:kl[i].transfer},getLuminanceCoefficients:function(i,e=this._workingColorSpace){return i.fromArray(kl[e].luminanceCoefficients)}};function Na(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function ef(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let ha;class WC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ha===void 0&&(ha=vd("canvas")),ha.width=e.width,ha.height=e.height;const n=ha.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ha}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=vd("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Na(r[o]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Na(t[n]/255)*255):t[n]=Na(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let jC=0;class Pb{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jC++}),this.uuid=nl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(tf(s[o].image)):r.push(tf(s[o]))}else r=tf(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function tf(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?WC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qC=0;class _n extends il{constructor(e=_n.DEFAULT_IMAGE,t=_n.DEFAULT_MAPPING,n=Fo,s=Fo,r=ls,o=Qr,a=Ts,l=Ar,u=_n.DEFAULT_ANISOTROPY,c=Xr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qC++}),this.uuid=nl(),this.name="",this.source=new Pb(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ei(0,0),this.repeat=new ei(1,1),this.center=new ei(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==gb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case lp:e.x=e.x-Math.floor(e.x);break;case Fo:e.x=e.x<0?0:1;break;case cp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case lp:e.y=e.y-Math.floor(e.y);break;case Fo:e.y=e.y<0?0:1;break;case cp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}_n.DEFAULT_IMAGE=null;_n.DEFAULT_MAPPING=gb;_n.DEFAULT_ANISOTROPY=1;class ki{constructor(e=0,t=0,n=0,s=1){ki.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const l=e.elements,u=l[0],c=l[4],d=l[8],h=l[1],f=l[5],m=l[9],b=l[2],v=l[6],g=l[10];if(Math.abs(c-h)<.01&&Math.abs(d-b)<.01&&Math.abs(m-v)<.01){if(Math.abs(c+h)<.1&&Math.abs(d+b)<.1&&Math.abs(m+v)<.1&&Math.abs(u+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(u+1)/2,S=(f+1)/2,I=(g+1)/2,D=(c+h)/4,y=(d+b)/4,B=(m+v)/4;return w>S&&w>I?w<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(w),s=D/n,r=y/n):S>I?S<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(S),n=D/s,r=B/s):I<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(I),n=y/r,s=B/r),this.set(n,s,r,t),this}let E=Math.sqrt((v-m)*(v-m)+(d-b)*(d-b)+(h-c)*(h-c));return Math.abs(E)<.001&&(E=1),this.x=(v-m)/E,this.y=(d-b)/E,this.z=(h-c)/E,this.w=Math.acos((u+f+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class XC extends il{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ki(0,0,e,t),this.scissorTest=!1,this.viewport=new ki(0,0,e,t);const s={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ls,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new _n(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,s=e.textures.length;n<s;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Pb(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ao extends XC{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Lb extends _n{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=us,this.minFilter=us,this.wrapR=Fo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class YC extends _n{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=us,this.minFilter=us,this.wrapR=Fo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sl{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,o,a){let l=n[s+0],u=n[s+1],c=n[s+2],d=n[s+3];const h=r[o+0],f=r[o+1],m=r[o+2],b=r[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=m,e[t+3]=b;return}if(d!==b||l!==h||u!==f||c!==m){let v=1-a;const g=l*h+u*f+c*m+d*b,E=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const I=Math.sqrt(w),D=Math.atan2(I,g*E);v=Math.sin(v*D)/I,a=Math.sin(a*D)/I}const S=a*E;if(l=l*v+h*S,u=u*v+f*S,c=c*v+m*S,d=d*v+b*S,v===1-a){const I=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=I,u*=I,c*=I,d*=I}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,s,r,o){const a=n[s],l=n[s+1],u=n[s+2],c=n[s+3],d=r[o],h=r[o+1],f=r[o+2],m=r[o+3];return e[t]=a*m+c*d+l*f-u*h,e[t+1]=l*m+c*h+u*d-a*f,e[t+2]=u*m+c*f+a*h-l*d,e[t+3]=c*m-a*d-l*h-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(n/2),c=a(s/2),d=a(r/2),h=l(n/2),f=l(s/2),m=l(r/2);switch(o){case"XYZ":this._x=h*c*d+u*f*m,this._y=u*f*d-h*c*m,this._z=u*c*m+h*f*d,this._w=u*c*d-h*f*m;break;case"YXZ":this._x=h*c*d+u*f*m,this._y=u*f*d-h*c*m,this._z=u*c*m-h*f*d,this._w=u*c*d+h*f*m;break;case"ZXY":this._x=h*c*d-u*f*m,this._y=u*f*d+h*c*m,this._z=u*c*m+h*f*d,this._w=u*c*d-h*f*m;break;case"ZYX":this._x=h*c*d-u*f*m,this._y=u*f*d+h*c*m,this._z=u*c*m-h*f*d,this._w=u*c*d+h*f*m;break;case"YZX":this._x=h*c*d+u*f*m,this._y=u*f*d+h*c*m,this._z=u*c*m-h*f*d,this._w=u*c*d-h*f*m;break;case"XZY":this._x=h*c*d-u*f*m,this._y=u*f*d-h*c*m,this._z=u*c*m+h*f*d,this._w=u*c*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],d=t[10],h=n+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-l)*f,this._y=(r-u)*f,this._z=(o-s)*f}else if(n>a&&n>d){const f=2*Math.sqrt(1+n-a-d);this._w=(c-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+u)/f}else if(a>d){const f=2*Math.sqrt(1+a-n-d);this._w=(r-u)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+d-n-a);this._w=(o-s)/f,this._x=(r+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+s*u-r*l,this._y=s*c+o*l+r*a-n*u,this._z=r*c+o*u+n*l-s*a,this._w=o*c-n*a-s*l-r*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+n*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class xe{constructor(e=0,t=0,n=0){xe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Fv.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Fv.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*s-a*n),c=2*(a*t-r*s),d=2*(r*n-o*t);return this.x=t+l*u+o*d-a*c,this.y=n+l*c+a*u-r*d,this.z=s+l*d+r*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-n*l,this.z=n*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return nf.copy(this).projectOnVector(e),this.sub(nf)}reflect(e){return this.sub(nf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(rn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nf=new xe,Fv=new sl;class rl{constructor(e=new xe(1/0,1/0,1/0),t=new xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(bs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(bs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=bs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,bs):bs.fromBufferAttribute(r,o),bs.applyMatrix4(e.matrixWorld),this.expandByPoint(bs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),mu.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),mu.copy(n.boundingBox)),mu.applyMatrix4(e.matrixWorld),this.union(mu)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,bs),bs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fl),gu.subVectors(this.max,Fl),fa.subVectors(e.a,Fl),pa.subVectors(e.b,Fl),ma.subVectors(e.c,Fl),Br.subVectors(pa,fa),Hr.subVectors(ma,pa),So.subVectors(fa,ma);let t=[0,-Br.z,Br.y,0,-Hr.z,Hr.y,0,-So.z,So.y,Br.z,0,-Br.x,Hr.z,0,-Hr.x,So.z,0,-So.x,-Br.y,Br.x,0,-Hr.y,Hr.x,0,-So.y,So.x,0];return!sf(t,fa,pa,ma,gu)||(t=[1,0,0,0,1,0,0,0,1],!sf(t,fa,pa,ma,gu))?!1:(vu.crossVectors(Br,Hr),t=[vu.x,vu.y,vu.z],sf(t,fa,pa,ma,gu))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(bs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hr=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],bs=new xe,mu=new rl,fa=new xe,pa=new xe,ma=new xe,Br=new xe,Hr=new xe,So=new xe,Fl=new xe,gu=new xe,vu=new xe,To=new xe;function sf(i,e,t,n,s){for(let r=0,o=i.length-3;r<=o;r+=3){To.fromArray(i,r);const a=s.x*Math.abs(To.x)+s.y*Math.abs(To.y)+s.z*Math.abs(To.z),l=e.dot(To),u=t.dot(To),c=n.dot(To);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const KC=new rl,Ul=new xe,rf=new xe;class km{constructor(e=new xe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):KC.setFromPoints(e).getCenter(n);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ul.subVectors(e,this.center);const t=Ul.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(Ul,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(rf.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ul.copy(e.center).add(rf)),this.expandByPoint(Ul.copy(e.center).sub(rf))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fr=new xe,of=new xe,yu=new xe,Vr=new xe,af=new xe,bu=new xe,lf=new xe;class Rb{constructor(e=new xe,t=new xe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fr.copy(this.origin).addScaledVector(this.direction,t),fr.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){of.copy(e).add(t).multiplyScalar(.5),yu.copy(t).sub(e).normalize(),Vr.copy(this.origin).sub(of);const r=e.distanceTo(t)*.5,o=-this.direction.dot(yu),a=Vr.dot(this.direction),l=-Vr.dot(yu),u=Vr.lengthSq(),c=Math.abs(1-o*o);let d,h,f,m;if(c>0)if(d=o*l-a,h=o*a-l,m=r*c,d>=0)if(h>=-m)if(h<=m){const b=1/c;d*=b,h*=b,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+u}else h=r,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+u;else h=-r,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+u;else h<=-m?(d=Math.max(0,-(-o*r+a)),h=d>0?-r:Math.min(Math.max(-r,-l),r),f=-d*d+h*(h+2*l)+u):h<=m?(d=0,h=Math.min(Math.max(-r,-l),r),f=h*(h+2*l)+u):(d=Math.max(0,-(o*r+a)),h=d>0?r:Math.min(Math.max(-r,-l),r),f=-d*d+h*(h+2*l)+u);else h=o>0?-r:r,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(of).addScaledVector(yu,h),f}intersectSphere(e,t){fr.subVectors(e.center,this.origin);const n=fr.dot(this.direction),s=fr.dot(fr)-n*n,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,s=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,s=(e.min.x-h.x)*u),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||r>s||((r>n||isNaN(n))&&(n=r),(o<s||isNaN(s))&&(s=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),n>l||a>s)||((a>n||n!==n)&&(n=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,fr)!==null}intersectTriangle(e,t,n,s,r){af.subVectors(t,e),bu.subVectors(n,e),lf.crossVectors(af,bu);let o=this.direction.dot(lf),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Vr.subVectors(this.origin,e);const l=a*this.direction.dot(bu.crossVectors(Vr,bu));if(l<0)return null;const u=a*this.direction.dot(af.cross(Vr));if(u<0||l+u>o)return null;const c=-a*Vr.dot(lf);return c<0?null:this.at(c/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ai{constructor(e,t,n,s,r,o,a,l,u,c,d,h,f,m,b,v){Ai.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,a,l,u,c,d,h,f,m,b,v)}set(e,t,n,s,r,o,a,l,u,c,d,h,f,m,b,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=s,g[1]=r,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=c,g[10]=d,g[14]=h,g[3]=f,g[7]=m,g[11]=b,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ai().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/ga.setFromMatrixColumn(e,0).length(),r=1/ga.setFromMatrixColumn(e,1).length(),o=1/ga.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(s),u=Math.sin(s),c=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=o*c,f=o*d,m=a*c,b=a*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=f+m*u,t[5]=h-b*u,t[9]=-a*l,t[2]=b-h*u,t[6]=m+f*u,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,f=l*d,m=u*c,b=u*d;t[0]=h+b*a,t[4]=m*a-f,t[8]=o*u,t[1]=o*d,t[5]=o*c,t[9]=-a,t[2]=f*a-m,t[6]=b+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,f=l*d,m=u*c,b=u*d;t[0]=h-b*a,t[4]=-o*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*c,t[9]=b-h*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,f=o*d,m=a*c,b=a*d;t[0]=l*c,t[4]=m*u-f,t[8]=h*u+b,t[1]=l*d,t[5]=b*u+h,t[9]=f*u-m,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,f=o*u,m=a*l,b=a*u;t[0]=l*c,t[4]=b-h*d,t[8]=m*d+f,t[1]=d,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=f*d+m,t[10]=h-b*d}else if(e.order==="XZY"){const h=o*l,f=o*u,m=a*l,b=a*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=h*d+b,t[5]=o*c,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*c,t[10]=b*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZC,e,QC)}lookAt(e,t,n){const s=this.elements;return On.subVectors(e,t),On.lengthSq()===0&&(On.z=1),On.normalize(),$r.crossVectors(n,On),$r.lengthSq()===0&&(Math.abs(n.z)===1?On.x+=1e-4:On.z+=1e-4,On.normalize(),$r.crossVectors(n,On)),$r.normalize(),_u.crossVectors(On,$r),s[0]=$r.x,s[4]=_u.x,s[8]=On.x,s[1]=$r.y,s[5]=_u.y,s[9]=On.y,s[2]=$r.z,s[6]=_u.z,s[10]=On.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],a=n[4],l=n[8],u=n[12],c=n[1],d=n[5],h=n[9],f=n[13],m=n[2],b=n[6],v=n[10],g=n[14],E=n[3],w=n[7],S=n[11],I=n[15],D=s[0],y=s[4],B=s[8],V=s[12],C=s[1],A=s[5],H=s[9],P=s[13],F=s[2],Y=s[6],Q=s[10],G=s[14],z=s[3],ue=s[7],Ee=s[11],J=s[15];return r[0]=o*D+a*C+l*F+u*z,r[4]=o*y+a*A+l*Y+u*ue,r[8]=o*B+a*H+l*Q+u*Ee,r[12]=o*V+a*P+l*G+u*J,r[1]=c*D+d*C+h*F+f*z,r[5]=c*y+d*A+h*Y+f*ue,r[9]=c*B+d*H+h*Q+f*Ee,r[13]=c*V+d*P+h*G+f*J,r[2]=m*D+b*C+v*F+g*z,r[6]=m*y+b*A+v*Y+g*ue,r[10]=m*B+b*H+v*Q+g*Ee,r[14]=m*V+b*P+v*G+g*J,r[3]=E*D+w*C+S*F+I*z,r[7]=E*y+w*A+S*Y+I*ue,r[11]=E*B+w*H+S*Q+I*Ee,r[15]=E*V+w*P+S*G+I*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],f=e[14],m=e[3],b=e[7],v=e[11],g=e[15];return m*(+r*l*d-s*u*d-r*a*h+n*u*h+s*a*f-n*l*f)+b*(+t*l*f-t*u*h+r*o*h-s*o*f+s*u*c-r*l*c)+v*(+t*u*d-t*a*f-r*o*d+n*o*f+r*a*c-n*u*c)+g*(-s*a*c-t*l*d+t*a*h+s*o*d-n*o*h+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],m=e[12],b=e[13],v=e[14],g=e[15],E=d*v*u-b*h*u+b*l*f-a*v*f-d*l*g+a*h*g,w=m*h*u-c*v*u-m*l*f+o*v*f+c*l*g-o*h*g,S=c*b*u-m*d*u+m*a*f-o*b*f-c*a*g+o*d*g,I=m*d*l-c*b*l-m*a*h+o*b*h+c*a*v-o*d*v,D=t*E+n*w+s*S+r*I;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const y=1/D;return e[0]=E*y,e[1]=(b*h*r-d*v*r-b*s*f+n*v*f+d*s*g-n*h*g)*y,e[2]=(a*v*r-b*l*r+b*s*u-n*v*u-a*s*g+n*l*g)*y,e[3]=(d*l*r-a*h*r-d*s*u+n*h*u+a*s*f-n*l*f)*y,e[4]=w*y,e[5]=(c*v*r-m*h*r+m*s*f-t*v*f-c*s*g+t*h*g)*y,e[6]=(m*l*r-o*v*r-m*s*u+t*v*u+o*s*g-t*l*g)*y,e[7]=(o*h*r-c*l*r+c*s*u-t*h*u-o*s*f+t*l*f)*y,e[8]=S*y,e[9]=(m*d*r-c*b*r-m*n*f+t*b*f+c*n*g-t*d*g)*y,e[10]=(o*b*r-m*a*r+m*n*u-t*b*u-o*n*g+t*a*g)*y,e[11]=(c*a*r-o*d*r-c*n*u+t*d*u+o*n*f-t*a*f)*y,e[12]=I*y,e[13]=(c*b*s-m*d*s+m*n*h-t*b*h-c*n*v+t*d*v)*y,e[14]=(m*a*s-o*b*s-m*n*l+t*b*l+o*n*v-t*a*v)*y,e[15]=(o*d*s-c*a*s+c*n*l-t*d*l-o*n*h+t*a*h)*y,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,o=e.x,a=e.y,l=e.z,u=r*o,c=r*a;return this.set(u*o+n,u*a-s*l,u*l+s*a,0,u*a+s*l,c*a+n,c*l-s*o,0,u*l-s*a,c*l+s*o,r*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,o){return this.set(1,n,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,u=r+r,c=o+o,d=a+a,h=r*u,f=r*c,m=r*d,b=o*c,v=o*d,g=a*d,E=l*u,w=l*c,S=l*d,I=n.x,D=n.y,y=n.z;return s[0]=(1-(b+g))*I,s[1]=(f+S)*I,s[2]=(m-w)*I,s[3]=0,s[4]=(f-S)*D,s[5]=(1-(h+g))*D,s[6]=(v+E)*D,s[7]=0,s[8]=(m+w)*y,s[9]=(v-E)*y,s[10]=(1-(h+b))*y,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=ga.set(s[0],s[1],s[2]).length();const o=ga.set(s[4],s[5],s[6]).length(),a=ga.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],_s.copy(this);const u=1/r,c=1/o,d=1/a;return _s.elements[0]*=u,_s.elements[1]*=u,_s.elements[2]*=u,_s.elements[4]*=c,_s.elements[5]*=c,_s.elements[6]*=c,_s.elements[8]*=d,_s.elements[9]*=d,_s.elements[10]*=d,t.setFromRotationMatrix(_s),n.x=r,n.y=o,n.z=a,this}makePerspective(e,t,n,s,r,o,a=Tr){const l=this.elements,u=2*r/(t-e),c=2*r/(n-s),d=(t+e)/(t-e),h=(n+s)/(n-s);let f,m;if(a===Tr)f=-(o+r)/(o-r),m=-2*o*r/(o-r);else if(a===gd)f=-o/(o-r),m=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,s,r,o,a=Tr){const l=this.elements,u=1/(t-e),c=1/(n-s),d=1/(o-r),h=(t+e)*u,f=(n+s)*c;let m,b;if(a===Tr)m=(o+r)*d,b=-2*d;else if(a===gd)m=r*d,b=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=b,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ga=new xe,_s=new Ai,ZC=new xe(0,0,0),QC=new xe(1,1,1),$r=new xe,_u=new xe,On=new xe,Uv=new Ai,zv=new sl;class Zs{constructor(e=0,t=0,n=0,s=Zs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],u=s[5],c=s[9],d=s[2],h=s[6],f=s[10];switch(t){case"XYZ":this._y=Math.asin(rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-rn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(rn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-rn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(rn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-rn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Uv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Uv,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zv.setFromEuler(this),this.setFromQuaternion(zv,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Zs.DEFAULT_ORDER="XYZ";class Fm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let JC=0;const Bv=new xe,va=new sl,pr=new Ai,Eu=new xe,zl=new xe,eA=new xe,tA=new sl,Hv=new xe(1,0,0),Vv=new xe(0,1,0),$v=new xe(0,0,1),Gv={type:"added"},iA={type:"removed"},ya={type:"childadded",child:null},cf={type:"childremoved",child:null};class Vn extends il{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JC++}),this.uuid=nl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vn.DEFAULT_UP.clone();const e=new xe,t=new Zs,n=new sl,s=new xe(1,1,1);function r(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ai},normalMatrix:{value:new Vt}}),this.matrix=new Ai,this.matrixWorld=new Ai,this.matrixAutoUpdate=Vn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return va.setFromAxisAngle(e,t),this.quaternion.multiply(va),this}rotateOnWorldAxis(e,t){return va.setFromAxisAngle(e,t),this.quaternion.premultiply(va),this}rotateX(e){return this.rotateOnAxis(Hv,e)}rotateY(e){return this.rotateOnAxis(Vv,e)}rotateZ(e){return this.rotateOnAxis($v,e)}translateOnAxis(e,t){return Bv.copy(e).applyQuaternion(this.quaternion),this.position.add(Bv.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Hv,e)}translateY(e){return this.translateOnAxis(Vv,e)}translateZ(e){return this.translateOnAxis($v,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Eu.copy(e):Eu.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),zl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pr.lookAt(zl,Eu,this.up):pr.lookAt(Eu,zl,this.up),this.quaternion.setFromRotationMatrix(pr),s&&(pr.extractRotation(s.matrixWorld),va.setFromRotationMatrix(pr),this.quaternion.premultiply(va.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Gv),ya.child=e,this.dispatchEvent(ya),ya.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(iA),cf.child=e,this.dispatchEvent(cf),cf.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),pr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pr.multiply(e.parent.matrixWorld)),e.applyMatrix4(pr),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Gv),ya.child=e,this.dispatchEvent(ya),ya.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zl,e,eA),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zl,tA,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),m=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),d.length>0&&(n.shapes=d),h.length>0&&(n.skeletons=h),f.length>0&&(n.animations=f),m.length>0&&(n.nodes=m)}return n.object=s,n;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Vn.DEFAULT_UP=new xe(0,1,0);Vn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Es=new xe,mr=new xe,uf=new xe,gr=new xe,ba=new xe,_a=new xe,Wv=new xe,df=new xe,hf=new xe,ff=new xe,pf=new ki,mf=new ki,gf=new ki;class Ss{constructor(e=new xe,t=new xe,n=new xe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Es.subVectors(e,t),s.cross(Es);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){Es.subVectors(s,t),mr.subVectors(n,t),uf.subVectors(e,t);const o=Es.dot(Es),a=Es.dot(mr),l=Es.dot(uf),u=mr.dot(mr),c=mr.dot(uf),d=o*u-a*a;if(d===0)return r.set(0,0,0),null;const h=1/d,f=(u*l-a*c)*h,m=(o*c-a*l)*h;return r.set(1-f-m,m,f)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,gr)===null?!1:gr.x>=0&&gr.y>=0&&gr.x+gr.y<=1}static getInterpolation(e,t,n,s,r,o,a,l){return this.getBarycoord(e,t,n,s,gr)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,gr.x),l.addScaledVector(o,gr.y),l.addScaledVector(a,gr.z),l)}static getInterpolatedAttribute(e,t,n,s,r,o){return pf.setScalar(0),mf.setScalar(0),gf.setScalar(0),pf.fromBufferAttribute(e,t),mf.fromBufferAttribute(e,n),gf.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(pf,r.x),o.addScaledVector(mf,r.y),o.addScaledVector(gf,r.z),o}static isFrontFacing(e,t,n,s){return Es.subVectors(n,t),mr.subVectors(e,t),Es.cross(mr).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Es.subVectors(this.c,this.b),mr.subVectors(this.a,this.b),Es.cross(mr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ss.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ss.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return Ss.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return Ss.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ss.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let o,a;ba.subVectors(s,n),_a.subVectors(r,n),df.subVectors(e,n);const l=ba.dot(df),u=_a.dot(df);if(l<=0&&u<=0)return t.copy(n);hf.subVectors(e,s);const c=ba.dot(hf),d=_a.dot(hf);if(c>=0&&d<=c)return t.copy(s);const h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(n).addScaledVector(ba,o);ff.subVectors(e,r);const f=ba.dot(ff),m=_a.dot(ff);if(m>=0&&f<=m)return t.copy(r);const b=f*u-l*m;if(b<=0&&u>=0&&m<=0)return a=u/(u-m),t.copy(n).addScaledVector(_a,a);const v=c*m-f*d;if(v<=0&&d-c>=0&&f-m>=0)return Wv.subVectors(r,s),a=(d-c)/(d-c+(f-m)),t.copy(s).addScaledVector(Wv,a);const g=1/(v+b+h);return o=b*g,a=h*g,t.copy(n).addScaledVector(ba,o).addScaledVector(_a,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ib={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gr={h:0,s:0,l:0},wu={h:0,s:0,l:0};function vf(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class pi{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Bs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ai.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=ai.workingColorSpace){return this.r=e,this.g=t,this.b=n,ai.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=ai.workingColorSpace){if(e=Nm(e,1),t=rn(t,0,1),n=rn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=vf(o,r,e+1/3),this.g=vf(o,r,e),this.b=vf(o,r,e-1/3)}return ai.toWorkingColorSpace(this,s),this}setStyle(e,t=Bs){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Bs){const n=Ib[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Na(e.r),this.g=Na(e.g),this.b=Na(e.b),this}copyLinearToSRGB(e){return this.r=ef(e.r),this.g=ef(e.g),this.b=ef(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Bs){return ai.fromWorkingColorSpace(hn.copy(this),e),Math.round(rn(hn.r*255,0,255))*65536+Math.round(rn(hn.g*255,0,255))*256+Math.round(rn(hn.b*255,0,255))}getHexString(e=Bs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ai.workingColorSpace){ai.fromWorkingColorSpace(hn.copy(this),t);const n=hn.r,s=hn.g,r=hn.b,o=Math.max(n,s,r),a=Math.min(n,s,r);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=c<=.5?d/(o+a):d/(2-o-a),o){case n:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-n)/d+2;break;case r:l=(n-s)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=ai.workingColorSpace){return ai.fromWorkingColorSpace(hn.copy(this),t),e.r=hn.r,e.g=hn.g,e.b=hn.b,e}getStyle(e=Bs){ai.fromWorkingColorSpace(hn.copy(this),e);const t=hn.r,n=hn.g,s=hn.b;return e!==Bs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(Gr),this.setHSL(Gr.h+e,Gr.s+t,Gr.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Gr),e.getHSL(wu);const n=Ql(Gr.h,wu.h,t),s=Ql(Gr.s,wu.s,t),r=Ql(Gr.l,wu.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const hn=new pi;pi.NAMES=Ib;let nA=0;class Hd extends il{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nA++}),this.uuid=nl(),this.name="",this.type="Material",this.blending=Da,this.side=oo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Zf,this.blendDst=Qf,this.blendEquation=Do,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pi(0,0,0),this.blendAlpha=0,this.depthFunc=Ga,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Lv,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=da,this.stencilZFail=da,this.stencilZPass=da,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Da&&(n.blending=this.blending),this.side!==oo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Zf&&(n.blendSrc=this.blendSrc),this.blendDst!==Qf&&(n.blendDst=this.blendDst),this.blendEquation!==Do&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ga&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Lv&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==da&&(n.stencilFail=this.stencilFail),this.stencilZFail!==da&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==da&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ic extends Hd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zs,this.combine=mb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ui=new xe,xu=new ei;class Xs{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Rv,this.updateRanges=[],this.gpuType=Sr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)xu.fromBufferAttribute(this,t),xu.applyMatrix3(e),this.setXY(t,xu.x,xu.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix3(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix4(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ui.fromBufferAttribute(this,t),Ui.applyNormalMatrix(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ui.fromBufferAttribute(this,t),Ui.transformDirection(e),this.setXYZ(t,Ui.x,Ui.y,Ui.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ta(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=gn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ta(t,this.array)),t}setX(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ta(t,this.array)),t}setY(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ta(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ta(t,this.array)),t}setW(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=gn(t,this.array),n=gn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=gn(t,this.array),n=gn(n,this.array),s=gn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=gn(t,this.array),n=gn(n,this.array),s=gn(s,this.array),r=gn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Rv&&(e.usage=this.usage),e}}class Db extends Xs{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Ob extends Xs{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ys extends Xs{constructor(e,t,n){super(new Float32Array(e),t,n)}}let sA=0;const ss=new Ai,yf=new Vn,Ea=new xe,Nn=new rl,Bl=new rl,Ki=new xe;class ho extends il{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sA++}),this.uuid=nl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ab(e)?Ob:Db)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Vt().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ss.makeRotationFromQuaternion(e),this.applyMatrix4(ss),this}rotateX(e){return ss.makeRotationX(e),this.applyMatrix4(ss),this}rotateY(e){return ss.makeRotationY(e),this.applyMatrix4(ss),this}rotateZ(e){return ss.makeRotationZ(e),this.applyMatrix4(ss),this}translate(e,t,n){return ss.makeTranslation(e,t,n),this.applyMatrix4(ss),this}scale(e,t,n){return ss.makeScale(e,t,n),this.applyMatrix4(ss),this}lookAt(e){return yf.lookAt(e),yf.updateMatrix(),this.applyMatrix4(yf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ea).negate(),this.translate(Ea.x,Ea.y,Ea.z),this}setFromPoints(e){const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ys(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new xe(-1/0,-1/0,-1/0),new xe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];Nn.setFromBufferAttribute(r),this.morphTargetsRelative?(Ki.addVectors(this.boundingBox.min,Nn.min),this.boundingBox.expandByPoint(Ki),Ki.addVectors(this.boundingBox.max,Nn.max),this.boundingBox.expandByPoint(Ki)):(this.boundingBox.expandByPoint(Nn.min),this.boundingBox.expandByPoint(Nn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new km);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new xe,1/0);return}if(e){const n=this.boundingSphere.center;if(Nn.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];Bl.setFromBufferAttribute(a),this.morphTargetsRelative?(Ki.addVectors(Nn.min,Bl.min),Nn.expandByPoint(Ki),Ki.addVectors(Nn.max,Bl.max),Nn.expandByPoint(Ki)):(Nn.expandByPoint(Bl.min),Nn.expandByPoint(Bl.max))}Nn.getCenter(n);let s=0;for(let r=0,o=e.count;r<o;r++)Ki.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(Ki));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Ki.fromBufferAttribute(a,u),l&&(Ea.fromBufferAttribute(e,u),Ki.add(Ea)),s=Math.max(s,n.distanceToSquared(Ki))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xs(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<n.count;B++)a[B]=new xe,l[B]=new xe;const u=new xe,c=new xe,d=new xe,h=new ei,f=new ei,m=new ei,b=new xe,v=new xe;function g(B,V,C){u.fromBufferAttribute(n,B),c.fromBufferAttribute(n,V),d.fromBufferAttribute(n,C),h.fromBufferAttribute(r,B),f.fromBufferAttribute(r,V),m.fromBufferAttribute(r,C),c.sub(u),d.sub(u),f.sub(h),m.sub(h);const A=1/(f.x*m.y-m.x*f.y);isFinite(A)&&(b.copy(c).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(A),v.copy(d).multiplyScalar(f.x).addScaledVector(c,-m.x).multiplyScalar(A),a[B].add(b),a[V].add(b),a[C].add(b),l[B].add(v),l[V].add(v),l[C].add(v))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let B=0,V=E.length;B<V;++B){const C=E[B],A=C.start,H=C.count;for(let P=A,F=A+H;P<F;P+=3)g(e.getX(P+0),e.getX(P+1),e.getX(P+2))}const w=new xe,S=new xe,I=new xe,D=new xe;function y(B){I.fromBufferAttribute(s,B),D.copy(I);const V=a[B];w.copy(V),w.sub(I.multiplyScalar(I.dot(V))).normalize(),S.crossVectors(D,V);const A=S.dot(l[B])<0?-1:1;o.setXYZW(B,w.x,w.y,w.z,A)}for(let B=0,V=E.length;B<V;++B){const C=E[B],A=C.start,H=C.count;for(let P=A,F=A+H;P<F;P+=3)y(e.getX(P+0)),y(e.getX(P+1)),y(e.getX(P+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Xs(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const s=new xe,r=new xe,o=new xe,a=new xe,l=new xe,u=new xe,c=new xe,d=new xe;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),b=e.getX(h+1),v=e.getX(h+2);s.fromBufferAttribute(t,m),r.fromBufferAttribute(t,b),o.fromBufferAttribute(t,v),c.subVectors(o,r),d.subVectors(s,r),c.cross(d),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,b),u.fromBufferAttribute(n,v),a.add(c),l.add(c),u.add(c),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,f=t.count;h<f;h+=3)s.fromBufferAttribute(t,h+0),r.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,r),d.subVectors(s,r),c.cross(d),n.setXYZ(h+0,c.x,c.y,c.z),n.setXYZ(h+1,c.x,c.y,c.z),n.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ki.fromBufferAttribute(e,t),Ki.normalize(),e.setXYZ(t,Ki.x,Ki.y,Ki.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,d=a.normalized,h=new u.constructor(l.length*c);let f=0,m=0;for(let b=0,v=l.length;b<v;b++){a.isInterleavedBufferAttribute?f=l[b]*a.data.stride+a.offset:f=l[b]*c;for(let g=0;g<c;g++)h[m++]=u[f++]}return new Xs(h,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ho,n=this.index.array,s=this.attributes;for(const a in s){const l=s[a],u=e(l,n);t.setAttribute(a,u)}const r=this.morphAttributes;for(const a in r){const l=[],u=r[a];for(let c=0,d=u.length;c<d;c++){const h=u[c],f=e(h,n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,h=u.length;d<h;d++){const f=u[d];c.push(f.toJSON(e.data))}c.length>0&&(s[l]=c,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const s=e.attributes;for(const u in s){const c=s[u];this.setAttribute(u,c.clone(t))}const r=e.morphAttributes;for(const u in r){const c=[],d=r[u];for(let h=0,f=d.length;h<f;h++)c.push(d[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jv=new Ai,Mo=new Rb,Su=new km,qv=new xe,Tu=new xe,Mu=new xe,Cu=new xe,bf=new xe,Au=new xe,Xv=new xe,Pu=new xe;class ds extends Vn{constructor(e=new ho,t=new Ic){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){Au.set(0,0,0);for(let l=0,u=r.length;l<u;l++){const c=a[l],d=r[l];c!==0&&(bf.fromBufferAttribute(d,e),o?Au.addScaledVector(bf,c):Au.addScaledVector(bf.sub(t),c))}t.add(Au)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Su.copy(n.boundingSphere),Su.applyMatrix4(r),Mo.copy(e.ray).recast(e.near),!(Su.containsPoint(Mo.origin)===!1&&(Mo.intersectSphere(Su,qv)===null||Mo.origin.distanceToSquared(qv)>(e.far-e.near)**2))&&(jv.copy(r).invert(),Mo.copy(e.ray).applyMatrix4(jv),!(n.boundingBox!==null&&Mo.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Mo)))}_computeIntersections(e,t,n){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv1,d=r.attributes.normal,h=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,b=h.length;m<b;m++){const v=h[m],g=o[v.materialIndex],E=Math.max(v.start,f.start),w=Math.min(a.count,Math.min(v.start+v.count,f.start+f.count));for(let S=E,I=w;S<I;S+=3){const D=a.getX(S),y=a.getX(S+1),B=a.getX(S+2);s=Lu(this,g,e,n,u,c,d,D,y,B),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const m=Math.max(0,f.start),b=Math.min(a.count,f.start+f.count);for(let v=m,g=b;v<g;v+=3){const E=a.getX(v),w=a.getX(v+1),S=a.getX(v+2);s=Lu(this,o,e,n,u,c,d,E,w,S),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,b=h.length;m<b;m++){const v=h[m],g=o[v.materialIndex],E=Math.max(v.start,f.start),w=Math.min(l.count,Math.min(v.start+v.count,f.start+f.count));for(let S=E,I=w;S<I;S+=3){const D=S,y=S+1,B=S+2;s=Lu(this,g,e,n,u,c,d,D,y,B),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const m=Math.max(0,f.start),b=Math.min(l.count,f.start+f.count);for(let v=m,g=b;v<g;v+=3){const E=v,w=v+1,S=v+2;s=Lu(this,o,e,n,u,c,d,E,w,S),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}}function rA(i,e,t,n,s,r,o,a){let l;if(e.side===Pn?l=n.intersectTriangle(o,r,s,!0,a):l=n.intersectTriangle(s,r,o,e.side===oo,a),l===null)return null;Pu.copy(a),Pu.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(Pu);return u<t.near||u>t.far?null:{distance:u,point:Pu.clone(),object:i}}function Lu(i,e,t,n,s,r,o,a,l,u){i.getVertexPosition(a,Tu),i.getVertexPosition(l,Mu),i.getVertexPosition(u,Cu);const c=rA(i,e,t,n,Tu,Mu,Cu,Xv);if(c){const d=new xe;Ss.getBarycoord(Xv,Tu,Mu,Cu,d),s&&(c.uv=Ss.getInterpolatedAttribute(s,a,l,u,d,new ei)),r&&(c.uv1=Ss.getInterpolatedAttribute(r,a,l,u,d,new ei)),o&&(c.normal=Ss.getInterpolatedAttribute(o,a,l,u,d,new xe),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new xe,materialIndex:0};Ss.getNormal(Tu,Mu,Cu,h.normal),c.face=h,c.barycoord=d}return c}class Dc extends ho{constructor(e=1,t=1,n=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],u=[],c=[],d=[];let h=0,f=0;m("z","y","x",-1,-1,n,t,e,o,r,0),m("z","y","x",1,-1,n,t,-e,o,r,1),m("x","z","y",1,1,e,n,t,s,o,2),m("x","z","y",1,-1,e,n,-t,s,o,3),m("x","y","z",1,-1,e,t,n,s,r,4),m("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(l),this.setAttribute("position",new Ys(u,3)),this.setAttribute("normal",new Ys(c,3)),this.setAttribute("uv",new Ys(d,2));function m(b,v,g,E,w,S,I,D,y,B,V){const C=S/y,A=I/B,H=S/2,P=I/2,F=D/2,Y=y+1,Q=B+1;let G=0,z=0;const ue=new xe;for(let Ee=0;Ee<Q;Ee++){const J=Ee*A-P;for(let W=0;W<Y;W++){const oe=W*C-H;ue[b]=oe*E,ue[v]=J*w,ue[g]=F,u.push(ue.x,ue.y,ue.z),ue[b]=0,ue[v]=0,ue[g]=D>0?1:-1,c.push(ue.x,ue.y,ue.z),d.push(W/y),d.push(1-Ee/B),G+=1}}for(let Ee=0;Ee<B;Ee++)for(let J=0;J<y;J++){const W=h+J+Y*Ee,oe=h+J+Y*(Ee+1),ie=h+(J+1)+Y*(Ee+1),j=h+(J+1)+Y*Ee;l.push(W,oe,j),l.push(oe,ie,j),z+=6}a.addGroup(f,z,V),f+=z,h+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ya(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function vn(i){const e={};for(let t=0;t<i.length;t++){const n=Ya(i[t]);for(const s in n)e[s]=n[s]}return e}function oA(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function Nb(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ai.workingColorSpace}const aA={clone:Ya,merge:vn};var lA=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cA=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class lo extends Hd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=lA,this.fragmentShader=cA,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ya(e.uniforms),this.uniformsGroups=oA(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class kb extends Vn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ai,this.projectionMatrix=new Ai,this.projectionMatrixInverse=new Ai,this.coordinateSystem=Tr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Wr=new xe,Yv=new ei,Kv=new ei;class os extends kb{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=bc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Zl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return bc*2*Math.atan(Math.tan(Zl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Wr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Wr.x,Wr.y).multiplyScalar(-e/Wr.z),Wr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Wr.x,Wr.y).multiplyScalar(-e/Wr.z)}getViewSize(e,t){return this.getViewBounds(e,Yv,Kv),t.subVectors(Kv,Yv)}setViewOffset(e,t,n,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Zl*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*n/u,s*=o.width/l,n*=o.height/u}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const wa=-90,xa=1;class uA extends Vn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new os(wa,xa,e,t);s.layers=this.layers,this.add(s);const r=new os(wa,xa,e,t);r.layers=this.layers,this.add(r);const o=new os(wa,xa,e,t);o.layers=this.layers,this.add(o);const a=new os(wa,xa,e,t);a.layers=this.layers,this.add(a);const l=new os(wa,xa,e,t);l.layers=this.layers,this.add(l);const u=new os(wa,xa,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,o,a,l]=t;for(const u of t)this.remove(u);if(e===Tr)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===gd)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,u,c]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,o),e.setRenderTarget(n,2,s),e.render(t,a),e.setRenderTarget(n,3,s),e.render(t,l),e.setRenderTarget(n,4,s),e.render(t,u),n.texture.generateMipmaps=b,e.setRenderTarget(n,5,s),e.render(t,c),e.setRenderTarget(d,h,f),e.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class Fb extends _n{constructor(e,t,n,s,r,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Wa,super(e,t,n,s,r,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dA extends ao{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new Fb(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ls}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Dc(5,5,5),r=new lo({name:"CubemapFromEquirect",uniforms:Ya(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Pn,blending:Jr});r.uniforms.tEquirect.value=t;const o=new ds(s,r),a=t.minFilter;return t.minFilter===Qr&&(t.minFilter=ls),new uA(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,s);e.setRenderTarget(r)}}const _f=new xe,hA=new xe,fA=new Vt;class Lo{constructor(e=new xe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=_f.subVectors(n,t).cross(hA.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(_f),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||fA.getNormalMatrix(e),s=this.coplanarPoint(_f).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Co=new km,Ru=new xe;class Um{constructor(e=new Lo,t=new Lo,n=new Lo,s=new Lo,r=new Lo,o=new Lo){this.planes=[e,t,n,s,r,o]}set(e,t,n,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Tr){const n=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],u=s[4],c=s[5],d=s[6],h=s[7],f=s[8],m=s[9],b=s[10],v=s[11],g=s[12],E=s[13],w=s[14],S=s[15];if(n[0].setComponents(l-r,h-u,v-f,S-g).normalize(),n[1].setComponents(l+r,h+u,v+f,S+g).normalize(),n[2].setComponents(l+o,h+c,v+m,S+E).normalize(),n[3].setComponents(l-o,h-c,v-m,S-E).normalize(),n[4].setComponents(l-a,h-d,v-b,S-w).normalize(),t===Tr)n[5].setComponents(l+a,h+d,v+b,S+w).normalize();else if(t===gd)n[5].setComponents(a,d,b,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Co.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Co.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Co)}intersectsSprite(e){return Co.center.set(0,0,0),Co.radius=.7071067811865476,Co.applyMatrix4(e.matrixWorld),this.intersectsSphere(Co)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(Ru.x=s.normal.x>0?e.max.x:e.min.x,Ru.y=s.normal.y>0?e.max.y:e.min.y,Ru.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Ru)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Ub(){let i=null,e=!1,t=null,n=null;function s(r,o){t(r,o),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function pA(i){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,d=u.byteLength,h=i.createBuffer();i.bindBuffer(l,h),i.bufferData(l,u,c),a.onUploadCallback();let f;if(u instanceof Float32Array)f=i.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?f=i.HALF_FLOAT:f=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)f=i.SHORT;else if(u instanceof Uint32Array)f=i.UNSIGNED_INT;else if(u instanceof Int32Array)f=i.INT;else if(u instanceof Int8Array)f=i.BYTE;else if(u instanceof Uint8Array)f=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)f=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:f,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:d}}function n(a,l,u){const c=l.array,d=l.updateRanges;if(i.bindBuffer(u,a),d.length===0)i.bufferSubData(u,0,c);else{d.sort((f,m)=>f.start-m.start);let h=0;for(let f=1;f<d.length;f++){const m=d[h],b=d[f];b.start<=m.start+m.count+1?m.count=Math.max(m.count,b.start+b.count-m.start):(++h,d[h]=b)}d.length=h+1;for(let f=0,m=d.length;f<m;f++){const b=d[f];i.bufferSubData(u,b.start*c.BYTES_PER_ELEMENT,c,b.start,b.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function r(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,a,l),u.version=a.version}}return{get:s,remove:r,update:o}}class Vd extends ho{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(n),l=Math.floor(s),u=a+1,c=l+1,d=e/a,h=t/l,f=[],m=[],b=[],v=[];for(let g=0;g<c;g++){const E=g*h-o;for(let w=0;w<u;w++){const S=w*d-r;m.push(S,-E,0),b.push(0,0,1),v.push(w/a),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let E=0;E<a;E++){const w=E+u*g,S=E+u*(g+1),I=E+1+u*(g+1),D=E+1+u*g;f.push(w,S,D),f.push(S,I,D)}this.setIndex(f),this.setAttribute("position",new Ys(m,3)),this.setAttribute("normal",new Ys(b,3)),this.setAttribute("uv",new Ys(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.width,e.height,e.widthSegments,e.heightSegments)}}var mA=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,gA=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,vA=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,yA=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bA=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,_A=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,EA=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wA=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xA=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,SA=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,TA=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,MA=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,CA=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,AA=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,PA=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,LA=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,RA=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,IA=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DA=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,OA=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,NA=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kA=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,FA=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,UA=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zA=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,BA=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,HA=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,VA=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$A=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,GA=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,WA="gl_FragColor = linearToOutputTexel( gl_FragColor );",jA=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XA=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,YA=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,KA=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ZA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,QA=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,JA=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,eP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,tP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,sP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,oP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,aP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,cP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,uP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,dP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,hP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,fP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,pP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,mP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,gP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,vP=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,yP=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bP=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_P=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,EP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,wP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,SP=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,MP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,CP=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,AP=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,PP=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LP=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,RP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,IP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,DP=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,OP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,FP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,UP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,BP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,HP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,VP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$P=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,GP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,WP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,YP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,KP=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ZP=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,QP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,JP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,eL=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,tL=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,iL=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nL=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sL=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rL=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,oL=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,aL=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lL=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,cL=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,dL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,fL=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const pL=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mL=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vL=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bL=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_L=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,EL=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,wL=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xL=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,SL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,TL=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ML=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,CL=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,AL=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,PL=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LL=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RL=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IL=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,DL=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OL=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,NL=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,kL=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FL=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UL=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zL=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BL=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HL=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VL=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$L=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GL=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WL=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jL=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ht={alphahash_fragment:mA,alphahash_pars_fragment:gA,alphamap_fragment:vA,alphamap_pars_fragment:yA,alphatest_fragment:bA,alphatest_pars_fragment:_A,aomap_fragment:EA,aomap_pars_fragment:wA,batching_pars_vertex:xA,batching_vertex:SA,begin_vertex:TA,beginnormal_vertex:MA,bsdfs:CA,iridescence_fragment:AA,bumpmap_pars_fragment:PA,clipping_planes_fragment:LA,clipping_planes_pars_fragment:RA,clipping_planes_pars_vertex:IA,clipping_planes_vertex:DA,color_fragment:OA,color_pars_fragment:NA,color_pars_vertex:kA,color_vertex:FA,common:UA,cube_uv_reflection_fragment:zA,defaultnormal_vertex:BA,displacementmap_pars_vertex:HA,displacementmap_vertex:VA,emissivemap_fragment:$A,emissivemap_pars_fragment:GA,colorspace_fragment:WA,colorspace_pars_fragment:jA,envmap_fragment:qA,envmap_common_pars_fragment:XA,envmap_pars_fragment:YA,envmap_pars_vertex:KA,envmap_physical_pars_fragment:aP,envmap_vertex:ZA,fog_vertex:QA,fog_pars_vertex:JA,fog_fragment:eP,fog_pars_fragment:tP,gradientmap_pars_fragment:iP,lightmap_pars_fragment:nP,lights_lambert_fragment:sP,lights_lambert_pars_fragment:rP,lights_pars_begin:oP,lights_toon_fragment:lP,lights_toon_pars_fragment:cP,lights_phong_fragment:uP,lights_phong_pars_fragment:dP,lights_physical_fragment:hP,lights_physical_pars_fragment:fP,lights_fragment_begin:pP,lights_fragment_maps:mP,lights_fragment_end:gP,logdepthbuf_fragment:vP,logdepthbuf_pars_fragment:yP,logdepthbuf_pars_vertex:bP,logdepthbuf_vertex:_P,map_fragment:EP,map_pars_fragment:wP,map_particle_fragment:xP,map_particle_pars_fragment:SP,metalnessmap_fragment:TP,metalnessmap_pars_fragment:MP,morphinstance_vertex:CP,morphcolor_vertex:AP,morphnormal_vertex:PP,morphtarget_pars_vertex:LP,morphtarget_vertex:RP,normal_fragment_begin:IP,normal_fragment_maps:DP,normal_pars_fragment:OP,normal_pars_vertex:NP,normal_vertex:kP,normalmap_pars_fragment:FP,clearcoat_normal_fragment_begin:UP,clearcoat_normal_fragment_maps:zP,clearcoat_pars_fragment:BP,iridescence_pars_fragment:HP,opaque_fragment:VP,packing:$P,premultiplied_alpha_fragment:GP,project_vertex:WP,dithering_fragment:jP,dithering_pars_fragment:qP,roughnessmap_fragment:XP,roughnessmap_pars_fragment:YP,shadowmap_pars_fragment:KP,shadowmap_pars_vertex:ZP,shadowmap_vertex:QP,shadowmask_pars_fragment:JP,skinbase_vertex:eL,skinning_pars_vertex:tL,skinning_vertex:iL,skinnormal_vertex:nL,specularmap_fragment:sL,specularmap_pars_fragment:rL,tonemapping_fragment:oL,tonemapping_pars_fragment:aL,transmission_fragment:lL,transmission_pars_fragment:cL,uv_pars_fragment:uL,uv_pars_vertex:dL,uv_vertex:hL,worldpos_vertex:fL,background_vert:pL,background_frag:mL,backgroundCube_vert:gL,backgroundCube_frag:vL,cube_vert:yL,cube_frag:bL,depth_vert:_L,depth_frag:EL,distanceRGBA_vert:wL,distanceRGBA_frag:xL,equirect_vert:SL,equirect_frag:TL,linedashed_vert:ML,linedashed_frag:CL,meshbasic_vert:AL,meshbasic_frag:PL,meshlambert_vert:LL,meshlambert_frag:RL,meshmatcap_vert:IL,meshmatcap_frag:DL,meshnormal_vert:OL,meshnormal_frag:NL,meshphong_vert:kL,meshphong_frag:FL,meshphysical_vert:UL,meshphysical_frag:zL,meshtoon_vert:BL,meshtoon_frag:HL,points_vert:VL,points_frag:$L,shadow_vert:GL,shadow_frag:WL,sprite_vert:jL,sprite_frag:qL},Je={common:{diffuse:{value:new pi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vt}},envmap:{envMap:{value:null},envMapRotation:{value:new Vt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vt},normalScale:{value:new ei(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new pi(16777215)},opacity:{value:1},center:{value:new ei(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}}},Vs={basic:{uniforms:vn([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.fog]),vertexShader:Ht.meshbasic_vert,fragmentShader:Ht.meshbasic_frag},lambert:{uniforms:vn([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,Je.lights,{emissive:{value:new pi(0)}}]),vertexShader:Ht.meshlambert_vert,fragmentShader:Ht.meshlambert_frag},phong:{uniforms:vn([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,Je.lights,{emissive:{value:new pi(0)},specular:{value:new pi(1118481)},shininess:{value:30}}]),vertexShader:Ht.meshphong_vert,fragmentShader:Ht.meshphong_frag},standard:{uniforms:vn([Je.common,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.roughnessmap,Je.metalnessmap,Je.fog,Je.lights,{emissive:{value:new pi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag},toon:{uniforms:vn([Je.common,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.gradientmap,Je.fog,Je.lights,{emissive:{value:new pi(0)}}]),vertexShader:Ht.meshtoon_vert,fragmentShader:Ht.meshtoon_frag},matcap:{uniforms:vn([Je.common,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,{matcap:{value:null}}]),vertexShader:Ht.meshmatcap_vert,fragmentShader:Ht.meshmatcap_frag},points:{uniforms:vn([Je.points,Je.fog]),vertexShader:Ht.points_vert,fragmentShader:Ht.points_frag},dashed:{uniforms:vn([Je.common,Je.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ht.linedashed_vert,fragmentShader:Ht.linedashed_frag},depth:{uniforms:vn([Je.common,Je.displacementmap]),vertexShader:Ht.depth_vert,fragmentShader:Ht.depth_frag},normal:{uniforms:vn([Je.common,Je.bumpmap,Je.normalmap,Je.displacementmap,{opacity:{value:1}}]),vertexShader:Ht.meshnormal_vert,fragmentShader:Ht.meshnormal_frag},sprite:{uniforms:vn([Je.sprite,Je.fog]),vertexShader:Ht.sprite_vert,fragmentShader:Ht.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ht.background_vert,fragmentShader:Ht.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vt}},vertexShader:Ht.backgroundCube_vert,fragmentShader:Ht.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ht.cube_vert,fragmentShader:Ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ht.equirect_vert,fragmentShader:Ht.equirect_frag},distanceRGBA:{uniforms:vn([Je.common,Je.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ht.distanceRGBA_vert,fragmentShader:Ht.distanceRGBA_frag},shadow:{uniforms:vn([Je.lights,Je.fog,{color:{value:new pi(0)},opacity:{value:1}}]),vertexShader:Ht.shadow_vert,fragmentShader:Ht.shadow_frag}};Vs.physical={uniforms:vn([Vs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vt},clearcoatNormalScale:{value:new ei(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vt},sheen:{value:0},sheenColor:{value:new pi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vt},transmissionSamplerSize:{value:new ei},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vt},attenuationDistance:{value:0},attenuationColor:{value:new pi(0)},specularColor:{value:new pi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vt},anisotropyVector:{value:new ei},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vt}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag};const Iu={r:0,b:0,g:0},Ao=new Zs,XL=new Ai;function YL(i,e,t,n,s,r,o){const a=new pi(0);let l=r===!0?0:1,u,c,d=null,h=0,f=null;function m(E){let w=E.isScene===!0?E.background:null;return w&&w.isTexture&&(w=(E.backgroundBlurriness>0?t:e).get(w)),w}function b(E){let w=!1;const S=m(E);S===null?g(a,l):S&&S.isColor&&(g(S,1),w=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||w)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function v(E,w){const S=m(w);S&&(S.isCubeTexture||S.mapping===zd)?(c===void 0&&(c=new ds(new Dc(1,1,1),new lo({name:"BackgroundCubeMaterial",uniforms:Ya(Vs.backgroundCube.uniforms),vertexShader:Vs.backgroundCube.vertexShader,fragmentShader:Vs.backgroundCube.fragmentShader,side:Pn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(I,D,y){this.matrixWorld.copyPosition(y.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),Ao.copy(w.backgroundRotation),Ao.x*=-1,Ao.y*=-1,Ao.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Ao.y*=-1,Ao.z*=-1),c.material.uniforms.envMap.value=S,c.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(XL.makeRotationFromEuler(Ao)),c.material.toneMapped=ai.getTransfer(S.colorSpace)!==Ei,(d!==S||h!==S.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,d=S,h=S.version,f=i.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new ds(new Vd(2,2),new lo({name:"BackgroundMaterial",uniforms:Ya(Vs.background.uniforms),vertexShader:Vs.background.vertexShader,fragmentShader:Vs.background.fragmentShader,side:oo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=ai.getTransfer(S.colorSpace)!==Ei,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||h!==S.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,d=S,h=S.version,f=i.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function g(E,w){E.getRGB(Iu,Nb(i)),n.buffers.color.setClear(Iu.r,Iu.g,Iu.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(E,w=1){a.set(E),l=w,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,g(a,l)},render:b,addToRenderList:v}}function KL(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=h(null);let r=s,o=!1;function a(C,A,H,P,F){let Y=!1;const Q=d(P,H,A);r!==Q&&(r=Q,u(r.object)),Y=f(C,P,H,F),Y&&m(C,P,H,F),F!==null&&e.update(F,i.ELEMENT_ARRAY_BUFFER),(Y||o)&&(o=!1,S(C,A,H,P),F!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function l(){return i.createVertexArray()}function u(C){return i.bindVertexArray(C)}function c(C){return i.deleteVertexArray(C)}function d(C,A,H){const P=H.wireframe===!0;let F=n[C.id];F===void 0&&(F={},n[C.id]=F);let Y=F[A.id];Y===void 0&&(Y={},F[A.id]=Y);let Q=Y[P];return Q===void 0&&(Q=h(l()),Y[P]=Q),Q}function h(C){const A=[],H=[],P=[];for(let F=0;F<t;F++)A[F]=0,H[F]=0,P[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:A,enabledAttributes:H,attributeDivisors:P,object:C,attributes:{},index:null}}function f(C,A,H,P){const F=r.attributes,Y=A.attributes;let Q=0;const G=H.getAttributes();for(const z in G)if(G[z].location>=0){const Ee=F[z];let J=Y[z];if(J===void 0&&(z==="instanceMatrix"&&C.instanceMatrix&&(J=C.instanceMatrix),z==="instanceColor"&&C.instanceColor&&(J=C.instanceColor)),Ee===void 0||Ee.attribute!==J||J&&Ee.data!==J.data)return!0;Q++}return r.attributesNum!==Q||r.index!==P}function m(C,A,H,P){const F={},Y=A.attributes;let Q=0;const G=H.getAttributes();for(const z in G)if(G[z].location>=0){let Ee=Y[z];Ee===void 0&&(z==="instanceMatrix"&&C.instanceMatrix&&(Ee=C.instanceMatrix),z==="instanceColor"&&C.instanceColor&&(Ee=C.instanceColor));const J={};J.attribute=Ee,Ee&&Ee.data&&(J.data=Ee.data),F[z]=J,Q++}r.attributes=F,r.attributesNum=Q,r.index=P}function b(){const C=r.newAttributes;for(let A=0,H=C.length;A<H;A++)C[A]=0}function v(C){g(C,0)}function g(C,A){const H=r.newAttributes,P=r.enabledAttributes,F=r.attributeDivisors;H[C]=1,P[C]===0&&(i.enableVertexAttribArray(C),P[C]=1),F[C]!==A&&(i.vertexAttribDivisor(C,A),F[C]=A)}function E(){const C=r.newAttributes,A=r.enabledAttributes;for(let H=0,P=A.length;H<P;H++)A[H]!==C[H]&&(i.disableVertexAttribArray(H),A[H]=0)}function w(C,A,H,P,F,Y,Q){Q===!0?i.vertexAttribIPointer(C,A,H,F,Y):i.vertexAttribPointer(C,A,H,P,F,Y)}function S(C,A,H,P){b();const F=P.attributes,Y=H.getAttributes(),Q=A.defaultAttributeValues;for(const G in Y){const z=Y[G];if(z.location>=0){let ue=F[G];if(ue===void 0&&(G==="instanceMatrix"&&C.instanceMatrix&&(ue=C.instanceMatrix),G==="instanceColor"&&C.instanceColor&&(ue=C.instanceColor)),ue!==void 0){const Ee=ue.normalized,J=ue.itemSize,W=e.get(ue);if(W===void 0)continue;const oe=W.buffer,ie=W.type,j=W.bytesPerElement,me=ie===i.INT||ie===i.UNSIGNED_INT||ue.gpuType===Am;if(ue.isInterleavedBufferAttribute){const ge=ue.data,Ne=ge.stride,Fe=ue.offset;if(ge.isInstancedInterleavedBuffer){for(let He=0;He<z.locationSize;He++)g(z.location+He,ge.meshPerAttribute);C.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let He=0;He<z.locationSize;He++)v(z.location+He);i.bindBuffer(i.ARRAY_BUFFER,oe);for(let He=0;He<z.locationSize;He++)w(z.location+He,J/z.locationSize,ie,Ee,Ne*j,(Fe+J/z.locationSize*He)*j,me)}else{if(ue.isInstancedBufferAttribute){for(let ge=0;ge<z.locationSize;ge++)g(z.location+ge,ue.meshPerAttribute);C.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let ge=0;ge<z.locationSize;ge++)v(z.location+ge);i.bindBuffer(i.ARRAY_BUFFER,oe);for(let ge=0;ge<z.locationSize;ge++)w(z.location+ge,J/z.locationSize,ie,Ee,J*j,J/z.locationSize*ge*j,me)}}else if(Q!==void 0){const Ee=Q[G];if(Ee!==void 0)switch(Ee.length){case 2:i.vertexAttrib2fv(z.location,Ee);break;case 3:i.vertexAttrib3fv(z.location,Ee);break;case 4:i.vertexAttrib4fv(z.location,Ee);break;default:i.vertexAttrib1fv(z.location,Ee)}}}}E()}function I(){B();for(const C in n){const A=n[C];for(const H in A){const P=A[H];for(const F in P)c(P[F].object),delete P[F];delete A[H]}delete n[C]}}function D(C){if(n[C.id]===void 0)return;const A=n[C.id];for(const H in A){const P=A[H];for(const F in P)c(P[F].object),delete P[F];delete A[H]}delete n[C.id]}function y(C){for(const A in n){const H=n[A];if(H[C.id]===void 0)continue;const P=H[C.id];for(const F in P)c(P[F].object),delete P[F];delete H[C.id]}}function B(){V(),o=!0,r!==s&&(r=s,u(r.object))}function V(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:B,resetDefaultState:V,dispose:I,releaseStatesOfGeometry:D,releaseStatesOfProgram:y,initAttributes:b,enableAttribute:v,disableUnusedAttributes:E}}function ZL(i,e,t){let n;function s(u){n=u}function r(u,c){i.drawArrays(n,u,c),t.update(c,n,1)}function o(u,c,d){d!==0&&(i.drawArraysInstanced(n,u,c,d),t.update(c,n,d))}function a(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,c,0,d);let f=0;for(let m=0;m<d;m++)f+=c[m];t.update(f,n,1)}function l(u,c,d,h){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<u.length;m++)o(u[m],c[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(n,u,0,c,0,h,0,d);let m=0;for(let b=0;b<d;b++)m+=c[b];for(let b=0;b<h.length;b++)t.update(m,n,h[b])}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function QL(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const y=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(y){return!(y!==Ts&&n.convert(y)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(y){const B=y===Rc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(y!==Ar&&n.convert(y)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&y!==Sr&&!B)}function l(y){if(y==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";y="mediump"}return y==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(h===!0){const y=e.get("EXT_clip_control");y.clipControlEXT(y.LOWER_LEFT_EXT,y.ZERO_TO_ONE_EXT)}const f=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),m=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_TEXTURE_SIZE),v=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),g=i.getParameter(i.MAX_VERTEX_ATTRIBS),E=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),w=i.getParameter(i.MAX_VARYING_VECTORS),S=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),I=m>0,D=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:m,maxTextureSize:b,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:E,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:I,maxSamples:D}}function JL(i){const e=this;let t=null,n=0,s=!1,r=!1;const o=new Lo,a=new Vt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=d.length!==0||h||n!==0||s;return s=h,n=d.length,f},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,h){t=c(d,h,0)},this.setState=function(d,h,f){const m=d.clippingPlanes,b=d.clipIntersection,v=d.clipShadows,g=i.get(d);if(!s||m===null||m.length===0||r&&!v)r?c(null):u();else{const E=r?0:n,w=E*4;let S=g.clippingState||null;l.value=S,S=c(m,h,w,f);for(let I=0;I!==w;++I)S[I]=t[I];g.clippingState=S,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=E}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(d,h,f,m){const b=d!==null?d.length:0;let v=null;if(b!==0){if(v=l.value,m!==!0||v===null){const g=f+b*4,E=h.matrixWorldInverse;a.getNormalMatrix(E),(v===null||v.length<g)&&(v=new Float32Array(g));for(let w=0,S=f;w!==b;++w,S+=4)o.copy(d[w]).applyMatrix4(E,a),o.normal.toArray(v,S),v[S+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,v}}function e2(i){let e=new WeakMap;function t(o,a){return a===op?o.mapping=Wa:a===ap&&(o.mapping=ja),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===op||a===ap)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new dA(l.height);return u.fromEquirectangularTexture(i,o),e.set(o,u),o.addEventListener("dispose",s),t(u.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}class t2 extends kb{constructor(e=-1,t=1,n=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,o=n+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,o=r+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ca=4,Zv=[.125,.215,.35,.446,.526,.582],Oo=20,Ef=new t2,Qv=new pi;let wf=null,xf=0,Sf=0,Tf=!1;const Ro=(1+Math.sqrt(5))/2,Sa=1/Ro,Jv=[new xe(-Ro,Sa,0),new xe(Ro,Sa,0),new xe(-Sa,0,Ro),new xe(Sa,0,Ro),new xe(0,Ro,-Sa),new xe(0,Ro,Sa),new xe(-1,1,-1),new xe(1,1,-1),new xe(-1,1,1),new xe(1,1,1)];class e0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100){wf=this._renderer.getRenderTarget(),xf=this._renderer.getActiveCubeFace(),Sf=this._renderer.getActiveMipmapLevel(),Tf=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=n0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=i0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wf,xf,Sf),this._renderer.xr.enabled=Tf,e.scissorTest=!1,Du(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wa||e.mapping===ja?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wf=this._renderer.getRenderTarget(),xf=this._renderer.getActiveCubeFace(),Sf=this._renderer.getActiveMipmapLevel(),Tf=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ls,minFilter:ls,generateMipmaps:!1,type:Rc,format:Ts,colorSpace:Lr,depthBuffer:!1},s=t0(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=t0(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=i2(r)),this._blurMaterial=n2(r,e,t)}return s}_compileMaterial(e){const t=new ds(this._lodPlanes[0],e);this._renderer.compile(t,Ef)}_sceneToCubeUV(e,t,n,s){const a=new os(90,1,t,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,h=c.toneMapping;c.getClearColor(Qv),c.toneMapping=eo,c.autoClear=!1;const f=new Ic({name:"PMREM.Background",side:Pn,depthWrite:!1,depthTest:!1}),m=new ds(new Dc,f);let b=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,b=!0):(f.color.copy(Qv),b=!0);for(let g=0;g<6;g++){const E=g%3;E===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):E===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const w=this._cubeSize;Du(s,E*w,g>2?w:0,w,w),c.setRenderTarget(s),b&&c.render(m,a),c.render(e,a)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=h,c.autoClear=d,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===Wa||e.mapping===ja;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=n0()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=i0());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new ds(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;Du(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,Ef)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Jv[(s-r-1)%Jv.length];this._blur(e,r-1,r,o,a)}t.autoClear=n}_blur(e,t,n,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,s,"latitudinal",r),this._halfBlur(o,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new ds(this._lodPlanes[s],u),h=u.uniforms,f=this._sizeLods[n]-1,m=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*Oo-1),b=r/m,v=isFinite(r)?1+Math.floor(c*b):Oo;v>Oo&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Oo}`);const g=[];let E=0;for(let y=0;y<Oo;++y){const B=y/b,V=Math.exp(-B*B/2);g.push(V),y===0?E+=V:y<v&&(E+=2*V)}for(let y=0;y<g.length;y++)g[y]=g[y]/E;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:w}=this;h.dTheta.value=m,h.mipInt.value=w-n;const S=this._sizeLods[s],I=3*S*(s>w-Ca?s-w+Ca:0),D=4*(this._cubeSize-S);Du(t,I,D,3*S,2*S),l.setRenderTarget(t),l.render(d,Ef)}}function i2(i){const e=[],t=[],n=[];let s=i;const r=i-Ca+1+Zv.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>i-Ca?l=Zv[o-i+Ca-1]:o===0&&(l=0),n.push(l);const u=1/(a-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=6,m=6,b=3,v=2,g=1,E=new Float32Array(b*m*f),w=new Float32Array(v*m*f),S=new Float32Array(g*m*f);for(let D=0;D<f;D++){const y=D%3*2/3-1,B=D>2?0:-1,V=[y,B,0,y+2/3,B,0,y+2/3,B+1,0,y,B,0,y+2/3,B+1,0,y,B+1,0];E.set(V,b*m*D),w.set(h,v*m*D);const C=[D,D,D,D,D,D];S.set(C,g*m*D)}const I=new ho;I.setAttribute("position",new Xs(E,b)),I.setAttribute("uv",new Xs(w,v)),I.setAttribute("faceIndex",new Xs(S,g)),e.push(I),s>Ca&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function t0(i,e,t){const n=new ao(i,e,t);return n.texture.mapping=zd,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Du(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function n2(i,e,t){const n=new Float32Array(Oo),s=new xe(0,1,0);return new lo({name:"SphericalGaussianBlur",defines:{n:Oo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:zm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Jr,depthTest:!1,depthWrite:!1})}function i0(){return new lo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Jr,depthTest:!1,depthWrite:!1})}function n0(){return new lo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Jr,depthTest:!1,depthWrite:!1})}function zm(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function s2(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,u=l===op||l===ap,c=l===Wa||l===ja;if(u||c){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new e0(i)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const f=a.image;return u&&f&&f.height>0||c&&f&&s(f)?(t===null&&(t=new e0(i)),d=u?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",r),d.texture):null}}}return a}function s(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function r(a){const l=a.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function r2(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&Yu("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function o2(i,e,t,n){const s={},r=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);for(const m in h.morphAttributes){const b=h.morphAttributes[m];for(let v=0,g=b.length;v<g;v++)e.remove(b[v])}h.removeEventListener("dispose",o),delete s[h.id];const f=r.get(h);f&&(e.remove(f),r.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return s[h.id]===!0||(h.addEventListener("dispose",o),s[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const m in h)e.update(h[m],i.ARRAY_BUFFER);const f=d.morphAttributes;for(const m in f){const b=f[m];for(let v=0,g=b.length;v<g;v++)e.update(b[v],i.ARRAY_BUFFER)}}function u(d){const h=[],f=d.index,m=d.attributes.position;let b=0;if(f!==null){const E=f.array;b=f.version;for(let w=0,S=E.length;w<S;w+=3){const I=E[w+0],D=E[w+1],y=E[w+2];h.push(I,D,D,y,y,I)}}else if(m!==void 0){const E=m.array;b=m.version;for(let w=0,S=E.length/3-1;w<S;w+=3){const I=w+0,D=w+1,y=w+2;h.push(I,D,D,y,y,I)}}else return;const v=new(Ab(h)?Ob:Db)(h,1);v.version=b;const g=r.get(d);g&&e.remove(g),r.set(d,v)}function c(d){const h=r.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&u(d)}else u(d);return r.get(d)}return{get:a,update:l,getWireframeAttribute:c}}function a2(i,e,t){let n;function s(h){n=h}let r,o;function a(h){r=h.type,o=h.bytesPerElement}function l(h,f){i.drawElements(n,f,r,h*o),t.update(f,n,1)}function u(h,f,m){m!==0&&(i.drawElementsInstanced(n,f,r,h*o,m),t.update(f,n,m))}function c(h,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,f,0,r,h,0,m);let v=0;for(let g=0;g<m;g++)v+=f[g];t.update(v,n,1)}function d(h,f,m,b){if(m===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<h.length;g++)u(h[g]/o,f[g],b[g]);else{v.multiDrawElementsInstancedWEBGL(n,f,0,r,h,0,b,0,m);let g=0;for(let E=0;E<m;E++)g+=f[E];for(let E=0;E<b.length;E++)t.update(g,n,b[E])}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function l2(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(r/3);break;case i.LINES:t.lines+=a*(r/2);break;case i.LINE_STRIP:t.lines+=a*(r-1);break;case i.LINE_LOOP:t.lines+=a*r;break;case i.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function c2(i,e,t){const n=new WeakMap,s=new ki;function r(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=c!==void 0?c.length:0;let h=n.get(a);if(h===void 0||h.count!==d){let C=function(){B.dispose(),n.delete(a),a.removeEventListener("dispose",C)};var f=C;h!==void 0&&h.texture.dispose();const m=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],E=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;m===!0&&(S=1),b===!0&&(S=2),v===!0&&(S=3);let I=a.attributes.position.count*S,D=1;I>e.maxTextureSize&&(D=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const y=new Float32Array(I*D*4*d),B=new Lb(y,I,D,d);B.type=Sr,B.needsUpdate=!0;const V=S*4;for(let A=0;A<d;A++){const H=g[A],P=E[A],F=w[A],Y=I*D*4*A;for(let Q=0;Q<H.count;Q++){const G=Q*V;m===!0&&(s.fromBufferAttribute(H,Q),y[Y+G+0]=s.x,y[Y+G+1]=s.y,y[Y+G+2]=s.z,y[Y+G+3]=0),b===!0&&(s.fromBufferAttribute(P,Q),y[Y+G+4]=s.x,y[Y+G+5]=s.y,y[Y+G+6]=s.z,y[Y+G+7]=0),v===!0&&(s.fromBufferAttribute(F,Q),y[Y+G+8]=s.x,y[Y+G+9]=s.y,y[Y+G+10]=s.z,y[Y+G+11]=F.itemSize===4?s.w:1)}}h={count:d,texture:B,size:new ei(I,D)},n.set(a,h),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let m=0;for(let v=0;v<u.length;v++)m+=u[v];const b=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(i,"morphTargetBaseInfluence",b),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",h.size)}return{update:r}}function u2(i,e,t,n){let s=new WeakMap;function r(l){const u=n.render.frame,c=l.geometry,d=e.get(l,c);if(s.get(d)!==u&&(e.update(d),s.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),s.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;s.get(h)!==u&&(h.update(),s.set(h,u))}return d}function o(){s=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:r,dispose:o}}class zb extends _n{constructor(e,t,n,s,r,o,a,l,u,c=Oa){if(c!==Oa&&c!==Xa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Oa&&(n=$o),n===void 0&&c===Xa&&(n=qa),super(null,s,r,o,a,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:us,this.minFilter=l!==void 0?l:us,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Bb=new _n,s0=new zb(1,1),Hb=new Lb,Vb=new YC,$b=new Fb,r0=[],o0=[],a0=new Float32Array(16),l0=new Float32Array(9),c0=new Float32Array(4);function ol(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=r0[s];if(r===void 0&&(r=new Float32Array(s),r0[s]=r),e!==0){n.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(r,a)}return r}function Wi(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function ji(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function $d(i,e){let t=o0[e];t===void 0&&(t=new Int32Array(e),o0[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function d2(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function h2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wi(t,e))return;i.uniform2fv(this.addr,e),ji(t,e)}}function f2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Wi(t,e))return;i.uniform3fv(this.addr,e),ji(t,e)}}function p2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wi(t,e))return;i.uniform4fv(this.addr,e),ji(t,e)}}function m2(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Wi(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),ji(t,e)}else{if(Wi(t,n))return;c0.set(n),i.uniformMatrix2fv(this.addr,!1,c0),ji(t,n)}}function g2(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Wi(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),ji(t,e)}else{if(Wi(t,n))return;l0.set(n),i.uniformMatrix3fv(this.addr,!1,l0),ji(t,n)}}function v2(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Wi(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),ji(t,e)}else{if(Wi(t,n))return;a0.set(n),i.uniformMatrix4fv(this.addr,!1,a0),ji(t,n)}}function y2(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function b2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wi(t,e))return;i.uniform2iv(this.addr,e),ji(t,e)}}function _2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wi(t,e))return;i.uniform3iv(this.addr,e),ji(t,e)}}function E2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wi(t,e))return;i.uniform4iv(this.addr,e),ji(t,e)}}function w2(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function x2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wi(t,e))return;i.uniform2uiv(this.addr,e),ji(t,e)}}function S2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wi(t,e))return;i.uniform3uiv(this.addr,e),ji(t,e)}}function T2(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wi(t,e))return;i.uniform4uiv(this.addr,e),ji(t,e)}}function M2(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(s0.compareFunction=Cb,r=s0):r=Bb,t.setTexture2D(e||r,s)}function C2(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Vb,s)}function A2(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||$b,s)}function P2(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||Hb,s)}function L2(i){switch(i){case 5126:return d2;case 35664:return h2;case 35665:return f2;case 35666:return p2;case 35674:return m2;case 35675:return g2;case 35676:return v2;case 5124:case 35670:return y2;case 35667:case 35671:return b2;case 35668:case 35672:return _2;case 35669:case 35673:return E2;case 5125:return w2;case 36294:return x2;case 36295:return S2;case 36296:return T2;case 35678:case 36198:case 36298:case 36306:case 35682:return M2;case 35679:case 36299:case 36307:return C2;case 35680:case 36300:case 36308:case 36293:return A2;case 36289:case 36303:case 36311:case 36292:return P2}}function R2(i,e){i.uniform1fv(this.addr,e)}function I2(i,e){const t=ol(e,this.size,2);i.uniform2fv(this.addr,t)}function D2(i,e){const t=ol(e,this.size,3);i.uniform3fv(this.addr,t)}function O2(i,e){const t=ol(e,this.size,4);i.uniform4fv(this.addr,t)}function N2(i,e){const t=ol(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function k2(i,e){const t=ol(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function F2(i,e){const t=ol(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function U2(i,e){i.uniform1iv(this.addr,e)}function z2(i,e){i.uniform2iv(this.addr,e)}function B2(i,e){i.uniform3iv(this.addr,e)}function H2(i,e){i.uniform4iv(this.addr,e)}function V2(i,e){i.uniform1uiv(this.addr,e)}function $2(i,e){i.uniform2uiv(this.addr,e)}function G2(i,e){i.uniform3uiv(this.addr,e)}function W2(i,e){i.uniform4uiv(this.addr,e)}function j2(i,e,t){const n=this.cache,s=e.length,r=$d(t,s);Wi(n,r)||(i.uniform1iv(this.addr,r),ji(n,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||Bb,r[o])}function q2(i,e,t){const n=this.cache,s=e.length,r=$d(t,s);Wi(n,r)||(i.uniform1iv(this.addr,r),ji(n,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||Vb,r[o])}function X2(i,e,t){const n=this.cache,s=e.length,r=$d(t,s);Wi(n,r)||(i.uniform1iv(this.addr,r),ji(n,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||$b,r[o])}function Y2(i,e,t){const n=this.cache,s=e.length,r=$d(t,s);Wi(n,r)||(i.uniform1iv(this.addr,r),ji(n,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||Hb,r[o])}function K2(i){switch(i){case 5126:return R2;case 35664:return I2;case 35665:return D2;case 35666:return O2;case 35674:return N2;case 35675:return k2;case 35676:return F2;case 5124:case 35670:return U2;case 35667:case 35671:return z2;case 35668:case 35672:return B2;case 35669:case 35673:return H2;case 5125:return V2;case 36294:return $2;case 36295:return G2;case 36296:return W2;case 35678:case 36198:case 36298:case 36306:case 35682:return j2;case 35679:case 36299:case 36307:return q2;case 35680:case 36300:case 36308:case 36293:return X2;case 36289:case 36303:case 36311:case 36292:return Y2}}class Z2{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=L2(t.type)}}class Q2{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=K2(t.type)}}class J2{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],n)}}}const Mf=/(\w+)(\])?(\[|\.)?/g;function u0(i,e){i.seq.push(e),i.map[e.id]=e}function eR(i,e,t){const n=i.name,s=n.length;for(Mf.lastIndex=0;;){const r=Mf.exec(n),o=Mf.lastIndex;let a=r[1];const l=r[2]==="]",u=r[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===s){u0(t,u===void 0?new Z2(a,i,e):new Q2(a,i,e));break}else{let d=t.map[a];d===void 0&&(d=new J2(a),u0(t,d)),t=d}}}class Ku{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);eR(r,o,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&n.push(o)}return n}}function d0(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const tR=37297;let iR=0;function nR(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function sR(i){const e=ai.getPrimaries(ai.workingColorSpace),t=ai.getPrimaries(i);let n;switch(e===t?n="":e===md&&t===pd?n="LinearDisplayP3ToLinearSRGB":e===pd&&t===md&&(n="LinearSRGBToLinearDisplayP3"),i){case Lr:case Bd:return[n,"LinearTransferOETF"];case Bs:case Om:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}function h0(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+nR(i.getShaderSource(e),o)}else return s}function rR(i,e){const t=sR(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function oR(i,e){let t;switch(e){case rC:t="Linear";break;case oC:t="Reinhard";break;case aC:t="Cineon";break;case lC:t="ACESFilmic";break;case uC:t="AgX";break;case dC:t="Neutral";break;case cC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Ou=new xe;function aR(){ai.getLuminanceCoefficients(Ou);const i=Ou.x.toFixed(4),e=Ou.y.toFixed(4),t=Ou.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function lR(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(jl).join(`
`)}function cR(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function uR(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),o=r.name;let a=1;r.type===i.FLOAT_MAT2&&(a=2),r.type===i.FLOAT_MAT3&&(a=3),r.type===i.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function jl(i){return i!==""}function f0(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function p0(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const dR=/^[ \t]*#include +<([\w\d./]+)>/gm;function kp(i){return i.replace(dR,fR)}const hR=new Map;function fR(i,e){let t=Ht[e];if(t===void 0){const n=hR.get(e);if(n!==void 0)t=Ht[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return kp(t)}const pR=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function m0(i){return i.replace(pR,mR)}function mR(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function g0(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gR(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===pb?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===UM?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===vr&&(e="SHADOWMAP_TYPE_VSM"),e}function vR(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Wa:case ja:e="ENVMAP_TYPE_CUBE";break;case zd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yR(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case ja:e="ENVMAP_MODE_REFRACTION";break}return e}function bR(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case mb:e="ENVMAP_BLENDING_MULTIPLY";break;case nC:e="ENVMAP_BLENDING_MIX";break;case sC:e="ENVMAP_BLENDING_ADD";break}return e}function _R(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function ER(i,e,t,n){const s=i.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=gR(t),u=vR(t),c=yR(t),d=bR(t),h=_R(t),f=lR(t),m=cR(r),b=s.createProgram();let v,g,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(jl).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(jl).join(`
`),g.length>0&&(g+=`
`)):(v=[g0(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jl).join(`
`),g=[g0(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==eo?"#define TONE_MAPPING":"",t.toneMapping!==eo?Ht.tonemapping_pars_fragment:"",t.toneMapping!==eo?oR("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ht.colorspace_pars_fragment,rR("linearToOutputTexel",t.outputColorSpace),aR(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(jl).join(`
`)),o=kp(o),o=f0(o,t),o=p0(o,t),a=kp(a),a=f0(a,t),a=p0(a,t),o=m0(o),a=m0(a),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,v=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===Iv?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Iv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=E+v+o,S=E+g+a,I=d0(s,s.VERTEX_SHADER,w),D=d0(s,s.FRAGMENT_SHADER,S);s.attachShader(b,I),s.attachShader(b,D),t.index0AttributeName!==void 0?s.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(b,0,"position"),s.linkProgram(b);function y(A){if(i.debug.checkShaderErrors){const H=s.getProgramInfoLog(b).trim(),P=s.getShaderInfoLog(I).trim(),F=s.getShaderInfoLog(D).trim();let Y=!0,Q=!0;if(s.getProgramParameter(b,s.LINK_STATUS)===!1)if(Y=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,b,I,D);else{const G=h0(s,I,"vertex"),z=h0(s,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(b,s.VALIDATE_STATUS)+`

Material Name: `+A.name+`
Material Type: `+A.type+`

Program Info Log: `+H+`
`+G+`
`+z)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(P===""||F==="")&&(Q=!1);Q&&(A.diagnostics={runnable:Y,programLog:H,vertexShader:{log:P,prefix:v},fragmentShader:{log:F,prefix:g}})}s.deleteShader(I),s.deleteShader(D),B=new Ku(s,b),V=uR(s,b)}let B;this.getUniforms=function(){return B===void 0&&y(this),B};let V;this.getAttributes=function(){return V===void 0&&y(this),V};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=s.getProgramParameter(b,tR)),C},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=iR++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=I,this.fragmentShader=D,this}let wR=0;class xR{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new SR(e),t.set(e,n)),n}}class SR{constructor(e){this.id=wR++,this.code=e,this.usedTimes=0}}function TR(i,e,t,n,s,r,o){const a=new Fm,l=new xR,u=new Set,c=[],d=s.logarithmicDepthBuffer,h=s.reverseDepthBuffer,f=s.vertexTextures;let m=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(C){return u.add(C),C===0?"uv":`uv${C}`}function g(C,A,H,P,F){const Y=P.fog,Q=F.geometry,G=C.isMeshStandardMaterial?P.environment:null,z=(C.isMeshStandardMaterial?t:e).get(C.envMap||G),ue=z&&z.mapping===zd?z.image.height:null,Ee=b[C.type];C.precision!==null&&(m=s.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const J=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,W=J!==void 0?J.length:0;let oe=0;Q.morphAttributes.position!==void 0&&(oe=1),Q.morphAttributes.normal!==void 0&&(oe=2),Q.morphAttributes.color!==void 0&&(oe=3);let ie,j,me,ge;if(Ee){const Si=Vs[Ee];ie=Si.vertexShader,j=Si.fragmentShader}else ie=C.vertexShader,j=C.fragmentShader,l.update(C),me=l.getVertexShaderID(C),ge=l.getFragmentShaderID(C);const Ne=i.getRenderTarget(),Fe=F.isInstancedMesh===!0,He=F.isBatchedMesh===!0,ct=!!C.map,at=!!C.matcap,se=!!z,ut=!!C.aoMap,pt=!!C.lightMap,yt=!!C.bumpMap,qe=!!C.normalMap,dt=!!C.displacementMap,We=!!C.emissiveMap,q=!!C.metalnessMap,O=!!C.roughnessMap,le=C.anisotropy>0,Ce=C.clearcoat>0,Re=C.dispersion>0,pe=C.iridescence>0,Xe=C.sheen>0,$e=C.transmission>0,it=le&&!!C.anisotropyMap,Ot=Ce&&!!C.clearcoatMap,ke=Ce&&!!C.clearcoatNormalMap,rt=Ce&&!!C.clearcoatRoughnessMap,_t=pe&&!!C.iridescenceMap,mt=pe&&!!C.iridescenceThicknessMap,Ye=Xe&&!!C.sheenColorMap,wt=Xe&&!!C.sheenRoughnessMap,St=!!C.specularMap,kt=!!C.specularColorMap,ce=!!C.specularIntensityMap,Ge=$e&&!!C.transmissionMap,Pe=$e&&!!C.thicknessMap,Oe=!!C.gradientMap,je=!!C.alphaMap,et=C.alphaTest>0,Ut=!!C.alphaHash,jt=!!C.extensions;let Qt=eo;C.toneMapped&&(Ne===null||Ne.isXRRenderTarget===!0)&&(Qt=i.toneMapping);const Bt={shaderID:Ee,shaderType:C.type,shaderName:C.name,vertexShader:ie,fragmentShader:j,defines:C.defines,customVertexShaderID:me,customFragmentShaderID:ge,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:He,batchingColor:He&&F._colorsTexture!==null,instancing:Fe,instancingColor:Fe&&F.instanceColor!==null,instancingMorph:Fe&&F.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:Ne===null?i.outputColorSpace:Ne.isXRRenderTarget===!0?Ne.texture.colorSpace:Lr,alphaToCoverage:!!C.alphaToCoverage,map:ct,matcap:at,envMap:se,envMapMode:se&&z.mapping,envMapCubeUVHeight:ue,aoMap:ut,lightMap:pt,bumpMap:yt,normalMap:qe,displacementMap:f&&dt,emissiveMap:We,normalMapObjectSpace:qe&&C.normalMapType===gC,normalMapTangentSpace:qe&&C.normalMapType===mC,metalnessMap:q,roughnessMap:O,anisotropy:le,anisotropyMap:it,clearcoat:Ce,clearcoatMap:Ot,clearcoatNormalMap:ke,clearcoatRoughnessMap:rt,dispersion:Re,iridescence:pe,iridescenceMap:_t,iridescenceThicknessMap:mt,sheen:Xe,sheenColorMap:Ye,sheenRoughnessMap:wt,specularMap:St,specularColorMap:kt,specularIntensityMap:ce,transmission:$e,transmissionMap:Ge,thicknessMap:Pe,gradientMap:Oe,opaque:C.transparent===!1&&C.blending===Da&&C.alphaToCoverage===!1,alphaMap:je,alphaTest:et,alphaHash:Ut,combine:C.combine,mapUv:ct&&v(C.map.channel),aoMapUv:ut&&v(C.aoMap.channel),lightMapUv:pt&&v(C.lightMap.channel),bumpMapUv:yt&&v(C.bumpMap.channel),normalMapUv:qe&&v(C.normalMap.channel),displacementMapUv:dt&&v(C.displacementMap.channel),emissiveMapUv:We&&v(C.emissiveMap.channel),metalnessMapUv:q&&v(C.metalnessMap.channel),roughnessMapUv:O&&v(C.roughnessMap.channel),anisotropyMapUv:it&&v(C.anisotropyMap.channel),clearcoatMapUv:Ot&&v(C.clearcoatMap.channel),clearcoatNormalMapUv:ke&&v(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:rt&&v(C.clearcoatRoughnessMap.channel),iridescenceMapUv:_t&&v(C.iridescenceMap.channel),iridescenceThicknessMapUv:mt&&v(C.iridescenceThicknessMap.channel),sheenColorMapUv:Ye&&v(C.sheenColorMap.channel),sheenRoughnessMapUv:wt&&v(C.sheenRoughnessMap.channel),specularMapUv:St&&v(C.specularMap.channel),specularColorMapUv:kt&&v(C.specularColorMap.channel),specularIntensityMapUv:ce&&v(C.specularIntensityMap.channel),transmissionMapUv:Ge&&v(C.transmissionMap.channel),thicknessMapUv:Pe&&v(C.thicknessMap.channel),alphaMapUv:je&&v(C.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(qe||le),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!Q.attributes.uv&&(ct||je),fog:!!Y,useFog:C.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:h,skinning:F.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:oe,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:i.shadowMap.enabled&&H.length>0,shadowMapType:i.shadowMap.type,toneMapping:Qt,decodeVideoTexture:ct&&C.map.isVideoTexture===!0&&ai.getTransfer(C.map.colorSpace)===Ei,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Er,flipSided:C.side===Pn,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:jt&&C.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(jt&&C.extensions.multiDraw===!0||He)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Bt.vertexUv1s=u.has(1),Bt.vertexUv2s=u.has(2),Bt.vertexUv3s=u.has(3),u.clear(),Bt}function E(C){const A=[];if(C.shaderID?A.push(C.shaderID):(A.push(C.customVertexShaderID),A.push(C.customFragmentShaderID)),C.defines!==void 0)for(const H in C.defines)A.push(H),A.push(C.defines[H]);return C.isRawShaderMaterial===!1&&(w(A,C),S(A,C),A.push(i.outputColorSpace)),A.push(C.customProgramCacheKey),A.join()}function w(C,A){C.push(A.precision),C.push(A.outputColorSpace),C.push(A.envMapMode),C.push(A.envMapCubeUVHeight),C.push(A.mapUv),C.push(A.alphaMapUv),C.push(A.lightMapUv),C.push(A.aoMapUv),C.push(A.bumpMapUv),C.push(A.normalMapUv),C.push(A.displacementMapUv),C.push(A.emissiveMapUv),C.push(A.metalnessMapUv),C.push(A.roughnessMapUv),C.push(A.anisotropyMapUv),C.push(A.clearcoatMapUv),C.push(A.clearcoatNormalMapUv),C.push(A.clearcoatRoughnessMapUv),C.push(A.iridescenceMapUv),C.push(A.iridescenceThicknessMapUv),C.push(A.sheenColorMapUv),C.push(A.sheenRoughnessMapUv),C.push(A.specularMapUv),C.push(A.specularColorMapUv),C.push(A.specularIntensityMapUv),C.push(A.transmissionMapUv),C.push(A.thicknessMapUv),C.push(A.combine),C.push(A.fogExp2),C.push(A.sizeAttenuation),C.push(A.morphTargetsCount),C.push(A.morphAttributeCount),C.push(A.numDirLights),C.push(A.numPointLights),C.push(A.numSpotLights),C.push(A.numSpotLightMaps),C.push(A.numHemiLights),C.push(A.numRectAreaLights),C.push(A.numDirLightShadows),C.push(A.numPointLightShadows),C.push(A.numSpotLightShadows),C.push(A.numSpotLightShadowsWithMaps),C.push(A.numLightProbes),C.push(A.shadowMapType),C.push(A.toneMapping),C.push(A.numClippingPlanes),C.push(A.numClipIntersection),C.push(A.depthPacking)}function S(C,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.reverseDepthBuffer&&a.enable(4),A.skinning&&a.enable(5),A.morphTargets&&a.enable(6),A.morphNormals&&a.enable(7),A.morphColors&&a.enable(8),A.premultipliedAlpha&&a.enable(9),A.shadowMapEnabled&&a.enable(10),A.doubleSided&&a.enable(11),A.flipSided&&a.enable(12),A.useDepthPacking&&a.enable(13),A.dithering&&a.enable(14),A.transmission&&a.enable(15),A.sheen&&a.enable(16),A.opaque&&a.enable(17),A.pointsUvs&&a.enable(18),A.decodeVideoTexture&&a.enable(19),A.alphaToCoverage&&a.enable(20),C.push(a.mask)}function I(C){const A=b[C.type];let H;if(A){const P=Vs[A];H=aA.clone(P.uniforms)}else H=C.uniforms;return H}function D(C,A){let H;for(let P=0,F=c.length;P<F;P++){const Y=c[P];if(Y.cacheKey===A){H=Y,++H.usedTimes;break}}return H===void 0&&(H=new ER(i,A,C,r),c.push(H)),H}function y(C){if(--C.usedTimes===0){const A=c.indexOf(C);c[A]=c[c.length-1],c.pop(),C.destroy()}}function B(C){l.remove(C)}function V(){l.dispose()}return{getParameters:g,getProgramCacheKey:E,getUniforms:I,acquireProgram:D,releaseProgram:y,releaseShaderCache:B,programs:c,dispose:V}}function MR(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function s(o,a,l){i.get(o)[a]=l}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function CR(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function v0(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function y0(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function o(d,h,f,m,b,v){let g=i[e];return g===void 0?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:b,group:v},i[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=m,g.renderOrder=d.renderOrder,g.z=b,g.group=v),e++,g}function a(d,h,f,m,b,v){const g=o(d,h,f,m,b,v);f.transmission>0?n.push(g):f.transparent===!0?s.push(g):t.push(g)}function l(d,h,f,m,b,v){const g=o(d,h,f,m,b,v);f.transmission>0?n.unshift(g):f.transparent===!0?s.unshift(g):t.unshift(g)}function u(d,h){t.length>1&&t.sort(d||CR),n.length>1&&n.sort(h||v0),s.length>1&&s.sort(h||v0)}function c(){for(let d=e,h=i.length;d<h;d++){const f=i[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:a,unshift:l,finish:c,sort:u}}function AR(){let i=new WeakMap;function e(n,s){const r=i.get(n);let o;return r===void 0?(o=new y0,i.set(n,[o])):s>=r.length?(o=new y0,r.push(o)):o=r[s],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function PR(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new xe,color:new pi};break;case"SpotLight":t={position:new xe,direction:new xe,color:new pi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new xe,color:new pi,distance:0,decay:0};break;case"HemisphereLight":t={direction:new xe,skyColor:new pi,groundColor:new pi};break;case"RectAreaLight":t={color:new pi,position:new xe,halfWidth:new xe,halfHeight:new xe};break}return i[e.id]=t,t}}}function LR(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ei};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ei};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ei,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let RR=0;function IR(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function DR(i){const e=new PR,t=LR(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new xe);const s=new xe,r=new Ai,o=new Ai;function a(u){let c=0,d=0,h=0;for(let V=0;V<9;V++)n.probe[V].set(0,0,0);let f=0,m=0,b=0,v=0,g=0,E=0,w=0,S=0,I=0,D=0,y=0;u.sort(IR);for(let V=0,C=u.length;V<C;V++){const A=u[V],H=A.color,P=A.intensity,F=A.distance,Y=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)c+=H.r*P,d+=H.g*P,h+=H.b*P;else if(A.isLightProbe){for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector(A.sh.coefficients[Q],P);y++}else if(A.isDirectionalLight){const Q=e.get(A);if(Q.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){const G=A.shadow,z=t.get(A);z.shadowIntensity=G.intensity,z.shadowBias=G.bias,z.shadowNormalBias=G.normalBias,z.shadowRadius=G.radius,z.shadowMapSize=G.mapSize,n.directionalShadow[f]=z,n.directionalShadowMap[f]=Y,n.directionalShadowMatrix[f]=A.shadow.matrix,E++}n.directional[f]=Q,f++}else if(A.isSpotLight){const Q=e.get(A);Q.position.setFromMatrixPosition(A.matrixWorld),Q.color.copy(H).multiplyScalar(P),Q.distance=F,Q.coneCos=Math.cos(A.angle),Q.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),Q.decay=A.decay,n.spot[b]=Q;const G=A.shadow;if(A.map&&(n.spotLightMap[I]=A.map,I++,G.updateMatrices(A),A.castShadow&&D++),n.spotLightMatrix[b]=G.matrix,A.castShadow){const z=t.get(A);z.shadowIntensity=G.intensity,z.shadowBias=G.bias,z.shadowNormalBias=G.normalBias,z.shadowRadius=G.radius,z.shadowMapSize=G.mapSize,n.spotShadow[b]=z,n.spotShadowMap[b]=Y,S++}b++}else if(A.isRectAreaLight){const Q=e.get(A);Q.color.copy(H).multiplyScalar(P),Q.halfWidth.set(A.width*.5,0,0),Q.halfHeight.set(0,A.height*.5,0),n.rectArea[v]=Q,v++}else if(A.isPointLight){const Q=e.get(A);if(Q.color.copy(A.color).multiplyScalar(A.intensity),Q.distance=A.distance,Q.decay=A.decay,A.castShadow){const G=A.shadow,z=t.get(A);z.shadowIntensity=G.intensity,z.shadowBias=G.bias,z.shadowNormalBias=G.normalBias,z.shadowRadius=G.radius,z.shadowMapSize=G.mapSize,z.shadowCameraNear=G.camera.near,z.shadowCameraFar=G.camera.far,n.pointShadow[m]=z,n.pointShadowMap[m]=Y,n.pointShadowMatrix[m]=A.shadow.matrix,w++}n.point[m]=Q,m++}else if(A.isHemisphereLight){const Q=e.get(A);Q.skyColor.copy(A.color).multiplyScalar(P),Q.groundColor.copy(A.groundColor).multiplyScalar(P),n.hemi[g]=Q,g++}}v>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Je.LTC_FLOAT_1,n.rectAreaLTC2=Je.LTC_FLOAT_2):(n.rectAreaLTC1=Je.LTC_HALF_1,n.rectAreaLTC2=Je.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=d,n.ambient[2]=h;const B=n.hash;(B.directionalLength!==f||B.pointLength!==m||B.spotLength!==b||B.rectAreaLength!==v||B.hemiLength!==g||B.numDirectionalShadows!==E||B.numPointShadows!==w||B.numSpotShadows!==S||B.numSpotMaps!==I||B.numLightProbes!==y)&&(n.directional.length=f,n.spot.length=b,n.rectArea.length=v,n.point.length=m,n.hemi.length=g,n.directionalShadow.length=E,n.directionalShadowMap.length=E,n.pointShadow.length=w,n.pointShadowMap.length=w,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=E,n.pointShadowMatrix.length=w,n.spotLightMatrix.length=S+I-D,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=D,n.numLightProbes=y,B.directionalLength=f,B.pointLength=m,B.spotLength=b,B.rectAreaLength=v,B.hemiLength=g,B.numDirectionalShadows=E,B.numPointShadows=w,B.numSpotShadows=S,B.numSpotMaps=I,B.numLightProbes=y,n.version=RR++)}function l(u,c){let d=0,h=0,f=0,m=0,b=0;const v=c.matrixWorldInverse;for(let g=0,E=u.length;g<E;g++){const w=u[g];if(w.isDirectionalLight){const S=n.directional[d];S.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),d++}else if(w.isSpotLight){const S=n.spot[f];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),f++}else if(w.isRectAreaLight){const S=n.rectArea[m];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(v),o.identity(),r.copy(w.matrixWorld),r.premultiply(v),o.extractRotation(r),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),m++}else if(w.isPointLight){const S=n.point[h];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(v),h++}else if(w.isHemisphereLight){const S=n.hemi[b];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(v),b++}}}return{setup:a,setupView:l,state:n}}function b0(i){const e=new DR(i),t=[],n=[];function s(c){u.camera=c,t.length=0,n.length=0}function r(c){t.push(c)}function o(c){n.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:u,setupLights:a,setupLightsView:l,pushLight:r,pushShadow:o}}function OR(i){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let a;return o===void 0?(a=new b0(i),e.set(s,[a])):r>=o.length?(a=new b0(i),o.push(a)):a=o[r],a}function n(){e=new WeakMap}return{get:t,dispose:n}}class NR extends Hd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=fC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class kR extends Hd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const FR=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,UR=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zR(i,e,t){let n=new Um;const s=new ei,r=new ei,o=new ki,a=new NR({depthPacking:pC}),l=new kR,u={},c=t.maxTextureSize,d={[oo]:Pn,[Pn]:oo,[Er]:Er},h=new lo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ei},radius:{value:4}},vertexShader:FR,fragmentShader:UR}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new ho;m.setAttribute("position",new Xs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new ds(m,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pb;let g=this.type;this.render=function(D,y,B){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||D.length===0)return;const V=i.getRenderTarget(),C=i.getActiveCubeFace(),A=i.getActiveMipmapLevel(),H=i.state;H.setBlending(Jr),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const P=g!==vr&&this.type===vr,F=g===vr&&this.type!==vr;for(let Y=0,Q=D.length;Y<Q;Y++){const G=D[Y],z=G.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;s.copy(z.mapSize);const ue=z.getFrameExtents();if(s.multiply(ue),r.copy(z.mapSize),(s.x>c||s.y>c)&&(s.x>c&&(r.x=Math.floor(c/ue.x),s.x=r.x*ue.x,z.mapSize.x=r.x),s.y>c&&(r.y=Math.floor(c/ue.y),s.y=r.y*ue.y,z.mapSize.y=r.y)),z.map===null||P===!0||F===!0){const J=this.type!==vr?{minFilter:us,magFilter:us}:{};z.map!==null&&z.map.dispose(),z.map=new ao(s.x,s.y,J),z.map.texture.name=G.name+".shadowMap",z.camera.updateProjectionMatrix()}i.setRenderTarget(z.map),i.clear();const Ee=z.getViewportCount();for(let J=0;J<Ee;J++){const W=z.getViewport(J);o.set(r.x*W.x,r.y*W.y,r.x*W.z,r.y*W.w),H.viewport(o),z.updateMatrices(G,J),n=z.getFrustum(),S(y,B,z.camera,G,this.type)}z.isPointLightShadow!==!0&&this.type===vr&&E(z,B),z.needsUpdate=!1}g=this.type,v.needsUpdate=!1,i.setRenderTarget(V,C,A)};function E(D,y){const B=e.update(b);h.defines.VSM_SAMPLES!==D.blurSamples&&(h.defines.VSM_SAMPLES=D.blurSamples,f.defines.VSM_SAMPLES=D.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new ao(s.x,s.y)),h.uniforms.shadow_pass.value=D.map.texture,h.uniforms.resolution.value=D.mapSize,h.uniforms.radius.value=D.radius,i.setRenderTarget(D.mapPass),i.clear(),i.renderBufferDirect(y,null,B,h,b,null),f.uniforms.shadow_pass.value=D.mapPass.texture,f.uniforms.resolution.value=D.mapSize,f.uniforms.radius.value=D.radius,i.setRenderTarget(D.map),i.clear(),i.renderBufferDirect(y,null,B,f,b,null)}function w(D,y,B,V){let C=null;const A=B.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(A!==void 0)C=A;else if(C=B.isPointLight===!0?l:a,i.localClippingEnabled&&y.clipShadows===!0&&Array.isArray(y.clippingPlanes)&&y.clippingPlanes.length!==0||y.displacementMap&&y.displacementScale!==0||y.alphaMap&&y.alphaTest>0||y.map&&y.alphaTest>0){const H=C.uuid,P=y.uuid;let F=u[H];F===void 0&&(F={},u[H]=F);let Y=F[P];Y===void 0&&(Y=C.clone(),F[P]=Y,y.addEventListener("dispose",I)),C=Y}if(C.visible=y.visible,C.wireframe=y.wireframe,V===vr?C.side=y.shadowSide!==null?y.shadowSide:y.side:C.side=y.shadowSide!==null?y.shadowSide:d[y.side],C.alphaMap=y.alphaMap,C.alphaTest=y.alphaTest,C.map=y.map,C.clipShadows=y.clipShadows,C.clippingPlanes=y.clippingPlanes,C.clipIntersection=y.clipIntersection,C.displacementMap=y.displacementMap,C.displacementScale=y.displacementScale,C.displacementBias=y.displacementBias,C.wireframeLinewidth=y.wireframeLinewidth,C.linewidth=y.linewidth,B.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const H=i.properties.get(C);H.light=B}return C}function S(D,y,B,V,C){if(D.visible===!1)return;if(D.layers.test(y.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&C===vr)&&(!D.frustumCulled||n.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,D.matrixWorld);const P=e.update(D),F=D.material;if(Array.isArray(F)){const Y=P.groups;for(let Q=0,G=Y.length;Q<G;Q++){const z=Y[Q],ue=F[z.materialIndex];if(ue&&ue.visible){const Ee=w(D,ue,V,C);D.onBeforeShadow(i,D,y,B,P,Ee,z),i.renderBufferDirect(B,null,P,Ee,D,z),D.onAfterShadow(i,D,y,B,P,Ee,z)}}}else if(F.visible){const Y=w(D,F,V,C);D.onBeforeShadow(i,D,y,B,P,Y,null),i.renderBufferDirect(B,null,P,Y,D,null),D.onAfterShadow(i,D,y,B,P,Y,null)}}const H=D.children;for(let P=0,F=H.length;P<F;P++)S(H[P],y,B,V,C)}function I(D){D.target.removeEventListener("dispose",I);for(const B in u){const V=u[B],C=D.target.uuid;C in V&&(V[C].dispose(),delete V[C])}}}const BR={[Jf]:ep,[tp]:sp,[ip]:rp,[Ga]:np,[ep]:Jf,[sp]:tp,[rp]:ip,[np]:Ga};function HR(i){function e(){let ce=!1;const Ge=new ki;let Pe=null;const Oe=new ki(0,0,0,0);return{setMask:function(je){Pe!==je&&!ce&&(i.colorMask(je,je,je,je),Pe=je)},setLocked:function(je){ce=je},setClear:function(je,et,Ut,jt,Qt){Qt===!0&&(je*=jt,et*=jt,Ut*=jt),Ge.set(je,et,Ut,jt),Oe.equals(Ge)===!1&&(i.clearColor(je,et,Ut,jt),Oe.copy(Ge))},reset:function(){ce=!1,Pe=null,Oe.set(-1,0,0,0)}}}function t(){let ce=!1,Ge=!1,Pe=null,Oe=null,je=null;return{setReversed:function(et){Ge=et},setTest:function(et){et?me(i.DEPTH_TEST):ge(i.DEPTH_TEST)},setMask:function(et){Pe!==et&&!ce&&(i.depthMask(et),Pe=et)},setFunc:function(et){if(Ge&&(et=BR[et]),Oe!==et){switch(et){case Jf:i.depthFunc(i.NEVER);break;case ep:i.depthFunc(i.ALWAYS);break;case tp:i.depthFunc(i.LESS);break;case Ga:i.depthFunc(i.LEQUAL);break;case ip:i.depthFunc(i.EQUAL);break;case np:i.depthFunc(i.GEQUAL);break;case sp:i.depthFunc(i.GREATER);break;case rp:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Oe=et}},setLocked:function(et){ce=et},setClear:function(et){je!==et&&(i.clearDepth(et),je=et)},reset:function(){ce=!1,Pe=null,Oe=null,je=null}}}function n(){let ce=!1,Ge=null,Pe=null,Oe=null,je=null,et=null,Ut=null,jt=null,Qt=null;return{setTest:function(Bt){ce||(Bt?me(i.STENCIL_TEST):ge(i.STENCIL_TEST))},setMask:function(Bt){Ge!==Bt&&!ce&&(i.stencilMask(Bt),Ge=Bt)},setFunc:function(Bt,Si,Hi){(Pe!==Bt||Oe!==Si||je!==Hi)&&(i.stencilFunc(Bt,Si,Hi),Pe=Bt,Oe=Si,je=Hi)},setOp:function(Bt,Si,Hi){(et!==Bt||Ut!==Si||jt!==Hi)&&(i.stencilOp(Bt,Si,Hi),et=Bt,Ut=Si,jt=Hi)},setLocked:function(Bt){ce=Bt},setClear:function(Bt){Qt!==Bt&&(i.clearStencil(Bt),Qt=Bt)},reset:function(){ce=!1,Ge=null,Pe=null,Oe=null,je=null,et=null,Ut=null,jt=null,Qt=null}}}const s=new e,r=new t,o=new n,a=new WeakMap,l=new WeakMap;let u={},c={},d=new WeakMap,h=[],f=null,m=!1,b=null,v=null,g=null,E=null,w=null,S=null,I=null,D=new pi(0,0,0),y=0,B=!1,V=null,C=null,A=null,H=null,P=null;const F=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Q=0;const G=i.getParameter(i.VERSION);G.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(G)[1]),Y=Q>=1):G.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),Y=Q>=2);let z=null,ue={};const Ee=i.getParameter(i.SCISSOR_BOX),J=i.getParameter(i.VIEWPORT),W=new ki().fromArray(Ee),oe=new ki().fromArray(J);function ie(ce,Ge,Pe,Oe){const je=new Uint8Array(4),et=i.createTexture();i.bindTexture(ce,et),i.texParameteri(ce,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ce,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ut=0;Ut<Pe;Ut++)ce===i.TEXTURE_3D||ce===i.TEXTURE_2D_ARRAY?i.texImage3D(Ge,0,i.RGBA,1,1,Oe,0,i.RGBA,i.UNSIGNED_BYTE,je):i.texImage2D(Ge+Ut,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,je);return et}const j={};j[i.TEXTURE_2D]=ie(i.TEXTURE_2D,i.TEXTURE_2D,1),j[i.TEXTURE_CUBE_MAP]=ie(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),j[i.TEXTURE_2D_ARRAY]=ie(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),j[i.TEXTURE_3D]=ie(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),r.setClear(1),o.setClear(0),me(i.DEPTH_TEST),r.setFunc(Ga),pt(!1),yt(Mv),me(i.CULL_FACE),se(Jr);function me(ce){u[ce]!==!0&&(i.enable(ce),u[ce]=!0)}function ge(ce){u[ce]!==!1&&(i.disable(ce),u[ce]=!1)}function Ne(ce,Ge){return c[ce]!==Ge?(i.bindFramebuffer(ce,Ge),c[ce]=Ge,ce===i.DRAW_FRAMEBUFFER&&(c[i.FRAMEBUFFER]=Ge),ce===i.FRAMEBUFFER&&(c[i.DRAW_FRAMEBUFFER]=Ge),!0):!1}function Fe(ce,Ge){let Pe=h,Oe=!1;if(ce){Pe=d.get(Ge),Pe===void 0&&(Pe=[],d.set(Ge,Pe));const je=ce.textures;if(Pe.length!==je.length||Pe[0]!==i.COLOR_ATTACHMENT0){for(let et=0,Ut=je.length;et<Ut;et++)Pe[et]=i.COLOR_ATTACHMENT0+et;Pe.length=je.length,Oe=!0}}else Pe[0]!==i.BACK&&(Pe[0]=i.BACK,Oe=!0);Oe&&i.drawBuffers(Pe)}function He(ce){return f!==ce?(i.useProgram(ce),f=ce,!0):!1}const ct={[Do]:i.FUNC_ADD,[BM]:i.FUNC_SUBTRACT,[HM]:i.FUNC_REVERSE_SUBTRACT};ct[VM]=i.MIN,ct[$M]=i.MAX;const at={[GM]:i.ZERO,[WM]:i.ONE,[jM]:i.SRC_COLOR,[Zf]:i.SRC_ALPHA,[QM]:i.SRC_ALPHA_SATURATE,[KM]:i.DST_COLOR,[XM]:i.DST_ALPHA,[qM]:i.ONE_MINUS_SRC_COLOR,[Qf]:i.ONE_MINUS_SRC_ALPHA,[ZM]:i.ONE_MINUS_DST_COLOR,[YM]:i.ONE_MINUS_DST_ALPHA,[JM]:i.CONSTANT_COLOR,[eC]:i.ONE_MINUS_CONSTANT_COLOR,[tC]:i.CONSTANT_ALPHA,[iC]:i.ONE_MINUS_CONSTANT_ALPHA};function se(ce,Ge,Pe,Oe,je,et,Ut,jt,Qt,Bt){if(ce===Jr){m===!0&&(ge(i.BLEND),m=!1);return}if(m===!1&&(me(i.BLEND),m=!0),ce!==zM){if(ce!==b||Bt!==B){if((v!==Do||w!==Do)&&(i.blendEquation(i.FUNC_ADD),v=Do,w=Do),Bt)switch(ce){case Da:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Cv:i.blendFunc(i.ONE,i.ONE);break;case Av:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Pv:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case Da:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Cv:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case Av:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Pv:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}g=null,E=null,S=null,I=null,D.set(0,0,0),y=0,b=ce,B=Bt}return}je=je||Ge,et=et||Pe,Ut=Ut||Oe,(Ge!==v||je!==w)&&(i.blendEquationSeparate(ct[Ge],ct[je]),v=Ge,w=je),(Pe!==g||Oe!==E||et!==S||Ut!==I)&&(i.blendFuncSeparate(at[Pe],at[Oe],at[et],at[Ut]),g=Pe,E=Oe,S=et,I=Ut),(jt.equals(D)===!1||Qt!==y)&&(i.blendColor(jt.r,jt.g,jt.b,Qt),D.copy(jt),y=Qt),b=ce,B=!1}function ut(ce,Ge){ce.side===Er?ge(i.CULL_FACE):me(i.CULL_FACE);let Pe=ce.side===Pn;Ge&&(Pe=!Pe),pt(Pe),ce.blending===Da&&ce.transparent===!1?se(Jr):se(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),r.setFunc(ce.depthFunc),r.setTest(ce.depthTest),r.setMask(ce.depthWrite),s.setMask(ce.colorWrite);const Oe=ce.stencilWrite;o.setTest(Oe),Oe&&(o.setMask(ce.stencilWriteMask),o.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),o.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),dt(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?me(i.SAMPLE_ALPHA_TO_COVERAGE):ge(i.SAMPLE_ALPHA_TO_COVERAGE)}function pt(ce){V!==ce&&(ce?i.frontFace(i.CW):i.frontFace(i.CCW),V=ce)}function yt(ce){ce!==kM?(me(i.CULL_FACE),ce!==C&&(ce===Mv?i.cullFace(i.BACK):ce===FM?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ge(i.CULL_FACE),C=ce}function qe(ce){ce!==A&&(Y&&i.lineWidth(ce),A=ce)}function dt(ce,Ge,Pe){ce?(me(i.POLYGON_OFFSET_FILL),(H!==Ge||P!==Pe)&&(i.polygonOffset(Ge,Pe),H=Ge,P=Pe)):ge(i.POLYGON_OFFSET_FILL)}function We(ce){ce?me(i.SCISSOR_TEST):ge(i.SCISSOR_TEST)}function q(ce){ce===void 0&&(ce=i.TEXTURE0+F-1),z!==ce&&(i.activeTexture(ce),z=ce)}function O(ce,Ge,Pe){Pe===void 0&&(z===null?Pe=i.TEXTURE0+F-1:Pe=z);let Oe=ue[Pe];Oe===void 0&&(Oe={type:void 0,texture:void 0},ue[Pe]=Oe),(Oe.type!==ce||Oe.texture!==Ge)&&(z!==Pe&&(i.activeTexture(Pe),z=Pe),i.bindTexture(ce,Ge||j[ce]),Oe.type=ce,Oe.texture=Ge)}function le(){const ce=ue[z];ce!==void 0&&ce.type!==void 0&&(i.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function Ce(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Re(){try{i.compressedTexImage3D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function pe(){try{i.texSubImage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Xe(){try{i.texSubImage3D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function $e(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function it(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ot(){try{i.texStorage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ke(){try{i.texStorage3D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function rt(){try{i.texImage2D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function _t(){try{i.texImage3D.apply(i,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function mt(ce){W.equals(ce)===!1&&(i.scissor(ce.x,ce.y,ce.z,ce.w),W.copy(ce))}function Ye(ce){oe.equals(ce)===!1&&(i.viewport(ce.x,ce.y,ce.z,ce.w),oe.copy(ce))}function wt(ce,Ge){let Pe=l.get(Ge);Pe===void 0&&(Pe=new WeakMap,l.set(Ge,Pe));let Oe=Pe.get(ce);Oe===void 0&&(Oe=i.getUniformBlockIndex(Ge,ce.name),Pe.set(ce,Oe))}function St(ce,Ge){const Oe=l.get(Ge).get(ce);a.get(Ge)!==Oe&&(i.uniformBlockBinding(Ge,Oe,ce.__bindingPointIndex),a.set(Ge,Oe))}function kt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},z=null,ue={},c={},d=new WeakMap,h=[],f=null,m=!1,b=null,v=null,g=null,E=null,w=null,S=null,I=null,D=new pi(0,0,0),y=0,B=!1,V=null,C=null,A=null,H=null,P=null,W.set(0,0,i.canvas.width,i.canvas.height),oe.set(0,0,i.canvas.width,i.canvas.height),s.reset(),r.reset(),o.reset()}return{buffers:{color:s,depth:r,stencil:o},enable:me,disable:ge,bindFramebuffer:Ne,drawBuffers:Fe,useProgram:He,setBlending:se,setMaterial:ut,setFlipSided:pt,setCullFace:yt,setLineWidth:qe,setPolygonOffset:dt,setScissorTest:We,activeTexture:q,bindTexture:O,unbindTexture:le,compressedTexImage2D:Ce,compressedTexImage3D:Re,texImage2D:rt,texImage3D:_t,updateUBOMapping:wt,uniformBlockBinding:St,texStorage2D:Ot,texStorage3D:ke,texSubImage2D:pe,texSubImage3D:Xe,compressedTexSubImage2D:$e,compressedTexSubImage3D:it,scissor:mt,viewport:Ye,reset:kt}}function _0(i,e,t,n){const s=VR(n);switch(t){case _b:return i*e;case wb:return i*e;case xb:return i*e*2;case Sb:return i*e/s.components*s.byteLength;case Rm:return i*e/s.components*s.byteLength;case Tb:return i*e*2/s.components*s.byteLength;case Im:return i*e*2/s.components*s.byteLength;case Eb:return i*e*3/s.components*s.byteLength;case Ts:return i*e*4/s.components*s.byteLength;case Dm:return i*e*4/s.components*s.byteLength;case Gu:case Wu:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case ju:case qu:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case dp:case fp:return Math.max(i,16)*Math.max(e,8)/4;case up:case hp:return Math.max(i,8)*Math.max(e,8)/2;case pp:case mp:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case gp:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case vp:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case yp:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case bp:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case _p:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Ep:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case wp:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case xp:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Sp:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Tp:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Mp:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Cp:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Ap:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Pp:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Lp:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Xu:case Rp:case Ip:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Mb:case Dp:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Op:case Np:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function VR(i){switch(i){case Ar:case vb:return{byteLength:1,components:1};case yc:case yb:case Rc:return{byteLength:2,components:1};case Pm:case Lm:return{byteLength:2,components:4};case $o:case Am:case Sr:return{byteLength:4,components:1};case bb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}function $R(i,e,t,n,s,r,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new ei,c=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(q,O){return f?new OffscreenCanvas(q,O):vd("canvas")}function b(q,O,le){let Ce=1;const Re=We(q);if((Re.width>le||Re.height>le)&&(Ce=le/Math.max(Re.width,Re.height)),Ce<1)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap||typeof VideoFrame<"u"&&q instanceof VideoFrame){const pe=Math.floor(Ce*Re.width),Xe=Math.floor(Ce*Re.height);d===void 0&&(d=m(pe,Xe));const $e=O?m(pe,Xe):d;return $e.width=pe,$e.height=Xe,$e.getContext("2d").drawImage(q,0,0,pe,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+pe+"x"+Xe+")."),$e}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),q;return q}function v(q){return q.generateMipmaps&&q.minFilter!==us&&q.minFilter!==ls}function g(q){i.generateMipmap(q)}function E(q,O,le,Ce,Re=!1){if(q!==null){if(i[q]!==void 0)return i[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let pe=O;if(O===i.RED&&(le===i.FLOAT&&(pe=i.R32F),le===i.HALF_FLOAT&&(pe=i.R16F),le===i.UNSIGNED_BYTE&&(pe=i.R8)),O===i.RED_INTEGER&&(le===i.UNSIGNED_BYTE&&(pe=i.R8UI),le===i.UNSIGNED_SHORT&&(pe=i.R16UI),le===i.UNSIGNED_INT&&(pe=i.R32UI),le===i.BYTE&&(pe=i.R8I),le===i.SHORT&&(pe=i.R16I),le===i.INT&&(pe=i.R32I)),O===i.RG&&(le===i.FLOAT&&(pe=i.RG32F),le===i.HALF_FLOAT&&(pe=i.RG16F),le===i.UNSIGNED_BYTE&&(pe=i.RG8)),O===i.RG_INTEGER&&(le===i.UNSIGNED_BYTE&&(pe=i.RG8UI),le===i.UNSIGNED_SHORT&&(pe=i.RG16UI),le===i.UNSIGNED_INT&&(pe=i.RG32UI),le===i.BYTE&&(pe=i.RG8I),le===i.SHORT&&(pe=i.RG16I),le===i.INT&&(pe=i.RG32I)),O===i.RGB_INTEGER&&(le===i.UNSIGNED_BYTE&&(pe=i.RGB8UI),le===i.UNSIGNED_SHORT&&(pe=i.RGB16UI),le===i.UNSIGNED_INT&&(pe=i.RGB32UI),le===i.BYTE&&(pe=i.RGB8I),le===i.SHORT&&(pe=i.RGB16I),le===i.INT&&(pe=i.RGB32I)),O===i.RGBA_INTEGER&&(le===i.UNSIGNED_BYTE&&(pe=i.RGBA8UI),le===i.UNSIGNED_SHORT&&(pe=i.RGBA16UI),le===i.UNSIGNED_INT&&(pe=i.RGBA32UI),le===i.BYTE&&(pe=i.RGBA8I),le===i.SHORT&&(pe=i.RGBA16I),le===i.INT&&(pe=i.RGBA32I)),O===i.RGB&&le===i.UNSIGNED_INT_5_9_9_9_REV&&(pe=i.RGB9_E5),O===i.RGBA){const Xe=Re?fd:ai.getTransfer(Ce);le===i.FLOAT&&(pe=i.RGBA32F),le===i.HALF_FLOAT&&(pe=i.RGBA16F),le===i.UNSIGNED_BYTE&&(pe=Xe===Ei?i.SRGB8_ALPHA8:i.RGBA8),le===i.UNSIGNED_SHORT_4_4_4_4&&(pe=i.RGBA4),le===i.UNSIGNED_SHORT_5_5_5_1&&(pe=i.RGB5_A1)}return(pe===i.R16F||pe===i.R32F||pe===i.RG16F||pe===i.RG32F||pe===i.RGBA16F||pe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function w(q,O){let le;return q?O===null||O===$o||O===qa?le=i.DEPTH24_STENCIL8:O===Sr?le=i.DEPTH32F_STENCIL8:O===yc&&(le=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===$o||O===qa?le=i.DEPTH_COMPONENT24:O===Sr?le=i.DEPTH_COMPONENT32F:O===yc&&(le=i.DEPTH_COMPONENT16),le}function S(q,O){return v(q)===!0||q.isFramebufferTexture&&q.minFilter!==us&&q.minFilter!==ls?Math.log2(Math.max(O.width,O.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?O.mipmaps.length:1}function I(q){const O=q.target;O.removeEventListener("dispose",I),y(O),O.isVideoTexture&&c.delete(O)}function D(q){const O=q.target;O.removeEventListener("dispose",D),V(O)}function y(q){const O=n.get(q);if(O.__webglInit===void 0)return;const le=q.source,Ce=h.get(le);if(Ce){const Re=Ce[O.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&B(q),Object.keys(Ce).length===0&&h.delete(le)}n.remove(q)}function B(q){const O=n.get(q);i.deleteTexture(O.__webglTexture);const le=q.source,Ce=h.get(le);delete Ce[O.__cacheKey],o.memory.textures--}function V(q){const O=n.get(q);if(q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++){if(Array.isArray(O.__webglFramebuffer[Ce]))for(let Re=0;Re<O.__webglFramebuffer[Ce].length;Re++)i.deleteFramebuffer(O.__webglFramebuffer[Ce][Re]);else i.deleteFramebuffer(O.__webglFramebuffer[Ce]);O.__webglDepthbuffer&&i.deleteRenderbuffer(O.__webglDepthbuffer[Ce])}else{if(Array.isArray(O.__webglFramebuffer))for(let Ce=0;Ce<O.__webglFramebuffer.length;Ce++)i.deleteFramebuffer(O.__webglFramebuffer[Ce]);else i.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&i.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&i.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let Ce=0;Ce<O.__webglColorRenderbuffer.length;Ce++)O.__webglColorRenderbuffer[Ce]&&i.deleteRenderbuffer(O.__webglColorRenderbuffer[Ce]);O.__webglDepthRenderbuffer&&i.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const le=q.textures;for(let Ce=0,Re=le.length;Ce<Re;Ce++){const pe=n.get(le[Ce]);pe.__webglTexture&&(i.deleteTexture(pe.__webglTexture),o.memory.textures--),n.remove(le[Ce])}n.remove(q)}let C=0;function A(){C=0}function H(){const q=C;return q>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+s.maxTextures),C+=1,q}function P(q){const O=[];return O.push(q.wrapS),O.push(q.wrapT),O.push(q.wrapR||0),O.push(q.magFilter),O.push(q.minFilter),O.push(q.anisotropy),O.push(q.internalFormat),O.push(q.format),O.push(q.type),O.push(q.generateMipmaps),O.push(q.premultiplyAlpha),O.push(q.flipY),O.push(q.unpackAlignment),O.push(q.colorSpace),O.join()}function F(q,O){const le=n.get(q);if(q.isVideoTexture&&qe(q),q.isRenderTargetTexture===!1&&q.version>0&&le.__version!==q.version){const Ce=q.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(le,q,O);return}}t.bindTexture(i.TEXTURE_2D,le.__webglTexture,i.TEXTURE0+O)}function Y(q,O){const le=n.get(q);if(q.version>0&&le.__version!==q.version){oe(le,q,O);return}t.bindTexture(i.TEXTURE_2D_ARRAY,le.__webglTexture,i.TEXTURE0+O)}function Q(q,O){const le=n.get(q);if(q.version>0&&le.__version!==q.version){oe(le,q,O);return}t.bindTexture(i.TEXTURE_3D,le.__webglTexture,i.TEXTURE0+O)}function G(q,O){const le=n.get(q);if(q.version>0&&le.__version!==q.version){ie(le,q,O);return}t.bindTexture(i.TEXTURE_CUBE_MAP,le.__webglTexture,i.TEXTURE0+O)}const z={[lp]:i.REPEAT,[Fo]:i.CLAMP_TO_EDGE,[cp]:i.MIRRORED_REPEAT},ue={[us]:i.NEAREST,[hC]:i.NEAREST_MIPMAP_NEAREST,[pu]:i.NEAREST_MIPMAP_LINEAR,[ls]:i.LINEAR,[Qh]:i.LINEAR_MIPMAP_NEAREST,[Qr]:i.LINEAR_MIPMAP_LINEAR},Ee={[vC]:i.NEVER,[xC]:i.ALWAYS,[yC]:i.LESS,[Cb]:i.LEQUAL,[bC]:i.EQUAL,[wC]:i.GEQUAL,[_C]:i.GREATER,[EC]:i.NOTEQUAL};function J(q,O){if(O.type===Sr&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===ls||O.magFilter===Qh||O.magFilter===pu||O.magFilter===Qr||O.minFilter===ls||O.minFilter===Qh||O.minFilter===pu||O.minFilter===Qr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(q,i.TEXTURE_WRAP_S,z[O.wrapS]),i.texParameteri(q,i.TEXTURE_WRAP_T,z[O.wrapT]),(q===i.TEXTURE_3D||q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(q,i.TEXTURE_WRAP_R,z[O.wrapR]),i.texParameteri(q,i.TEXTURE_MAG_FILTER,ue[O.magFilter]),i.texParameteri(q,i.TEXTURE_MIN_FILTER,ue[O.minFilter]),O.compareFunction&&(i.texParameteri(q,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(q,i.TEXTURE_COMPARE_FUNC,Ee[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===us||O.minFilter!==pu&&O.minFilter!==Qr||O.type===Sr&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||n.get(O).__currentAnisotropy){const le=e.get("EXT_texture_filter_anisotropic");i.texParameterf(q,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,s.getMaxAnisotropy())),n.get(O).__currentAnisotropy=O.anisotropy}}}function W(q,O){let le=!1;q.__webglInit===void 0&&(q.__webglInit=!0,O.addEventListener("dispose",I));const Ce=O.source;let Re=h.get(Ce);Re===void 0&&(Re={},h.set(Ce,Re));const pe=P(O);if(pe!==q.__cacheKey){Re[pe]===void 0&&(Re[pe]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Re[pe].usedTimes++;const Xe=Re[q.__cacheKey];Xe!==void 0&&(Re[q.__cacheKey].usedTimes--,Xe.usedTimes===0&&B(O)),q.__cacheKey=pe,q.__webglTexture=Re[pe].texture}return le}function oe(q,O,le){let Ce=i.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Ce=i.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Ce=i.TEXTURE_3D);const Re=W(q,O),pe=O.source;t.bindTexture(Ce,q.__webglTexture,i.TEXTURE0+le);const Xe=n.get(pe);if(pe.version!==Xe.__version||Re===!0){t.activeTexture(i.TEXTURE0+le);const $e=ai.getPrimaries(ai.workingColorSpace),it=O.colorSpace===Xr?null:ai.getPrimaries(O.colorSpace),Ot=O.colorSpace===Xr||$e===it?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,O.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,O.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ot);let ke=b(O.image,!1,s.maxTextureSize);ke=dt(O,ke);const rt=r.convert(O.format,O.colorSpace),_t=r.convert(O.type);let mt=E(O.internalFormat,rt,_t,O.colorSpace,O.isVideoTexture);J(Ce,O);let Ye;const wt=O.mipmaps,St=O.isVideoTexture!==!0,kt=Xe.__version===void 0||Re===!0,ce=pe.dataReady,Ge=S(O,ke);if(O.isDepthTexture)mt=w(O.format===Xa,O.type),kt&&(St?t.texStorage2D(i.TEXTURE_2D,1,mt,ke.width,ke.height):t.texImage2D(i.TEXTURE_2D,0,mt,ke.width,ke.height,0,rt,_t,null));else if(O.isDataTexture)if(wt.length>0){St&&kt&&t.texStorage2D(i.TEXTURE_2D,Ge,mt,wt[0].width,wt[0].height);for(let Pe=0,Oe=wt.length;Pe<Oe;Pe++)Ye=wt[Pe],St?ce&&t.texSubImage2D(i.TEXTURE_2D,Pe,0,0,Ye.width,Ye.height,rt,_t,Ye.data):t.texImage2D(i.TEXTURE_2D,Pe,mt,Ye.width,Ye.height,0,rt,_t,Ye.data);O.generateMipmaps=!1}else St?(kt&&t.texStorage2D(i.TEXTURE_2D,Ge,mt,ke.width,ke.height),ce&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ke.width,ke.height,rt,_t,ke.data)):t.texImage2D(i.TEXTURE_2D,0,mt,ke.width,ke.height,0,rt,_t,ke.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){St&&kt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ge,mt,wt[0].width,wt[0].height,ke.depth);for(let Pe=0,Oe=wt.length;Pe<Oe;Pe++)if(Ye=wt[Pe],O.format!==Ts)if(rt!==null)if(St){if(ce)if(O.layerUpdates.size>0){const je=_0(Ye.width,Ye.height,O.format,O.type);for(const et of O.layerUpdates){const Ut=Ye.data.subarray(et*je/Ye.data.BYTES_PER_ELEMENT,(et+1)*je/Ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Pe,0,0,et,Ye.width,Ye.height,1,rt,Ut,0,0)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Pe,0,0,0,Ye.width,Ye.height,ke.depth,rt,Ye.data,0,0)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Pe,mt,Ye.width,Ye.height,ke.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else St?ce&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Pe,0,0,0,Ye.width,Ye.height,ke.depth,rt,_t,Ye.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Pe,mt,Ye.width,Ye.height,ke.depth,0,rt,_t,Ye.data)}else{St&&kt&&t.texStorage2D(i.TEXTURE_2D,Ge,mt,wt[0].width,wt[0].height);for(let Pe=0,Oe=wt.length;Pe<Oe;Pe++)Ye=wt[Pe],O.format!==Ts?rt!==null?St?ce&&t.compressedTexSubImage2D(i.TEXTURE_2D,Pe,0,0,Ye.width,Ye.height,rt,Ye.data):t.compressedTexImage2D(i.TEXTURE_2D,Pe,mt,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?ce&&t.texSubImage2D(i.TEXTURE_2D,Pe,0,0,Ye.width,Ye.height,rt,_t,Ye.data):t.texImage2D(i.TEXTURE_2D,Pe,mt,Ye.width,Ye.height,0,rt,_t,Ye.data)}else if(O.isDataArrayTexture)if(St){if(kt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ge,mt,ke.width,ke.height,ke.depth),ce)if(O.layerUpdates.size>0){const Pe=_0(ke.width,ke.height,O.format,O.type);for(const Oe of O.layerUpdates){const je=ke.data.subarray(Oe*Pe/ke.data.BYTES_PER_ELEMENT,(Oe+1)*Pe/ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Oe,ke.width,ke.height,1,rt,_t,je)}O.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,rt,_t,ke.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,mt,ke.width,ke.height,ke.depth,0,rt,_t,ke.data);else if(O.isData3DTexture)St?(kt&&t.texStorage3D(i.TEXTURE_3D,Ge,mt,ke.width,ke.height,ke.depth),ce&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,rt,_t,ke.data)):t.texImage3D(i.TEXTURE_3D,0,mt,ke.width,ke.height,ke.depth,0,rt,_t,ke.data);else if(O.isFramebufferTexture){if(kt)if(St)t.texStorage2D(i.TEXTURE_2D,Ge,mt,ke.width,ke.height);else{let Pe=ke.width,Oe=ke.height;for(let je=0;je<Ge;je++)t.texImage2D(i.TEXTURE_2D,je,mt,Pe,Oe,0,rt,_t,null),Pe>>=1,Oe>>=1}}else if(wt.length>0){if(St&&kt){const Pe=We(wt[0]);t.texStorage2D(i.TEXTURE_2D,Ge,mt,Pe.width,Pe.height)}for(let Pe=0,Oe=wt.length;Pe<Oe;Pe++)Ye=wt[Pe],St?ce&&t.texSubImage2D(i.TEXTURE_2D,Pe,0,0,rt,_t,Ye):t.texImage2D(i.TEXTURE_2D,Pe,mt,rt,_t,Ye);O.generateMipmaps=!1}else if(St){if(kt){const Pe=We(ke);t.texStorage2D(i.TEXTURE_2D,Ge,mt,Pe.width,Pe.height)}ce&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,rt,_t,ke)}else t.texImage2D(i.TEXTURE_2D,0,mt,rt,_t,ke);v(O)&&g(Ce),Xe.__version=pe.version,O.onUpdate&&O.onUpdate(O)}q.__version=O.version}function ie(q,O,le){if(O.image.length!==6)return;const Ce=W(q,O),Re=O.source;t.bindTexture(i.TEXTURE_CUBE_MAP,q.__webglTexture,i.TEXTURE0+le);const pe=n.get(Re);if(Re.version!==pe.__version||Ce===!0){t.activeTexture(i.TEXTURE0+le);const Xe=ai.getPrimaries(ai.workingColorSpace),$e=O.colorSpace===Xr?null:ai.getPrimaries(O.colorSpace),it=O.colorSpace===Xr||Xe===$e?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,O.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,O.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const Ot=O.isCompressedTexture||O.image[0].isCompressedTexture,ke=O.image[0]&&O.image[0].isDataTexture,rt=[];for(let Oe=0;Oe<6;Oe++)!Ot&&!ke?rt[Oe]=b(O.image[Oe],!0,s.maxCubemapSize):rt[Oe]=ke?O.image[Oe].image:O.image[Oe],rt[Oe]=dt(O,rt[Oe]);const _t=rt[0],mt=r.convert(O.format,O.colorSpace),Ye=r.convert(O.type),wt=E(O.internalFormat,mt,Ye,O.colorSpace),St=O.isVideoTexture!==!0,kt=pe.__version===void 0||Ce===!0,ce=Re.dataReady;let Ge=S(O,_t);J(i.TEXTURE_CUBE_MAP,O);let Pe;if(Ot){St&&kt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ge,wt,_t.width,_t.height);for(let Oe=0;Oe<6;Oe++){Pe=rt[Oe].mipmaps;for(let je=0;je<Pe.length;je++){const et=Pe[je];O.format!==Ts?mt!==null?St?ce&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je,0,0,et.width,et.height,mt,et.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je,wt,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):St?ce&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je,0,0,et.width,et.height,mt,Ye,et.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je,wt,et.width,et.height,0,mt,Ye,et.data)}}}else{if(Pe=O.mipmaps,St&&kt){Pe.length>0&&Ge++;const Oe=We(rt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ge,wt,Oe.width,Oe.height)}for(let Oe=0;Oe<6;Oe++)if(ke){St?ce&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,rt[Oe].width,rt[Oe].height,mt,Ye,rt[Oe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,wt,rt[Oe].width,rt[Oe].height,0,mt,Ye,rt[Oe].data);for(let je=0;je<Pe.length;je++){const Ut=Pe[je].image[Oe].image;St?ce&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je+1,0,0,Ut.width,Ut.height,mt,Ye,Ut.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je+1,wt,Ut.width,Ut.height,0,mt,Ye,Ut.data)}}else{St?ce&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,mt,Ye,rt[Oe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,wt,mt,Ye,rt[Oe]);for(let je=0;je<Pe.length;je++){const et=Pe[je];St?ce&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je+1,0,0,mt,Ye,et.image[Oe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,je+1,wt,mt,Ye,et.image[Oe])}}}v(O)&&g(i.TEXTURE_CUBE_MAP),pe.__version=Re.version,O.onUpdate&&O.onUpdate(O)}q.__version=O.version}function j(q,O,le,Ce,Re,pe){const Xe=r.convert(le.format,le.colorSpace),$e=r.convert(le.type),it=E(le.internalFormat,Xe,$e,le.colorSpace);if(!n.get(O).__hasExternalTextures){const ke=Math.max(1,O.width>>pe),rt=Math.max(1,O.height>>pe);Re===i.TEXTURE_3D||Re===i.TEXTURE_2D_ARRAY?t.texImage3D(Re,pe,it,ke,rt,O.depth,0,Xe,$e,null):t.texImage2D(Re,pe,it,ke,rt,0,Xe,$e,null)}t.bindFramebuffer(i.FRAMEBUFFER,q),yt(O)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ce,Re,n.get(le).__webglTexture,0,pt(O)):(Re===i.TEXTURE_2D||Re>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ce,Re,n.get(le).__webglTexture,pe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function me(q,O,le){if(i.bindRenderbuffer(i.RENDERBUFFER,q),O.depthBuffer){const Ce=O.depthTexture,Re=Ce&&Ce.isDepthTexture?Ce.type:null,pe=w(O.stencilBuffer,Re),Xe=O.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,$e=pt(O);yt(O)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,$e,pe,O.width,O.height):le?i.renderbufferStorageMultisample(i.RENDERBUFFER,$e,pe,O.width,O.height):i.renderbufferStorage(i.RENDERBUFFER,pe,O.width,O.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Xe,i.RENDERBUFFER,q)}else{const Ce=O.textures;for(let Re=0;Re<Ce.length;Re++){const pe=Ce[Re],Xe=r.convert(pe.format,pe.colorSpace),$e=r.convert(pe.type),it=E(pe.internalFormat,Xe,$e,pe.colorSpace),Ot=pt(O);le&&yt(O)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ot,it,O.width,O.height):yt(O)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ot,it,O.width,O.height):i.renderbufferStorage(i.RENDERBUFFER,it,O.width,O.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ge(q,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,q),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),F(O.depthTexture,0);const Ce=n.get(O.depthTexture).__webglTexture,Re=pt(O);if(O.depthTexture.format===Oa)yt(O)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ce,0,Re):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ce,0);else if(O.depthTexture.format===Xa)yt(O)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ce,0,Re):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ce,0);else throw new Error("Unknown depthTexture format")}function Ne(q){const O=n.get(q),le=q.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==q.depthTexture){const Ce=q.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),Ce){const Re=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,Ce.removeEventListener("dispose",Re)};Ce.addEventListener("dispose",Re),O.__depthDisposeCallback=Re}O.__boundDepthTexture=Ce}if(q.depthTexture&&!O.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");ge(O.__webglFramebuffer,q)}else if(le){O.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)if(t.bindFramebuffer(i.FRAMEBUFFER,O.__webglFramebuffer[Ce]),O.__webglDepthbuffer[Ce]===void 0)O.__webglDepthbuffer[Ce]=i.createRenderbuffer(),me(O.__webglDepthbuffer[Ce],q,!1);else{const Re=q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,pe=O.__webglDepthbuffer[Ce];i.bindRenderbuffer(i.RENDERBUFFER,pe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Re,i.RENDERBUFFER,pe)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=i.createRenderbuffer(),me(O.__webglDepthbuffer,q,!1);else{const Ce=q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Re=O.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Re),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ce,i.RENDERBUFFER,Re)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Fe(q,O,le){const Ce=n.get(q);O!==void 0&&j(Ce.__webglFramebuffer,q,q.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),le!==void 0&&Ne(q)}function He(q){const O=q.texture,le=n.get(q),Ce=n.get(O);q.addEventListener("dispose",D);const Re=q.textures,pe=q.isWebGLCubeRenderTarget===!0,Xe=Re.length>1;if(Xe||(Ce.__webglTexture===void 0&&(Ce.__webglTexture=i.createTexture()),Ce.__version=O.version,o.memory.textures++),pe){le.__webglFramebuffer=[];for(let $e=0;$e<6;$e++)if(O.mipmaps&&O.mipmaps.length>0){le.__webglFramebuffer[$e]=[];for(let it=0;it<O.mipmaps.length;it++)le.__webglFramebuffer[$e][it]=i.createFramebuffer()}else le.__webglFramebuffer[$e]=i.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){le.__webglFramebuffer=[];for(let $e=0;$e<O.mipmaps.length;$e++)le.__webglFramebuffer[$e]=i.createFramebuffer()}else le.__webglFramebuffer=i.createFramebuffer();if(Xe)for(let $e=0,it=Re.length;$e<it;$e++){const Ot=n.get(Re[$e]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=i.createTexture(),o.memory.textures++)}if(q.samples>0&&yt(q)===!1){le.__webglMultisampledFramebuffer=i.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let $e=0;$e<Re.length;$e++){const it=Re[$e];le.__webglColorRenderbuffer[$e]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,le.__webglColorRenderbuffer[$e]);const Ot=r.convert(it.format,it.colorSpace),ke=r.convert(it.type),rt=E(it.internalFormat,Ot,ke,it.colorSpace,q.isXRRenderTarget===!0),_t=pt(q);i.renderbufferStorageMultisample(i.RENDERBUFFER,_t,rt,q.width,q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+$e,i.RENDERBUFFER,le.__webglColorRenderbuffer[$e])}i.bindRenderbuffer(i.RENDERBUFFER,null),q.depthBuffer&&(le.__webglDepthRenderbuffer=i.createRenderbuffer(),me(le.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(pe){t.bindTexture(i.TEXTURE_CUBE_MAP,Ce.__webglTexture),J(i.TEXTURE_CUBE_MAP,O);for(let $e=0;$e<6;$e++)if(O.mipmaps&&O.mipmaps.length>0)for(let it=0;it<O.mipmaps.length;it++)j(le.__webglFramebuffer[$e][it],q,O,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,it);else j(le.__webglFramebuffer[$e],q,O,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0);v(O)&&g(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xe){for(let $e=0,it=Re.length;$e<it;$e++){const Ot=Re[$e],ke=n.get(Ot);t.bindTexture(i.TEXTURE_2D,ke.__webglTexture),J(i.TEXTURE_2D,Ot),j(le.__webglFramebuffer,q,Ot,i.COLOR_ATTACHMENT0+$e,i.TEXTURE_2D,0),v(Ot)&&g(i.TEXTURE_2D)}t.unbindTexture()}else{let $e=i.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&($e=q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture($e,Ce.__webglTexture),J($e,O),O.mipmaps&&O.mipmaps.length>0)for(let it=0;it<O.mipmaps.length;it++)j(le.__webglFramebuffer[it],q,O,i.COLOR_ATTACHMENT0,$e,it);else j(le.__webglFramebuffer,q,O,i.COLOR_ATTACHMENT0,$e,0);v(O)&&g($e),t.unbindTexture()}q.depthBuffer&&Ne(q)}function ct(q){const O=q.textures;for(let le=0,Ce=O.length;le<Ce;le++){const Re=O[le];if(v(Re)){const pe=q.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Xe=n.get(Re).__webglTexture;t.bindTexture(pe,Xe),g(pe),t.unbindTexture()}}}const at=[],se=[];function ut(q){if(q.samples>0){if(yt(q)===!1){const O=q.textures,le=q.width,Ce=q.height;let Re=i.COLOR_BUFFER_BIT;const pe=q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Xe=n.get(q),$e=O.length>1;if($e)for(let it=0;it<O.length;it++)t.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+it,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+it,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let it=0;it<O.length;it++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(Re|=i.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(Re|=i.STENCIL_BUFFER_BIT)),$e){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Xe.__webglColorRenderbuffer[it]);const Ot=n.get(O[it]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ot,0)}i.blitFramebuffer(0,0,le,Ce,0,0,le,Ce,Re,i.NEAREST),l===!0&&(at.length=0,se.length=0,at.push(i.COLOR_ATTACHMENT0+it),q.depthBuffer&&q.resolveDepthBuffer===!1&&(at.push(pe),se.push(pe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,se)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,at))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),$e)for(let it=0;it<O.length;it++){t.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+it,i.RENDERBUFFER,Xe.__webglColorRenderbuffer[it]);const Ot=n.get(O[it]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Xe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+it,i.TEXTURE_2D,Ot,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&l){const O=q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[O])}}}function pt(q){return Math.min(s.maxSamples,q.samples)}function yt(q){const O=n.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function qe(q){const O=o.render.frame;c.get(q)!==O&&(c.set(q,O),q.update())}function dt(q,O){const le=q.colorSpace,Ce=q.format,Re=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||le!==Lr&&le!==Xr&&(ai.getTransfer(le)===Ei?(Ce!==Ts||Re!==Ar)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),O}function We(q){return typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement?(u.width=q.naturalWidth||q.width,u.height=q.naturalHeight||q.height):typeof VideoFrame<"u"&&q instanceof VideoFrame?(u.width=q.displayWidth,u.height=q.displayHeight):(u.width=q.width,u.height=q.height),u}this.allocateTextureUnit=H,this.resetTextureUnits=A,this.setTexture2D=F,this.setTexture2DArray=Y,this.setTexture3D=Q,this.setTextureCube=G,this.rebindTextures=Fe,this.setupRenderTarget=He,this.updateRenderTargetMipmap=ct,this.updateMultisampleRenderTarget=ut,this.setupDepthRenderbuffer=Ne,this.setupFrameBufferTexture=j,this.useMultisampledRTT=yt}function GR(i,e){function t(n,s=Xr){let r;const o=ai.getTransfer(s);if(n===Ar)return i.UNSIGNED_BYTE;if(n===Pm)return i.UNSIGNED_SHORT_4_4_4_4;if(n===Lm)return i.UNSIGNED_SHORT_5_5_5_1;if(n===bb)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===vb)return i.BYTE;if(n===yb)return i.SHORT;if(n===yc)return i.UNSIGNED_SHORT;if(n===Am)return i.INT;if(n===$o)return i.UNSIGNED_INT;if(n===Sr)return i.FLOAT;if(n===Rc)return i.HALF_FLOAT;if(n===_b)return i.ALPHA;if(n===Eb)return i.RGB;if(n===Ts)return i.RGBA;if(n===wb)return i.LUMINANCE;if(n===xb)return i.LUMINANCE_ALPHA;if(n===Oa)return i.DEPTH_COMPONENT;if(n===Xa)return i.DEPTH_STENCIL;if(n===Sb)return i.RED;if(n===Rm)return i.RED_INTEGER;if(n===Tb)return i.RG;if(n===Im)return i.RG_INTEGER;if(n===Dm)return i.RGBA_INTEGER;if(n===Gu||n===Wu||n===ju||n===qu)if(o===Ei)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Gu)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Wu)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ju)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===qu)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Gu)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Wu)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ju)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===qu)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===up||n===dp||n===hp||n===fp)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===up)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===dp)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===hp)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===fp)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===pp||n===mp||n===gp)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===pp||n===mp)return o===Ei?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===gp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===vp||n===yp||n===bp||n===_p||n===Ep||n===wp||n===xp||n===Sp||n===Tp||n===Mp||n===Cp||n===Ap||n===Pp||n===Lp)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===vp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===yp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===bp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_p)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Ep)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===wp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===xp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Sp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Tp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Mp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Cp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ap)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Pp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Lp)return o===Ei?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Xu||n===Rp||n===Ip)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Xu)return o===Ei?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Rp)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ip)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Mb||n===Dp||n===Op||n===Np)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Xu)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Dp)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Op)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Np)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===qa?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}class WR extends os{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Aa extends Vn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jR={type:"move"};class Cf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Aa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Aa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Aa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const b of e.hand.values()){const v=t.getJointPose(b,n),g=this._getHandJoint(u,b);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],h=c.position.distanceTo(d.position),f=.02,m=.005;u.inputState.pinching&&h>f+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=f-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(jR)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Aa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const qR=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,XR=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class YR{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new _n,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new lo({vertexShader:qR,fragmentShader:XR,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ds(new Vd(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class KR extends il{constructor(e,t){super();const n=this;let s=null,r=1,o=null,a="local-floor",l=1,u=null,c=null,d=null,h=null,f=null,m=null;const b=new YR,v=t.getContextAttributes();let g=null,E=null;const w=[],S=[],I=new ei;let D=null;const y=new os;y.layers.enable(1),y.viewport=new ki;const B=new os;B.layers.enable(2),B.viewport=new ki;const V=[y,B],C=new WR;C.layers.enable(1),C.layers.enable(2);let A=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let j=w[ie];return j===void 0&&(j=new Cf,w[ie]=j),j.getTargetRaySpace()},this.getControllerGrip=function(ie){let j=w[ie];return j===void 0&&(j=new Cf,w[ie]=j),j.getGripSpace()},this.getHand=function(ie){let j=w[ie];return j===void 0&&(j=new Cf,w[ie]=j),j.getHandSpace()};function P(ie){const j=S.indexOf(ie.inputSource);if(j===-1)return;const me=w[j];me!==void 0&&(me.update(ie.inputSource,ie.frame,u||o),me.dispatchEvent({type:ie.type,data:ie.inputSource}))}function F(){s.removeEventListener("select",P),s.removeEventListener("selectstart",P),s.removeEventListener("selectend",P),s.removeEventListener("squeeze",P),s.removeEventListener("squeezestart",P),s.removeEventListener("squeezeend",P),s.removeEventListener("end",F),s.removeEventListener("inputsourceschange",Y);for(let ie=0;ie<w.length;ie++){const j=S[ie];j!==null&&(S[ie]=null,w[ie].disconnect(j))}A=null,H=null,b.reset(),e.setRenderTarget(g),f=null,h=null,d=null,s=null,E=null,oe.stop(),n.isPresenting=!1,e.setPixelRatio(D),e.setSize(I.width,I.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){r=ie,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ie){u=ie},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(ie){if(s=ie,s!==null){if(g=e.getRenderTarget(),s.addEventListener("select",P),s.addEventListener("selectstart",P),s.addEventListener("selectend",P),s.addEventListener("squeeze",P),s.addEventListener("squeezestart",P),s.addEventListener("squeezeend",P),s.addEventListener("end",F),s.addEventListener("inputsourceschange",Y),v.xrCompatible!==!0&&await t.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(I),s.renderState.layers===void 0){const j={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(s,t,j),s.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),E=new ao(f.framebufferWidth,f.framebufferHeight,{format:Ts,type:Ar,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let j=null,me=null,ge=null;v.depth&&(ge=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,j=v.stencil?Xa:Oa,me=v.stencil?qa:$o);const Ne={colorFormat:t.RGBA8,depthFormat:ge,scaleFactor:r};d=new XRWebGLBinding(s,t),h=d.createProjectionLayer(Ne),s.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),E=new ao(h.textureWidth,h.textureHeight,{format:Ts,type:Ar,depthTexture:new zb(h.textureWidth,h.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await s.requestReferenceSpace(a),oe.setContext(s),oe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function Y(ie){for(let j=0;j<ie.removed.length;j++){const me=ie.removed[j],ge=S.indexOf(me);ge>=0&&(S[ge]=null,w[ge].disconnect(me))}for(let j=0;j<ie.added.length;j++){const me=ie.added[j];let ge=S.indexOf(me);if(ge===-1){for(let Fe=0;Fe<w.length;Fe++)if(Fe>=S.length){S.push(me),ge=Fe;break}else if(S[Fe]===null){S[Fe]=me,ge=Fe;break}if(ge===-1)break}const Ne=w[ge];Ne&&Ne.connect(me)}}const Q=new xe,G=new xe;function z(ie,j,me){Q.setFromMatrixPosition(j.matrixWorld),G.setFromMatrixPosition(me.matrixWorld);const ge=Q.distanceTo(G),Ne=j.projectionMatrix.elements,Fe=me.projectionMatrix.elements,He=Ne[14]/(Ne[10]-1),ct=Ne[14]/(Ne[10]+1),at=(Ne[9]+1)/Ne[5],se=(Ne[9]-1)/Ne[5],ut=(Ne[8]-1)/Ne[0],pt=(Fe[8]+1)/Fe[0],yt=He*ut,qe=He*pt,dt=ge/(-ut+pt),We=dt*-ut;if(j.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(We),ie.translateZ(dt),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),Ne[10]===-1)ie.projectionMatrix.copy(j.projectionMatrix),ie.projectionMatrixInverse.copy(j.projectionMatrixInverse);else{const q=He+dt,O=ct+dt,le=yt-We,Ce=qe+(ge-We),Re=at*ct/O*q,pe=se*ct/O*q;ie.projectionMatrix.makePerspective(le,Ce,Re,pe,q,O),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function ue(ie,j){j===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(j.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(s===null)return;let j=ie.near,me=ie.far;b.texture!==null&&(b.depthNear>0&&(j=b.depthNear),b.depthFar>0&&(me=b.depthFar)),C.near=B.near=y.near=j,C.far=B.far=y.far=me,(A!==C.near||H!==C.far)&&(s.updateRenderState({depthNear:C.near,depthFar:C.far}),A=C.near,H=C.far);const ge=ie.parent,Ne=C.cameras;ue(C,ge);for(let Fe=0;Fe<Ne.length;Fe++)ue(Ne[Fe],ge);Ne.length===2?z(C,y,B):C.projectionMatrix.copy(y.projectionMatrix),Ee(ie,C,ge)};function Ee(ie,j,me){me===null?ie.matrix.copy(j.matrixWorld):(ie.matrix.copy(me.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(j.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(j.projectionMatrix),ie.projectionMatrixInverse.copy(j.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=bc*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(ie){l=ie,h!==null&&(h.fixedFoveation=ie),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ie)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(C)};let J=null;function W(ie,j){if(c=j.getViewerPose(u||o),m=j,c!==null){const me=c.views;f!==null&&(e.setRenderTargetFramebuffer(E,f.framebuffer),e.setRenderTarget(E));let ge=!1;me.length!==C.cameras.length&&(C.cameras.length=0,ge=!0);for(let Fe=0;Fe<me.length;Fe++){const He=me[Fe];let ct=null;if(f!==null)ct=f.getViewport(He);else{const se=d.getViewSubImage(h,He);ct=se.viewport,Fe===0&&(e.setRenderTargetTextures(E,se.colorTexture,h.ignoreDepthValues?void 0:se.depthStencilTexture),e.setRenderTarget(E))}let at=V[Fe];at===void 0&&(at=new os,at.layers.enable(Fe),at.viewport=new ki,V[Fe]=at),at.matrix.fromArray(He.transform.matrix),at.matrix.decompose(at.position,at.quaternion,at.scale),at.projectionMatrix.fromArray(He.projectionMatrix),at.projectionMatrixInverse.copy(at.projectionMatrix).invert(),at.viewport.set(ct.x,ct.y,ct.width,ct.height),Fe===0&&(C.matrix.copy(at.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ge===!0&&C.cameras.push(at)}const Ne=s.enabledFeatures;if(Ne&&Ne.includes("depth-sensing")){const Fe=d.getDepthInformation(me[0]);Fe&&Fe.isValid&&Fe.texture&&b.init(e,Fe,s.renderState)}}for(let me=0;me<w.length;me++){const ge=S[me],Ne=w[me];ge!==null&&Ne!==void 0&&Ne.update(ge,j,u||o)}J&&J(ie,j),j.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:j}),m=null}const oe=new Ub;oe.setAnimationLoop(W),this.setAnimationLoop=function(ie){J=ie},this.dispose=function(){}}}const Po=new Zs,ZR=new Ai;function QR(i,e){function t(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function n(v,g){g.color.getRGB(v.fogColor.value,Nb(i)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function s(v,g,E,w,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(v,g):g.isMeshToonMaterial?(r(v,g),d(v,g)):g.isMeshPhongMaterial?(r(v,g),c(v,g)):g.isMeshStandardMaterial?(r(v,g),h(v,g),g.isMeshPhysicalMaterial&&f(v,g,S)):g.isMeshMatcapMaterial?(r(v,g),m(v,g)):g.isMeshDepthMaterial?r(v,g):g.isMeshDistanceMaterial?(r(v,g),b(v,g)):g.isMeshNormalMaterial?r(v,g):g.isLineBasicMaterial?(o(v,g),g.isLineDashedMaterial&&a(v,g)):g.isPointsMaterial?l(v,g,E,w):g.isSpriteMaterial?u(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===Pn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===Pn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const E=e.get(g),w=E.envMap,S=E.envMapRotation;w&&(v.envMap.value=w,Po.copy(S),Po.x*=-1,Po.y*=-1,Po.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Po.y*=-1,Po.z*=-1),v.envMapRotation.value.setFromMatrix4(ZR.makeRotationFromEuler(Po)),v.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}function o(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}function a(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,E,w){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*E,v.scale.value=w*.5,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function h(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function f(v,g,E){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Pn&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=E.texture,v.transmissionSamplerSize.value.set(E.width,E.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,g){g.matcap&&(v.matcap.value=g.matcap)}function b(v,g){const E=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(E.matrixWorld),v.nearDistance.value=E.shadow.camera.near,v.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function JR(i,e,t,n){let s={},r={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,w){const S=w.program;n.uniformBlockBinding(E,S)}function u(E,w){let S=s[E.id];S===void 0&&(m(E),S=c(E),s[E.id]=S,E.addEventListener("dispose",v));const I=w.program;n.updateUBOMapping(E,I);const D=e.render.frame;r[E.id]!==D&&(h(E),r[E.id]=D)}function c(E){const w=d();E.__bindingPointIndex=w;const S=i.createBuffer(),I=E.__size,D=E.usage;return i.bindBuffer(i.UNIFORM_BUFFER,S),i.bufferData(i.UNIFORM_BUFFER,I,D),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,w,S),S}function d(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(E){const w=s[E.id],S=E.uniforms,I=E.__cache;i.bindBuffer(i.UNIFORM_BUFFER,w);for(let D=0,y=S.length;D<y;D++){const B=Array.isArray(S[D])?S[D]:[S[D]];for(let V=0,C=B.length;V<C;V++){const A=B[V];if(f(A,D,V,I)===!0){const H=A.__offset,P=Array.isArray(A.value)?A.value:[A.value];let F=0;for(let Y=0;Y<P.length;Y++){const Q=P[Y],G=b(Q);typeof Q=="number"||typeof Q=="boolean"?(A.__data[0]=Q,i.bufferSubData(i.UNIFORM_BUFFER,H+F,A.__data)):Q.isMatrix3?(A.__data[0]=Q.elements[0],A.__data[1]=Q.elements[1],A.__data[2]=Q.elements[2],A.__data[3]=0,A.__data[4]=Q.elements[3],A.__data[5]=Q.elements[4],A.__data[6]=Q.elements[5],A.__data[7]=0,A.__data[8]=Q.elements[6],A.__data[9]=Q.elements[7],A.__data[10]=Q.elements[8],A.__data[11]=0):(Q.toArray(A.__data,F),F+=G.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,H,A.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(E,w,S,I){const D=E.value,y=w+"_"+S;if(I[y]===void 0)return typeof D=="number"||typeof D=="boolean"?I[y]=D:I[y]=D.clone(),!0;{const B=I[y];if(typeof D=="number"||typeof D=="boolean"){if(B!==D)return I[y]=D,!0}else if(B.equals(D)===!1)return B.copy(D),!0}return!1}function m(E){const w=E.uniforms;let S=0;const I=16;for(let y=0,B=w.length;y<B;y++){const V=Array.isArray(w[y])?w[y]:[w[y]];for(let C=0,A=V.length;C<A;C++){const H=V[C],P=Array.isArray(H.value)?H.value:[H.value];for(let F=0,Y=P.length;F<Y;F++){const Q=P[F],G=b(Q),z=S%I,ue=z%G.boundary,Ee=z+ue;S+=ue,Ee!==0&&I-Ee<G.storage&&(S+=I-Ee),H.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=S,S+=G.storage}}}const D=S%I;return D>0&&(S+=I-D),E.__size=S,E.__cache={},this}function b(E){const w={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(w.boundary=4,w.storage=4):E.isVector2?(w.boundary=8,w.storage=8):E.isVector3||E.isColor?(w.boundary=16,w.storage=12):E.isVector4?(w.boundary=16,w.storage=16):E.isMatrix3?(w.boundary=48,w.storage=48):E.isMatrix4?(w.boundary=64,w.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),w}function v(E){const w=E.target;w.removeEventListener("dispose",v);const S=o.indexOf(w.__bindingPointIndex);o.splice(S,1),i.deleteBuffer(s[w.id]),delete s[w.id],delete r[w.id]}function g(){for(const E in s)i.deleteBuffer(s[E]);o=[],s={},r={}}return{bind:l,update:u,dispose:g}}class eI{constructor(e={}){const{canvas:t=BC(),context:n=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const f=new Uint32Array(4),m=new Int32Array(4);let b=null,v=null;const g=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Bs,this.toneMapping=eo,this.toneMappingExposure=1;const w=this;let S=!1,I=0,D=0,y=null,B=-1,V=null;const C=new ki,A=new ki;let H=null;const P=new pi(0);let F=0,Y=t.width,Q=t.height,G=1,z=null,ue=null;const Ee=new ki(0,0,Y,Q),J=new ki(0,0,Y,Q);let W=!1;const oe=new Um;let ie=!1,j=!1;const me=new Ai,ge=new Ai,Ne=new xe,Fe=new ki,He={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ct=!1;function at(){return y===null?G:1}let se=n;function ut(U,de){return t.getContext(U,de)}try{const U={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Cm}`),t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",je,!1),t.addEventListener("webglcontextcreationerror",et,!1),se===null){const de="webgl2";if(se=ut(de,U),se===null)throw ut(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let pt,yt,qe,dt,We,q,O,le,Ce,Re,pe,Xe,$e,it,Ot,ke,rt,_t,mt,Ye,wt,St,kt,ce;function Ge(){pt=new r2(se),pt.init(),St=new GR(se,pt),yt=new QL(se,pt,e,St),qe=new HR(se),yt.reverseDepthBuffer&&qe.buffers.depth.setReversed(!0),dt=new l2(se),We=new MR,q=new $R(se,pt,qe,We,yt,St,dt),O=new e2(w),le=new s2(w),Ce=new pA(se),kt=new KL(se,Ce),Re=new o2(se,Ce,dt,kt),pe=new u2(se,Re,Ce,dt),mt=new c2(se,yt,q),ke=new JL(We),Xe=new TR(w,O,le,pt,yt,kt,ke),$e=new QR(w,We),it=new AR,Ot=new OR(pt),_t=new YL(w,O,le,qe,pe,h,l),rt=new zR(w,pe,yt),ce=new JR(se,dt,yt,qe),Ye=new ZL(se,pt,dt),wt=new a2(se,pt,dt),dt.programs=Xe.programs,w.capabilities=yt,w.extensions=pt,w.properties=We,w.renderLists=it,w.shadowMap=rt,w.state=qe,w.info=dt}Ge();const Pe=new KR(w,se);this.xr=Pe,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const U=pt.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=pt.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(U){U!==void 0&&(G=U,this.setSize(Y,Q,!1))},this.getSize=function(U){return U.set(Y,Q)},this.setSize=function(U,de,be=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=U,Q=de,t.width=Math.floor(U*G),t.height=Math.floor(de*G),be===!0&&(t.style.width=U+"px",t.style.height=de+"px"),this.setViewport(0,0,U,de)},this.getDrawingBufferSize=function(U){return U.set(Y*G,Q*G).floor()},this.setDrawingBufferSize=function(U,de,be){Y=U,Q=de,G=be,t.width=Math.floor(U*be),t.height=Math.floor(de*be),this.setViewport(0,0,U,de)},this.getCurrentViewport=function(U){return U.copy(C)},this.getViewport=function(U){return U.copy(Ee)},this.setViewport=function(U,de,be,Se){U.isVector4?Ee.set(U.x,U.y,U.z,U.w):Ee.set(U,de,be,Se),qe.viewport(C.copy(Ee).multiplyScalar(G).round())},this.getScissor=function(U){return U.copy(J)},this.setScissor=function(U,de,be,Se){U.isVector4?J.set(U.x,U.y,U.z,U.w):J.set(U,de,be,Se),qe.scissor(A.copy(J).multiplyScalar(G).round())},this.getScissorTest=function(){return W},this.setScissorTest=function(U){qe.setScissorTest(W=U)},this.setOpaqueSort=function(U){z=U},this.setTransparentSort=function(U){ue=U},this.getClearColor=function(U){return U.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(U=!0,de=!0,be=!0){let Se=0;if(U){let fe=!1;if(y!==null){const Be=y.texture.format;fe=Be===Dm||Be===Im||Be===Rm}if(fe){const Be=y.texture.type,Ke=Be===Ar||Be===$o||Be===yc||Be===qa||Be===Pm||Be===Lm,lt=_t.getClearColor(),ot=_t.getClearAlpha(),Et=lt.r,xt=lt.g,ht=lt.b;Ke?(f[0]=Et,f[1]=xt,f[2]=ht,f[3]=ot,se.clearBufferuiv(se.COLOR,0,f)):(m[0]=Et,m[1]=xt,m[2]=ht,m[3]=ot,se.clearBufferiv(se.COLOR,0,m))}else Se|=se.COLOR_BUFFER_BIT}de&&(Se|=se.DEPTH_BUFFER_BIT,se.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),be&&(Se|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",je,!1),t.removeEventListener("webglcontextcreationerror",et,!1),it.dispose(),Ot.dispose(),We.dispose(),O.dispose(),le.dispose(),pe.dispose(),kt.dispose(),ce.dispose(),Xe.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",Wn),Pe.removeEventListener("sessionend",cn),qi.stop()};function Oe(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const U=dt.autoReset,de=rt.enabled,be=rt.autoUpdate,Se=rt.needsUpdate,fe=rt.type;Ge(),dt.autoReset=U,rt.enabled=de,rt.autoUpdate=be,rt.needsUpdate=Se,rt.type=fe}function et(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Ut(U){const de=U.target;de.removeEventListener("dispose",Ut),jt(de)}function jt(U){Qt(U),We.remove(U)}function Qt(U){const de=We.get(U).programs;de!==void 0&&(de.forEach(function(be){Xe.releaseProgram(be)}),U.isShaderMaterial&&Xe.releaseShaderCache(U))}this.renderBufferDirect=function(U,de,be,Se,fe,Be){de===null&&(de=He);const Ke=fe.isMesh&&fe.matrixWorld.determinant()<0,lt=Zo(U,de,be,Se,fe);qe.setMaterial(Se,Ke);let ot=be.index,Et=1;if(Se.wireframe===!0){if(ot=Re.getWireframeAttribute(be),ot===void 0)return;Et=2}const xt=be.drawRange,ht=be.attributes.position;let Xt=xt.start*Et,di=(xt.start+xt.count)*Et;Be!==null&&(Xt=Math.max(Xt,Be.start*Et),di=Math.min(di,(Be.start+Be.count)*Et)),ot!==null?(Xt=Math.max(Xt,0),di=Math.min(di,ot.count)):ht!=null&&(Xt=Math.max(Xt,0),di=Math.min(di,ht.count));const vi=di-Xt;if(vi<0||vi===1/0)return;kt.setup(fe,Se,lt,be,ot);let Xi,Kt=Ye;if(ot!==null&&(Xi=Ce.get(ot),Kt=wt,Kt.setIndex(Xi)),fe.isMesh)Se.wireframe===!0?(qe.setLineWidth(Se.wireframeLinewidth*at()),Kt.setMode(se.LINES)):Kt.setMode(se.TRIANGLES);else if(fe.isLine){let gt=Se.linewidth;gt===void 0&&(gt=1),qe.setLineWidth(gt*at()),fe.isLineSegments?Kt.setMode(se.LINES):fe.isLineLoop?Kt.setMode(se.LINE_LOOP):Kt.setMode(se.LINE_STRIP)}else fe.isPoints?Kt.setMode(se.POINTS):fe.isSprite&&Kt.setMode(se.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)Kt.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(pt.get("WEBGL_multi_draw"))Kt.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{const gt=fe._multiDrawStarts,Pi=fe._multiDrawCounts,It=fe._multiDrawCount,Ii=ot?Ce.get(ot).bytesPerElement:1,pn=We.get(Se).currentProgram.getUniforms();for(let nn=0;nn<It;nn++)pn.setValue(se,"_gl_DrawID",nn),Kt.render(gt[nn]/Ii,Pi[nn])}else if(fe.isInstancedMesh)Kt.renderInstances(Xt,vi,fe.count);else if(be.isInstancedBufferGeometry){const gt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Pi=Math.min(be.instanceCount,gt);Kt.renderInstances(Xt,vi,Pi)}else Kt.render(Xt,vi)};function Bt(U,de,be){U.transparent===!0&&U.side===Er&&U.forceSinglePass===!1?(U.side=Pn,U.needsUpdate=!0,ir(U,de,be),U.side=oo,U.needsUpdate=!0,ir(U,de,be),U.side=Er):ir(U,de,be)}this.compile=function(U,de,be=null){be===null&&(be=U),v=Ot.get(be),v.init(de),E.push(v),be.traverseVisible(function(fe){fe.isLight&&fe.layers.test(de.layers)&&(v.pushLight(fe),fe.castShadow&&v.pushShadow(fe))}),U!==be&&U.traverseVisible(function(fe){fe.isLight&&fe.layers.test(de.layers)&&(v.pushLight(fe),fe.castShadow&&v.pushShadow(fe))}),v.setupLights();const Se=new Set;return U.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;const Be=fe.material;if(Be)if(Array.isArray(Be))for(let Ke=0;Ke<Be.length;Ke++){const lt=Be[Ke];Bt(lt,be,fe),Se.add(lt)}else Bt(Be,be,fe),Se.add(Be)}),E.pop(),v=null,Se},this.compileAsync=function(U,de,be=null){const Se=this.compile(U,de,be);return new Promise(fe=>{function Be(){if(Se.forEach(function(Ke){We.get(Ke).currentProgram.isReady()&&Se.delete(Ke)}),Se.size===0){fe(U);return}setTimeout(Be,10)}pt.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let Si=null;function Hi(U){Si&&Si(U)}function Wn(){qi.stop()}function cn(){qi.start()}const qi=new Ub;qi.setAnimationLoop(Hi),typeof self<"u"&&qi.setContext(self),this.setAnimationLoop=function(U){Si=U,Pe.setAnimationLoop(U),U===null?qi.stop():qi.start()},Pe.addEventListener("sessionstart",Wn),Pe.addEventListener("sessionend",cn),this.render=function(U,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;if(U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(de),de=Pe.getCamera()),U.isScene===!0&&U.onBeforeRender(w,U,de,y),v=Ot.get(U,E.length),v.init(de),E.push(v),ge.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),oe.setFromProjectionMatrix(ge),j=this.localClippingEnabled,ie=ke.init(this.clippingPlanes,j),b=it.get(U,g.length),b.init(),g.push(b),Pe.enabled===!0&&Pe.isPresenting===!0){const Be=w.xr.getDepthSensingMesh();Be!==null&&jn(Be,de,-1/0,w.sortObjects)}jn(U,de,0,w.sortObjects),b.finish(),w.sortObjects===!0&&b.sort(z,ue),ct=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,ct&&_t.addToRenderList(b,U),this.info.render.frame++,ie===!0&&ke.beginShadows();const be=v.state.shadowsArray;rt.render(be,U,de),ie===!0&&ke.endShadows(),this.info.autoReset===!0&&this.info.reset();const Se=b.opaque,fe=b.transmissive;if(v.setupLights(),de.isArrayCamera){const Be=de.cameras;if(fe.length>0)for(let Ke=0,lt=Be.length;Ke<lt;Ke++){const ot=Be[Ke];tr(Se,fe,U,ot)}ct&&_t.render(U);for(let Ke=0,lt=Be.length;Ke<lt;Ke++){const ot=Be[Ke];er(b,U,ot,ot.viewport)}}else fe.length>0&&tr(Se,fe,U,de),ct&&_t.render(U),er(b,U,de);y!==null&&(q.updateMultisampleRenderTarget(y),q.updateRenderTargetMipmap(y)),U.isScene===!0&&U.onAfterRender(w,U,de),kt.resetDefaultState(),B=-1,V=null,E.pop(),E.length>0?(v=E[E.length-1],ie===!0&&ke.setGlobalState(w.clippingPlanes,v.state.camera)):v=null,g.pop(),g.length>0?b=g[g.length-1]:b=null};function jn(U,de,be,Se){if(U.visible===!1)return;if(U.layers.test(de.layers)){if(U.isGroup)be=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(de);else if(U.isLight)v.pushLight(U),U.castShadow&&v.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||oe.intersectsSprite(U)){Se&&Fe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(ge);const Ke=pe.update(U),lt=U.material;lt.visible&&b.push(U,Ke,lt,be,Fe.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||oe.intersectsObject(U))){const Ke=pe.update(U),lt=U.material;if(Se&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),Fe.copy(U.boundingSphere.center)):(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),Fe.copy(Ke.boundingSphere.center)),Fe.applyMatrix4(U.matrixWorld).applyMatrix4(ge)),Array.isArray(lt)){const ot=Ke.groups;for(let Et=0,xt=ot.length;Et<xt;Et++){const ht=ot[Et],Xt=lt[ht.materialIndex];Xt&&Xt.visible&&b.push(U,Ke,Xt,be,Fe.z,ht)}}else lt.visible&&b.push(U,Ke,lt,be,Fe.z,null)}}const Be=U.children;for(let Ke=0,lt=Be.length;Ke<lt;Ke++)jn(Be[Ke],de,be,Se)}function er(U,de,be,Se){const fe=U.opaque,Be=U.transmissive,Ke=U.transparent;v.setupLightsView(be),ie===!0&&ke.setGlobalState(w.clippingPlanes,be),Se&&qe.viewport(C.copy(Se)),fe.length>0&&Rr(fe,de,be),Be.length>0&&Rr(Be,de,be),Ke.length>0&&Rr(Ke,de,be),qe.buffers.depth.setTest(!0),qe.buffers.depth.setMask(!0),qe.buffers.color.setMask(!0),qe.setPolygonOffset(!1)}function tr(U,de,be,Se){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[Se.id]===void 0&&(v.state.transmissionRenderTarget[Se.id]=new ao(1,1,{generateMipmaps:!0,type:pt.has("EXT_color_buffer_half_float")||pt.has("EXT_color_buffer_float")?Rc:Ar,minFilter:Qr,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ai.workingColorSpace}));const Be=v.state.transmissionRenderTarget[Se.id],Ke=Se.viewport||C;Be.setSize(Ke.z,Ke.w);const lt=w.getRenderTarget();w.setRenderTarget(Be),w.getClearColor(P),F=w.getClearAlpha(),F<1&&w.setClearColor(16777215,.5),w.clear(),ct&&_t.render(be);const ot=w.toneMapping;w.toneMapping=eo;const Et=Se.viewport;if(Se.viewport!==void 0&&(Se.viewport=void 0),v.setupLightsView(Se),ie===!0&&ke.setGlobalState(w.clippingPlanes,Se),Rr(U,be,Se),q.updateMultisampleRenderTarget(Be),q.updateRenderTargetMipmap(Be),pt.has("WEBGL_multisampled_render_to_texture")===!1){let xt=!1;for(let ht=0,Xt=de.length;ht<Xt;ht++){const di=de[ht],vi=di.object,Xi=di.geometry,Kt=di.material,gt=di.group;if(Kt.side===Er&&vi.layers.test(Se.layers)){const Pi=Kt.side;Kt.side=Pn,Kt.needsUpdate=!0,Xo(vi,be,Se,Xi,Kt,gt),Kt.side=Pi,Kt.needsUpdate=!0,xt=!0}}xt===!0&&(q.updateMultisampleRenderTarget(Be),q.updateRenderTargetMipmap(Be))}w.setRenderTarget(lt),w.setClearColor(P,F),Et!==void 0&&(Se.viewport=Et),w.toneMapping=ot}function Rr(U,de,be){const Se=de.isScene===!0?de.overrideMaterial:null;for(let fe=0,Be=U.length;fe<Be;fe++){const Ke=U[fe],lt=Ke.object,ot=Ke.geometry,Et=Se===null?Ke.material:Se,xt=Ke.group;lt.layers.test(be.layers)&&Xo(lt,de,be,ot,Et,xt)}}function Xo(U,de,be,Se,fe,Be){U.onBeforeRender(w,de,be,Se,fe,Be),U.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),fe.onBeforeRender(w,de,be,Se,U,Be),fe.transparent===!0&&fe.side===Er&&fe.forceSinglePass===!1?(fe.side=Pn,fe.needsUpdate=!0,w.renderBufferDirect(be,de,Se,fe,U,Be),fe.side=oo,fe.needsUpdate=!0,w.renderBufferDirect(be,de,Se,fe,U,Be),fe.side=Er):w.renderBufferDirect(be,de,Se,fe,U,Be),U.onAfterRender(w,de,be,Se,fe,Be)}function ir(U,de,be){de.isScene!==!0&&(de=He);const Se=We.get(U),fe=v.state.lights,Be=v.state.shadowsArray,Ke=fe.state.version,lt=Xe.getParameters(U,fe.state,Be,de,be),ot=Xe.getProgramCacheKey(lt);let Et=Se.programs;Se.environment=U.isMeshStandardMaterial?de.environment:null,Se.fog=de.fog,Se.envMap=(U.isMeshStandardMaterial?le:O).get(U.envMap||Se.environment),Se.envMapRotation=Se.environment!==null&&U.envMap===null?de.environmentRotation:U.envMapRotation,Et===void 0&&(U.addEventListener("dispose",Ut),Et=new Map,Se.programs=Et);let xt=Et.get(ot);if(xt!==void 0){if(Se.currentProgram===xt&&Se.lightsStateVersion===Ke)return Ko(U,lt),xt}else lt.uniforms=Xe.getUniforms(U),U.onBeforeCompile(lt,w),xt=Xe.acquireProgram(lt,ot),Et.set(ot,xt),Se.uniforms=lt.uniforms;const ht=Se.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(ht.clippingPlanes=ke.uniform),Ko(U,lt),Se.needsLights=Ps(U),Se.lightsStateVersion=Ke,Se.needsLights&&(ht.ambientLightColor.value=fe.state.ambient,ht.lightProbe.value=fe.state.probe,ht.directionalLights.value=fe.state.directional,ht.directionalLightShadows.value=fe.state.directionalShadow,ht.spotLights.value=fe.state.spot,ht.spotLightShadows.value=fe.state.spotShadow,ht.rectAreaLights.value=fe.state.rectArea,ht.ltc_1.value=fe.state.rectAreaLTC1,ht.ltc_2.value=fe.state.rectAreaLTC2,ht.pointLights.value=fe.state.point,ht.pointLightShadows.value=fe.state.pointShadow,ht.hemisphereLights.value=fe.state.hemi,ht.directionalShadowMap.value=fe.state.directionalShadowMap,ht.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,ht.spotShadowMap.value=fe.state.spotShadowMap,ht.spotLightMatrix.value=fe.state.spotLightMatrix,ht.spotLightMap.value=fe.state.spotLightMap,ht.pointShadowMap.value=fe.state.pointShadowMap,ht.pointShadowMatrix.value=fe.state.pointShadowMatrix),Se.currentProgram=xt,Se.uniformsList=null,xt}function Yo(U){if(U.uniformsList===null){const de=U.currentProgram.getUniforms();U.uniformsList=Ku.seqWithValue(de.seq,U.uniforms)}return U.uniformsList}function Ko(U,de){const be=We.get(U);be.outputColorSpace=de.outputColorSpace,be.batching=de.batching,be.batchingColor=de.batchingColor,be.instancing=de.instancing,be.instancingColor=de.instancingColor,be.instancingMorph=de.instancingMorph,be.skinning=de.skinning,be.morphTargets=de.morphTargets,be.morphNormals=de.morphNormals,be.morphColors=de.morphColors,be.morphTargetsCount=de.morphTargetsCount,be.numClippingPlanes=de.numClippingPlanes,be.numIntersection=de.numClipIntersection,be.vertexAlphas=de.vertexAlphas,be.vertexTangents=de.vertexTangents,be.toneMapping=de.toneMapping}function Zo(U,de,be,Se,fe){de.isScene!==!0&&(de=He),q.resetTextureUnits();const Be=de.fog,Ke=Se.isMeshStandardMaterial?de.environment:null,lt=y===null?w.outputColorSpace:y.isXRRenderTarget===!0?y.texture.colorSpace:Lr,ot=(Se.isMeshStandardMaterial?le:O).get(Se.envMap||Ke),Et=Se.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,xt=!!be.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),ht=!!be.morphAttributes.position,Xt=!!be.morphAttributes.normal,di=!!be.morphAttributes.color;let vi=eo;Se.toneMapped&&(y===null||y.isXRRenderTarget===!0)&&(vi=w.toneMapping);const Xi=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Kt=Xi!==void 0?Xi.length:0,gt=We.get(Se),Pi=v.state.lights;if(ie===!0&&(j===!0||U!==V)){const bi=U===V&&Se.id===B;ke.setState(Se,U,bi)}let It=!1;Se.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Pi.state.version||gt.outputColorSpace!==lt||fe.isBatchedMesh&&gt.batching===!1||!fe.isBatchedMesh&&gt.batching===!0||fe.isBatchedMesh&&gt.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&gt.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&gt.instancing===!1||!fe.isInstancedMesh&&gt.instancing===!0||fe.isSkinnedMesh&&gt.skinning===!1||!fe.isSkinnedMesh&&gt.skinning===!0||fe.isInstancedMesh&&gt.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&gt.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&gt.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&gt.instancingMorph===!1&&fe.morphTexture!==null||gt.envMap!==ot||Se.fog===!0&&gt.fog!==Be||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==ke.numPlanes||gt.numIntersection!==ke.numIntersection)||gt.vertexAlphas!==Et||gt.vertexTangents!==xt||gt.morphTargets!==ht||gt.morphNormals!==Xt||gt.morphColors!==di||gt.toneMapping!==vi||gt.morphTargetsCount!==Kt)&&(It=!0):(It=!0,gt.__version=Se.version);let Ii=gt.currentProgram;It===!0&&(Ii=ir(Se,de,fe));let pn=!1,nn=!1,ps=!1;const ti=Ii.getUniforms(),Rn=gt.uniforms;if(qe.useProgram(Ii.program)&&(pn=!0,nn=!0,ps=!0),Se.id!==B&&(B=Se.id,nn=!0),pn||V!==U){yt.reverseDepthBuffer?(me.copy(U.projectionMatrix),VC(me),$C(me),ti.setValue(se,"projectionMatrix",me)):ti.setValue(se,"projectionMatrix",U.projectionMatrix),ti.setValue(se,"viewMatrix",U.matrixWorldInverse);const bi=ti.map.cameraPosition;bi!==void 0&&bi.setValue(se,Ne.setFromMatrixPosition(U.matrixWorld)),yt.logarithmicDepthBuffer&&ti.setValue(se,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&ti.setValue(se,"isOrthographic",U.isOrthographicCamera===!0),V!==U&&(V=U,nn=!0,ps=!0)}if(fe.isSkinnedMesh){ti.setOptional(se,fe,"bindMatrix"),ti.setOptional(se,fe,"bindMatrixInverse");const bi=fe.skeleton;bi&&(bi.boneTexture===null&&bi.computeBoneTexture(),ti.setValue(se,"boneTexture",bi.boneTexture,q))}fe.isBatchedMesh&&(ti.setOptional(se,fe,"batchingTexture"),ti.setValue(se,"batchingTexture",fe._matricesTexture,q),ti.setOptional(se,fe,"batchingIdTexture"),ti.setValue(se,"batchingIdTexture",fe._indirectTexture,q),ti.setOptional(se,fe,"batchingColorTexture"),fe._colorsTexture!==null&&ti.setValue(se,"batchingColorTexture",fe._colorsTexture,q));const wn=be.morphAttributes;if((wn.position!==void 0||wn.normal!==void 0||wn.color!==void 0)&&mt.update(fe,be,Ii),(nn||gt.receiveShadow!==fe.receiveShadow)&&(gt.receiveShadow=fe.receiveShadow,ti.setValue(se,"receiveShadow",fe.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(Rn.envMap.value=ot,Rn.flipEnvMap.value=ot.isCubeTexture&&ot.isRenderTargetTexture===!1?-1:1),Se.isMeshStandardMaterial&&Se.envMap===null&&de.environment!==null&&(Rn.envMapIntensity.value=de.environmentIntensity),nn&&(ti.setValue(se,"toneMappingExposure",w.toneMappingExposure),gt.needsLights&&mo(Rn,ps),Be&&Se.fog===!0&&$e.refreshFogUniforms(Rn,Be),$e.refreshMaterialUniforms(Rn,Se,G,Q,v.state.transmissionRenderTarget[U.id]),Ku.upload(se,Yo(gt),Rn,q)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(Ku.upload(se,Yo(gt),Rn,q),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&ti.setValue(se,"center",fe.center),ti.setValue(se,"modelViewMatrix",fe.modelViewMatrix),ti.setValue(se,"normalMatrix",fe.normalMatrix),ti.setValue(se,"modelMatrix",fe.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const bi=Se.uniformsGroups;for(let nr=0,ll=bi.length;nr<ll;nr++){const Fi=bi[nr];ce.update(Fi,Ii),ce.bind(Fi,Ii)}}return Ii}function mo(U,de){U.ambientLightColor.needsUpdate=de,U.lightProbe.needsUpdate=de,U.directionalLights.needsUpdate=de,U.directionalLightShadows.needsUpdate=de,U.pointLights.needsUpdate=de,U.pointLightShadows.needsUpdate=de,U.spotLights.needsUpdate=de,U.spotLightShadows.needsUpdate=de,U.rectAreaLights.needsUpdate=de,U.hemisphereLights.needsUpdate=de}function Ps(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(U,de,be){We.get(U.texture).__webglTexture=de,We.get(U.depthTexture).__webglTexture=be;const Se=We.get(U);Se.__hasExternalTextures=!0,Se.__autoAllocateDepthBuffer=be===void 0,Se.__autoAllocateDepthBuffer||pt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(U,de){const be=We.get(U);be.__webglFramebuffer=de,be.__useDefaultFramebuffer=de===void 0},this.setRenderTarget=function(U,de=0,be=0){y=U,I=de,D=be;let Se=!0,fe=null,Be=!1,Ke=!1;if(U){const ot=We.get(U);if(ot.__useDefaultFramebuffer!==void 0)qe.bindFramebuffer(se.FRAMEBUFFER,null),Se=!1;else if(ot.__webglFramebuffer===void 0)q.setupRenderTarget(U);else if(ot.__hasExternalTextures)q.rebindTextures(U,We.get(U.texture).__webglTexture,We.get(U.depthTexture).__webglTexture);else if(U.depthBuffer){const ht=U.depthTexture;if(ot.__boundDepthTexture!==ht){if(ht!==null&&We.has(ht)&&(U.width!==ht.image.width||U.height!==ht.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");q.setupDepthRenderbuffer(U)}}const Et=U.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(Ke=!0);const xt=We.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(xt[de])?fe=xt[de][be]:fe=xt[de],Be=!0):U.samples>0&&q.useMultisampledRTT(U)===!1?fe=We.get(U).__webglMultisampledFramebuffer:Array.isArray(xt)?fe=xt[be]:fe=xt,C.copy(U.viewport),A.copy(U.scissor),H=U.scissorTest}else C.copy(Ee).multiplyScalar(G).floor(),A.copy(J).multiplyScalar(G).floor(),H=W;if(qe.bindFramebuffer(se.FRAMEBUFFER,fe)&&Se&&qe.drawBuffers(U,fe),qe.viewport(C),qe.scissor(A),qe.setScissorTest(H),Be){const ot=We.get(U.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+de,ot.__webglTexture,be)}else if(Ke){const ot=We.get(U.texture),Et=de||0;se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,ot.__webglTexture,be||0,Et)}B=-1},this.readRenderTargetPixels=function(U,de,be,Se,fe,Be,Ke){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=We.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Ke!==void 0&&(lt=lt[Ke]),lt){qe.bindFramebuffer(se.FRAMEBUFFER,lt);try{const ot=U.texture,Et=ot.format,xt=ot.type;if(!yt.textureFormatReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!yt.textureTypeReadable(xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=U.width-Se&&be>=0&&be<=U.height-fe&&se.readPixels(de,be,Se,fe,St.convert(Et),St.convert(xt),Be)}finally{const ot=y!==null?We.get(y).__webglFramebuffer:null;qe.bindFramebuffer(se.FRAMEBUFFER,ot)}}},this.readRenderTargetPixelsAsync=async function(U,de,be,Se,fe,Be,Ke){if(!(U&&U.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let lt=We.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Ke!==void 0&&(lt=lt[Ke]),lt){const ot=U.texture,Et=ot.format,xt=ot.type;if(!yt.textureFormatReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!yt.textureTypeReadable(xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(de>=0&&de<=U.width-Se&&be>=0&&be<=U.height-fe){qe.bindFramebuffer(se.FRAMEBUFFER,lt);const ht=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,ht),se.bufferData(se.PIXEL_PACK_BUFFER,Be.byteLength,se.STREAM_READ),se.readPixels(de,be,Se,fe,St.convert(Et),St.convert(xt),0);const Xt=y!==null?We.get(y).__webglFramebuffer:null;qe.bindFramebuffer(se.FRAMEBUFFER,Xt);const di=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await HC(se,di,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,ht),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,Be),se.deleteBuffer(ht),se.deleteSync(di),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(U,de=null,be=0){U.isTexture!==!0&&(Yu("WebGLRenderer: copyFramebufferToTexture function signature has changed."),de=arguments[0]||null,U=arguments[1]);const Se=Math.pow(2,-be),fe=Math.floor(U.image.width*Se),Be=Math.floor(U.image.height*Se),Ke=de!==null?de.x:0,lt=de!==null?de.y:0;q.setTexture2D(U,0),se.copyTexSubImage2D(se.TEXTURE_2D,be,0,0,Ke,lt,fe,Be),qe.unbindTexture()},this.copyTextureToTexture=function(U,de,be=null,Se=null,fe=0){U.isTexture!==!0&&(Yu("WebGLRenderer: copyTextureToTexture function signature has changed."),Se=arguments[0]||null,U=arguments[1],de=arguments[2],fe=arguments[3]||0,be=null);let Be,Ke,lt,ot,Et,xt;be!==null?(Be=be.max.x-be.min.x,Ke=be.max.y-be.min.y,lt=be.min.x,ot=be.min.y):(Be=U.image.width,Ke=U.image.height,lt=0,ot=0),Se!==null?(Et=Se.x,xt=Se.y):(Et=0,xt=0);const ht=St.convert(de.format),Xt=St.convert(de.type);q.setTexture2D(de,0),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,de.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,de.unpackAlignment);const di=se.getParameter(se.UNPACK_ROW_LENGTH),vi=se.getParameter(se.UNPACK_IMAGE_HEIGHT),Xi=se.getParameter(se.UNPACK_SKIP_PIXELS),Kt=se.getParameter(se.UNPACK_SKIP_ROWS),gt=se.getParameter(se.UNPACK_SKIP_IMAGES),Pi=U.isCompressedTexture?U.mipmaps[fe]:U.image;se.pixelStorei(se.UNPACK_ROW_LENGTH,Pi.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,Pi.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,lt),se.pixelStorei(se.UNPACK_SKIP_ROWS,ot),U.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,fe,Et,xt,Be,Ke,ht,Xt,Pi.data):U.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,fe,Et,xt,Pi.width,Pi.height,ht,Pi.data):se.texSubImage2D(se.TEXTURE_2D,fe,Et,xt,Be,Ke,ht,Xt,Pi),se.pixelStorei(se.UNPACK_ROW_LENGTH,di),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,vi),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Xi),se.pixelStorei(se.UNPACK_SKIP_ROWS,Kt),se.pixelStorei(se.UNPACK_SKIP_IMAGES,gt),fe===0&&de.generateMipmaps&&se.generateMipmap(se.TEXTURE_2D),qe.unbindTexture()},this.copyTextureToTexture3D=function(U,de,be=null,Se=null,fe=0){U.isTexture!==!0&&(Yu("WebGLRenderer: copyTextureToTexture3D function signature has changed."),be=arguments[0]||null,Se=arguments[1]||null,U=arguments[2],de=arguments[3],fe=arguments[4]||0);let Be,Ke,lt,ot,Et,xt,ht,Xt,di;const vi=U.isCompressedTexture?U.mipmaps[fe]:U.image;be!==null?(Be=be.max.x-be.min.x,Ke=be.max.y-be.min.y,lt=be.max.z-be.min.z,ot=be.min.x,Et=be.min.y,xt=be.min.z):(Be=vi.width,Ke=vi.height,lt=vi.depth,ot=0,Et=0,xt=0),Se!==null?(ht=Se.x,Xt=Se.y,di=Se.z):(ht=0,Xt=0,di=0);const Xi=St.convert(de.format),Kt=St.convert(de.type);let gt;if(de.isData3DTexture)q.setTexture3D(de,0),gt=se.TEXTURE_3D;else if(de.isDataArrayTexture||de.isCompressedArrayTexture)q.setTexture2DArray(de,0),gt=se.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,de.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,de.unpackAlignment);const Pi=se.getParameter(se.UNPACK_ROW_LENGTH),It=se.getParameter(se.UNPACK_IMAGE_HEIGHT),Ii=se.getParameter(se.UNPACK_SKIP_PIXELS),pn=se.getParameter(se.UNPACK_SKIP_ROWS),nn=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,vi.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,vi.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,ot),se.pixelStorei(se.UNPACK_SKIP_ROWS,Et),se.pixelStorei(se.UNPACK_SKIP_IMAGES,xt),U.isDataTexture||U.isData3DTexture?se.texSubImage3D(gt,fe,ht,Xt,di,Be,Ke,lt,Xi,Kt,vi.data):de.isCompressedArrayTexture?se.compressedTexSubImage3D(gt,fe,ht,Xt,di,Be,Ke,lt,Xi,vi.data):se.texSubImage3D(gt,fe,ht,Xt,di,Be,Ke,lt,Xi,Kt,vi),se.pixelStorei(se.UNPACK_ROW_LENGTH,Pi),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,It),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Ii),se.pixelStorei(se.UNPACK_SKIP_ROWS,pn),se.pixelStorei(se.UNPACK_SKIP_IMAGES,nn),fe===0&&de.generateMipmaps&&se.generateMipmap(gt),qe.unbindTexture()},this.initRenderTarget=function(U){We.get(U).__webglFramebuffer===void 0&&q.setupRenderTarget(U)},this.initTexture=function(U){U.isCubeTexture?q.setTextureCube(U,0):U.isData3DTexture?q.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?q.setTexture2DArray(U,0):q.setTexture2D(U,0),qe.unbindTexture()},this.resetState=function(){I=0,D=0,y=null,qe.reset(),kt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Tr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Om?"display-p3":"srgb",t.unpackColorSpace=ai.workingColorSpace===Bd?"display-p3":"srgb"}}class E0 extends Vn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Zs,this.environmentIntensity=1,this.environmentRotation=new Zs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class tI{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let s=0;const r=n.length;let o;t?o=t:o=e*n[r-1];let a=0,l=r-1,u;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),u=n[s]-o,u<0)a=s+1;else if(u>0)l=s-1;else{l=s;break}if(s=l,n[s]===o)return s/(r-1);const c=n[s],h=n[s+1]-c,f=(o-c)/h;return(s+f)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=t||(o.isVector2?new ei:new xe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new xe,s=[],r=[],o=[],a=new xe,l=new Ai;for(let f=0;f<=e;f++){const m=f/e;s[f]=this.getTangentAt(m,new xe)}r[0]=new xe,o[0]=new xe;let u=Number.MAX_VALUE;const c=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);c<=u&&(u=c,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),h<=u&&n.set(0,0,1),a.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(s[f-1],s[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(rn(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(s[f],r[f])}if(t===!0){let f=Math.acos(rn(r[0].dot(r[e]),-1,1));f/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(f=-f);for(let m=1;m<=e;m++)r[m].applyMatrix4(l.makeRotationAxis(s[m],f*m)),o[m].crossVectors(s[m],r[m])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function w0(i,e,t,n,s){const r=(n-e)*.5,o=(s-t)*.5,a=i*i,l=i*a;return(2*t-2*n+r+o)*l+(-3*t+3*n-2*r-o)*a+r*i+t}class iI extends tI{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ei){const n=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),a=r-o,l=s[o===0?o:o-1],u=s[o],c=s[o>s.length-2?s.length-1:o+1],d=s[o>s.length-3?s.length-1:o+2];return n.set(w0(a,l.x,u.x,c.x,d.x),w0(a,l.y,u.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new ei().fromArray(s))}return this}}class Oc extends ho{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let u=0;const c=[],d=new xe,h=new xe,f=[],m=[],b=[],v=[];for(let g=0;g<=n;g++){const E=[],w=g/n;let S=0;g===0&&o===0?S=.5/t:g===n&&l===Math.PI&&(S=-.5/t);for(let I=0;I<=t;I++){const D=I/t;d.x=-e*Math.cos(s+D*r)*Math.sin(o+w*a),d.y=e*Math.cos(o+w*a),d.z=e*Math.sin(s+D*r)*Math.sin(o+w*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),b.push(h.x,h.y,h.z),v.push(D+S,1-w),E.push(u++)}c.push(E)}for(let g=0;g<n;g++)for(let E=0;E<t;E++){const w=c[g][E+1],S=c[g][E],I=c[g+1][E],D=c[g+1][E+1];(g!==0||o>0)&&f.push(w,S,D),(g!==n-1||l<Math.PI)&&f.push(S,I,D)}this.setIndex(f),this.setAttribute("position",new Ys(m,3)),this.setAttribute("normal",new Ys(b,3)),this.setAttribute("uv",new Ys(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}const Fp={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class nI{constructor(e,t,n){const s=this;let r=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){a++,r===!1&&s.onStart!==void 0&&s.onStart(c,o,a),r=!0},this.itemEnd=function(c){o++,s.onProgress!==void 0&&s.onProgress(c,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(c){s.onError!==void 0&&s.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=u.length;d<h;d+=2){const f=u[d],m=u[d+1];if(f.global&&(f.lastIndex=0),f.test(c))return m}return null}}}const sI=new nI;let Bm=class{constructor(e){this.manager=e!==void 0?e:sI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Bm.DEFAULT_MATERIAL_NAME="__DEFAULT";const x0=new Ai;class rI{constructor(e,t,n=0,s=1/0){this.ray=new Rb(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new Fm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return x0.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(x0),this}intersectObject(e,t=!0,n=[]){return Up(e,this,n,t),n.sort(S0),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)Up(e[s],this,n,t);return n.sort(S0),n}}function S0(i,e){return i.distance-e.distance}function Up(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let o=0,a=r.length;o<a;o++)Up(r[o],e,t,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Cm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Cm);/*!
 * Photo Sphere Viewer 5.11.1
 * @copyright 2014-2015 JÃ©rÃ©my Heleine
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var oI=Object.defineProperty,Hm=(i,e)=>{for(var t in e)oI(i,t,{get:e[t],enumerable:!0})},yd={};Hm(yd,{ACTIONS:()=>Kb,ANIMATION_MIN_DURATION:()=>zp,CAPTURE_EVENTS_CLASS:()=>Nc,CTRLZOOM_TIMEOUT:()=>Yb,DBLCLICK_DELAY:()=>jb,DEFAULT_TRANSITION:()=>Gb,EASINGS:()=>Zu,ICONS:()=>Ms,IDS:()=>on,KEY_CODES:()=>Ji,LONGTOUCH_DELAY:()=>qb,MOVE_THRESHOLD:()=>Wb,SPHERE_RADIUS:()=>Go,TWOFINGERSOVERLAY_DELAY:()=>Xb,VIEWER_DATA:()=>co});var aI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g><!-- Created by Flatart from the Noun Project --></svg>
`,lI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',cI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/><!--Created by Michael Zenaty from the Noun Project--></svg>
`,uI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,dI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/><!--Created by Garrett Knoll from the Noun Project--></svg>
`,hI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/><!--Created by Arafat Uddin from the Noun Project--></svg>
`,fI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g><!-- Created by Richard KunÃ¡k from the Noun Project--></svg>
`,pI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,mI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/><!--Created by Ryan Canning from the Noun Project--></svg>
`,Gb=1500,zp=500,Wb=4,jb=300,qb=500,Xb=100,Yb=2e3,Go=10,co="photoSphereViewer",Nc="psv--capture-event",Kb=(i=>(i.ROTATE_UP="ROTATE_UP",i.ROTATE_DOWN="ROTATE_DOWN",i.ROTATE_RIGHT="ROTATE_RIGHT",i.ROTATE_LEFT="ROTATE_LEFT",i.ZOOM_IN="ZOOM_IN",i.ZOOM_OUT="ZOOM_OUT",i))(Kb||{}),on={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},Ji={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},Ms={arrow:aI,close:lI,download:cI,fullscreenIn:uI,fullscreenOut:dI,info:hI,menu:fI,zoomIn:pI,zoomOut:mI},Zu={linear:i=>i,inQuad:i=>i*i,outQuad:i=>i*(2-i),inOutQuad:i=>i<.5?2*i*i:-1+(4-2*i)*i,inCubic:i=>i*i*i,outCubic:i=>--i*i*i+1,inOutCubic:i=>i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,inQuart:i=>i*i*i*i,outQuart:i=>1- --i*i*i*i,inOutQuart:i=>i<.5?8*i*i*i*i:1-8*--i*i*i*i,inQuint:i=>i*i*i*i*i,outQuint:i=>1+--i*i*i*i*i,inOutQuint:i=>i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i,inSine:i=>1-Math.cos(i*(Math.PI/2)),outSine:i=>Math.sin(i*(Math.PI/2)),inOutSine:i=>.5-.5*Math.cos(Math.PI*i),inExpo:i=>Math.pow(2,10*(i-1)),outExpo:i=>1-Math.pow(2,-10*i),inOutExpo:i=>(i=i*2-1)<0?.5*Math.pow(2,10*i):1-.5*Math.pow(2,-10*i),inCirc:i=>1-Math.sqrt(1-i*i),outCirc:i=>Math.sqrt(1-(i-1)*(i-1)),inOutCirc:i=>(i*=2)<1?.5-.5*Math.sqrt(1-i*i):.5+.5*Math.sqrt(1-(i-=2)*i)},Mi={};Hm(Mi,{Animation:()=>xd,Dynamic:()=>ql,MultiDynamic:()=>y_,PressHandler:()=>Xd,Slider:()=>__,SliderDirection:()=>b_,addClasses:()=>Vm,angle:()=>Qb,applyEulerInverse:()=>Gp,checkClosedShadowDom:()=>g_,checkStylesheet:()=>m_,checkVersion:()=>Xm,cleanCssPosition:()=>f_,clone:()=>Wd,createTexture:()=>$p,cssPositionIsOrdered:()=>qm,dasherize:()=>_I,deepEqual:()=>u_,deepmerge:()=>l_,distance:()=>Zb,exitFullscreen:()=>a_,firstNonNull:()=>Fs,getAbortError:()=>Hp,getAngle:()=>e_,getClosest:()=>i_,getConfigParser:()=>qd,getElement:()=>t_,getEventTarget:()=>bd,getMatchingTarget:()=>n_,getPosition:()=>s_,getShortestArc:()=>Jb,getStyleProperty:()=>js,getTouchData:()=>Bp,getXMPValue:()=>kn,greatArcDistance:()=>vI,hasParent:()=>bI,invertResolvableBoolean:()=>jd,isAbortError:()=>h_,isEmpty:()=>c_,isExtendedPosition:()=>jm,isFullscreenEnabled:()=>r_,isNil:()=>tn,isPlainObject:()=>Gm,logWarn:()=>yi,mergePanoData:()=>v_,parseAngle:()=>Hs,parsePoint:()=>EI,parseSpeed:()=>p_,removeClasses:()=>yI,requestFullscreen:()=>o_,resolveBoolean:()=>Wm,speedToDuration:()=>Vp,sum:()=>gI,throttle:()=>$m,toggleClass:()=>Gd,wrap:()=>Jl});function Jl(i,e){let t=i%e;return t<0&&(t+=e),t}function gI(i){return i.reduce((e,t)=>e+t,0)}function Zb(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function Qb(i,e){return Math.atan2(e.y-i.y,e.x-i.x)}function Jb(i,e){return[0,Math.PI*2,-Math.PI*2].reduce((n,s)=>{const r=e-i+s;return Math.abs(r)<Math.abs(n)?r:n},1/0)}function e_(i,e){return Math.acos(Math.cos(i.pitch)*Math.cos(e.pitch)*Math.cos(i.yaw-e.yaw)+Math.sin(i.pitch)*Math.sin(e.pitch))}function vI([i,e],[t,n]){i-t>Math.PI?i-=2*Math.PI:i-t<-Math.PI&&(i+=2*Math.PI);const s=(t-i)*Math.cos((e+n)/2),r=n-e;return Math.sqrt(s*s+r*r)}function t_(i){return typeof i=="string"?i.match(/^[a-z]/i)?document.getElementById(i):document.querySelector(i):i}function Gd(i,e,t){t===void 0?i.classList.toggle(e):t?i.classList.add(e):t||i.classList.remove(e)}function Vm(i,e){i.classList.add(...e.split(" ").filter(t=>!!t))}function yI(i,e){i.classList.remove(...e.split(" ").filter(t=>!!t))}function bI(i,e){let t=i;do{if(t===e)return!0;t=t.parentElement}while(t);return!1}function i_(i,e){if(!(i!=null&&i.matches))return null;let t=i;do{if(t.matches(e))return t;t=t.parentElement}while(t);return null}function bd(i){return(i==null?void 0:i.composedPath()[0])||null}function n_(i,e){return i?i.composedPath().find(t=>!(t instanceof HTMLElement)&&!(t instanceof SVGElement)?!1:t.matches(e)):null}function s_(i){let e=0,t=0,n=i;for(;n;)e+=n.offsetLeft-n.scrollLeft+n.clientLeft,t+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return e-=window.scrollX,t-=window.scrollY,{x:e,y:t}}function js(i,e){return window.getComputedStyle(i).getPropertyValue(e)}function Bp(i){if(i.touches.length<2)return null;const e={x:i.touches[0].clientX,y:i.touches[0].clientY},t={x:i.touches[1].clientX,y:i.touches[1].clientY};return{distance:Zb(e,t),angle:Qb(e,t),center:{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}}var _d;function r_(i,e=!1){return e?i===_d:document.fullscreenElement===i}function o_(i,e=!1){e?(_d=i,i.classList.add("psv-fullscreen-emulation"),document.dispatchEvent(new Event("fullscreenchange"))):i.requestFullscreen()}function a_(i=!1){i?(_d.classList.remove("psv-fullscreen-emulation"),_d=null,document.dispatchEvent(new Event("fullscreenchange"))):document.exitFullscreen()}function _I(i){return i.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,(e,t)=>(t>0?"-":"")+e.toLowerCase())}function $m(i,e){let t=!1;return function(...n){t||(t=!0,setTimeout(()=>{i.apply(this,n),t=!1},e))}}function Gm(i){if(typeof i!="object"||i===null||Object.prototype.toString.call(i)!=="[object Object]")return!1;if(Object.getPrototypeOf(i)===null)return!0;let e=i;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function l_(i,e){const t=e;return function n(s,r){return Array.isArray(r)?(!s||!Array.isArray(s)?s=[]:s.length=0,r.forEach((o,a)=>{s[a]=n(null,o)})):typeof r=="object"?((!s||Array.isArray(s))&&(s={}),Object.keys(r).forEach(o=>{typeof r[o]!="object"||!r[o]||!Gm(r[o])?s[o]=r[o]:r[o]!==t&&(s[o]?n(s[o],r[o]):s[o]=n(null,r[o]))})):s=r,s}(i,e)}function Wd(i){return l_(null,i)}function c_(i){return!i||Object.keys(i).length===0&&i.constructor===Object}function tn(i){return i==null}function Fs(...i){for(const e of i)if(!tn(e))return e;return null}function u_(i,e){if(i===e)return!0;if(T0(i)&&T0(e)){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t of Object.keys(i))if(!u_(i[t],e[t]))return!1;return!0}else return!1}function T0(i){return typeof i=="object"&&i!==null}var Yt=class d_ extends Error{constructor(e,t){var n;super(t&&t instanceof Error?`${e}: ${t.message}`:e),this.name="PSVError",(n=Error.captureStackTrace)==null||n.call(Error,this,d_)}};function Wm(i,e){Gm(i)?(e(i.initial,!0),i.promise.then(t=>e(t,!1))):e(i,!0)}function jd(i){return{initial:!i.initial,promise:i.promise.then(e=>!e)}}function Hp(){const i=new Error("Loading was aborted.");return i.name="AbortError",i}function h_(i){return(i==null?void 0:i.name)==="AbortError"}function yi(i){console.warn(`PhotoSphereViewer: ${i}`)}function jm(i){return!i||Array.isArray(i)?!1:[["textureX","textureY"],["yaw","pitch"]].some(([e,t])=>i[e]!==void 0&&i[t]!==void 0)}function kn(i,e,t=!0){let n=i.match("<GPano:"+e+">(.*)</GPano:"+e+">");if(n!==null){const s=t?parseInt(n[1],10):parseFloat(n[1]);return isNaN(s)?null:s}if(n=i.match("GPano:"+e+'="(.*?)"'),n!==null){const s=t?parseInt(n[1],10):parseFloat(n[1]);return isNaN(s)?null:s}return null}var M0={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ed=["left","center","right"],wd=["top","center","bottom"],C0=[...Ed,...wd],rs="center";function EI(i){if(!i)return{x:.5,y:.5};if(typeof i=="object")return i;let e=i.toLocaleLowerCase().split(" ").slice(0,2);e.length===1&&(M0[e[0]]?e=[e[0],rs]:e=[e[0],e[0]]);const t=e[1]!=="left"&&e[1]!=="right"&&e[0]!=="top"&&e[0]!=="bottom";e=e.map(s=>M0[s]||s),t||e.reverse();const n=e.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return n?{x:parseFloat(n[1])/100,y:parseFloat(n[2])/100}:{x:.5,y:.5}}function f_(i,{allowCenter:e,cssOrder:t}={allowCenter:!0,cssOrder:!0}){return i?(typeof i=="string"&&(i=i.split(" ")),i.length===1&&(i[0]===rs?i=[rs,rs]:Ed.indexOf(i[0])!==-1?i=[rs,i[0]]:wd.indexOf(i[0])!==-1&&(i=[i[0],rs])),i.length!==2||C0.indexOf(i[0])===-1||C0.indexOf(i[1])===-1?(yi(`Unparsable position ${i}`),null):!e&&i[0]===rs&&i[1]===rs?(yi("Invalid position center center"),null):(t&&!qm(i)&&(i=[i[1],i[0]]),i[1]===rs&&Ed.indexOf(i[0])!==-1&&(i=[rs,i[0]]),i[0]===rs&&wd.indexOf(i[1])!==-1&&(i=[i[1],rs]),i)):null}function qm(i){return wd.indexOf(i[0])!==-1&&Ed.indexOf(i[1])!==-1}function p_(i){let e;if(typeof i=="string"){const t=i.toString().trim();let n=parseFloat(t.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1"));const s=t.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(s.match(/(pm|per minute)$/)&&(n/=60),s){case"dpm":case"degrees per minute":case"dps":case"degrees per second":e=wi.degToRad(n);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":e=n;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":e=n*Math.PI*2;break;default:throw new Yt(`Unknown speed unit "${s}"`)}}else e=i;return e}function Vp(i,e){if(typeof i!="number"){const t=p_(i);return e/Math.abs(t)*1e3}else return Math.abs(i)}function Hs(i,e=!1,t=e){let n;if(typeof i=="string"){const s=i.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!s)throw new Yt(`Unknown angle "${i}"`);const r=parseFloat(s[1]),o=s[2];if(o)switch(o){case"deg":case"degs":n=wi.degToRad(r);break;case"rad":case"rads":n=r;break;default:throw new Yt(`Unknown angle unit "${o}"`)}else n=r}else if(typeof i=="number"&&!isNaN(i))n=i;else throw new Yt(`Unknown angle "${i}"`);return n=Jl(e?n+Math.PI:n,Math.PI*2),e?wi.clamp(n-Math.PI,-Math.PI/(t?2:1),Math.PI/(t?2:1)):n}function $p(i,e=!1){const t=new _n(i);return t.needsUpdate=!0,t.minFilter=e?Qr:ls,t.generateMipmaps=e,t.anisotropy=e?2:1,t}var A0=new sl;function Gp(i,e){A0.setFromEuler(e).invert(),i.applyQuaternion(A0)}function qd(i,e){const t=function(n){const s=Wd({...i,...n}),r={};for(let[o,a]of Object.entries(s)){if(e&&o in e)a=e[o](a,{rawConfig:s,defValue:i[o]});else if(!(o in i)){yi(`Unknown option ${o}`);continue}r[o]=a}return r};return t.defaults=i,t.parsers=e||{},t}function m_(i,e){js(i,`--psv-${e}-loaded`)!=="true"&&console.error(`PhotoSphereViewer: stylesheet "@photo-sphere-viewer/${e}/index.css" is not loaded`)}function Xm(i,e,t){e&&e!==t&&console.error(`PhotoSphereViewer: @photo-sphere-viewer/${i} is in version ${e} but @photo-sphere-viewer/core is in version ${t}`)}function g_(i){do{if(i instanceof ShadowRoot&&i.mode==="closed"){console.error("PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected");return}i=i.parentNode}while(i)}function v_(i,e,t,n){if(!t&&!n){const r=Math.max(i,e*2),o=Math.round(r/2),a=Math.round((r-i)/2),l=Math.round((o-e)/2);t={fullWidth:r,fullHeight:o,croppedWidth:i,croppedHeight:e,croppedX:a,croppedY:l}}const s={isEquirectangular:!0,fullWidth:Fs(t==null?void 0:t.fullWidth,n==null?void 0:n.fullWidth),fullHeight:Fs(t==null?void 0:t.fullHeight,n==null?void 0:n.fullHeight),croppedWidth:Fs(t==null?void 0:t.croppedWidth,n==null?void 0:n.croppedWidth,i),croppedHeight:Fs(t==null?void 0:t.croppedHeight,n==null?void 0:n.croppedHeight,e),croppedX:Fs(t==null?void 0:t.croppedX,n==null?void 0:n.croppedX,0),croppedY:Fs(t==null?void 0:t.croppedY,n==null?void 0:n.croppedY,0),poseHeading:Fs(t==null?void 0:t.poseHeading,n==null?void 0:n.poseHeading,0),posePitch:Fs(t==null?void 0:t.posePitch,n==null?void 0:n.posePitch,0),poseRoll:Fs(t==null?void 0:t.poseRoll,n==null?void 0:n.poseRoll,0),initialHeading:n==null?void 0:n.initialHeading,initialPitch:n==null?void 0:n.initialPitch,initialFov:n==null?void 0:n.initialFov};return!s.fullWidth&&s.fullHeight?s.fullWidth=s.fullHeight*2:(!s.fullWidth||!s.fullHeight)&&(s.fullWidth=s.fullWidth??i,s.fullHeight=s.fullHeight??e),(s.croppedWidth!==i||s.croppedHeight!==e)&&yi(`Invalid panoData, croppedWidth/croppedHeight is not coherent with the loaded image.
        panoData: ${s.croppedWidth}x${s.croppedHeight}, image: ${i}x${e}`),Math.abs(s.fullWidth-s.fullHeight*2)>1&&(yi("Invalid panoData, fullWidth should be twice fullHeight"),s.fullHeight=Math.round(s.fullWidth/2)),s.croppedX+s.croppedWidth>s.fullWidth&&(yi("Invalid panoData, croppedX + croppedWidth > fullWidth"),s.croppedX=s.fullWidth-s.croppedWidth),s.croppedY+s.croppedHeight>s.fullHeight&&(yi("Invalid panoData, croppedY + croppedHeight > fullHeight"),s.croppedY=s.fullHeight-s.croppedHeight),s.croppedX<0&&(yi("Invalid panoData, croppedX < 0"),s.croppedX=0),s.croppedY<0&&(yi("Invalid panoData, croppedY < 0"),s.croppedY=0),s}var xd=class{constructor(i){this.easing=Zu.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=i,i?(i.easing&&(this.easing=typeof i.easing=="function"?i.easing:Zu[i.easing]||Zu.linear),this.delayTimeout=setTimeout(()=>{this.delayTimeout=void 0,this.animationFrame=window.requestAnimationFrame(e=>this.__run(e))},i.delay||0)):this.resolved=!0}__run(i){if(this.cancelled)return;this.start||(this.start=i);const e=(i-this.start)/this.options.duration,t={};if(e<1){for(const[n,s]of Object.entries(this.options.properties))if(s){const r=s.start+(s.end-s.start)*this.easing(e);t[n]=r}this.options.onTick(t,e),this.animationFrame=window.requestAnimationFrame(n=>this.__run(n))}else{for(const[n,s]of Object.entries(this.options.properties))s&&(t[n]=s.end);this.options.onTick(t,1),this.__resolve(!0),this.animationFrame=void 0}}__resolve(i){i?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach(e=>e(i)),this.callbacks.length=0}then(i){return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(i):new Promise(e=>{this.callbacks.push(e)}).then(i)}cancel(){!this.cancelled&&!this.resolved&&(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}},ql=class{constructor(i,e){if(this.fn=i,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=e.min,this.max=e.max,this.wrap=e.wrap,this.current=e.defaultValue,this.wrap&&this.min!==0)throw new Yt("invalid config");this.fn&&this.fn(this.current)}get current(){return this.__current}set current(i){this.__current=i}setSpeed(i){this.speed=i}goto(i,e=1){this.mode=2,this.target=this.wrap?Jl(i,this.max):wi.clamp(i,this.min,this.max),this.speedMult=e}step(i,e=1){e===0?this.setValue(this.current+i):(this.mode!==2&&(this.target=this.current),this.goto(this.target+i,e))}roll(i=!1,e=1){this.mode=1,this.target=i?-1/0:1/0,this.speedMult=e}stop(){this.mode=0}setValue(i){return this.target=this.wrap?Jl(i,this.max):wi.clamp(i,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current?(this.current=this.target,this.fn&&this.fn(this.current),!0):!1}update(i){if(this.mode===2){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);const n=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=n&&(this.mode=0)}let e=this.mode===0?0:this.speed*this.speedMult;this.target<this.current&&(e=-e),this.currentSpeed<e?this.currentSpeed=Math.min(e,this.currentSpeed+i/1e3*this.speed*this.speedMult*2):this.currentSpeed>e&&(this.currentSpeed=Math.max(e,this.currentSpeed-i/1e3*this.speed*this.speedMult*2));let t=null;return this.current>this.target&&this.currentSpeed?t=Math.max(this.target,this.current+this.currentSpeed*i/1e3):this.current<this.target&&this.currentSpeed&&(t=Math.min(this.target,this.current+this.currentSpeed*i/1e3)),t!==null&&(t=this.wrap?Jl(t,this.max):wi.clamp(t,this.min,this.max),t!==this.current)?(this.current=t,this.fn&&this.fn(this.current),!0):!1}},y_=class{constructor(i,e){this.fn=i,this.dynamics=e,this.fn&&this.fn(this.current)}get current(){return Object.entries(this.dynamics).reduce((i,[e,t])=>(i[e]=t.current,i),{})}setSpeed(i){for(const e of Object.values(this.dynamics))e.setSpeed(i)}goto(i,e=1){for(const[t,n]of Object.entries(i))this.dynamics[t].goto(n,e)}step(i,e=1){if(e===0)this.setValue(Object.keys(i).reduce((t,n)=>(t[n]=i[n]+this.dynamics[n].current,t),{}));else for(const[t,n]of Object.entries(i))this.dynamics[t].step(n,e)}roll(i,e=1){for(const[t,n]of Object.entries(i))this.dynamics[t].roll(n,e)}stop(){for(const i of Object.values(this.dynamics))i.stop()}setValue(i){let e=!1;for(const[t,n]of Object.entries(i))e=this.dynamics[t].setValue(n)||e;return e&&this.fn&&this.fn(this.current),e}update(i){let e=!1;for(const t of Object.values(this.dynamics))e=t.update(i)||e;return e&&this.fn&&this.fn(this.current),e}},Xd=class{constructor(i=200){this.delay=i,this.time=0,this.delay=i}get pending(){return this.time!==0}down(i){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=new Date().getTime(),this.data=i}up(i){if(!this.time)return;Date.now()-this.time<this.delay?this.timeout=setTimeout(()=>{i(this.data),this.timeout=void 0,this.time=0,this.data=void 0},this.delay):(i(this.data),this.time=0,this.data=void 0)}},b_=(i=>(i.VERTICAL="VERTICAL",i.HORIZONTAL="HORIZONTAL",i))(b_||{}),__=class{constructor(i,e,t){this.container=i,this.direction=e,this.listener=t,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}get isVertical(){return this.direction==="VERTICAL"}get isHorizontal(){return this.direction==="HORIZONTAL"}destroy(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}handleEvent(i){switch(i.type){case"click":i.stopPropagation();break;case"mousedown":this.__onMouseDown(i);break;case"mouseenter":this.__onMouseEnter(i);break;case"mouseleave":this.__onMouseLeave(i);break;case"touchstart":this.__onTouchStart(i);break;case"mousemove":this.__onMouseMove(i);break;case"touchmove":this.__onTouchMove(i);break;case"mouseup":this.__onMouseUp(i);break;case"touchend":this.__onTouchEnd(i);break}}__onMouseDown(i){this.mousedown=!0,this.__update(i.clientX,i.clientY,!0)}__onMouseEnter(i){this.mouseover=!0,this.__update(i.clientX,i.clientY,!0)}__onTouchStart(i){this.mouseover=!0,this.mousedown=!0;const e=i.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}__onMouseMove(i){(this.mousedown||this.mouseover)&&(i.stopPropagation(),this.__update(i.clientX,i.clientY,!0))}__onTouchMove(i){if(this.mousedown||this.mouseover){i.stopPropagation();const e=i.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}}__onMouseUp(i){this.mousedown&&(this.mousedown=!1,this.__update(i.clientX,i.clientY,!1))}__onMouseLeave(i){this.mouseover&&(this.mouseover=!1,this.__update(i.clientX,i.clientY,!0))}__onTouchEnd(i){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;const e=i.changedTouches[0];this.__update(e.clientX,e.clientY,!1)}}__update(i,e,t){const n=this.container.getBoundingClientRect();let s;this.isVertical?s=wi.clamp((n.bottom-e)/n.height,0,1):s=wi.clamp((i-n.left)/n.width,0,1),this.listener({value:s,click:!t,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:i,clientY:e}})}},sn={};Hm(sn,{BeforeAnimateEvent:()=>Ym,BeforeRenderEvent:()=>ec,BeforeRotateEvent:()=>A_,ClickEvent:()=>R_,ConfigChangedEvent:()=>Ln,DoubleClickEvent:()=>k_,FullscreenEvent:()=>tc,HideNotificationEvent:()=>ic,HideOverlayEvent:()=>$_,HidePanelEvent:()=>to,HideTooltipEvent:()=>X_,KeypressEvent:()=>io,LoadProgressEvent:()=>J_,ObjectEnterEvent:()=>UE,ObjectEvent:()=>Kd,ObjectHoverEvent:()=>$E,ObjectLeaveEvent:()=>jp,PanoramaErrorEvent:()=>aE,PanoramaLoadEvent:()=>iE,PanoramaLoadedEvent:()=>Wp,PositionUpdatedEvent:()=>nc,ReadyEvent:()=>rc,RenderEvent:()=>bE,RollUpdatedEvent:()=>sc,ShowNotificationEvent:()=>oc,ShowOverlayEvent:()=>SE,ShowPanelEvent:()=>no,ShowTooltipEvent:()=>PE,SizeUpdatedEvent:()=>ac,StopAllEvent:()=>lc,TransitionDoneEvent:()=>uE,ViewerEvent:()=>ui,ZoomUpdatedEvent:()=>Mr});var Yd=class extends Event{constructor(i,e=!1){super(i,{cancelable:e})}},E_=class extends EventTarget{dispatchEvent(i){return super.dispatchEvent(i)}addEventListener(i,e,t){super.addEventListener(i,e,t)}removeEventListener(i,e,t){super.removeEventListener(i,e,t)}},ui=class extends Yd{},w_=class x_ extends ui{constructor(e,t){super(x_.type,!0),this.position=e,this.zoomLevel=t}};w_.type="before-animate";var Ym=w_,S_=class T_ extends ui{constructor(e,t){super(T_.type),this.timestamp=e,this.elapsed=t}};S_.type="before-render";var ec=S_,M_=class C_ extends ui{constructor(e){super(C_.type,!0),this.position=e}};M_.type="before-rotate";var A_=M_,P_=class L_ extends ui{constructor(e){super(L_.type),this.data=e}};P_.type="click";var R_=P_,I_=class D_ extends ui{constructor(e){super(D_.type),this.options=e}containsOptions(...e){return e.some(t=>this.options.includes(t))}};I_.type="config-changed";var Ln=I_,O_=class N_ extends ui{constructor(e){super(N_.type),this.data=e}};O_.type="dblclick";var k_=O_,F_=class U_ extends ui{constructor(e){super(U_.type),this.fullscreenEnabled=e}};F_.type="fullscreen";var tc=F_,z_=class B_ extends ui{constructor(e){super(B_.type),this.notificationId=e}};z_.type="hide-notification";var ic=z_,H_=class V_ extends ui{constructor(e){super(V_.type),this.overlayId=e}};H_.type="hide-overlay";var $_=H_,G_=class W_ extends ui{constructor(e){super(W_.type),this.panelId=e}};G_.type="hide-panel";var to=G_,j_=class q_ extends ui{constructor(e){super(q_.type),this.tooltipData=e}};j_.type="hide-tooltip";var X_=j_,Y_=class K_ extends ui{constructor(e,t){super(K_.type,!0),this.key=e,this.originalEvent=t}};Y_.type="key-press";var io=Y_,Z_=class Q_ extends ui{constructor(e){super(Q_.type),this.progress=e}};Z_.type="load-progress";var J_=Z_,eE=class tE extends ui{constructor(e){super(tE.type),this.panorama=e}};eE.type="panorama-load";var iE=eE,nE=class sE extends ui{constructor(e){super(sE.type),this.data=e}};nE.type="panorama-loaded";var Wp=nE,rE=class oE extends ui{constructor(e,t){super(oE.type),this.panorama=e,this.error=t}};rE.type="panorama-error";var aE=rE,lE=class cE extends ui{constructor(e){super(cE.type),this.completed=e}};lE.type="transition-done";var uE=lE,dE=class hE extends ui{constructor(e){super(hE.type),this.position=e}};dE.type="position-updated";var nc=dE,fE=class pE extends ui{constructor(e){super(pE.type),this.roll=e}};fE.type="roll-updated";var sc=fE,mE=class gE extends ui{constructor(){super(gE.type)}};mE.type="ready";var rc=mE,vE=class yE extends ui{constructor(){super(yE.type)}};vE.type="render";var bE=vE,_E=class EE extends ui{constructor(e){super(EE.type),this.notificationId=e}};_E.type="show-notification";var oc=_E,wE=class xE extends ui{constructor(e){super(xE.type),this.overlayId=e}};wE.type="show-overlay";var SE=wE,TE=class ME extends ui{constructor(e){super(ME.type),this.panelId=e}};TE.type="show-panel";var no=TE,CE=class AE extends ui{constructor(e,t){super(AE.type),this.tooltip=e,this.tooltipData=t}};CE.type="show-tooltip";var PE=CE,LE=class RE extends ui{constructor(e){super(RE.type),this.size=e}};LE.type="size-updated";var ac=LE,IE=class DE extends ui{constructor(){super(DE.type)}};IE.type="stop-all";var lc=IE,OE=class NE extends ui{constructor(e){super(NE.type),this.zoomLevel=e}};OE.type="zoom-updated";var Mr=OE,Kd=class extends ui{constructor(i,e,t,n,s){super(i),this.originalEvent=e,this.object=t,this.viewerPoint=n,this.userDataKey=s}},kE=class FE extends Kd{constructor(e,t,n,s){super(FE.type,e,t,n,s)}};kE.type="enter-object";var UE=kE,zE=class BE extends Kd{constructor(e,t,n,s){super(BE.type,e,t,n,s)}};zE.type="leave-object";var jp=zE,HE=class VE extends Kd{constructor(e,t,n,s){super(VE.type,e,t,n,s)}};HE.type="hover-object";var $E=HE,Km=class{constructor(i){this.viewer=i}init(){}destroy(){}supportsTransition(i){return!1}supportsPreload(i){return!1}textureCoordsToSphericalCoords(i,e){throw new Yt("Current adapter does not support texture coordinates.")}sphericalCoordsToTextureCoords(i,e){throw new Yt("Current adapter does not support texture coordinates.")}};Km.supportsDownload=!1;function P0(i){if(i){for(const[,e]of[["_",i],...Object.entries(i)])if(e.prototype instanceof Km)return Xm(e.id,e.VERSION,"5.11.1"),e}return null}var Hl=`${co}_touchSupport`,yn={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,__maxCanvasWidth:null,isIphone:!1,get maxCanvasWidth(){return this.__maxCanvasWidth===null&&(this.__maxCanvasWidth=SI(this.maxTextureWidth)),this.__maxCanvasWidth},load(){if(!this.loaded){const i=wI();this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=!!i,this.maxTextureWidth=i?i.getParameter(i.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=xI(),this.isIphone=/iPhone/i.test(navigator.userAgent),this.loaded=!0}if(!yn.isWebGLSupported)throw new Yt("WebGL 2 is not supported.");if(yn.maxTextureWidth===0)throw new Yt("Unable to detect system capabilities")}};function wI(){try{return document.createElement("canvas").getContext("webgl2")}catch{return null}}function xI(){let i="ontouchstart"in window||navigator.maxTouchPoints>0;Hl in localStorage&&(i=localStorage[Hl]==="true");const e=new Promise(t=>{const n=()=>{window.removeEventListener("mousedown",s),window.removeEventListener("touchstart",r),clearTimeout(a)},s=()=>{n(),localStorage[Hl]=!1,t(!1)},r=()=>{n(),localStorage[Hl]=!0,t(!0)},o=()=>{n(),localStorage[Hl]=i,t(i)};window.addEventListener("mousedown",s,!1),window.addEventListener("touchstart",r,!1);const a=setTimeout(o,1e4)});return{initial:i,promise:e}}function SI(i){let e=i,t=!1;for(;e>1024&&!t;){const n=document.createElement("canvas"),s=n.getContext("2d");n.width=e,n.height=e/2,s.fillStyle="white",s.fillRect(0,0,1,1);try{s.getImageData(0,0,1,1).data[0]>0&&(t=!0)}catch{}n.width=0,n.height=0,t||(e/=2)}if(t)return e;throw new Yt("Unable to detect system capabilities")}var TI=qd({backgroundColor:null,interpolateBackground:!1,resolution:64,useXmpData:!0,blur:!1},{resolution:i=>{if(!i||!wi.isPowerOfTwo(i))throw new Yt("EquirectangularAdapter resolution must be power of two.");return i},backgroundColor:i=>(i&&yi("EquirectangularAdapter.backgroundColor is deprecated, use 'canvasBackground' main option instead."),i),interpolateBackground:i=>(i&&yi("EquirectangularAdapter.interpolateBackground is not supported anymore."),!1)}),kc=class extends Km{constructor(i,e){super(i),this.config=TI(e),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2,this.config.backgroundColor&&(i.config.canvasBackground=e.backgroundColor)}supportsTransition(){return!0}supportsPreload(){return!0}textureCoordsToSphericalCoords(i,e){if(tn(i.textureX)||tn(i.textureY))throw new Yt("Texture position is missing 'textureX' or 'textureY'");const t=(i.textureX+e.croppedX)/e.fullWidth*Math.PI*2,n=(i.textureY+e.croppedY)/e.fullHeight*Math.PI;return{yaw:t>=Math.PI?t-Math.PI:t+Math.PI,pitch:Math.PI/2-n}}sphericalCoordsToTextureCoords(i,e){const t=i.yaw/Math.PI/2*e.fullWidth,n=i.pitch/Math.PI*e.fullHeight;let s=Math.round(i.yaw<Math.PI?t+e.fullWidth/2:t-e.fullWidth/2)-e.croppedX,r=Math.round(e.fullHeight/2-n)-e.croppedY;return(s<0||s>e.croppedWidth||r<0||r>e.croppedHeight)&&(s=r=void 0),{textureX:s,textureY:r}}async loadTexture(i,e=!0,t,n=this.config.useXmpData){if(typeof i!="string"&&(typeof i!="object"||!i.path))return Promise.reject(new Yt("Invalid panorama url, are you using the right adapter?"));let s;typeof i=="string"?s={path:i,data:t}:s={data:t,...i};const r=await this.viewer.textureLoader.loadFile(s.path,e?c=>this.viewer.loader.setProgress(c):null,s.path),o=n?await this.loadXMP(r):null,a=await this.viewer.textureLoader.blobToImage(r);typeof s.data=="function"&&(s.data=s.data(a,o));const l=v_(a.width,a.height,s.data,o),u=this.createEquirectangularTexture(a);return{panorama:i,texture:u,panoData:l,cacheKey:s.path}}async loadXMP(i){const e=await this.loadBlobAsString(i),t=e.indexOf("<x:xmpmeta");if(t===-1)return null;const n=e.indexOf("</x:xmpmeta>",t);if(n===-1)return null;const s=e.substring(t,n);return s.includes("GPano:")?{fullWidth:kn(s,"FullPanoWidthPixels"),fullHeight:kn(s,"FullPanoHeightPixels"),croppedWidth:kn(s,"CroppedAreaImageWidthPixels"),croppedHeight:kn(s,"CroppedAreaImageHeightPixels"),croppedX:kn(s,"CroppedAreaLeftPixels"),croppedY:kn(s,"CroppedAreaTopPixels"),poseHeading:kn(s,"PoseHeadingDegrees",!1),posePitch:kn(s,"PosePitchDegrees",!1),poseRoll:kn(s,"PoseRollDegrees",!1),initialHeading:kn(s,"InitialViewHeadingDegrees",!1),initialPitch:kn(s,"InitialViewPitchDegrees",!1),initialFov:kn(s,"InitialHorizontalFOVDegrees",!1)}:null}loadBlobAsString(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(i)})}createEquirectangularTexture(i){if(this.config.blur||i.width>yn.maxTextureWidth){const e=Math.min(1,yn.maxCanvasWidth/i.width),t=new OffscreenCanvas(Math.floor(i.width*e),Math.floor(i.height*e)),n=t.getContext("2d");return this.config.blur&&(n.filter=`blur(${t.width/2048}px)`),n.drawImage(i,0,0,t.width,t.height),$p(t)}return $p(i)}createMesh(i){const e=i.croppedX/i.fullWidth*2*Math.PI,t=i.croppedWidth/i.fullWidth*2*Math.PI,n=i.croppedY/i.fullHeight*Math.PI,s=i.croppedHeight/i.fullHeight*Math.PI,r=new Oc(Go,Math.round(this.SPHERE_SEGMENTS/(2*Math.PI)*t),Math.round(this.SPHERE_HORIZONTAL_SEGMENTS/Math.PI*s),-Math.PI/2+e,t,n,s).scale(-1,1,1),o=new Ic({depthTest:!1,depthWrite:!1});return new ds(r,o)}setTexture(i,e){i.material.map=e.texture}setTextureOpacity(i,e){i.material.opacity=e,i.material.transparent=e<1}disposeTexture({texture:i}){i.dispose()}disposeMesh(i){i.geometry.dispose(),i.material.dispose()}};kc.id="equirectangular";kc.VERSION="5.11.1";kc.supportsDownload=!0;var GE=class extends kc{constructor(i,e){super(i,{resolution:(e==null?void 0:e.resolution)??64,useXmpData:!1})}async loadTexture(i,e){const t=await super.loadTexture(i,e,null,!1);return t.panoData=null,t}createMesh(){const i=new Oc(Go,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS).scale(-1,1,1).toNonIndexed(),e=i.getAttribute("uv"),t=i.getAttribute("normal");for(let s=0;s<e.count;s++)for(let r=0;r<3;r++){const o=s*3+r,a=t.getX(o),l=t.getY(o),u=t.getZ(o),c=.947;if(s<e.count/6){const d=a===0&&u===0?1:Math.acos(l)/Math.sqrt(a*a+u*u)*(2/Math.PI);e.setXY(o,a*(c/4)*d+1/4,u*(c/2)*d+1/2)}else{const d=a===0&&u===0?1:Math.acos(-l)/Math.sqrt(a*a+u*u)*(2/Math.PI);e.setXY(o,-a*(c/4)*d+3/4,u*(c/2)*d+1/2)}}i.rotateX(-Math.PI/2),i.rotateY(Math.PI);const n=new Ic({depthTest:!1,depthWrite:!1});return new ds(i,n)}};GE.id="dual-fisheye";GE.VERSION="5.11.1";var fo=class WE{constructor(e,t){this.parent=e,this.children=[],this.container=document.createElement("div"),this.state={visible:!0},this.viewer=e instanceof WE?e.viewer:e,this.container.className=t.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}destroy(){this.parent.container.removeChild(this.container);const e=this.parent.children.indexOf(this);e!==-1&&this.parent.children.splice(e,1),this.children.slice().forEach(t=>t.destroy()),this.children.length=0}toggle(e=!this.isVisible()){e?this.show():this.hide()}hide(e){this.container.style.display="none",this.state.visible=!1}show(e){this.container.style.display="",this.state.visible=!0}isVisible(){return this.state.visible}},MI=qd({id:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),bn=class extends fo{constructor(i,e){super(i,{className:`psv-button ${e.hoverScale?"psv-button--hover-scale":""} ${e.className||""}`}),this.state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},this.config=MI(e),e.id||(this.config.id=this.constructor.id),e.icon&&this.__setIcon(e.icon),this.state.width=this.container.offsetWidth,this.config.title?this.container.title=this.viewer.config.lang[this.config.title]??this.config.title:this.id&&this.id in this.viewer.config.lang&&(this.container.title=this.viewer.config.lang[this.id]),e.tabbable&&(this.container.tabIndex=0),this.container.addEventListener("click",t=>{this.state.enabled&&this.onClick(),t.stopPropagation()}),this.container.addEventListener("keydown",t=>{t.key===Ji.Enter&&this.state.enabled&&(this.onClick(),t.stopPropagation())})}get id(){return this.config.id}get title(){return this.container.title}get content(){return this.container.innerHTML}get width(){return this.state.width}get collapsable(){return this.config.collapsable}show(i=!0){this.isVisible()||(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),i&&this.viewer.navbar.autoSize())}hide(i=!0){this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",i&&this.viewer.navbar.autoSize())}checkSupported(){Wm(this.isSupported(),(i,e)=>{this.state&&(this.state.supported=i,e?i||this.hide():this.toggle(i))})}autoSize(){}isSupported(){return!0}toggleActive(i=!this.state.active){i!==this.state.active&&(this.state.active=i,Gd(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}disable(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}enable(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}collapse(){this.state.collapsed=!0,this.container.style.display="none"}uncollapse(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}__setIcon(i){this.container.innerHTML=i,Vm(this.container.querySelector("svg"),"psv-button-svg")}},CI=class extends bn{constructor(i,e){var t,n;super(i,{id:e.id??`psvButton-${Math.random().toString(36).substring(2)}`,className:`psv-custom-button ${e.className||""}`,hoverScale:!1,collapsable:e.collapsable!==!1,tabbable:e.tabbable!==!1,title:e.title}),this.customOnClick=e.onClick,e.content&&(typeof e.content=="string"?this.container.innerHTML=e.content:(this.container.classList.add("psv-custom-button--no-padding"),e.content.style.height="100%",(n=(t=e.content).attachViewer)==null||n.call(t,this.viewer),this.container.appendChild(e.content))),this.state.width=this.container.offsetWidth,e.disabled&&this.disable(),e.visible===!1&&this.hide()}onClick(){var i;(i=this.customOnClick)==null||i.call(this,this.viewer)}},_c=class extends bn{constructor(i){super(i,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Ms.info}),this.mode=0,this.viewer.addEventListener(ic.type,this),this.viewer.addEventListener(oc.type,this),this.viewer.addEventListener(to.type,this),this.viewer.addEventListener(no.type,this),this.viewer.addEventListener(Ln.type,this)}destroy(){this.viewer.removeEventListener(ic.type,this),this.viewer.removeEventListener(oc.type,this),this.viewer.removeEventListener(to.type,this),this.viewer.removeEventListener(no.type,this),this.viewer.removeEventListener(Ln.type,this),super.destroy()}handleEvent(i){if(i instanceof Ln){i.containsOptions("description")&&this.autoSize(!0);return}if(!this.mode)return;let e=!1;i instanceof ic?e=this.mode===1:i instanceof oc?e=this.mode===1&&i.notificationId!==on.DESCRIPTION:i instanceof to?e=this.mode===2:i instanceof no&&(e=this.mode===2&&i.panelId!==on.DESCRIPTION),e&&(this.toggleActive(!1),this.mode=0)}onClick(){this.mode?this.__close():this.__open()}hide(i){super.hide(i),this.mode&&this.__close()}autoSize(i=!1){if(i){const e=this.viewer.navbar.getButton("caption",!1),t=e&&!e.isVisible(),n=!!this.viewer.config.description;t||n?this.show(!1):this.hide(!1)}}__close(){switch(this.mode){case 1:this.viewer.notification.hide(on.DESCRIPTION);break;case 2:this.viewer.panel.hide(on.DESCRIPTION);break}}__open(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:on.DESCRIPTION,content:(this.viewer.config.caption?`<p>${this.viewer.config.caption}</p>`:"")+this.viewer.config.description})):(this.mode=1,this.viewer.notification.show({id:on.DESCRIPTION,content:this.viewer.config.caption}))}};_c.id="description";var jE=class extends bn{constructor(i){super(i,{className:"psv-download-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:Ms.download}),this.viewer.addEventListener(Ln.type,this)}destroy(){this.viewer.removeEventListener(Ln.type,this),super.destroy()}handleEvent(i){i instanceof Ln&&i.containsOptions("downloadUrl")&&this.checkSupported()}onClick(){const i=document.createElement("a");i.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,i.href.startsWith("data:")&&!this.viewer.config.downloadName?i.download="panorama."+i.href.substring(0,i.href.indexOf(";")).split("/").pop():i.download=this.viewer.config.downloadName||i.href.split("/").pop(),i.target="_blank",this.viewer.container.appendChild(i),i.click(),setTimeout(()=>{this.viewer.container.removeChild(i)},100)}checkSupported(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}};jE.id="download";var qE=class extends bn{constructor(i){super(i,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Ms.fullscreenIn,iconActive:Ms.fullscreenOut}),this.viewer.addEventListener(tc.type,this)}destroy(){this.viewer.removeEventListener(tc.type,this),super.destroy()}handleEvent(i){i instanceof tc&&this.toggleActive(i.fullscreenEnabled)}onClick(){this.viewer.toggleFullscreen()}};qE.id="fullscreen";var AI="psvButton",PI=(i,e)=>`
<div class="psv-panel-menu psv-panel-menu--stripped">
  <h1 class="psv-panel-menu-title">${Ms.menu} ${e}</h1>
  <ul class="psv-panel-menu-list">
    ${i.map(t=>`
    <li data-psv-button="${t.id}" class="psv-panel-menu-item" tabindex="0">
      <span class="psv-panel-menu-item-icon">${t.content}</span>
      <span class="psv-panel-menu-item-label">${t.title}</span>
    </li>
    `).join("")}
  </ul>
</div>
`,Qu=class extends bn{constructor(i){super(i,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:Ms.menu}),this.viewer.addEventListener(no.type,this),this.viewer.addEventListener(to.type,this),super.hide()}destroy(){this.viewer.removeEventListener(no.type,this),this.viewer.removeEventListener(to.type,this),super.destroy()}handleEvent(i){i instanceof no?this.toggleActive(i.panelId===on.MENU):i instanceof to&&this.toggleActive(!1)}onClick(){this.state.active?this.__hideMenu():this.__showMenu()}hide(i){super.hide(i),this.__hideMenu()}show(i){super.show(i),this.state.active&&this.__showMenu()}__showMenu(){this.viewer.panel.show({id:on.MENU,content:PI(this.viewer.navbar.collapsed,this.viewer.config.lang.menu),noMargin:!0,clickHandler:i=>{const e=i?i_(i,".psv-panel-menu-item"):void 0,t=e?e.dataset[AI]:void 0;t&&(this.viewer.navbar.getButton(t).onClick(),this.__hideMenu())}})}__hideMenu(){this.viewer.panel.hide(on.MENU)}};Qu.id="menu";function LI(i){let e=0;switch(i){case 0:e=90;break;case 1:e=-90;break;case 3:e=180;break;default:e=0;break}return Ms.arrow.replace("rotate(0",`rotate(${e}`)}var Fc=class extends bn{constructor(i,e){super(i,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:LI(e)}),this.direction=e,this.handler=new Xd,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(i){switch(i.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":i.key===Ji.Enter&&this.__onMouseDown();break;case"keyup":i.key===Ji.Enter&&this.__onMouseUp();break}}onClick(){}isSupported(){return jd(yn.isTouchEnabled)}__onMouseDown(){if(!this.state.enabled)return;const i={};switch(this.direction){case 0:i.pitch=!1;break;case 1:i.pitch=!0;break;case 3:i.yaw=!1;break;default:i.yaw=!0;break}this.viewer.stopAll(),this.viewer.dynamics.position.roll(i),this.handler.down()}__onMouseUp(){this.state.enabled&&this.handler.up(()=>{this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer()})}};Fc.groupId="move";var XE=class extends Fc{constructor(i){super(i,1)}};XE.id="moveDown";var YE=class extends Fc{constructor(i){super(i,2)}};YE.id="moveLeft";var KE=class extends Fc{constructor(i){super(i,3)}};KE.id="moveRight";var ZE=class extends Fc{constructor(i){super(i,0)}};ZE.id="moveUp";var Zm=class extends bn{constructor(i,e,t){super(i,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:e}),this.direction=t,this.handler=new Xd,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(i){switch(i.type){case"mousedown":this.__onMouseDown();break;case"mouseup":this.__onMouseUp();break;case"touchend":this.__onMouseUp();break;case"keydown":i.key===Ji.Enter&&this.__onMouseDown();break;case"keyup":i.key===Ji.Enter&&this.__onMouseUp();break}}onClick(){}isSupported(){return jd(yn.isTouchEnabled)}__onMouseDown(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(this.direction===1),this.handler.down())}__onMouseUp(){this.state.enabled&&this.handler.up(()=>this.viewer.dynamics.zoom.stop())}};Zm.groupId="zoom";var QE=class extends Zm{constructor(i){super(i,Ms.zoomIn,0)}};QE.id="zoomIn";var JE=class extends Zm{constructor(i){super(i,Ms.zoomOut,1)}};JE.id="zoomOut";var Qm=class extends bn{constructor(i){super(i,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1}),this.zoomRange=document.createElement("div"),this.zoomRange.className="psv-zoom-range-line",this.container.appendChild(this.zoomRange),this.zoomValue=document.createElement("div"),this.zoomValue.className="psv-zoom-range-handle",this.zoomRange.appendChild(this.zoomValue),this.slider=new __(this.container,"HORIZONTAL",e=>this.__onSliderUpdate(e)),this.mediaMinWidth=parseInt(js(this.container,"max-width"),10),this.viewer.addEventListener(Mr.type,this),this.viewer.state.ready?this.__moveZoomValue(this.viewer.getZoomLevel()):this.viewer.addEventListener(rc.type,this)}destroy(){this.slider.destroy(),this.viewer.removeEventListener(Mr.type,this),this.viewer.removeEventListener(rc.type,this),super.destroy()}handleEvent(i){i instanceof Mr?this.__moveZoomValue(i.zoomLevel):i instanceof rc&&this.__moveZoomValue(this.viewer.getZoomLevel())}onClick(){}isSupported(){return jd(yn.isTouchEnabled)}autoSize(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}__moveZoomValue(i){this.zoomValue.style.left=i/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}__onSliderUpdate(i){i.mousedown&&this.viewer.zoom(i.value*100)}};Qm.id="zoomRange";Qm.groupId="zoom";var ew=class extends E_{constructor(i){super(),this.viewer=i}init(){}destroy(){}},Jm=class extends ew{constructor(i,e){super(i),this.config=this.constructor.configParser(e)}setOption(i,e){this.setOptions({[i]:e})}setOptions(i){const e={...this.config,...i},t=this.constructor,n=t.configParser,s=t.readonlyOptions,r=t.id;for(let[o,a]of Object.entries(i)){if(!(o in n.defaults)){yi(`${r}: Unknown option "${o}"`);continue}if(s.includes(o)){yi(`${r}: Option "${o}" cannot be updated`);continue}o in n.parsers&&(a=n.parsers[o](a,{rawConfig:e,defValue:n.defaults[o]})),this.config[o]=a}}};Jm.readonlyOptions=[];function qp(i){if(i){for(const[,e]of[["_",i],...Object.entries(i)])if(e.prototype instanceof ew)return Xm(e.id,e.VERSION,"5.11.1"),e}return null}var uo={panorama:null,container:null,adapter:[kc,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:.8,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,panoData:null,requestHeaders:null,canvasBackground:"#000",rendererParameters:{alpha:!0,antialias:!0},withCredentials:!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",description:"Description",download:"Download",fullscreen:"Fullscreen",loading:"Loading...",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama cannot be loaded",webglError:"Your browser does not seem to support WebGL"},keyboard:"fullscreen",keyboardActions:{[Ji.ArrowUp]:"ROTATE_UP",[Ji.ArrowDown]:"ROTATE_DOWN",[Ji.ArrowRight]:"ROTATE_RIGHT",[Ji.ArrowLeft]:"ROTATE_LEFT",[Ji.PageUp]:"ZOOM_IN",[Ji.PageDown]:"ZOOM_OUT",[Ji.Plus]:"ZOOM_IN",[Ji.Minus]:"ZOOM_OUT"}},L0={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},Xp={container:i=>{if(!i)throw new Yt("No value given for container.");return i},adapter:(i,{defValue:e})=>{if(i?Array.isArray(i)?i=[P0(i[0]),i[1]]:i=[P0(i),null]:i=e,!i[0])throw new Yt("An undefined value was given for adapter.");if(!i[0].id)throw new Yt("Adapter has no id.");return i[0].id==="little-planet"&&(yi("LittlePlanetAdapter support has been removed, use `{ fisheye: 2, maxFov: 130 }` to achieve similar effect."),i=e),i},defaultYaw:i=>Hs(i),defaultPitch:i=>Hs(i,!0),defaultZoomLvl:i=>wi.clamp(i,0,100),minFov:(i,{rawConfig:e})=>(e.maxFov<i&&(yi("maxFov cannot be lower than minFov"),i=e.maxFov),wi.clamp(i,1,179)),maxFov:(i,{rawConfig:e})=>(i<e.minFov&&(i=e.minFov),wi.clamp(i,1,179)),moveInertia:(i,{defValue:e})=>i===!0?e:i===!1?0:i,lang:i=>({...uo.lang,...i}),keyboard:i=>i?typeof i=="object"?(yi("Use keyboardActions to configure the keyboard actions, keyboard option must be either true, false, 'fullscreen' or 'always'"),"fullscreen"):i==="always"?"always":"fullscreen":!1,keyboardActions:(i,{rawConfig:e})=>e.keyboard&&typeof e.keyboard=="object"?e.keyboard:i,fisheye:i=>i===!0?1:i===!1?0:i,requestHeaders:i=>i&&typeof i=="object"?()=>i:typeof i=="function"?i:null,rendererParameters:(i,{defValue:e})=>({...i,...e}),plugins:i=>i.map((e,t)=>{if(Array.isArray(e)?e=[qp(e[0]),e[1]]:e=[qp(e),null],!e[0])throw new Yt(`An undefined value was given for plugin ${t}.`);if(!e[0].id)throw new Yt(`Plugin ${t} has no id.`);return e}),navbar:i=>i===!1?null:i===!0?Wd(uo.navbar):typeof i=="string"?i.split(/[ ,]/):i},RI=qd(uo,Xp),Pa=class extends bn{constructor(i){super(i,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0}),this.contentWidth=0,this.state.width=0,this.contentElt=document.createElement("div"),this.contentElt.className="psv-caption-content",this.container.appendChild(this.contentElt),this.setCaption(this.viewer.config.caption)}hide(){this.contentElt.style.display="none",this.state.visible=!1}show(){this.contentElt.style.display="",this.state.visible=!0}onClick(){}setCaption(i){this.show(),this.contentElt.innerHTML=i??"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}autoSize(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}__refreshButton(){var i;(i=this.viewer.navbar.getButton(_c.id,!1))==null||i.autoSize(!0)}};Pa.id="caption";var Yp={},Sd={};function eg(i,e){if(!i.id)throw new Yt("Button id is required");if(Yp[i.id]=i,i.groupId&&(Sd[i.groupId]=Sd[i.groupId]||[]).push(i),e){const t=uo.navbar;switch(e){case"start":t.unshift(i.id);break;case"end":t.push(i.id);break;default:{const[n,s]=e.split(":"),r=t.indexOf(n);if(!n||!s||r===-1)throw new Yt(`Invalid defaultPosition ${e}`);t.splice(r+(s==="right"?1:0),0,i.id)}}}}[JE,Qm,QE,_c,Pa,jE,qE,YE,KE,ZE,XE].forEach(i=>eg(i));var II=class extends fo{constructor(i){super(i,{className:`psv-navbar ${Nc}`}),this.collapsed=[],this.state.visible=!1}show(){this.viewer.container.classList.add("psv--has-navbar"),this.container.classList.add("psv-navbar--open"),this.state.visible=!0}hide(){this.viewer.container.classList.remove("psv--has-navbar"),this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}setButtons(i){this.children.slice().forEach(e=>e.destroy()),this.children.length=0,i.indexOf(Pa.id)!==-1&&i.indexOf(_c.id)===-1&&i.splice(i.indexOf(Pa.id),0,_c.id),i.forEach(e=>{typeof e=="object"?new CI(this,e):Yp[e]?new Yp[e](this):Sd[e]?Sd[e].forEach(t=>{new t(this)}):yi(`Unknown button ${e}`)}),new Qu(this),this.children.forEach(e=>{e instanceof bn&&e.checkSupported()}),this.autoSize()}setCaption(i){this.children.some(e=>e instanceof Pa?(e.setCaption(i),!0):!1)}getButton(i,e=!0){const t=this.children.find(n=>n instanceof bn&&n.id===i);return!t&&e&&yi(`button "${i}" not found in the navbar`),t}autoSize(){var n;this.children.forEach(s=>{s instanceof bn&&s.autoSize()});const i=this.container.offsetWidth;let e=0;const t=[];this.children.forEach(s=>{s.isVisible()&&s instanceof bn&&(e+=s.width,s.collapsable&&t.push(s))}),e!==0&&(i<e&&t.length>0?(t.forEach(s=>s.collapse()),this.collapsed=t,this.getButton(Qu.id).show(!1)):i>=e&&this.collapsed.length>0&&(this.collapsed.forEach(s=>s.uncollapse()),this.collapsed=[],this.getButton(Qu.id).hide(!1)),(n=this.getButton(Pa.id,!1))==null||n.autoSize())}};Fp.enabled=!1;var Ma={enabled:!0,maxItems:10,ttl:10*60,items:{},purgeInterval:null,init(){Fp.enabled&&(yi("ThreeJS cache should be disabled"),Fp.enabled=!1),!this.purgeInterval&&this.enabled&&(this.purgeInterval=setInterval(()=>this.purge(),60*1e3))},add(i,e,t){this.enabled&&e&&(this.items[e]=this.items[e]??{files:{},lastAccess:null},this.items[e].files[i]=t,this.items[e].lastAccess=Date.now())},get(i,e){if(this.enabled&&e&&this.items[e])return this.items[e].lastAccess=Date.now(),this.items[e].files[i]},remove(i,e){this.enabled&&e&&this.items[e]&&(delete this.items[e].files[i],Object.keys(this.items[e].files).length===0&&delete this.items[e])},purge(){Object.entries(this.items).sort(([,i],[,e])=>e.lastAccess-i.lastAccess).forEach(([i,{lastAccess:e}],t)=>{t>0&&(Date.now()-e>=this.ttl*1e3||t>=this.maxItems)&&delete this.items[i]})}},DI=class extends fo{constructor(i){super(i,{className:"psv-loader-container"}),this.loader=document.createElement("div"),this.loader.className="psv-loader",this.container.appendChild(this.loader),this.size=this.loader.offsetWidth,this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("class","psv-loader-canvas"),this.canvas.setAttribute("viewBox",`0 0 ${this.size} ${this.size}`),this.loader.appendChild(this.canvas),this.textColor=js(this.loader,"color"),this.color=js(this.canvas,"color"),this.border=parseInt(js(this.loader,"--psv-loader-border"),10),this.thickness=parseInt(js(this.loader,"--psv-loader-tickness"),10),this.viewer.addEventListener(Ln.type,this),this.__updateContent(),this.hide()}destroy(){this.viewer.removeEventListener(Ln.type,this),super.destroy()}handleEvent(i){i instanceof Ln&&i.containsOptions("loadingImg","loadingTxt")&&this.__updateContent()}setProgress(i){const e=Math.min(i,99.999)/100*Math.PI*2,t=this.size/2,n=t,s=this.thickness/2+this.border,r=(this.size-this.thickness)/2-this.border,o=Math.sin(e)*r+t,a=-Math.cos(e)*r+t,l=i>50?"1":"0";this.canvas.innerHTML=`
            <circle cx="${t}" cy="${t}" r="${t}" fill="${this.color}"/>
            <path d="M ${n} ${s} A ${r} ${r} 0 ${l} 1 ${o} ${a}" 
                  fill="none" stroke="${this.textColor}" stroke-width="${this.thickness}" stroke-linecap="round"/>
        `,this.viewer.dispatchEvent(new J_(Math.round(i)))}__updateContent(){const i=this.loader.querySelector(".psv-loader-image, .psv-loader-text");i&&this.loader.removeChild(i);let e;if(this.viewer.config.loadingImg?(e=document.createElement("img"),e.className="psv-loader-image",e.src=this.viewer.config.loadingImg):this.viewer.config.loadingTxt!==null&&(e=document.createElement("div"),e.className="psv-loader-text",e.innerHTML=this.viewer.config.loadingTxt||this.viewer.config.lang.loading),e){const t=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));e.style.maxWidth=t+"px",e.style.maxHeight=t+"px",this.loader.appendChild(e)}}},OI=class extends fo{constructor(i){super(i,{className:"psv-notification"}),this.state={visible:!1,contentId:null,timeout:null},this.content=document.createElement("div"),this.content.className="psv-notification-content",this.container.appendChild(this.content),this.content.addEventListener("click",()=>this.hide())}isVisible(i){return this.state.visible&&(!i||!this.state.contentId||this.state.contentId===i)}toggle(){throw new Yt("Notification cannot be toggled")}show(i){this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),typeof i=="string"&&(i={content:i}),this.state.contentId=i.id||null,this.content.innerHTML=i.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new oc(i.id)),i.timeout&&(this.state.timeout=setTimeout(()=>this.hide(this.state.contentId),i.timeout))}hide(i){if(this.isVisible(i)){const e=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new ic(e))}}},NI=class extends fo{constructor(i){super(i,{className:`psv-overlay ${Nc}`}),this.state={visible:!1,contentId:null,dissmisable:!0},this.image=document.createElement("div"),this.image.className="psv-overlay-image",this.container.appendChild(this.image),this.title=document.createElement("div"),this.title.className="psv-overlay-title",this.container.appendChild(this.title),this.text=document.createElement("div"),this.text.className="psv-overlay-text",this.container.appendChild(this.text),this.container.addEventListener("click",this),this.viewer.addEventListener(io.type,this),super.hide()}destroy(){this.viewer.removeEventListener(io.type,this),super.destroy()}handleEvent(i){i.type==="click"?this.isVisible()&&this.state.dissmisable&&(this.hide(),i.stopPropagation()):i instanceof io&&this.isVisible()&&this.state.dissmisable&&i.key===Ji.Escape&&(this.hide(),i.preventDefault())}isVisible(i){return this.state.visible&&(!i||!this.state.contentId||this.state.contentId===i)}toggle(){throw new Yt("Overlay cannot be toggled")}show(i){typeof i=="string"&&(i={title:i}),this.state.contentId=i.id||null,this.state.dissmisable=i.dissmisable!==!1,this.image.innerHTML=i.image||"",this.title.innerHTML=i.title||"",this.text.innerHTML=i.text||"",super.show(),this.viewer.dispatchEvent(new SE(i.id))}hide(i){if(this.isVisible(i)){const e=this.state.contentId;super.hide(),this.state.contentId=null,this.viewer.dispatchEvent(new $_(e))}}},kI=200,Af="psv-panel-content--no-interaction",FI=class extends fo{constructor(i){super(i,{className:`psv-panel ${Nc}`}),this.state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};const e=document.createElement("div");e.className="psv-panel-resizer",this.container.appendChild(e);const t=document.createElement("div");t.className="psv-panel-close-button",t.innerHTML=Ms.close,t.title=i.config.lang.close,this.container.appendChild(t),this.content=document.createElement("div"),this.content.className="psv-panel-content",this.container.appendChild(this.content),this.container.addEventListener("wheel",n=>n.stopPropagation()),t.addEventListener("click",()=>this.hide()),e.addEventListener("mousedown",this),e.addEventListener("touchstart",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this),this.viewer.container.addEventListener("mousemove",this),this.viewer.container.addEventListener("touchmove",this),this.viewer.addEventListener(io.type,this)}destroy(){this.viewer.removeEventListener(io.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(i){switch(i.type){case"mousedown":this.__onMouseDown(i);break;case"touchstart":this.__onTouchStart(i);break;case"mousemove":this.__onMouseMove(i);break;case"touchmove":this.__onTouchMove(i);break;case"mouseup":this.__onMouseUp(i);break;case"touchend":this.__onTouchEnd(i);break;case io.type:this.__onKeyPress(i);break}}isVisible(i){return this.state.visible&&(!i||!this.state.contentId||this.state.contentId===i)}toggle(){throw new Yt("Panel cannot be toggled")}show(i){typeof i=="string"&&(i={content:i});const e=this.isVisible(i.id);this.state.contentId=i.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),i.id&&this.state.width[i.id]?this.container.style.width=this.state.width[i.id]:i.width?this.container.style.width=i.width:this.container.style.width=null,this.content.innerHTML=i.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),Gd(this.content,"psv-panel-content--no-margin",i.noMargin===!0),i.clickHandler&&(this.state.clickHandler=t=>{i.clickHandler(bd(t))},this.state.keyHandler=t=>{t.key===Ji.Enter&&i.clickHandler(bd(t))},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),e||setTimeout(()=>{var t;(t=this.content.querySelector("a,button,[tabindex]"))==null||t.focus()},300)),this.viewer.dispatchEvent(new no(i.id))}hide(i){if(this.isVisible(i)){const e=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.state.clickHandler=null),this.viewer.dispatchEvent(new to(e))}}__onMouseDown(i){i.stopPropagation(),this.__startResize(i.clientX,i.clientY)}__onTouchStart(i){if(i.stopPropagation(),i.touches.length===1){const e=i.touches[0];this.__startResize(e.clientX,e.clientY)}}__onMouseUp(i){this.state.mousedown&&(i.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(Af))}__onTouchEnd(i){this.state.mousedown&&(i.stopPropagation(),i.touches.length===0&&(this.state.mousedown=!1,this.content.classList.remove(Af)))}__onMouseMove(i){this.state.mousedown&&(i.stopPropagation(),this.__resize(i.clientX,i.clientY))}__onTouchMove(i){if(this.state.mousedown){const e=i.touches[0];this.__resize(e.clientX,e.clientY)}}__onKeyPress(i){this.isVisible()&&i.key===Ji.Escape&&(this.hide(),i.preventDefault())}__startResize(i,e){this.state.mouseX=i,this.state.mouseY=e,this.state.mousedown=!0,this.content.classList.add(Af)}__resize(i,e){const t=i,n=e,s=Math.max(kI,this.container.offsetWidth-(t-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=s),this.container.style.width=s,this.state.mouseX=t,this.state.mouseY=n}},UI=class extends fo{constructor(i,e){super(i,{className:"psv-tooltip"}),this.state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null,hideTimeout:null},this.content=document.createElement("div"),this.content.className="psv-tooltip-content",this.container.appendChild(this.content),this.arrow=document.createElement("div"),this.arrow.className="psv-tooltip-arrow",this.container.appendChild(this.arrow),this.container.addEventListener("transitionend",this),this.container.addEventListener("touchdown",t=>t.stopPropagation()),this.container.addEventListener("mousedown",t=>t.stopPropagation()),this.container.style.top="-1000px",this.container.style.left="-1000px",this.show(e)}handleEvent(i){i.type==="transitionend"&&this.__onTransitionEnd(i)}destroy(){clearTimeout(this.state.hideTimeout),delete this.state.data,super.destroy()}toggle(){throw new Yt("Tooltip cannot be toggled")}show(i){if(this.state.state!==0)throw new Yt("Initialized tooltip cannot be re-initialized");i.className&&Vm(this.container,i.className),i.style&&Object.assign(this.container.style,i.style),this.state.state=3,this.update(i.content,i),this.state.data=i.data,this.state.state=1,this.viewer.dispatchEvent(new PE(this,this.state.data)),this.__waitImages()}update(i,e){this.content.innerHTML=i;const t=this.container.getBoundingClientRect();this.state.width=t.right-t.left,this.state.height=t.bottom-t.top,this.state.arrow=parseInt(js(this.arrow,"border-top-width"),10),this.state.border=parseInt(js(this.container,"border-top-left-radius"),10),this.move(e??this.state.config),this.__waitImages()}move(i){var a;if(this.state.state!==1&&this.state.state!==3)throw new Yt("Uninitialized tooltip cannot be moved");i.box=i.box??((a=this.state.config)==null?void 0:a.box)??{width:0,height:0},this.state.config=i;const e=this.container,t=this.arrow,n={posClass:f_(i.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(n,i);let s=null,r=null;if(n.top<0?s="bottom":n.top+n.height>this.viewer.state.size.height&&(s="top"),n.left<0?r="right":n.left+n.width>this.viewer.state.size.width&&(r="left"),r||s){const l=qm(n.posClass);s&&(n.posClass[l?0:1]=s),r&&(n.posClass[l?1:0]=r),this.__computeTooltipPosition(n,i)}e.style.top=n.top+"px",e.style.left=n.left+"px",t.style.top=n.arrowTop+"px",t.style.left=n.arrowLeft+"px";const o=n.posClass.join("-");o!==this.state.pos&&(e.classList.remove(`psv-tooltip--${this.state.pos}`),this.state.pos=o,e.classList.add(`psv-tooltip--${this.state.pos}`))}hide(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new X_(this.state.data));const i=parseFloat(js(this.container,"transition-duration"));this.state.hideTimeout=setTimeout(()=>{this.destroy()},i*2)}__onTransitionEnd(i){if(i.propertyName==="transform")switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy();break}}__computeTooltipPosition(i,e){const t=this.state.arrow,n=e.top,s=i.height,r=e.left,o=i.width,a=t+this.state.border,l=e.box.width/2+t*2,u=e.box.height/2+t*2;switch(i.posClass.join("-")){case"top-left":i.top=n-u-s,i.left=r+a-o,i.arrowTop=s,i.arrowLeft=o-a-t;break;case"top-center":i.top=n-u-s,i.left=r-o/2,i.arrowTop=s,i.arrowLeft=o/2-t;break;case"top-right":i.top=n-u-s,i.left=r-a,i.arrowTop=s,i.arrowLeft=t;break;case"bottom-left":i.top=n+u,i.left=r+a-o,i.arrowTop=-t*2,i.arrowLeft=o-a-t;break;case"bottom-center":i.top=n+u,i.left=r-o/2,i.arrowTop=-t*2,i.arrowLeft=o/2-t;break;case"bottom-right":i.top=n+u,i.left=r-a,i.arrowTop=-t*2,i.arrowLeft=t;break;case"left-top":i.top=n+a-s,i.left=r-l-o,i.arrowTop=s-a-t,i.arrowLeft=o;break;case"center-left":i.top=n-s/2,i.left=r-l-o,i.arrowTop=s/2-t,i.arrowLeft=o;break;case"left-bottom":i.top=n-a,i.left=r-l-o,i.arrowTop=t,i.arrowLeft=o;break;case"right-top":i.top=n+a-s,i.left=r+l,i.arrowTop=s-a-t,i.arrowLeft=-t*2;break;case"center-right":i.top=n-s/2,i.left=r+l,i.arrowTop=s/2-t,i.arrowLeft=-t*2;break;case"right-bottom":i.top=n-a,i.left=r+l,i.arrowTop=t,i.arrowLeft=-t*2;break}}__waitImages(){const i=this.content.querySelectorAll("img");if(i.length>0){const e=[];i.forEach(t=>{t.complete||e.push(new Promise(n=>{t.onload=n,t.onerror=n}))}),e.length&&Promise.all(e).then(()=>{if(this.state.state===1||this.state.state===3){const t=this.container.getBoundingClientRect();this.state.width=t.right-t.left,this.state.height=t.bottom-t.top,this.move(this.state.config)}})}}},zI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/><!--Created by Shastry from the Noun Project--></svg>
`,Uc=class{constructor(i){this.viewer=i,this.config=i.config,this.state=i.state}destroy(){}},ws=new xe,Nu=new Zs(0,0,0,"ZXY"),BI=class extends Uc{constructor(i){super(i)}fovToZoomLevel(i){const e=Math.round((i-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return wi.clamp(e-2*(e-50),0,100)}zoomLevelToFov(i){return this.config.maxFov+i/100*(this.config.minFov-this.config.maxFov)}vFovToHFov(i){return wi.radToDeg(2*Math.atan(Math.tan(wi.degToRad(i)/2)*this.state.aspect))}hFovToVFov(i){return wi.radToDeg(2*Math.atan(Math.tan(wi.degToRad(i)/2)/this.state.aspect))}getAnimationProperties(i,e,t){const n=!tn(e),s=!tn(t),r={};let o=null;if(n){const a=this.viewer.getPosition(),l=Jb(a.yaw,e.yaw);r.yaw={start:a.yaw,end:a.yaw+l},r.pitch={start:a.pitch,end:e.pitch},o=Vp(i,e_(a,e))}if(s){const a=this.viewer.getZoomLevel(),l=Math.abs(t-a);r.zoom={start:a,end:t},o===null&&(o=Vp(i,Math.PI/4*l/100))}return o===null?typeof i=="number"?o=i:o=zp:o=Math.max(zp,o),{duration:o,properties:r}}textureCoordsToSphericalCoords(i){var t;if(!((t=this.state.textureData)!=null&&t.panoData))throw new Yt("Current adapter does not support texture coordinates or no texture has been loaded");const e=this.viewer.adapter.textureCoordsToSphericalCoords(i,this.state.textureData.panoData);return!Nu.equals(this.viewer.renderer.panoramaPose)||!Nu.equals(this.viewer.renderer.sphereCorrection)?(this.sphericalCoordsToVector3(e,ws),ws.applyEuler(this.viewer.renderer.panoramaPose),ws.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(ws)):e}sphericalCoordsToTextureCoords(i){var e;if(!((e=this.state.textureData)!=null&&e.panoData))throw new Yt("Current adapter does not support texture coordinates or no texture has been loaded");return(!Nu.equals(this.viewer.renderer.panoramaPose)||!Nu.equals(this.viewer.renderer.sphereCorrection))&&(this.sphericalCoordsToVector3(i,ws),Gp(ws,this.viewer.renderer.sphereCorrection),Gp(ws,this.viewer.renderer.panoramaPose),i=this.vector3ToSphericalCoords(ws)),this.viewer.adapter.sphericalCoordsToTextureCoords(i,this.state.textureData.panoData)}sphericalCoordsToVector3(i,e,t=Go){return e||(e=new xe),e.x=t*-Math.cos(i.pitch)*Math.sin(i.yaw),e.y=t*Math.sin(i.pitch),e.z=t*Math.cos(i.pitch)*Math.cos(i.yaw),e}vector3ToSphericalCoords(i){const e=Math.acos(i.y/Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z)),t=Math.atan2(i.x,i.z);return{yaw:t<0?-t:Math.PI*2-t,pitch:Math.PI/2-e}}viewerCoordsToVector3(i){const e=this.viewer.renderer.getIntersections(i).filter(t=>t.object.userData[co]);return e.length?e[0].point:null}viewerCoordsToSphericalCoords(i){const e=this.viewerCoordsToVector3(i);return e?this.vector3ToSphericalCoords(e):null}vector3ToViewerCoords(i){const e=i.clone();return e.project(this.viewer.renderer.camera),{x:Math.round((e.x+1)/2*this.state.size.width),y:Math.round((1-e.y)/2*this.state.size.height)}}sphericalCoordsToViewerCoords(i){return this.sphericalCoordsToVector3(i,ws),this.vector3ToViewerCoords(ws)}isPointVisible(i){let e,t;if(i instanceof xe)e=i,t=this.vector3ToViewerCoords(i);else if(jm(i))e=this.sphericalCoordsToVector3(i,ws),t=this.vector3ToViewerCoords(e);else return!1;return e.dot(this.viewer.state.direction)>0&&t.x>=0&&t.x<=this.viewer.state.size.width&&t.y>=0&&t.y<=this.viewer.state.size.height}cleanPosition(i){if("yaw"in i||"pitch"in i){if(!("yaw"in i)||!("pitch"in i))throw new Yt("Position is missing 'yaw' or 'pitch'");return{yaw:Hs(i.yaw),pitch:Hs(i.pitch,!0)}}else return this.textureCoordsToSphericalCoords(i)}cleanSphereCorrection(i){return{pan:Hs((i==null?void 0:i.pan)||0),tilt:Hs((i==null?void 0:i.tilt)||0,!0),roll:Hs((i==null?void 0:i.roll)||0,!0,!1)}}cleanPanoramaPose(i){return{pan:wi.degToRad((i==null?void 0:i.poseHeading)||0),tilt:wi.degToRad((i==null?void 0:i.posePitch)||0),roll:wi.degToRad((i==null?void 0:i.poseRoll)||0)}}cleanPanoramaOptions(i,e){return e!=null&&e.isEquirectangular&&(tn(i.zoom)&&!tn(e.initialFov)&&(i={...i,zoom:this.fovToZoomLevel(this.hFovToVFov(e.initialFov))}),tn(i.position)&&!tn(e.initialHeading)&&!tn(e.initialPitch)&&(i={...i,position:{yaw:Hs(e.initialHeading),pitch:Hs(e.initialPitch,!0)}})),i}},HI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/><!--Created by AomAm from the Noun Project--></svg>
`,VI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/><!-- Created by Icon Island from the Noun Project --></svg>
`,Zd=class tw{constructor(){this.$=tw.IDLE}is(...e){return e.some(t=>this.$&t)}set(e){this.$=e}add(e){this.$|=e}remove(e){this.$&=~e}};Zd.IDLE=0;Zd.CLICK=1;Zd.MOVING=2;var zi=Zd,$I=class extends Uc{constructor(i){super(i),this.data={startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,pinchDist:0,moveDelta:{yaw:0,pitch:0,zoom:0},accumulatorFactor:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},this.step=new zi,this.keyHandler=new Xd,this.resizeObserver=new ResizeObserver($m(()=>this.viewer.autoSize(),50)),this.moveThreshold=Wb*yn.pixelRatio}init(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener("fullscreenchange",this),this.resizeObserver.observe(this.viewer.container),this.viewer.addEventListener(ec.type,this),this.viewer.addEventListener(lc.type,this)}destroy(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener("fullscreenchange",this),this.resizeObserver.disconnect(),this.viewer.removeEventListener(ec.type,this),this.viewer.removeEventListener(lc.type,this),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),super.destroy()}handleEvent(i){switch(i.type){case"keydown":this.__onKeyDown(i);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(i);break;case"mouseup":this.__onMouseUp(i);break;case"touchmove":this.__onTouchMove(i);break;case"touchend":this.__onTouchEnd(i);break;case"fullscreenchange":this.__onFullscreenChange();break;case ec.type:this.__applyMoveDelta();break;case lc.type:this.__clearMoveDelta();break}if(!n_(i,"."+Nc))switch(i.type){case"mousedown":this.__onMouseDown(i);break;case"touchstart":this.__onTouchStart(i);break;case"wheel":this.__onMouseWheel(i);break}}__onKeyDown(i){var t;if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=i.key===Ji.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(on.CTRL_ZOOM))),!this.viewer.dispatchEvent(new io(i.key,i))||!this.state.keyboardEnabled)return;const e=(t=this.config.keyboardActions)==null?void 0:t[i.key];if(typeof e=="function"){e(this.viewer,i),i.preventDefault();return}if(!(i.ctrlKey||i.altKey||i.shiftKey||i.metaKey)&&e&&!this.keyHandler.pending){switch(e!=="ZOOM_IN"&&e!=="ZOOM_OUT"&&this.viewer.stopAll(),e){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0);break}this.keyHandler.down(e),i.preventDefault()}}__onKeyUp(){this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up(i=>{i==="ZOOM_IN"||i==="ZOOM_OUT"?this.viewer.dynamics.zoom.stop():(this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer())})}__onMouseDown(i){this.step.add(zi.CLICK),this.data.startMouseX=i.clientX,this.data.startMouseY=i.clientY}__onMouseUp(i){this.step.is(zi.CLICK,zi.MOVING)&&this.__stopMove(i.clientX,i.clientY,i,i.button===2)}__onMouseMove(i){this.config.mousemove&&this.step.is(zi.CLICK,zi.MOVING)&&(i.preventDefault(),this.__doMove(i.clientX,i.clientY)),this.__handleObjectsEvents(i)}__onTouchStart(i){i.touches.length===1?(this.step.add(zi.CLICK),this.data.startMouseX=i.touches[0].clientX,this.data.startMouseY=i.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout(()=>{const e=i.touches[0];this.__stopMove(e.clientX,e.clientY,i,!0),this.data.longtouchTimeout=null},qb))):i.touches.length===2&&(this.step.set(zi.IDLE),this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(i),i.preventDefault()))}__onTouchEnd(i){if(this.__cancelLongTouch(),this.step.is(zi.CLICK,zi.MOVING)){if(i.preventDefault(),this.__cancelTwoFingersOverlay(),i.touches.length===1)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(i.touches.length===0){const e=i.changedTouches[0];this.__stopMove(e.clientX,e.clientY,i)}}}__onTouchMove(i){if(this.__cancelLongTouch(),!!this.config.mousemove)if(i.touches.length===1){if(this.config.touchmoveTwoFingers)this.step.is(zi.CLICK)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout(()=>{this.viewer.overlay.show({id:on.TWO_FINGERS,image:HI,title:this.config.lang.twoFingers})},Xb));else if(this.step.is(zi.CLICK,zi.MOVING)){i.preventDefault();const e=i.touches[0];this.__doMove(e.clientX,e.clientY)}}else this.__doMoveZoom(i),this.__cancelTwoFingersOverlay()}__cancelLongTouch(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}__cancelTwoFingersOverlay(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(on.TWO_FINGERS))}__onMouseWheel(i){if(!this.config.mousewheel||!i.deltaY)return;if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown){this.viewer.overlay.show({id:on.CTRL_ZOOM,image:VI,title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),this.data.ctrlZoomTimeout=setTimeout(()=>this.viewer.overlay.hide(on.CTRL_ZOOM),Yb);return}i.preventDefault(),i.stopPropagation();const e=i.deltaY/Math.abs(i.deltaY)*5*this.config.zoomSpeed;e!==0&&this.viewer.dynamics.zoom.step(-e,5)}__onFullscreenChange(){const i=this.viewer.isFullscreenEnabled();this.config.keyboard==="fullscreen"&&(i?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new tc(i))}__resetMove(){this.step.set(zi.IDLE),this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0}__startMoveZoom(i){this.viewer.stopAll(),this.__resetMove();const e=Bp(i);this.step.set(zi.MOVING),this.data.accumulatorFactor=this.config.moveInertia,{distance:this.data.pinchDist,center:{x:this.data.mouseX,y:this.data.mouseY}}=e}__stopMove(i,e,t,n=!1){this.step.is(zi.CLICK)&&!this.__moveThresholdReached(i,e)&&this.__doClick(i,e,t,n),this.config.moveInertia&&(this.data.accumulatorFactor=Math.pow(this.config.moveInertia,.5)),this.__resetMove(),this.viewer.resetIdleTimer()}__doClick(i,e,t,n=!1){const s=this.viewer.container.getBoundingClientRect(),r=i-s.left,o=e-s.top,a=this.viewer.renderer.getIntersections({x:r,y:o}),l=a.find(u=>u.object.userData[co]);if(l){const u=this.viewer.dataHelper.vector3ToSphericalCoords(l.point),c={rightclick:n,originalEvent:t,target:bd(t),clientX:i,clientY:e,viewerX:r,viewerY:o,yaw:u.yaw,pitch:u.pitch,objects:a.map(d=>d.object).filter(d=>!d.userData[co])};try{const d=this.viewer.dataHelper.sphericalCoordsToTextureCoords(c);Object.assign(c,d)}catch{}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-c.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-c.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new k_(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new R_(c)),this.data.dblclickData=Wd(c),this.data.dblclickTimeout=setTimeout(()=>{this.data.dblclickTimeout=null,this.data.dblclickData=null},jb))}}__handleObjectsEvents(i){if(!c_(this.state.objectsObservers)&&i.composedPath().includes(this.viewer.container)){const e=s_(this.viewer.container),t={x:i.clientX-e.x,y:i.clientY-e.y},n=this.viewer.renderer.getIntersections(t),s=(r,o,a)=>{this.viewer.dispatchEvent(new a(i,r,t,o))};for(const[r,o]of Object.entries(this.state.objectsObservers)){const a=n.find(l=>l.object.userData[r]);a?(o&&a.object!==o&&(s(o,r,jp),this.state.objectsObservers[r]=null),o?s(a.object,r,$E):(this.state.objectsObservers[r]=a.object,s(a.object,r,UE))):o&&(s(o,r,jp),this.state.objectsObservers[r]=null)}}}__doMove(i,e){if(this.step.is(zi.CLICK)&&this.__moveThresholdReached(i,e))this.viewer.stopAll(),this.__resetMove(),this.step.set(zi.MOVING),this.data.mouseX=i,this.data.mouseY=e,this.data.accumulatorFactor=this.config.moveInertia;else if(this.step.is(zi.MOVING)){const t=(i-this.data.mouseX)*Math.cos(this.state.roll)-(e-this.data.mouseY)*Math.sin(this.state.roll),n=(e-this.data.mouseY)*Math.cos(this.state.roll)+(i-this.data.mouseX)*Math.sin(this.state.roll),s={yaw:this.config.moveSpeed*(t/this.state.size.width)*wi.degToRad(this.state.hFov),pitch:this.config.moveSpeed*(n/this.state.size.height)*wi.degToRad(this.state.vFov)};this.data.moveDelta.yaw+=s.yaw,this.data.moveDelta.pitch+=s.pitch,this.data.mouseX=i,this.data.mouseY=e}}__moveThresholdReached(i,e){return Math.abs(i-this.data.startMouseX)>=this.moveThreshold||Math.abs(e-this.data.startMouseY)>=this.moveThreshold}__doMoveZoom(i){if(this.step.is(zi.MOVING)){i.preventDefault();const e=Bp(i);this.__doMove(e.center.x,e.center.y),this.data.moveDelta.zoom+=this.config.zoomSpeed*((e.distance-this.data.pinchDist)/yn.pixelRatio),this.data.pinchDist=e.distance}}__applyMoveDelta(){if(Math.abs(this.data.moveDelta.yaw)>0||Math.abs(this.data.moveDelta.pitch)>0){const e=this.viewer.getPosition();this.viewer.rotate({yaw:e.yaw-this.data.moveDelta.yaw*(1-this.config.moveInertia),pitch:e.pitch+this.data.moveDelta.pitch*(1-this.config.moveInertia)}),this.data.moveDelta.yaw*=this.data.accumulatorFactor,this.data.moveDelta.pitch*=this.data.accumulatorFactor,Math.abs(this.data.moveDelta.yaw)<=.001&&(this.data.moveDelta.yaw=0),Math.abs(this.data.moveDelta.pitch)<=.001&&(this.data.moveDelta.pitch=0)}if(Math.abs(this.data.moveDelta.zoom)>0){const e=this.viewer.getZoomLevel();this.viewer.zoom(e+this.data.moveDelta.zoom*(1-this.config.moveInertia)),this.data.moveDelta.zoom*=this.config.moveInertia,Math.abs(this.data.moveDelta.zoom)<=.001&&(this.data.moveDelta.zoom=0)}}__clearMoveDelta(){this.data.moveDelta.yaw=0,this.data.moveDelta.pitch=0,this.data.moveDelta.zoom=0}};ai.enabled=!1;var ku=new ei,R0=new Ai,I0=new rl,GI=class extends Uc{constructor(i){super(i),this.frustumNeedsUpdate=!0,this.renderer=new eI(this.config.rendererParameters),this.renderer.setPixelRatio(yn.pixelRatio),this.renderer.outputColorSpace=Lr,this.renderer.domElement.className="psv-canvas",this.renderer.domElement.style.background=this.config.canvasBackground,this.scene=new E0,this.camera=new os(50,16/9,.1,2*Go),this.camera.matrixAutoUpdate=!1;const e=new ds(new Oc(Go).scale(-1,1,1),new Ic({opacity:0,transparent:!0,depthTest:!1,depthWrite:!1}));e.userData={[co]:!0},this.scene.add(e),this.raycaster=new rI,this.frustum=new Um,this.container=document.createElement("div"),this.container.className="psv-canvas-container",this.container.appendChild(this.renderer.domElement),this.viewer.container.appendChild(this.container),this.viewer.addEventListener(ac.type,this),this.viewer.addEventListener(Mr.type,this),this.viewer.addEventListener(nc.type,this),this.viewer.addEventListener(sc.type,this),this.viewer.addEventListener(Ln.type,this),this.hide()}get panoramaPose(){return this.mesh.rotation}get sphereCorrection(){return this.meshContainer.rotation}init(){this.show(),this.renderer.setAnimationLoop(i=>this.__renderLoop(i))}destroy(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.renderer.dispose(),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(ac.type,this),this.viewer.removeEventListener(Mr.type,this),this.viewer.removeEventListener(nc.type,this),this.viewer.removeEventListener(sc.type,this),this.viewer.removeEventListener(Ln.type,this),super.destroy()}handleEvent(i){switch(i.type){case ac.type:this.__onSizeUpdated();break;case Mr.type:this.__onZoomUpdated();break;case nc.type:this.__onPositionUpdated();break;case sc.type:this.__onPositionUpdated();break;case Ln.type:i.containsOptions("fisheye")&&this.__onPositionUpdated(),i.containsOptions("canvasBackground")&&(this.renderer.domElement.style.background=this.config.canvasBackground);break}}hide(){this.container.style.opacity="0"}show(){this.container.style.opacity="1"}setCustomRenderer(i){i?this.customRenderer=i(this.renderer):this.customRenderer=null,this.viewer.needsUpdate()}__onSizeUpdated(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onZoomUpdated(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onPositionUpdated(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.rotateZ(-this.state.roll),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__renderLoop(i){const e=this.timestamp?i-this.timestamp:0;this.timestamp=i,this.viewer.dispatchEvent(new ec(i,e)),this.viewer.dynamics.update(e),(this.state.needsUpdate||this.state.continuousUpdateCount>0)&&(this.state.needsUpdate=!1,(this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new bE))}setTexture(i){this.meshContainer||(this.meshContainer=new Aa,this.scene.add(this.meshContainer)),this.state.textureData&&this.viewer.adapter.disposeTexture(this.state.textureData),this.mesh&&(this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh)),this.mesh=this.viewer.adapter.createMesh(i.panoData),this.viewer.adapter.setTexture(this.mesh,i,!1),this.meshContainer.add(this.mesh),this.state.textureData=i,this.viewer.needsUpdate()}setPanoramaPose(i,e=this.mesh){const t=this.viewer.dataHelper.cleanPanoramaPose(i),n=(t.pan?1:0)+(t.tilt?1:0)+(t.roll?1:0);!La.useNewAnglesOrder&&n>1&&(yi("'panoData' Euler angles have changed in version 5.11.0."),yi("Remove your 'useNewAnglesOrder' override to remove this warning (you might have to adapt your poseHeading/posePitch/poseRoll parameters).")),La.useNewAnglesOrder?e.rotation.set(t.tilt,t.pan,t.roll,"YXZ"):e.rotation.set(-t.tilt,-t.pan,-t.roll,"ZXY")}setSphereCorrection(i,e=this.meshContainer){const t=this.viewer.dataHelper.cleanSphereCorrection(i),n=(t.pan?1:0)+(t.tilt?1:0)+(t.roll?1:0);!La.useNewAnglesOrder&&n>1&&(yi("'sphereCorrection' Euler angles have changed in version 5.11.0."),yi("Remove your 'useNewAnglesOrder' override to remove this warning (you might have to adapt your poseHeading/posePitch/poseRoll parameters).")),La.useNewAnglesOrder?e.rotation.set(t.tilt,t.pan,t.roll,"YXZ"):e.rotation.set(t.tilt,t.pan,t.roll,"ZXY")}transition(i,e){const t=!tn(e.position),n=!tn(e.zoom),s=new Ym(t?this.viewer.dataHelper.cleanPosition(e.position):void 0,e.zoom);this.viewer.dispatchEvent(s);const r=new Aa,o=this.viewer.adapter.createMesh(i.panoData);if(this.viewer.adapter.setTexture(o,i,!0),this.viewer.adapter.setTextureOpacity(o,0),this.setPanoramaPose(i.panoData,o),this.setSphereCorrection(e.sphereCorrection,r),t&&e.transition==="fade-only"){const c=this.viewer.getPosition(),d=new xe(0,1,0);r.rotateOnWorldAxis(d,s.position.yaw-c.yaw);const h=new xe(0,1,0).cross(this.camera.getWorldDirection(new xe)).normalize();r.rotateOnWorldAxis(h,s.position.pitch-c.pitch)}r.add(o),this.scene.add(r),this.renderer.setRenderTarget(new ao),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);const{duration:a,properties:l}=this.viewer.dataHelper.getAnimationProperties(e.speed,e.transition===!0?s.position:null,s.zoomLevel),u=new xd({properties:{...l,opacity:{start:0,end:1}},duration:a,easing:"inOutCubic",onTick:c=>{this.viewer.adapter.setTextureOpacity(o,c.opacity),t&&e.transition===!0&&this.viewer.dynamics.position.setValue({yaw:c.yaw,pitch:c.pitch}),n&&this.viewer.dynamics.zoom.setValue(c.zoom),this.viewer.needsUpdate()}});return u.then(c=>{r.remove(o),this.scene.remove(r),c?(this.viewer.adapter.disposeTexture(this.state.textureData),this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh),this.mesh=o,this.meshContainer.add(o),this.state.textureData=i,this.setPanoramaPose(i.panoData),this.setSphereCorrection(e.sphereCorrection),t&&e.transition==="fade-only"&&this.viewer.rotate(e.position)):(this.viewer.adapter.disposeTexture(i),this.viewer.adapter.disposeMesh(o))}),u}getIntersections(i){var t;ku.x=2*i.x/this.state.size.width-1,ku.y=-2*i.y/this.state.size.height+1,this.raycaster.setFromCamera(ku,this.camera);const e=this.raycaster.intersectObjects(this.scene.children,!0).filter(n=>n.object.visible).filter(n=>n.object.isMesh&&!!n.object.userData);return(t=this.customRenderer)!=null&&t.getIntersections&&e.push(...this.customRenderer.getIntersections(this.raycaster,ku)),e}isObjectVisible(i){if(!i)return!1;if(this.frustumNeedsUpdate&&(R0.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.frustum.setFromProjectionMatrix(R0),this.frustumNeedsUpdate=!1),i.isVector3)return this.frustum.containsPoint(i);if(i.isMesh&&i.geometry){const e=i;return e.geometry.boundingBox||e.geometry.computeBoundingBox(),I0.copy(e.geometry.boundingBox).applyMatrix4(e.matrixWorld),this.frustum.intersectsBox(I0)}else return i.isObject3D?this.frustum.intersectsObject(i):!1}addObject(i){this.scene.add(i)}removeObject(i){this.scene.remove(i)}cleanScene(i){const e=t=>{var n;(n=t.map)==null||n.dispose(),t.uniforms&&Object.values(t.uniforms).forEach(s=>{var r,o;(o=(r=s.value)==null?void 0:r.dispose)==null||o.call(r)}),t.dispose()};i.traverse(t=>{var n,s;(n=t.geometry)==null||n.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(r=>{e(r)}):e(t.material)),t instanceof E0||(s=t.dispose)==null||s.call(t),t!==i&&this.cleanScene(t)})}},WI=class extends Bm{load(i,e,t,n,s){const r=new Request(i,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(r,{signal:s}).then(o=>{if(o.status===200||o.status===0){const a=o.body.getReader(),l=o.headers.get("Content-Length")||o.headers.get("X-File-Size"),u=l?parseInt(l):0,c=u!==0;let d=0;const h=new ReadableStream({start(f){m();function m(){a.read().then(({done:b,value:v})=>{if(b)f.close();else{d+=v.byteLength;const g=new ProgressEvent("progress",{lengthComputable:c,loaded:d,total:u});t(g),f.enqueue(v),m()}}).catch(b=>{n(b)})}}});return new Response(h)}else throw new Error(`fetch for "${o.url}" responded with ${o.status}: ${o.statusText}`)}).then(o=>o.blob()).then(o=>{e(o)}).catch(o=>{n(o)})}},jI=class extends Bm{load(i,e,t,n){const s=document.createElement("img");function r(){l(),e(this)}function o(u){if(l(),n!=null&&n.aborted){const c=new Error;c.name="AbortError",c.message="The operation was aborted.",t(c)}else t(u)}function a(){s.src=""}function l(){s.removeEventListener("load",r,!1),s.removeEventListener("error",o,!1),n==null||n.removeEventListener("abort",a,!1)}return s.addEventListener("load",r,!1),s.addEventListener("error",o,!1),n==null||n.addEventListener("abort",a,!1),!i.startsWith("data:")&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),s.src=i,s}},qI=class extends Uc{constructor(i){super(i),this.abortCtrl={},this.fileLoader=new WI,this.imageLoader=new jI,this.config.withCredentials&&(this.fileLoader.setWithCredentials(!0),this.imageLoader.setCrossOrigin("use-credentials"))}destroy(){this.abortLoading(),super.destroy()}abortLoading(){Object.values(this.abortCtrl).forEach(i=>i.abort()),this.abortCtrl={}}loadFile(i,e,t){const n=Ma.get(i,t);if(n){if(n instanceof Blob)return e==null||e(100),Promise.resolve(n);Ma.remove(i,t)}return this.config.requestHeaders&&this.fileLoader.setRequestHeader(this.config.requestHeaders(i)),new Promise((s,r)=>{let o=0;e==null||e(o),this.fileLoader.load(i,a=>{o=100,e==null||e(o),Ma.add(i,t,a),s(a)},a=>{if(a.lengthComputable){const l=a.loaded/a.total*100;l>o&&(o=l,e==null||e(o))}},a=>{r(a)},this.__getAbortSignal(t))})}loadImage(i,e,t){const n=Ma.get(i,t);return n?(e==null||e(100),n instanceof Blob?this.blobToImage(n):Promise.resolve(n)):!e&&!this.config.requestHeaders?new Promise((s,r)=>{this.imageLoader.load(i,o=>{Ma.add(i,t,o),s(o)},o=>{r(o)},this.__getAbortSignal(t))}):this.loadFile(i,e,t).then(s=>this.blobToImage(s))}blobToImage(i){return new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{URL.revokeObjectURL(n.src),e(n)},n.onerror=t,n.src=URL.createObjectURL(i)})}preloadPanorama(i){return this.viewer.adapter.supportsPreload(i)?this.viewer.adapter.loadTexture(i,!1):Promise.reject(new Yt("Current adapter does not support preload"))}__getAbortSignal(i){var e;return i?((e=this.abortCtrl[i])!=null&&e.signal.aborted&&delete this.abortCtrl[i],this.abortCtrl[i]||(this.abortCtrl[i]=new AbortController),this.abortCtrl[i].signal):null}},XI=class extends Uc{constructor(i){super(i),this.zoom=new ql(e=>{this.viewer.state.vFov=this.viewer.dataHelper.zoomLevelToFov(e),this.viewer.state.hFov=this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov),this.viewer.dispatchEvent(new Mr(e))},{defaultValue:this.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),this.position=new y_(e=>{this.viewer.dataHelper.sphericalCoordsToVector3(e,this.viewer.state.direction),this.viewer.dispatchEvent(new nc(e))},{yaw:new ql(null,{defaultValue:this.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new ql(null,{defaultValue:this.config.defaultPitch,min:-Math.PI/2,max:Math.PI/2,wrap:!1})}),this.roll=new ql(e=>{this.viewer.state.roll=e,this.viewer.dispatchEvent(new sc(e))},{defaultValue:0,min:-Math.PI,max:Math.PI,wrap:!1}),this.updateSpeeds()}updateSpeeds(){this.zoom.setSpeed(this.config.zoomSpeed*50),this.position.setSpeed(wi.degToRad(this.config.moveSpeed*50)),this.roll.setSpeed(wi.degToRad(this.config.moveSpeed*50))}update(i){this.zoom.update(i),this.position.update(i),this.roll.update(i)}},YI=class{constructor(){this.ready=!1,this.needsUpdate=!1,this.continuousUpdateCount=0,this.keyboardEnabled=!1,this.direction=new xe(0,0,Go),this.roll=0,this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0}}},La=class extends E_{constructor(i){var e,t,n;if(super(),this.plugins={},this.children=[],this.onResize=$m(()=>this.navbar.autoSize(),500),this.parent=t_(i.container),!this.parent)throw new Yt('"container" element not found.');this.parent[co]=this,this.container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),g_(this.parent),m_(this.container,"core"),this.state=new YI,this.config=RI(i),this.__setSize(this.config.size),this.overlay=new NI(this);try{yn.load()}catch(s){console.error(s),this.showError(this.config.lang.webglError);return}Ma.init(),this.adapter=new this.config.adapter[0](this,this.config.adapter[1]),this.renderer=new GI(this),this.textureLoader=new qI(this),this.eventsHandler=new $I(this),this.dataHelper=new BI(this),this.dynamics=new XI(this),(t=(e=this.adapter).init)==null||t.call(e),this.loader=new DI(this),this.navbar=new II(this),this.panel=new FI(this),this.notification=new OI(this),this.autoSize(),this.setCursor(null),Wm(yn.isTouchEnabled,s=>{Gd(this.container,"psv--is-touch",s)}),this.config.plugins.forEach(([s,r])=>{this.plugins[s.id]=new s(this,r)});for(const s of Object.values(this.plugins))(n=s.init)==null||n.call(s);this.config.navbar&&this.navbar.setButtons(this.config.navbar),this.state.loadingPromise||(this.config.panorama?this.setPanorama(this.config.panorama):this.loader.show())}destroy(){var i,e,t,n,s,r;this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(const[o,a]of Object.entries(this.plugins))a.destroy(),delete this.plugins[o];this.children.slice().forEach(o=>o.destroy()),this.children.length=0,(i=this.eventsHandler)==null||i.destroy(),(e=this.renderer)==null||e.destroy(),(t=this.textureLoader)==null||t.destroy(),(n=this.dataHelper)==null||n.destroy(),(s=this.adapter)==null||s.destroy(),(r=this.dynamics)==null||r.destroy(),this.parent.removeChild(this.container),delete this.parent[co]}init(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&this.navbar.show(),this.config.keyboard==="always"&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new rc)}resetIdleTimer(){this.state.idleTime=performance.now()}disableIdleTimer(){this.state.idleTime=-1}getPlugin(i){if(typeof i=="string")return this.plugins[i];{const e=qp(i);return e?this.plugins[e.id]:null}}getPosition(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}getZoomLevel(){return this.dynamics.zoom.current}getSize(){return{...this.state.size}}isFullscreenEnabled(){return r_(this.parent,yn.isIphone)}needsUpdate(){this.state.needsUpdate=!0}needsContinuousUpdate(i){i?this.state.continuousUpdateCount++:this.state.continuousUpdateCount>0&&this.state.continuousUpdateCount--}autoSize(){(this.container.clientWidth!==this.state.size.width||this.container.clientHeight!==this.state.size.height)&&(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new ac(this.getSize())),this.onResize())}setPanorama(i,e={}){var s;this.textureLoader.abortLoading(),(s=this.state.transitionAnimation)==null||s.cancel(),this.state.ready||["sphereCorrection","panoData"].forEach(r=>{r in e||(e[r]=this.config[r])}),e.transition===void 0&&(e.transition=!0),e.speed===void 0&&(e.speed=Gb),e.showLoader===void 0&&(e.showLoader=!0),e.caption===void 0&&(e.caption=this.config.caption),e.description===void 0&&(e.description=this.config.description),!e.panoData&&typeof this.config.panoData=="function"&&(e.panoData=this.config.panoData),this.hideError(),this.resetIdleTimer(),this.config.panorama=i,this.config.caption=e.caption,this.config.description=e.description;const t=r=>{if(h_(r))return!1;if(this.loader.hide(),this.state.loadingPromise=null,r)throw this.navbar.setCaption(""),this.showError(this.config.lang.loadError),console.error(r),this.dispatchEvent(new aE(i,r)),r;return this.navbar.setCaption(this.config.caption),!0};this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`),(e.showLoader||!this.state.ready)&&this.loader.show(),this.dispatchEvent(new iE(i));const n=this.adapter.loadTexture(this.config.panorama,!0,e.panoData).then(r=>{if(r.panorama!==this.config.panorama)throw this.adapter.disposeTexture(r),Hp();const o=this.dataHelper.cleanPanoramaOptions(e,r.panoData);return(!tn(o.zoom)||!tn(o.position))&&this.stopAll(),{textureData:r,cleanOptions:o}});return!e.transition||!this.state.ready||!this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=n.then(({textureData:r,cleanOptions:o})=>{this.renderer.show(),this.renderer.setTexture(r),this.renderer.setPanoramaPose(r.panoData),this.renderer.setSphereCorrection(e.sphereCorrection),this.state.ready||this.init(),this.dispatchEvent(new Wp(r)),tn(o.zoom)||this.zoom(o.zoom),tn(o.position)||this.rotate(o.position)}).then(()=>t(),r=>t(r)):this.state.loadingPromise=n.then(({textureData:r,cleanOptions:o})=>(this.loader.hide(),this.dispatchEvent(new Wp(r)),this.state.transitionAnimation=this.renderer.transition(r,o),this.state.transitionAnimation)).then(r=>{if(this.state.transitionAnimation=null,this.dispatchEvent(new uE(r)),!r)throw Hp()}).then(()=>t(),r=>t(r)),this.state.loadingPromise}setOptions(i){const e={...this.config,...i};for(let[t,n]of Object.entries(i)){if(!(t in uo)){yi(`Unknown option ${t}`);continue}if(t in L0){yi(L0[t]);continue}switch(t in Xp&&(n=Xp[t](n,{rawConfig:e,defValue:uo[t]})),this.config[t]=n,t){case"mousemove":this.state.cursorOverride||this.setCursor(null);break;case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new Mr(this.getZoomLevel()));break;case"keyboard":this.config.keyboard==="always"?this.startKeyboardControl():this.stopKeyboardControl();break}}this.needsUpdate(),this.dispatchEvent(new Ln(Object.keys(i)))}setOption(i,e){this.setOptions({[i]:e})}showError(i){this.overlay.show({id:on.ERROR,image:zI,title:i,dissmisable:!1})}hideError(){this.overlay.hide(on.ERROR)}rotate(i){const e=new A_(this.dataHelper.cleanPosition(i));this.dispatchEvent(e),!e.defaultPrevented&&this.dynamics.position.setValue(e.position)}zoom(i){this.dynamics.zoom.setValue(i)}zoomIn(i=1){this.dynamics.zoom.step(i)}zoomOut(i=1){this.dynamics.zoom.step(-i)}animate(i){const e=jm(i),t=!tn(i.zoom),n=new Ym(e?this.dataHelper.cleanPosition(i):void 0,i.zoom);if(this.dispatchEvent(n),n.defaultPrevented)return;this.stopAll();const{duration:s,properties:r}=this.dataHelper.getAnimationProperties(i.speed,n.position,n.zoomLevel);return s?(this.state.animation=new xd({properties:r,duration:s,easing:i.easing||"inOutSine",onTick:o=>{e&&this.dynamics.position.setValue({yaw:o.yaw,pitch:o.pitch}),t&&this.dynamics.zoom.setValue(o.zoom)}}),this.state.animation.then(()=>{this.state.animation=null,this.resetIdleTimer()}),this.state.animation):(e&&this.rotate(n.position),t&&this.zoom(n.zoomLevel),new xd(null))}stopAnimation(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}resize(i){this.__setSize(i),this.autoSize()}__setSize(i){const e=i;["width","height"].forEach(t=>{i&&e[t]&&(/^[0-9.]+$/.test(e[t])&&(e[t]+="px"),this.parent.style[t]=e[t])})}enterFullscreen(){this.isFullscreenEnabled()||o_(this.parent,yn.isIphone)}exitFullscreen(){this.isFullscreenEnabled()&&a_(yn.isIphone)}toggleFullscreen(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}startKeyboardControl(){this.state.keyboardEnabled=!0}stopKeyboardControl(){this.state.keyboardEnabled=!1}createTooltip(i){return new UI(this,i)}setCursor(i){this.state.cursorOverride=i,i?this.container.style.cursor=i:this.container.style.cursor=this.config.mousemove?"move":"default"}observeObjects(i){this.state.objectsObservers[i]||(this.state.objectsObservers[i]=null)}unobserveObjects(i){delete this.state.objectsObservers[i]}stopAll(){return this.dispatchEvent(new lc),this.disableIdleTimer(),this.stopAnimation()}};La.useNewAnglesOrder=!0;/*!
 * Photo Sphere Viewer / Autorotate Plugin 5.11.1
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var KI=Object.defineProperty,ZI=(i,e)=>{for(var t in e)KI(i,t,{get:e[t],enumerable:!0})},QI={};ZI(QI,{AutorotateEvent:()=>ka});var iw=class nw extends Yd{constructor(e){super(nw.type),this.autorotateEnabled=e}};iw.type="autorotate";var ka=iw,JI=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>
`,eD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z"/><path d="M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>
`,tg=class extends bn{constructor(i){var e;super(i,{className:"psv-autorotate-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:eD,iconActive:JI}),this.plugin=this.viewer.getPlugin("autorotate"),(e=this.plugin)==null||e.addEventListener(ka.type,this)}destroy(){var i;(i=this.plugin)==null||i.removeEventListener(ka.type,this),super.destroy()}isSupported(){return!!this.plugin}handleEvent(i){i instanceof ka&&this.toggleActive(i.autorotateEnabled)}onClick(){this.plugin.isEnabled()&&this.plugin.disableOnIdle(),this.plugin.toggle()}};tg.id="autorotate";var tD=Mi.getConfigParser({autostartDelay:2e3,autostartOnIdle:!0,autorotateSpeed:Mi.parseSpeed("2rpm"),autorotatePitch:null,autorotateZoomLvl:null,keypoints:null,startFromClosest:!0},{autostartOnIdle:(i,{rawConfig:e})=>i&&Mi.isNil(e.autostartDelay)?(Mi.logWarn("autostartOnIdle requires a non null autostartDelay"),!1):i,autorotateSpeed:i=>Mi.parseSpeed(i),autorotatePitch:i=>Mi.isNil(i)?null:Mi.parseAngle(i,!0),autorotateZoomLvl:i=>Mi.isNil(i)?null:wi.clamp(i,0,100)}),Pf=16;function Vl(i){return[i.yaw,i.pitch]}var zc=class extends Jm{constructor(i,e){super(i,e),this.state={initialStart:!0,disableOnIdle:!1,enabled:!1,idx:-1,curve:[],startStep:null,endStep:null,startTime:null,stepDuration:null,remainingPause:null,lastTime:null,tooltip:null},this.state.initialStart=!Mi.isNil(this.config.autostartDelay)}init(){super.init(),this.video=this.viewer.getPlugin("video"),this.markers=this.viewer.getPlugin("markers"),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),this.viewer.addEventListener(sn.StopAllEvent.type,this),this.viewer.addEventListener(sn.BeforeRenderEvent.type,this),this.video||this.viewer.addEventListener(sn.KeypressEvent.type,this)}destroy(){this.viewer.removeEventListener(sn.StopAllEvent.type,this),this.viewer.removeEventListener(sn.BeforeRenderEvent.type,this),this.viewer.removeEventListener(sn.KeypressEvent.type,this),delete this.video,delete this.markers,delete this.keypoints,super.destroy()}handleEvent(i){switch(i.type){case sn.StopAllEvent.type:this.stop();break;case sn.BeforeRenderEvent.type:{this.__beforeRender(i.timestamp);break}case sn.KeypressEvent.type:this.__onKeyPress(i.originalEvent);break}}setKeypoints(i){if(!i)this.keypoints=null;else{if(i.length<2)throw new Yt("At least two points are required");this.keypoints=i.map((e,t)=>{const n={position:null,markerId:null,pause:0,tooltip:null};let s;if(typeof e=="string"?n.markerId=e:Mi.isExtendedPosition(e)?s=e:(n.markerId=e.markerId,n.pause=e.pause,s=e.position,e.tooltip&&typeof e.tooltip=="object"?n.tooltip=e.tooltip:typeof e.tooltip=="string"&&(n.tooltip={content:e.tooltip})),n.markerId){if(!this.markers)throw new Yt(`Keypoint #${t} references a marker but the markers plugin is not loaded`);const r=this.markers.getMarker(n.markerId);n.position=Vl(r.state.position)}else if(s)n.position=Vl(this.viewer.dataHelper.cleanPosition(s));else throw new Yt(`Keypoint #${t} is missing marker or position`);return n})}this.isEnabled()&&(this.stop(),this.start())}isEnabled(){return this.state.enabled}start(){this.isEnabled()||(this.viewer.stopAll(),this.keypoints?this.config.startFromClosest&&this.__shiftKeypoints():this.__animate(),this.state.initialStart=!1,this.state.disableOnIdle=!1,this.state.enabled=!0,this.dispatchEvent(new ka(!0)))}stop(){this.isEnabled()&&(this.__hideTooltip(),this.__reset(),this.viewer.stopAnimation(),this.viewer.dynamics.position.stop(),this.viewer.dynamics.zoom.stop(),this.state.enabled=!1,this.dispatchEvent(new ka(!1)))}toggle(){this.isEnabled()?this.stop():this.start()}reverse(){this.isEnabled()&&!this.keypoints&&(this.config.autorotateSpeed=-this.config.autorotateSpeed,this.__animate())}disableOnIdle(){this.state.disableOnIdle=!0}__animate(){let i;Mi.isNil(this.config.autorotateZoomLvl)?i=Promise.resolve(!0):i=this.viewer.animate({zoom:this.config.autorotateZoomLvl,speed:`${this.viewer.config.zoomSpeed*2}rpm`}),i.then(e=>{e&&(this.viewer.dynamics.position.roll({yaw:this.config.autorotateSpeed<0},Math.abs(this.config.autorotateSpeed/this.viewer.config.moveSpeed)),Mi.isNil(this.config.autorotatePitch)||this.viewer.dynamics.position.goto({pitch:this.config.autorotatePitch},Math.abs(this.config.autorotateSpeed/this.viewer.config.moveSpeed)))})}__reset(){this.state.idx=-1,this.state.curve=[],this.state.startStep=null,this.state.endStep=null,this.state.startTime=null,this.state.stepDuration=null,this.state.remainingPause=null,this.state.lastTime=null,this.state.tooltip=null}__beforeRender(i){(this.state.initialStart||this.config.autostartOnIdle&&!this.state.disableOnIdle)&&this.viewer.state.idleTime>0&&i-this.viewer.state.idleTime>this.config.autostartDelay&&this.start(),this.isEnabled()&&this.keypoints&&(this.state.startTime||(this.state.endStep=Vl(this.viewer.getPosition()),this.__nextStep(),this.state.startTime=i,this.state.lastTime=i),this.__nextFrame(i))}__shiftKeypoints(){const i=Vl(this.viewer.getPosition()),e=this.__findMinIndex(this.keypoints,t=>Mi.greatArcDistance(t.position,i));this.keypoints.push(...this.keypoints.splice(0,e))}__incrementIdx(){this.state.idx++,this.state.idx===this.keypoints.length&&(this.state.idx=0)}__showTooltip(){const i=this.keypoints[this.state.idx];if(i.tooltip){const e=this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);this.state.tooltip=this.viewer.createTooltip({content:i.tooltip.content,position:i.tooltip.position,top:e.y,left:e.x})}else if(i.markerId){const e=this.markers.getMarker(i.markerId);e.showTooltip(),this.state.tooltip=e.tooltip}}__hideTooltip(){if(this.state.tooltip){const i=this.keypoints[this.state.idx];i.tooltip?this.state.tooltip.hide():i.markerId&&this.markers.getMarker(i.markerId).hideTooltip(),this.state.tooltip=null}}__nextPoint(){const i=[];if(this.state.idx===-1){const s=Vl(this.viewer.getPosition());i.push(s,s,this.keypoints[0].position,this.keypoints[1].position)}else for(let s=-1;s<3;s++){const r=this.state.idx+s<0?this.keypoints[this.keypoints.length-1]:this.keypoints[(this.state.idx+s)%this.keypoints.length];i.push(r.position)}const e=[new ei(i[0][0],i[0][1])];let t=0;for(let s=1;s<=3;s++){const r=i[s-1][0]-i[s][0];r>Math.PI?t+=1:r<-Math.PI&&(t-=1),t!==0&&s===1&&(e[0].x-=t*2*Math.PI,t=0),e.push(new ei(i[s][0]+t*2*Math.PI,i[s][1]))}const n=new iI(e).getPoints(Pf*3).map(s=>[s.x,s.y]);this.state.curve=n.slice(Pf+1,Pf*2+1),this.state.idx!==-1?(this.state.remainingPause=this.keypoints[this.state.idx].pause,this.state.remainingPause?this.__showTooltip():this.__incrementIdx()):this.__incrementIdx()}__nextStep(){this.state.curve.length===0&&(this.__nextPoint(),this.state.endStep[0]=Mi.parseAngle(this.state.endStep[0])),this.state.startStep=this.state.endStep,this.state.endStep=this.state.curve.shift();const i=Mi.greatArcDistance(this.state.startStep,this.state.endStep);this.state.stepDuration=i*1e3/Math.abs(this.config.autorotateSpeed),i===0&&this.__nextStep()}__nextFrame(i){const e=i-this.state.lastTime;if(this.state.lastTime=i,this.state.remainingPause){if(this.state.remainingPause=Math.max(0,this.state.remainingPause-e),this.state.remainingPause>0)return;this.__hideTooltip(),this.__incrementIdx(),this.state.startTime=i}let t=(i-this.state.startTime)/this.state.stepDuration;t>=1&&(this.__nextStep(),t=0,this.state.startTime=i),this.viewer.rotate({yaw:this.state.startStep[0]+(this.state.endStep[0]-this.state.startStep[0])*t,pitch:this.state.startStep[1]+(this.state.endStep[1]-this.state.startStep[1])*t})}__findMinIndex(i,e){let t=0,n=Number.MAX_VALUE;return i.forEach((s,r)=>{const o=e(s);o<n&&(n=o,t=r)}),t}__onKeyPress(i){this.viewer.state.keyboardEnabled&&i.key===yd.KEY_CODES.Space&&!i.ctrlKey&&!i.altKey&&!i.shiftKey&&!i.metaKey&&(this.toggle(),i.preventDefault())}};zc.id="autorotate";zc.VERSION="5.11.1";zc.configParser=tD;zc.readonlyOptions=["keypoints"];eg(tg,"start");uo.lang[tg.id]="Automatic rotation";/*!
 * Photo Sphere Viewer / Gallery Plugin 5.11.1
 * @copyright 2015-2024 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var iD=Object.defineProperty,nD=(i,e)=>{for(var t in e)iD(i,t,{get:e[t],enumerable:!0})},sD={};nD(sD,{HideGalleryEvent:()=>uc,ShowGalleryEvent:()=>cc});var sw=class rw extends Yd{constructor(e){super(rw.type),this.fullscreen=e}};sw.type="show-gallery";var cc=sw,ow=class aw extends Yd{constructor(){super(aw.type)}};ow.type="hide-gallery";var uc=ow,rD='<svg viewBox="185 115 330 330" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z"/><!--Created by Wolf BÃ¶se from the Noun Project--></svg>',Qd=class extends bn{constructor(i){super(i,{className:"psv-gallery-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:rD}),this.plugin=this.viewer.getPlugin("gallery"),this.plugin&&(this.plugin.addEventListener(cc.type,this),this.plugin.addEventListener(uc.type,this))}destroy(){this.plugin&&(this.plugin.removeEventListener(cc.type,this),this.plugin.removeEventListener(uc.type,this)),super.destroy()}handleEvent(i){i instanceof cc?this.toggleActive(!0):i instanceof uc&&this.toggleActive(!1)}isSupported(){return!!this.plugin}onClick(){this.plugin.toggle()}};Qd.id="gallery";var lw="psvGalleryItem",cw=Mi.dasherize(lw),Lf="psv-gallery-item--active",oD=(i,e)=>`
${i.map(t=>`
<div class="psv-gallery-item" data-${cw}="${t.id}" style="width:${e.width}px; aspect-ratio:${e.width/e.height};">
  ${t.name?`<div class="psv-gallery-item-title"><span>${t.name}</span></div>`:""}
  <svg class="psv-gallery-item-thumb" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid slice"><use href="#psvGalleryBlankIcon"></use></svg>
  ${t.thumbnail?`<div class="psv-gallery-item-thumb" data-src="${t.thumbnail}"></div>`:""}
</div>
`).join("")}
`,aD=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
  <defs>
    <symbol id="psvGalleryBlankIcon" viewBox="0 0 200 200">
      <rect x="0" y="0" width="200" height="200" fill="#666"/>
      <g transform="scale(0.25) translate(25 20) " fill="#eee">
        <path d="M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z"/>
        <path d="M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z"/>
        <path d="M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0"/>
      </g>
    </symbol>
  </defs>
</svg>`,lD=class extends fo{constructor(i,e){super(e,{className:`psv-gallery ${yd.CAPTURE_EVENTS_CLASS}`}),this.plugin=i,this.state={visible:!0,mousedown:!1,initMouse:null,mouse:null,itemMargin:null,breakpoint:null},this.container.innerHTML=aD,this.container.querySelector("svg").style.display="none";const t=document.createElement("div");t.className="psv-panel-close-button",t.innerHTML=yd.ICONS.close,this.container.appendChild(t),this.items=document.createElement("div"),this.items.className="psv-gallery-container",this.container.appendChild(this.items),this.state.itemMargin=parseInt(Mi.getStyleProperty(this.items,"padding-left"),10),this.state.breakpoint=parseInt(Mi.getStyleProperty(this.container,"--psv-gallery-breakpoint"),10),this.observer=new IntersectionObserver(n=>{n.forEach(s=>{if(s.intersectionRatio>0){const r=s.target;r.style.backgroundImage=`url("${r.dataset.src}")`,delete r.dataset.src,this.observer.unobserve(s.target)}})},{root:this.viewer.container}),this.items.addEventListener("wheel",this),this.items.addEventListener("mousedown",this),this.items.addEventListener("mousemove",this),this.items.addEventListener("click",this),window.addEventListener("mouseup",this),t.addEventListener("click",()=>this.plugin.hide()),this.hide()}get isAboveBreakpoint(){return window.innerWidth>this.state.breakpoint}destroy(){window.removeEventListener("mouseup",this),this.observer.disconnect(),super.destroy()}handleEvent(i){switch(i.type){case"wheel":{if(this.isAboveBreakpoint){const e=i,t=this.plugin.config.thumbnailSize.width+(this.state.itemMargin??0);this.items.scrollLeft+=e.deltaY/Math.abs(e.deltaY)*t,i.preventDefault()}break}case"mousedown":this.state.mousedown=!0,this.isAboveBreakpoint?this.state.initMouse=i.clientX:this.state.initMouse=i.clientY,this.state.mouse=this.state.initMouse;break;case"mousemove":if(this.state.mousedown)if(this.isAboveBreakpoint){const e=this.state.mouse-i.clientX;this.items.scrollLeft+=e,this.state.mouse=i.clientX}else{const e=this.state.mouse-i.clientY;this.items.scrollTop+=e,this.state.mouse=i.clientY}break;case"mouseup":this.state.mousedown=!1,this.state.mouse=null,i.preventDefault();break;case"click":{const e=this.isAboveBreakpoint?i.clientX:i.clientY;if(Math.abs(this.state.initMouse-e)<10){const t=Mi.getMatchingTarget(i,".psv-gallery-item");t&&this.plugin.__click(t.dataset[lw])}break}}}show(){this.container.classList.add("psv-gallery--open"),this.state.visible=!0}hide(){this.container.classList.remove("psv-gallery--open"),this.state.visible=!1}setItems(i){this.items.innerHTML=oD(i,this.plugin.config.thumbnailSize),this.observer&&(this.observer.disconnect(),this.items.querySelectorAll("[data-src]").forEach(e=>{this.observer.observe(e)}))}setActive(i){const e=this.items.querySelector("."+Lf);if(e==null||e.classList.remove(Lf),i){const t=this.items.querySelector(`[data-${cw}="${i}"]`);t&&(t.classList.add(Lf),this.items.scrollLeft=t.offsetLeft+t.clientWidth/2-this.items.clientWidth/2)}}},cD=Mi.getConfigParser({items:[],visibleOnLoad:!1,hideOnClick:!0,thumbnailSize:{width:200,height:100}}),Ka=class extends Jm{constructor(i,e){super(i,e),this.items=[],this.gallery=new lD(this,this.viewer)}init(){super.init(),Mi.checkStylesheet(this.viewer.container,"gallery-plugin"),this.map=this.viewer.getPlugin("map"),this.plan=this.viewer.getPlugin("plan"),this.viewer.addEventListener(sn.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(sn.ShowPanelEvent.type,this),this.config.visibleOnLoad&&this.viewer.addEventListener(sn.ReadyEvent.type,()=>{this.show()},{once:!0}),this.setItems(this.config.items),delete this.config.items,setTimeout(()=>this.__updateButton())}destroy(){this.viewer.removeEventListener(sn.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(sn.ShowPanelEvent.type,this),this.gallery.destroy(),super.destroy()}setOptions(i){super.setOptions(i),i.thumbnailSize&&this.gallery.setItems(this.items)}handleEvent(i){if(i instanceof sn.PanoramaLoadedEvent){const e=this.items.find(t=>Mi.deepEqual(t.panorama,i.data.panorama));this.currentId=e==null?void 0:e.id,this.gallery.setActive(this.currentId)}else i instanceof sn.ShowPanelEvent&&this.gallery.isVisible()&&this.hide()}show(){var i,e;return(i=this.map)==null||i.minimize(),(e=this.plan)==null||e.minimize(),this.dispatchEvent(new cc(!this.gallery.isAboveBreakpoint)),this.gallery.show()}hide(){return this.dispatchEvent(new uc),this.gallery.hide()}toggle(){this.gallery.isVisible()?this.hide():this.show()}isVisible(){return this.gallery.isVisible()}setItems(i,e){if(i?i.forEach((t,n)=>{if(!t.id)throw new Yt(`Item ${n} has no "id".`);if(!t.panorama)throw new Yt(`Item ${t.id} has no "panorama".`)}):i=[],this.handler=e,this.items=i.map(t=>({...t,id:`${t.id}`})),this.gallery.setItems(this.items),this.currentId){const t=this.items.find(n=>n.id===this.currentId);this.currentId=t==null?void 0:t.id,this.gallery.setActive(this.currentId)}this.__updateButton()}__click(i){if(i!==this.currentId){if(this.handler)this.handler(i);else{const e=this.items.find(t=>t.id===i);this.viewer.setPanorama(e.panorama,{caption:e.name,...e.options})}this.currentId=i,this.gallery.setActive(i),(this.config.hideOnClick||!this.gallery.isAboveBreakpoint)&&this.hide()}}__updateButton(){var i;(i=this.viewer.navbar.getButton(Qd.id,!1))==null||i.toggle(this.items.length>0)}};Ka.id="gallery";Ka.VERSION="5.11.1";Ka.configParser=cD;Ka.readonlyOptions=["visibleOnLoad","items"];uo.lang[Qd.id]="Gallery";eg(Qd,"caption:left");document.addEventListener("DOMContentLoaded",()=>{const i=document.querySelector(".tour-viewer");i&&new La({container:i,panorama:"img/3d-1.jpeg",touchmoveTwoFingers:!0,mousewheelCtrlKey:!0,loadingImg:"img/loader.gif",lang:{ctrlZoom:"ÐÐ°ÑÐ¸ÑÐ½ÑÑÑ ctrl + ÑÐ° Ð²Ð¸ÐºÐ¾ÑÐ¸ÑÑÐ°Ð¹ÑÐµ scroll Ð´Ð»Ñ Ð²Ð¸ÐºÐ¾ÑÐ¸ÑÑÐ°Ð½Ð½Ñ zoom",twoFingers:"ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ°Ð¹ÑÐµ Ð¿Ð¾Ð´Ð²ÑÐ¹Ð½Ð¸Ð¹ Ð´Ð¾ÑÐ¸Ðº Ð´Ð»Ñ Ð½Ð°Ð²ÑÐ³Ð°ÑÑÑ",loading:"ÐÐ°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ..."},plugins:[[zc,{autostartDelay:1e3,autorotatePitch:"5deg"}],[Ka,{}]],navbar:["autorotate","zoom","move","gallery","fullscreen"]}).getPlugin(Ka).setItems([{id:"panoram-img-1",panorama:"img/3d-1.jpeg",thumbnail:"img/3d-1.jpeg",name:"ÐÐ°Ð½Ð¾ÑÐ°Ð¼Ð° 1"},{id:"panoram-img-2",panorama:"img/3d-2.jpeg",thumbnail:"img/3d-2.jpeg",name:"ÐÐ°Ð½Ð¾ÑÐ°Ð¼Ð° 2"}])});/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const Fn=(i,e)=>{const{o:t,i:n,u:s}=i;let r=t,o;const a=(c,d)=>{const h=r,f=c,m=d||(n?!n(h,f):h!==f);return(m||s)&&(r=f,o=h),[r,m,o]};return[e?c=>a(e(r,o),c):a,c=>[r,!!c,o]]},uD=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,An=uD?window:{},uw=Math.max,dD=Math.min,Kp=Math.round,Td=Math.abs,D0=Math.sign,dw=An.cancelAnimationFrame,ig=An.requestAnimationFrame,Md=An.setTimeout,Zp=An.clearTimeout,Jd=i=>typeof An[i]<"u"?An[i]:void 0,hD=Jd("MutationObserver"),O0=Jd("IntersectionObserver"),Cd=Jd("ResizeObserver"),Ju=Jd("ScrollTimeline"),ng=i=>i===void 0,eh=i=>i===null,Ks=i=>typeof i=="number",Bc=i=>typeof i=="string",sg=i=>typeof i=="boolean",fs=i=>typeof i=="function",Qs=i=>Array.isArray(i),Ad=i=>typeof i=="object"&&!Qs(i)&&!eh(i),rg=i=>{const e=!!i&&i.length,t=Ks(e)&&e>-1&&e%1==0;return Qs(i)||!fs(i)&&t?e>0&&Ad(i)?e-1 in i:!0:!1},Pd=i=>!!i&&i.constructor===Object,Ld=i=>i instanceof HTMLElement,th=i=>i instanceof Element;function mi(i,e){if(rg(i))for(let t=0;t<i.length&&e(i[t],t,i)!==!1;t++);else i&&mi(Object.keys(i),t=>e(i[t],t,i));return i}const hw=(i,e)=>i.indexOf(e)>=0,Ec=(i,e)=>i.concat(e),Ci=(i,e,t)=>(!Bc(e)&&rg(e)?Array.prototype.push.apply(i,e):i.push(e),i),po=i=>Array.from(i||[]),og=i=>Qs(i)?i:!Bc(i)&&rg(i)?po(i):[i],Qp=i=>!!i&&!i.length,Jp=i=>po(new Set(i)),$n=(i,e,t)=>{mi(i,s=>s?s.apply(void 0,e||[]):!0),!t&&(i.length=0)},fw="paddingTop",pw="paddingRight",mw="paddingLeft",gw="paddingBottom",vw="marginLeft",yw="marginRight",bw="marginBottom",_w="overflowX",Ew="overflowY",ih="width",nh="height",Yr="visible",Uo="hidden",Za="scroll",fD=i=>{const e=String(i||"");return e?e[0].toUpperCase()+e.slice(1):""},sh=(i,e,t,n)=>{if(i&&e){let s=!0;return mi(t,r=>{const o=i[r],a=e[r];o!==a&&(s=!1)}),s}return!1},ww=(i,e)=>sh(i,e,["w","h"]),ed=(i,e)=>sh(i,e,["x","y"]),pD=(i,e)=>sh(i,e,["t","r","b","l"]),Bo=()=>{},Rt=(i,...e)=>i.bind(0,...e),Ra=i=>{let e;const t=i?Md:ig,n=i?Zp:dw;return[s=>{n(e),e=t(()=>s(),fs(i)?i():i)},()=>n(e)]},em=(i,e)=>{const{_:t,v:n,p:s,S:r}=e||{};let o,a,l,u,c=Bo;const d=function(v){c(),Zp(o),u=o=a=void 0,c=Bo,i.apply(this,v)},h=b=>r&&a?r(a,b):b,f=()=>{c!==Bo&&d(h(l)||l)},m=function(){const v=po(arguments),g=fs(t)?t():t;if(Ks(g)&&g>=0){const w=fs(n)?n():n,S=Ks(w)&&w>=0,I=g>0?Md:ig,D=g>0?Zp:dw,B=h(v)||v,V=d.bind(0,B);let C;c(),s&&!u?(V(),u=!0,C=I(()=>u=void 0,g)):(C=I(V,g),S&&!o&&(o=Md(f,w))),c=()=>D(C),a=l=B}else d(v)};return m.m=f,m},xw=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),Cs=i=>i?Object.keys(i):[],si=(i,e,t,n,s,r,o)=>{const a=[e,t,n,s,r,o];return(typeof i!="object"||eh(i))&&!fs(i)&&(i={}),mi(a,l=>{mi(l,(u,c)=>{const d=l[c];if(i===d)return!0;const h=Qs(d);if(d&&Pd(d)){const f=i[c];let m=f;h&&!Qs(f)?m=[]:!h&&!Pd(f)&&(m={}),i[c]=si(m,d)}else i[c]=h?d.slice():d})}),i},Sw=(i,e)=>mi(si({},i),(t,n,s)=>{t===void 0?delete s[n]:t&&Pd(t)&&(s[n]=Sw(t))}),ag=i=>!Cs(i).length,Tw=(i,e,t)=>uw(i,dD(e,t)),Ho=i=>Jp((Qs(i)?i:(i||"").split(" ")).filter(e=>e)),lg=(i,e)=>i&&i.getAttribute(e),N0=(i,e)=>i&&i.hasAttribute(e),yr=(i,e,t)=>{mi(Ho(e),n=>{i&&i.setAttribute(n,String(t||""))})},Us=(i,e)=>{mi(Ho(e),t=>i&&i.removeAttribute(t))},rh=(i,e)=>{const t=Ho(lg(i,e)),n=Rt(yr,i,e),s=(r,o)=>{const a=new Set(t);return mi(Ho(r),l=>{a[o](l)}),po(a).join(" ")};return{O:r=>n(s(r,"delete")),$:r=>n(s(r,"add")),C:r=>{const o=Ho(r);return o.reduce((a,l)=>a&&t.includes(l),o.length>0)}}},Mw=(i,e,t)=>(rh(i,e).O(t),Rt(cg,i,e,t)),cg=(i,e,t)=>(rh(i,e).$(t),Rt(Mw,i,e,t)),Rd=(i,e,t,n)=>(n?cg:Mw)(i,e,t),ug=(i,e,t)=>rh(i,e).C(t),Cw=i=>rh(i,"class"),Aw=(i,e)=>{Cw(i).O(e)},dg=(i,e)=>(Cw(i).$(e),Rt(Aw,i,e)),Pw=(i,e)=>{const t=e?th(e)&&e:document;return t?po(t.querySelectorAll(i)):[]},mD=(i,e)=>{const t=e?th(e)&&e:document;return t&&t.querySelector(i)},tm=(i,e)=>th(i)&&i.matches(e),Lw=i=>tm(i,"body"),im=i=>i?po(i.childNodes):[],wc=i=>i&&i.parentElement,Ia=(i,e)=>th(i)&&i.closest(e),nm=i=>document.activeElement,gD=(i,e,t)=>{const n=Ia(i,e),s=i&&mD(t,n),r=Ia(s,e)===n;return n&&s?n===i||s===i||r&&Ia(Ia(i,t),e)!==n:!1},Qa=i=>{mi(og(i),e=>{const t=wc(e);e&&t&&t.removeChild(e)})},zn=(i,e)=>Rt(Qa,i&&e&&mi(og(e),t=>{t&&i.appendChild(t)})),Fa=i=>{const e=document.createElement("div");return yr(e,"class",i),e},Rw=i=>{const e=Fa();return e.innerHTML=i.trim(),mi(im(e),t=>Qa(t))},k0=(i,e)=>i.getPropertyValue(e)||i[e]||"",Iw=i=>{const e=i||0;return isFinite(e)?e:0},Fu=i=>Iw(parseFloat(i||"")),sm=i=>Math.round(i*1e4)/1e4,Dw=i=>`${sm(Iw(i))}px`;function xc(i,e){i&&e&&mi(e,(t,n)=>{try{const s=i.style,r=eh(t)||sg(t)?"":Ks(t)?Dw(t):t;n.indexOf("--")===0?s.setProperty(n,r):s[n]=r}catch{}})}function Pr(i,e,t){const n=Bc(e);let s=n?"":{};if(i){const r=An.getComputedStyle(i,t)||i.style;s=n?k0(r,e):po(e).reduce((o,a)=>(o[a]=k0(r,a),o),s)}return s}const F0=(i,e,t)=>{const n=e?`${e}-`:"",s=t?`-${t}`:"",r=`${n}top${s}`,o=`${n}right${s}`,a=`${n}bottom${s}`,l=`${n}left${s}`,u=Pr(i,[r,o,a,l]);return{t:Fu(u[r]),r:Fu(u[o]),b:Fu(u[a]),l:Fu(u[l])}},vD=(i,e)=>`translate${Ad(i)?`(${i.x},${i.y})`:`Y(${i})`}`,yD=i=>!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length),bD={w:0,h:0},oh=(i,e)=>e?{w:e[`${i}Width`],h:e[`${i}Height`]}:bD,_D=i=>oh("inner",i||An),Ua=Rt(oh,"offset"),Ow=Rt(oh,"client"),Id=Rt(oh,"scroll"),hg=i=>{const e=parseFloat(Pr(i,ih))||0,t=parseFloat(Pr(i,nh))||0;return{w:e-Kp(e),h:t-Kp(t)}},Rf=i=>i.getBoundingClientRect(),ED=i=>!!i&&yD(i),rm=i=>!!(i&&(i[nh]||i[ih])),Nw=(i,e)=>{const t=rm(i);return!rm(e)&&t},U0=(i,e,t,n)=>{mi(Ho(e),s=>{i&&i.removeEventListener(s,t,n)})},xi=(i,e,t,n)=>{var s;const r=(s=n&&n.H)!=null?s:!0,o=n&&n.I||!1,a=n&&n.A||!1,l={passive:r,capture:o};return Rt($n,Ho(e).map(u=>{const c=a?d=>{U0(i,u,c,o),t&&t(d)}:t;return i&&i.addEventListener(u,c,l),Rt(U0,i,u,c,o)}))},kw=i=>i.stopPropagation(),om=i=>i.preventDefault(),Fw=i=>kw(i)||om(i),qs=(i,e)=>{const{x:t,y:n}=Ks(e)?{x:e,y:e}:e||{};Ks(t)&&(i.scrollLeft=t),Ks(n)&&(i.scrollTop=n)},Bn=i=>({x:i.scrollLeft,y:i.scrollTop}),Uw=()=>({D:{x:0,y:0},M:{x:0,y:0}}),wD=(i,e)=>{const{D:t,M:n}=i,{w:s,h:r}=e,o=(d,h,f)=>{let m=D0(d)*f,b=D0(h)*f;if(m===b){const v=Td(d),g=Td(h);b=v>g?0:b,m=v<g?0:m}return m=m===b?0:m,[m+0,b+0]},[a,l]=o(t.x,n.x,s),[u,c]=o(t.y,n.y,r);return{D:{x:a,y:u},M:{x:l,y:c}}},z0=({D:i,M:e})=>{const t=(n,s)=>n===0&&n<=s;return{x:t(i.x,e.x),y:t(i.y,e.y)}},B0=({D:i,M:e},t)=>{const n=(s,r,o)=>Tw(0,1,(s-o)/(s-r)||0);return{x:n(i.x,e.x,t.x),y:n(i.y,e.y,t.y)}},am=i=>{i&&i.focus&&i.focus({preventScroll:!0})},H0=(i,e)=>{mi(og(e),i)},lm=i=>{const e=new Map,t=(r,o)=>{if(r){const a=e.get(r);H0(l=>{a&&a[l?"delete":"clear"](l)},o)}else e.forEach(a=>{a.clear()}),e.clear()},n=(r,o)=>{if(Bc(r)){const u=e.get(r)||new Set;return e.set(r,u),H0(c=>{fs(c)&&u.add(c)},o),Rt(t,r,o)}sg(o)&&o&&t();const a=Cs(r),l=[];return mi(a,u=>{const c=r[u];c&&Ci(l,n(u,c))}),Rt($n,l)},s=(r,o)=>{mi(po(e.get(r)),a=>{o&&!Qp(o)?a.apply(0,o):a()})};return n(i||{}),[n,t,s]},V0=i=>JSON.stringify(i,(e,t)=>{if(fs(t))throw 0;return t}),$0=(i,e)=>i?`${e}`.split(".").reduce((t,n)=>t&&xw(t,n)?t[n]:void 0,i):void 0,xD={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},zw=(i,e)=>{const t={},n=Ec(Cs(e),Cs(i));return mi(n,s=>{const r=i[s],o=e[s];if(Ad(r)&&Ad(o))si(t[s]={},zw(r,o)),ag(t[s])&&delete t[s];else if(xw(e,s)&&o!==r){let a=!0;if(Qs(r)||Qs(o))try{V0(r)===V0(o)&&(a=!1)}catch{}a&&(t[s]=o)}}),t},G0=(i,e,t)=>n=>[$0(i,n),t||$0(e,n)!==void 0],al="data-overlayscrollbars",td="os-environment",Uu=`${td}-scrollbar-hidden`,If=`${al}-initialize`,id="noClipping",W0=`${al}-body`,so=al,SD="host",br=`${al}-viewport`,TD=_w,MD=Ew,CD="arrange",Bw="measuring",AD="scrolling",Hw="scrollbarHidden",PD="noContent",cm=`${al}-padding`,j0=`${al}-content`,fg="os-size-observer",LD=`${fg}-appear`,RD=`${fg}-listener`,ID="os-trinsic-observer",DD="os-theme-none",Gn="os-scrollbar",OD=`${Gn}-rtl`,ND=`${Gn}-horizontal`,kD=`${Gn}-vertical`,Vw=`${Gn}-track`,pg=`${Gn}-handle`,FD=`${Gn}-visible`,UD=`${Gn}-cornerless`,q0=`${Gn}-interaction`,X0=`${Gn}-unusable`,um=`${Gn}-auto-hide`,Y0=`${um}-hidden`,K0=`${Gn}-wheel`,zD=`${Vw}-interactive`,BD=`${pg}-interactive`;let $w;const HD=()=>$w,VD=i=>{$w=i};let Df;const $D=()=>{const i=(S,I,D)=>{zn(document.body,S),zn(document.body,S);const y=Ow(S),B=Ua(S),V=hg(I);return D&&Qa(S),{x:B.h-y.h+V.h,y:B.w-y.w+V.w}},e=S=>{let I=!1;const D=dg(S,Uu);try{I=Pr(S,"scrollbar-width")==="none"||Pr(S,"display","::-webkit-scrollbar")==="none"}catch{}return D(),I},t=`.${td}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${td} div{width:200%;height:200%;margin:10px 0}.${Uu}{scrollbar-width:none!important}.${Uu}::-webkit-scrollbar,.${Uu}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,s=Rw(`<div class="${td}"><div></div><style>${t}</style></div>`)[0],r=s.firstChild,o=s.lastChild,a=HD();a&&(o.nonce=a);const[l,,u]=lm(),[c,d]=Fn({o:i(s,r),i:ed},Rt(i,s,r,!0)),[h]=d(),f=e(s),m={x:h.x===0,y:h.y===0},b={elements:{host:null,padding:!f,viewport:S=>f&&Lw(S)&&S,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},v=si({},xD),g=Rt(si,{},v),E=Rt(si,{},b),w={T:h,k:m,R:f,V:!!Ju,L:Rt(l,"r"),U:E,P:S=>si(b,S)&&E(),N:g,q:S=>si(v,S)&&g(),B:si({},b),F:si({},v)};if(Us(s,"style"),Qa(s),xi(An,"resize",()=>{u("r",[])}),fs(An.matchMedia)&&!f&&(!m.x||!m.y)){const S=I=>{const D=An.matchMedia(`(resolution: ${An.devicePixelRatio}dppx)`);xi(D,"change",()=>{I(),S(I)},{A:!0})};S(()=>{const[I,D]=c();si(w.T,I),u("r",[D])})}return w},Js=()=>(Df||(Df=$D()),Df),Gw=(i,e)=>fs(e)?e.apply(0,i):e,GD=(i,e,t,n)=>{const s=ng(n)?t:n;return Gw(i,s)||e.apply(0,i)},Ww=(i,e,t,n)=>{const s=ng(n)?t:n,r=Gw(i,s);return!!r&&(Ld(r)?r:e.apply(0,i))},WD=(i,e)=>{const{nativeScrollbarsOverlaid:t,body:n}=e||{},{k:s,R:r,U:o}=Js(),{nativeScrollbarsOverlaid:a,body:l}=o().cancel,u=t??a,c=ng(n)?l:n,d=(s.x||s.y)&&u,h=i&&(eh(c)?!r:c);return!!d||!!h},mg=new WeakMap,jD=(i,e)=>{mg.set(i,e)},qD=i=>{mg.delete(i)},jw=i=>mg.get(i),XD=(i,e,t)=>{let n=!1;const s=t?new WeakMap:!1,r=()=>{n=!0},o=a=>{if(s&&t){const l=t.map(u=>{const[c,d]=u||[];return[d&&c?(a||Pw)(c,i):[],d]});mi(l,u=>mi(u[0],c=>{const d=u[1],h=s.get(c)||[];if(i.contains(c)&&d){const m=xi(c,d,b=>{n?(m(),s.delete(c)):e(b)});s.set(c,Ci(h,m))}else $n(h),s.delete(c)}))}};return o(),[r,o]},Z0=(i,e,t,n)=>{let s=!1;const{j:r,X:o,Y:a,W:l,J:u,G:c}=n||{},d=em(()=>s&&t(!0),{_:33,v:99}),[h,f]=XD(i,d,a),m=r||[],b=o||[],v=Ec(m,b),g=(w,S)=>{if(!Qp(S)){const I=u||Bo,D=c||Bo,y=[],B=[];let V=!1,C=!1;if(mi(S,A=>{const{attributeName:H,target:P,type:F,oldValue:Y,addedNodes:Q,removedNodes:G}=A,z=F==="attributes",ue=F==="childList",Ee=i===P,J=z&&H,W=J&&lg(P,H||""),oe=Bc(W)?W:null,ie=J&&Y!==oe,j=hw(b,H)&&ie;if(e&&(ue||!Ee)){const me=z&&ie,ge=me&&l&&tm(P,l),Fe=(ge?!I(P,H,Y,oe):!z||me)&&!D(A,!!ge,i,n);mi(Q,He=>Ci(y,He)),mi(G,He=>Ci(y,He)),C=C||Fe}!e&&Ee&&ie&&!I(P,H,Y,oe)&&(Ci(B,H),V=V||j)}),f(A=>Jp(y).reduce((H,P)=>(Ci(H,Pw(A,P)),tm(P,A)?Ci(H,P):H),[])),e)return!w&&C&&t(!1),[!1];if(!Qp(B)||V){const A=[Jp(B),V];return!w&&t.apply(0,A),A}}},E=new hD(Rt(g,!1));return[()=>(E.observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:v,subtree:e,childList:e,characterData:e}),s=!0,()=>{s&&(h(),E.disconnect(),s=!1)}),()=>{if(s)return d.m(),g(!0,E.takeRecords())}]},qw={},Xw={},YD=i=>{mi(i,e=>mi(e,(t,n)=>{qw[n]=e[n]}))},Yw=(i,e,t)=>Cs(i).map(n=>{const{static:s,instance:r}=i[n],[o,a,l]=t||[],u=t?r:s;if(u){const c=t?u(o,a,e):u(e);return(l||Xw)[n]=c}}),Hc=i=>Xw[i],KD="__osOptionsValidationPlugin",ZD="__osSizeObserverPlugin",QD=(i,e)=>{const{k:t}=e,[n,s]=i("showNativeOverlaidScrollbars");return[n&&t.x&&t.y,s]},Ja=i=>i.indexOf(Yr)===0,JD=(i,e)=>{const t=(s,r,o,a)=>{const l=s===Yr?Uo:s.replace(`${Yr}-`,""),u=Ja(s),c=Ja(o);return!r&&!a?Uo:u&&c?Yr:u?r&&a?l:r?Yr:Uo:r?l:c&&a?Yr:Uo},n={x:t(e.x,i.x,e.y,i.y),y:t(e.y,i.y,e.x,i.x)};return{K:n,Z:{x:n.x===Za,y:n.y===Za}}},Kw="__osScrollbarsHidingPlugin",eO="__osClickScrollPlugin",Zw=(i,e,t)=>{const{dt:n}=t||{},s=Hc(ZD),[r]=Fn({o:!1,u:!0});return()=>{const o=[],l=Rw(`<div class="${fg}"><div class="${RD}"></div></div>`)[0],u=l.firstChild,c=d=>{const h=d instanceof ResizeObserverEntry;let f=!1,m=!1;if(h){const[b,,v]=r(d.contentRect),g=rm(b);m=Nw(b,v),f=!m&&!g}else m=d===!0;f||e({ft:!0,dt:m})};if(Cd){const d=new Cd(h=>c(h.pop()));d.observe(u),Ci(o,()=>{d.disconnect()})}else if(s){const[d,h]=s(u,c,n);Ci(o,Ec([dg(l,LD),xi(l,"animationstart",d)],h))}else return Bo;return Rt($n,Ci(o,zn(i,l)))}},tO=(i,e)=>{let t;const n=l=>l.h===0||l.isIntersecting||l.intersectionRatio>0,s=Fa(ID),[r]=Fn({o:!1}),o=(l,u)=>{if(l){const c=r(n(l)),[,d]=c;return d&&!u&&e(c)&&[c]}},a=(l,u)=>o(u.pop(),l);return[()=>{const l=[];if(O0)t=new O0(Rt(a,!1),{root:i}),t.observe(s),Ci(l,()=>{t.disconnect()});else{const u=()=>{const c=Ua(s);o(c)};Ci(l,Zw(s,u)()),u()}return Rt($n,Ci(l,zn(i,s)))},()=>t&&a(!0,t.takeRecords())]},iO=(i,e,t,n)=>{let s,r,o,a,l,u;const c=`[${so}]`,d=`[${br}]`,h=["id","class","style","open","wrap","cols","rows"],{vt:f,ht:m,ot:b,gt:v,bt:g,nt:E,wt:w,yt:S,St:I,Ot:D}=i,y=j=>Pr(j,"direction")==="rtl",B={$t:!1,ct:y(f)},V=Js(),C=Hc(Kw),[A]=Fn({i:ww,o:{w:0,h:0}},()=>{const j=C&&C.tt(i,e,B,V,t).ut,ge=!(w&&E)&&ug(m,so,id),Ne=!E&&S(CD),Fe=Ne&&Bn(v),He=Fe&&D(),ct=I(Bw,ge),at=Ne&&j&&j()[0],se=Id(b),ut=hg(b);return at&&at(),qs(v,Fe),He&&He(),ge&&ct(),{w:se.w+ut.w,h:se.h+ut.h}}),H=em(n,{_:()=>s,v:()=>r,S(j,me){const[ge]=j,[Ne]=me;return[Ec(Cs(ge),Cs(Ne)).reduce((Fe,He)=>(Fe[He]=ge[He]||Ne[He],Fe),{})]}}),P=j=>{const me=y(f);si(j,{Ct:u!==me}),si(B,{ct:me}),u=me},F=(j,me)=>{const[ge,Ne]=j,Fe={xt:Ne};return si(B,{$t:ge}),!me&&n(Fe),Fe},Y=({ft:j,dt:me})=>{const Ne=!(j&&!me)&&V.R?H:n,Fe={ft:j||me,dt:me};P(Fe),Ne(Fe)},Q=(j,me)=>{const[,ge]=A(),Ne={Ht:ge};return P(Ne),ge&&!me&&(j?n:H)(Ne),Ne},G=(j,me,ge)=>{const Ne={Et:me};return P(Ne),me&&!ge&&H(Ne),Ne},[z,ue]=g?tO(m,F):[],Ee=!E&&Zw(m,Y,{dt:!0}),[J,W]=Z0(m,!1,G,{X:h,j:h}),oe=E&&Cd&&new Cd(j=>{const me=j[j.length-1].contentRect;Y({ft:!0,dt:Nw(me,l)}),l=me}),ie=em(()=>{const[,j]=A();n({Ht:j})},{_:222,p:!0});return[()=>{oe&&oe.observe(m);const j=Ee&&Ee(),me=z&&z(),ge=J(),Ne=V.L(Fe=>{Fe?H({zt:Fe}):ie()});return()=>{oe&&oe.disconnect(),j&&j(),me&&me(),a&&a(),ge(),Ne()}},({It:j,At:me,Dt:ge})=>{const Ne={},[Fe]=j("update.ignoreMutation"),[He,ct]=j("update.attributes"),[at,se]=j("update.elementEvents"),[ut,pt]=j("update.debounce"),yt=se||ct,qe=me||ge,dt=We=>fs(Fe)&&Fe(We);if(yt){o&&o(),a&&a();const[We,q]=Z0(g||b,!0,Q,{j:Ec(h,He||[]),Y:at,W:c,G:(O,le)=>{const{target:Ce,attributeName:Re}=O;return(!le&&Re&&!E?gD(Ce,c,d):!1)||!!Ia(Ce,`.${Gn}`)||!!dt(O)}});a=We(),o=q}if(pt)if(H.m(),Qs(ut)){const We=ut[0],q=ut[1];s=Ks(We)&&We,r=Ks(q)&&q}else Ks(ut)?(s=ut,r=!1):(s=!1,r=!1);if(qe){const We=W(),q=ue&&ue(),O=o&&o();We&&si(Ne,G(We[0],We[1],qe)),q&&si(Ne,F(q[0],qe)),O&&si(Ne,Q(O[0],qe))}return P(Ne),Ne},B]},nO=(i,e,t,n)=>{const s="--os-viewport-percent",r="--os-scroll-percent",o="--os-scroll-direction",{U:a}=Js(),{scrollbars:l}=a(),{slot:u}=l,{vt:c,ht:d,ot:h,Mt:f,gt:m,wt:b,nt:v}=e,{scrollbars:g}=f?{}:i,{slot:E}=g||{},w=[],S=[],I=[],D=Ww([c,d,h],()=>v&&b?c:d,u,E),y=J=>{if(Ju){const W=new Ju({source:m,axis:J});return{kt:ie=>{const j=ie.Tt.animate({clear:["left"],[r]:[0,1]},{timeline:W});return()=>j.cancel()}}}},B={x:y("x"),y:y("y")},V=()=>{const{Rt:J,Vt:W}=t,oe=(ie,j)=>Tw(0,1,ie/(ie+j)||0);return{x:oe(W.x,J.x),y:oe(W.y,J.y)}},C=(J,W,oe)=>{const ie=oe?dg:Aw;mi(J,j=>{ie(j.Tt,W)})},A=(J,W)=>{mi(J,oe=>{const[ie,j]=W(oe);xc(ie,j)})},H=(J,W,oe)=>{const ie=sg(oe),j=ie?oe:!0,me=ie?!oe:!0;j&&C(S,J,W),me&&C(I,J,W)},P=()=>{const J=V(),W=oe=>ie=>[ie.Tt,{[s]:sm(oe)+""}];A(S,W(J.x)),A(I,W(J.y))},F=()=>{if(!Ju){const{Lt:J}=t,W=B0(J,Bn(m)),oe=ie=>j=>[j.Tt,{[r]:sm(ie)+""}];A(S,oe(W.x)),A(I,oe(W.y))}},Y=()=>{const{Lt:J}=t,W=z0(J),oe=ie=>j=>[j.Tt,{[o]:ie?"0":"1"}];A(S,oe(W.x)),A(I,oe(W.y))},Q=()=>{if(v&&!b){const{Rt:J,Lt:W}=t,oe=z0(W),ie=B0(W,Bn(m)),j=me=>{const{Tt:ge}=me,Ne=wc(ge)===h&&ge,Fe=(He,ct,at)=>{const se=ct*He;return Dw(at?se:-se)};return[Ne,Ne&&{transform:vD({x:Fe(ie.x,J.x,oe.x),y:Fe(ie.y,J.y,oe.y)})}]};A(S,j),A(I,j)}},G=J=>{const W=J?"x":"y",ie=Fa(`${Gn} ${J?ND:kD}`),j=Fa(Vw),me=Fa(pg),ge={Tt:ie,Ut:j,Pt:me},Ne=B[W];return Ci(J?S:I,ge),Ci(w,[zn(ie,j),zn(j,me),Rt(Qa,ie),Ne&&Ne.kt(ge),n(ge,H,J)]),ge},z=Rt(G,!0),ue=Rt(G,!1),Ee=()=>(zn(D,S[0].Tt),zn(D,I[0].Tt),Rt($n,w));return z(),ue(),[{Nt:P,qt:F,Bt:Y,Ft:Q,jt:H,Xt:{Yt:S,Wt:z,Jt:Rt(A,S)},Gt:{Yt:I,Wt:ue,Jt:Rt(A,I)}},Ee]},sO=(i,e,t,n)=>(s,r,o)=>{const{ht:a,ot:l,nt:u,gt:c,Kt:d,Ot:h}=e,{Tt:f,Ut:m,Pt:b}=s,[v,g]=Ra(333),[E,w]=Ra(444),S=y=>{fs(c.scrollBy)&&c.scrollBy({behavior:"smooth",left:y.x,top:y.y})},I=()=>{const y="pointerup pointercancel lostpointercapture",B=`client${o?"X":"Y"}`,V=o?ih:nh,C=o?"left":"top",A=o?"w":"h",H=o?"x":"y",P=(Y,Q)=>G=>{const{Rt:z}=t,ue=Ua(m)[A]-Ua(b)[A],J=Q*G/ue*z[H];qs(c,{[H]:Y+J})},F=[];return xi(m,"pointerdown",Y=>{const Q=Ia(Y.target,`.${pg}`)===b,G=Q?b:m,z=i.scrollbars,ue=z[Q?"dragScroll":"clickScroll"],{button:Ee,isPrimary:J,pointerType:W}=Y,{pointers:oe}=z;if(Ee===0&&J&&ue&&(oe||[]).includes(W)){$n(F),w();const j=!Q&&(Y.shiftKey||ue==="instant"),me=Rt(Rf,b),ge=Rt(Rf,m),Ne=(le,Ce)=>(le||me())[C]-(Ce||ge())[C],Fe=Kp(Rf(c)[V])/Ua(c)[A]||1,He=P(Bn(c)[H],1/Fe),ct=Y[B],at=me(),se=ge(),ut=at[V],pt=Ne(at,se)+ut/2,yt=ct-se[C],qe=Q?0:yt-pt,dt=le=>{$n(O),G.releasePointerCapture(le.pointerId)},We=Q||j,q=h(),O=[xi(d,y,dt),xi(d,"selectstart",le=>om(le),{H:!1}),xi(m,y,dt),We&&xi(m,"pointermove",le=>He(qe+(le[B]-ct))),We&&(()=>{const le=Bn(c);q();const Ce=Bn(c),Re={x:Ce.x-le.x,y:Ce.y-le.y};(Td(Re.x)>3||Td(Re.y)>3)&&(h(),qs(c,le),S(Re),E(q))})];if(G.setPointerCapture(Y.pointerId),j)He(qe);else if(!Q){const le=Hc(eO);if(le){const Ce=le(He,qe,ut,Re=>{Re?q():Ci(O,q)});Ci(O,Ce),Ci(F,Rt(Ce,!0))}}}})};let D=!0;return Rt($n,[xi(b,"pointermove pointerleave",n),xi(f,"pointerenter",()=>{r(q0,!0)}),xi(f,"pointerleave pointercancel",()=>{r(q0,!1)}),!u&&xi(f,"mousedown",()=>{const y=nm();(N0(y,br)||N0(y,so)||y===document.body)&&Md(Rt(am,l),25)}),xi(f,"wheel",y=>{const{deltaX:B,deltaY:V,deltaMode:C}=y;D&&C===0&&wc(f)===a&&S({x:B,y:V}),D=!1,r(K0,!0),v(()=>{D=!0,r(K0)}),om(y)},{H:!1,I:!0}),xi(f,"pointerdown",Rt(xi,d,"click",Fw,{A:!0,I:!0,H:!1}),{I:!0}),I(),g,w])},rO=(i,e,t,n,s,r)=>{let o,a,l,u,c,d=Bo,h=0;const f=J=>J.pointerType==="mouse",[m,b]=Ra(),[v,g]=Ra(100),[E,w]=Ra(100),[S,I]=Ra(()=>h),[D,y]=nO(i,s,n,sO(e,s,n,J=>f(J)&&G())),{ht:B,Qt:V,wt:C}=s,{jt:A,Nt:H,qt:P,Bt:F,Ft:Y}=D,Q=(J,W)=>{if(I(),J)A(Y0);else{const oe=Rt(A,Y0,!0);h>0&&!W?S(oe):oe()}},G=()=>{(l?!o:!u)&&(Q(!0),v(()=>{Q(!1)}))},z=J=>{A(um,J,!0),A(um,J,!1)},ue=J=>{f(J)&&(o=l,l&&Q(!0))},Ee=[I,g,w,b,()=>d(),xi(B,"pointerover",ue,{A:!0}),xi(B,"pointerenter",ue),xi(B,"pointerleave",J=>{f(J)&&(o=!1,l&&Q(!1))}),xi(B,"pointermove",J=>{f(J)&&a&&G()}),xi(V,"scroll",J=>{m(()=>{P(),G()}),r(J),Y()})];return[()=>Rt($n,Ci(Ee,y())),({It:J,Dt:W,Zt:oe,tn:ie})=>{const{nn:j,sn:me,en:ge,cn:Ne}=ie||{},{Ct:Fe,dt:He}=oe||{},{ct}=t,{k:at}=Js(),{K:se,rn:ut}=n,[pt,yt]=J("showNativeOverlaidScrollbars"),[qe,dt]=J("scrollbars.theme"),[We,q]=J("scrollbars.visibility"),[O,le]=J("scrollbars.autoHide"),[Ce,Re]=J("scrollbars.autoHideSuspend"),[pe]=J("scrollbars.autoHideDelay"),[Xe,$e]=J("scrollbars.dragScroll"),[it,Ot]=J("scrollbars.clickScroll"),[ke,rt]=J("overflow"),_t=He&&!W,mt=ut.x||ut.y,Ye=j||me||Ne||Fe||W,wt=ge||q||rt,St=pt&&at.x&&at.y,kt=(ce,Ge,Pe)=>{const Oe=ce.includes(Za)&&(We===Yr||We==="auto"&&Ge===Za);return A(FD,Oe,Pe),Oe};if(h=pe,_t&&(Ce&&mt?(z(!1),d(),E(()=>{d=xi(V,"scroll",Rt(z,!0),{A:!0})})):z(!0)),yt&&A(DD,St),dt&&(A(c),A(qe,!0),c=qe),Re&&!Ce&&z(!0),le&&(a=O==="move",l=O==="leave",u=O==="never",Q(u,!0)),$e&&A(BD,Xe),Ot&&A(zD,!!it),wt){const ce=kt(ke.x,se.x,!0),Ge=kt(ke.y,se.y,!1);A(UD,!(ce&&Ge))}Ye&&(P(),H(),Y(),Ne&&F(),A(X0,!ut.x,!0),A(X0,!ut.y,!1),A(OD,ct&&!C))},{},D]},oO=i=>{const e=Js(),{U:t,R:n}=e,{elements:s}=t(),{padding:r,viewport:o,content:a}=s,l=Ld(i),u=l?{}:i,{elements:c}=u,{padding:d,viewport:h,content:f}=c||{},m=l?i:u.target,b=Lw(m),v=m.ownerDocument,g=v.documentElement,E=()=>v.defaultView||An,w=Rt(GD,[m]),S=Rt(Ww,[m]),I=Rt(Fa,""),D=Rt(w,I,o),y=Rt(S,I,a),B=ut=>{const pt=Ua(ut),yt=Id(ut),qe=Pr(ut,_w),dt=Pr(ut,Ew);return yt.w-pt.w>0&&!Ja(qe)||yt.h-pt.h>0&&!Ja(dt)},V=D(h),C=V===m,A=C&&b,H=!C&&y(f),P=!C&&V===H,F=A?g:V,Y=A?F:m,Q=!C&&S(I,r,d),G=!P&&H,z=[G,F,Q,Y].map(ut=>Ld(ut)&&!wc(ut)&&ut),ue=ut=>ut&&hw(z,ut),Ee=!ue(F)&&B(F)?F:m,J=A?g:F,oe={vt:m,ht:Y,ot:F,ln:Q,bt:G,gt:J,Qt:A?v:F,an:b?g:Ee,Kt:v,wt:b,Mt:l,nt:C,un:E,yt:ut=>ug(F,br,ut),St:(ut,pt)=>Rd(F,br,ut,pt),Ot:()=>Rd(J,br,AD,!0)},{vt:ie,ht:j,ln:me,ot:ge,bt:Ne}=oe,Fe=[()=>{Us(j,[so,If]),Us(ie,If),b&&Us(g,[If,so])}];let He=im([Ne,ge,me,j,ie].find(ut=>ut&&!ue(ut)));const ct=A?ie:Ne||ge,at=Rt($n,Fe);return[oe,()=>{const ut=E(),pt=nm(),yt=O=>{zn(wc(O),im(O)),Qa(O)},qe=O=>xi(O,"focusin focusout focus blur",Fw,{I:!0,H:!1}),dt="tabindex",We=lg(ge,dt),q=qe(pt);return yr(j,so,C?"":SD),yr(me,cm,""),yr(ge,br,""),yr(Ne,j0,""),C||(yr(ge,dt,We||"-1"),b&&yr(g,W0,"")),zn(ct,He),zn(j,me),zn(me||j,!C&&ge),zn(ge,Ne),Ci(Fe,[q,()=>{const O=nm(),le=ue(ge),Ce=le&&O===ge?ie:O,Re=qe(Ce);Us(me,cm),Us(Ne,j0),Us(ge,br),b&&Us(g,W0),We?yr(ge,dt,We):Us(ge,dt),ue(Ne)&&yt(Ne),le&&yt(ge),ue(me)&&yt(me),am(Ce),Re()}]),n&&!C&&(cg(ge,br,Hw),Ci(Fe,Rt(Us,ge,br))),am(!C&&b&&pt===ie&&ut.top===ut?ge:pt),q(),He=0,at},at]},aO=({bt:i})=>({Zt:e,_n:t,Dt:n})=>{const{xt:s}=e||{},{$t:r}=t;i&&(s||n)&&xc(i,{[nh]:r&&"100%"})},lO=({ht:i,ln:e,ot:t,nt:n},s)=>{const[r,o]=Fn({i:pD,o:F0()},Rt(F0,i,"padding",""));return({It:a,Zt:l,_n:u,Dt:c})=>{let[d,h]=o(c);const{R:f}=Js(),{ft:m,Ht:b,Ct:v}=l||{},{ct:g}=u,[E,w]=a("paddingAbsolute");(m||h||(c||b))&&([d,h]=r(c));const I=!n&&(w||v||h);if(I){const D=!E||!e&&!f,y=d.r+d.l,B=d.t+d.b,V={[yw]:D&&!g?-y:0,[bw]:D?-B:0,[vw]:D&&g?-y:0,top:D?-d.t:0,right:D?g?-d.r:"auto":0,left:D?g?"auto":-d.l:0,[ih]:D&&`calc(100% + ${y}px)`},C={[fw]:D?d.t:0,[pw]:D?d.r:0,[gw]:D?d.b:0,[mw]:D?d.l:0};xc(e||t,V),xc(t,C),si(s,{ln:d,dn:!D,rt:e?C:si({},V,C)})}return{fn:I}}},cO=(i,e)=>{const t=Js(),{ht:n,ln:s,ot:r,nt:o,Qt:a,gt:l,wt:u,St:c,un:d}=i,{R:h}=t,f=u&&o,m=Rt(uw,0),b={display:()=>!1,direction:W=>W!=="ltr",flexDirection:W=>W.endsWith("-reverse"),writingMode:W=>W!=="horizontal-tb"},v=Cs(b),g={i:ww,o:{w:0,h:0}},E={i:ed,o:{}},w=W=>{c(Bw,!f&&W)},S=W=>{if(!v.some(ct=>{const at=W[ct];return at&&b[ct](at)}))return{D:{x:0,y:0},M:{x:1,y:1}};w(!0);const ie=Bn(l),j=c(PD,!0),me=xi(a,Za,ct=>{const at=Bn(l);ct.isTrusted&&at.x===ie.x&&at.y===ie.y&&kw(ct)},{I:!0,A:!0});qs(l,{x:0,y:0}),j();const ge=Bn(l),Ne=Id(l);qs(l,{x:Ne.w,y:Ne.h});const Fe=Bn(l);qs(l,{x:Fe.x-ge.x<1&&-Ne.w,y:Fe.y-ge.y<1&&-Ne.h});const He=Bn(l);return qs(l,ie),ig(()=>me()),{D:ge,M:He}},I=(W,oe)=>{const ie=An.devicePixelRatio%1!==0?1:0,j={w:m(W.w-oe.w),h:m(W.h-oe.h)};return{w:j.w>ie?j.w:0,h:j.h>ie?j.h:0}},[D,y]=Fn(g,Rt(hg,r)),[B,V]=Fn(g,Rt(Id,r)),[C,A]=Fn(g),[H]=Fn(E),[P,F]=Fn(g),[Y]=Fn(E),[Q]=Fn({i:(W,oe)=>sh(W,oe,v),o:{}},()=>ED(r)?Pr(r,v):{}),[G,z]=Fn({i:(W,oe)=>ed(W.D,oe.D)&&ed(W.M,oe.M),o:Uw()}),ue=Hc(Kw),Ee=(W,oe)=>`${oe?TD:MD}${fD(W)}`,J=W=>{const oe=j=>[Yr,Uo,Za].map(me=>Ee(me,j)),ie=oe(!0).concat(oe()).join(" ");c(ie),c(Cs(W).map(j=>Ee(W[j],j==="x")).join(" "),!0)};return({It:W,Zt:oe,_n:ie,Dt:j},{fn:me})=>{const{ft:ge,Ht:Ne,Ct:Fe,dt:He,zt:ct}=oe||{},at=ue&&ue.tt(i,e,ie,t,W),{it:se,ut,_t:pt}=at||{},[yt,qe]=QD(W,t),[dt,We]=W("overflow"),q=Ja(dt.x),O=Ja(dt.y),le=!0;let Ce=y(j),Re=V(j),pe=A(j),Xe=F(j);qe&&h&&c(Hw,!yt);{ug(n,so,id)&&w(!0);const[Bt]=ut?ut():[],[Si]=Ce=D(j),[Hi]=Re=B(j),Wn=Ow(r),cn=f&&_D(d()),qi={w:m(Hi.w+Si.w),h:m(Hi.h+Si.h)},jn={w:m((cn?cn.w:Wn.w+m(Wn.w-Hi.w))+Si.w),h:m((cn?cn.h:Wn.h+m(Wn.h-Hi.h))+Si.h)};Bt&&Bt(),Xe=P(jn),pe=C(I(qi,jn),j)}const[$e,it]=Xe,[Ot,ke]=pe,[rt,_t]=Re,[mt,Ye]=Ce,[wt,St]=H({x:Ot.w>0,y:Ot.h>0}),kt=q&&O&&(wt.x||wt.y)||q&&wt.x&&!wt.y||O&&wt.y&&!wt.x,ce=me||Fe||ct||Ye||_t||it||ke||We||qe||le,Ge=JD(wt,dt),[Pe,Oe]=Y(Ge.K),[je,et]=Q(j),Ut=Fe||He||et||St||j,[jt,Qt]=Ut?G(S(je),j):z();return ce&&(Oe&&J(Ge.K),pt&&se&&xc(r,pt(Ge,ie,se(Ge,rt,mt)))),w(!1),Rd(n,so,id,kt),Rd(s,cm,id,kt),si(e,{K:Pe,Vt:{x:$e.w,y:$e.h},Rt:{x:Ot.w,y:Ot.h},rn:wt,Lt:wD(jt,Ot)}),{en:Oe,nn:it,sn:ke,cn:Qt||ke,vn:Ut}}},uO=i=>{const[e,t,n]=oO(i),s={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[yw]:0,[bw]:0,[vw]:0,[fw]:0,[pw]:0,[gw]:0,[mw]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:Uo,y:Uo},rn:{x:!1,y:!1},Lt:Uw()},{vt:r,gt:o,nt:a,Ot:l}=e,{R:u,k:c}=Js(),d=!u&&(c.x||c.y),h=[aO(e),lO(e,s),cO(e,s)];return[t,f=>{const m={},v=d&&Bn(o),g=v&&l();return mi(h,E=>{si(m,E(f,m)||{})}),qs(o,v),g&&g(),!a&&qs(r,0),m},s,e,n]},dO=(i,e,t,n,s)=>{let r=!1;const o=G0(e,{}),[a,l,u,c,d]=uO(i),[h,f,m]=iO(c,u,o,S=>{w({},S)}),[b,v,,g]=rO(i,e,m,u,c,s),E=S=>Cs(S).some(I=>!!S[I]),w=(S,I)=>{if(t())return!1;const{pn:D,Dt:y,At:B,hn:V}=S,C=D||{},A=!!y||!r,H={It:G0(e,C,A),pn:C,Dt:A};if(V)return v(H),!1;const P=I||f(si({},H,{At:B})),F=l(si({},H,{_n:m,Zt:P}));v(si({},H,{Zt:P,tn:F}));const Y=E(P),Q=E(F),G=Y||Q||!ag(C)||A;return r=!0,G&&n(S,{Zt:P,tn:F}),G};return[()=>{const{an:S,gt:I,Ot:D}=c,y=Bn(S),B=[h(),a(),b()],V=D();return qs(I,y),V(),Rt($n,B)},w,()=>({gn:m,bn:u}),{wn:c,yn:g},d]},Wo=(i,e,t)=>{const{N:n}=Js(),s=Ld(i),r=s?i:i.target,o=jw(r);if(e&&!o){let a=!1;const l=[],u={},c=C=>{const A=Sw(C),H=Hc(KD);return H?H(A,!0):A},d=si({},n(),c(e)),[h,f,m]=lm(),[b,v,g]=lm(t),E=(C,A)=>{g(C,A),m(C,A)},[w,S,I,D,y]=dO(i,d,()=>a,({pn:C,Dt:A},{Zt:H,tn:P})=>{const{ft:F,Ct:Y,xt:Q,Ht:G,Et:z,dt:ue}=H,{nn:Ee,sn:J,en:W,cn:oe}=P;E("updated",[V,{updateHints:{sizeChanged:!!F,directionChanged:!!Y,heightIntrinsicChanged:!!Q,overflowEdgeChanged:!!Ee,overflowAmountChanged:!!J,overflowStyleChanged:!!W,scrollCoordinatesChanged:!!oe,contentMutation:!!G,hostMutation:!!z,appear:!!ue},changedOptions:C||{},force:!!A}])},C=>E("scroll",[V,C])),B=C=>{qD(r),$n(l),a=!0,E("destroyed",[V,C]),f(),v()},V={options(C,A){if(C){const H=A?n():{},P=zw(d,si(H,c(C)));ag(P)||(si(d,P),S({pn:P}))}return si({},d)},on:b,off:(C,A)=>{C&&A&&v(C,A)},state(){const{gn:C,bn:A}=I(),{ct:H}=C,{Vt:P,Rt:F,K:Y,rn:Q,ln:G,dn:z,Lt:ue}=A;return si({},{overflowEdge:P,overflowAmount:F,overflowStyle:Y,hasOverflow:Q,scrollCoordinates:{start:ue.D,end:ue.M},padding:G,paddingAbsolute:z,directionRTL:H,destroyed:a})},elements(){const{vt:C,ht:A,ln:H,ot:P,bt:F,gt:Y,Qt:Q}=D.wn,{Xt:G,Gt:z}=D.yn,ue=J=>{const{Pt:W,Ut:oe,Tt:ie}=J;return{scrollbar:ie,track:oe,handle:W}},Ee=J=>{const{Yt:W,Wt:oe}=J,ie=ue(W[0]);return si({},ie,{clone:()=>{const j=ue(oe());return S({hn:!0}),j}})};return si({},{target:C,host:A,padding:H||P,viewport:P,content:F||P,scrollOffsetElement:Y,scrollEventElement:Q,scrollbarHorizontal:Ee(G),scrollbarVertical:Ee(z)})},update:C=>S({Dt:C,At:!0}),destroy:Rt(B,!1),plugin:C=>u[Cs(C)[0]]};return Ci(l,[y]),jD(r,V),Yw(qw,Wo,[V,h,u]),WD(D.wn.wt,!s&&i.cancel)?(B(!0),V):(Ci(l,w()),E("initialized",[V]),V.update(),V)}return o};Wo.plugin=i=>{const e=Qs(i),t=e?i:[i],n=t.map(s=>Yw(s,Wo)[0]);return YD(t),e?n:n[0]};Wo.valid=i=>{const e=i&&i.elements,t=fs(e)&&e();return Pd(t)&&!!jw(t.target)};Wo.env=()=>{const{T:i,k:e,R:t,V:n,B:s,F:r,U:o,P:a,N:l,q:u}=Js();return si({},{scrollbarsSize:i,scrollbarsOverlaid:e,scrollbarsHiding:t,scrollTimeline:n,staticDefaultInitialization:s,staticDefaultOptions:r,getDefaultInitialization:o,setDefaultInitialization:a,getDefaultOptions:l,setDefaultOptions:u})};Wo.nonce=VD;document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".os-scrollbar-overflow").forEach(e=>{Wo(e,{})})});function hO(i){let e=i,t;function n(s){if(window.innerWidth<=s){t||(t=document.querySelector('meta[name="viewport"]'));let o=document.querySelector('meta[name="viewport"]'),a=document.createElement("meta");a.setAttribute("name","viewport"),a.setAttribute("content",`width=${s}`),document.head.replaceChild(a,o)}else if(t&&document.querySelector('meta[name="viewport"]')!=t){let o=document.querySelector('meta[name="viewport"]');document.head.replaceChild(t,o)}}window.addEventListener("resize",function(){n(e)}),n(e)}function fO(){let i=window.navigator.userAgent.toLowerCase(),e;switch(!0){case i.indexOf("edge")>-1:e="msEdge";break;case i.indexOf("edg/")>-1:e="chrEdge";break;case(i.indexOf("opr")>-1&&!!window.opr):e="opera";break;case(i.indexOf("chrome")>-1&&!!window.chrome):e="Ñhrome";break;case i.indexOf("trident")>-1:e="ie";break;case i.indexOf("firefox")>-1:e="firefox";break;case i.indexOf("safari")>-1:e="safari";break;default:e="other"}(e=="safari"||e=="firefox")&&hO(430)}fO();ve(document).on("click",'a.anchor[href^="#"]',function(i){var e=ve(this);ve("html, body").stop().animate({scrollTop:ve(e.attr("href")).offset().top-70},800),i.preventDefault()});var dm=ve("#btnTop");ve(window).scroll(function(){ve(window).scrollTop()>145?dm.addClass("show"):dm.removeClass("show")});dm.on("click",function(i){i.preventDefault(),ve("html, body").animate({scrollTop:0},"145")});function hs(i){if(ve(i).length>0){var e=ve("header").outerHeight(),t=ve(i).offset().top-e-20;ve("html, body").animate({scrollTop:t},"slow")}}function ah(i,e,t){if(t<5)throw"maxLength must be at least 5";function n(a,l){return Array.from(Array(l-a+1),(u,c)=>c+a)}var s=t<9?1:2,r=t-s*2-3>>1,o=t-s*2-2>>1;return i<=t?n(1,i):e<=t-s-1-o?n(1,t-s-1).concat([0]).concat(n(i-s+1,i)):e>=i-s-1-o?n(1,s).concat([0]).concat(n(i-s-1-o-r,i)):n(1,s).concat([0]).concat(n(e-r,e+o)).concat([0]).concat(n(i-s+1,i))}ve(function(){var i="#doctors",e=ve("#doctors .content-item").length,t=screen.width;if(t<768)var n=5;else if(t<1024)var n=8;else var n=12;var s=Math.ceil(e/n),r=7,o;function a(l){return l<1||l>s?!1:(o=l,ve(i+" .content-item").hide().slice((o-1)*n,o*n).show(),ve(i+" .pagination li").slice(1,-1).remove(),ah(s,o,r).forEach(u=>{ve("<li>").addClass("page-item "+(u?"current-page ":"")+(u===o?"active ":"")).append(ve("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),o===1?ve("#previous-page").addClass("active"):ve("#previous-page").removeClass("active"),o===s?ve("#next-page").addClass("active"):ve("#next-page").removeClass("active"),!0)}ve("#doctors .pagination").append(ve("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ve("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ve("#doctors").show(),a(1)):ve("#doctors .pagination").hide(),ve(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ve(this).text();a(l),hs(i)}),ve(i+" #next-page").on("click",function(){if(o<s){var l=o+1;a(l),hs(i)}}),ve(i+" #previous-page").on("click",function(){if(o>1){var l=o-1;a(l),hs(i)}})});ve(function(){var i="#shares",e=ve("#shares .content-item").length,t=screen.width;if(t<768)var n=5;else if(t<1200)var n=8;else var n=9;var s=Math.ceil(e/n),r=7,o;function a(l){return l<1||l>s?!1:(o=l,ve(i+" .content-item").hide().slice((o-1)*n,o*n).show(),ve(i+" .pagination li").slice(1,-1).remove(),ah(s,o,r).forEach(u=>{ve("<li>").addClass("page-item "+(u?"current-page ":"")+(u===o?"active ":"")).append(ve("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),o===1?ve("#previous-page").addClass("active"):ve("#previous-page").removeClass("active"),o===s?ve("#next-page").addClass("active"):ve("#next-page").removeClass("active"),!0)}ve("#shares .pagination").append(ve("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ve("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ve("#shares").show(),a(1)):ve("#shares .pagination").hide(),ve(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ve(this).text();a(l),hs(i)}),ve(i+" #next-page").on("click",function(){if(o<s){var l=o+1;a(l),hs(i)}}),ve(i+" #previous-page").on("click",function(){if(o>1){var l=o-1;a(l),hs(i)}})});ve(function(){var i="#reviews",e=ve("#reviews .content-item").length,t=screen.width;if(t<1024)var n=5;else var n=8;var s=Math.ceil(e/n),r=7,o;function a(l){return l<1||l>s?!1:(o=l,ve(i+" .content-item").hide().slice((o-1)*n,o*n).show(),ve(i+" .pagination li").slice(1,-1).remove(),ah(s,o,r).forEach(u=>{ve("<li>").addClass("page-item "+(u?"current-page ":"")+(u===o?"active ":"")).append(ve("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),o===1?ve("#previous-page").addClass("active"):ve("#previous-page").removeClass("active"),o===s?ve("#next-page").addClass("active"):ve("#next-page").removeClass("active"),!0)}ve("#reviews .pagination").append(ve("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ve("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ve("#reviews").show(),a(1)):ve("#reviews .pagination").hide(),ve(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ve(this).text();a(l),hs(i)}),ve(i+" #next-page").on("click",function(){if(o<s){var l=o+1;a(l),hs(i)}}),ve(i+" #previous-page").on("click",function(){if(o>1){var l=o-1;a(l),hs(i)}})});ve(function(){var i="#news",e=ve("#news .content-item").length,t=screen.width;if(t<768)var n=5;else if(t<1200)var n=8;else var n=9;var s=Math.ceil(e/n),r=9,o;function a(l){return l<1||l>s?!1:(o=l,ve(i+" .content-item").hide().slice((o-1)*n,o*n).show(),ve(i+" .pagination li").slice(1,-1).remove(),ah(s,o,r).forEach(u=>{ve("<li>").addClass("page-item "+(u?"current-page ":"")+(u===o?"active ":"")).append(ve("<a>").addClass("page-link").attr({href:"javascript:void(0)"}).text(u||"...")).insertBefore(i+" #next-page")}),o===1?ve("#previous-page").addClass("active"):ve("#previous-page").removeClass("active"),o===s?ve("#next-page").addClass("active"):ve("#next-page").removeClass("active"),!0)}ve("#news .pagination").append(ve("<li>").addClass("page-item button-slider-prev").attr({id:"previous-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"})),ve("<li>").addClass("page-item button-slider-next").attr({id:"next-page"}).append(ve('<a><svg><use xlink:href="img/icons/icons.svg#i-arrow-small-down">').addClass("page-link").attr({href:"javascript:void(0)"}))),s>1?(ve("#news").show(),a(1)):ve("#news .pagination").hide(),ve(document).on("click",i+" .pagination li.current-page:not(.active)",function(){var l=+ve(this).text();a(l),hs(i)}),ve(i+" #next-page").on("click",function(){if(o<s){var l=o+1;a(l),hs(i)}}),ve(i+" #previous-page").on("click",function(){if(o>1){var l=o-1;a(l),hs(i)}})});let Q0=0;ve(window).scroll(function(i){let e=ve(this).scrollTop(),t=15,n=15;ve(window).width()<1024&&(t=5,n=5),e>Q0&&ve(window).scrollTop()>=n?(ve(".header").removeClass("header--show").addClass("header--hide"),ve("main").addClass("show")):(ve(".header").removeClass("header--hide"),ve(window).scrollTop()<=t?(ve(".header").removeClass("header--show"),ve("main").removeClass("show")):(ve(".header").addClass("header--show"),ve("main").addClass("show"))),Q0=e});setInterval(function(){ve(".header").hasClass("header--hide")&&(ve(".header-top .current-lang").removeClass("active"),ve(".header-top .current-lang--inner").removeClass("active"),ve(".header-top .current-lang .submenu").removeClass("active"))},300);Qw(ve(".header .languages .current-lang .current-lang--inner"),ve(".header .languages .current-lang .submenu"),ve(".header .languages .current-lang"));Qw(ve(".header-main--desk .nav-link .nav-link--inner"),ve(".header-main--desk .nav-link .submenu"),ve(".header-main--desk .nav-link"));function Qw(i,e,t){i.each(function(n){pO(ve(this),e.eq(n),t.eq(n))})}function pO(i,e,t){ve(document).mouseup(function(n){t.is(n.target)||t.has(n.target).length!==0?t.hasClass("active")?(i.is(n.target)||i.has(n.target).length!==0)&&i.hasClass("active")&&(e.removeClass("active"),t.removeClass("active"),i.removeClass("active")):(e.addClass("active"),t.addClass("active"),i.addClass("active")):!e.is(n.target)&&e.has(n.target).length===0&&(e.removeClass("active"),t.removeClass("active"),i.removeClass("active"))})}(function(){function i(){var n=document.createElement("div"),s={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var r in s)if(s.hasOwnProperty(r)&&n.style[r]!==void 0)return s[r]}function e(n,s){var r={};for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);for(var o in s)s.hasOwnProperty(o)&&n.hasOwnProperty(o)&&(r[o]=s[o]);return r}var t=function(n){var s=this;this.curItem=null,this.curLevel=0,this.transitionEnd=i(),this.options={};var r={initElem:".push-menu",menuTitle:"Menu"};n&&typeof n=="object"?this.options=e(r,n):this.options=r,this.options.menuTitle=this.options.initElem.find(".nav-title").text().trim()||this.options.menuTitle,t.prototype.setMenuTitle=function(c){return s.options.menuTitle=c,l(s),c},function(c){o(c),l(c)}(this);function o(c){c.options.initElem.find(".navbar-toggler").on("click",function(d){d.preventDefault(),c.curItem=ve(this).parent(),a(c,"start")}),c.options.initElem.on("click",".has-dropdown > a",function(d){d.preventDefault(),c.curItem=ve(this).parent(),a(c,"forward")}),c.options.initElem.on("click",".nav-back",function(){a(c,"back")})}function a(c,d){u(c,d),d==="back"||d==="start"?(c.curItem.removeClass("nav-dropdown-open nav-dropdown-active"),c.curItem=c.curItem.parent().closest(".item"),c.curItem.length&&c.curItem.addClass("nav-dropdown-open nav-dropdown-active"),l(c)):(c.curItem.addClass("nav-dropdown-open nav-dropdown-active"),l(c))}function l(c){var d=c.options.menuTitle;if(c.curLevel>0)if(d=c.curItem.children("a").text().trim(),c.options.initElem.find(".nav-toggle").addClass("back-visible"),c.options.initElem.find(".nav-title").parent().is("a"))c.options.initElem.find(".nav-title").text(d);else{var h='<a href="##"><span class="nav-title h3">'+d+"</span></a>";c.options.initElem.find(".nav-toggle").find(".nav-title").replaceWith(h)}else{c.options.initElem.find(".nav-toggle").removeClass("back-visible");var f='<span class="nav-title h3">'+d+"</span>";c.options.initElem.find(".nav-toggle").find(".nav-title").replaceWith(f);var m=c.options.initElem.find(".nav-toggle").find("a");if(m.length){var b=m.text();m.replaceWith('<span class="nav-title h3">'+b+"</span>")}}}function u(c,d){d==="back"?c.curLevel=c.curLevel>0?c.curLevel-1:0:d==="forward"?c.curLevel+=1:c.curLevel=0,c.options.initElem.children(".push-menu--nav").children(".push-menu--lvl").css({transform:"translateX(-"+c.curLevel*100+"%)"})}};ve(document).ready(function(){ve(".header-main--desk .push-menu, .header-main--mob .push-menu").each(function(){new t({initElem:ve(this)})})})})();ve(document).ready(function(){let i=document.querySelector("body"),e=document.querySelector(".navbar-toggler"),t=document.querySelector(".popup-bg-body"),n=!0;e.addEventListener("click",function(s){n?(i.classList.add("lock"),t.classList.add("open"),n=!1,setTimeout(function(){n=!0},1e3)):s.preventDefault()}),setInterval(function(){ve(t).hasClass("collapsed")&&(i.classList.remove("lock"),t.classList.remove("open"))},100)});ve(document).mouseup(function(i){!ve(".header").is(i.target)&&ve(".header").has(i.target).length===0&&(ve(".popup-bg-body").removeClass("open"),ve("body").removeClass("lock"))});setInterval(function(){window.innerWidth>=1024&&ve(".navbar-collapse").hasClass("show")&&ve(".navbar-toggler").click()},1e3);let mO=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${mO}px`);window.addEventListener("resize",()=>{let i=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${i}px`)});const gO=document.querySelectorAll(".form-textarea");document.querySelectorAll(".textarea-counter .count");function vO(i){const e=i.target,t=e.parentElement.querySelector(".textarea-counter .count");t.textContent=e.value.length}gO.forEach(i=>{i.addEventListener("input",vO)});function gg(){var i=document.querySelectorAll(".select2-results__options");i.forEach(function(e){e.scrollHeight>e.clientHeight?(e.classList.add("has-scrollbar"),e.classList.remove("no-scrollbar")):(e.classList.add("no-scrollbar"),e.classList.remove("has-scrollbar"))})}function yO(){const i=new MutationObserver(t=>{for(let n of t)n.type==="attributes"&&n.attributeName==="class"&&n.target.classList.contains("select2-container--open")&&gg()}),e={attributes:!0,subtree:!0,childList:!0};i.observe(document.body,e)}window.onload=function(){gg(),yO()};window.onresize=gg;window.addEventListener("resize",i=>{});window.addEventListener("load",function(){setTimeout(()=>{},500)},!1);ve(document).ready(function(){});(function(){var i=function(e){var t=this;this.curItem=null,this.curLevel=0,this.transitionEnd=r(),this.options={};var n={initElem:".push-menu"};e&&typeof e=="object"?this.options=s(n,e):this.options=n;function s(u,c){var d={};for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h]);for(var h in c)c.hasOwnProperty(h)&&u.hasOwnProperty(h)&&(d[h]=c[h]);return d}i.prototype.getCurrentItem=function(){return t.curItem},function(u){o(u)}(this);function r(){var u=document.createElement("div"),c={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var d in c)if(c.hasOwnProperty(d)&&u.style[d]!==void 0)return c[d]}function o(u){u.options.initElem.find(".btn-nav-back").on("click",function(c){c.preventDefault(),a(u,"back")}),u.options.initElem.find(".btn-nav-forward").on("click",function(c){c.preventDefault(),u.curItem=ve(this).closest(".push-menu").find(".item.has-dropdown").first(),a(u,"forward")}),u.options.initElem.on("click",".has-dropdown > a",function(c){c.preventDefault(),u.curItem=ve(this).parent(),a(u,"forward")})}function a(u,c){l(u,c),c==="back"?u.curItem&&(u.curItem.removeClass("nav-dropdown-open nav-dropdown-active"),u.curItem=u.curItem.parent().closest(".item"),u.curItem.length&&u.curItem.addClass("nav-dropdown-open nav-dropdown-active")):u.curItem.addClass("nav-dropdown-open nav-dropdown-active")}function l(u,c){c==="back"?u.curLevel=u.curLevel>0?u.curLevel-1:0:c==="forward"?u.curLevel+=1:u.curLevel=0,u.options.initElem.children(".push-menu--nav").children(".push-menu--lvl").css({transform:"translateX(-"+u.curLevel*100+"%)"}),u.curLevel>0?u.options.initElem.find(".nav-toggle").addClass("back-visible"):u.options.initElem.find(".nav-toggle").removeClass("back-visible")}};ve(document).ready(function(){ve(".offices-direction .push-menu").each(function(){new i({initElem:ve(this)})})})})();ve(document).on("click",'a.anchor[href^="#"]',function(i){var e=ve(this);ve("html, body").stop().animate({scrollTop:ve(e.attr("href")).offset().top-140},800),i.preventDefault()});const bO=document.querySelectorAll(".btn-read-more--check-up");bO.forEach(i=>{i.addEventListener("click",function(){const e=this.closest(".check-up--item");e.classList.contains("active")?(e.classList.remove("active"),this.textContent="ÐÐµÑÐ°Ð»ÑÐ½ÑÑÐµ"):(document.querySelectorAll(".check-up--item").forEach(t=>{t.classList.remove("active"),t.querySelector(".btn-read-more--check-up").textContent="ÐÐµÑÐ°Ð»ÑÐ½ÑÑÐµ"}),e.classList.add("active"),this.textContent="ÐÐ³Ð¾ÑÐ½ÑÑÐ¸")})});function Jw(){if(window.innerWidth>=768){var i=document.getElementById("doctor-features--inner-1"),e=document.getElementById("doctor-features--inner-2");if(i&&e){var t=e.offsetHeight;i.style.height=t+"px"}}}window.onload=Jw;window.onresize=Jw;
